/*! For license information please see 122.js.LICENSE.txt */
"use strict";(self.webpackChunkStarpyApp=self.webpackChunkStarpyApp||[]).push([[122],{722274:(e,t,n)=>{function r(e,t){if(!e)throw new Error(t)}function i(e,t){throw new Error(null!==t&&void 0!==t?t:"Unexpected object: "+e)}n.r(t),n.d(t,{assert:()=>r,assertFloat32:()=>d,assertInt32:()=>l,assertNever:()=>i,assertUInt32:()=>f});const a=34028234663852886e22,s=-34028234663852886e22,o=4294967295,c=2147483647,u=-2147483648;function l(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>c||e<u)throw new Error("invalid int 32: "+e)}function f(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>o||e<0)throw new Error("invalid uint 32: "+e)}function d(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>a||e<s))throw new Error("invalid float 32: "+e)}},177688:(e,t,n)=>{var r,i;function a(e,t){return Object.assign(Object.assign({},e),t)}n.r(t),n.d(t,{UnknownFieldHandler:()=>r,WireType:()=>i,mergeBinaryOptions:()=>a}),function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,a,s)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:a,data:s})},e.onWrite=(t,n,r)=>{for(let{no:i,wireType:a,data:s}of e.list(n))r.tag(i,a).raw(s)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter((e=>e.no==r)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(r||(r={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(i||(i={}))},580945:(e,t,n)=>{n.r(t),n.d(t,{BinaryReader:()=>c,binaryReadOptions:()=>o});var r=n(177688),i=n(320241),a=n(568060);const s={readUnknownField:!0,readerFactory:e=>new c(e)};function o(e){return e?Object.assign(Object.assign({},s),e):s}class c{constructor(e,t){this.varint64=a.varint64read,this.uint32=a.varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case r.WireType.Varint:for(;128&this.buf[this.pos++];);break;case r.WireType.Bit64:this.pos+=4;case r.WireType.Bit32:this.pos+=4;break;case r.WireType.LengthDelimited:let t=this.uint32();this.pos+=t;break;case r.WireType.StartGroup:let n;for(;(n=this.tag()[1])!==r.WireType.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new i.PbLong(...this.varint64())}uint64(){return new i.PbULong(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new i.PbLong(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new i.PbULong(this.sfixed32(),this.sfixed32())}sfixed64(){return new i.PbLong(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}},334589:(e,t,n)=>{n.r(t),n.d(t,{BinaryWriter:()=>c,binaryWriteOptions:()=>o});var r=n(320241),i=n(568060),a=n(722274);const s={writeUnknownFields:!0,writerFactory:()=>new c};function o(e){return e?Object.assign(Object.assign({},s),e):s}class c{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for((0,a.assertUInt32)(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return(0,a.assertInt32)(e),(0,i.varint32write)(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){(0,a.assertFloat32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){(0,a.assertUInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){(0,a.assertInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return(0,a.assertInt32)(e),e=(e<<1^e>>31)>>>0,(0,i.varint32write)(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=r.PbLong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=r.PbULong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=r.PbLong.from(e);return(0,i.varint64write)(t.lo,t.hi,this.buf),this}sint64(e){let t=r.PbLong.from(e),n=t.hi>>31,a=t.lo<<1^n,s=(t.hi<<1|t.lo>>>31)^n;return(0,i.varint64write)(a,s,this.buf),this}uint64(e){let t=r.PbULong.from(e);return(0,i.varint64write)(t.lo,t.hi,this.buf),this}}},568060:(e,t,n)=>{function r(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function i(e,t,n){for(let a=0;a<28;a+=7){const r=e>>>a,i=!(r>>>7==0&&0==t),s=255&(i?128|r:r);if(n.push(s),!i)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0),a=255&(i?128|r:r);if(n.push(a),!i)return}n.push(t>>>31&1)}}n.r(t),n.d(t,{int64fromString:()=>s,int64toString:()=>o,varint32read:()=>u,varint32write:()=>c,varint64read:()=>r,varint64write:()=>i});const a=4294967296;function s(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(t,s){const o=Number(e.slice(t,s));i*=n,r=r*n+o,r>=a&&(i+=r/a|0,r%=a)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function o(e,t){if(t>>>0<=2097151)return""+(a*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,s=n+8147497*r,o=2*r,c=1e7;function u(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=c&&(s+=Math.floor(i/c),i%=c),s>=c&&(o+=Math.floor(s/c),s%=c),u(o,0)+u(s,o)+u(i,1)}function c(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function u(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}},320241:(e,t,n)=>{n.r(t),n.d(t,{PbLong:()=>d,PbULong:()=>f,detectBi:()=>a});var r=n(568060);let i;function a(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64;i=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}function s(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}a();const o=/^-?[0-9]+$/,c=4294967296,u=2147483648;class l{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*c+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class f extends l{static from(e){if(i)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=i.C(e);case"number":if(0===e)return this.ZERO;e=i.C(e);case"bigint":if(!e)return this.ZERO;if(e<i.UMIN)throw new Error("signed value for ulong");if(e>i.UMAX)throw new Error("ulong too large");return i.V.setBigUint64(0,e,!0),new f(i.V.getInt32(0,!0),i.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,n,i]=(0,r.int64fromString)(e);if(t)throw new Error("signed value for ulong");return new f(n,i);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new f(e,e/c)}throw new Error("unknown value "+typeof e)}toString(){return i?this.toBigInt().toString():(0,r.int64toString)(this.lo,this.hi)}toBigInt(){return s(i),i.V.setInt32(0,this.lo,!0),i.V.setInt32(4,this.hi,!0),i.V.getBigUint64(0,!0)}}f.ZERO=new f(0,0);class d extends l{static from(e){if(i)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=i.C(e);case"number":if(0===e)return this.ZERO;e=i.C(e);case"bigint":if(!e)return this.ZERO;if(e<i.MIN)throw new Error("signed long too small");if(e>i.MAX)throw new Error("signed long too large");return i.V.setBigInt64(0,e,!0),new d(i.V.getInt32(0,!0),i.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,n,i]=(0,r.int64fromString)(e);if(t){if(i>u||i==u&&0!=n)throw new Error("signed long too small")}else if(i>=u)throw new Error("signed long too large");let a=new d(n,i);return t?a.negate():a;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new d(e,e/c):new d(-e,-e/c).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!==(this.hi&u)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new d(t,e)}toString(){if(i)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+(0,r.int64toString)(e.lo,e.hi)}return(0,r.int64toString)(this.lo,this.hi)}toBigInt(){return s(i),i.V.setInt32(0,this.lo,!0),i.V.setInt32(4,this.hi,!0),i.V.getBigInt64(0,!0)}}d.ZERO=new d(0,0)},728789:(e,t,n)=>{n.r(t),n.d(t,{AnyKeyword:()=>me,BatchingAnnotationId:()=>_,BigIntKeyword:()=>Te,BooleanKeyword:()=>xe,BrandAnnotationId:()=>h,ComposeTransformation:()=>St,ConcurrencyAnnotationId:()=>x,Declaration:()=>H,DefaultAnnotationId:()=>v,DescriptionAnnotationId:()=>S,DocumentationAnnotationId:()=>k,Enums:()=>Pe,ExamplesAnnotationId:()=>w,FinalTransformation:()=>gt,IdentifierAnnotationId:()=>y,IndexSignature:()=>Ye,JSONSchemaAnnotationId:()=>E,Literal:()=>Q,MessageAnnotationId:()=>m,MissingMessageAnnotationId:()=>g,NeverKeyword:()=>ue,NumberKeyword:()=>ve,ObjectKeyword:()=>Fe,OptionalType:()=>We,ParseIssueTitleAnnotationId:()=>I,ParseOptionsAnnotationId:()=>T,PropertySignature:()=>Je,PropertySignatureTransformation:()=>Et,Refinement:()=>ft,StableFilterAnnotationId:()=>A,StringKeyword:()=>be,SurrogateAnnotationId:()=>O,Suspend:()=>ut,SymbolKeyword:()=>Ne,TemplateLiteral:()=>je,TemplateLiteralSpan:()=>Ue,TitleAnnotationId:()=>b,Transformation:()=>pt,TupleType:()=>Ve,Type:()=>$e,TypeAnnotationId:()=>p,TypeLiteral:()=>Ze,TypeLiteralTransformation:()=>xt,UndefinedKeyword:()=>re,Union:()=>it,UniqueSymbol:()=>te,UnknownKeyword:()=>de,VoidKeyword:()=>se,annotations:()=>It,anyKeyword:()=>ge,bigIntKeyword:()=>Oe,booleanKeyword:()=>_e,compose:()=>un,composeTransformation:()=>wt,defaultParseOption:()=>ht,encodedAST:()=>Gt,encodedBoundAST:()=>Kt,flatten:()=>nt,getAnnotation:()=>N,getBatchingAnnotation:()=>$,getBrandAnnotation:()=>C,getCardinality:()=>Ht,getCompiler:()=>Bt,getConcurrencyAnnotation:()=>q,getDefaultAnnotation:()=>U,getDescriptionAnnotation:()=>P,getDocumentationAnnotation:()=>B,getExamplesAnnotation:()=>D,getIdentifierAnnotation:()=>L,getJSONIdentifier:()=>$t,getJSONIdentifierAnnotation:()=>J,getJSONSchemaAnnotation:()=>j,getMessageAnnotation:()=>R,getMissingMessageAnnotation:()=>F,getNumberIndexedAccess:()=>Nt,getParameterBase:()=>nn,getParseIssueTitleAnnotation:()=>W,getParseOptionsAnnotation:()=>z,getPropertyKeyIndexedAccess:()=>Ct,getPropertySignatures:()=>At,getSurrogateAnnotation:()=>V,getTemplateLiteralRegExp:()=>Ot,getTitleAnnotation:()=>M,getWeight:()=>tn,isAnyKeyword:()=>ye,isBigIntKeyword:()=>Ae,isBooleanKeyword:()=>Ie,isComposeTransformation:()=>vt,isDeclaration:()=>Z,isEnums:()=>De,isFinalTransformation:()=>bt,isLiteral:()=>X,isMembers:()=>st,isNeverKeyword:()=>fe,isNumberKeyword:()=>ke,isObjectKeyword:()=>Le,isParameter:()=>He,isRefinement:()=>dt,isStringKeyword:()=>we,isSuspend:()=>lt,isSymbolKeyword:()=>Re,isTemplateLiteral:()=>qe,isTransformation:()=>mt,isTupleType:()=>Ke,isTypeLiteral:()=>Xe,isTypeLiteralTransformation:()=>_t,isUndefinedKeyword:()=>ae,isUnion:()=>ot,isUniqueSymbol:()=>ne,isUnknownKeyword:()=>pe,isVoidKeyword:()=>ce,keyof:()=>Tt,mapMembers:()=>at,mutable:()=>jt,neverKeyword:()=>le,null:()=>ee,numberKeyword:()=>Ee,objectKeyword:()=>Me,omit:()=>Lt,orUndefined:()=>Pt,partial:()=>Dt,pick:()=>Mt,record:()=>Ft,rename:()=>ln,required:()=>Ut,stringKeyword:()=>Se,symbolKeyword:()=>Ce,typeAST:()=>qt,undefinedKeyword:()=>ie,unify:()=>rt,unknownKeyword:()=>he,voidKeyword:()=>oe});var r=n(630768),i=n(361369),a=n(606517),s=n(804676),o=n(977948),c=n(259877),u=n(856572),l=n(895156),f=n(641112),d=n(515407);const h=Symbol.for("@effect/schema/annotation/Brand"),p=Symbol.for("@effect/schema/annotation/Type"),m=Symbol.for("@effect/schema/annotation/Message"),g=Symbol.for("@effect/schema/annotation/MissingMessage"),y=Symbol.for("@effect/schema/annotation/Identifier"),b=Symbol.for("@effect/schema/annotation/Title"),S=Symbol.for("@effect/schema/annotation/Description"),w=Symbol.for("@effect/schema/annotation/Examples"),v=Symbol.for("@effect/schema/annotation/Default"),E=Symbol.for("@effect/schema/annotation/JSONSchema"),k=Symbol.for("@effect/schema/annotation/Documentation"),x=Symbol.for("@effect/schema/annotation/Concurrency"),_=Symbol.for("@effect/schema/annotation/Batching"),I=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),T=Symbol.for("@effect/schema/annotation/ParseOptions"),O=Symbol.for("@effect/schema/annotation/Surrogate"),A=Symbol.for("@effect/schema/annotation/StableFilter"),N=(0,i.dual)(2,((e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?o.some(e.annotations[t]):o.none())),C=N(h),R=N(m),F=N(g),M=N(b),L=N(y),P=N(S),D=N(w),U=N(v),j=N(E),B=N(k),q=N(x),$=N(_),W=N(I),z=N(T),V=N(O),G=N(A),K=Symbol.for("@effect/schema/annotation/JSONIdentifier"),J=N(K);class H{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,n,r={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=n,this.annotations=r}toString(){return o.getOrElse(dn(this),(()=>"<declaration schema>"))}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map((e=>e.toJSON())),annotations:Jt(this.annotations)}}}const Y=e=>t=>t._tag===e,Z=Y("Declaration");class Q{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return o.getOrElse(dn(this),(()=>d.formatUnknown(this.literal)))}toJSON(){return{_tag:this._tag,literal:u.isBigInt(this.literal)?String(this.literal):this.literal,annotations:Jt(this.annotations)}}}const X=Y("Literal"),ee=new Q(null,{[y]:"null"});class te{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return o.getOrElse(dn(this),(()=>d.formatUnknown(this.symbol)))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Jt(this.annotations)}}}const ne=Y("UniqueSymbol");class re{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const ie=new re({[b]:"undefined"}),ae=Y("UndefinedKeyword");class se{annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const oe=new se({[b]:"void"}),ce=Y("VoidKeyword");class ue{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const le=new ue({[b]:"never"}),fe=Y("NeverKeyword");class de{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const he=new de({[b]:"unknown"}),pe=Y("UnknownKeyword");class me{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const ge=new me({[b]:"any"}),ye=Y("AnyKeyword");class be{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Se=new be({[b]:"string",[S]:"a string"}),we=Y("StringKeyword");class ve{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Ee=new ve({[b]:"number",[S]:"a number"}),ke=Y("NumberKeyword");class xe{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const _e=new xe({[b]:"boolean",[S]:"a boolean"}),Ie=Y("BooleanKeyword");class Te{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Oe=new Te({[b]:"bigint",[S]:"a bigint"}),Ae=Y("BigIntKeyword");class Ne{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Ce=new Ne({[b]:"symbol",[S]:"a symbol"}),Re=Y("SymbolKeyword");class Fe{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return fn(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Me=new Fe({[y]:"object",[b]:"object",[S]:"an object in the TypeScript meaning, i.e. the `object` type"}),Le=Y("ObjectKeyword");class Pe{enums;annotations;_tag="Enums";constructor(e,t={}){this.enums=e,this.annotations=t}toString(){return o.getOrElse(dn(this),(()=>`<enum ${this.enums.length} value(s): ${this.enums.map(((e,t)=>JSON.stringify(t))).join(" | ")}>`))}toJSON(){return{_tag:this._tag,enums:this.enums,annotations:Jt(this.annotations)}}}const De=Y("Enums");class Ue{type;literal;constructor(e,t){this.type=e,this.literal=t}toString(){switch(this.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}}toJSON(){return{type:this.type.toJSON(),literal:this.literal}}}class je{head;spans;annotations;_tag="TemplateLiteral";constructor(e,t,n={}){this.head=e,this.spans=t,this.annotations=n}toString(){return o.getOrElse(dn(this),(()=>Be(this)))}toJSON(){return{_tag:this._tag,head:this.head,spans:this.spans.map((e=>e.toJSON())),annotations:Jt(this.annotations)}}}const Be=e=>"`"+e.head+e.spans.map((e=>String(e)+e.literal)).join("")+"`",qe=Y("TemplateLiteral");class $e{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:Jt(this.annotations)}}toString(){return String(this.type)}}class We extends $e{isOptional;constructor(e,t,n={}){super(e,n),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Jt(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const ze=e=>e.map((e=>e.type));class Ve{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,n,r={}){this.elements=e,this.rest=t,this.isReadonly=n,this.annotations=r;let i=!1,a=!1;for(const s of e)if(s.isOptional)i=!0;else if(i){a=!0;break}if(a||i&&t.length>1)throw new Error(f.getASTRequiredElementFollowinAnOptionalElementErrorMessage)}toString(){return o.getOrElse(dn(this),(()=>Ge(this)))}toJSON(){return{_tag:this._tag,elements:this.elements.map((e=>e.toJSON())),rest:this.rest.map((e=>e.toJSON())),isReadonly:this.isReadonly,annotations:Jt(this.annotations)}}}const Ge=e=>{const t=e.elements.map(String).join(", ");return r.matchLeft(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const i=String(n),a=i.includes(" | ")?`(${i})`:i;if(r.length>0){const n=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${a}[], ${n}]`:`readonly [...${a}[], ${n}]`}return e.elements.length>0?`readonly [${t}, ...${a}[]]`:`ReadonlyArray<${i}>`}})},Ke=Y("TupleType");class Je extends We{name;isReadonly;constructor(e,t,n,r,i){super(t,n,i),this.name=e,this.isReadonly=r}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Jt(this.annotations)}}}const He=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return He(e.from)}return!1};class Ye{type;isReadonly;parameter;constructor(e,t,n){if(this.type=t,this.isReadonly=n,!He(e))throw new Error(f.getASTIndexSignatureParameterErrorMessage);this.parameter=e}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Ze{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,n={}){this.annotations=n;const r={};for(let a=0;a<e.length;a++){const t=e[a].name;if(Object.prototype.hasOwnProperty.call(r,t))throw new Error(f.getASTDuplicatePropertySignatureErrorMessage(t));r[t]=null}const i={string:!1,symbol:!1};for(let a=0;a<t.length;a++){const e=nn(t[a].parameter);if(we(e)){if(i.string)throw new Error(f.getASTDuplicateIndexSignatureErrorMessage("string"));i.string=!0}else if(Re(e)){if(i.symbol)throw new Error(f.getASTDuplicateIndexSignatureErrorMessage("symbol"));i.symbol=!0}}this.propertySignatures=Yt(e),this.indexSignatures=Zt(t)}toString(){return o.getOrElse(dn(this),(()=>Qe(this)))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map((e=>e.toJSON())),indexSignatures:this.indexSignatures.map((e=>e.toJSON())),annotations:Jt(this.annotations)}}}const Qe=e=>{const t=e.propertySignatures.map((e=>(e.isReadonly?"readonly ":"")+String(e.name)+(e.isOptional?"?":"")+": "+e.type)).join("; ");if(e.indexSignatures.length>0){const n=e.indexSignatures.map((e=>(e.isReadonly?"readonly ":"")+`[x: ${nn(e.parameter)}]: ${e.type}`)).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${n} }`:`{ ${n} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},Xe=Y("TypeLiteral"),et=r.sort(c.mapInput(s.Order,(e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4}))),tt={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},nt=e=>r.flatMap(e,(e=>ot(e)?nt(e.types):[e])),rt=e=>{const t=et(e),n=[],r={},i=[];for(const a of t)switch(a._tag){case"NeverKeyword":break;case"AnyKeyword":return[ge];case"UnknownKeyword":return[he];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":r[a._tag]||(r[a._tag]=a,n.push(a));break;case"Literal":{const e=typeof a.literal;switch(e){case"string":case"number":case"bigint":case"boolean":r[tt[e]]||i.includes(a.literal)||(i.push(a.literal),n.push(a));break;case"object":i.includes(a.literal)||(i.push(a.literal),n.push(a))}break}case"UniqueSymbol":r.SymbolKeyword||i.includes(a.symbol)||(i.push(a.symbol),n.push(a));break;case"TupleType":r.ObjectKeyword||n.push(a);break;case"TypeLiteral":0===a.propertySignatures.length&&0===a.indexSignatures.length?r["{}"]||(r["{}"]=a,n.push(a)):r.ObjectKeyword||n.push(a);break;default:n.push(a)}return n};class it{types;annotations;static make=(e,t)=>{const n=[],r=new Set;for(let i=0;i<e.length;i++){const t=e[i];t===le||r.has(t)||(r.add(t),n.push(t))}return it.union(n,t)};static members=(e,t)=>it.union((e=>e.filter((e=>!(e===le))))(e),t);static unify=(e,t)=>it.union(rt(nt(e)),t);static union=(e,t)=>st(e)?new it(e,t):1===e.length?e[0]:le;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return o.getOrElse(dn(this),(()=>this.types.map(String).join(" | ")))}toJSON(){return{_tag:this._tag,types:this.types.map((e=>e.toJSON())),annotations:Jt(this.annotations)}}}const at=(e,t)=>e.map(t),st=e=>e.length>1,ot=Y("Union"),ct=(0,a.globalValue)(Symbol.for("@effect/schema/AST/toJSONMemoMap"),(()=>new WeakMap));class ut{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=d.memoizeThunk(e)}toString(){return dn(this).pipe(o.orElse((()=>o.flatMap(o.liftThrowable(this.f)(),(e=>dn(e))))),o.getOrElse((()=>"<suspended schema>")))}toJSON(){const e=this.f();let t=ct.get(e);return t||(ct.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:Jt(this.annotations)},ct.set(e,t),t)}}const lt=Y("Suspend");class ft{from;filter;annotations;_tag="Refinement";constructor(e,t,n={}){this.from=e,this.filter=t,this.annotations=n}toString(){return o.getOrElse(dn(this),(()=>`{ ${this.from} | filter }`))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Jt(this.annotations)}}}const dt=Y("Refinement"),ht={};class pt{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,n,r={}){this.from=e,this.to=t,this.transformation=n,this.annotations=r}toString(){return o.getOrElse(dn(this),(()=>`(${String(this.from)} <-> ${String(this.to)})`))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Jt(this.annotations)}}}const mt=Y("Transformation");class gt{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}const yt=e=>t=>t._tag===e,bt=yt("FinalTransformation");class St{_tag="ComposeTransformation"}const wt=new St,vt=yt("ComposeTransformation");class Et{from;to;decode;encode;constructor(e,t,n,r){this.from=e,this.to=t,this.decode=n,this.encode=r}}const kt=e=>e.decode===i.identity&&e.encode===i.identity;class xt{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const t={},n={};for(const r of e){const e=r.from;if(t[e])throw new Error(f.getASTDuplicatePropertySignatureTransformationErrorMessage(e));t[e]=!0;const i=r.to;if(n[i])throw new Error(f.getASTDuplicatePropertySignatureTransformationErrorMessage(i));n[i]=!0}}}const _t=yt("TypeLiteralTransformation"),It=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);return n.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),n)},Tt=e=>it.unify(cn(e)),Ot=e=>{let t=`^${l.escape(e.head)}`;for(const n of e.spans)we(n.type)?t+=".*":ke(n.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=l.escape(n.literal);return t+="$",new RegExp(t)},At=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return At(t.value);break}case"TypeLiteral":return e.propertySignatures.slice();case"Suspend":return At(e.f())}return Rt(e).map((t=>Ct(e,t)))},Nt=e=>{switch(e._tag){case"TupleType":{let t=!1,n=[];for(const r of e.elements)r.isOptional&&(t=!0),n.push(r.type);return t&&n.push(ie),n=n.concat(ze(e.rest)),it.make(n)}case"Refinement":return Nt(e.from);case"Union":return it.make(e.types.map(Nt));case"Suspend":return Nt(e.f())}throw new Error(f.getASTUnsupportedSchema(e))},Ct=(e,t)=>{switch(e._tag){case"Declaration":{const n=V(e);if(o.isSome(n))return Ct(n.value,t);break}case"TypeLiteral":{const n=r.findFirst(e.propertySignatures,(e=>e.name===t));if(o.isSome(n))return n.value;if(u.isString(t))for(const r of e.indexSignatures){const e=nn(r.parameter);switch(e._tag){case"TemplateLiteral":if(Ot(e).test(t))return new Je(t,r.type,!1,!0);break;case"StringKeyword":return new Je(t,r.type,!1,!0)}}else if(u.isSymbol(t))for(const r of e.indexSignatures){const e=nn(r.parameter);if(Re(e))return new Je(t,r.type,!1,!0)}break}case"Union":return new Je(t,it.make(e.types.map((e=>Ct(e,t).type))),!1,!0);case"Suspend":return Ct(e.f(),t)}return new Je(t,le,!1,!0)},Rt=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return Rt(t.value);break}case"TypeLiteral":return e.propertySignatures.map((e=>e.name));case"Suspend":return Rt(e.f());case"Union":return e.types.slice(1).reduce(((e,t)=>r.intersection(e,Rt(t))),Rt(e.types[0]));case"Transformation":return Rt(e.to)}return[]},Ft=(e,t)=>{const n=[],r=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new Ye(e,t,!0));break;case"Literal":if(!u.isString(e.literal)&&!u.isNumber(e.literal))throw new Error(f.getASTUnsupportedLiteral(e.literal));n.push(new Je(e.literal,t,!1,!0));break;case"Enums":for(const[r,i]of e.enums)n.push(new Je(i,t,!1,!0));break;case"UniqueSymbol":n.push(new Je(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw new Error(f.getASTUnsupportedKeySchema(e))}};return i(e),{propertySignatures:n,indexSignatures:r}},Mt=(e,t)=>{if(mt(e))switch(e.transformation._tag){case"ComposeTransformation":return new pt(Mt(e.from,t),Mt(e.to,t),wt);case"TypeLiteralTransformation":{const n=[],i=[];for(const r of t){const t=e.transformation.propertySignatureTransformations.find((e=>e.to===r));t?(n.push(t),i.push(t.from)):i.push(r)}return r.isNonEmptyReadonlyArray(n)?new pt(Mt(e.from,i),Mt(e.to,t),new xt(n)):Mt(e.from,i)}case"FinalTransformation":{const n=V(e);if(o.isSome(n))return Mt(n.value,t);throw new Error(f.getASTUnsupportedSchema(e))}}return new Ze(t.map((t=>Ct(e,t))),[])},Lt=(e,t)=>Mt(e,Rt(e).filter((e=>!t.includes(e)))),Pt=e=>it.make([e,ie]),Dt=(e,t)=>{const n=!0===t?.exact;switch(e._tag){case"TupleType":return new Ve(e.elements.map((e=>new We(n?e.type:Pt(e.type),!0))),r.match(e.rest,{onEmpty:()=>e.rest,onNonEmpty:e=>[new $e(it.make([...ze(e),ie]))]}),e.isReadonly);case"TypeLiteral":return new Ze(e.propertySignatures.map((e=>new Je(e.name,n?e.type:Pt(e.type),!0,e.isReadonly,e.annotations))),e.indexSignatures.map((e=>new Ye(e.parameter,Pt(e.type),e.isReadonly))));case"Union":return it.make(e.types.map((e=>Dt(e,t))));case"Suspend":return new ut((()=>Dt(e.f(),t)));case"Declaration":case"Refinement":throw new Error(f.getASTUnsupportedSchema(e));case"Transformation":if(_t(e.transformation)&&e.transformation.propertySignatureTransformations.every(kt))return new pt(Dt(e.from,t),Dt(e.to,t),e.transformation);throw new Error(f.getASTUnsupportedSchema(e))}return e},Ut=e=>{switch(e._tag){case"TupleType":return new Ve(e.elements.map((e=>new We(e.type,!1))),e.rest,e.isReadonly);case"TypeLiteral":return new Ze(e.propertySignatures.map((e=>new Je(e.name,e.type,!1,e.isReadonly,e.annotations))),e.indexSignatures);case"Union":return it.make(e.types.map((e=>Ut(e))));case"Suspend":return new ut((()=>Ut(e.f())));case"Declaration":case"Refinement":throw new Error(f.getASTUnsupportedSchema(e));case"Transformation":if(_t(e.transformation)&&e.transformation.propertySignatureTransformations.every(kt))return new pt(Ut(e.from),Ut(e.to),e.transformation);throw new Error(f.getASTUnsupportedSchema(e))}return e},jt=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new Ve(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{const t=zt(e.propertySignatures,(e=>!1===e.isReadonly?e:new Je(e.name,e.type,e.isOptional,!1,e.annotations))),n=zt(e.indexSignatures,(e=>!1===e.isReadonly?e:new Ye(e.parameter,e.type,!1)));return t===e.propertySignatures&&n===e.indexSignatures?e:new Ze(t,n,e.annotations)}case"Union":{const t=zt(e.types,jt);return t===e.types?e:it.make(t,e.annotations)}case"Suspend":return new ut((()=>jt(e.f())),e.annotations);case"Refinement":{const t=jt(e.from);return t===e.from?e:new ft(t,e.filter,e.annotations)}case"Transformation":{const t=jt(e.from),n=jt(e.to);return t===e.from&&n===e.to?e:new pt(t,n,e.transformation,e.annotations)}}return e},Bt=e=>{const t=(n,r)=>e[n._tag](n,t,r);return t},qt=e=>{switch(e._tag){case"Declaration":{const t=zt(e.typeParameters,qt);return t===e.typeParameters?e:new H(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=zt(e.elements,(e=>{const t=qt(e.type);return t===e.type?e:new We(t,e.isOptional)})),n=ze(e.rest),r=zt(n,qt);return t===e.elements&&r===n?e:new Ve(t,r.map((e=>new $e(e))),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=zt(e.propertySignatures,(e=>{const t=qt(e.type);return t===e.type?e:new Je(e.name,t,e.isOptional,e.isReadonly)})),n=zt(e.indexSignatures,(e=>{const t=qt(e.type);return t===e.type?e:new Ye(e.parameter,t,e.isReadonly)}));return t===e.propertySignatures&&n===e.indexSignatures?e:new Ze(t,n,e.annotations)}case"Union":{const t=zt(e.types,qt);return t===e.types?e:it.make(t,e.annotations)}case"Suspend":return new ut((()=>qt(e.f())),e.annotations);case"Refinement":{const t=qt(e.from);return t===e.from?e:new ft(t,e.filter,e.annotations)}case"Transformation":return qt(e.to)}return e},$t=e=>o.orElse(J(e),(()=>L(e))),Wt=e=>o.match($t(e),{onNone:()=>{},onSome:e=>({[K]:e})});function zt(e,t){let n=!1;const i=r.allocate(e.length);for(let r=0;r<e.length;r++){const a=e[r],s=t(a);s!==a&&(n=!0),i[r]=s}return n?i:e}const Vt=(e,t)=>{switch(e._tag){case"Declaration":{const n=zt(e.typeParameters,(e=>Vt(e,t)));return n===e.typeParameters?e:new H(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=zt(e.elements,(e=>{const n=Vt(e.type,t);return n===e.type?e:new We(n,e.isOptional)})),r=ze(e.rest),i=zt(r,(e=>Vt(e,t)));return n===e.elements&&i===r?e:new Ve(n,i.map((e=>new $e(e))),e.isReadonly,Wt(e))}case"TypeLiteral":{const n=zt(e.propertySignatures,(e=>{const n=Vt(e.type,t);return n===e.type?e:new Je(e.name,n,e.isOptional,e.isReadonly)})),r=zt(e.indexSignatures,(e=>{const n=Vt(e.type,t);return n===e.type?e:new Ye(e.parameter,n,e.isReadonly)}));return n===e.propertySignatures&&r===e.indexSignatures?e:new Ze(n,r,Wt(e))}case"Union":{const n=zt(e.types,(e=>Vt(e,t)));return n===e.types?e:it.make(n,Wt(e))}case"Suspend":return new ut((()=>Vt(e.f(),t)),Wt(e));case"Refinement":{const n=Vt(e.from,t);if(t){if(n===e.from)return e;if(!mt(e.from)){const t=G(e);if(o.isSome(t)&&!0===t.value)return new ft(n,e.filter)}}return n}case"Transformation":return Vt(e.from,t)}return e},Gt=e=>Vt(e,!1),Kt=e=>Vt(e,!0),Jt=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},Ht=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},Yt=r.sort(c.mapInput(s.Order,(e=>Ht(e.type)))),Zt=r.sort(c.mapInput(s.Order,(e=>{switch(nn(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}}))),Qt=c.tuple(s.Order,s.Order,s.Order),Xt=c.max(Qt),en=[0,0,0],tn=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{const t=e.propertySignatures.length,n=e.indexSignatures.length;return t+n===0?[-4,0,0]:[4,t,n]}case"Declaration":{const t=V(e);if(o.isSome(t)){const[e,n,r]=tn(t.value);return[6,n,r]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return e.types.map(tn).reduce(Xt,en);case"Refinement":{const[t,n,r]=tn(e.from);return[t+1,n,r]}case"Transformation":return tn(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return en}},nn=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return nn(e.from)}},rn=r.getEquivalence(((e,t)=>e.type._tag===t.type._tag&&e.literal===t.literal)),an=r.getEquivalence(((e,t)=>t[0]===e[0]&&t[1]===e[1])),sn=(e,t)=>{switch(e._tag){case"Literal":return X(t)&&t.literal===e.literal;case"UniqueSymbol":return ne(t)&&t.symbol===e.symbol;case"UndefinedKeyword":case"VoidKeyword":case"NeverKeyword":case"UnknownKeyword":case"AnyKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":case"ObjectKeyword":return t._tag===e._tag;case"TemplateLiteral":return qe(t)&&t.head===e.head&&rn(t.spans,e.spans);case"Enums":return De(t)&&an(t.enums,e.enums);case"Refinement":case"TupleType":case"TypeLiteral":case"Union":case"Suspend":case"Transformation":case"Declaration":return e===t}},on=r.intersectionWith(sn),cn=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return cn(t.value);break}case"TypeLiteral":return e.propertySignatures.map((e=>u.isSymbol(e.name)?new te(e.name):new Q(e.name))).concat(e.indexSignatures.map((e=>nn(e.parameter))));case"Suspend":return cn(e.f());case"Union":return e.types.slice(1).reduce(((e,t)=>on(e,cn(t))),cn(e.types[0]));case"Transformation":return cn(e.to)}throw new Error(f.getASTUnsupportedSchema(e))},un=(e,t)=>new pt(e,t,wt),ln=(e,t)=>{switch(e._tag){case"TypeLiteral":{const n=[];for(const e of d.ownKeys(t)){const r=t[e];void 0!==r&&n.push(new Et(e,r,i.identity,i.identity))}return 0===n.length?e:new pt(e,new Ze(e.propertySignatures.map((e=>{const n=t[e.name];return new Je(void 0===n?e.name:n,qt(e.type),e.isOptional,e.isReadonly,e.annotations)})),e.indexSignatures),new xt(n))}case"Union":return it.make(e.types.map((e=>ln(e,t))));case"Suspend":return new ut((()=>ln(e.f(),t)));case"Transformation":return un(e,ln(qt(e),t))}throw new Error(f.getASTUnsupportedRenameSchema(e))},fn=e=>o.getOrElse(dn(e),(()=>e._tag)),dn=e=>L(e).pipe(o.orElse((()=>M(e))),o.orElse((()=>P(e))))},160023:(e,t,n)=>{n.r(t),n.d(t,{Composite:()=>b,Forbidden:()=>k,Missing:()=>y,ParseError:()=>I,ParseErrorTypeId:()=>x,Pointer:()=>m,Refinement:()=>w,Transformation:()=>v,Type:()=>E,Unexpected:()=>g,asserts:()=>le,decode:()=>re,decodeEither:()=>te,decodeOption:()=>ee,decodePromise:()=>ne,decodeSync:()=>X,decodeUnknown:()=>K,decodeUnknownEither:()=>V,decodeUnknownOption:()=>z,decodeUnknownPromise:()=>G,decodeUnknownSync:()=>W,eitherOrUndefined:()=>L,encode:()=>me,encodeEither:()=>he,encodeOption:()=>de,encodePromise:()=>pe,encodeSync:()=>fe,encodeUnknown:()=>Q,encodeUnknownEither:()=>Y,encodeUnknownOption:()=>H,encodeUnknownPromise:()=>Z,encodeUnknownSync:()=>J,fail:()=>A,flatMap:()=>R,fromOption:()=>C,getFinalTransformation:()=>Ae,getLiterals:()=>ke,getSearchTree:()=>xe,is:()=>ue,isComposite:()=>S,isParseError:()=>_,map:()=>F,mapBoth:()=>P,mapError:()=>M,mergeInternalOptions:()=>U,orElse:()=>D,parseError:()=>T,succeed:()=>O,try:()=>N,validate:()=>ce,validateEither:()=>se,validateOption:()=>ae,validatePromise:()=>oe,validateSync:()=>ie});var r=n(630768),i=n(695181),a=n(477900),s=n(757964),o=n(361369),c=n(606517),u=n(883845),l=n(977948),f=n(856572),d=n(728789),h=n(515407),p=n(181107);class m{path;actual;issue;_tag="Pointer";constructor(e,t,n){this.path=e,this.actual=t,this.issue=n}}class g{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class y{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class b{ast;actual;issues;output;_tag="Composite";constructor(e,t,n,r){this.ast=e,this.actual=t,this.issues=n,this.output=r}}const S=e=>f.hasProperty(e,"_tag");class w{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,n,r){this.ast=e,this.actual=t,this.kind=n,this.issue=r}}class v{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,n,r){this.ast=e,this.actual=t,this.kind=n,this.issue=r}}class E{ast;actual;message;_tag="Type";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}class k{ast;actual;message;_tag="Forbidden";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}const x=Symbol.for("@effect/schema/ParseErrorTypeId"),_=e=>f.hasProperty(e,x);class I extends((0,i.TaggedError)("ParseError")){[x]=x;get message(){return this.toString()}toString(){return p.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[u.NodeInspectSymbol](){return this.toJSON()}}const T=e=>new I({issue:e}),O=s.right,A=s.left,N=s.try,C=s.fromOption,R=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?n:"Right"===n._tag?t(n.right):a.flatMap(e,t)})),F=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?n:"Right"===n._tag?s.right(t(n.right)):a.map(e,t)})),M=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?s.left(t(n.left)):"Right"===n._tag?n:a.mapError(e,t)})),L=e=>{const t=e;if("Left"===t._tag||"Right"===t._tag)return t},P=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?s.left(t.onFailure(n.left)):"Right"===n._tag?s.right(t.onSuccess(n.right)):a.mapBoth(e,t)})),D=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?t(n.left):"Right"===n._tag?n:a.catchAll(e,t)})),U=(e,t)=>void 0===t||f.isNumber(t)?e:void 0===e?t:{...e,...t},j=(e,t,n)=>{const r=be(e,t);return(e,t)=>r(e,U(n,t))},B=(e,t,n)=>{const r=j(e,t,n);return(e,t)=>s.getOrThrowWith(r(e,t),T)},q=(e,t,n)=>{const r=j(e,t,n);return(e,t)=>l.getRight(r(e,t))},$=(e,t,n)=>{const r=be(e,t);return(e,t)=>r(e,{...U(n,t),isEffectAllowed:!0})},W=(e,t)=>B(e.ast,!0,t),z=(e,t)=>q(e.ast,!0,t),V=(e,t)=>j(e.ast,!0,t),G=(e,t)=>{const n=K(e,t);return(e,t)=>a.runPromise(n(e,t))},K=(e,t)=>$(e.ast,!0,t),J=(e,t)=>B(e.ast,!1,t),H=(e,t)=>q(e.ast,!1,t),Y=(e,t)=>j(e.ast,!1,t),Z=(e,t)=>{const n=Q(e,t);return(e,t)=>a.runPromise(n(e,t))},Q=(e,t)=>$(e.ast,!1,t),X=W,ee=z,te=V,ne=G,re=K,ie=(e,t)=>B(d.typeAST(e.ast),!0,t),ae=(e,t)=>q(d.typeAST(e.ast),!0,t),se=(e,t)=>j(d.typeAST(e.ast),!0,t),oe=(e,t)=>{const n=ce(e,t);return(e,t)=>a.runPromise(n(e,t))},ce=(e,t)=>$(d.typeAST(e.ast),!0,t),ue=(e,t)=>{const n=be(d.typeAST(e.ast),!0);return(e,r)=>s.isRight(n(e,{exact:!0,...U(t,r)}))},le=(e,t)=>{const n=be(d.typeAST(e.ast),!0);return(e,r)=>{const i=n(e,{exact:!0,...U(t,r)});if(s.isLeft(i))throw T(i.left)}},fe=J,de=H,he=Y,pe=Z,me=Q,ge=(0,c.globalValue)(Symbol.for("@effect/schema/Parser/decodeMemoMap"),(()=>new WeakMap)),ye=(0,c.globalValue)(Symbol.for("@effect/schema/Parser/encodeMemoMap"),(()=>new WeakMap)),be=(e,t)=>{const n=t?ge:ye,r=n.get(e);if(r)return r;const i=ve(e,t),a=d.getParseOptionsAnnotation(e),s=l.isSome(a)?(e,t)=>i(e,U(t,a.value)):i;return n.set(e,s),s},Se=e=>l.getOrUndefined(d.getConcurrencyAnnotation(e)),we=e=>l.getOrUndefined(d.getBatchingAnnotation(e)),ve=(e,t)=>{switch(e._tag){case"Refinement":if(t){const t=be(e.from,!0);return(n,r)=>Ie(R(M(t(n,r),(t=>new w(e,n,"From",t))),(t=>l.match(e.filter(t,r??d.defaultParseOption,e),{onNone:()=>s.right(t),onSome:t=>s.left(new w(e,n,"Predicate",t))}))),e,n,r)}{const t=be(d.typeAST(e),!0),n=be(_e(e.from),!1);return(r,i)=>Ie(R(t(r,i),(e=>n(e,i))),e,r,i)}case"Transformation":{const n=Ae(e.transformation,t),r=t?be(e.from,!0):be(e.to,!1),i=t?be(e.to,!0):be(e.from,!1);return(a,s)=>Ie(R(M(r(a,s),(n=>new v(e,a,t?"Encoded":"Type",n))),(r=>R(M(n(r,s??d.defaultParseOption,e),(t=>new v(e,a,"Transformation",t))),(n=>M(i(n,s),(n=>new v(e,a,t?"Type":"Encoded",n))))))),e,a,s)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,r)=>Ie(n(t,r??d.defaultParseOption,e),e,t,r)}case"Literal":return Ee(e,(t=>t===e.literal));case"UniqueSymbol":return Ee(e,(t=>t===e.symbol));case"UndefinedKeyword":case"VoidKeyword":return Ee(e,f.isUndefined);case"NeverKeyword":return Ee(e,f.isNever);case"UnknownKeyword":case"AnyKeyword":return s.right;case"StringKeyword":return Ee(e,f.isString);case"NumberKeyword":return Ee(e,f.isNumber);case"BooleanKeyword":return Ee(e,f.isBoolean);case"BigIntKeyword":return Ee(e,f.isBigInt);case"SymbolKeyword":return Ee(e,f.isSymbol);case"ObjectKeyword":return Ee(e,f.isObject);case"Enums":return Ee(e,(t=>e.enums.some((([e,n])=>n===t))));case"TemplateLiteral":{const t=d.getTemplateLiteralRegExp(e);return Ee(e,(e=>f.isString(e)&&t.test(e)))}case"TupleType":{const n=e.elements.map((e=>be(e.type,t))),i=e.rest.map((e=>be(e.type,t)));let o=e.elements.filter((e=>!e.isOptional));e.rest.length>0&&(o=o.concat(e.rest.slice(1)));const c=o.length,u=e.elements.length>0?e.elements.map(((e,t)=>t)).join(" | "):"never",l=Se(e),f=we(e);return(t,d)=>{if(!r.isArray(t))return s.left(new E(e,t));const h="all"===d?.errors,p=[];let S=0;const w=[],v=t.length;for(let n=v;n<=c-1;n++){const r=new m(n,t,new y(o[n-v]));if(!h)return s.left(new b(e,t,r,w));p.push([S++,r])}if(0===e.rest.length)for(let n=e.elements.length;n<=v-1;n++){const r=new m(n,t,new g(t[n],`is unexpected, expected: ${u}`));if(!h)return s.left(new b(e,t,r,w));p.push([S++,r])}let k,x=0;for(;x<n.length;x++)if(v<x+1){if(e.elements[x].isOptional)continue}else{const r=(0,n[x])(t[x],d),i=L(r);if(i){if(s.isLeft(i)){const n=new m(x,t,i.left);if(h){p.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(w)))}w.push([S++,i.right])}else{const n=S++,i=x;k||(k=[]),k.push((({es:o,output:c})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const u=new m(i,t,r.left);return h?(o.push([n,u]),a.void):s.left(new b(e,t,u,Oe(c)))}return c.push([n,r.right]),a.void}))))}}if(r.isNonEmptyReadonlyArray(i)){const[n,...r]=i;for(;x<v-r.length;x++){const r=n(t[x],d),i=L(r);if(i){if(s.isLeft(i)){const n=new m(x,t,i.left);if(h){p.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(w)))}w.push([S++,i.right])}else{const n=S++,i=x;k||(k=[]),k.push((({es:o,output:c})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const u=new m(i,t,r.left);return h?(o.push([n,u]),a.void):s.left(new b(e,t,u,Oe(c)))}return c.push([n,r.right]),a.void}))))}}for(let i=0;i<r.length;i++)if(x+=i,!(v<x+1)){const n=r[i](t[x],d),o=L(n);if(o){if(s.isLeft(o)){const n=new m(x,t,o.left);if(h){p.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(w)))}w.push([S++,o.right])}else{const r=S++,i=x;k||(k=[]),k.push((({es:o,output:c})=>a.flatMap(a.either(n),(n=>{if(s.isLeft(n)){const u=new m(i,t,n.left);return h?(o.push([r,u]),a.void):s.left(new b(e,t,u,Oe(c)))}return c.push([r,n.right]),a.void}))))}}}const _=({es:n,output:i})=>r.isNonEmptyArray(n)?s.left(new b(e,t,Oe(n),Oe(i))):s.right(Oe(i));if(k&&k.length>0){const e=k;return a.suspend((()=>{const t={es:r.copy(p),output:r.copy(w)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:l,batching:f,discard:!0}),(()=>_(t)))}))}return _({output:w,es:p})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return Ee(e,f.isNotNullable);const n=[],i={},o=[];for(const r of e.propertySignatures)n.push([be(r.type,t),r]),i[r.name]=null,o.push(r.name);const c=e.indexSignatures.map((e=>[be(e.parameter,t),be(e.type,t),e.parameter])),u=d.Union.make(e.indexSignatures.map((e=>e.parameter)).concat(o.map((e=>f.isSymbol(e)?new d.UniqueSymbol(e):new d.Literal(e))))),l=be(u,t),p=Se(e),S=we(e);return(t,d)=>{if(!f.isRecord(t))return s.left(new E(e,t));const w="all"===d?.errors,v=[];let k=0;const x="error"===d?.onExcessProperty,_={};let I,T;if(x||"preserve"===d?.onExcessProperty){I=h.ownKeys(t);for(const n of I){const r=L(l(n,d));if(s.isLeft(r)){if(x){const r=new m(n,t,new g(t[n],`is unexpected, expected: ${String(u)}`));if(w){v.push([k++,r]);continue}return s.left(new b(e,t,r,_))}_[n]=t[n]}}}const O=!0===d?.exact;for(let r=0;r<n.length;r++){const i=n[r][1],o=i.name,c=Object.prototype.hasOwnProperty.call(t,o);if(!c){if(i.isOptional)continue;if(O){const n=new m(o,t,new y(i));if(w){v.push([k++,n]);continue}return s.left(new b(e,t,n,_))}}const u=(0,n[r][0])(t[o],d),l=L(u);if(l){if(s.isLeft(l)){const n=new m(o,t,c?l.left:new y(i));if(w){v.push([k++,n]);continue}return s.left(new b(e,t,n,_))}_[o]=l.right}else{const n=k++,r=o;T||(T=[]),T.push((({es:o,output:l})=>a.flatMap(a.either(u),(u=>{if(s.isLeft(u)){const f=new m(r,t,c?u.left:new y(i));return w?(o.push([n,f]),a.void):s.left(new b(e,t,f,l))}return l[r]=u.right,a.void}))))}}for(let n=0;n<c.length;n++){const r=c[n],o=r[0],u=r[1],l=h.getKeysForIndexSignature(t,r[2]);for(const n of l){const r=L(o(n,d));if(r&&s.isRight(r)){const r=u(t[n],d),o=L(r);if(o){if(s.isLeft(o)){const r=new m(n,t,o.left);if(w){v.push([k++,r]);continue}return s.left(new b(e,t,r,_))}Object.prototype.hasOwnProperty.call(i,n)||(_[n]=o.right)}else{const o=k++,c=n;T||(T=[]),T.push((({es:u,output:l})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const n=new m(c,t,r.left);return w?(u.push([o,n]),a.void):s.left(new b(e,t,n,l))}return Object.prototype.hasOwnProperty.call(i,n)||(l[n]=r.right),a.void}))))}}}}const A=({es:n,output:i})=>{if(r.isNonEmptyArray(n))return s.left(new b(e,t,Oe(n),i));if("original"===d?.propertyOrder){const e=I||h.ownKeys(t);for(const t of o)-1===e.indexOf(t)&&e.push(t);const n={};for(const t of e)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t]);return s.right(n)}return s.right(i)};if(T&&T.length>0){const e=T;return a.suspend((()=>{const t={es:r.copy(v),output:Object.assign({},_)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:p,batching:S,discard:!0}),(()=>A(t)))}))}return A({es:v,output:_})}}case"Union":{const n=xe(e.types,t),i=h.ownKeys(n.keys),o=i.length,c=new Map;for(let r=0;r<e.types.length;r++)c.set(e.types[r],be(e.types[r],t));const u=Se(e)??1,l=we(e);return(t,h)=>{const p=[];let g,S=0,w=[];if(o>0)if(f.isRecord(t))for(let e=0;e<o;e++){const r=i[e],a=n.keys[r].buckets;if(Object.prototype.hasOwnProperty.call(t,r)){const e=String(t[r]);if(Object.prototype.hasOwnProperty.call(a,e))w=w.concat(a[e]);else{const e=d.Union.make(n.keys[r].literals);p.push([S++,new b(new d.TypeLiteral([new d.PropertySignature(r,e,!1,!0)],[]),t,new m(r,t,new E(e,t[r])))])}}else{const e=d.Union.make(n.keys[r].literals),i=new d.PropertySignature(r,e,!1,!0);p.push([S++,new b(new d.TypeLiteral([i],[]),t,new m(r,t,new y(i)))])}}else p.push([S++,new E(e,t)]);n.otherwise.length>0&&(w=w.concat(n.otherwise));for(let e=0;e<w.length;e++){const n=w[e],r=c.get(n)(t,h),i=g&&0!==g.length?void 0:L(r);if(i){if(s.isRight(i))return s.right(i.right);p.push([S++,i.left])}else{const e=S++;g||(g=[]),g.push((t=>a.suspend((()=>"finalResult"in t?a.void:a.flatMap(a.either(r),(n=>(s.isRight(n)?t.finalResult=s.right(n.right):t.es.push([e,n.left]),a.void)))))))}}const v=n=>r.isNonEmptyArray(n)?1===n.length&&"Type"===n[0][1]._tag?s.left(n[0][1]):s.left(new b(e,t,Oe(n))):s.left(new E(e,t));if(g&&g.length>0){const e=g;return a.suspend((()=>{const t={es:r.copy(p)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:u,batching:l,discard:!0}),(()=>"finalResult"in t?t.finalResult:v(t.es)))}))}return v(p)}}case"Suspend":{const n=h.memoizeThunk((()=>be(d.annotations(e.f(),e.annotations),t)));return(e,t)=>n()(e,t)}}},Ee=(e,t)=>n=>t(n)?s.right(n):s.left(new E(e,n)),ke=(e,t)=>{switch(e._tag){case"Declaration":{const n=d.getSurrogateAnnotation(e);if(l.isSome(n))return ke(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const i=e.propertySignatures[r],a=t?d.encodedAST(i.type):d.typeAST(i.type);d.isLiteral(a)&&!i.isOptional&&n.push([i.name,a])}return n}case"Refinement":return ke(e.from,t);case"Suspend":return ke(e.f(),t);case"Transformation":return ke(t?e.from:e.to,t)}return[]},xe=(e,t)=>{const n={},r=[];for(let i=0;i<e.length;i++){const a=e[i],s=ke(a,t);if(s.length>0)for(let e=0;e<s.length;e++){const[t,r]=s[e],i=String(r.literal);n[t]=n[t]||{buckets:{},literals:[]};const o=n[t].buckets;if(!Object.prototype.hasOwnProperty.call(o,i)){o[i]=[a],n[t].literals.push(r);break}e<s.length-1||(o[i].push(a),n[t].literals.push(r))}else r.push(a)}return{keys:n,otherwise:r}},_e=e=>d.isRefinement(e)?_e(e.from):e,Ie=(e,t,n,r)=>{const i=L(e);if(i)return i;if(!0===r?.isEffectAllowed)return e;try{return a.runSync(a.either(e))}catch(o){return s.left(new k(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},Te=([e],[t])=>e>t?1:e<t?-1:0;function Oe(e){return e.sort(Te).map((e=>e[1]))}const Ae=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return s.right;case"TypeLiteralTransformation":return n=>{let r=s.right(n);for(const i of e.propertySignatureTransformations){const[e,n]=t?[i.from,i.to]:[i.to,i.from],a=t?i.decode:i.encode,s=t=>{const r=a(Object.prototype.hasOwnProperty.call(t,e)?l.some(t[e]):l.none());return delete t[e],l.isSome(r)&&(t[n]=r.value),t};r=F(r,s)}return r}}}},222396:(e,t,n)=>{n.r(t),n.d(t,{Any:()=>Gp,Array:()=>fm,Base64:()=>Nb,Base64Url:()=>Cb,BetweenBigDecimalTypeId:()=>cw,BetweenBigIntTypeId:()=>zy,BetweenDurationTypeId:()=>_b,BetweenTypeId:()=>py,BigDecimal:()=>BS,BigDecimalFromNumber:()=>qS,BigDecimalFromSelf:()=>jS,BigInt:()=>Zy,BigIntFromNumber:()=>sb,BigIntFromSelf:()=>Kp,Boolean:()=>Zp,BooleanFromUnknown:()=>Fv,BrandTypeId:()=>Dp,Cause:()=>rv,CauseDefectUnknown:()=>nv,CauseFromSelf:()=>Xw,Char:()=>Ug,Chunk:()=>mw,ChunkFromSelf:()=>pw,Class:()=>Cw,Config:()=>Mv,Data:()=>Iw,DataFromSelf:()=>_w,Date:()=>Kb,DateFromNumber:()=>Jb,DateFromSelf:()=>zb,DateFromString:()=>Gb,Duration:()=>mb,DurationFromMillis:()=>hb,DurationFromNanos:()=>db,DurationFromSelf:()=>fb,Either:()=>yS,EitherFromSelf:()=>pS,EitherFromUnion:()=>bS,EndsWithTypeId:()=>Ig,Enums:()=>Cp,Exit:()=>lv,ExitFromSelf:()=>uv,FiberId:()=>Gw,FiberIdFromSelf:()=>Ww,Finite:()=>_y,FiniteTypeId:()=>ey,FromPropertySignature:()=>gm,GreaterThanBigDecimalTypeId:()=>$S,GreaterThanBigIntTypeId:()=>Py,GreaterThanDurationTypeId:()=>vb,GreaterThanOrEqualToBigDecimalTypeId:()=>zS,GreaterThanOrEqualToBigIntTypeId:()=>Uy,GreaterThanOrEqualToDurationTypeId:()=>kb,GreaterThanOrEqualToTypeId:()=>iy,GreaterThanTypeId:()=>ny,HashMap:()=>Ev,HashMapFromSelf:()=>vv,HashSet:()=>gv,HashSetFromSelf:()=>mv,Hex:()=>Rb,IncludesTypeId:()=>Og,InstanceOfTypeId:()=>jp,Int:()=>Iy,IntTypeId:()=>cy,ItemsCountTypeId:()=>Db,JsonNumber:()=>Fy,JsonNumberTypeId:()=>Ry,LengthTypeId:()=>Pg,LessThanBigDecimalTypeId:()=>GS,LessThanBigIntTypeId:()=>By,LessThanDurationTypeId:()=>yb,LessThanOrEqualToBigDecimalTypeId:()=>JS,LessThanOrEqualToBigIntTypeId:()=>$y,LessThanOrEqualToDurationTypeId:()=>Sb,LessThanOrEqualToTypeId:()=>dy,LessThanTypeId:()=>ly,List:()=>Ov,ListFromSelf:()=>Tv,Literal:()=>Tp,Lowercase:()=>Bg,Lowercased:()=>Rg,LowercasedTypeId:()=>Ng,Map:()=>TS,MapFromSelf:()=>_S,MaxItemsTypeId:()=>Lb,MaxLengthTypeId:()=>bg,MinItemsTypeId:()=>Fb,MinLengthTypeId:()=>wg,MultipleOfTypeId:()=>sy,Negative:()=>Ay,NegativeBigDecimalFromSelf:()=>iw,NegativeBigDecimalTypeId:()=>nw,NegativeBigInt:()=>tb,NegativeBigIntFromSelf:()=>eb,Never:()=>zp,NonEmpty:()=>Kg,NonEmptyArray:()=>hm,NonEmptyChunk:()=>ww,NonEmptyChunkFromSelf:()=>Sw,NonNaN:()=>Ty,NonNaNTypeId:()=>gy,NonNegative:()=>Cy,NonNegativeBigDecimalFromSelf:()=>tw,NonNegativeBigDecimalTypeId:()=>XS,NonNegativeBigInt:()=>ab,NonNegativeBigIntFromSelf:()=>ib,NonPositive:()=>Ny,NonPositiveBigDecimalFromSelf:()=>ow,NonPositiveBigDecimalTypeId:()=>aw,NonPositiveBigInt:()=>rb,NonPositiveBigIntFromSelf:()=>nb,Not:()=>My,Null:()=>Wp,NullOr:()=>tm,NullishOr:()=>rm,Number:()=>Yp,NumberFromString:()=>xy,Object:()=>Qp,Option:()=>iS,OptionFromNullOr:()=>aS,OptionFromNullishOr:()=>sS,OptionFromSelf:()=>tS,OptionFromUndefinedOr:()=>oS,PatternTypeId:()=>Eg,Positive:()=>Oy,PositiveBigDecimalFromSelf:()=>QS,PositiveBigDecimalTypeId:()=>YS,PositiveBigInt:()=>Xy,PositiveBigIntFromSelf:()=>Qy,PropertySignatureDeclaration:()=>mm,PropertySignatureTransformation:()=>bm,PropertySignatureTypeId:()=>wm,ReadonlyMap:()=>IS,ReadonlyMapFromSelf:()=>xS,ReadonlySet:()=>LS,ReadonlySetFromSelf:()=>FS,Record:()=>qm,Redacted:()=>lb,RedactedFromSelf:()=>ub,Set:()=>PS,SetFromSelf:()=>MS,SortedSet:()=>Rv,SortedSetFromSelf:()=>Cv,StartsWithTypeId:()=>xg,String:()=>Hp,Struct:()=>Dm,Symbol:()=>Ly,SymbolFromSelf:()=>Jp,TaggedClass:()=>Fw,TaggedError:()=>Mw,TaggedRequest:()=>Lw,TaggedStruct:()=>jm,TemplateLiteral:()=>Rp,ToPropertySignature:()=>ym,Trim:()=>Wg,Trimmed:()=>$g,TrimmedTypeId:()=>gg,Tuple:()=>um,TypeId:()=>ep,ULID:()=>Xg,ULIDTypeId:()=>Zg,UUID:()=>Yg,UUIDTypeId:()=>Jg,Uint8Array:()=>Ob,Uint8ArrayFromSelf:()=>Tb,Undefined:()=>qp,UndefinedOr:()=>nm,Union:()=>em,UniqueSymbolFromSelf:()=>Ap,Unknown:()=>Vp,Uppercase:()=>qg,Uppercased:()=>Lg,UppercasedTypeId:()=>Fg,ValidDateFromSelf:()=>Vb,ValidDateTypeId:()=>$b,Void:()=>$p,annotations:()=>pg,asSchema:()=>ap,asserts:()=>Gh.asserts,attachPropertySignature:()=>hg,between:()=>my,betweenBigDecimal:()=>uw,betweenBigInt:()=>Vy,betweenDuration:()=>Ib,brand:()=>Gm,clamp:()=>Ey,clampBigDecimal:()=>lw,clampBigInt:()=>Yy,clampDuration:()=>gb,compose:()=>ng,declare:()=>Pp,decode:()=>Sp,decodeEither:()=>wp,decodeOption:()=>Gh.decodeOption,decodePromise:()=>vp,decodeSync:()=>Gh.decodeSync,decodeUnknown:()=>gp,decodeUnknownEither:()=>yp,decodeUnknownOption:()=>Gh.decodeUnknownOption,decodeUnknownPromise:()=>bp,decodeUnknownSync:()=>Gh.decodeUnknownSync,element:()=>am,encode:()=>hp,encodeEither:()=>pp,encodeOption:()=>Gh.encodeOption,encodePromise:()=>mp,encodeSync:()=>Gh.encodeSync,encodeUnknown:()=>lp,encodeUnknownEither:()=>fp,encodeUnknownOption:()=>Gh.encodeUnknownOption,encodeUnknownPromise:()=>dp,encodeUnknownSync:()=>Gh.encodeUnknownSync,encodedBoundSchema:()=>cp,encodedSchema:()=>op,endsWith:()=>Tg,extend:()=>tg,filter:()=>og,finite:()=>ty,format:()=>sp,fromBrand:()=>Up,fromKey:()=>Am,getClassTag:()=>Rw,getNumberIndexedAccess:()=>jb,greaterThan:()=>ry,greaterThanBigDecimal:()=>WS,greaterThanBigInt:()=>Dy,greaterThanDuration:()=>Eb,greaterThanOrEqualTo:()=>ay,greaterThanOrEqualToBigDecimal:()=>VS,greaterThanOrEqualToBigInt:()=>jy,greaterThanOrEqualToDuration:()=>xb,head:()=>Bb,headOrElse:()=>qb,includes:()=>Ag,instanceOf:()=>Bp,int:()=>uy,is:()=>Gh.is,isSchema:()=>_p,itemsCount:()=>Ub,keyof:()=>im,length:()=>Dg,lessThan:()=>fy,lessThanBigDecimal:()=>KS,lessThanBigInt:()=>qy,lessThanDuration:()=>bb,lessThanOrEqualTo:()=>hy,lessThanOrEqualToBigDecimal:()=>HS,lessThanOrEqualToBigInt:()=>Wy,lessThanOrEqualToDuration:()=>wb,lowercased:()=>Cg,make:()=>tp,makePropertySignature:()=>Em,maxItems:()=>Pb,maxLength:()=>Sg,minItems:()=>Mb,minLength:()=>vg,multipleOf:()=>oy,mutable:()=>Hm,negative:()=>Sy,negativeBigDecimal:()=>rw,negativeBigInt:()=>Ky,nonEmpty:()=>jg,nonNaN:()=>yy,nonNegative:()=>vy,nonNegativeBigDecimal:()=>ew,nonNegativeBigInt:()=>Jy,nonPositive:()=>wy,nonPositiveBigDecimal:()=>sw,nonPositiveBigInt:()=>Hy,omit:()=>Wm,optional:()=>Fm,optionalElement:()=>sm,optionalToOptional:()=>Rm,optionalToRequired:()=>Nm,parseJson:()=>Gg,parseNumber:()=>ky,partial:()=>Km,pattern:()=>kg,pick:()=>$m,pickLiteral:()=>Op,pluck:()=>zm,positive:()=>by,positiveBigDecimal:()=>ZS,positiveBigInt:()=>Gy,propertySignature:()=>xm,rename:()=>mg,required:()=>Jm,requiredToOptional:()=>Cm,split:()=>zg,startsWith:()=>_g,suspend:()=>rg,tag:()=>Um,transform:()=>lg,transformLiteral:()=>fg,transformLiterals:()=>dg,transformOrFail:()=>ug,trimmed:()=>yg,typeSchema:()=>up,uppercased:()=>Mg,validDate:()=>Wb,validate:()=>Ep,validateEither:()=>kp,validateOption:()=>Gh.validateOption,validatePromise:()=>xp,validateSync:()=>Gh.validateSync,withConstructorDefault:()=>_m,withDecodingDefault:()=>Tm,withDefaults:()=>Om});var r={};n.r(r),n.d(r,{__commitHash:()=>vr,__type:()=>Sr,__version:()=>wr,congruential32:()=>Gn,generateN:()=>Bn,mersenne:()=>Yn,skipN:()=>$n,uniformArrayIntDistribution:()=>cr,uniformBigIntDistribution:()=>fr,uniformIntDistribution:()=>br,unsafeGenerateN:()=>jn,unsafeSkipN:()=>qn,unsafeUniformArrayIntDistribution:()=>or,unsafeUniformBigIntDistribution:()=>lr,unsafeUniformIntDistribution:()=>yr,xoroshiro128plus:()=>er,xorshift128plus:()=>Qn});var i={};n.r(i),n.d(i,{Arbitrary:()=>Ke,ExecutionStatus:()=>ri,PreconditionFailure:()=>Le,Random:()=>oi,Stream:()=>je,Value:()=>Ve,VerbosityLevel:()=>kr,__commitHash:()=>_h,__type:()=>kh,__version:()=>xh,anything:()=>rf,array:()=>Sa,ascii:()=>Ua,asciiString:()=>Tf,assert:()=>_i,asyncDefaultReportMessage:()=>Si,asyncModelRun:()=>Pd,asyncProperty:()=>Pn,asyncStringify:()=>Yr,asyncToStringMethod:()=>Wr,base64:()=>qa,base64String:()=>Nf,bigInt:()=>ka,bigInt64Array:()=>Gd,bigIntN:()=>xa,bigUint:()=>_a,bigUint64Array:()=>Kd,bigUintN:()=>Ia,boolean:()=>Aa,char:()=>Wa,char16bits:()=>za,check:()=>xi,clone:()=>ms,cloneIfNeeded:()=>We,cloneMethod:()=>qe,commands:()=>Ad,compareBooleanFunc:()=>su,compareFunc:()=>cu,configureGlobal:()=>An,constant:()=>ns,constantFrom:()=>Ra,context:()=>is,createDepthIdentifier:()=>Zi,date:()=>ls,defaultReportMessage:()=>bi,dictionary:()=>Fs,domain:()=>So,double:()=>kc,emailAddress:()=>_o,falsy:()=>Fa,float:()=>Qc,float32Array:()=>ml,float64Array:()=>bl,fullUnicode:()=>Ja,fullUnicodeString:()=>Kl,func:()=>fu,gen:()=>Ri,getDepthContextFor:()=>Yi,hasAsyncToStringMethod:()=>zr,hasCloneMethod:()=>$e,hasToStringMethod:()=>$r,hash:()=>tu,hexa:()=>Za,hexaString:()=>Cu,infiniteStream:()=>_f,int16Array:()=>vl,int32Array:()=>El,int8Array:()=>kl,integer:()=>Ji,ipV4:()=>ku,ipV4Extended:()=>Tu,ipV6:()=>Ju,json:()=>sf,jsonValue:()=>af,letrec:()=>Zu,lorem:()=>rl,mapToConstant:()=>Gs,maxSafeInteger:()=>pu,maxSafeNat:()=>gu,memo:()=>al,mixedCase:()=>dl,modelRun:()=>Ld,nat:()=>zs,object:()=>tf,oneof:()=>$s,option:()=>no,pre:()=>Pe,property:()=>Un,readConfigureGlobal:()=>Nn,record:()=>vf,resetConfigureGlobal:()=>Cn,sample:()=>Ti,scheduledModelRun:()=>Dd,scheduler:()=>zd,schedulerFor:()=>Vd,shuffledSubarray:()=>Bf,sparseArray:()=>Pl,statistics:()=>Oi,stream:()=>Be,string:()=>Hl,string16bits:()=>Mf,stringMatching:()=>Eh,stringOf:()=>co,stringify:()=>Jr,subarray:()=>jf,toStringMethod:()=>qr,tuple:()=>_n,uint16Array:()=>xl,uint32Array:()=>_l,uint8Array:()=>Il,uint8ClampedArray:()=>Tl,ulid:()=>Qf,unicode:()=>ts,unicodeJson:()=>lf,unicodeJsonValue:()=>uf,unicodeString:()=>cf,uniqueArray:()=>Es,uuid:()=>ad,uuidV:()=>sd,webAuthority:()=>fd,webFragments:()=>hd,webPath:()=>bd,webQueryParameters:()=>Sd,webSegment:()=>pd,webUrl:()=>xd});var a={};n.r(a),n.d(a,{Arbitrary:()=>Ke,ExecutionStatus:()=>ri,PreconditionFailure:()=>Le,Random:()=>oi,Stream:()=>je,Value:()=>Ve,VerbosityLevel:()=>kr,__commitHash:()=>_h,__type:()=>kh,__version:()=>xh,anything:()=>rf,array:()=>Sa,ascii:()=>Ua,asciiString:()=>Tf,assert:()=>_i,asyncDefaultReportMessage:()=>Si,asyncModelRun:()=>Pd,asyncProperty:()=>Pn,asyncStringify:()=>Yr,asyncToStringMethod:()=>Wr,base64:()=>qa,base64String:()=>Nf,bigInt:()=>ka,bigInt64Array:()=>Gd,bigIntN:()=>xa,bigUint:()=>_a,bigUint64Array:()=>Kd,bigUintN:()=>Ia,boolean:()=>Aa,char:()=>Wa,char16bits:()=>za,check:()=>xi,clone:()=>ms,cloneIfNeeded:()=>We,cloneMethod:()=>qe,commands:()=>Ad,compareBooleanFunc:()=>su,compareFunc:()=>cu,configureGlobal:()=>An,constant:()=>ns,constantFrom:()=>Ra,context:()=>is,createDepthIdentifier:()=>Zi,date:()=>ls,defaultReportMessage:()=>bi,dictionary:()=>Fs,domain:()=>So,double:()=>kc,emailAddress:()=>_o,falsy:()=>Fa,float:()=>Qc,float32Array:()=>ml,float64Array:()=>bl,fullUnicode:()=>Ja,fullUnicodeString:()=>Kl,func:()=>fu,gen:()=>Ri,getDepthContextFor:()=>Yi,hasAsyncToStringMethod:()=>zr,hasCloneMethod:()=>$e,hasToStringMethod:()=>$r,hash:()=>tu,hexa:()=>Za,hexaString:()=>Cu,infiniteStream:()=>_f,int16Array:()=>vl,int32Array:()=>El,int8Array:()=>kl,integer:()=>Ji,ipV4:()=>ku,ipV4Extended:()=>Tu,ipV6:()=>Ju,json:()=>sf,jsonValue:()=>af,letrec:()=>Zu,lorem:()=>rl,mapToConstant:()=>Gs,maxSafeInteger:()=>pu,maxSafeNat:()=>gu,memo:()=>al,mixedCase:()=>dl,modelRun:()=>Ld,nat:()=>zs,object:()=>tf,oneof:()=>$s,option:()=>no,pre:()=>Pe,property:()=>Un,readConfigureGlobal:()=>Nn,record:()=>vf,resetConfigureGlobal:()=>Cn,sample:()=>Ti,scheduledModelRun:()=>Dd,scheduler:()=>zd,schedulerFor:()=>Vd,shuffledSubarray:()=>Bf,sparseArray:()=>Pl,statistics:()=>Oi,stream:()=>Be,string:()=>Hl,string16bits:()=>Mf,stringMatching:()=>Eh,stringOf:()=>co,stringify:()=>Jr,subarray:()=>jf,toStringMethod:()=>qr,tuple:()=>_n,uint16Array:()=>xl,uint32Array:()=>_l,uint8Array:()=>Il,uint8ClampedArray:()=>Tl,ulid:()=>Qf,unicode:()=>ts,unicodeJson:()=>lf,unicodeJsonValue:()=>uf,unicodeString:()=>cf,uniqueArray:()=>Es,uuid:()=>ad,uuidV:()=>sd,webAuthority:()=>fd,webFragments:()=>hd,webPath:()=>bd,webQueryParameters:()=>Sd,webSegment:()=>pd,webUrl:()=>xd});var s=n(630768),o=n(43977),c=n(235309),u=n(361369),l=n(367337),f=n(883845),d=n(977948),h=n(259877),p=n(953533),m=n(856572);const g=Symbol.for("effect/BigDecimal"),y={[g]:g,[l.symbol](){const e=x(this);return(0,u.pipe)(l.hash(e.value),l.combine(l.number(e.scale)),l.cached(this))},[o.symbol](e){return b(e)&&L(this,e)},toString(){return`BigDecimal(${D(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[f.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,p.pipeArguments)(this,arguments)}},b=e=>(0,m.hasProperty)(e,g),S=(e,t)=>{const n=Object.create(y);return n.value=e,n.scale=t,n},w=(e,t)=>{if(e!==v&&e%E===v)throw new RangeError("Value must be normalized");const n=S(e,t);return n.normalized=n,n},v=BigInt(0),E=BigInt(10),k=w(v,0),x=e=>{if(void 0===e.normalized)if(e.value===v)e.normalized=k;else{const t=`${e.value}`;let n=0;for(let e=t.length-1;e>=0&&"0"===t[e];e--)n++;0===n&&(e.normalized=e);const r=BigInt(t.substring(0,t.length-n)),i=e.scale-n;e.normalized=w(r,i)}return e.normalized},_=(e,t)=>t>e.scale?S(e.value*E**BigInt(t-e.scale),t):t<e.scale?S(e.value/E**BigInt(e.scale-t),t):e,I=h.make(((e,t)=>{const n=h.number(F(e),F(t));return 0!==n?n:e.scale>t.scale?h.bigint(e.value,_(t,e.scale).value):e.scale<t.scale?h.bigint(_(e,t.scale).value,t.value):h.bigint(e.value,t.value)})),T=h.lessThan(I),O=h.lessThanOrEqualTo(I),A=h.greaterThan(I),N=h.greaterThanOrEqualTo(I),C=h.between(I),R=h.clamp(I),F=e=>e.value===v?0:e.value<v?-1:1,M=c.make(((e,t)=>e.scale>t.scale?_(t,e.scale).value===e.value:e.scale<t.scale?_(e,t.scale).value===t.value:e.value===t.value)),L=(0,u.dual)(2,((e,t)=>M(e,t))),P=e=>{let t,n;const r=e.search(/\./);if(-1!==r){const i=e.slice(0,r),a=e.slice(r+1);t=`${i}${a}`,n=a.length}else t=e,n=0;return""===t?d.some(k):/^(?:\+|-)?\d+$/.test(t)?d.some(S(BigInt(t),n)):d.none()},D=e=>{const t=e.value<v,n=t?`${e.value}`.substring(1):`${e.value}`;let r,i;if(e.scale>=n.length)r="0",i="0".repeat(e.scale-n.length)+n;else{const t=n.length-e.scale;if(t>n.length){const e=t-n.length;r=`${n}${"0".repeat(e)}`,i=""}else i=n.slice(t),r=n.slice(0,t)}const a=""===i?r:`${r}.${i}`;return t?`-${a}`:a},U=(m.isBigInt,c.bigint,h.bigint),j=h.clamp(U);var B=n(783733),q=n(420634),$=n(128420),W=n(564889);W.ConfigErrorTypeId,W.And,W.Or,W.MissingData;const z=W.InvalidData;W.SourceUnavailable,W.Unsupported,W.isConfigError,W.isAnd,W.isOr,W.isInvalidData,W.isMissingData,W.isMissingDataOnly,W.isSourceUnavailable,W.isUnsupported,W.prefixed,W.reduceWithContext;var V=n(284073),G=n(757964),K=n(227561),J=(n(672620),n(344862)),H=n(68498),Y=n(564577);n(36347);const Z=Symbol.for("effect/Config"),Q={...H.CommitPrototype,[Z]:{_A:e=>e},commit(){return J.config(this)}},X=(0,u.dual)(2,((e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_MAP_OR_FAIL,n.original=e,n.mapOrFail=t,n})),ee=(0,u.dual)(2,((e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_NESTED,n.name=t,n.config=e,n})),te=(e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_PRIMITIVE,n.description=e,n.parse=t,n},ne=e=>{const t=te("a text property",G.right);return void 0===e?t:ee(t,e)},re=X,ie=ne;var ae=n(695181),se=n(477900);const oe=Symbol.for("effect/Encoding/errors/Decode"),ce=(e,t)=>{const n={_tag:"DecodeException",[oe]:oe,input:e};return(0,m.isString)(t)&&(n.message=t),n},ue=new TextEncoder,le=e=>{const t=e.length;let n,r="";for(n=2;n<t;n+=3)r+=he[e[n-2]>>2],r+=he[(3&e[n-2])<<4|e[n-1]>>4],r+=he[(15&e[n-1])<<2|e[n]>>6],r+=he[63&e[n]];return n===t+1&&(r+=he[e[n-2]>>2],r+=he[(3&e[n-2])<<4],r+="=="),n===t&&(r+=he[e[n-2]>>2],r+=he[(3&e[n-2])<<4|e[n-1]>>4],r+=he[(15&e[n-1])<<2],r+="="),r},fe=e=>{const t=e.length;if(t%4!==0)return G.left(ce(e,`Length must be a multiple of 4, but is ${t}`));const n=e.indexOf("=");if(-1!==n&&(n<t-2||n===t-2&&"="!==e[t-1]))return G.left(ce(e,"Found a '=' character, but it is not at the end"));try{const n=e.endsWith("==")?2:e.endsWith("=")?1:0,r=new Uint8Array(t/4*3);for(let i=0,a=0;i<t;i+=4,a+=3){const t=de(e.charCodeAt(i))<<18|de(e.charCodeAt(i+1))<<12|de(e.charCodeAt(i+2))<<6|de(e.charCodeAt(i+3));r[a]=t>>16,r[a+1]=t>>8&255,r[a+2]=255&t}return G.right(r.subarray(0,r.length-n))}catch(r){return G.left(ce(e,r instanceof Error?r.message:"Invalid input"))}};function de(e){if(e>=pe.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);const t=pe[e];if(255===t)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}const he=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],pe=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],me=e=>le(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ge=e=>{let t="";for(let n=0;n<e.length;++n)t+=ye[e[n]];return t},ye=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],be=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw new TypeError("Invalid input")},Se=e=>le("string"===typeof e?ue.encode(e):e),we=e=>fe(e),ve=e=>me("string"===typeof e?ue.encode(e):e),Ee=e=>(e=>{const t=e.length;if(t%4===1)return G.left(ce(e,`Length should be a multiple of 4, but is ${t}`));if(!/^[-_A-Z0-9]*?={0,2}$/i.test(e))return G.left(ce(e,"Invalid input"));let n=t%4===2?`${e}==`:t%4===3?`${e}=`:e;return n=n.replace(/-/g,"+").replace(/_/g,"/"),fe(n)})(e),ke=e=>ge("string"===typeof e?ue.encode(e):e),xe=e=>(e=>{const t=(new TextEncoder).encode(e);if(t.length%2!==0)return G.left(ce(e,`Length must be a multiple of 2, but is ${t.length}`));try{const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const e=be(t[2*r]),i=be(t[2*r+1]);n[r]=e<<4|i}return G.right(n)}catch(n){return G.left(ce(e,n instanceof Error?n.message:"Invalid input"))}})(e);var _e=n(896949),Ie=n(295602),Te=n(827964),Oe=n(489425),Ae=n(804676),Ne=n(429249),Ce=n(866172),Re=n(147985),Fe=n(243216),Me=n(728789);class Le extends Error{constructor(e=!1){super(),this.interruptExecution=e,this.footprint=Le.SharedFootPrint}static isFailure(e){return null!=e&&e.footprint===Le.SharedFootPrint}}function Pe(e){if(!e)throw new Le}Le.SharedFootPrint=Symbol.for("fast-check/PreconditionFailure");class De{[Symbol.iterator](){return this}next(e){return{value:e,done:!0}}}De.nil=new De;const Ue=Symbol.iterator;class je{static nil(){return new je(De.nil)}static of(...e){return new je(e[Ue]())}constructor(e){this.g=e}next(){return this.g.next()}[Ue](){return this.g}map(e){return new je(function*(e,t){for(const n of e)yield t(n)}(this.g,e))}flatMap(e){return new je(function*(e,t){for(const n of e)yield*t(n)}(this.g,e))}dropWhile(e){let t=!1;return this.flatMap((function*(n){!t&&e(n)||(t=!0,yield n)}))}drop(e){if(e<=0)return this;let t=0;return this.dropWhile((function(){return t++<e}))}takeWhile(e){return new je(function*(e,t){let n=e.next();for(;!n.done&&t(n.value);)yield n.value,n=e.next()}(this.g,e))}take(e){return new je(function*(e,t){for(let n=0;n<t;++n){const t=e.next();if(t.done)break;yield t.value}}(this.g,e))}filter(e){return new je(function*(e,t){for(const n of e)t(n)&&(yield n)}(this.g,e))}every(e){for(const t of this.g)if(!e(t))return!1;return!0}has(e){for(const t of this.g)if(e(t))return[!0,t];return[!1,null]}join(...e){return new je(function*(e,t){for(let n=e.next();!n.done;n=e.next())yield n.value;for(const n of t)for(let e=n.next();!e.done;e=n.next())yield e.value}(this.g,e))}getNthOrLast(e){let t=e,n=null;for(const r of this.g){if(0===t--)return r;n=r}return n}}function Be(e){return new je(e)}const qe=Symbol.for("fast-check/cloneMethod");function $e(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&qe in e&&"function"===typeof e[qe]}function We(e){return $e(e)?e[qe]():e}const ze=Object.defineProperty;class Ve{constructor(e,t,n=void 0){this.value_=e,this.context=t,this.hasToBeCloned=void 0!==n||$e(e),this.readOnce=!1,this.hasToBeCloned?ze(this,"value",{get:void 0!==n?n:this.getValue}):this.value=e}getValue(){return this.hasToBeCloned?this.readOnce?this.value_[qe]():(this.readOnce=!0,this.value_):this.value_}}const Ge=Object.assign;class Ke{filter(e){return new Ye(this,e)}map(e,t){return new He(this,e,t)}chain(e){return new Je(this,e)}noShrink(){return new Ze(this)}noBias(){return new Qe(this)}}class Je extends Ke{constructor(e,t){super(),this.arb=e,this.chainer=t}generate(e,t){const n=e.clone(),r=this.arb.generate(e,t);return this.valueChainer(r,e,n,t)}canShrinkWithoutContext(e){return!1}shrink(e,t){return this.isSafeContext(t)?(t.stoppedForOriginal?je.nil():this.arb.shrink(t.originalValue,t.originalContext).map((e=>this.valueChainer(e,t.clonedMrng.clone(),t.clonedMrng,t.originalBias)))).join(t.chainedArbitrary.shrink(e,t.chainedContext).map((e=>{const n=Ge(Ge({},t),{chainedContext:e.context,stoppedForOriginal:!0});return new Ve(e.value_,n)}))):je.nil()}valueChainer(e,t,n,r){const i=this.chainer(e.value_),a=i.generate(t,r),s={originalBias:r,originalValue:e.value_,originalContext:e.context,stoppedForOriginal:!1,chainedArbitrary:i,chainedContext:a.context,clonedMrng:n};return new Ve(a.value_,s)}isSafeContext(e){return null!=e&&"object"===typeof e&&"originalBias"in e&&"originalValue"in e&&"originalContext"in e&&"stoppedForOriginal"in e&&"chainedArbitrary"in e&&"chainedContext"in e&&"clonedMrng"in e}}class He extends Ke{constructor(e,t,n){super(),this.arb=e,this.mapper=t,this.unmapper=n,this.bindValueMapper=e=>this.valueMapper(e)}generate(e,t){const n=this.arb.generate(e,t);return this.valueMapper(n)}canShrinkWithoutContext(e){if(void 0!==this.unmapper)try{const t=this.unmapper(e);return this.arb.canShrinkWithoutContext(t)}catch(t){return!1}return!1}shrink(e,t){if(this.isSafeContext(t))return this.arb.shrink(t.originalValue,t.originalContext).map(this.bindValueMapper);if(void 0!==this.unmapper){const t=this.unmapper(e);return this.arb.shrink(t,void 0).map(this.bindValueMapper)}return je.nil()}mapperWithCloneIfNeeded(e){const t=e.value,n=this.mapper(t);return e.hasToBeCloned&&("object"===typeof n&&null!==n||"function"===typeof n)&&Object.isExtensible(n)&&!$e(n)&&Object.defineProperty(n,qe,{get:()=>()=>this.mapperWithCloneIfNeeded(e)[0]}),[n,t]}valueMapper(e){const[t,n]=this.mapperWithCloneIfNeeded(e),r={originalValue:n,originalContext:e.context};return new Ve(t,r)}isSafeContext(e){return null!=e&&"object"===typeof e&&"originalValue"in e&&"originalContext"in e}}class Ye extends Ke{constructor(e,t){super(),this.arb=e,this.refinement=t,this.bindRefinementOnValue=e=>this.refinementOnValue(e)}generate(e,t){for(;;){const n=this.arb.generate(e,t);if(this.refinementOnValue(n))return n}}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)&&this.refinement(e)}shrink(e,t){return this.arb.shrink(e,t).filter(this.bindRefinementOnValue)}refinementOnValue(e){return this.refinement(e.value)}}class Ze extends Ke{constructor(e){super(),this.arb=e}generate(e,t){return this.arb.generate(e,t)}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)}shrink(e,t){return je.nil()}noShrink(){return this}}class Qe extends Ke{constructor(e){super(),this.arb=e}generate(e,t){return this.arb.generate(e,void 0)}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)}shrink(e,t){return this.arb.shrink(e,t)}noBias(){return this}}function Xe(e){return"object"===typeof e&&null!==e&&"generate"in e&&"shrink"in e&&"canShrinkWithoutContext"in e}function et(e){if(!Xe(e))throw new Error("Unexpected value received: not an instance of Arbitrary")}const tt=Function.prototype.apply,nt=Symbol("apply");function rt(e,t,n){return function(e){try{return e.apply}catch(t){return}}(e)===tt?e.apply(t,n):function(e,t,n){const r=e;r[nt]=tt;const i=r[nt](t,n);return delete r[nt],i}(e,t,n)}const it="undefined"!==typeof Array?Array:void 0,at="undefined"!==typeof BigInt?BigInt:void 0,st="undefined"!==typeof BigInt64Array?BigInt64Array:void 0,ot="undefined"!==typeof BigUint64Array?BigUint64Array:void 0,ct="undefined"!==typeof Boolean?Boolean:void 0,ut="undefined"!==typeof Date?Date:void 0,lt="undefined"!==typeof Error?Error:void 0,ft="undefined"!==typeof Float32Array?Float32Array:void 0,dt="undefined"!==typeof Float64Array?Float64Array:void 0,ht="undefined"!==typeof Int8Array?Int8Array:void 0,pt="undefined"!==typeof Int16Array?Int16Array:void 0,mt="undefined"!==typeof Int32Array?Int32Array:void 0,gt="undefined"!==typeof Number?Number:void 0,yt="undefined"!==typeof String?String:void 0,bt="undefined"!==typeof Set?Set:void 0,St="undefined"!==typeof Uint8Array?Uint8Array:void 0,wt="undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:void 0,vt="undefined"!==typeof Uint16Array?Uint16Array:void 0,Et="undefined"!==typeof Uint32Array?Uint32Array:void 0,kt="undefined"!==typeof encodeURIComponent?encodeURIComponent:void 0,xt=Array.prototype.forEach,_t=Array.prototype.indexOf,It=Array.prototype.join,Tt=Array.prototype.map,Ot=Array.prototype.filter,At=Array.prototype.push,Nt=Array.prototype.pop,Ct=Array.prototype.splice,Rt=Array.prototype.slice,Ft=Array.prototype.sort,Mt=Array.prototype.every;function Lt(e,t){return function(e){try{return e.forEach}catch(t){return}}(e)===xt?e.forEach(t):rt(xt,e,[t])}function Pt(e,...t){return function(e){try{return e.indexOf}catch(t){return}}(e)===_t?e.indexOf(...t):rt(_t,e,t)}function Dt(e,...t){return function(e){try{return e.join}catch(t){return}}(e)===It?e.join(...t):rt(It,e,t)}function Ut(e,t){return function(e){try{return e.map}catch(t){return}}(e)===Tt?e.map(t):rt(Tt,e,[t])}function jt(e,t){return function(e){try{return e.filter}catch(t){return}}(e)===Ot?e.filter(t):rt(Ot,e,[t])}function Bt(e,...t){return function(e){try{return e.push}catch(t){return}}(e)===At?e.push(...t):rt(At,e,t)}function qt(e,...t){return function(e){try{return e.splice}catch(t){return}}(e)===Ct?e.splice(...t):rt(Ct,e,t)}function $t(e,...t){return function(e){try{return e.slice}catch(t){return}}(e)===Rt?e.slice(...t):rt(Rt,e,t)}function Wt(e,...t){return function(e){try{return e.sort}catch(t){return}}(e)===Ft?e.sort(...t):rt(Ft,e,t)}function zt(e,...t){return function(e){try{return e.every}catch(t){return}}(e)===Mt?e.every(...t):rt(Mt,e,t)}const Vt=Date.prototype.getTime,Gt=Date.prototype.toISOString;function Kt(e){return function(e){try{return e.getTime}catch(t){return}}(e)===Vt?e.getTime():rt(Vt,e,[])}const Jt=Set.prototype.add;function Ht(e,t){return function(e){try{return e.add}catch(t){return}}(e)===Jt?e.add(t):rt(Jt,e,[t])}const Yt=String.prototype.split,Zt=String.prototype.startsWith,Qt=String.prototype.endsWith,Xt=String.prototype.substring,en=String.prototype.toLowerCase,tn=String.prototype.toUpperCase,nn=String.prototype.padStart,rn=String.prototype.charCodeAt,an=String.prototype.replace;function sn(e,...t){return function(e){try{return e.split}catch(t){return}}(e)===Yt?e.split(...t):rt(Yt,e,t)}function on(e,...t){return function(e){try{return e.substring}catch(t){return}}(e)===Xt?e.substring(...t):rt(Xt,e,t)}function cn(e){return function(e){try{return e.toLowerCase}catch(t){return}}(e)===en?e.toLowerCase():rt(en,e,[])}function un(e){return function(e){try{return e.toUpperCase}catch(t){return}}(e)===tn?e.toUpperCase():rt(tn,e,[])}function ln(e,t){return function(e){try{return e.charCodeAt}catch(t){return}}(e)===rn?e.charCodeAt(t):rt(rn,e,[t])}const fn=Number.prototype.toString;function dn(e,...t){return function(e){try{return e.toString}catch(t){return}}(e)===fn?e.toString(...t):rt(fn,e,t)}const hn=Object.prototype.hasOwnProperty,pn=Object.prototype.toString;function mn(e,t){return rt(hn,e,[t])}function gn(e){return rt(pn,e,[])}class yn{constructor(e){this.producer=e}[Symbol.iterator](){return void 0===this.it&&(this.it=this.producer()),this.it}next(){return void 0===this.it&&(this.it=this.producer()),this.it.next()}}function bn(e){return new yn(e)}const Sn=Array.isArray,wn=Object.defineProperty;function vn(e,t){return wn(e,qe,{value:()=>{const e=[];for(let n=0;n!==t.length;++n)Bt(e,t[n].value);return vn(e,t),e}})}function En(e){let t=!1;const n=[],r=[];for(let i=0;i!==e.length;++i){const a=e[i];t=t||a.hasToBeCloned,Bt(n,a.value),Bt(r,a.context)}return t&&vn(n,e),new Ve(n,r)}function kn(e,t,n){const r=[],i=Sn(n)?n:[];for(let a=0;a!==e.length;++a)Bt(r,bn((()=>e[a].shrink(t[a],i[a]).map((e=>{const n=Ut(t,((e,t)=>new Ve(We(e),i[t])));return[...$t(n,0,a),e,...$t(n,a+1)]})).map(En))));return je.nil().join(...r)}class xn extends Ke{constructor(e){super(),this.arbs=e;for(let t=0;t!==e.length;++t){const n=e[t];if(null==n||null==n.generate)throw new Error(`Invalid parameter encountered at index ${t}: expecting an Arbitrary`)}}generate(e,t){const n=[];for(let r=0;r!==this.arbs.length;++r)Bt(n,this.arbs[r].generate(e,t));return En(n)}canShrinkWithoutContext(e){if(!Sn(e)||e.length!==this.arbs.length)return!1;for(let t=0;t!==this.arbs.length;++t)if(!this.arbs[t].canShrinkWithoutContext(e[t]))return!1;return!0}shrink(e,t){return kn(this.arbs,e,t)}}function _n(...e){return new xn(e)}const In=Math.log;function Tn(e){return 2+~~(.4342944819032518*In(e+1))}let On={};function An(e){On=e}function Nn(){return On}function Cn(){On={}}const Rn=Symbol("UndefinedContextPlaceholder");function Fn(e){return void 0!==e.context?e:e.hasToBeCloned?new Ve(e.value_,Rn,(()=>e.value)):new Ve(e.value_,Rn)}class Mn{constructor(e,t){this.arb=e,this.predicate=t;const{asyncBeforeEach:n,asyncAfterEach:r,beforeEach:i,afterEach:a}=Nn()||{};if(void 0!==n&&void 0!==i)throw lt('Global "asyncBeforeEach" and "beforeEach" parameters can\'t be set at the same time when running async properties');if(void 0!==r&&void 0!==a)throw lt('Global "asyncAfterEach" and "afterEach" parameters can\'t be set at the same time when running async properties');this.beforeEachHook=n||i||Mn.dummyHook,this.afterEachHook=r||a||Mn.dummyHook}isAsync(){return!0}generate(e,t){return Fn(this.arb.generate(e,null!=t?Tn(t):void 0))}shrink(e){if(void 0===e.context&&!this.arb.canShrinkWithoutContext(e.value_))return je.nil();const t=e.context!==Rn?e.context:void 0;return this.arb.shrink(e.value_,t).map(Fn)}async runBeforeEach(){await this.beforeEachHook()}async runAfterEach(){await this.afterEachHook()}async run(e,t){t||await this.beforeEachHook();try{const t=await this.predicate(e);return null==t||!0===t?null:{error:new lt("Property failed by returning false"),errorMessage:"Error: Property failed by returning false"}}catch(n){return Le.isFailure(n)?n:n instanceof lt&&n.stack?{error:n,errorMessage:n.stack}:{error:n,errorMessage:yt(n)}}finally{t||await this.afterEachHook()}}beforeEach(e){const t=this.beforeEachHook;return this.beforeEachHook=()=>e(t),this}afterEach(e){const t=this.afterEachHook;return this.afterEachHook=()=>e(t),this}}Mn.dummyHook=()=>{};class Ln extends Ke{constructor(e){super(),this.arb=e}generate(e,t){return Fn(this.arb.generate(e,t))}canShrinkWithoutContext(e){return!0}shrink(e,t){if(void 0===t&&!this.arb.canShrinkWithoutContext(e))return je.nil();const n=t!==Rn?t:void 0;return this.arb.shrink(e,n).map(Fn)}}function Pn(...e){if(e.length<2)throw new Error("asyncProperty expects at least two parameters");const t=$t(e,0,e.length-1),n=e[e.length-1];Lt(t,et);const r=Ut(t,(e=>new Ln(e)));return new Mn(_n(...r),(e=>n(...e)))}class Dn{constructor(e,t){this.arb=e,this.predicate=t;const{beforeEach:n=Dn.dummyHook,afterEach:r=Dn.dummyHook,asyncBeforeEach:i,asyncAfterEach:a}=Nn()||{};if(void 0!==i)throw lt('"asyncBeforeEach" can\'t be set when running synchronous properties');if(void 0!==a)throw lt('"asyncAfterEach" can\'t be set when running synchronous properties');this.beforeEachHook=n,this.afterEachHook=r}isAsync(){return!1}generate(e,t){return Fn(this.arb.generate(e,null!=t?Tn(t):void 0))}shrink(e){if(void 0===e.context&&!this.arb.canShrinkWithoutContext(e.value_))return je.nil();const t=e.context!==Rn?e.context:void 0;return this.arb.shrink(e.value_,t).map(Fn)}runBeforeEach(){this.beforeEachHook()}runAfterEach(){this.afterEachHook()}run(e,t){t||this.beforeEachHook();try{const t=this.predicate(e);return null==t||!0===t?null:{error:new lt("Property failed by returning false"),errorMessage:"Error: Property failed by returning false"}}catch(n){return Le.isFailure(n)?n:n instanceof lt&&n.stack?{error:n,errorMessage:n.stack}:{error:n,errorMessage:yt(n)}}finally{t||this.afterEachHook()}}beforeEach(e){const t=this.beforeEachHook;return this.beforeEachHook=()=>e(t),this}afterEach(e){const t=this.afterEachHook;return this.afterEachHook=()=>e(t),this}}function Un(...e){if(e.length<2)throw new Error("property expects at least two parameters");const t=$t(e,0,e.length-1),n=e[e.length-1];Lt(t,et);const r=Ut(t,(e=>new Ln(e)));return new Dn(_n(...r),(e=>n(...e)))}function jn(e,t){for(var n=[],r=0;r!=t;++r)n.push(e.unsafeNext());return n}function Bn(e,t){var n=e.clone();return[jn(n,t),n]}function qn(e,t){for(var n=0;n!=t;++n)e.unsafeNext()}function $n(e,t){var n=e.clone();return qn(n,t),n}Dn.dummyHook=()=>{};var Wn=function(e){return 214013*e+2531011&4294967295},zn=function(e){return(-2147483649&e)>>16},Vn=function(){function e(e){this.seed=e}return e.prototype.clone=function(){return new e(this.seed)},e.prototype.next=function(){var t=new e(this.seed);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=Wn(this.seed),t=zn(e),n=Wn(e),r=zn(n);return this.seed=Wn(n),0|zn(this.seed)+(r+(t<<15)<<15)},e.prototype.getState=function(){return[this.seed]},e}();var Gn=Object.assign((function(e){return new Vn(e)}),{fromState:function(e){if(!(1===e.length))throw new Error("The state must have been produced by a congruential32 RandomGenerator");return new Vn(e[0])}}),Kn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s},Jn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Hn=function(){function e(e,t){this.states=e,this.index=t}return e.twist=function(t){for(var n=t.slice(),r=0;r!==e.N-e.M;++r){var i=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M]^i>>>1^-(1&i)&e.A}for(r=e.N-e.M;r!==e.N-1;++r){var a=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M-e.N]^a>>>1^-(1&a)&e.A}var s=(n[e.N-1]&e.MASK_UPPER)+(n[0]&e.MASK_LOWER);return n[e.N-1]=n[e.M-1]^s>>>1^-(1&s)&e.A,n},e.seeded=function(t){var n=Array(e.N);n[0]=t;for(var r=1;r!==e.N;++r){var i=n[r-1]^n[r-1]>>>30;n[r]=Math.imul(e.F,i)+r|0}return n},e.from=function(t){return new e(e.twist(e.seeded(t)),0)},e.prototype.clone=function(){return new e(this.states,this.index)},e.prototype.next=function(){var t=new e(this.states,this.index);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var t=this.states[this.index];return t^=this.states[this.index]>>>e.U,t^=t<<e.S&e.B,t^=t<<e.T&e.C,t^=t>>>e.L,++this.index>=e.N&&(this.states=e.twist(this.states),this.index=0),t},e.prototype.getState=function(){return Jn([this.index],Kn(this.states),!1)},e.fromState=function(t){if(!(t.length===e.N+1&&t[0]>=0&&t[0]<e.N))throw new Error("The state must have been produced by a mersenne RandomGenerator");return new e(t.slice(1),t[0])},e.N=624,e.M=397,e.R=31,e.A=2567483615,e.F=1812433253,e.U=11,e.S=7,e.B=2636928640,e.T=15,e.C=4022730752,e.L=18,e.MASK_LOWER=Math.pow(2,e.R)-1,e.MASK_UPPER=Math.pow(2,e.R),e}();const Yn=Object.assign((function(e){return Hn.from(e)}),{fromState:function(e){return Hn.fromState(e)}});var Zn=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,t=this.s01^(this.s01<<23|this.s00>>>9),n=e^this.s10^(e>>>18|t<<14)^(this.s10>>>5|this.s11<<27),r=t^this.s11^t>>>18^this.s11>>>5,i=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=r,this.s10=n,i},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,i=[1667051007,2321340297,1548169110,304075285],a=0;4!==a;++a)for(var s=1;s;s<<=1)i[a]&s&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var Qn=Object.assign((function(e){return new Zn(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xorshift128plus RandomGenerator");return new Zn(e[0],e[1],e[2],e[3])}}),Xn=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,t=this.s10^this.s00,n=this.s11^this.s01,r=this.s00,i=this.s01;return this.s00=r<<24^i>>>8^t^t<<16,this.s01=i<<24^r>>>8^n^(n<<16|t>>>16),this.s10=n<<5^t>>>27,this.s11=t<<5^n>>>27,e},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,i=[3639956645,3750757012,1261568508,386426335],a=0;4!==a;++a)for(var s=1;s;s<<=1)i[a]&s&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var er=Object.assign((function(e){return new Xn(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xoroshiro128plus RandomGenerator");return new Xn(e[0],e[1],e[2],e[3])}});function tr(e,t){if(e.sign!==t.sign)return nr(e,{sign:-t.sign,data:t.data});for(var n=[],r=0,i=e.data,a=t.data,s=i.length-1,o=a.length-1;s>=0||o>=0;--s,--o){var c=(s>=0?i[s]:0)+(o>=0?a[o]:0)+r;n.push(c>>>0),r=~~(c/4294967296)}return 0!==r&&n.push(r),{sign:e.sign,data:n.reverse()}}function nr(e,t){if(e.sign!==t.sign)return tr(e,{sign:-t.sign,data:t.data});var n=e.data,r=t.data;if(function(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;++r){var i=r+e.length-n,a=r+t.length-n,s=i>=0?e[i]:0,o=a>=0?t[a]:0;if(s<o)return!0;if(s>o)return!1}return!1}(n,r)){var i=nr(t,e);return i.sign=-i.sign,i}for(var a=[],s=0,o=n.length-1,c=r.length-1;o>=0||c>=0;--o,--c){var u=(o>=0?n[o]:0)-(c>=0?r[c]:0)-s;a.push(u>>>0),s=u<0?1:0}return{sign:e.sign,data:a.reverse()}}function rr(e){for(var t=e.data,n=0;n!==t.length&&0===t[n];++n);return n===t.length?(e.sign=1,e.data=[0],e):(t.splice(0,n),e)}function ir(e,t){if(t<0){var n=-t;e.sign=-1,e.data[0]=~~(n/4294967296),e.data[1]=n>>>0}else e.sign=1,e.data[0]=~~(t/4294967296),e.data[1]=t>>>0;return e}function ar(e,t){for(var n=e>2?~~(4294967296/e)*e:4294967296,r=t.unsafeNext()+2147483648;r>=n;)r=t.unsafeNext()+2147483648;return r%e}function sr(e,t,n){for(var r=t.length;;){for(var i=0;i!==r;++i){var a=ar(0===i?t[0]+1:4294967296,n);e[i]=a}for(i=0;i!==r;++i){var s=e[i],o=t[i];if(s<o)return e;if(s>o)break}}}function or(e,t,n){var r=rr(function(e){e.sign=1;for(var t=e.data,n=t.length-1;n>=0;--n){if(4294967295!==t[n])return t[n]+=1,e;t[n]=0}return t.unshift(1),e}(nr(t,e)));return rr(tr({sign:1,data:sr(r.data.slice(0),r.data,n)},e))}function cr(e,t,n){if(null!=n){var r=n.clone();return[or(e,t,r),r]}return function(n){var r=n.clone();return[or(e,t,r),r]}}var ur="undefined"!==typeof BigInt?BigInt:void 0;function lr(e,t,n){for(var r=t-e+ur(1),i=ur(-2147483648),a=ur(4294967296),s=a,o=1;s<r;)s*=a,++o;for(var c=s-s%r;;){for(var u=ur(0),l=0;l!==o;++l){var f=n.unsafeNext();u=a*u+(ur(f)-i)}if(u<c)return u%r+e}}function fr(e,t,n){if(null!=n){var r=n.clone();return[lr(e,t,r),r]}return function(n){var r=n.clone();return[lr(e,t,r),r]}}var dr=Number.MAX_SAFE_INTEGER,hr={sign:1,data:[0,0]},pr={sign:1,data:[0,0]},mr={sign:1,data:[0,0]},gr=[0,0];function yr(e,t,n){var r=t-e;return r<=4294967295?ar(r+1,n)+e:function(e,t,n,r){var i=n<=dr?ir(mr,n):function(e,t,n){var r=t.data[1],i=t.data[0],a=t.sign,s=n.data[1],o=n.data[0],c=n.sign;if(e.sign=1,1===a&&-1===c){var u=r+s,l=i+o+(u>4294967295?1:0);return e.data[0]=l>>>0,e.data[1]=u>>>0,e}var f=r,d=i,h=s,p=o;-1===a&&(f=s,d=o,h=r,p=i);var m=0,g=f-h;return g<0&&(m=1,g>>>=0),e.data[0]=d-p-m,e.data[1]=g,e}(mr,ir(hr,t),ir(pr,e));return 4294967295===i.data[1]?(i.data[0]+=1,i.data[1]=0):i.data[1]+=1,sr(gr,i.data,r),4294967296*gr[0]+gr[1]+e}(e,t,r,n)}function br(e,t,n){if(null!=n){var r=n.clone();return[yr(e,t,r),r]}return function(n){var r=n.clone();return[yr(e,t,r),r]}}var Sr="module",wr="6.1.0",vr="a413dd2b721516be2ef29adffb515c5ae67bfbad";const Er=r;var kr;!function(e){e[e.None=0]="None",e[e.Verbose=1]="Verbose",e[e.VeryVerbose=2]="VeryVerbose"}(kr||(kr={}));const xr=Date.now,_r=Math.min,Ir=Math.random;class Tr{constructor(e){const t=e||{};this.seed=Tr.readSeed(t),this.randomType=Tr.readRandomType(t),this.numRuns=Tr.readNumRuns(t),this.verbose=Tr.readVerbose(t),this.maxSkipsPerRun=Tr.readOrDefault(t,"maxSkipsPerRun",100),this.timeout=Tr.safeTimeout(Tr.readOrDefault(t,"timeout",null)),this.skipAllAfterTimeLimit=Tr.safeTimeout(Tr.readOrDefault(t,"skipAllAfterTimeLimit",null)),this.interruptAfterTimeLimit=Tr.safeTimeout(Tr.readOrDefault(t,"interruptAfterTimeLimit",null)),this.markInterruptAsFailure=Tr.readBoolean(t,"markInterruptAsFailure"),this.skipEqualValues=Tr.readBoolean(t,"skipEqualValues"),this.ignoreEqualValues=Tr.readBoolean(t,"ignoreEqualValues"),this.logger=Tr.readOrDefault(t,"logger",(e=>{console.log(e)})),this.path=Tr.readOrDefault(t,"path",""),this.unbiased=Tr.readBoolean(t,"unbiased"),this.examples=Tr.readOrDefault(t,"examples",[]),this.endOnFailure=Tr.readBoolean(t,"endOnFailure"),this.reporter=Tr.readOrDefault(t,"reporter",null),this.asyncReporter=Tr.readOrDefault(t,"asyncReporter",null),this.errorWithCause=Tr.readBoolean(t,"errorWithCause")}toParameters(){const e=e=>null!==e?e:void 0;return{seed:this.seed,randomType:this.randomType,numRuns:this.numRuns,maxSkipsPerRun:this.maxSkipsPerRun,timeout:e(this.timeout),skipAllAfterTimeLimit:e(this.skipAllAfterTimeLimit),interruptAfterTimeLimit:e(this.interruptAfterTimeLimit),markInterruptAsFailure:this.markInterruptAsFailure,skipEqualValues:this.skipEqualValues,ignoreEqualValues:this.ignoreEqualValues,path:this.path,logger:this.logger,unbiased:this.unbiased,verbose:this.verbose,examples:this.examples,endOnFailure:this.endOnFailure,reporter:e(this.reporter),asyncReporter:e(this.asyncReporter),errorWithCause:this.errorWithCause}}static read(e){return new Tr(e)}}Tr.createQualifiedRandomGenerator=e=>t=>{const n=e(t);return void 0===n.unsafeJump&&(n.unsafeJump=()=>qn(n,42)),n},Tr.readSeed=e=>{if(null==e.seed)return xr()^4294967296*Ir();const t=0|e.seed;if(e.seed===t)return t;return t^4294967296*(e.seed-t)},Tr.readRandomType=e=>{if(null==e.randomType)return Er.xorshift128plus;if("string"===typeof e.randomType)switch(e.randomType){case"mersenne":return Tr.createQualifiedRandomGenerator(Er.mersenne);case"congruential":case"congruential32":return Tr.createQualifiedRandomGenerator(Er.congruential32);case"xorshift128plus":return Er.xorshift128plus;case"xoroshiro128plus":return Er.xoroshiro128plus;default:throw new Error(`Invalid random specified: '${e.randomType}'`)}const t=e.randomType(0);if("min"in t&&-2147483648!==t.min)throw new Error(`Invalid random number generator: min must equal -0x80000000, got ${String(t.min)}`);if("max"in t&&2147483647!==t.max)throw new Error(`Invalid random number generator: max must equal 0x7fffffff, got ${String(t.max)}`);return"unsafeJump"in t?e.randomType:Tr.createQualifiedRandomGenerator(e.randomType)},Tr.readNumRuns=e=>null!=e.numRuns?e.numRuns:null!=e.num_runs?e.num_runs:100,Tr.readVerbose=e=>null==e.verbose?kr.None:"boolean"===typeof e.verbose?!0===e.verbose?kr.Verbose:kr.None:e.verbose<=kr.None?kr.None:e.verbose>=kr.VeryVerbose?kr.VeryVerbose:0|e.verbose,Tr.readBoolean=(e,t)=>!0===e[t],Tr.readOrDefault=(e,t,n)=>{const r=e[t];return null!=r?r:n},Tr.safeTimeout=e=>null===e?null:_r(e,2147483647);class Or{constructor(e,t,n,r,i,a){this.property=e,this.getTime=t,this.interruptExecution=r,this.setTimeoutSafe=i,this.clearTimeoutSafe=a,this.skipAfterTime=this.getTime()+n,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}run(e,t){const n=this.skipAfterTime-this.getTime();if(n<=0){const e=new Le(this.interruptExecution);return this.isAsync()?Promise.resolve(e):e}if(this.interruptExecution&&this.isAsync()){const r=function(e,t,n){let r=null;return{clear:()=>n(r),promise:new Promise((n=>{r=t((()=>{const e=new Le(!0);n(e)}),e)}))}}(n,this.setTimeoutSafe,this.clearTimeoutSafe),i=Promise.race([this.property.run(e,t),r.promise]);return i.then(r.clear,r.clear),i}return this.property.run(e,t)}}class Ar{constructor(e,t,n,r){this.property=e,this.timeMs=t,this.setTimeoutSafe=n,this.clearTimeoutSafe=r,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>Promise.resolve(this.property.runBeforeEach()),this.runAfterEach=()=>Promise.resolve(this.property.runAfterEach()))}isAsync(){return!0}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}async run(e,t){const n=((e,t,n)=>{let r=null;return{clear:()=>n(r),promise:new Promise((n=>{r=t((()=>{n({error:new lt(`Property timeout: exceeded limit of ${e} milliseconds`),errorMessage:`Property timeout: exceeded limit of ${e} milliseconds`})}),e)}))}})(this.timeMs,this.setTimeoutSafe,this.clearTimeoutSafe),r=Promise.race([this.property.run(e,t),n.promise]);return r.then(n.clear,n.clear),r}}class Nr{constructor(e){this.property=e,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,void 0)}shrink(e){return this.property.shrink(e)}run(e,t){return this.property.run(e,t)}}const Cr=Array.from,Rr="undefined"!==typeof Buffer?Buffer.isBuffer:void 0,Fr=JSON.stringify,Mr=Number.isNaN,Lr=Object.keys,Pr=Object.getOwnPropertySymbols,Dr=Object.getOwnPropertyDescriptor,Ur=Object.getPrototypeOf,jr=Number.NEGATIVE_INFINITY,Br=Number.POSITIVE_INFINITY,qr=Symbol.for("fast-check/toStringMethod");function $r(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&qr in e&&"function"===typeof e[qr]}const Wr=Symbol.for("fast-check/asyncToStringMethod");function zr(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&Wr in e&&"function"===typeof e[Wr]}const Vr=/^Symbol\((.*)\)$/;function Gr(e){switch(e){case 0:return 1/e===jr?"-0":"0";case jr:return"Number.NEGATIVE_INFINITY";case Br:return"Number.POSITIVE_INFINITY";default:return e===e?yt(e):"Number.NaN"}}function Kr(e,t,n){const r=[...t,e];if("object"===typeof e&&-1!==Pt(t,e))return"[cyclic]";if(zr(e)){const t=n(e);if("fulfilled"===t.state)return t.value}if($r(e))try{return e[qr]()}catch(a){}switch(gn(e)){case"[object Array]":{const t=e;if(t.length>=50&&function(e){let t=-1;for(const n in e){const e=Number(n);if(e!==t+1)return!0;t=e}return t+1!==e.length}(t)){const e=[];for(const i in t)Mr(Number(i))||Bt(e,`${i}:${Kr(t[i],r,n)}`);return 0!==e.length?`Object.assign(Array(${t.length}),{${Dt(e,",")}})`:`Array(${t.length})`}const i=Dt(Ut(t,(e=>Kr(e,r,n))),",");return 0===t.length||t.length-1 in t?`[${i}]`:`[${i},]`}case"[object BigInt]":return`${e}n`;case"[object Boolean]":{const t=1==e?"true":"false";return"boolean"===typeof e?t:`new Boolean(${t})`}case"[object Date]":{const t=e;return Mr(Kt(t))?"new Date(NaN)":`new Date(${Fr((i=t,function(e){try{return e.toISOString}catch(a){return}}(i)===Gt?i.toISOString():rt(Gt,i,[])))})`}case"[object Map]":return`new Map(${Kr(Array.from(e),r,n)})`;case"[object Null]":return"null";case"[object Number]":return"number"===typeof e?Gr(e):`new Number(${Gr(Number(e))})`;case"[object Object]":{try{const t=e.toString;if("function"===typeof t&&t!==Object.prototype.toString)return e.toString()}catch(a){return"[object Object]"}const t=t=>`${"__proto__"===t?'["__proto__"]':"symbol"===typeof t?`[${Kr(t,r,n)}]`:Fr(t)}:${Kr(e[t],r,n)}`,i="{"+Dt([...Ut(Lr(e),t),...Ut(jt(Pr(e),(t=>{const n=Dr(e,t);return n&&n.enumerable})),t)],",")+"}";return null===Ur(e)?"{}"===i?"Object.create(null)":`Object.assign(Object.create(null),${i})`:i}case"[object Set]":return`new Set(${Kr(Array.from(e),r,n)})`;case"[object String]":return"string"===typeof e?Fr(e):`new String(${Fr(e)})`;case"[object Symbol]":{const t=e;if(void 0!==Symbol.keyFor(t))return`Symbol.for(${Fr(Symbol.keyFor(t))})`;const n=function(e){if(void 0!==e.description)return e.description;const t=Vr.exec(yt(e));return t&&t[1].length?t[1]:null}(t);if(null===n)return"Symbol()";return t===(n.startsWith("Symbol.")&&Symbol[n.substring(7)])?n:`Symbol(${Fr(n)})`}case"[object Promise]":{const t=n(e);switch(t.state){case"fulfilled":return`Promise.resolve(${Kr(t.value,r,n)})`;case"rejected":return`Promise.reject(${Kr(t.value,r,n)})`;case"pending":return"new Promise(() => {/*pending*/})";default:return"new Promise(() => {/*unknown*/})"}}case"[object Error]":if(e instanceof Error)return`new Error(${Kr(e.message,r,n)})`;break;case"[object Undefined]":return"undefined";case"[object Int8Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Int16Array]":case"[object Uint16Array]":case"[object Int32Array]":case"[object Uint32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object BigInt64Array]":case"[object BigUint64Array]":{if("function"===typeof Rr&&Rr(e))return`Buffer.from(${Kr(Cr(e.values()),r,n)})`;const t=Ur(e),i=t&&t.constructor&&t.constructor.name;if("string"===typeof i){const t=e.values();return`${i}.from(${Kr(Cr(t),r,n)})`}break}}var i;try{return e.toString()}catch(s){return gn(e)}}function Jr(e){return Kr(e,[],(()=>({state:"unknown",value:void 0})))}function Hr(e){const t=Symbol(),n=[],r=new Map;const i={state:"unknown",value:void 0},a=function(e){const a=e;if(r.has(a))return r.get(a);const s=function(){let e=null;return{delay:new Promise((n=>{e=setTimeout((()=>{e=null,n(t)}),0)})),cancel:()=>{null!==e&&clearTimeout(e)}}}(),o=Wr in e?Promise.resolve().then((()=>e[Wr]())):e;return o.catch((()=>{})),n.push(Promise.race([o,s.delay]).then((e=>{e===t?r.set(a,{state:"pending",value:void 0}):r.set(a,{state:"fulfilled",value:e}),s.cancel()}),(e=>{r.set(a,{state:"rejected",value:e}),s.cancel()}))),r.set(a,i),i};return function t(){const r=Kr(e,[],a);return 0===n.length?r:Promise.all(n.splice(0)).then(t)}()}async function Yr(e){return Promise.resolve(Hr(e))}function Zr(e){return null===e?new Le:e}function Qr(e,t){return function(...e){return e[1]?e[0].then(Zr):Zr(e[0])}(e,t)}class Xr{constructor(e,t){this.property=e,this.skipRuns=t,this.coveredCases=new Map,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}run(e,t){const n=Jr(e);if(this.coveredCases.has(n)){const e=this.coveredCases.get(n);return this.skipRuns?Qr(e,this.property.isAsync()):e}const r=this.property.run(e,t);return this.coveredCases.set(n,r),r}}const ei=Date.now,ti=setTimeout,ni=clearTimeout;var ri;!function(e){e[e.Success=0]="Success",e[e.Skipped=-1]="Skipped",e[e.Failure=1]="Failure"}(ri||(ri={}));class ii{constructor(e,t){this.verbosity=e,this.interruptedAsFailure=t,this.isSuccess=()=>null==this.pathToFailure,this.firstFailure=()=>this.pathToFailure?+sn(this.pathToFailure,":")[0]:-1,this.numShrinks=()=>this.pathToFailure?sn(this.pathToFailure,":").length-1:0,this.rootExecutionTrees=[],this.currentLevelExecutionTrees=this.rootExecutionTrees,this.failure=null,this.numSkips=0,this.numSuccesses=0,this.interrupted=!1}appendExecutionTree(e,t){const n={status:e,value:t,children:[]};return this.currentLevelExecutionTrees.push(n),n}fail(e,t,n){if(this.verbosity>=kr.Verbose){const t=this.appendExecutionTree(ri.Failure,e);this.currentLevelExecutionTrees=t.children}null==this.pathToFailure?this.pathToFailure=`${t}`:this.pathToFailure+=`:${t}`,this.value=e,this.failure=n}skip(e){this.verbosity>=kr.VeryVerbose&&this.appendExecutionTree(ri.Skipped,e),null==this.pathToFailure&&++this.numSkips}success(e){this.verbosity>=kr.VeryVerbose&&this.appendExecutionTree(ri.Success,e),null==this.pathToFailure&&++this.numSuccesses}interrupt(){this.interrupted=!0}extractFailures(){if(this.isSuccess())return[];const e=[];let t=this.rootExecutionTrees;for(;t.length>0&&t[t.length-1].status===ri.Failure;){const n=t[t.length-1];e.push(n.value),t=n.children}return e}toRunDetails(e,t,n,r){if(!this.isSuccess())return{failed:!0,interrupted:this.interrupted,numRuns:this.firstFailure()+1-this.numSkips,numSkips:this.numSkips,numShrinks:this.numShrinks(),seed:e,counterexample:this.value,counterexamplePath:ii.mergePaths(t,this.pathToFailure),error:this.failure.errorMessage,errorInstance:this.failure.error,failures:this.extractFailures(),executionSummary:this.rootExecutionTrees,verbose:this.verbosity,runConfiguration:r.toParameters()};const i=this.interruptedAsFailure||0===this.numSuccesses;return{failed:this.numSkips>n||this.interrupted&&i,interrupted:this.interrupted,numRuns:this.numSuccesses,numSkips:this.numSkips,numShrinks:0,seed:e,counterexample:null,counterexamplePath:null,error:null,errorInstance:null,failures:[],executionSummary:this.rootExecutionTrees,verbose:this.verbosity,runConfiguration:r.toParameters()}}}ii.mergePaths=(e,t)=>{if(0===e.length)return t;const n=e.split(":"),r=t.split(":"),i=+n[n.length-1]+ +r[0];return[...n.slice(0,n.length-1),`${i}`,...r.slice(1)].join(":")};class ai{constructor(e,t,n,r){this.sourceValues=e,this.shrink=t,this.runExecution=new ii(n,r),this.currentIdx=-1,this.nextValues=e}[Symbol.iterator](){return this}next(){const e=this.nextValues.next();return e.done||this.runExecution.interrupted?{done:!0,value:void 0}:(this.currentValue=e.value,++this.currentIdx,{done:!1,value:e.value.value_})}handleResult(e){null==e||"object"!==typeof e||Le.isFailure(e)?null!=e?e.interruptExecution?this.runExecution.interrupt():(this.runExecution.skip(this.currentValue.value_),this.sourceValues.skippedOne()):this.runExecution.success(this.currentValue.value_):(this.runExecution.fail(this.currentValue.value_,this.currentIdx,e),this.currentIdx=-1,this.nextValues=this.shrink(this.currentValue))}}class si{constructor(e,t,n){this.initialValues=e,this.maxInitialIterations=t,this.remainingSkips=n}[Symbol.iterator](){return this}next(){if(-1!==--this.maxInitialIterations&&this.remainingSkips>=0){const e=this.initialValues.next();if(!e.done)return{value:e.value,done:!1}}return{value:void 0,done:!0}}skippedOne(){--this.remainingSkips,++this.maxInitialIterations}}class oi{constructor(e){this.internalRng=e.clone()}clone(){return new oi(this.internalRng)}next(e){return yr(0,(1<<e)-1,this.internalRng)}nextBoolean(){return 1==yr(0,1,this.internalRng)}nextInt(e,t){return yr(null==e?oi.MIN_INT:e,null==t?oi.MAX_INT:t,this.internalRng)}nextBigInt(e,t){return lr(e,t,this.internalRng)}nextArrayInt(e,t){return or(e,t,this.internalRng)}nextDouble(){const e=this.next(26),t=this.next(27);return(e*oi.DBL_FACTOR+t)*oi.DBL_DIVISOR}getState(){if("getState"in this.internalRng&&"function"===typeof this.internalRng.getState)return this.internalRng.getState()}}function ci(e,t,n){return t.unsafeJump(),e.generate(new oi(t),n)}function*ui(e,t,n,r){for(let i=0;i!==r.length;++i)yield new Ve(r[i],void 0);for(let i=0,a=n(t);;++i)yield ci(e,a,i)}function li(e,t,n){return()=>e.generate(new oi(t),n)}function*fi(e,t,n,r){yield*Ut(r,(e=>()=>new Ve(e,void 0)));let i=0,a=n(t);for(;;)a=a.jump?a.jump():$n(a,42),yield li(e,a,i++)}function di(e){return e()}function hi(e,t,n){const r=t,i=e.split(":").map((e=>+e));if(0===i.length)return r.map(di);if(!i.every((e=>!Number.isNaN(e))))throw new Error(`Unable to replay, got invalid path=${e}`);let a=r.drop(i[0]).map(di);for(const s of i.slice(1)){const t=a.getNthOrLast(0);if(null===t)throw new Error(`Unable to replay, got wrong path=${e}`);a=n(t).drop(s)}return a}oi.MIN_INT=-2147483648,oi.MAX_INT=2147483647,oi.DBL_FACTOR=Math.pow(2,27),oi.DBL_DIVISOR=Math.pow(2,-53);const pi=Object.assign;function mi(e,t){const n=[],r=[];for(const i of e.slice().reverse())r.push({depth:1,tree:i});for(;0!==r.length;){const e=r.pop(),i=e.tree,a=e.depth,s=i.status===ri.Success?"\x1b[32m\u221a\x1b[0m":i.status===ri.Failure?"\x1b[31m\xd7\x1b[0m":"\x1b[33m!\x1b[0m",o=Array(a).join(". ");n.push(`${o}${s} ${t(i.value)}`);for(const t of i.children.slice().reverse())r.push({depth:a+1,tree:t})}return`Execution summary:\n${n.join("\n")}`}function gi(e,t){const n=e.runConfiguration.errorWithCause?"":`\nGot ${function(e,t,n){return function(e){try{return e.replace}catch(t){return}}(e)===an?e.replace(t,n):rt(an,e,[t,n])}(e.error,/^Error: /,"error: ")}`,r=`Property failed after ${e.numRuns} tests\n{ seed: ${e.seed}, path: "${e.counterexamplePath}", endOnFailure: true }\nCounterexample: ${t(e.counterexample)}\nShrunk ${e.numShrinks} time(s)${n}`;let i=null;const a=[];return e.verbose>=kr.VeryVerbose?i=mi(e.executionSummary,t):e.verbose===kr.Verbose?i=function(e,t){return`Encountered failures were:\n- ${e.map(t).join("\n- ")}`}(e.failures,t):Bt(a,"Enable verbose mode in order to have the list of all failing values encountered during the run"),{message:r,details:i,hints:a}}function yi(e,t){if(!e.failed)return;const{message:n,details:r,hints:i}=null===e.counterexamplePath?e.interrupted?function(e,t){const n=`Property interrupted after ${e.numRuns} tests\n{ seed: ${e.seed} }`;let r=null;const i=[];return e.verbose>=kr.VeryVerbose?r=mi(e.executionSummary,t):Bt(i,"Enable verbose mode at level VeryVerbose in order to check all generated values and their associated status"),{message:n,details:r,hints:i}}(e,t):function(e,t){const n=`Failed to run property, too many pre-condition failures encountered\n{ seed: ${e.seed} }\n\nRan ${e.numRuns} time(s)\nSkipped ${e.numSkips} time(s)`;let r=null;const i=["Try to reduce the number of rejected values by combining map, flatMap and built-in arbitraries","Increase failure tolerance by setting maxSkipsPerRun to an higher value"];return e.verbose>=kr.VeryVerbose?r=mi(e.executionSummary,t):Bt(i,"Enable verbose mode at level VeryVerbose in order to check all generated values and their associated status"),{message:n,details:r,hints:i}}(e,t):gi(e,t);let a=n;return null!=r&&(a+=`\n\n${r}`),i.length>0&&(a+=`\n\n${function(e){return 1===e.length?`Hint: ${e[0]}`:e.map(((e,t)=>`Hint (${t+1}): ${e}`)).join("\n")}(i)}`),a}function bi(e){return yi(e,Jr)}async function Si(e){const t=[];const n=yi(e,(function(e){const n=Hr(e);return"string"===typeof n?n:(t.push(Promise.all([e,n])),"\u2026")}));if(0===t.length)return n;const r=new Map(await Promise.all(t));return yi(e,(function(e){const t=r.get(e);return void 0!==t?t:Jr(e)}))}function wi(e,t){if(!t.runConfiguration.errorWithCause)throw new lt(e);const n=new lt(e,{cause:t.errorInstance});return"cause"in n||pi(n,{cause:t.errorInstance}),n}function vi(e){return e.runConfiguration.asyncReporter?e.runConfiguration.asyncReporter(e):e.runConfiguration.reporter?e.runConfiguration.reporter(e):function(e){if(e.failed)throw wi(bi(e),e)}(e)}async function Ei(e){return e.runConfiguration.asyncReporter?e.runConfiguration.asyncReporter(e):e.runConfiguration.reporter?e.runConfiguration.reporter(e):async function(e){if(e.failed)throw wi(await Si(e),e)}(e)}const ki=Object.assign;function xi(e,t){if(null==e||null==e.generate)throw new Error("Invalid property encountered, please use a valid property");if(null==e.run)throw new Error("Invalid property encountered, please use a valid property not an arbitrary");const n=Tr.read(ki(ki({},Nn()),t));if(null!==n.reporter&&null!==n.asyncReporter)throw new Error("Invalid parameters encountered, reporter and asyncReporter cannot be specified together");if(null!==n.asyncReporter&&!e.isAsync())throw new Error("Invalid parameters encountered, only asyncProperty can be used when asyncReporter specified");const r=function(e,t){let n=e;return e.isAsync()&&null!=t.timeout&&(n=new Ar(n,t.timeout,ti,ni)),t.unbiased&&(n=new Nr(n)),null!=t.skipAllAfterTimeLimit&&(n=new Or(n,ei,t.skipAllAfterTimeLimit,!1,ti,ni)),null!=t.interruptAfterTimeLimit&&(n=new Or(n,ei,t.interruptAfterTimeLimit,!0,ti,ni)),t.skipEqualValues&&(n=new Xr(n,!0)),t.ignoreEqualValues&&(n=new Xr(n,!1)),n}(e,n),i=0===n.path.length||-1===n.path.indexOf(":")?n.numRuns:-1,a=n.numRuns*n.maxSkipsPerRun,s=(...e)=>r.shrink(...e),o=0===n.path.length?ui(r,n.seed,n.randomType,n.examples):hi(n.path,Be(fi(r,n.seed,n.randomType,n.examples)),s),c=new si(o,i,a),u=n.endOnFailure?je.nil:s;return r.isAsync()?async function(e,t,n,r,i){const a=void 0!==e.runBeforeEach&&void 0!==e.runAfterEach,s=new ai(n,t,r,i);for(const o of s){a&&await e.runBeforeEach();const t=await e.run(o,a);a&&await e.runAfterEach(),s.handleResult(t)}return s.runExecution}(r,u,c,n.verbose,n.markInterruptAsFailure).then((e=>e.toRunDetails(n.seed,n.path,a,n))):function(e,t,n,r,i){const a=void 0!==e.runBeforeEach&&void 0!==e.runAfterEach,s=new ai(n,t,r,i);for(const o of s){a&&e.runBeforeEach();const t=e.run(o,a);a&&e.runAfterEach(),s.handleResult(t)}return s.runExecution}(r,u,c,n.verbose,n.markInterruptAsFailure).toRunDetails(n.seed,n.path,a,n)}function _i(e,t){const n=xi(e,t);if(e.isAsync())return n.then(Ei);vi(n)}function Ii(e,t){const n="number"===typeof t?Object.assign(Object.assign({},Nn()),{numRuns:t}):Object.assign(Object.assign({},Nn()),t),r=Tr.read(n),i=function(e,t){const n=Object.prototype.hasOwnProperty.call(e,"isAsync")?e:new Dn(e,(()=>!0));return!0===t.unbiased?new Nr(n):n}(e,r),a=i.shrink.bind(i);return(0===r.path.length?Be(ui(i,r.seed,r.randomType,r.examples)):hi(r.path,Be(fi(i,r.seed,r.randomType,r.examples)),a)).take(r.numRuns).map((e=>e.value_))}function Ti(e,t){return[...Ii(e,t)]}function Oi(e,t,n){const r="number"===typeof n?Object.assign(Object.assign({},Nn()),{numRuns:n}):Object.assign(Object.assign({},Nn()),n),i=Tr.read(r),a={};for(const u of Ii(e,n)){const e=t(u),n=Array.isArray(e)?e:[e];for(const t of n)a[t]=(a[t]||0)+1}const s=Object.entries(a).sort(((e,t)=>t[1]-e[1])).map((e=>{return[e[0],`${t=100*e[1]/i.numRuns,(Math.round(100*t)/100).toFixed(2)}%`];var t})),o=s.map((e=>e[0].length)).reduce(((e,t)=>Math.max(e,t)),0),c=s.map((e=>e[1].length)).reduce(((e,t)=>Math.max(e,t)),0);for(const u of s)i.logger(`${u[0].padEnd(o,".")}..${u[1].padStart(c,".")}`)}function Ai(e,t,n,r){const i=n();let a=e.clone();const s={mrng:e.clone(),biasFactor:t,history:[]},o={values:()=>s.history.map((e=>e.value)),[qe]:()=>Ai(e,t,n,r).value,[qr]:()=>Jr(s.history.map((e=>e.value)))},c=Object.assign(((e,...n)=>(e=>{const n=i[s.history.length];if(void 0!==n&&n.arb===e){const t=n.value;return s.history.push({arb:e,value:t,context:n.context,mrng:n.mrng}),a=n.mrng.clone(),t}const r=e.generate(a,t);return s.history.push({arb:e,value:r.value_,context:r.context,mrng:a.clone()}),r.value})(r(e,n))),o);return new Ve(c,s)}function Ni(e,t){if(null!==e&&"object"===typeof e&&null!==t&&"object"===typeof t){if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1}else if(Array.isArray(t))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!Ni(e[n],t[n]))return!1}return!0}return Object.is(e,t)}class Ci extends Ke{constructor(){super(...arguments),this.arbitraryCache=function(e){const t=new Map;return function(n,r){const i=t.get(n);if(void 0===i){const e=n(...r);return t.set(n,[{args:r,value:e}]),e}const a=i;for(const t of a)if(e(r,t.args))return t.value;const s=n(...r);return a.push({args:r,value:s}),s}}(Ni)}generate(e,t){return Ai(e,t,(()=>[]),this.arbitraryCache)}canShrinkWithoutContext(e){return!1}shrink(e,t){if(void 0===t)return je.nil();const n=t,r=n.mrng,i=n.biasFactor,a=n.history;return kn(a.map((e=>e.arb)),a.map((e=>e.value)),a.map((e=>e.context))).map((e=>Ai(r,i,(function(){const t=e.value,n=e.context;return a.map(((e,r)=>({arb:e.arb,value:t[r],context:n[r],mrng:e.mrng})))}),this.arbitraryCache)))}}function Ri(){return new Ci}const Fi=Math.floor,Mi=Math.log;function Li(e){return Fi(Mi(e)/Mi(2))}function Pi(e){return e===at(0)?at(0):at(yt(e).length)}function Di(e,t,n){if(e===t)return[{min:e,max:t}];if(e<0&&t>0){const r=n(-e),i=n(t);return[{min:-r,max:i},{min:t-i,max:t},{min:e,max:e+r}]}const r=n(t-e),i={min:e,max:e+r},a={min:t-r,max:t};return e<0?[a,i]:[i,a]}const Ui=Math.ceil,ji=Math.floor;function Bi(e){return ji(e/2)}function qi(e){return Ui(e/2)}function $i(e,t,n){const r=e-t;return Be(r>0?function*(){let i=n?void 0:t;for(let a=n?r:Bi(r);a>0;a=Bi(a)){const n=a===r?t:e-a;yield new Ve(n,i),i=n}}():function*(){let i=n?void 0:t;for(let a=n?r:qi(r);a<0;a=qi(a)){const n=a===r?t:e-a;yield new Ve(n,i),i=n}}())}const Wi=Math.sign,zi=Number.isInteger,Vi=Object.is;class Gi extends Ke{constructor(e,t){super(),this.min=e,this.max=t}generate(e,t){const n=this.computeGenerateRange(e,t);return new Ve(e.nextInt(n.min,n.max),void 0)}canShrinkWithoutContext(e){return"number"===typeof e&&zi(e)&&!Vi(e,-0)&&this.min<=e&&e<=this.max}shrink(e,t){if(!Gi.isValidContext(e,t)){return $i(e,this.defaultTarget(),!0)}return this.isLastChanceTry(e,t)?je.of(new Ve(t,void 0)):$i(e,t,!1)}defaultTarget(){return this.min<=0&&this.max>=0?0:this.min<0?this.max:this.min}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=Di(this.min,this.max,Li);if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}isLastChanceTry(e,t){return e>0?e===t+1&&e>this.min:e<0&&(e===t-1&&e<this.max)}static isValidContext(e,t){if(void 0===t)return!1;if("number"!==typeof t)throw new Error("Invalid context type passed to IntegerArbitrary (#1)");if(0!==t&&Wi(e)!==Wi(t))throw new Error("Invalid context value passed to IntegerArbitrary (#2)");return!0}}const Ki=Number.isInteger;function Ji(e={}){const t=function(e){return{min:void 0!==e.min?e.min:-2147483648,max:void 0!==e.max?e.max:2147483647}}(e);if(t.min>t.max)throw new Error("fc.integer maximum value should be equal or greater than the minimum one");if(!Ki(t.min))throw new Error("fc.integer minimum value should be an integer");if(!Ki(t.max))throw new Error("fc.integer maximum value should be an integer");return new Gi(t.min,t.max)}const Hi=new Map;function Yi(e){if(void 0===e)return{depth:0};if("string"!==typeof e)return e;const t=Hi.get(e);if(void 0!==t)return t;const n={depth:0};return Hi.set(e,n),n}function Zi(){return{depth:0}}class Qi{constructor(e,t,n){this.arb=e,this.mrng=t,this.biasFactor=n}attemptExact(){}next(){return this.arb.generate(this.mrng,this.biasFactor)}}const Xi=Math.min,ea=Math.max;class ta{constructor(e,t,n,r){this.arb=e,this.mrng=t,this.slices=n,this.biasFactor=r,this.activeSliceIndex=0,this.nextIndexInSlice=0,this.lastIndexInSlice=-1}attemptExact(e){if(0!==e&&1===this.mrng.nextInt(1,this.biasFactor)){const t=[];for(let n=0;n!==this.slices.length;++n){this.slices[n].length===e&&Bt(t,n)}if(0===t.length)return;this.activeSliceIndex=t[this.mrng.nextInt(0,t.length-1)],this.nextIndexInSlice=0,this.lastIndexInSlice=e-1}}next(){if(this.nextIndexInSlice<=this.lastIndexInSlice)return new Ve(this.slices[this.activeSliceIndex][this.nextIndexInSlice++],void 0);if(1!==this.mrng.nextInt(1,this.biasFactor))return this.arb.generate(this.mrng,this.biasFactor);this.activeSliceIndex=this.mrng.nextInt(0,this.slices.length-1);const e=this.slices[this.activeSliceIndex];if(1!==this.mrng.nextInt(1,this.biasFactor))return this.nextIndexInSlice=1,this.lastIndexInSlice=e.length-1,new Ve(e[0],void 0);const t=this.mrng.nextInt(0,e.length-1),n=this.mrng.nextInt(0,e.length-1);return this.nextIndexInSlice=Xi(t,n),this.lastIndexInSlice=ea(t,n),new Ve(e[this.nextIndexInSlice++],void 0)}}function na(e,t,n,r){return void 0===r||0===n.length||1!==t.nextInt(1,r)?new Qi(e,t,r):new ta(e,t,n,r)}const ra=Math.floor,ia=Math.log,aa=Math.max,sa=Array.isArray;function oa(e,t){return e===t?e:e+ra(ia(t-e)/ia(2))}class ca extends Ke{constructor(e,t,n,r,i,a,s){super(),this.arb=e,this.minLength=t,this.maxGeneratedLength=n,this.maxLength=r,this.setBuilder=a,this.customSlices=s,this.lengthArb=Ji({min:t,max:n}),this.depthContext=Yi(i)}preFilter(e){if(void 0===this.setBuilder)return e;const t=this.setBuilder();for(let n=0;n!==e.length;++n)t.tryAdd(e[n]);return t.getData()}static makeItCloneable(e,t){return e[qe]=()=>{const e=[];for(let n=0;n!==t.length;++n)Bt(e,t[n].value);return this.makeItCloneable(e,t),e},e}generateNItemsNoDuplicates(e,t,n,r){let i=0;const a=e(),s=na(this.arb,n,this.customSlices,r);for(;a.size()<t&&i<this.maxGeneratedLength;){const e=s.next();a.tryAdd(e)?i=0:i+=1}return a.getData()}safeGenerateNItemsNoDuplicates(e,t,n,r){const i=aa(0,t-oa(this.minLength,this.maxGeneratedLength));this.depthContext.depth+=i;try{return this.generateNItemsNoDuplicates(e,t,n,r)}finally{this.depthContext.depth-=i}}generateNItems(e,t,n){const r=[],i=na(this.arb,t,this.customSlices,n);i.attemptExact(e);for(let a=0;a!==e;++a){Bt(r,i.next())}return r}safeGenerateNItems(e,t,n){const r=aa(0,e-oa(this.minLength,this.maxGeneratedLength));this.depthContext.depth+=r;try{return this.generateNItems(e,t,n)}finally{this.depthContext.depth-=r}}wrapper(e,t,n,r){const i=t?this.preFilter(e):e;let a=!1;const s=[],o=[];for(let u=0;u!==i.length;++u){const e=i[u];a=a||e.hasToBeCloned,Bt(s,e.value),Bt(o,e.context)}a&&ca.makeItCloneable(s,i);const c={shrunkOnce:t,lengthContext:e.length===i.length&&void 0!==n?n:void 0,itemsContexts:o,startIndex:r};return new Ve(s,c)}generate(e,t){const n=this.applyBias(e,t),r=n.size,i=void 0!==this.setBuilder?this.safeGenerateNItemsNoDuplicates(this.setBuilder,r,e,n.biasFactorItems):this.safeGenerateNItems(r,e,n.biasFactorItems);return this.wrapper(i,!1,void 0,0)}applyBias(e,t){if(void 0===t)return{size:this.lengthArb.generate(e,void 0).value};if(this.minLength===this.maxGeneratedLength)return{size:this.lengthArb.generate(e,void 0).value,biasFactorItems:t};if(1!==e.nextInt(1,t))return{size:this.lengthArb.generate(e,void 0).value};if(1!==e.nextInt(1,t)||this.minLength===this.maxGeneratedLength)return{size:this.lengthArb.generate(e,void 0).value,biasFactorItems:t};const n=oa(this.minLength,this.maxGeneratedLength);return{size:Ji({min:this.minLength,max:n}).generate(e,void 0).value,biasFactorItems:t}}canShrinkWithoutContext(e){if(!sa(e)||this.minLength>e.length||e.length>this.maxLength)return!1;for(let t=0;t!==e.length;++t){if(!(t in e))return!1;if(!this.arb.canShrinkWithoutContext(e[t]))return!1}return this.preFilter(Ut(e,(e=>new Ve(e,void 0)))).length===e.length}shrinkItemByItem(e,t,n){const r=[];for(let i=t.startIndex;i<n;++i)Bt(r,bn((()=>this.arb.shrink(e[i],t.itemsContexts[i]).map((n=>{const r=Ut($t(e,0,i),((e,n)=>new Ve(We(e),t.itemsContexts[n]))),a=Ut($t(e,i+1),((e,n)=>new Ve(We(e),t.itemsContexts[n+i+1])));return[[...r,n,...a],void 0,i]})))));return je.nil().join(...r)}shrinkImpl(e,t){if(0===e.length)return je.nil();const n=void 0!==t?t:{shrunkOnce:!1,lengthContext:void 0,itemsContexts:[],startIndex:0};return this.lengthArb.shrink(e.length,n.lengthContext).drop(n.shrunkOnce&&void 0===n.lengthContext&&e.length>this.minLength+1?1:0).map((t=>{const r=e.length-t.value;return[Ut($t(e,r),((e,t)=>new Ve(We(e),n.itemsContexts[t+r]))),t.context,0]})).join(bn((()=>e.length>this.minLength?this.shrinkItemByItem(e,n,1):this.shrinkItemByItem(e,n,e.length)))).join(e.length>this.minLength?bn((()=>{const t={shrunkOnce:!1,lengthContext:void 0,itemsContexts:$t(n.itemsContexts,1),startIndex:0};return this.shrinkImpl($t(e,1),t).filter((e=>this.minLength<=e[0].length+1)).map((t=>[[new Ve(We(e[0]),n.itemsContexts[0]),...t[0]],void 0,0]))})):je.nil())}shrink(e,t){return this.shrinkImpl(e,t).map((e=>this.wrapper(e[0],!0,e[1],e[2])))}}const ua=Math.floor,la=Math.min,fa=2147483647,da=["xsmall","small","medium","large","xlarge"],ha=["-4","-3","-2","-1","=","+1","+2","+3","+4"],pa="small";function ma(e,t){const n=Pt(ha,e);if(-1===n)return e;const r=Pt(da,t);if(-1===r)throw new Error(`Unable to offset size based on the unknown defaulted one: ${t}`);const i=r+n-4;return i<0?da[0]:i>=da.length?da[da.length-1]:da[i]}function ga(e,t,n,r){const{baseSize:i=pa,defaultSizeToMaxWhenMaxSpecified:a}=Nn()||{},s=void 0!==e?e:r&&a?"max":i;if("max"===s)return n;const o=ma(s,i);return la(function(e,t){switch(t){case"xsmall":return ua(1.1*e)+1;case"small":return 2*e+10;case"medium":return 11*e+100;case"large":return 101*e+1e3;case"xlarge":return 1001*e+1e4;default:throw new Error(`Unable to compute lengths based on received size: ${t}`)}}(t,o),n)}function ya(e,t){if("number"===typeof e)return 1/e;const{baseSize:n=pa,defaultSizeToMaxWhenMaxSpecified:r}=Nn()||{},i=void 0!==e?e:t&&r?"max":n;if("max"===i)return 0;switch(ma(i,n)){case"xsmall":return 1;case"small":return.5;case"medium":return.25;case"large":return.125;case"xlarge":return.0625}}function ba(e){const{baseSize:t=pa}=Nn()||{};return void 0===e?t:ma(e,t)}function Sa(e,t={}){const n=t.size,r=t.minLength||0,i=t.maxLength,a=t.depthIdentifier,s=void 0!==i?i:fa,o=ga(n,r,s,void 0!==i),c=t.experimentalCustomSlices||[];return new ca(e,r,o,s,a,void 0,c)}function wa(e){return e/at(2)}function va(e,t,n){const r=e-t;return Be(r>0?function*(){let i=n?void 0:t;for(let t=n?r:wa(r);t>0;t=wa(t)){const n=e-t;yield new Ve(n,i),i=n}}():function*(){let i=n?void 0:t;for(let t=n?r:wa(r);t<0;t=wa(t)){const n=e-t;yield new Ve(n,i),i=n}}())}class Ea extends Ke{constructor(e,t){super(),this.min=e,this.max=t}generate(e,t){const n=this.computeGenerateRange(e,t);return new Ve(e.nextBigInt(n.min,n.max),void 0)}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=Di(this.min,this.max,Pi);if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}canShrinkWithoutContext(e){return"bigint"===typeof e&&this.min<=e&&e<=this.max}shrink(e,t){if(!Ea.isValidContext(e,t)){return va(e,this.defaultTarget(),!0)}return this.isLastChanceTry(e,t)?je.of(new Ve(t,void 0)):va(e,t,!1)}defaultTarget(){return this.min<=0&&this.max>=0?at(0):this.min<0?this.max:this.min}isLastChanceTry(e,t){return e>0?e===t+at(1)&&e>this.min:e<0&&(e===t-at(1)&&e<this.max)}static isValidContext(e,t){if(void 0===t)return!1;if("bigint"!==typeof t)throw new Error("Invalid context type passed to BigIntArbitrary (#1)");const n=e>0&&t<0||e<0&&t>0;if(t!==at(0)&&n)throw new Error("Invalid context value passed to BigIntArbitrary (#2)");return!0}}function ka(...e){const t=function(e){const t=at(-1)<<at(255),n=(at(1)<<at(255))-at(1),r=e.min,i=e.max;return{min:void 0!==r?r:t-(void 0!==i&&i<at(0)?i*i:at(0)),max:void 0!==i?i:n+(void 0!==r&&r>at(0)?r*r:at(0))}}(function(e){if(void 0===e[0])return{};if(void 0===e[1])return e[0];return{min:e[0],max:e[1]}}(e));if(t.min>t.max)throw new Error("fc.bigInt expects max to be greater than or equal to min");return new Ea(t.min,t.max)}function xa(e){if(e<1)throw new Error("fc.bigIntN expects requested number of bits to be superior or equal to 1");const t=at(-1)<<at(e-1),n=(at(1)<<at(e-1))-at(1);return new Ea(t,n)}function _a(e){const t="object"===typeof e?e.max:e,n=void 0!==t?t:(at(1)<<at(256))-at(1);if(n<0)throw new Error("fc.bigUint expects max to be greater than or equal to zero");return new Ea(at(0),n)}function Ia(e){if(e<0)throw new Error("fc.bigUintN expects requested number of bits to be superior or equal to 0");const t=at(0),n=(at(1)<<at(e))-at(1);return new Ea(t,n)}function Ta(e){return 1===e}function Oa(e){if("boolean"!==typeof e)throw new Error("Unsupported input type");return!0===e?1:0}function Aa(){return Ji({min:0,max:1}).map(Ta,Oa).noBias()}const Na=Object.is;class Ca extends Ke{constructor(e){super(),this.values=e}generate(e,t){const n=1===this.values.length?0:e.nextInt(0,this.values.length-1),r=this.values[n];return $e(r)?new Ve(r,n,(()=>r[qe]())):new Ve(r,n)}canShrinkWithoutContext(e){for(let t=0;t!==this.values.length;++t)if(Na(this.values[t],e))return!0;return!1}shrink(e,t){return 0===t||Na(e,this.values[0])?je.nil():je.of(new Ve(this.values[0],0))}}function Ra(...e){if(0===e.length)throw new Error("fc.constantFrom expects at least one parameter");return new Ca(e)}function Fa(e){return e&&e.withBigInt?Ra(!1,null,void 0,0,"",NaN,at(0)):Ra(!1,null,void 0,0,"",NaN)}const Ma=String.fromCodePoint;function La(e,t,n,r){return Ji({min:e,max:t}).map((e=>Ma(n(e))),(e=>r(function(e){if("string"!==typeof e)throw new Error("Cannot unmap non-string");if(0===e.length||e.length>2)throw new Error("Cannot unmap string with more or less than one character");const t=ln(e,0);if(1===e.length)return t;const n=ln(e,1);if(t<55296||t>56319||n<56320||n>57343)throw new Error("Cannot unmap invalid surrogate pairs");return e.codePointAt(0)}(e))))}function Pa(e){return e<95?e+32:e<=126?e-95:e}function Da(e){return e>=32&&e<=126?e-32:e>=0&&e<=31?e+95:e}function Ua(){return La(0,127,Pa,Da)}function ja(e){return e<26?e+65:e<52?e+97-26:e<62?e+48-52:62===e?43:47}function Ba(e){return e>=65&&e<=90?e-65:e>=97&&e<=122?e-97+26:e>=48&&e<=57?e-48+52:43===e?62:47===e?63:-1}function qa(){return La(0,63,ja,Ba)}function $a(e){return e}function Wa(){return La(32,126,$a,$a)}function za(){return La(0,65535,Pa,Da)}const Va=2048;function Ga(e){return e<55296?Pa(e):e+Va}function Ka(e){return e<55296?Da(e):e<=57343?-1:e-Va}function Ja(){return La(0,1114111-Va,Ga,Ka)}function Ha(e){return e<10?e+48:e+97-10}function Ya(e){return e<58?e-48:e>=97&&e<103?e-97+10:-1}function Za(){return La(0,15,Ha,Ya)}const Qa=2048;function Xa(e){return e<55296?Pa(e):e+Qa}function es(e){return e<55296?Da(e):e<=57343?-1:e-Qa}function ts(){return La(0,65535-Qa,Xa,es)}function ns(e){return new Ca([e])}class rs{constructor(){this.receivedLogs=[]}log(e){this.receivedLogs.push(e)}size(){return this.receivedLogs.length}toString(){return JSON.stringify({logs:this.receivedLogs})}[qe](){return new rs}}function is(){return ns(new rs)}const as=Number.NaN,ss=Number.isNaN;function os(e){return new ut(e)}function cs(e){if(!(e instanceof ut)||e.constructor!==ut)throw new lt("Not a valid value for date unmapper");return Kt(e)}const us=Number.isNaN;function ls(e={}){const t=void 0!==e.min?Kt(e.min):-864e13,n=void 0!==e.max?Kt(e.max):864e13,r=void 0===e.noInvalidDate||e.noInvalidDate;if(us(t))throw new Error("fc.date min must be valid instance of Date");if(us(n))throw new Error("fc.date max must be valid instance of Date");if(t>n)throw new Error("fc.date max must be greater or equal to min");if(r)return Ji({min:t,max:n}).map(os,cs);const i=n+1;return Ji({min:t,max:n+1}).map(function(e){return t=>t===e?new ut(as):os(t)}(i),function(e){return t=>{const n=cs(t);return ss(n)?e:n}}(i))}const fs=Symbol.iterator,ds=Array.isArray,hs=Object.is;class ps extends Ke{constructor(e,t){super(),this.arb=e,this.numValues=t}generate(e,t){const n=[];if(this.numValues<=0)return this.wrapper(n);for(let r=0;r!==this.numValues-1;++r)Bt(n,this.arb.generate(e.clone(),t));return Bt(n,this.arb.generate(e,t)),this.wrapper(n)}canShrinkWithoutContext(e){if(!ds(e)||e.length!==this.numValues)return!1;if(0===e.length)return!0;for(let t=1;t<e.length;++t)if(!hs(e[0],e[t]))return!1;return this.arb.canShrinkWithoutContext(e[0])}shrink(e,t){return 0===e.length?je.nil():new je(this.shrinkImpl(e,void 0!==t?t:[])).map((e=>this.wrapper(e)))}*shrinkImpl(e,t){const n=Ut(e,((e,n)=>this.arb.shrink(e,t[n])[fs]()));let r=Ut(n,(e=>e.next()));for(;!r[0].done;)yield Ut(r,(e=>e.value)),r=Ut(n,(e=>e.next()))}static makeItCloneable(e,t){return e[qe]=()=>{const e=[];for(let n=0;n!==t.length;++n)Bt(e,t[n].value);return this.makeItCloneable(e,t),e},e}wrapper(e){let t=!1;const n=[],r=[];for(let i=0;i!==e.length;++i){const a=e[i];t=t||a.hasToBeCloned,Bt(n,a.value),Bt(r,a.context)}return t&&ps.makeItCloneable(n,e),new Ve(n,r)}}function ms(e,t){return new ps(e,t)}class gs{constructor(e){this.isEqual=e,this.data=[]}tryAdd(e){for(let t=0;t!==this.data.length;++t)if(this.isEqual(this.data[t],e))return!1;return Bt(this.data,e),!0}size(){return this.data.length}getData(){return this.data}}const ys=Number.isNaN;class bs{constructor(e){this.selector=e,this.selectedItemsExceptNaN=new bt,this.data=[]}tryAdd(e){const t=this.selector(e);if(ys(t))return Bt(this.data,e),!0;const n=this.selectedItemsExceptNaN.size;return Ht(this.selectedItemsExceptNaN,t),n!==this.selectedItemsExceptNaN.size&&(Bt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}const Ss=Object.is;class ws{constructor(e){this.selector=e,this.selectedItemsExceptMinusZero=new bt,this.data=[],this.hasMinusZero=!1}tryAdd(e){const t=this.selector(e);if(Ss(t,-0))return!this.hasMinusZero&&(Bt(this.data,e),this.hasMinusZero=!0,!0);const n=this.selectedItemsExceptMinusZero.size;return Ht(this.selectedItemsExceptMinusZero,t),n!==this.selectedItemsExceptMinusZero.size&&(Bt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}class vs{constructor(e){this.selector=e,this.selectedItems=new bt,this.data=[]}tryAdd(e){const t=this.selector(e),n=this.selectedItems.size;return Ht(this.selectedItems,t),n!==this.selectedItems.size&&(Bt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}function Es(e,t={}){const n=void 0!==t.minLength?t.minLength:0,r=void 0!==t.maxLength?t.maxLength:fa,i=ga(t.size,n,r,void 0!==t.maxLength),a=t.depthIdentifier,s=function(e){if("function"===typeof e.comparator){if(void 0===e.selector){const t=e.comparator,n=(e,n)=>t(e.value_,n.value_);return()=>new gs(n)}const t=e.comparator,n=e.selector,r=e=>n(e.value_),i=(e,n)=>t(r(e),r(n));return()=>new gs(i)}const t=e.selector||(e=>e),n=e=>t(e.value_);switch(e.comparator){case"IsStrictlyEqual":return()=>new bs(n);case"SameValueZero":return()=>new vs(n);case"SameValue":case void 0:return()=>new ws(n)}}(t),o=new ca(e,n,i,r,a,s,[]);return 0===n?o:o.filter((e=>e.length>=n))}const ks=Object.create,xs=Object.defineProperty,_s=Object.getOwnPropertyDescriptor,Is=Object.getPrototypeOf,Ts=Object.getOwnPropertySymbols,Os=Object.getOwnPropertyNames,As=Object.entries;function Ns(e){const t=e[1]?ks(null):{};for(const n of e[0])xs(t,n[0],{enumerable:!0,configurable:!0,writable:!0,value:n[1]});return t}function Cs(e){if("object"!==typeof e||null===e)throw new lt("Incompatible instance received: should be a non-null object");const t=null===Is(e),n="constructor"in e&&e.constructor===Object;if(!t&&!n)throw new lt("Incompatible instance received: should be of exact type Object");if(Ts(e).length>0)throw new lt("Incompatible instance received: should contain symbols");if(!zt(Os(e),(r=e,function(e){const t=_s(r,e);return void 0!==t&&!!t.configurable&&!!t.enumerable&&!!t.writable&&void 0===t.get&&void 0===t.set})))throw new lt("Incompatible instance received: should contain only c/e/w properties without get/set");var r;return[As(e),t]}function Rs(e){return e[0]}function Fs(e,t,n={}){const r=!1!==n.noNullPrototype;return _n(Es(_n(e,t),{minLength:n.minKeys,maxLength:n.maxKeys,size:n.size,selector:Rs,depthIdentifier:n.depthIdentifier}),r?ns(!1):Aa()).map(Ns,Cs)}const Ms=Number.POSITIVE_INFINITY,Ls=Number.MAX_SAFE_INTEGER,Ps=Number.isInteger,Ds=Math.floor,Us=Math.pow,js=Math.min;class Bs extends Ke{static from(e,t,n){if(0===e.length)throw new Error(`${n} expects at least one weighted arbitrary`);let r=0;for(let a=0;a!==e.length;++a){if(void 0===e[a].arbitrary)throw new Error(`${n} expects arbitraries to be specified`);const t=e[a].weight;if(r+=t,!Ps(t))throw new Error(`${n} expects weights to be integer values`);if(t<0)throw new Error(`${n} expects weights to be superior or equal to 0`)}if(r<=0)throw new Error(`${n} expects the sum of weights to be strictly superior to 0`);const i={depthBias:ya(t.depthSize,void 0!==t.maxDepth),maxDepth:void 0!=t.maxDepth?t.maxDepth:Ms,withCrossShrink:!!t.withCrossShrink};return new Bs(e,i,Yi(t.depthIdentifier))}constructor(e,t,n){super(),this.warbs=e,this.constraints=t,this.context=n;let r=0;this.cumulatedWeights=[];for(let i=0;i!==e.length;++i)r+=e[i].weight,Bt(this.cumulatedWeights,r);this.totalWeight=r}generate(e,t){if(this.mustGenerateFirst())return this.safeGenerateForIndex(e,0,t);const n=e.nextInt(this.computeNegDepthBenefit(),this.totalWeight-1);for(let r=0;r!==this.cumulatedWeights.length;++r)if(n<this.cumulatedWeights[r])return this.safeGenerateForIndex(e,r,t);throw new Error("Unable to generate from fc.frequency")}canShrinkWithoutContext(e){return-1!==this.canShrinkWithoutContextIndex(e)}shrink(e,t){if(void 0!==t){const n=t,r=n.selectedIndex,i=n.originalBias,a=this.warbs[r].arbitrary.shrink(e,n.originalContext).map((e=>this.mapIntoValue(r,e,null,i)));if(null!==n.clonedMrngForFallbackFirst){void 0===n.cachedGeneratedForFirst&&(n.cachedGeneratedForFirst=this.safeGenerateForIndex(n.clonedMrngForFallbackFirst,0,i));const e=n.cachedGeneratedForFirst;return je.of(e).join(a)}return a}const n=this.canShrinkWithoutContextIndex(e);return-1===n?je.nil():this.defaultShrinkForFirst(n).join(this.warbs[n].arbitrary.shrink(e,void 0).map((e=>this.mapIntoValue(n,e,null,void 0))))}defaultShrinkForFirst(e){++this.context.depth;try{if(!this.mustFallbackToFirstInShrink(e)||void 0===this.warbs[0].fallbackValue)return je.nil()}finally{--this.context.depth}const t=new Ve(this.warbs[0].fallbackValue.default,void 0);return je.of(this.mapIntoValue(0,t,null,void 0))}canShrinkWithoutContextIndex(e){if(this.mustGenerateFirst())return this.warbs[0].arbitrary.canShrinkWithoutContext(e)?0:-1;try{++this.context.depth;for(let t=0;t!==this.warbs.length;++t){const n=this.warbs[t];if(0!==n.weight&&n.arbitrary.canShrinkWithoutContext(e))return t}return-1}finally{--this.context.depth}}mapIntoValue(e,t,n,r){const i={selectedIndex:e,originalBias:r,originalContext:t.context,clonedMrngForFallbackFirst:n};return new Ve(t.value,i)}safeGenerateForIndex(e,t,n){++this.context.depth;try{const r=this.warbs[t].arbitrary.generate(e,n),i=this.mustFallbackToFirstInShrink(t)?e.clone():null;return this.mapIntoValue(t,r,i,n)}finally{--this.context.depth}}mustGenerateFirst(){return this.constraints.maxDepth<=this.context.depth}mustFallbackToFirstInShrink(e){return 0!==e&&this.constraints.withCrossShrink&&0!==this.warbs[0].weight}computeNegDepthBenefit(){const e=this.constraints.depthBias;if(e<=0||0===this.warbs[0].weight)return 0;const t=Ds(Us(1+e,this.context.depth))-1;return-js(this.totalWeight*t,Ls)||0}}function qs(e){return Xe(e)?{arbitrary:e,weight:1}:e}function $s(...e){const t=e[0];if(null!=(n=t)&&"object"===typeof n&&!("generate"in n)&&!("arbitrary"in n)&&!("weight"in n)){const n=Ut($t(e,1),qs);return Bs.from(n,t,"fc.oneof")}var n;const r=Ut(e,qs);return Bs.from(r,{},"fc.oneof")}const Ws=Number.isInteger;function zs(e){const t="number"===typeof e?e:e&&void 0!==e.max?e.max:2147483647;if(t<0)throw new Error("fc.nat value should be greater than or equal to 0");if(!Ws(t))throw new Error("fc.nat maximum value should be an integer");return new Gi(0,t)}function Vs(e){let t=null;return function(n){null===t&&(t=function(e){const t={mapping:new Map,negativeZeroIndex:void 0};let n=0;for(let r=0;r!==e.length;++r){const i=e[r];for(let e=0;e!==i.num;++e){const r=i.build(e);0===r&&1/r===Number.NEGATIVE_INFINITY?t.negativeZeroIndex=n:t.mapping.set(r,n),++n}}return t}(e));const r=Object.is(n,-0)?t.negativeZeroIndex:t.mapping.get(n);if(void 0===r)throw new Error("Unknown value encountered cannot be built using this mapToConstant");return r}}function Gs(...e){return zs({max:function(e){if(0===e.length)throw new Error("fc.mapToConstant expects at least one option");let t=0;for(let n=0;n!==e.length;++n){if(e[n].num<0)throw new Error("fc.mapToConstant expects all options to have a number of entries greater or equal to zero");t+=e[n].num}if(0===t)throw new Error("fc.mapToConstant expects at least one choice among options");return t}(e)-1}).map(function(e){return function(t){let n=-1,r=0;for(;t>=r;)r+=e[++n].num;return e[n].build(t-r+e[n].num)}}(e),Vs(e))}const Ks=String.fromCharCode,Js={num:26,build:e=>Ks(e+97)},Hs={num:26,build:e=>Ks(e+65)},Ys={num:10,build:e=>Ks(e+48)};const Zs=Ja().map((function(e){const t=kt(e);return e!==t?t:`%${dn(ln(e,0),16)}`}),(function(e){if("string"!==typeof e)throw new Error("Unsupported");return decodeURIComponent(e)})),Qs=e=>Gs(Js,{num:e.length,build:t=>e[t]}),Xs=e=>Gs(Js,Ys,{num:e.length,build:t=>e[t]}),eo=e=>Gs(Js,Hs,Ys,{num:e.length,build:t=>e[t]}),to=e=>$s({weight:10,arbitrary:eo(e)},{weight:1,arbitrary:Zs});function no(e,t={}){const n=null==t.freq?5:t.freq,r=mn(t,"nil")?t.nil:null,i=[{arbitrary:ns(r),weight:1,fallbackValue:{default:r}},{arbitrary:e,weight:n}],a={withCrossShrink:!0,depthSize:t.depthSize,maxDepth:t.maxDepth,depthIdentifier:t.depthIdentifier};return Bs.from(i,a,"fc.option")}function ro(e){return Dt(e,"")}const io=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__proto__","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","apply","arguments","bind","call","caller","length","name","prototype","key","ref"];function ao(e,t,n){let r;try{r=n(e)}catch(i){return}for(const a of r)if(!t.canShrinkWithoutContext(a))return;return r}function so(e,t){const n=[];for(const r of io){const i=ao(r,e,t);void 0!==i&&Bt(n,i)}return n}const oo=Object.assign;function co(e,t={}){const n=function(e,t){return function(n){if("string"!==typeof n)throw new Error("Unsupported value");const r=void 0!==t.minLength?t.minLength:0,i=void 0!==t.maxLength?t.maxLength:fa;if(0===n.length){if(r>0)throw new Error("Unable to unmap received string");return[]}const a=[{endIndexChunks:0,nextStartIndex:1,chunks:[]}];for(;a.length>0;){const t=function(e){try{return e.pop}catch(t){return}}(s=a)===Nt?s.pop():rt(Nt,s,[]);for(let s=t.nextStartIndex;s<=n.length;++s){const o=on(n,t.endIndexChunks,s);if(e.canShrinkWithoutContext(o)){const e=[...t.chunks,o];if(s===n.length){if(e.length<r||e.length>i)break;return e}Bt(a,{endIndexChunks:t.endIndexChunks,nextStartIndex:s+1,chunks:t.chunks}),Bt(a,{endIndexChunks:s,nextStartIndex:s+1,chunks:e});break}}}var s;throw new Error("Unable to unmap received string")}}(e,t),r=so(e,n);return Sa(e,oo(oo({},t),{experimentalCustomSlices:r})).map(ro,n)}function uo(e){return!(e.length>63)&&(e.length<4||"x"!==e[0]||"n"!==e[1]||"-"!==e[2]||"-"!==e[3])}const lo=Symbol("adapted-value");class fo extends Ke{constructor(e,t){super(),this.sourceArb=e,this.adapter=t,this.adaptValue=e=>function(e,t){const n=t(e.value_);return n.adapted?new Ve(n.value,lo):e}(e,t)}generate(e,t){const n=this.sourceArb.generate(e,t);return this.adaptValue(n)}canShrinkWithoutContext(e){return this.sourceArb.canShrinkWithoutContext(e)&&!this.adapter(e).adapted}shrink(e,t){return t===lo?this.sourceArb.canShrinkWithoutContext(e)?this.sourceArb.shrink(e,void 0).map(this.adaptValue):je.nil():this.sourceArb.shrink(e,t).map(this.adaptValue)}}function ho(e,t){return new fo(e,t)}function po([e,t]){return null===t?e:`${e}${t[0]}${t[1]}`}function mo(e){if("string"!==typeof e||0===e.length)throw new Error("Unsupported");return 1===e.length?[e[0],null]:[e[0],[on(e,1,e.length-1),e[e.length-1]]]}function go(e){return`${Dt(e[0],".")}.${e[1]}`}function yo(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=e.lastIndexOf(".");return[sn(on(e,0,t),"."),on(e,t+1)]}function bo(e){const[t,n]=e;let r=n.length;for(let i=0;i!==t.length;++i)if(r+=1+t[i].length,r>255)return{adapted:!0,value:[$t(t,0,i),n]};return{adapted:!1,value:e}}function So(e={}){const t=ba(e.size),n=ma("-1",t),r=co(Qs([]),{minLength:2,maxLength:63,size:n});return ho(_n(Sa(function(e){const t=Xs([]);return _n(t,no(_n(co(Xs(["-"]),{size:e,maxLength:61}),t))).map(po,mo).filter(uo)}(t),{size:n,minLength:1,maxLength:127}),r),bo).map(go,yo)}function wo(e){let t=e[0].length;for(let n=1;n!==e.length;++n)if(t+=1+e[n].length,t>64)return{adapted:!0,value:$t(e,0,n)};return{adapted:!1,value:e}}function vo(e){return Dt(e,".")}function Eo(e){if("string"!==typeof e)throw new Error("Unsupported");return sn(e,".")}function ko(e){return`${e[0]}@${e[1]}`}function xo(e){if("string"!==typeof e)throw new Error("Unsupported");return sn(e,"@",2)}function _o(e={}){return _n(ho(Sa(co(Xs(["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"]),{minLength:1,maxLength:64,size:e.size}),{minLength:1,maxLength:32,size:e.size}),wo).map(vo,Eo),So({size:e.size})).map(ko,xo)}const Io={sign:1,data:[0,0]},To={sign:1,data:[0,1]};function Oo(e){return 0===e.data[0]&&0===e.data[1]}function Ao(e){return-1===e.sign&&!Oo(e)}function No(e){return 1===e.sign&&!Oo(e)}function Co(e,t){return e.data[0]===t.data[0]&&e.data[1]===t.data[1]&&(e.sign===t.sign||0===e.data[0]&&0===e.data[1])}function Ro(e,t){return e[0]<t[0]||e[0]===t[0]&&e[1]<t[1]}function Fo(e,t){return e.sign===t.sign?1===e.sign?Ro(e.data,t.data):Ro(t.data,e.data):-1===e.sign&&(!Oo(e)||!Oo(t))}function Mo(e){return{sign:e.sign,data:[e.data[0],e.data[1]]}}function Lo(e,t){let n=0,r=e[1]-t[1];return r<0&&(n=1,r>>>=0),[e[0]-t[0]-n,r]}function Po(e,t){if(1===e.sign&&-1===t.sign){const n=e.data[1]+t.data[1];return{sign:1,data:[e.data[0]+t.data[0]+(n>4294967295?1:0)>>>0,n>>>0]}}return{sign:1,data:1===e.sign?Lo(e.data,t.data):Lo(t.data,e.data)}}function Do(e,t){if(Fo(e,t)){const n=Po(t,e);return n.sign=-1,n}return Po(e,t)}function Uo(e,t){return Oo(t)?Oo(e)?Mo(Io):Mo(e):Do(e,function(e){return{sign:-e.sign,data:[e.data[0],e.data[1]]}}(t))}function jo(e){return{sign:e.sign,data:[Math.floor(e.data[0]/2),(e.data[0]%2===1?2147483648:0)+Math.floor(e.data[1]/2)]}}function Bo(e){return{sign:e.sign,data:[0,Math.floor(Math.log(4294967296*e.data[0]+e.data[1])/Math.log(2))]}}class qo extends Ke{constructor(e,t){super(),this.min=e,this.max=t,this.biasedRanges=null}generate(e,t){const n=this.computeGenerateRange(e,t),r=e.nextArrayInt(n.min,n.max);return 1===r.data.length&&r.data.unshift(0),new Ve(r,void 0)}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=this.retrieveBiasedRanges();if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}canShrinkWithoutContext(e){const t=e;return"object"===typeof e&&null!==e&&(-1===t.sign||1===t.sign)&&Array.isArray(t.data)&&2===t.data.length&&(Fo(this.min,t)&&Fo(t,this.max)||Co(this.min,t)||Co(this.max,t))}shrinkArrayInt64(e,t,n){const r=Do(e,t);return Be(function*(){let i=n?void 0:t;for(let t=n?r:jo(r);!Oo(t);t=jo(t)){const n=Do(e,t);yield new Ve(n,i),i=n}}())}shrink(e,t){if(!qo.isValidContext(e,t)){const t=this.defaultTarget();return this.shrinkArrayInt64(e,t,!0)}return this.isLastChanceTry(e,t)?je.of(new Ve(t,void 0)):this.shrinkArrayInt64(e,t,!1)}defaultTarget(){return No(this.min)||Ao(this.max)?Ao(this.min)?this.max:this.min:Io}isLastChanceTry(e,t){return!Oo(e)&&(1===e.sign?Co(e,Uo(t,To))&&No(Do(e,this.min)):Co(e,Do(t,To))&&Ao(Do(e,this.max)))}static isValidContext(e,t){if(void 0===t)return!1;if("object"!==typeof t||null===t||!("sign"in t)||!("data"in t))throw new Error("Invalid context type passed to ArrayInt64Arbitrary (#1)");return!0}retrieveBiasedRanges(){if(null!=this.biasedRanges)return this.biasedRanges;if(Co(this.min,this.max))return this.biasedRanges=[{min:this.min,max:this.max}],this.biasedRanges;const e=Ao(this.min),t=No(this.max);if(e&&t){const e=Bo(this.min),t=Bo(this.max);this.biasedRanges=[{min:e,max:t},{min:Do(this.max,t),max:this.max},{min:this.min,max:Do(this.min,e)}]}else{const t=Bo(Do(this.max,this.min)),n={min:this.min,max:Uo(this.min,t)},r={min:Do(this.max,t),max:this.max};this.biasedRanges=e?[r,n]:[n,r]}return this.biasedRanges}}function $o(e,t){return new qo(e,t)}const Wo=Number.NEGATIVE_INFINITY,zo=Number.POSITIVE_INFINITY,Vo=Number.EPSILON,Go={sign:1,data:[2146435072,0]},Ko={sign:-1,data:[2146435072,1]},Jo=new Float64Array(1),Ho=new Uint32Array(Jo.buffer,Jo.byteOffset);function Yo(e){const{0:t,1:n}=(r=e,Jo[0]=r,[Ho[1],Ho[0]]);var r;const i=t>>>20&2047;let a=0===i?0:1;return a+=(4294967296*(1048575&t)+n)/2**52,a*=0===t>>>31?1:-1,{exponent:0===i?-1022:i-1023,significand:a}}function Zo(e){return[~~(e/4294967296),e>>>0]}function Qo(e,t){if(-1022===e){return Zo(t*2**52)}const n=(e+1023)*2**20,r=Zo((t-1)*2**52);return r[0]+=n,r}function Xo(e){if(e===zo)return Mo(Go);if(e===Wo)return Mo(Ko);const t=Yo(e),n=t.exponent,r=t.significand;if(e>0||0===e&&1/e===zo)return{sign:1,data:Qo(n,r)};{const e=Qo(n,-r);return 4294967295===e[1]?(e[0]+=1,e[1]=0):e[1]+=1,{sign:-1,data:e}}}function ec(e){if(-1===e.sign){const t={sign:1,data:[e.data[0],e.data[1]]};return 0===t.data[1]?(t.data[0]-=1,t.data[1]=4294967295):t.data[1]-=1,-ec(t)}if(Co(e,Go))return zo;if(e.data[0]<2097152)return 5e-324*(4294967296*e.data[0]+e.data[1]);const t=e.data[0]-2097152,n=(t>>20)-1021;return(1+((1048575&t)*2**32+e.data[1])*Vo)*2**n}const tc=Number.isInteger,nc=Object.is,rc=Number.NEGATIVE_INFINITY,ic=Number.POSITIVE_INFINITY;function ac(e,t,n,r){const{noDefaultInfinity:i=!1,minExcluded:a=!1,maxExcluded:s=!1,min:o=(i?-t:rc),max:c=(i?t:ic)}=e,u=a?o<-n?-r:Math.max(o,-n):o===rc?Math.max(o,-r):Math.max(o,-n),l=s?c>n?r:Math.min(c,n):c===ic?Math.min(c,r):Math.min(c,n);return{noDefaultInfinity:!1,minExcluded:a||(o!==rc||a)&&tc(u),maxExcluded:s||(c!==ic||s)&&tc(l),min:nc(u,-0)?0:u,max:nc(l,0)?-0:l,noNaN:e.noNaN||!1}}const sc=Number.NEGATIVE_INFINITY,oc=Number.POSITIVE_INFINITY,cc=Number.MAX_VALUE,uc=4503599627370495.5,lc=4503599627370496;function fc(e){return e===lc?oc:e===-lc?sc:e}function dc(e){if("number"!==typeof e)throw new Error("Unsupported type");return e===oc?lc:e===sc?-lc:e}const hc=Number.isInteger,pc=Number.isNaN,mc=Number.NEGATIVE_INFINITY,gc=Number.POSITIVE_INFINITY,yc=Number.MAX_VALUE,bc=Number.NaN;function Sc(e,t){if(pc(e))throw new Error("fc.double constraints."+t+" must be a 64-bit float");return Xo(e)}function wc(e){if("number"!==typeof e)throw new Error("Unsupported type");return Xo(e)}function vc(e){return!hc(e)}function Ec(e){const{noDefaultInfinity:t=!1,noNaN:n=!1,minExcluded:r=!1,maxExcluded:i=!1,min:a=(t?-yc:mc),max:s=(t?yc:gc)}=e,o=Sc(a,"min"),c=r?Uo(o,To):o,u=Sc(s,"max"),l=i?Do(u,To):u;if(Fo(l,c))throw new Error("fc.double constraints.min must be smaller or equal to constraints.max");if(n)return $o(c,l).map(ec,wc);const f=No(l),d=f?c:Do(c,To),h=f?Uo(l,To):l;return $o(d,h).map((e=>Fo(l,e)||Fo(e,c)?bc:ec(e)),(e=>{if("number"!==typeof e)throw new Error("Unsupported type");return pc(e)?Co(l,h)?d:h:Xo(e)}))}function kc(e={}){return e.noInteger?Ec(function(e){return ac(e,cc,uc,lc)}(e)).map(fc,dc).filter(vc):Ec(e)}const xc=Number.NEGATIVE_INFINITY,_c=Number.POSITIVE_INFINITY,Ic=2**127*(1+8388607/2**23),Tc=2139095040,Oc=-2139095041,Ac=new Float32Array(1),Nc=new Uint32Array(Ac.buffer,Ac.byteOffset);function Cc(e){const t=function(e){return Ac[0]=e,Nc[0]}(e),n=t>>>23&255;let r=0===n?0:1;return r+=(8388607&t)/2**23,r*=0===t>>>31?1:-1,{exponent:0===n?-126:n-127,significand:r}}function Rc(e,t){return-126===e?8388608*t:8388608*(e+127)+8388608*(t-1)}function Fc(e){if(e===_c)return Tc;if(e===xc)return Oc;const t=Cc(e),n=t.exponent,r=t.significand;return e>0||0===e&&1/e===_c?Rc(n,r):-Rc(n,-r)-1}function Mc(e){if(e<0)return-Mc(-e-1);if(e===Tc)return _c;if(e<16777216)return e*2**-149;const t=e-16777216;return(1+(8388607&t)/8388608)*2**((t>>23)-125)}const Lc=Number.NEGATIVE_INFINITY,Pc=Number.POSITIVE_INFINITY,Dc=Ic,Uc=8388607.5,jc=8388608;function Bc(e){return e===jc?Pc:e===-jc?Lc:e}function qc(e){if("number"!==typeof e)throw new Error("Unsupported type");return e===Pc?jc:e===Lc?-jc:e}const $c=Number.isInteger,Wc=Number.isNaN,zc=Math.fround,Vc=Number.NEGATIVE_INFINITY,Gc=Number.POSITIVE_INFINITY,Kc=Number.NaN;function Jc(e,t){const n="fc.float constraints."+t+" must be a 32-bit float - you can convert any double to a 32-bit float by using `Math.fround(myDouble)`";if(Wc(e)||zc(e)!==e)throw new Error(n);return Fc(e)}function Hc(e){if("number"!==typeof e)throw new Error("Unsupported type");return Fc(e)}function Yc(e){return!$c(e)}function Zc(e){const{noDefaultInfinity:t=!1,noNaN:n=!1,minExcluded:r=!1,maxExcluded:i=!1,min:a=(t?-Ic:Vc),max:s=(t?Ic:Gc)}=e,o=Jc(a,"min"),c=r?o+1:o,u=Jc(s,"max"),l=i?u-1:u;if(c>l)throw new Error("fc.float constraints.min must be smaller or equal to constraints.max");if(n)return Ji({min:c,max:l}).map(Mc,Hc);const f=l>0?c:c-1,d=l>0?l+1:l;return Ji({min:f,max:d}).map((e=>e>l||e<c?Kc:Mc(e)),(e=>{if("number"!==typeof e)throw new Error("Unsupported type");return Wc(e)?l!==d?d:f:Fc(e)}))}function Qc(e={}){return e.noInteger?Zc(function(e){return ac(e,Dc,Uc,jc)}(e)).map(Bc,qc).filter(Yc):Zc(e)}function Xc(e){return e.replace(/\*\//g,"*\\/")}const eu=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function tu(e){let t=4294967295;for(let n=0;n<e.length;++n){const r=ln(e,n);if(r<128)t=eu[255&t^r]^t>>8;else if(r<2048)t=eu[255&t^(192|r>>6&31)]^t>>8,t=eu[255&t^(128|63&r)]^t>>8;else if(r>=55296&&r<57344){const i=ln(e,++n);if(r>=56320||i<56320||i>57343||Number.isNaN(i))n-=1,t=eu[255&t^239]^t>>8,t=eu[255&t^191]^t>>8,t=eu[255&t^189]^t>>8;else{const e=64+(1023&r),n=1023&i;t=eu[255&t^(240|e>>8&7)]^t>>8,t=eu[255&t^(128|e>>2&63)]^t>>8,t=eu[255&t^(128|n>>6&15|(3&e)<<4)]^t>>8,t=eu[255&t^(128|63&n)]^t>>8}}else t=eu[255&t^(224|r>>12&15)]^t>>8,t=eu[255&t^(128|r>>6&63)]^t>>8,t=eu[255&t^(128|63&r)]^t>>8}return 2147483648+(0|t)}const nu=Object.assign,ru=Object.keys;function iu(e){return _n(Ji().noShrink(),Ji({min:1,max:4294967295}).noShrink()).map((([t,n])=>{const r=()=>{const i={};return nu(((r,a)=>{const s=Jr(r),o=Jr(a),c=tu(`${t}${s}`)%n,u=tu(`${t}${o}`)%n,l=e(c,u);return i[`[${s},${o}]`]=l,l}),{toString:()=>{const r=ru(i).sort().map((e=>`${e} => ${Jr(i[e])}`)).map((e=>`/* ${Xc(e)} */`));return`function(a, b) {\n  // With hash and stringify coming from fast-check${0!==r.length?`\n  ${Dt(r,"\n  ")}`:""}\n  const cmp = ${e};\n  const hA = hash('${t}' + stringify(a)) % ${n};\n  const hB = hash('${t}' + stringify(b)) % ${n};\n  return cmp(hA, hB);\n}`},[qe]:r})};return r()}))}const au=Object.assign;function su(){return iu(au(((e,t)=>e<t),{toString:()=>"(hA, hB) => hA < hB"}))}const ou=Object.assign;function cu(){return iu(ou(((e,t)=>e-t),{toString:()=>"(hA, hB) => hA - hB"}))}const uu=Object.defineProperties,lu=Object.keys;function fu(e){return _n(Sa(e,{minLength:1}),Ji().noShrink()).map((([e,t])=>{const n=()=>{const r={};function i(e){const n=Ut(Ut(Wt(lu(r)),(e=>`${e} => ${Jr(r[e])}`)),(e=>`/* ${Xc(e)} */`));return`function(...args) {\n  // With hash and stringify coming from fast-check${0!==n.length?`\n  ${n.join("\n  ")}`:""}\n  const outs = ${e};\n  return outs[hash('${t}' + stringify(args)) % outs.length];\n}`}return uu(((...n)=>{const i=Jr(n),a=e[tu(`${t}${i}`)%e.length];return r[i]=a,$e(a)?a[qe]():a}),{toString:{value:()=>i(Jr(e))},[qr]:{value:()=>i(Jr(e))},[Wr]:{value:async()=>i(await Yr(e))},[qe]:{value:n,configurable:!0}})};return n()}))}const du=Number.MIN_SAFE_INTEGER,hu=Number.MAX_SAFE_INTEGER;function pu(){return new Gi(du,hu)}const mu=Number.MAX_SAFE_INTEGER;function gu(){return new Gi(0,mu)}const yu=Number.parseInt;function bu(e){const[t,n]=e;switch(t){case"oct":return`0${dn(n,8)}`;case"hex":return`0x${dn(n,16)}`;default:return`${n}`}}function Su(e,t){const n=yu(e,t);if(dn(n,t)!==e)throw new Error("Invalid value");return n}function wu(e){if("string"!==typeof e)throw new Error("Invalid type");return e.length>=2&&"0"===e[0]?"x"===e[1]?["hex",Su(on(e,2),16)]:["oct",Su(on(e,1),8)]:["dec",Su(e,10)]}function vu(e){return Dt(e,".")}function Eu(e){if("string"!==typeof e)throw new Error("Invalid type");return Ut(sn(e,"."),(e=>Su(e,10)))}function ku(){return _n(zs(255),zs(255),zs(255),zs(255)).map(vu,Eu)}function xu(e){return _n(Ra("dec","oct","hex"),zs(e)).map(bu,wu)}function _u(e){return Dt(e,".")}function Iu(e){if("string"!==typeof e)throw new Error("Invalid type");return sn(e,".")}function Tu(){return $s(_n(xu(255),xu(255),xu(255),xu(255)).map(_u,Iu),_n(xu(255),xu(255),xu(65535)).map(_u,Iu),_n(xu(255),xu(16777215)).map(_u,Iu),xu(4294967295))}function Ou(e){return Dt(e,"")}function Au(e){if("string"!==typeof e)throw new Error("Cannot unmap the passed value");return[...e]}const Nu=Object.assign;function Cu(e={}){const t=Za(),n=so(t,Au);return Sa(t,Nu(Nu({},e),{experimentalCustomSlices:n})).map(Ou,Au)}function Ru(e){return 0===e.length?[]:sn(e,":")}function Fu(e){const t=sn(e,":");return t.length>=2&&t[t.length-1].length<=4?[$t(t,0,t.length-2),`${t[t.length-2]}:${t[t.length-1]}`]:[$t(t,0,t.length-1),t[t.length-1]]}function Mu(e){return`${Dt(e[0],":")}:${e[1]}`}function Lu(e){if("string"!==typeof e)throw new Error("Invalid type");return Fu(e)}function Pu(e){return`::${Dt(e[0],":")}:${e[1]}`}function Du(e){if("string"!==typeof e)throw new Error("Invalid type");if(!function(e,...t){return function(e){try{return e.startsWith}catch(t){return}}(e)===Zt?e.startsWith(...t):rt(Zt,e,t)}(e,"::"))throw new Error("Invalid value");return Fu(on(e,2))}function Uu(e){return`${Dt(e[0],":")}::${Dt(e[1],":")}:${e[2]}`}function ju(e){if("string"!==typeof e)throw new Error("Invalid type");const[t,n]=sn(e,"::",2),[r,i]=Fu(n);return[Ru(t),r,i]}function Bu(e){return Uu([e[0],[e[1]],e[2]])}function qu(e){const t=ju(e);return[t[0],Dt(t[1],":"),t[2]]}function $u(e){return`${Dt(e[0],":")}::${e[1]}`}function Wu(e){if("string"!==typeof e)throw new Error("Invalid type");const[t,n]=sn(e,"::",2);return[Ru(t),n]}function zu(e){return`${Dt(e[0],":")}::`}function Vu(e){if("string"!==typeof e)throw new Error("Invalid type");if(!function(e,...t){return function(e){try{return e.endsWith}catch(t){return}}(e)===Qt?e.endsWith(...t):rt(Qt,e,t)}(e,"::"))throw new Error("Invalid value");return[Ru(on(e,0,e.length-2))]}function Gu([e,t]){return`${e}:${t}`}function Ku(e){if("string"!==typeof e)throw new Error("Invalid type");if(!e.includes(":"))throw new Error("Invalid value");return e.split(":",2)}function Ju(){const e=Cu({minLength:1,maxLength:4,size:"max"}),t=$s(_n(e,e).map(Gu,Ku),ku());return $s(_n(Sa(e,{minLength:6,maxLength:6,size:"max"}),t).map(Mu,Lu),_n(Sa(e,{minLength:5,maxLength:5,size:"max"}),t).map(Pu,Du),_n(Sa(e,{minLength:0,maxLength:1,size:"max"}),Sa(e,{minLength:4,maxLength:4,size:"max"}),t).map(Uu,ju),_n(Sa(e,{minLength:0,maxLength:2,size:"max"}),Sa(e,{minLength:3,maxLength:3,size:"max"}),t).map(Uu,ju),_n(Sa(e,{minLength:0,maxLength:3,size:"max"}),Sa(e,{minLength:2,maxLength:2,size:"max"}),t).map(Uu,ju),_n(Sa(e,{minLength:0,maxLength:4,size:"max"}),e,t).map(Bu,qu),_n(Sa(e,{minLength:0,maxLength:5,size:"max"}),t).map($u,Wu),_n(Sa(e,{minLength:0,maxLength:6,size:"max"}),e).map($u,Wu),_n(Sa(e,{minLength:0,maxLength:7,size:"max"})).map(zu,Vu))}class Hu extends Ke{constructor(e){super(),this.name=e,this.underlying=null}generate(e,t){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.generate(e,t)}canShrinkWithoutContext(e){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.canShrinkWithoutContext(e)}shrink(e,t){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.shrink(e,t)}}const Yu=Object.create;function Zu(e){const t=Yu(null),n=e((e=>(mn(t,e)||(t[e]=new Hu(String(e))),t[e])));for(const r in n){if(!mn(n,r))continue;const e=t[r],i=void 0!==e?e:new Hu(r);i.underlying=n[r],t[r]=i}return n}function Qu(e){return Dt(Ut(e,(e=>","===e[e.length-1]?on(e,0,e.length-1):e))," ")}function Xu(e){let t=Dt(e," ");return","===t[t.length-1]&&(t=on(t,0,t.length-1)),un(t[0])+on(t,1)+"."}function el(e){return Dt(e," ")}function tl(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=sn(e,". ");for(let n=0;n<t.length-1;++n)t[n]+=".";return t}const nl=(e,t)=>({arbitrary:ns(e),weight:t});function rl(e={}){const{maxCount:t,mode:n="words",size:r}=e;if(void 0!==t&&t<1)throw new Error("lorem has to produce at least one word/sentence");const i=$s(nl("non",6),nl("adipiscing",5),nl("ligula",5),nl("enim",5),nl("pellentesque",5),nl("in",5),nl("augue",5),nl("et",5),nl("nulla",5),nl("lorem",4),nl("sit",4),nl("sed",4),nl("diam",4),nl("fermentum",4),nl("ut",4),nl("eu",4),nl("aliquam",4),nl("mauris",4),nl("vitae",4),nl("felis",4),nl("ipsum",3),nl("dolor",3),nl("amet,",3),nl("elit",3),nl("euismod",3),nl("mi",3),nl("orci",3),nl("erat",3),nl("praesent",3),nl("egestas",3),nl("leo",3),nl("vel",3),nl("sapien",3),nl("integer",3),nl("curabitur",3),nl("convallis",3),nl("purus",3),nl("risus",2),nl("suspendisse",2),nl("lectus",2),nl("nec,",2),nl("ultricies",2),nl("sed,",2),nl("cras",2),nl("elementum",2),nl("ultrices",2),nl("maecenas",2),nl("massa,",2),nl("varius",2),nl("a,",2),nl("semper",2),nl("proin",2),nl("nec",2),nl("nisl",2),nl("amet",2),nl("duis",2),nl("congue",2),nl("libero",2),nl("vestibulum",2),nl("pede",2),nl("blandit",2),nl("sodales",2),nl("ante",2),nl("nibh",2),nl("ac",2),nl("aenean",2),nl("massa",2),nl("suscipit",2),nl("sollicitudin",2),nl("fusce",2),nl("tempus",2),nl("aliquam,",2),nl("nunc",2),nl("ullamcorper",2),nl("rhoncus",2),nl("metus",2),nl("faucibus,",2),nl("justo",2),nl("magna",2),nl("at",2),nl("tincidunt",2),nl("consectetur",1),nl("tortor,",1),nl("dignissim",1),nl("congue,",1),nl("non,",1),nl("porttitor,",1),nl("nonummy",1),nl("molestie,",1),nl("est",1),nl("eleifend",1),nl("mi,",1),nl("arcu",1),nl("scelerisque",1),nl("vitae,",1),nl("consequat",1),nl("in,",1),nl("pretium",1),nl("volutpat",1),nl("pharetra",1),nl("tempor",1),nl("bibendum",1),nl("odio",1),nl("dui",1),nl("primis",1),nl("faucibus",1),nl("luctus",1),nl("posuere",1),nl("cubilia",1),nl("curae,",1),nl("hendrerit",1),nl("velit",1),nl("mauris,",1),nl("gravida",1),nl("ornare",1),nl("ut,",1),nl("pulvinar",1),nl("varius,",1),nl("turpis",1),nl("nibh,",1),nl("eros",1),nl("id",1),nl("aliquet",1),nl("quis",1),nl("lobortis",1),nl("consectetuer",1),nl("morbi",1),nl("vehicula",1),nl("tortor",1),nl("tellus,",1),nl("id,",1),nl("eu,",1),nl("quam",1),nl("feugiat,",1),nl("posuere,",1),nl("iaculis",1),nl("lectus,",1),nl("tristique",1),nl("mollis,",1),nl("nisl,",1),nl("vulputate",1),nl("sem",1),nl("vivamus",1),nl("placerat",1),nl("imperdiet",1),nl("cursus",1),nl("rutrum",1),nl("iaculis,",1),nl("augue,",1),nl("lacus",1));if("sentences"===n){const e=Sa(i,{minLength:1,size:"small"}).map(Xu,(a=i,function(e){if("string"!==typeof e)throw new Error("Unsupported type");if(e.length<2||"."!==e[e.length-1]||","===e[e.length-2]||un(cn(e[0]))!==e[0])throw new Error("Unsupported value");const t=[],n=sn(cn(e[0])+on(e,1,e.length-1)," ");for(let r=0;r!==n.length;++r){const e=n[r];if(a.canShrinkWithoutContext(e))Bt(t,e);else{if(r!==n.length-1||!a.canShrinkWithoutContext(e+","))throw new Error("Unsupported word");Bt(t,e+",")}}return t}));return Sa(e,{minLength:1,maxLength:t,size:r}).map(el,tl)}return Sa(i,{minLength:1,maxLength:t,size:r}).map(Qu,function(e){return function(t){if("string"!==typeof t)throw new Error("Unsupported type");const n=[];for(const r of sn(t," "))if(e.canShrinkWithoutContext(r))Bt(n,r);else{if(!e.canShrinkWithoutContext(r+","))throw new Error("Unsupported word");Bt(n,r+",")}return n}}(i));var a}let il=10;function al(e){const t={};return n=>{const r=void 0!==n?n:il;if(!mn(t,r)){const n=il;il=r-1,t[r]=e(r),il=n}return t[r]}}function sl(e,t){const n=(at(1)<<at(t))-at(1),r=e&n;let i=function(e){let t=0;for(;e>at(0);)e&at(1)&&++t,e>>=at(1);return t}(e-r),a=r;for(let s=at(1);s<=n&&0!==i;s<<=at(1))a&s||(a|=s,--i);return a}function ol(e,t){const n=[];for(let r=e.length-1;-1!==r;--r)t(e[r])!==e[r]&&Bt(n,r);return n}function cl(e,t,n){let r=at(0);for(let i=0,a=at(1);i!==n.length;++i,a<<=at(1))e[n[i]]!==t[n[i]]&&(r|=a);return r}function ul(e,t,n,r){for(let i=0,a=at(1);i!==n.length;++i,a<<=at(1))t&a&&(e[n[i]]=r(e[n[i]]))}class ll extends Ke{constructor(e,t,n){super(),this.stringArb=e,this.toggleCase=t,this.untoggleAll=n}buildContextFor(e,t){return{rawString:e.value,rawStringContext:e.context,flags:t.value,flagsContext:t.context}}generate(e,t){const n=this.stringArb.generate(e,t),r=[...n.value],i=ol(r,this.toggleCase),a=Ia(i.length).generate(e,void 0);return ul(r,a.value,i,this.toggleCase),new Ve(Dt(r,""),this.buildContextFor(n,a))}canShrinkWithoutContext(e){return"string"===typeof e&&(void 0!==this.untoggleAll?this.stringArb.canShrinkWithoutContext(this.untoggleAll(e)):this.stringArb.canShrinkWithoutContext(e))}shrink(e,t){let n;if(void 0!==t)n=t;else if(void 0!==this.untoggleAll){const t=this.untoggleAll(e),r=[...e],i=[...t],a=ol(i,this.toggleCase);n={rawString:t,rawStringContext:void 0,flags:cl(i,r,a),flagsContext:void 0}}else n={rawString:e,rawStringContext:void 0,flags:at(0),flagsContext:void 0};const r=n.rawString,i=n.flags;return this.stringArb.shrink(r,n.rawStringContext).map((e=>{const t=[...e.value],n=ol(t,this.toggleCase),r=sl(i,n.length);return ul(t,r,n,this.toggleCase),new Ve(Dt(t,""),this.buildContextFor(e,new Ve(r,void 0)))})).join(bn((()=>{const e=[...r],t=ol(e,this.toggleCase);return Ia(t.length).shrink(i,n.flagsContext).map((i=>{const a=$t(e);return ul(a,i.value,t,this.toggleCase),new Ve(Dt(a,""),this.buildContextFor(new Ve(r,n.rawStringContext),i))}))})))}}function fl(e){const t=un(e);return t!==e?t:cn(e)}function dl(e,t){if("undefined"===typeof at)throw new lt("mixedCase requires BigInt support");const n=t&&t.toggleCase||fl,r=t&&t.untoggleAll;return new ll(e,n,r)}function hl(e){return ft.from(e)}function pl(e){if(!(e instanceof ft))throw new Error("Unexpected type");return[...e]}function ml(e={}){return Sa(Qc(e),e).map(hl,pl)}function gl(e){return dt.from(e)}function yl(e){if(!(e instanceof dt))throw new Error("Unexpected type");return[...e]}function bl(e={}){return Sa(kc(e),e).map(gl,yl)}var Sl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function wl(e,t,n,r,i){const a=r.name,{min:s=t,max:o=n}=e,c=Sl(e,["min","max"]);if(s>o)throw new Error(`Invalid range passed to ${a}: min must be lower than or equal to max`);if(s<t)throw new Error(`Invalid min value passed to ${a}: min must be greater than or equal to ${t}`);if(o>n)throw new Error(`Invalid max value passed to ${a}: max must be lower than or equal to ${n}`);return Sa(i({min:s,max:o}),c).map((e=>r.from(e)),(e=>{if(!(e instanceof r))throw new Error("Invalid type");return[...e]}))}function vl(e={}){return wl(e,-32768,32767,pt,Ji)}function El(e={}){return wl(e,-2147483648,2147483647,mt,Ji)}function kl(e={}){return wl(e,-128,127,ht,Ji)}function xl(e={}){return wl(e,0,65535,vt,Ji)}function _l(e={}){return wl(e,0,4294967295,Et,Ji)}function Il(e={}){return wl(e,0,255,St,Ji)}function Tl(e={}){return wl(e,0,255,wt,Ji)}function Ol(e){return e.hasToBeCloned?new Ve(e.value_,{generatorContext:e.context},(()=>e.value)):new Ve(e.value_,{generatorContext:e.context})}function Al(e){return e.hasToBeCloned?new Ve(e.value_,{shrinkerContext:e.context},(()=>e.value)):new Ve(e.value_,{shrinkerContext:e.context})}class Nl extends Ke{constructor(e,t){super(),this.generatorArbitrary=e,this.shrinkerArbitrary=t}generate(e,t){return Ol(this.generatorArbitrary.generate(e,t))}canShrinkWithoutContext(e){return this.shrinkerArbitrary.canShrinkWithoutContext(e)}shrink(e,t){return function(e){return void 0!==e}(t)?"generatorContext"in t?this.generatorArbitrary.shrink(e,t.generatorContext).map(Ol):this.shrinkerArbitrary.shrink(e,t.shrinkerContext).map(Al):this.shrinkerArbitrary.shrink(e,void 0).map(Al)}}function Cl(e,t,n){const r=Ji({min:e,max:t});if(t===n)return r;const i=Ji({min:e,max:n});return new Nl(r,i)}const Rl=Math.min,Fl=Math.max,Ml=it.isArray,Ll=Object.entries;function Pl(e,t={}){const{size:n,minNumElements:r=0,maxLength:i=fa,maxNumElements:a=i,noTrailingHole:s,depthIdentifier:o}=t,c=ga(n,r,a,void 0!==t.maxNumElements),u=ga(n,c,i,void 0!==t.maxLength);if(r>i)throw new Error("The minimal number of non-hole elements cannot be higher than the maximal length of the array");if(r>a)throw new Error("The minimal number of non-hole elements cannot be higher than the maximal number of non-holes");const l=Rl(a,i),f=void 0!==t.maxNumElements||void 0!==n?n:"=",d=Es(_n(Cl(0,Fl(u-1,0),Fl(i-1,0)),e),{size:f,minLength:r,maxLength:l,selector:e=>e[0],depthIdentifier:o}).map((e=>function(e,t){const n=it(e);for(let r=0;r!==t.length;++r){const i=t[r];i[0]<e&&(n[i[0]]=i[1])}return n}(function(e){let t=-1;for(let n=0;n!==e.length;++n)t=Fl(t,e[n][0]);return t}(e)+1,e)),(e=>{if(!Ml(e))throw new Error("Not supported entry type");if(s&&0!==e.length&&!(e.length-1 in e))throw new Error("No trailing hole");return Ut(Ll(e),(e=>[Number(e[0]),e[1]]))}));return s||i===r?d:_n(d,Cl(r,u,i)).map((e=>{const t=e[0],n=e[1];if(t.length>=n)return t;const r=$t(t);return r.length=n,r}),(e=>{if(!Ml(e))throw new Error("Not supported entry type");return[e,e.length]}))}function Dl(e){return new Map(e)}function Ul(e){if("object"!==typeof e||null===e)throw new Error("Incompatible instance received: should be a non-null object");if(!("constructor"in e)||e.constructor!==Map)throw new Error("Incompatible instance received: should be of exact type Map");return Array.from(e)}function jl(e){return new Set(e)}function Bl(e){if("object"!==typeof e||null===e)throw new Error("Incompatible instance received: should be a non-null object");if(!("constructor"in e)||e.constructor!==Set)throw new Error("Incompatible instance received: should be of exact type Set");return Array.from(e)}function ql(e,t,n,r,i){return Es(_n(e,t),{maxLength:n,size:r,comparator:"SameValueZero",selector:e=>e[0],depthIdentifier:i}).map(Dl,Ul)}function $l(e,t,n,r,i,a){return Fs(e,t,{maxKeys:n,noNullPrototype:!a,size:r,depthIdentifier:i})}function Wl(e,t,n,r){return Es(e,{maxLength:t,size:n,comparator:"SameValueZero",depthIdentifier:r}).map(jl,Bl)}function zl(e){return $s(kl(e),Il(e),Tl(e),vl(e),xl(e),El(e),_l(e),ml(e),bl(e))}function Vl(e){const t=e.values,n=e.depthSize,r={depth:0},i=e.maxDepth,a=e.maxKeys,s=e.size,o=$s(...t,...e.withBigInt?[ka()]:[],...e.withDate?[ls()]:[]);return Zu((t=>({anything:$s({maxDepth:i,depthSize:n,depthIdentifier:r},o,t("array"),t("object"),...e.withMap?[t("map")]:[],...e.withSet?[t("set")]:[],...e.withObjectString?[t("anything").map((e=>Jr(e)))]:[],...e.withTypedArray?[zl({maxLength:a,size:s})]:[],...e.withSparseArray?[Pl(t("anything"),{maxNumElements:a,size:s,depthIdentifier:r})]:[]),keys:e.withObjectString?$s({arbitrary:e.key,weight:10},{arbitrary:t("anything").map((e=>Jr(e))),weight:1}):e.key,array:Sa(t("anything"),{maxLength:a,size:s,depthIdentifier:r}),set:Wl(t("anything"),a,s,r),map:$s(ql(t("keys"),t("anything"),a,s,r),ql(t("anything"),t("anything"),a,s,r)),object:$l(t("keys"),t("anything"),a,s,r,e.withNullPrototype)}))).anything}const Gl=Object.assign;function Kl(e={}){const t=Ja(),n=so(t,Au);return Sa(t,Gl(Gl({},e),{experimentalCustomSlices:n})).map(Ou,Au)}const Jl=Object.assign;function Hl(e={}){const t=Wa(),n=so(t,Au);return Sa(t,Jl(Jl({},e),{experimentalCustomSlices:n})).map(Ou,Au)}function Yl(e){switch(typeof e){case"boolean":return new ct(e);case"number":return new gt(e);case"string":return new yt(e);default:return e}}function Zl(e){return"object"===typeof e&&null!==e&&"constructor"in e&&(e.constructor===ct||e.constructor===gt||e.constructor===yt)?e.valueOf():e}function Ql(e,t){return[Aa(),pu(),kc(),t(e),$s(t(e),ns(null),ns(void 0))]}function Xl(e){return e.map((e=>function(e){return e.map(Yl,Zl)}(e)))}function ef(e={}){function t(e,t){return void 0!==e?e:t}const n=e.withUnicodeString?Kl:Hl,r={size:e.size};return{key:t(e.key,n(r)),values:(i=t(e.values,Ql(r,n)),a=t(e.withBoxedValues,!1),a?Xl(i).concat(i):i),depthSize:e.depthSize,maxDepth:e.maxDepth,maxKeys:e.maxKeys,size:e.size,withSet:t(e.withSet,!1),withMap:t(e.withMap,!1),withObjectString:t(e.withObjectString,!1),withNullPrototype:t(e.withNullPrototype,!1),withBigInt:t(e.withBigInt,!1),withDate:t(e.withDate,!1),withTypedArray:t(e.withTypedArray,!1),withSparseArray:t(e.withSparseArray,!1)};var i,a}function tf(e){return function(e){return Fs(e.key,Vl(e),{maxKeys:e.maxKeys,noNullPrototype:!e.withNullPrototype,size:e.size})}(ef(e))}function nf(e,t){const{depthSize:n,maxDepth:r}=t;return{key:e,values:[Aa(),kc({noDefaultInfinity:!0,noNaN:!0}),e,ns(null)],depthSize:n,maxDepth:r}}function rf(e){return Vl(ef(e))}function af(e={}){return rf(nf(void 0===e.noUnicodeString||!0===e.noUnicodeString?Hl():Kl(),e))}function sf(e={}){return af(e).map(JSON.stringify)}const of=Object.assign;function cf(e={}){const t=ts(),n=so(t,Au);return Sa(t,of(of({},e),{experimentalCustomSlices:n})).map(Ou,Au)}function uf(e={}){return rf(nf(cf(),e))}function lf(e={}){return uf(e).map(JSON.stringify)}const ff=Object.keys,df=Object.getOwnPropertySymbols,hf=Object.getOwnPropertyDescriptor;const pf=Object.create,mf=Object.defineProperty,gf=Object.getOwnPropertyDescriptor,yf=Object.getOwnPropertyNames,bf=Object.getOwnPropertySymbols;const Sf=Symbol("no-key");function wf(e,t,n){const r=function(e){const t=ff(e),n=df(e);for(let r=0;r!==n.length;++r){const i=n[r],a=hf(e,i);a&&a.enumerable&&t.push(i)}return t}(e),i=[];for(let a=0;a!==r.length;++a){const n=r[a],s=e[n];void 0===t||-1!==Pt(t,n)?Bt(i,s):Bt(i,no(s,{nil:Sf}))}return _n(_n(...i),n?ns(!1):Aa()).map(function(e,t){return function(n){const r=n[1]?pf(null):{};for(let i=0;i!==e.length;++i){const a=n[0][i];a!==t&&mf(r,e[i],{value:a,configurable:!0,enumerable:!0,writable:!0})}return r}}(r,Sf),function(e,t){return function(n){if("object"!==typeof n||null===n)throw new Error("Incompatible instance received: should be a non-null object");const r=null===Object.getPrototypeOf(n),i="constructor"in n&&n.constructor===Object;if(!r&&!i)throw new Error("Incompatible instance received: should be of exact type Object");let a=0;const s=[];for(let o=0;o!==e.length;++o){const r=gf(n,e[o]);if(void 0!==r){if(!r.configurable||!r.enumerable||!r.writable)throw new Error("Incompatible instance received: should contain only c/e/w properties");if(void 0!==r.get||void 0!==r.set)throw new Error("Incompatible instance received: should contain only no get/set properties");++a,Bt(s,r.value)}else Bt(s,t)}if(a!==yf(n).length+bf(n).length)throw new Error("Incompatible instance received: should not contain extra properties");return[s,r]}}(r,Sf))}function vf(e,t){const n=void 0===t||void 0===t.noNullPrototype||t.noNullPrototype;if(null==t)return wf(e,void 0,n);if("withDeletedKeys"in t&&"requiredKeys"in t)throw new Error("requiredKeys and withDeletedKeys cannot be used together in fc.record");if(!("requiredKeys"in t&&void 0!==t.requiredKeys||"withDeletedKeys"in t&&!!t.withDeletedKeys))return wf(e,void 0,n);const r=("requiredKeys"in t?t.requiredKeys:void 0)||[];for(let i=0;i!==r.length;++i){const t=Object.getOwnPropertyDescriptor(e,r[i]);if(void 0===t)throw new Error("requiredKeys cannot reference keys that have not been defined in recordModel");if(!t.enumerable)throw new Error("requiredKeys cannot reference keys that have are enumerable in recordModel")}return wf(e,r,n)}const Ef=Object.defineProperties;function kf(e){return`Stream(${Dt(e,",")}\u2026)`}class xf extends Ke{constructor(e){super(),this.arb=e}generate(e,t){const n=void 0!==t&&1===e.nextInt(1,t)?t:void 0,r=()=>{const t=[],i=new je(function*(e,r){for(;;){const i=e.generate(r,n).value;Bt(t,i),yield i}}(this.arb,e.clone()));return Ef(i,{toString:{value:()=>kf(t.map(Jr))},[qr]:{value:()=>kf(t.map(Jr))},[Wr]:{value:async()=>kf(await Promise.all(t.map(Yr)))},[qe]:{value:r,enumerable:!0}})};return new Ve(r(),void 0)}canShrinkWithoutContext(e){return!1}shrink(e,t){return je.nil()}}function _f(e){return new xf(e)}const If=Object.assign;function Tf(e={}){const t=Ua(),n=so(t,Au);return Sa(t,If(If({},e),{experimentalCustomSlices:n})).map(Ou,Au)}function Of(e){switch(e.length%4){case 0:return e;case 3:return`${e}=`;case 2:return`${e}==`;default:return on(e,1)}}function Af(e){if("string"!==typeof e||e.length%4!==0)throw new Error("Invalid string received");const t=e.indexOf("=");if(-1===t)return e;if(e.length-t>2)throw new Error("Cannot unmap the passed value");return on(e,0,t)}function Nf(e={}){const{minLength:t=0,maxLength:n=fa,size:r}=e,i=t+3-(t+3)%4,a=n-n%4,s=void 0===e.maxLength&&void 0===r?"=":r;if(i>a)throw new Error("Minimal length should be inferior or equal to maximal length");if(i%4!==0)throw new Error("Minimal length of base64 strings must be a multiple of 4");if(a%4!==0)throw new Error("Maximal length of base64 strings must be a multiple of 4");const o=qa();return Sa(o,{minLength:i,maxLength:a,size:s,experimentalCustomSlices:so(o,Au)}).map(Ou,Au).map(Of,Af)}function Cf(e){return Dt(e,"")}function Rf(e){if("string"!==typeof e)throw new Error("Cannot unmap the passed value");return sn(e,"")}const Ff=Object.assign;function Mf(e={}){const t=za(),n=so(t,Rf);return Sa(t,Ff(Ff({},e),{experimentalCustomSlices:n})).map(Cf,Rf)}const Lf=Math.floor,Pf=Math.log,Df=Array.isArray;class Uf extends Ke{constructor(e,t,n,r){if(super(),this.originalArray=e,this.isOrdered=t,this.minLength=n,this.maxLength=r,n<0||n>e.length)throw new Error("fc.*{s|S}ubarrayOf expects the minimal length to be between 0 and the size of the original array");if(r<0||r>e.length)throw new Error("fc.*{s|S}ubarrayOf expects the maximal length to be between 0 and the size of the original array");if(n>r)throw new Error("fc.*{s|S}ubarrayOf expects the minimal length to be inferior or equal to the maximal length");this.lengthArb=new Gi(n,r),this.biasedLengthArb=n!==r?new Gi(n,n+Lf(Pf(r-n)/Pf(2))):this.lengthArb}generate(e,t){const n=(void 0!==t&&1===e.nextInt(1,t)?this.biasedLengthArb:this.lengthArb).generate(e,void 0),r=n.value,i=Ut(this.originalArray,((e,t)=>t)),a=[];for(let s=0;s!==r;++s){const t=e.nextInt(0,i.length-1);Bt(a,i[t]),qt(i,t,1)}return this.isOrdered&&Wt(a,((e,t)=>e-t)),new Ve(Ut(a,(e=>this.originalArray[e])),n.context)}canShrinkWithoutContext(e){return!!Df(e)&&(!!this.lengthArb.canShrinkWithoutContext(e.length)&&function(e,t){const n=new Map;let r=0;for(const i of e)if(Object.is(i,-0))++r;else{const e=n.get(i)||0;n.set(i,e+1)}for(let i=0;i!==t.length;++i){if(!(i in t))return!1;const e=t[i];if(Object.is(e,-0)){if(0===r)return!1;--r}else{const t=n.get(e)||0;if(0===t)return!1;n.set(e,t-1)}}return!0}(this.originalArray,e))}shrink(e,t){return 0===e.length?je.nil():this.lengthArb.shrink(e.length,t).map((t=>new Ve($t(e,e.length-t.value),t.context))).join(e.length>this.minLength?bn((()=>this.shrink($t(e,1),void 0).filter((e=>this.minLength<=e.value.length+1)).map((t=>new Ve([e[0],...t.value],void 0))))):je.nil())}}function jf(e,t={}){const{minLength:n=0,maxLength:r=e.length}=t;return new Uf(e,!0,n,r)}function Bf(e,t={}){const{minLength:n=0,maxLength:r=e.length}=t;return new Uf(e,!1,n,r)}const qf={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F",16:"G",17:"H",18:"J",19:"K",20:"M",21:"N",22:"P",23:"Q",24:"R",25:"S",26:"T",27:"V",28:"W",29:"X",30:"Y",31:"Z"},$f={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,J:18,K:19,M:20,N:21,P:22,Q:23,R:24,S:25,T:26,V:27,W:28,X:29,Y:30,Z:31};function Wf(e){return e<10?yt(e):qf[e]}function zf(e,t){let n="";for(;e.length+n.length<t;)n+="0";return n+e}function Vf(e){let t="";for(let n=e;0!==n;){const e=n>>5;t=Wf(n-(e<<5))+t,n=e}return t}function Gf(e){return function(t){return function(e,t){const n=1073741823&e;return zf(Vf(~~(e/1073741824)),t-6)+zf(Vf(n),6)}(t,e)}}function Kf(e){if("string"!==typeof e)throw new lt("Unsupported type");let t=0,n=1;for(let r=e.length-1;r>=0;--r){const i=e[r],a=$f[i];if(void 0===a)throw new lt("Unsupported type");t+=a*n,n*=32}return t}const Jf=Gf(10),Hf=Gf(8);function Yf(e){return Jf(e[0])+Hf(e[1])+Hf(e[2])}function Zf(e){if("string"!==typeof e||26!==e.length)throw new Error("Unsupported type");return[Kf(e.slice(0,10)),Kf(e.slice(10,18)),Kf(e.slice(18))]}function Qf(){return _n(Ji({min:0,max:0xffffffffffff}),Ji({min:0,max:0xffffffffff}),Ji({min:0,max:0xffffffffff})).map(Yf,Zf)}function Xf(e){return function(e,...t){return function(e){try{return e.padStart}catch(t){return}}(e)===nn?e.padStart(...t):rt(nn,e,t)}(dn(e,16),8,"0")}function ed(e){if("string"!==typeof e)throw new Error("Unsupported type");if(8!==e.length)throw new Error("Unsupported value: invalid length");const t=parseInt(e,16);if(e!==Xf(t))throw new Error("Unsupported value: invalid content");return t}function td(e,t){return Ji({min:e,max:t}).map(Xf,ed)}function nd(e){return`${e[0]}-${on(e[1],4)}-${on(e[1],0,4)}-${on(e[2],0,4)}-${on(e[2],4)}${e[3]}`}const rd=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;function id(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=rd.exec(e);if(null===t)throw new Error("Unsupported type");return[t[1],t[3]+t[2],t[4]+on(t[5],0,4),on(t[5],4)]}function ad(){const e=td(0,4294967295);return _n(e,td(268435456,1610612735),td(2147483648,3221225471),e).map(nd,id)}function sd(e){const t=td(0,4294967295),n=268435456*e;return _n(t,td(n,n+268435455),td(2147483648,3221225471),t).map(nd,id)}function od([e,t,n]){return(null===e?"":`${e}@`)+t+(null===n?"":`:${n}`)}function cd(e){if("string"!==typeof e)throw new Error("Unsupported");const t=e.indexOf("@"),n=-1!==t?e.substring(0,t):null,r=/:(\d+)$/.exec(e),i=null!==r?Number(r[1]):null;return[n,null!==r?e.substring(t+1,e.length-r[1].length-1):e.substring(t+1),i]}function ud(e){return`[${e}]`}function ld(e){if("string"!==typeof e||"["!==e[0]||"]"!==e[e.length-1])throw new Error("Unsupported");return e.substring(1,e.length-1)}function fd(e){const t=e||{},n=t.size,r=[So({size:n}),...!0===t.withIPv4?[ku()]:[],...!0===t.withIPv6?[Ju().map(ud,ld)]:[],...!0===t.withIPv4Extended?[Tu()]:[]];return _n(!0===t.withUserInfo?no(function(e){return co(to(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":"]),{size:e})}(n)):ns(null),$s(...r),!0===t.withPort?no(zs(65535)):ns(null)).map(od,cd)}function dd(e){return co(to(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":","@","/","?"]),{size:e})}function hd(e={}){return dd(e.size)}function pd(e={}){return co(to(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":","@"]),{size:e.size})}function md(e){return Dt(Ut(e,(e=>`/${e}`)),"")}function gd(e){if("string"!==typeof e)throw new Error("Incompatible value received: type");if(0!==e.length&&"/"!==e[0])throw new Error("Incompatible value received: start");return qt(sn(e,"/"),1)}function yd(e,t){return Sa(pd({size:e}),{size:t}).map(md,gd)}function bd(e){return function(e){const[t,n]=function(e){switch(e){case"xsmall":return["xsmall","xsmall"];case"small":return["small","xsmall"];case"medium":return["small","small"];case"large":return["medium","small"];case"xlarge":return["medium","medium"]}}(e);return t===n?yd(t,n):$s(yd(t,n),yd(n,t))}(ba((e||{}).size))}function Sd(e={}){return dd(e.size)}function wd(e){const[t,n,r]=e;return`${t}://${n}${r}${null===e[3]?"":`?${e[3]}`}${null===e[4]?"":`#${e[4]}`}`}const vd=/^([[A-Za-z][A-Za-z0-9+.-]*):\/\/([^/?#]*)([^?#]*)(\?[A-Za-z0-9\-._~!$&'()*+,;=:@/?%]*)?(#[A-Za-z0-9\-._~!$&'()*+,;=:@/?%]*)?$/;function Ed(e){if("string"!==typeof e)throw new Error("Incompatible value received: type");const t=vd.exec(e);if(null===t)throw new Error("Incompatible value received");const n=t[1],r=t[2],i=t[3],a=t[4],s=t[5];return[n,r,i,void 0!==a?a.substring(1):null,void 0!==s?s.substring(1):null]}const kd=Object.assign;function xd(e){const t=e||{},n=ba(t.size),r=void 0!==t.authoritySettings&&void 0!==t.authoritySettings.size?ma(t.authoritySettings.size,n):n,i=kd(kd({},t.authoritySettings),{size:r});return _n(Ra(...t.validSchemes||["http","https"]),fd(i),bd({size:n}),!0===t.withQueryParameters?no(Sd({size:n})):ns(null),!0===t.withFragments?no(hd({size:n})):ns(null)).map(wd,Ed)}class _d{constructor(e,t){this.commands=e,this.metadataForReplay=t}[Symbol.iterator](){return this.commands[Symbol.iterator]()}[qe](){return new _d(this.commands.map((e=>e.clone())),this.metadataForReplay)}toString(){const e=this.commands.filter((e=>e.hasRan)).map((e=>e.toString())).join(","),t=this.metadataForReplay();return 0!==t.length?`${e} /*${t}*/`:e}}class Id{constructor(e){if(this.cmd=e,this.hasRan=!1,$r(e)){const t=e[qr];this[qr]=function(){return t.call(e)}}if(zr(e)){const t=e[Wr];this[Wr]=function(){return t.call(e)}}}check(e){return this.cmd.check(e)}run(e,t){return this.hasRan=!0,this.cmd.run(e,t)}clone(){return $e(this.cmd)?new Id(this.cmd[qe]()):new Id(this.cmd)}toString(){return this.cmd.toString()}}class Td{static parse(e){const[t,n]=e.split(":"),r=this.parseCounts(t),i=this.parseChanges(n);return this.parseOccurences(r,i)}static stringify(e){const t=this.countOccurences(e);return`${this.stringifyCounts(t)}:${this.stringifyChanges(t)}`}static intToB64(e){return e<26?String.fromCharCode(e+65):e<52?String.fromCharCode(e+97-26):e<62?String.fromCharCode(e+48-52):String.fromCharCode(62===e?43:47)}static b64ToInt(e){return e>="a"?e.charCodeAt(0)-97+26:e>="A"?e.charCodeAt(0)-65:e>="0"?e.charCodeAt(0)-48+52:"+"===e?62:63}static countOccurences(e){return e.reduce(((e,t)=>(0===e.length||64===e[e.length-1].count||e[e.length-1].value!==t?e.push({value:t,count:1}):e[e.length-1].count+=1,e)),[])}static parseOccurences(e,t){const n=[];for(let r=0;r!==e.length;++r){const i=e[r],a=t[r];for(let e=0;e!==i;++e)n.push(a)}return n}static stringifyChanges(e){let t="";for(let n=0;n<e.length;n+=6){const r=e.slice(n,n+6).reduceRight(((e,t)=>2*e+(t.value?1:0)),0);t+=this.intToB64(r)}return t}static parseChanges(e){const t=e.split("").map((e=>this.b64ToInt(e))),n=[];for(let r=0;r!==t.length;++r){let e=t[r];for(let t=0;6!==t;++t,e>>=1)n.push(e%2===1)}return n}static stringifyCounts(e){return e.map((({count:e})=>this.intToB64(e-1))).join("")}static parseCounts(e){return e.split("").map((e=>this.b64ToInt(e)+1))}}class Od extends Ke{constructor(e,t,n,r,i){super(),this.sourceReplayPath=r,this.disableReplayLog=i,this.oneCommandArb=$s(...e).map((e=>new Id(e))),this.lengthArb=Cl(0,t,n),this.replayPath=[],this.replayPathPosition=0}metadataForReplay(){return this.disableReplayLog?"":`replayPath=${JSON.stringify(Td.stringify(this.replayPath))}`}buildValueFor(e,t){const n=e.map((e=>e.value_)),r={shrunkOnce:t,items:e};return new Ve(new _d(n,(()=>this.metadataForReplay())),r)}generate(e){const t=this.lengthArb.generate(e,void 0).value,n=Array(t);for(let r=0;r!==t;++r){const t=this.oneCommandArb.generate(e,void 0);n[r]=t}return this.replayPathPosition=0,this.buildValueFor(n,!1)}canShrinkWithoutContext(e){return!1}filterOnExecution(e){const t=[];for(const n of e)n.value_.hasRan?(this.replayPath.push(!0),t.push(n)):this.replayPath.push(!1);return t}filterOnReplay(e){return e.filter(((e,t)=>{const n=this.replayPath[this.replayPathPosition+t];if(void 0===n)throw new Error("Too short replayPath");if(!n&&e.value_.hasRan)throw new Error("Mismatch between replayPath and real execution");return n}))}filterForShrinkImpl(e){0===this.replayPathPosition&&(this.replayPath=null!==this.sourceReplayPath?Td.parse(this.sourceReplayPath):[]);const t=this.replayPathPosition<this.replayPath.length?this.filterOnReplay(e):this.filterOnExecution(e);return this.replayPathPosition+=e.length,t}shrink(e,t){if(void 0===t)return je.nil();const n=t,r=n.shrunkOnce,i=n.items,a=this.filterForShrinkImpl(i);if(0===a.length)return je.nil();const s=r?je.nil():new je([[]][Symbol.iterator]()),o=[];for(let c=0;c!==a.length;++c)o.push(bn((()=>{const e=a.slice(0,c);return this.lengthArb.shrink(a.length-1-c,void 0).map((t=>e.concat(a.slice(a.length-(t.value+1)))))})));for(let c=0;c!==a.length;++c)o.push(bn((()=>this.oneCommandArb.shrink(a[c].value_,a[c].context).map((e=>a.slice(0,c).concat([e],a.slice(c+1)))))));return s.join(...o).map((e=>this.buildValueFor(e.map((e=>new Ve(e.value_.clone(),e.context))),!0)))}}function Ad(e,t={}){const{size:n,maxCommands:r=fa,disableReplayLog:i=!1,replayPath:a=null}=t,s=ga(n,0,r,void 0!==t.maxCommands);return new Od(e,s,r,a,i)}class Nd{constructor(e,t){this.s=e,this.cmd=t}async check(e){let t=null,n=!1;if((await this.s.scheduleSequence([{label:`check@${this.cmd.toString()}`,builder:async()=>{try{n=await Promise.resolve(this.cmd.check(e))}catch(r){throw t=r,r}}}]).task).faulty)throw t;return n}async run(e,t){let n=null;if((await this.s.scheduleSequence([{label:`run@${this.cmd.toString()}`,builder:async()=>{try{await this.cmd.run(e,t)}catch(r){throw n=r,r}}}]).task).faulty)throw n}}const Cd=function*(e,t){for(const n of t)yield new Nd(e,n)},Rd=(e,t,n,r,i)=>e.then((e=>{const{model:a,real:s}=e;let o=n;for(const n of t)o=i(o,(()=>r(n,a,s)));return o})),Fd=(e,t)=>Rd({then:t=>{t(e())}},t,void 0,((e,t,n)=>{e.check(t)&&e.run(t,n)}),((e,t)=>t())),Md=async(e,t,n=Promise.resolve())=>{const r={then:t=>{const n=e();return(e=>"function"===typeof e.then)(n)?n.then(t):t(n)}};return await Rd(r,t,n,(async(e,t,n)=>{await e.check(t)&&await e.run(t,n)}),((e,t)=>e.then(t)))};function Ld(e,t){Fd(e,t)}async function Pd(e,t){await Md(e,t)}async function Dd(e,t,n){const r=Cd(e,n),i=Md(t,r,e.schedule(Promise.resolve(),"startModel"));await e.waitFor(i),await e.waitAll()}const Ud=e=>e();class jd{constructor(e,t){this.act=e,this.taskSelector=t,this.lastTaskId=0,this.sourceTaskSelector=t.clone(),this.scheduledTasks=[],this.triggeredTasks=[],this.scheduledWatchers=[]}static buildLog(e){return`[task\${${e.taskId}}] ${0!==e.label.length?`${e.schedulingType}::${e.label}`:e.schedulingType} ${e.status}${void 0!==e.outputValue?` with value ${t=e.outputValue,t.replace(/([$`\\])/g,"\\$1").replace(/\r/g,"\\r")}`:""}`;var t}log(e,t,n,r,i,a){this.triggeredTasks.push({status:i,schedulingType:e,taskId:t,label:n,metadata:r,outputValue:void 0!==a?Jr(a):void 0})}scheduleInternal(e,t,n,r,i,a){let s=null;const o=++this.lastTaskId,c=new Promise(((i,c)=>{s=()=>{(a?n.then((()=>a())):n).then((n=>(this.log(e,o,t,r,"resolved",n),i(n))),(n=>(this.log(e,o,t,r,"rejected",n),c(n))))}}));return this.scheduledTasks.push({original:n,scheduled:c,trigger:s,schedulingType:e,taskId:o,label:t,metadata:r,customAct:i}),0!==this.scheduledWatchers.length&&this.scheduledWatchers[0](),c}schedule(e,t,n,r){return this.scheduleInternal("promise",t||"",e,n,r||Ud)}scheduleFunction(e,t){return(...n)=>this.scheduleInternal("function",`${e.name}(${n.map(Jr).join(",")})`,e(...n),void 0,t||Ud)}scheduleSequence(e,t){const n={done:!1,faulty:!1},r={then:e=>e()};let i=()=>{};const a=new Promise((e=>i=e));return e.reduce(((e,a)=>{const[s,o,c]="function"===typeof a?[a,a.name,void 0]:[a.builder,a.label,a.metadata];return e.then((()=>{const e=this.scheduleInternal("sequence",o,r,c,t||Ud,(()=>s()));return e.catch((()=>{n.faulty=!0,i()})),e}))}),r).then((()=>{n.done=!0,i()}),(()=>{})),Object.assign(n,{task:Promise.resolve(a).then((()=>({done:n.done,faulty:n.faulty})))})}count(){return this.scheduledTasks.length}internalWaitOne(){if(0===this.scheduledTasks.length)throw new Error("No task scheduled");const e=this.taskSelector.nextTaskIndex(this.scheduledTasks),[t]=this.scheduledTasks.splice(e,1);return t.customAct((async()=>{t.trigger();try{await t.scheduled}catch(e){}}))}async waitOne(e){const t=e||Ud;await this.act((()=>t((async()=>await this.internalWaitOne()))))}async waitAll(e){for(;this.scheduledTasks.length>0;)await this.waitOne(e)}async waitFor(e,t){let n=!1,r=null;const i=async()=>{for(;!n&&this.scheduledTasks.length>0;)await this.waitOne(t);r=null},a=()=>{null===r&&(r=Promise.resolve().then(i))},s=()=>{const e=this.scheduledWatchers.indexOf(a);-1!==e&&this.scheduledWatchers.splice(e,1),0===e&&0!==this.scheduledWatchers.length&&this.scheduledWatchers[0]()},o=e.then((e=>(n=!0,null===r?(s(),e):r.then((()=>(s(),e))))),(e=>{if(n=!0,null===r)throw s(),e;return r.then((()=>{throw s(),e}))}));return this.scheduledTasks.length>0&&0===this.scheduledWatchers.length&&a(),this.scheduledWatchers.push(a),o}report(){return[...this.triggeredTasks,...this.scheduledTasks.map((e=>({status:"pending",schedulingType:e.schedulingType,taskId:e.taskId,label:e.label,metadata:e.metadata})))]}toString(){return"schedulerFor()`\n"+this.report().map(jd.buildLog).map((e=>`-> ${e}`)).join("\n")+"`"}[qe](){return new jd(this.act,this.sourceTaskSelector)}}function Bd(e){let t=0;return{clone:()=>Bd(e),nextTaskIndex:n=>{if(e.length<=t)throw new Error("Invalid schedulerFor defined: too many tasks have been scheduled");const r=n.findIndex((n=>n.taskId===e[t]));if(-1===r)throw new Error("Invalid schedulerFor defined: unable to find next task");return++t,r}}}function qd(e,t){return new jd(e,Bd(t))}function $d(e){const t=e.clone();return{clone:()=>$d(t),nextTaskIndex:t=>e.nextInt(0,t.length-1)}}class Wd extends Ke{constructor(e){super(),this.act=e}generate(e,t){return new Ve(new jd(this.act,$d(e.clone())),void 0)}canShrinkWithoutContext(e){return!1}shrink(e,t){return je.nil()}}function zd(e){const{act:t=(e=>e())}=e||{};return new Wd(t)}function Vd(e,t){const{act:n=(e=>e())}=Array.isArray(e)?t||{}:e||{};return Array.isArray(e)?qd(n,e):function(e,...t){return qd(n,t)}}function Gd(e={}){return wl(e,at("-9223372036854775808"),at("9223372036854775807"),st,ka)}function Kd(e={}){return wl(e,at(0),at("18446744073709551615"),ot,ka)}function Jd(e,t,n){if(!t&&!n)return e;const r={hasStart:!1,hasEnd:!1},i=Hd(e,t,n,r),a=t&&!r.hasStart,s=n&&!r.hasEnd;if(!a&&!s)return i;const o=[];return a&&(o.push({type:"Assertion",kind:"^"}),o.push({type:"Repetition",quantifier:{type:"Quantifier",kind:"*",greedy:!0},expression:{type:"Char",kind:"meta",symbol:".",value:".",codePoint:Number.NaN}})),o.push(i),s&&(o.push({type:"Repetition",quantifier:{type:"Quantifier",kind:"*",greedy:!0},expression:{type:"Char",kind:"meta",symbol:".",value:".",codePoint:Number.NaN}}),o.push({type:"Assertion",kind:"$"})),{type:"Group",capturing:!1,expression:{type:"Alternative",expressions:o}}}function Hd(e,t,n,r){switch(e.type){case"Char":case"Repetition":case"CharacterClass":case"ClassRange":case"Backreference":return e;case"Quantifier":throw new Error("Wrongly defined AST tree, Quantifier nodes not supposed to be scanned!");case"Alternative":return r.hasStart=!0,r.hasEnd=!0,Object.assign(Object.assign({},e),{expressions:e.expressions.map(((r,i)=>Jd(r,t&&0===i,n&&i===e.expressions.length-1)))});case"Group":return Object.assign(Object.assign({},e),{expression:Hd(e.expression,t,n,r)});case"Disjunction":return r.hasStart=!0,r.hasEnd=!0,Object.assign(Object.assign({},e),{left:null!==e.left?Jd(e.left,t,n):null,right:null!==e.right?Jd(e.right,t,n):null});case"Assertion":if("^"===e.kind||"Lookahead"===e.kind)return r.hasStart=!0,e;if("$"===e.kind||"Lookbehind"===e.kind)return r.hasEnd=!0,e;throw new Error(`Assertions of kind ${e.kind} not implemented yet!`);default:throw function(e){return new Error(`Unsupported AST node! Received: ${Jr(e)}`)}(e)}}function Yd(e,t){return e[t]>="\ud800"&&e[t]<="\udbff"&&e[t+1]>="\udc00"&&e[t+1]<="\udfff"?2:1}function Zd(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"}function Qd(e){return e>="0"&&e<="9"}function Xd(e,t){for(let n=t;n!==e.length;++n){const t=e[n];if("\\"===t)n+=1;else if("]"===t)return n}throw new Error("Missing closing ']'")}var eh;function th(e,t,n,r){switch(e[t]){case"[":return r===eh.Character?t+1:Xd(e,t+1)+1;case"{":{if(r===eh.Character)return t+1;const n=function(e,t){let n=!1;for(let r=t;r!==e.length;++r){const i=e[r];if(Qd(i));else{if(t===r)return-1;if(","!==i)return"}"===i?r:-1;if(n)return-1;n=!0}}return-1}(e,t+1);return-1===n?t+1:n+1}case"(":return r===eh.Character?t+1:function(e,t){let n=0;for(let r=t;r!==e.length;++r){const t=e[r];if("\\"===t)r+=1;else if(")"===t){if(0===n)return r;n-=1}else"["===t?r=Xd(e,r):"("===t&&(n+=1)}throw new Error("Missing closing ')'")}(e,t+1)+1;case"]":case"}":case")":return t+1;case"\\":{const r=e[t+1];switch(r){case"x":if(Zd(e[t+2])&&Zd(e[t+3]))return t+4;throw new Error(`Unexpected token '${e.substring(t,t+4)}' found`);case"u":if("{"===e[t+2]){if(!n)return t+2;if("}"===e[t+4]){if(Zd(e[t+3]))return t+5;throw new Error(`Unexpected token '${e.substring(t,t+5)}' found`)}if("}"===e[t+5]){if(Zd(e[t+3])&&Zd(e[t+4]))return t+6;throw new Error(`Unexpected token '${e.substring(t,t+6)}' found`)}if("}"===e[t+6]){if(Zd(e[t+3])&&Zd(e[t+4])&&Zd(e[t+5]))return t+7;throw new Error(`Unexpected token '${e.substring(t,t+7)}' found`)}if("}"===e[t+7]){if(Zd(e[t+3])&&Zd(e[t+4])&&Zd(e[t+5])&&Zd(e[t+6]))return t+8;throw new Error(`Unexpected token '${e.substring(t,t+8)}' found`)}if("}"===e[t+8]&&Zd(e[t+3])&&Zd(e[t+4])&&Zd(e[t+5])&&Zd(e[t+6])&&Zd(e[t+7]))return t+9;throw new Error(`Unexpected token '${e.substring(t,t+9)}' found`)}if(Zd(e[t+2])&&Zd(e[t+3])&&Zd(e[t+4])&&Zd(e[t+5]))return t+6;throw new Error(`Unexpected token '${e.substring(t,t+6)}' found`);case"p":case"P":{if(!n)return t+2;let r=t+2;for(;r<e.length&&"}"!==e[r];r+="\\"===e[r]?2:1);if("}"!==e[r])throw new Error("Invalid \\P definition");return r+1}case"k":{let r=t+2;for(;r<e.length&&">"!==e[r];++r);if(">"!==e[r]){if(!n)return t+2;throw new Error("Invalid \\k definition")}return r+1}default:if(Qd(r)){const r=n?e.length:Math.min(t+4,e.length);let i=t+2;for(;i<r&&Qd(e[i]);++i);return i}return t+(n?Yd(e,t+1):1)+1}}default:return t+(n?Yd(e,t):1)}}function nh(e,t,n,r){const i=th(e,t,n,r);return e.substring(t,i)}!function(e){e[e.Full=0]="Full",e[e.Character=1]="Character"}(eh||(eh={}));const rh=String.fromCodePoint;function ih(e){const t=e.pop();if(void 0===t)throw new Error("Unable to extract token preceeding the currently parsed one");return t}function ah(e){return e>="0"&&e<="9"}function sh(e,t){return{type:"Char",kind:"simple",symbol:e,value:e,codePoint:e.codePointAt(0)||-1,escaped:t}}function oh(e,t){return{type:"Char",kind:"meta",symbol:t,value:e,codePoint:t.codePointAt(0)||-1}}function ch(e,t){if(e.length>1)return{type:"Alternative",expressions:e};if(!t&&0===e.length)throw new Error("Unsupported no token");return e[0]}function uh(e){if("\\"===e[0]){const t=e[1];switch(t){case"x":{const t=e.substring(2),n=Number.parseInt(t,16);return{type:"Char",kind:"hex",symbol:rh(n),value:e,codePoint:n}}case"u":{if("\\u"===e)return sh("u",!0);const t="{"===e[2]?e.substring(3,e.length-1):e.substring(2),n=Number.parseInt(t,16);return{type:"Char",kind:"unicode",symbol:rh(n),value:e,codePoint:n}}case"0":return oh(e,"\0");case"n":return oh(e,"\n");case"f":return oh(e,"\f");case"r":return oh(e,"\r");case"t":return oh(e,"\t");case"v":return oh(e,"\v");case"w":case"W":case"d":case"D":case"s":case"S":case"b":case"B":return{type:"Char",kind:"meta",symbol:void 0,value:e,codePoint:Number.NaN};default:if(ah(t)){const t=e.substring(1),n=Number(t);return{type:"Char",kind:"decimal",symbol:rh(n),value:e,codePoint:n}}if(e.length>2&&("p"===t||"P"===t))throw new Error("UnicodeProperty not implemented yet!");return sh(e.substring(1),!0)}}return sh(e)}function lh(e,t,n,r){let i=null;for(let a=0,s=nh(t,a,n,eh.Full);a!==t.length;a+=s.length,s=nh(t,a,n,eh.Full)){const t=s[0];switch(t){case"|":null===i&&(i=[]),i.push(ch(e.splice(0),!0)||null);break;case".":e.push({type:"Char",kind:"meta",symbol:s,value:s,codePoint:Number.NaN});break;case"*":case"+":{const n=ih(e);e.push({type:"Repetition",expression:n,quantifier:{type:"Quantifier",kind:t,greedy:!0}});break}case"?":{const n=ih(e);"Repetition"===n.type?(n.quantifier.greedy=!1,e.push(n)):e.push({type:"Repetition",expression:n,quantifier:{type:"Quantifier",kind:t,greedy:!0}});break}case"{":{if("{"===s){e.push(sh(s));break}const t=ih(e),n=s.substring(1,s.length-1).split(","),r=Number(n[0]),i=1===n.length?r:0!==n[1].length?Number(n[1]):void 0;e.push({type:"Repetition",expression:t,quantifier:{type:"Quantifier",kind:"Range",greedy:!0,from:r,to:i}});break}case"[":{const t=s.substring(1,s.length-1),r=[];let i,a=!1;for(let e=0,s=nh(t,e,n,eh.Character);e!==t.length;e+=s.length,s=nh(t,e,n,eh.Character)){if(0===e&&"^"===s){i=!0;continue}const t=uh(s);if("-"===s)r.push(t),a=!0;else{const e=r.length>=2?r[r.length-2]:void 0;a&&void 0!==e&&"Char"===e.type?(r.pop(),r.pop(),r.push({type:"ClassRange",from:e,to:t})):r.push(t),a=!1}}e.push({type:"CharacterClass",expressions:r,negative:i});break}case"(":{const t=s.substring(1,s.length-1),i=[];if("?"===t[0])if(":"===t[1])lh(i,t.substring(2),n,r),e.push({type:"Group",capturing:!1,expression:ch(i)});else if("="===t[1]||"!"===t[1])lh(i,t.substring(2),n,r),e.push({type:"Assertion",kind:"Lookahead",negative:"!"===t[1]||void 0,assertion:ch(i)});else if("<"!==t[1]||"="!==t[2]&&"!"!==t[2]){const a=t.split(">");if(a.length<2||"<"!==a[0][1])throw new Error(`Unsupported regex content found at ${JSON.stringify(s)}`);const o=++r.lastIndex,c=a[0].substring(2);r.named.set(c,o),lh(i,a.slice(1).join(">"),n,r),e.push({type:"Group",capturing:!0,nameRaw:c,name:c,number:o,expression:ch(i)})}else lh(i,t.substring(3),n,r),e.push({type:"Assertion",kind:"Lookbehind",negative:"!"===t[2]||void 0,assertion:ch(i)});else{const a=++r.lastIndex;lh(i,t,n,r),e.push({type:"Group",capturing:!0,number:a,expression:ch(i)})}break}default:if("^"===s)e.push({type:"Assertion",kind:s});else if("$"===s)e.push({type:"Assertion",kind:s});else if("\\"===s[0]&&ah(s[1])){const t=Number(s.substring(1));n||t<=r.lastIndex?e.push({type:"Backreference",kind:"number",number:t,reference:t}):e.push(uh(s))}else if("\\"===s[0]&&"k"===s[1]&&2!==s.length){const t=s.substring(3,s.length-1);e.push({type:"Backreference",kind:"name",number:r.named.get(t)||0,referenceRaw:t,reference:t})}else e.push(uh(s))}}if(null!==i){i.push(ch(e.splice(0),!0)||null);let t={type:"Disjunction",left:i[0],right:i[1]};for(let e=2;e<i.length;++e)t={type:"Disjunction",left:t,right:i[e]};e.push(t)}}function fh(e){const t=-1!==Pt([...e.flags],"u"),n=[];return lh(n,e.source,t,{lastIndex:0,named:new Map}),ch(n)}const dh=String.fromCodePoint,hh=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_"],ph=[..."0123456789"],mh=[..." \t\r\n\v\f"],gh=[..."\r\n"],yh=[..."\x1e\x15"],bh=[...gh,...yh],Sh=Wa();function wh(e){return new lt(`Unsupported AST node! Received: ${Jr(e)}`)}function vh(e,t,n){switch(e.type){case"Char":if("meta"===e.kind)switch(e.value){case"\\w":return Ra(...hh);case"\\W":return Sh.filter((e=>-1===Pt(hh,e)));case"\\d":return Ra(...ph);case"\\D":return Sh.filter((e=>-1===Pt(ph,e)));case"\\s":return Ra(...mh);case"\\S":return Sh.filter((e=>-1===Pt(mh,e)));case"\\b":case"\\B":throw new lt(`Meta character ${e.value} not implemented yet!`);case".":{const e=n.dotAll?yh:bh;return Sh.filter((t=>-1===Pt(e,t)))}}if(void 0===e.symbol)throw new lt(`Unexpected undefined symbol received for non-meta Char! Received: ${Jr(e)}`);return ns(e.symbol);case"Repetition":{const r=vh(e.expression,t,n);switch(e.quantifier.kind){case"*":return co(r,t);case"+":return co(r,Object.assign(Object.assign({},t),{minLength:1}));case"?":return co(r,Object.assign(Object.assign({},t),{minLength:0,maxLength:1}));case"Range":return co(r,Object.assign(Object.assign({},t),{minLength:e.quantifier.from,maxLength:e.quantifier.to}));default:throw wh(e.quantifier)}}case"Quantifier":throw new lt("Wrongly defined AST tree, Quantifier nodes not supposed to be scanned!");case"Alternative":return _n(...Ut(e.expressions,(e=>vh(e,t,n)))).map((e=>Dt(e,"")));case"CharacterClass":if(e.negative){const r=Ut(e.expressions,(e=>vh(e,t,n)));return Sh.filter((e=>zt(r,(t=>!t.canShrinkWithoutContext(e)))))}return $s(...Ut(e.expressions,(e=>vh(e,t,n))));case"ClassRange":return Ji({min:e.from.codePoint,max:e.to.codePoint}).map((e=>dh(e)),(e=>{if("string"!==typeof e)throw new lt("Invalid type");if(1!==[...e].length)throw new lt("Invalid length");return e.codePointAt(0)}));case"Group":return vh(e.expression,t,n);case"Disjunction":return $s(null!==e.left?vh(e.left,t,n):ns(""),null!==e.right?vh(e.right,t,n):ns(""));case"Assertion":if("^"===e.kind||"$"===e.kind)return n.multiline?"^"===e.kind?$s(ns(""),_n(co(Sh),Ra(...gh)).map((e=>`${e[0]}${e[1]}`),(e=>{if("string"!==typeof e||0===e.length)throw new lt("Invalid type");return[e.substring(0,e.length-1),e[e.length-1]]}))):$s(ns(""),_n(Ra(...gh),co(Sh)).map((e=>`${e[0]}${e[1]}`),(e=>{if("string"!==typeof e||0===e.length)throw new lt("Invalid type");return[e[0],e.substring(1)]}))):ns("");throw new lt(`Assertions of kind ${e.kind} not implemented yet!`);case"Backreference":throw new lt("Backreference nodes not implemented yet!");default:throw wh(e)}}function Eh(e,t={}){for(const i of e.flags)if("d"!==i&&"g"!==i&&"m"!==i&&"s"!==i&&"u"!==i)throw new lt(`Unable to use "stringMatching" against a regex using the flag ${i}`);const n={size:t.size},r={multiline:e.multiline,dotAll:e.dotAll};return vh(Jd(fh(e),!0,!0),n,r)}const kh="module",xh="3.19.0",_h="0eed51496955271dde0ef5fa4d0862c13cd2fbd5";var Ih=n(641112);const Th=Symbol.for("@effect/schema/TypeId/GreaterThan"),Oh=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),Ah=Symbol.for("@effect/schema/TypeId/LessThan"),Nh=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),Ch=Symbol.for("@effect/schema/TypeId/Int"),Rh=Symbol.for("@effect/schema/TypeId/Between"),Fh=Symbol.for("@effect/schema/TypeId/GreaterThanBigint"),Mh=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToBigint"),Lh=Symbol.for("@effect/schema/TypeId/LessThanBigint"),Ph=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToBigint"),Dh=Symbol.for("@effect/schema/TypeId/BetweenBigint"),Uh=Symbol.for("@effect/schema/TypeId/MinLength"),jh=Symbol.for("@effect/schema/TypeId/MaxLength"),Bh=Symbol.for("@effect/schema/TypeId/Length"),qh=Symbol.for("@effect/schema/TypeId/MinItems"),$h=Symbol.for("@effect/schema/TypeId/MaxItems"),Wh=Symbol.for("@effect/schema/TypeId/ItemsCount");var zh=n(515407);const Vh=Symbol.for("@effect/schema/ArbitraryHookId");var Gh=n(160023);const Kh=Symbol.for("@effect/schema/EquivalenceHookId"),Jh=Symbol.for("@effect/schema/Serializable/symbol"),Hh=Symbol.for("@effect/schema/Serializable/symbolResult"),Yh=Symbol.for("@effect/schema/PrettyHookId"),Zh=Me.getAnnotation(Yh),Qh=e=>t=>d.match(Zh(t),{onNone:()=>e,onSome:e=>e()});zh.formatUnknown;var Xh=n(181107);const ep=Symbol.for("@effect/schema/Schema"),tp=e=>class{[ep]=np;static Type;static Encoded;static[ep]=np;static ast=e;static annotations(e){return tp(ip(this.ast,e))}static pipe(){return(0,p.pipeArguments)(this,arguments)}static toString(){return String(e)}},np={_A:e=>e,_I:e=>e,_R:e=>e},rp=e=>{if(!e)return{};const t={},n=Object.getOwnPropertySymbols(e);for(const i of n)t[i]=e[i];if(void 0!==e.typeId){const n=e.typeId;"object"===typeof n?(t[Me.TypeAnnotationId]=n.id,t[n.id]=n.annotation):t[Me.TypeAnnotationId]=n}const r=(n,r)=>{void 0!==e[n]&&(t[r]=e[n])};return r("message",Me.MessageAnnotationId),r("missingMessage",Me.MissingMessageAnnotationId),r("identifier",Me.IdentifierAnnotationId),r("title",Me.TitleAnnotationId),r("description",Me.DescriptionAnnotationId),r("examples",Me.ExamplesAnnotationId),r("default",Me.DefaultAnnotationId),r("documentation",Me.DocumentationAnnotationId),r("jsonSchema",Me.JSONSchemaAnnotationId),r("arbitrary",Vh),r("pretty",Yh),r("equivalence",Kh),r("concurrency",Me.ConcurrencyAnnotationId),r("batching",Me.BatchingAnnotationId),r("parseIssueTitle",Me.ParseIssueTitleAnnotationId),r("parseOptions",Me.ParseOptionsAnnotationId),t},ip=(e,t)=>Me.annotations(e,rp(t)),ap=e=>e,sp=e=>String(e.ast),op=e=>tp(Me.encodedAST(e.ast)),cp=e=>tp(Me.encodedBoundAST(e.ast)),up=e=>tp(Me.typeAST(e.ast)),lp=(e,t)=>{const n=Gh.encodeUnknown(e,t);return(e,t)=>Gh.mapError(n(e,t),Gh.parseError)},fp=(e,t)=>{const n=Gh.encodeUnknownEither(e,t);return(e,t)=>G.mapLeft(n(e,t),Gh.parseError)},dp=(e,t)=>{const n=lp(e,t);return(e,t)=>se.runPromise(n(e,t))},hp=lp,pp=fp,mp=dp,gp=(e,t)=>{const n=Gh.decodeUnknown(e,t);return(e,t)=>Gh.mapError(n(e,t),Gh.parseError)},yp=(e,t)=>{const n=Gh.decodeUnknownEither(e,t);return(e,t)=>G.mapLeft(n(e,t),Gh.parseError)},bp=(e,t)=>{const n=gp(e,t);return(e,t)=>se.runPromise(n(e,t))},Sp=gp,wp=yp,vp=bp,Ep=(e,t)=>{const n=Gh.validate(e,t);return(e,t)=>Gh.mapError(n(e,t),Gh.parseError)},kp=(e,t)=>{const n=Gh.validateEither(e,t);return(e,t)=>G.mapLeft(n(e,t),Gh.parseError)},xp=(e,t)=>{const n=Ep(e,t);return(e,t)=>se.runPromise(n(e,t))},_p=e=>m.hasProperty(e,ep)&&m.isObject(e[ep]),Ip=(e,t=(e=>Me.isMembers(e)?Me.Union.make(Me.mapMembers(e,(e=>new Me.Literal(e)))):new Me.Literal(e[0]))(e))=>class extends(tp(t)){static annotations(e){return Ip(this.literals,ip(this.ast,e))}static literals=[...e]};function Tp(...e){return s.isNonEmptyReadonlyArray(e)?Ip(e):zp}const Op=(...e)=>t=>Tp(...e),Ap=e=>tp(new Me.UniqueSymbol(e)),Np=(e,t=(e=>new Me.Enums(Object.keys(e).filter((t=>"number"!==typeof e[e[t]])).map((t=>[t,e[t]]))))(e))=>class extends(tp(t)){static annotations(e){return Np(this.enums,ip(this.ast,e))}static enums={...e}},Cp=e=>Np(e),Rp=(...[e,...t])=>{let n=Lp(Fp(e));for(const r of t)n=s.flatMap(n,(e=>Lp(Fp(r)).map((t=>Mp(e,t)))));return tp(Me.Union.make(n.map((e=>m.isString(e)?new Me.Literal(e):e))))},Fp=e=>_p(e)?e.ast:new Me.Literal(String(e)),Mp=(e,t)=>m.isString(e)?m.isString(t)?e+t:new Me.TemplateLiteral(e+t.head,t.spans):m.isString(t)?new Me.TemplateLiteral(e.head,s.modifyNonEmptyLast(e.spans,(e=>new Me.TemplateLiteralSpan(e.type,e.literal+t)))):new Me.TemplateLiteral(e.head,s.appendAll(s.modifyNonEmptyLast(e.spans,(e=>new Me.TemplateLiteralSpan(e.type,e.literal+String(t.head)))),t.spans)),Lp=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new Me.TemplateLiteral("",[new Me.TemplateLiteralSpan(e,"")])];case"Union":return s.flatMap(e.types,Lp)}throw new Error(Ih.getSchemaUnsupportedLiteralSpanErrorMessage(e))},Pp=function(){if(Array.isArray(arguments[0])){return((e,t,n)=>tp(new Me.Declaration(e.map((e=>e.ast)),((...e)=>t.decode(...e.map(tp))),((...e)=>t.encode(...e.map(tp))),rp(n))))(arguments[0],arguments[1],arguments[2])}return((e,t)=>{const n=()=>(t,n,r)=>e(t)?Gh.succeed(t):Gh.fail(new Gh.Type(r,t)),r=n;return tp(new Me.Declaration([],n,r,rp(t)))})(arguments[0],arguments[1])},Dp=Symbol.for("@effect/schema/TypeId/Brand"),Up=(e,t)=>n=>Vm(new Me.Refinement(n.ast,(function(t,n,r){const i=e.either(t);return G.isLeft(i)?d.some(new Gh.Type(r,t,i.left.map((e=>e.message)).join(", "))):d.none()}),rp({typeId:{id:Dp,annotation:{constructor:e}},...t}))),jp=Symbol.for("@effect/schema/TypeId/InstanceOf"),Bp=(e,t)=>Pp((t=>t instanceof e),{title:e.name,description:`an instance of ${e.name}`,pretty:()=>String,typeId:{id:jp,annotation:{constructor:e}},...t});class qp extends(tp(Me.undefinedKeyword)){static annotations=super.annotations}class $p extends(tp(Me.voidKeyword)){static annotations=super.annotations}class Wp extends(tp(Me.null)){static annotations=super.annotations}class zp extends(tp(Me.neverKeyword)){static annotations=super.annotations}class Vp extends(tp(Me.unknownKeyword)){static annotations=super.annotations}class Gp extends(tp(Me.anyKeyword)){static annotations=super.annotations}class Kp extends(tp(Me.bigIntKeyword)){static annotations=super.annotations}class Jp extends(tp(Me.symbolKeyword)){static annotations=super.annotations}class Hp extends(tp(Me.stringKeyword)){static annotations=super.annotations}class Yp extends(tp(Me.numberKeyword)){static annotations=super.annotations}class Zp extends(tp(Me.booleanKeyword)){static annotations=super.annotations}class Qp extends(tp(Me.objectKeyword)){static annotations=super.annotations}const Xp=(e,t=(e=>Me.Union.members(e.map((e=>e.ast))))(e))=>class extends(tp(t)){static annotations(e){return Xp(this.members,ip(this.ast,e))}static members=[...e]};function em(...e){return Me.isMembers(e)?Xp(e):s.isNonEmptyReadonlyArray(e)?e[0]:zp}const tm=e=>em(e,Wp),nm=e=>em(e,qp),rm=e=>em(e,Wp,qp),im=e=>tp(Me.keyof(e.ast)),am=e=>new om(new Me.OptionalType(e.ast,!1),e),sm=e=>new om(new Me.OptionalType(e.ast,!0),e);class om{ast;from;[ep];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new om(new Me.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...rp(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}const cm=(e,t,n=((e,t)=>new Me.TupleType(e.map((e=>_p(e)?new Me.OptionalType(e.ast,!1):e.ast)),t.map((e=>_p(e)?new Me.Type(e.ast):e.ast)),!0))(e,t))=>class extends(tp(n)){static annotations(e){return cm(this.elements,this.rest,ip(this.ast,e))}static elements=[...e];static rest=[...t]};function um(...e){return Array.isArray(e[0])?cm(e[0],e.slice(1)):cm(e,[])}const lm=(e,t)=>class extends(cm([],[e],t)){static annotations(e){return lm(this.value,ip(this.ast,e))}static value=e},fm=e=>lm(e),dm=(e,t)=>class extends(cm([e],[e],t)){static annotations(e){return dm(this.value,ip(this.ast,e))}static value=e},hm=e=>dm(e),pm=e=>e?'"?:"':'":"';class mm extends Me.OptionalType{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.defaultValue=i}toString(){const e=pm(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class gm extends Me.OptionalType{isReadonly;fromKey;constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.fromKey=i}}class ym extends Me.OptionalType{isReadonly;defaultValue;constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.defaultValue=i}}class bm{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,n,r){this.from=e,this.to=t,this.decode=n,this.encode=r}toString(){return`PropertySignature<${pm(this.to.isOptional)}, ${this.to.type}, ${e=this.from.fromKey,void 0===e?"never":m.isString(e)?JSON.stringify(e):String(e)}, ${pm(this.from.isOptional)}, ${this.from.type}>`;var e}}const Sm=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new mm(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new bm(new gm(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new ym(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},wm=Symbol.for("@effect/schema/PropertySignature");class vm{ast;[ep];[wm]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return(0,p.pipeArguments)(this,arguments)}annotations(e){return new vm(Sm(this.ast,rp(e)))}toString(){return String(this.ast)}}const Em=e=>new vm(e);class km extends vm{from;constructor(e,t){super(e),this.from=t}annotations(e){return new km(Sm(this.ast,rp(e)),this.from)}}const xm=e=>new km(new mm(e.ast,!1,!0,{},void 0),e),_m=(0,u.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Em(new mm(n.type,n.isOptional,n.isReadonly,n.annotations,t));case"PropertySignatureTransformation":return Em(new bm(n.from,new ym(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,t),n.decode,n.encode))}})),Im=(e,t)=>d.match(e,{onNone:()=>d.some(t()),onSome:e=>d.some(void 0===e?t():e)}),Tm=(0,u.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Em(new bm(n,new ym(Me.typeAST(n.type),!1,!0,{},void 0),(e=>Im(e,t)),u.identity));case"PropertySignatureTransformation":return Em(new bm(n.from,new ym(n.to.type,!1,n.to.isReadonly,n.to.annotations,n.to.defaultValue),(e=>Im(n.decode(e),t)),n.encode))}})),Om=(0,u.dual)(2,((e,t)=>e.pipe(Tm(t.decoding),_m(t.constructor)))),Am=(0,u.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Em(new bm(new gm(n.type,n.isOptional,n.isReadonly,n.annotations,t),new ym(Me.typeAST(n.type),n.isOptional,n.isReadonly,{},n.defaultValue),u.identity,u.identity));case"PropertySignatureTransformation":return Em(new bm(new gm(n.from.type,n.from.isOptional,n.from.isReadonly,n.from.annotations,t),n.to,n.decode,n.encode))}})),Nm=(e,t,n)=>Em(new bm(new gm(e.ast,!0,!0,{},void 0),new ym(t.ast,!1,!0,{},void 0),(e=>d.some(n.decode(e))),d.flatMap(n.encode))),Cm=(e,t,n)=>Em(new bm(new gm(e.ast,!1,!0,{},void 0),new ym(t.ast,!0,!0,{},void 0),d.flatMap(n.decode),(e=>d.some(n.encode(e))))),Rm=(e,t,n)=>Em(new bm(new gm(e.ast,!0,!0,{},void 0),new ym(t.ast,!0,!0,{},void 0),n.decode,n.encode)),Fm=(0,u.dual)((e=>_p(e[0])),((e,t)=>new km(((e,t)=>{const n=t?.exact,r=t?.default,i=t?.nullable,a="Option"==t?.as,s=t?.onNoneEncoding?d.orElse(t.onNoneEncoding):u.identity;return n?r?i?_m(Nm(tm(e),up(e),{decode:d.match({onNone:r,onSome:e=>null===e?r():e}),encode:d.some}),r).ast:_m(Nm(e,up(e),{decode:d.match({onNone:r,onSome:u.identity}),encode:d.some}),r).ast:a?i?Nm(tm(e),tS(up(e)),{decode:d.filter(m.isNotNull),encode:s}).ast:Nm(e,tS(up(e)),{decode:u.identity,encode:u.identity}).ast:i?Rm(tm(e),up(e),{decode:d.filter(m.isNotNull),encode:u.identity}).ast:new mm(e.ast,!0,!0,{},void 0):r?i?_m(Nm(rm(e),up(e),{decode:d.match({onNone:r,onSome:e=>null==e?r():e}),encode:d.some}),r).ast:_m(Nm(nm(e),up(e),{decode:d.match({onNone:r,onSome:e=>void 0===e?r():e}),encode:d.some}),r).ast:a?i?Nm(rm(e),tS(up(e)),{decode:d.filter((e=>null!=e)),encode:s}).ast:Nm(nm(e),tS(up(e)),{decode:d.filter(m.isNotUndefined),encode:s}).ast:i?Rm(rm(e),nm(up(e)),{decode:d.filter(m.isNotNull),encode:u.identity}).ast:new mm(nm(e).ast,!0,!0,{},void 0)})(e,t),e))),Mm=e=>m.hasProperty(e,wm),Lm=(e,t)=>{const n=zh.ownKeys(e);for(const r of n){const n=e[r];if(void 0===t[r]&&Mm(n)){const e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[r]=i())}}return t},Pm=(e,t,n=((e,t)=>{const n=zh.ownKeys(e),r=[];if(n.length>0){const i=[],a=[],o=[];for(let t=0;t<n.length;t++){const s=n[t],c=e[s];if(Mm(c)){const e=c.ast;switch(e._tag){case"PropertySignatureDeclaration":{const t=e.type,n=e.isOptional,o=e.annotations;i.push(new Me.PropertySignature(s,t,n,!0)),a.push(new Me.PropertySignature(s,Me.typeAST(t),n,!0,o)),r.push(new Me.PropertySignature(s,t,n,!0,o));break}case"PropertySignatureTransformation":{const t=e.from.fromKey??s;i.push(new Me.PropertySignature(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),a.push(new Me.PropertySignature(s,e.to.type,e.to.isOptional,!0,e.to.annotations)),o.push(new Me.PropertySignatureTransformation(t,s,e.decode,e.encode));break}}}else i.push(new Me.PropertySignature(s,c.ast,!1,!0)),a.push(new Me.PropertySignature(s,Me.typeAST(c.ast),!1,!0)),r.push(new Me.PropertySignature(s,c.ast,!1,!0))}if(s.isNonEmptyReadonlyArray(o)){const e=[],n=[];for(const r of t){const{indexSignatures:t,propertySignatures:s}=Me.record(r.key.ast,r.value.ast);s.forEach((e=>{i.push(e),a.push(new Me.PropertySignature(e.name,Me.typeAST(e.type),e.isOptional,e.isReadonly,e.annotations))})),t.forEach((t=>{e.push(t),n.push(new Me.IndexSignature(t.parameter,Me.typeAST(t.type),t.isReadonly))}))}return new Me.Transformation(new Me.TypeLiteral(i,e,{[Me.TitleAnnotationId]:"Struct (Encoded side)"}),new Me.TypeLiteral(a,n,{[Me.TitleAnnotationId]:"Struct (Type side)"}),new Me.TypeLiteralTransformation(o))}}const i=[];for(const a of t){const{indexSignatures:e,propertySignatures:t}=Me.record(a.key.ast,a.value.ast);t.forEach((e=>r.push(e))),e.forEach((e=>i.push(e)))}return new Me.TypeLiteral(r,i)})(e,t))=>class extends(tp(n)){static annotations(e){return Pm(this.fields,this.records,ip(this.ast,e))}static fields={...e};static records=[...t];static make=(t,n)=>{const r=Lm(e,{...t});return Uw(n)?r:Gh.validateSync(this)(r)}};function Dm(e,...t){return Pm(e,t)}const Um=e=>Tp(e).pipe(xm,_m((()=>e))),jm=(e,t)=>Dm({_tag:Um(e),...t}),Bm=(e,t,n)=>class extends(Pm({},[{key:e,value:t}],n)){static annotations(n){return Bm(e,t,ip(this.ast,n))}static key=e;static value=t},qm=(e,t)=>Bm(e,t),$m=(...e)=>t=>tp(Me.pick(t.ast,e)),Wm=(...e)=>t=>tp(Me.omit(t.ast,e)),zm=(0,u.dual)(2,((e,t)=>{const n=Me.getPropertyKeyIndexedAccess(Me.typeAST(e.ast),t),r=tp(n.isOptional?Me.orUndefined(n.type):n.type);return lg(e.pipe($m(t)),r,{decode:e=>e[t],encode:e=>n.isOptional&&void 0===e?{}:{[t]:e}})})),Vm=e=>class extends(tp(e)){static annotations(e){return Vm(ip(this.ast,e))}static make=(e,t)=>Uw(t)?e:Gh.validateSync(this)(e)},Gm=(e,t)=>n=>{const r=d.match(Me.getBrandAnnotation(n.ast),{onNone:()=>[e],onSome:t=>[...t,e]}),i=Me.annotations(n.ast,rp({title:String(n.ast)+` & Brand<${zh.formatUnknown(e)}>`,...t,[Me.BrandAnnotationId]:r}));return Vm(i)},Km=(0,u.dual)((e=>_p(e[0])),((e,t)=>tp(Me.partial(e.ast,t)))),Jm=e=>tp(Me.required(e.ast)),Hm=e=>tp(Me.mutable(e.ast)),Ym=(e,t,n)=>{if(Me.isTypeLiteral(e)&&Me.isTypeLiteral(t)){const r=[...e.propertySignatures];for(const e of t.propertySignatures){const t=e.name,i=r.findIndex((e=>e.name===t));if(-1===i)r.push(e);else{const{isOptional:a,type:s}=r[i];r[i]=new Me.PropertySignature(t,Qm(s,e.type,n.concat(t)),a,!0)}}return new Me.TypeLiteral(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Ih.getSchemaExtendErrorMessage(e,t,n))},Zm=(e,t)=>t.map((t=>new Me.Refinement(t,e.filter,d.match(Me.getMessageAnnotation(e),{onNone:()=>{},onSome:e=>({[Me.MessageAnnotationId]:e})})))),Qm=(e,t,n)=>Me.Union.make(eg([e],[t],n)),Xm=e=>Me.isUnion(e)?e.types:[e],eg=(e,t,n)=>s.flatMap(e,(e=>s.flatMap(t,(t=>{switch(e._tag){case"Union":return eg(e.types,Xm(t),n);case"Suspend":return[new Me.Suspend((()=>Qm(e.f(),t,n)))];case"Refinement":return Zm(e,eg(Xm(e.from),Xm(t),n));case"TypeLiteral":switch(t._tag){case"Union":return eg([e],t.types,n);case"Suspend":return[new Me.Suspend((()=>Qm(e,t.f(),n)))];case"Refinement":return Zm(t,eg([e],Xm(t.from),n));case"TypeLiteral":return[Ym(e,t,n)];case"Transformation":if(Me.isTypeLiteralTransformation(t.transformation))return[new Me.Transformation(Ym(e,t.from,n),Ym(Me.typeAST(e),t.to,n),new Me.TypeLiteralTransformation(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(Me.isTypeLiteralTransformation(e.transformation))switch(t._tag){case"TypeLiteral":return[new Me.Transformation(Ym(e.from,t,n),Ym(e.to,Me.typeAST(t),n),new Me.TypeLiteralTransformation(e.transformation.propertySignatureTransformations))];case"Transformation":if(Me.isTypeLiteralTransformation(t.transformation))return[new Me.Transformation(Ym(e.from,t.from,n),Ym(e.to,t.to,n),new Me.TypeLiteralTransformation(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw new Error(Ih.getSchemaExtendErrorMessage(e,t,n))})))),tg=(0,u.dual)(2,((e,t)=>tp(Qm(e.ast,t.ast,[])))),ng=(0,u.dual)((e=>_p(e[1])),((e,t)=>tp(Me.compose(e.ast,t.ast)))),rg=e=>tp(new Me.Suspend((()=>e().ast))),ig=(e,t,n)=>class extends(tp(n)){static annotations(e){return ig(this.from,this.filter,ip(this.ast,e))}static from=e;static filter=t;static make=(e,t)=>Uw(t)?e:Gh.validateSync(this)(e)},ag=(e,t,n)=>{if(m.isBoolean(e))return e?d.none():d.some(new Gh.Type(t,n));if(m.isString(e))return d.some(new Gh.Type(t,n,e));if(void 0!==e){if("_tag"in e)return d.some(e);const r=new Gh.Type(t,n,e.message);return d.some(s.isNonEmptyReadonlyArray(e.path)?new Gh.Pointer(e.path,n,r):r)}return d.none()},sg=(e,t,n)=>{if(zh.isSingle(e))return ag(e,t,n);if(s.isNonEmptyReadonlyArray(e)){const r=s.filterMap(e,(e=>ag(e,t,n)));if(s.isNonEmptyReadonlyArray(r))return d.some(1===r.length?r[0]:new Gh.Composite(t,n,r))}return d.none()};function og(e,t){return n=>{function r(t,n,r){return sg(e(t,n,r),r,t)}const i=new Me.Refinement(n.ast,r,rp(t));return ig(n,r,i)}}const cg=(e,t,n)=>class extends(tp(n)){static annotations(e){return cg(this.from,this.to,ip(this.ast,e))}static from=e;static to=t},ug=(0,u.dual)((e=>_p(e[0])&&_p(e[1])),((e,t,n)=>cg(e,t,new Me.Transformation(e.ast,t.ast,new Me.FinalTransformation(n.decode,n.encode))))),lg=(0,u.dual)((e=>_p(e[0])&&_p(e[1])),((e,t,n)=>ug(e,t,{decode:e=>Gh.succeed(n.decode(e)),encode:e=>Gh.succeed(n.encode(e))}))),fg=(e,t)=>lg(Tp(e),Tp(t),{decode:()=>t,encode:()=>e});function dg(...e){return em(...e.map((([e,t])=>fg(e,t))))}const hg=(0,u.dual)((e=>_p(e[0])),((e,t,n,r)=>{const i=tg(up(e),Dm({[t]:m.isSymbol(n)?Ap(n):Tp(n)})).ast;return tp(new Me.Transformation(e.ast,r?ip(i,r):i,new Me.TypeLiteralTransformation([new Me.PropertySignatureTransformation(t,t,(()=>d.some(n)),(()=>d.none()))])))})),pg=(0,u.dual)(2,((e,t)=>e.annotations(t))),mg=(0,u.dual)(2,((e,t)=>tp(Me.rename(e.ast,t)))),gg=Symbol.for("@effect/schema/TypeId/Trimmed"),yg=e=>t=>t.pipe(og((e=>e===e.trim()),{typeId:gg,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),bg=jh,Sg=(e,t)=>n=>n.pipe(og((t=>t.length<=e),{typeId:bg,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),wg=Uh,vg=(e,t)=>n=>n.pipe(og((t=>t.length>=e),{typeId:wg,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Eg=Symbol.for("@effect/schema/TypeId/Pattern"),kg=(e,t)=>n=>{const r=e.source;return n.pipe(og((t=>(e.lastIndex=0,e.test(t))),{typeId:{id:Eg,annotation:{regex:e}},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},arbitrary:()=>t=>t.stringMatching(e),...t}))},xg=Symbol.for("@effect/schema/TypeId/StartsWith"),_g=(e,t)=>n=>n.pipe(og((t=>t.startsWith(e)),{typeId:{id:xg,annotation:{startsWith:e}},description:`a string starting with ${JSON.stringify(e)}`,jsonSchema:{pattern:`^${e}`},...t})),Ig=Symbol.for("@effect/schema/TypeId/EndsWith"),Tg=(e,t)=>n=>n.pipe(og((t=>t.endsWith(e)),{typeId:{id:Ig,annotation:{endsWith:e}},description:`a string ending with ${JSON.stringify(e)}`,jsonSchema:{pattern:`^.*${e}$`},...t})),Og=Symbol.for("@effect/schema/TypeId/Includes"),Ag=(e,t)=>n=>n.pipe(og((t=>t.includes(e)),{typeId:{id:Og,annotation:{includes:e}},description:`a string including ${JSON.stringify(e)}`,jsonSchema:{pattern:`.*${e}.*`},...t})),Ng=Symbol.for("@effect/schema/TypeId/Lowercased"),Cg=e=>t=>t.pipe(og((e=>e===e.toLowerCase()),{typeId:Ng,description:"a lowercase string",...e}));class Rg extends(Hp.pipe(Cg({identifier:"Lowercased",title:"Lowercased"}))){static annotations=super.annotations}const Fg=Symbol.for("@effect/schema/TypeId/Uppercased"),Mg=e=>t=>t.pipe(og((e=>e===e.toUpperCase()),{typeId:Fg,description:"an uppercase string",...e}));class Lg extends(Hp.pipe(Mg({identifier:"Uppercased",title:"Uppercased"}))){static annotations=super.annotations}const Pg=Bh,Dg=(e,t)=>n=>{const r=m.isObject(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=m.isObject(e)?Math.max(r,Math.floor(e.max)):r;return r!==i?n.pipe(og((e=>e.length>=r&&e.length<=i),{typeId:Pg,description:`a string at least ${r} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:r,maxLength:i},...t})):n.pipe(og((e=>e.length===r),{typeId:Pg,description:1===r?"a single character":`a string ${r} character(s) long`,jsonSchema:{minLength:r,maxLength:r},...t}))};class Ug extends(Hp.pipe(Dg(1,{identifier:"Char"}))){static annotations=super.annotations}const jg=e=>vg(1,{description:"a non empty string",...e});class Bg extends(lg(Hp,Rg,{decode:e=>e.toLowerCase(),encode:u.identity}).annotations({identifier:"Lowercase"})){static annotations=super.annotations}class qg extends(lg(Hp,Lg,{decode:e=>e.toUpperCase(),encode:u.identity}).annotations({identifier:"Uppercase"})){static annotations=super.annotations}class $g extends(Hp.pipe(yg({identifier:"Trimmed",title:"Trimmed"}))){static annotations=super.annotations}class Wg extends(lg(Hp,$g,{decode:e=>e.trim(),encode:u.identity}).annotations({identifier:"Trim"})){static annotations=super.annotations}const zg=e=>lg(Hp,fm(Hp),{decode:Fe.split(e),encode:s.join(e)}),Vg=Hp.annotations({[Me.IdentifierAnnotationId]:"JsonString",[Me.TitleAnnotationId]:"JsonString",[Me.DescriptionAnnotationId]:"a JSON string"}),Gg=(e,t)=>{if(_p(e))return ng(Gg(t),e);const n=e;return ug(Vg,Vp,{decode:(e,t,r)=>Gh.try({try:()=>JSON.parse(e,n?.reviver),catch:t=>new Gh.Type(r,e,t.message)}),encode:(e,t,r)=>Gh.try({try:()=>JSON.stringify(e,n?.replacer,n?.space),catch:t=>new Gh.Type(r,e,t.message)})})};class Kg extends(Hp.pipe(jg({identifier:"NonEmpty",title:"NonEmpty"}))){static annotations=super.annotations}const Jg=Symbol.for("@effect/schema/TypeId/UUID"),Hg=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class Yg extends(Hp.pipe(kg(Hg,{typeId:Jg,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()}))){static annotations=super.annotations}const Zg=Symbol.for("@effect/schema/TypeId/ULID"),Qg=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class Xg extends(Hp.pipe(kg(Qg,{typeId:Zg,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()}))){static annotations=super.annotations}const ey=Symbol.for("@effect/schema/TypeId/Finite"),ty=e=>t=>t.pipe(og((e=>Number.isFinite(e)),{typeId:ey,description:"a finite number",...e})),ny=Th,ry=(e,t)=>n=>n.pipe(og((t=>t>e),{typeId:ny,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),iy=Oh,ay=(e,t)=>n=>n.pipe(og((t=>t>=e),{typeId:iy,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),sy=Symbol.for("@effect/schema/TypeId/MultipleOf"),oy=(e,t)=>n=>n.pipe(og((t=>0===Ae.remainder(t,e)),{typeId:sy,description:`a number divisible by ${e}`,jsonSchema:{multipleOf:Math.abs(e)},...t})),cy=Ch,uy=e=>t=>t.pipe(og((e=>Number.isSafeInteger(e)),{typeId:cy,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),ly=Ah,fy=(e,t)=>n=>n.pipe(og((t=>t<e),{typeId:ly,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),dy=Nh,hy=(e,t)=>n=>n.pipe(og((t=>t<=e),{typeId:dy,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),py=Rh,my=(e,t,n)=>r=>r.pipe(og((n=>n>=e&&n<=t),{typeId:py,description:`a number between ${e} and ${t}`,jsonSchema:{maximum:t,minimum:e},...n})),gy=Symbol.for("@effect/schema/TypeId/NonNaN"),yy=e=>t=>t.pipe(og((e=>!Number.isNaN(e)),{typeId:gy,description:"a number excluding NaN",...e})),by=e=>ry(0,e),Sy=e=>fy(0,e),wy=e=>hy(0,e),vy=e=>ay(0,e),Ey=(e,t)=>n=>lg(n,n.pipe(up,my(e,t)),{strict:!1,decode:n=>Ae.clamp(n,{minimum:e,maximum:t}),encode:u.identity}),ky=e=>ug(e,Yp,{strict:!1,decode:(e,t,n)=>Gh.fromOption(Ae.parse(e),(()=>new Gh.Type(n,e))),encode:e=>Gh.succeed(String(e))});class xy extends(ky(Hp).annotations({identifier:"NumberFromString"})){static annotations=super.annotations}class _y extends(Yp.pipe(ty({identifier:"Finite",title:"Finite"}))){static annotations=super.annotations}class Iy extends(Yp.pipe(uy({identifier:"Int",title:"Int"}))){static annotations=super.annotations}class Ty extends(Yp.pipe(yy({identifier:"NonNaN",title:"NonNaN"}))){static annotations=super.annotations}class Oy extends(Yp.pipe(by({identifier:"Positive",title:"Positive"}))){static annotations=super.annotations}class Ay extends(Yp.pipe(Sy({identifier:"Negative",title:"Negative"}))){static annotations=super.annotations}class Ny extends(Yp.pipe(wy({identifier:"NonPositive",title:"NonPositive"}))){static annotations=super.annotations}class Cy extends(Yp.pipe(vy({identifier:"NonNegative",title:"NonNegative"}))){static annotations=super.annotations}const Ry=Symbol.for("@effect/schema/TypeId/JsonNumber");class Fy extends(Yp.pipe(og((e=>!Number.isNaN(e)&&Number.isFinite(e)),{typeId:Ry,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}}))){static annotations=super.annotations}class My extends(lg(Zp,Zp,{decode:B.not,encode:B.not})){static annotations=super.annotations}class Ly extends(lg(Hp,Jp,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"})){static annotations=super.annotations}const Py=Fh,Dy=(e,t)=>n=>n.pipe(og((t=>t>e),{typeId:{id:Py,annotation:{min:e}},description:0n===e?"a positive bigint":`a bigint greater than ${e}n`,...t})),Uy=Mh,jy=(e,t)=>n=>n.pipe(og((t=>t>=e),{typeId:{id:Uy,annotation:{min:e}},description:0n===e?"a non-negative bigint":`a bigint greater than or equal to ${e}n`,...t})),By=Lh,qy=(e,t)=>n=>n.pipe(og((t=>t<e),{typeId:{id:By,annotation:{max:e}},description:0n===e?"a negative bigint":`a bigint less than ${e}n`,...t})),$y=Ph,Wy=(e,t)=>n=>n.pipe(og((t=>t<=e),{typeId:{id:$y,annotation:{max:e}},description:0n===e?"a non-positive bigint":`a bigint less than or equal to ${e}n`,...t})),zy=Dh,Vy=(e,t,n)=>r=>r.pipe(og((n=>n>=e&&n<=t),{typeId:{id:zy,annotation:{max:t,min:e}},description:`a bigint between ${e}n and ${t}n`,...n})),Gy=e=>Dy(0n,e),Ky=e=>qy(0n,e),Jy=e=>jy(0n,e),Hy=e=>Wy(0n,e),Yy=(e,t)=>n=>lg(n,n.pipe(up,Vy(e,t)),{strict:!1,decode:n=>j(n,{minimum:e,maximum:t}),encode:u.identity});class Zy extends(ug(Hp,Kp,{decode:(e,t,n)=>Gh.fromOption((e=>{try{return""===e.trim()?d.none():d.some(BigInt(e))}catch(t){return d.none()}})(e),(()=>new Gh.Type(n,e))),encode:e=>Gh.succeed(String(e))}).annotations({identifier:"bigint"})){static annotations=super.annotations}const Qy=Kp.pipe(Gy({identifier:"PositiveBigintFromSelf",title:"PositiveBigintFromSelf"})),Xy=Zy.pipe(Gy({identifier:"PositiveBigint",title:"PositiveBigint"})),eb=Kp.pipe(Ky({identifier:"NegativeBigintFromSelf",title:"NegativeBigintFromSelf"})),tb=Zy.pipe(Ky({identifier:"NegativeBigint",title:"NegativeBigint"})),nb=Kp.pipe(Hy({identifier:"NonPositiveBigintFromSelf",title:"NonPositiveBigintFromSelf"})),rb=Zy.pipe(Hy({identifier:"NonPositiveBigint",title:"NonPositiveBigint"})),ib=Kp.pipe(Jy({identifier:"NonNegativeBigintFromSelf",title:"NonNegativeBigintFromSelf"})),ab=Zy.pipe(Jy({identifier:"NonNegativeBigint",title:"NonNegativeBigint"}));class sb extends(ug(Yp,Kp,{decode:(e,t,n)=>Gh.fromOption((e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return d.none();try{return d.some(BigInt(e))}catch(t){return d.none()}})(e),(()=>new Gh.Type(n,e))),encode:(e,t,n)=>Gh.fromOption((e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?d.none():d.some(Number(e)))(e),(()=>new Gh.Type(n,e)))}).annotations({identifier:"BigintFromNumber"})){static annotations=super.annotations}const ob=e=>t=>e(t).map((e=>Ne.make(e))),cb=e=>(t,n,r)=>Ne.isRedacted(t)?Gh.mapBoth(e(Ne.value(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:Ne.make}):Gh.fail(new Gh.Type(r,t)),ub=e=>Pp([e],{decode:e=>cb(Gh.decodeUnknown(e)),encode:e=>cb(Gh.encodeUnknown(e))},{description:"Redacted(<redacted>)",pretty:()=>()=>"Redacted(<redacted>)",arbitrary:ob,equivalence:Ne.getEquivalence}),lb=e=>lg(e,ub(up(e)),{decode:e=>Ne.make(e),encode:e=>Ne.value(e)});class fb extends(Pp(V.isDuration,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(V.infinity),e.bigUint().map((e=>V.nanos(e))),e.bigUint().map((e=>V.micros(e))),e.maxSafeNat().map((e=>V.millis(e))),e.maxSafeNat().map((e=>V.seconds(e))),e.maxSafeNat().map((e=>V.minutes(e))),e.maxSafeNat().map((e=>V.hours(e))),e.maxSafeNat().map((e=>V.days(e))),e.maxSafeNat().map((e=>V.weeks(e)))),equivalence:()=>V.Equivalence})){static annotations=super.annotations}class db extends(ug(Kp,fb,{decode:e=>Gh.succeed(V.nanos(e)),encode:(e,t,n)=>d.match(V.toNanos(e),{onNone:()=>Gh.fail(new Gh.Type(n,e)),onSome:e=>Gh.succeed(e)})}).annotations({identifier:"DurationFromNanos"})){static annotations=super.annotations}class hb extends(lg(Yp,fb,{decode:e=>V.millis(e),encode:e=>V.toMillis(e)}).annotations({identifier:"DurationFromMillis"})){static annotations=super.annotations}const pb=um(Cy.pipe(ty({[Me.TitleAnnotationId]:"seconds",[Me.DescriptionAnnotationId]:"seconds"})),Cy.pipe(ty({[Me.TitleAnnotationId]:"nanos",[Me.DescriptionAnnotationId]:"nanos"})));class mb extends(lg(pb,fb,{decode:([e,t])=>V.nanos(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>V.toHrTime(e)}).annotations({identifier:"Duration"})){static annotations=super.annotations}const gb=(e,t)=>n=>lg(n,n.pipe(up,Ib(e,t)),{strict:!1,decode:n=>V.clamp(n,{minimum:e,maximum:t}),encode:u.identity}),yb=Symbol.for("@effect/schema/TypeId/LessThanDuration"),bb=(e,t)=>n=>n.pipe(og((t=>V.lessThan(t,e)),{typeId:{id:yb,annotation:{max:e}},description:`a Duration less than ${V.decode(e)}`,...t})),Sb=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToDuration"),wb=(e,t)=>n=>n.pipe(og((t=>V.lessThanOrEqualTo(t,e)),{typeId:{id:yb,annotation:{max:e}},description:`a Duration less than or equal to ${V.decode(e)}`,...t})),vb=Symbol.for("@effect/schema/TypeId/GreaterThanDuration"),Eb=(e,t)=>n=>n.pipe(og((t=>V.greaterThan(t,e)),{typeId:{id:vb,annotation:{min:e}},description:`a Duration greater than ${V.decode(e)}`,...t})),kb=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToDuration"),xb=(e,t)=>n=>n.pipe(og((t=>V.greaterThanOrEqualTo(t,e)),{typeId:{id:kb,annotation:{min:e}},description:`a Duration greater than or equal to ${V.decode(e)}`,...t})),_b=Symbol.for("@effect/schema/TypeId/BetweenDuration"),Ib=(e,t,n)=>r=>r.pipe(og((n=>V.between(n,{minimum:e,maximum:t})),{typeId:{id:_b,annotation:{maximum:t,minimum:e}},description:`a Duration between ${V.decode(e)} and ${V.decode(t)}`,...n})),Tb=Pp(m.isUint8Array,{identifier:"Uint8ArrayFromSelf",pretty:()=>e=>`new Uint8Array(${JSON.stringify(Array.from(e))})`,arbitrary:()=>e=>e.uint8Array(),equivalence:()=>s.getEquivalence(o.equals)}),Ob=lg(fm(Yp.pipe(my(0,255,{title:"8-bit unsigned integer",description:"a 8-bit unsigned integer"}))).annotations({description:"an array of 8-bit unsigned integers"}),Tb,{decode:e=>Uint8Array.from(e),encode:e=>Array.from(e)}).annotations({identifier:"Uint8Array"}),Ab=(e,t,n)=>ug(Hp,Tb,{decode:(e,n,r)=>G.mapLeft(t(e),(t=>new Gh.Type(r,e,t.message))),encode:e=>Gh.succeed(n(e))}).annotations({identifier:e}),Nb=Ab("Base64",we,Se),Cb=Ab("Base64Url",Ee,ve),Rb=Ab("Hex",xe,ke),Fb=qh,Mb=(e,t)=>n=>{const r=Math.floor(e);if(r<1)throw new Error(Ih.getInvalidArgumentErrorMessage(`Expected an integer greater than or equal to 1, actual ${e}`));return n.pipe(og((e=>e.length>=r),{typeId:Fb,description:`an array of at least ${r} items`,jsonSchema:{minItems:r},[Me.StableFilterAnnotationId]:!0,...t}))},Lb=$h,Pb=(e,t)=>n=>n.pipe(og((t=>t.length<=e),{typeId:Lb,description:`an array of at most ${e} items`,jsonSchema:{maxItems:e},[Me.StableFilterAnnotationId]:!0,...t})),Db=Wh,Ub=(e,t)=>n=>n.pipe(og((t=>t.length===e),{typeId:Db,description:`an array of exactly ${e} item(s)`,jsonSchema:{minItems:e,maxItems:e},[Me.StableFilterAnnotationId]:!0,...t})),jb=e=>tp(Me.getNumberIndexedAccess(e.ast)),Bb=e=>lg(e,tS(jb(up(e))),{decode:s.head,encode:d.match({onNone:()=>[],onSome:s.of})}),qb=(0,u.dual)((e=>_p(e[0])),((e,t)=>ug(e,jb(up(e)),{decode:(e,n,r)=>e.length>0?Gh.succeed(e[0]):t?Gh.succeed(t()):Gh.fail(new Gh.Type(r,e)),encode:e=>Gh.succeed(s.of(e))}))),$b=Symbol.for("@effect/schema/TypeId/ValidDate"),Wb=e=>t=>t.pipe(og((e=>!Number.isNaN(e.getTime())),{typeId:$b,description:"a valid Date",...e}));class zb extends(Pp(m.isDate,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>c.Date})){static annotations=super.annotations}class Vb extends(zb.pipe(Wb({identifier:"ValidDateFromSelf",description:"a valid Date instance"}))){static annotations=super.annotations}class Gb extends(lg(Hp,zb,{decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"})){static annotations=super.annotations}class Kb extends(Gb.pipe(Wb({identifier:"Date"}))){static annotations=super.annotations}class Jb extends(lg(Yp,zb,{decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"})){static annotations=super.annotations}const Hb=Dm({_tag:Tp("None")}).annotations({description:"NoneEncoded"}),Yb=e=>em(Hb,(e=>Dm({_tag:Tp("Some"),value:e}).annotations({description:`SomeEncoded<${sp(e)}>`}))(e)).annotations({description:`OptionEncoded<${sp(e)}>`}),Zb=e=>"None"===e._tag?d.none():d.some(e.value),Qb=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Zb),Xb=e=>d.match({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),eS=e=>(t,n,r)=>d.isOption(t)?d.isNone(t)?Gh.succeed(d.none()):Gh.map(e(t.value,n),d.some):Gh.fail(new Gh.Type(r,t)),tS=e=>Pp([e],{decode:e=>eS(Gh.decodeUnknown(e)),encode:e=>eS(Gh.encodeUnknown(e))},{description:`Option<${sp(e)}>`,pretty:Xb,arbitrary:Qb,equivalence:d.getEquivalence}),nS={_tag:"None"},rS=e=>({_tag:"Some",value:e}),iS=e=>{const t=ap(e);return lg(Yb(t),tS(up(t)),{decode:Zb,encode:d.match({onNone:()=>nS,onSome:rS})})},aS=e=>{const t=ap(e);return lg(tm(t),tS(up(t)),{decode:d.fromNullable,encode:d.getOrNull})},sS=(e,t)=>{const n=ap(e);return lg(rm(n),tS(up(n)),{decode:d.fromNullable,encode:null===t?d.getOrNull:d.getOrUndefined})},oS=e=>{const t=ap(e);return lg(nm(t),tS(up(t)),{decode:d.fromNullable,encode:d.getOrUndefined})},cS=e=>Dm({_tag:Tp("Right"),right:e}).annotations({description:`RightEncoded<${sp(e)}>`}),uS=e=>Dm({_tag:Tp("Left"),left:e}).annotations({description:`LeftEncoded<${sp(e)}>`}),lS=e=>"Left"===e._tag?G.left(e.left):G.right(e.right),fS=(e,t)=>n=>n.oneof(n.record({_tag:n.constant("Left"),left:t(n)}),n.record({_tag:n.constant("Right"),right:e(n)})).map(lS),dS=(e,t)=>G.match({onLeft:e=>`left(${t(e)})`,onRight:t=>`right(${e(t)})`}),hS=(e,t)=>(n,r,i)=>G.isEither(n)?G.match(n,{onLeft:e=>Gh.map(t(e,r),G.left),onRight:t=>Gh.map(e(t,r),G.right)}):Gh.fail(new Gh.Type(i,n)),pS=({left:e,right:t})=>Pp([t,e],{decode:(e,t)=>hS(Gh.decodeUnknown(e),Gh.decodeUnknown(t)),encode:(e,t)=>hS(Gh.encodeUnknown(e),Gh.encodeUnknown(t))},{description:`Either<${sp(t)}, ${sp(e)}>`,pretty:dS,arbitrary:fS,equivalence:(e,t)=>G.getEquivalence({left:t,right:e})}),mS=e=>({_tag:"Left",left:e}),gS=e=>({_tag:"Right",right:e}),yS=({left:e,right:t})=>{const n=ap(t),r=ap(e);return lg(((e,t)=>em(cS(e),uS(t)).annotations({description:`EitherEncoded<${sp(t)}, ${sp(e)}>`}))(n,r),pS({left:up(r),right:up(n)}),{decode:lS,encode:G.match({onLeft:mS,onRight:gS})})},bS=({left:e,right:t})=>{const n=ap(t),r=ap(e),i=up(n),a=up(r),s=lg(n,cS(i),{decode:gS,encode:e=>e.right}),o=lg(r,uS(a),{decode:mS,encode:e=>e.left});return lg(em(s,o),pS({left:a,right:i}),{decode:e=>"Left"===e._tag?G.left(e.left):G.right(e.right),encode:G.match({onLeft:mS,onRight:gS})})},SS=(e,t)=>n=>n.array(n.tuple(e(n),t(n))).map((e=>new Map(e))),wS=(e,t)=>n=>`new Map([${Array.from(n.entries()).map((([n,r])=>`[${e(n)}, ${t(r)}]`)).join(", ")}])`,vS=(e,t)=>{const n=s.getEquivalence(c.make((([n,r],[i,a])=>e(n,i)&&t(r,a))));return c.make(((e,t)=>n(Array.from(e.entries()),Array.from(t.entries()))))},ES=e=>(t,n,r)=>m.isMap(t)?Gh.mapBoth(e(Array.from(t.entries()),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:e=>new Map(e)}):Gh.fail(new Gh.Type(r,t)),kS=(e,t,n)=>Pp([e,t],{decode:(e,t)=>ES(Gh.decodeUnknown(fm(um(e,t)))),encode:(e,t)=>ES(Gh.encodeUnknown(fm(um(e,t))))},{description:n,pretty:wS,arbitrary:SS,equivalence:vS}),xS=({key:e,value:t})=>kS(e,t,`ReadonlyMap<${sp(e)}, ${sp(t)}>`),_S=({key:e,value:t})=>kS(e,t,`Map<${sp(e)}, ${sp(t)}>`),IS=({key:e,value:t})=>{const n=ap(e),r=ap(t);return lg(fm(um(n,r)),xS({key:up(n),value:up(r)}),{decode:e=>new Map(e),encode:e=>Array.from(e.entries())})},TS=({key:e,value:t})=>{const n=ap(e),r=ap(t);return lg(fm(um(n,r)),_S({key:up(n),value:up(r)}),{decode:e=>new Map(e),encode:e=>Array.from(e.entries())})},OS=e=>t=>t.array(e(t)).map((e=>new Set(e))),AS=e=>t=>`new Set([${Array.from(t.values()).map((t=>e(t))).join(", ")}])`,NS=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e.values()),Array.from(n.values()))))},CS=e=>(t,n,r)=>m.isSet(t)?Gh.mapBoth(e(Array.from(t.values()),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:e=>new Set(e)}):Gh.fail(new Gh.Type(r,t)),RS=(e,t)=>Pp([e],{decode:e=>CS(Gh.decodeUnknown(fm(e))),encode:e=>CS(Gh.encodeUnknown(fm(e)))},{description:t,pretty:AS,arbitrary:OS,equivalence:NS}),FS=e=>RS(e,`ReadonlySet<${sp(e)}>`),MS=e=>RS(e,`Set<${sp(e)}>`),LS=e=>{const t=ap(e);return lg(fm(t),FS(up(t)),{decode:e=>new Set(e),encode:e=>Array.from(e)})},PS=e=>{const t=ap(e);return lg(fm(t),MS(up(t)),{decode:e=>new Set(e),encode:e=>Array.from(e)})},DS=()=>e=>`BigDecimal(${D(x(e))})`,US=()=>e=>e.tuple(e.bigInt(),e.integer()).map((([e,t])=>S(e,t)));class jS extends(Pp(b,{identifier:"BigDecimalFromSelf",pretty:DS,arbitrary:US,equivalence:()=>M})){static annotations=super.annotations}class BS extends(ug(Hp,jS,{decode:(e,t,n)=>P(e).pipe(d.match({onNone:()=>Gh.fail(new Gh.Type(n,e)),onSome:e=>Gh.succeed(x(e))})),encode:e=>Gh.succeed(D(x(e)))}).annotations({identifier:"BigDecimal"})){static annotations=super.annotations}class qS extends(ug(Yp,jS,{decode:e=>Gh.succeed((e=>{const[t,n=""]=`${e}`.split(".");return S(BigInt(`${t}${n}`),n.length)})(e)),encode:e=>Gh.succeed(Number(D(e)))}).annotations({identifier:"BigDecimalFromNumber"})){static annotations=super.annotations}const $S=Symbol.for("@effect/schema/TypeId/GreaterThanBigDecimal"),WS=(e,t)=>n=>n.pipe(og((t=>A(t,e)),{typeId:{id:$S,annotation:{min:e}},description:`a BigDecimal greater than ${D(e)}`,...t})),zS=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToBigDecimal"),VS=(e,t)=>n=>n.pipe(og((t=>N(t,e)),{typeId:{id:zS,annotation:{min:e}},description:`a BigDecimal greater than or equal to ${D(e)}`,...t})),GS=Symbol.for("@effect/schema/TypeId/LessThanBigDecimal"),KS=(e,t)=>n=>n.pipe(og((t=>T(t,e)),{typeId:{id:GS,annotation:{max:e}},description:`a BigDecimal less than ${D(e)}`,...t})),JS=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToBigDecimal"),HS=(e,t)=>n=>n.pipe(og((t=>O(t,e)),{typeId:{id:JS,annotation:{max:e}},description:`a BigDecimal less than or equal to ${D(e)}`,...t})),YS=Symbol.for("@effect/schema/TypeId/PositiveBigDecimal"),ZS=e=>t=>t.pipe(og((e=>e.value>v),{typeId:{id:YS,annotation:{}},description:"a positive BigDecimal",...e})),QS=jS.pipe(ZS({identifier:"PositiveBigDecimalFromSelf",title:"PositiveBigDecimalFromSelf"})),XS=Symbol.for("@effect/schema/TypeId/NonNegativeBigDecimal"),ew=e=>t=>t.pipe(og((e=>e.value>=0n),{typeId:{id:XS,annotation:{}},description:"a non-negative BigDecimal",...e})),tw=jS.pipe(ew({identifier:"NonNegativeBigDecimalFromSelf",title:"NonNegativeBigDecimalFromSelf"})),nw=Symbol.for("@effect/schema/TypeId/NegativeBigDecimal"),rw=e=>t=>t.pipe(og((e=>e.value<v),{typeId:{id:nw,annotation:{}},description:"a negative BigDecimal",...e})),iw=jS.pipe(rw({identifier:"NegativeBigDecimalFromSelf",title:"NegativeBigDecimalFromSelf"})),aw=Symbol.for("@effect/schema/TypeId/NonPositiveBigDecimal"),sw=e=>t=>t.pipe(og((e=>e.value<=0n),{typeId:{id:aw,annotation:{}},description:"a non-positive BigDecimal",...e})),ow=jS.pipe(sw({identifier:"NonPositiveBigDecimalFromSelf",title:"NonPositiveBigDecimalFromSelf"})),cw=Symbol.for("@effect/schema/TypeId/BetweenBigDecimal"),uw=(e,t,n)=>r=>r.pipe(og((n=>C(n,{minimum:e,maximum:t})),{typeId:{id:cw,annotation:{maximum:t,minimum:e}},description:`a BigDecimal between ${D(e)} and ${D(t)}`,...n})),lw=(e,t)=>n=>lg(n,n.pipe(up,uw(e,t)),{strict:!1,decode:n=>R(n,{minimum:e,maximum:t}),encode:u.identity}),fw=e=>t=>t.array(e(t)).map($.fromIterable),dw=e=>t=>`Chunk(${$.toReadonlyArray(t).map(e).join(", ")})`,hw=e=>(t,n,r)=>$.isChunk(t)?$.isEmpty(t)?Gh.succeed($.empty()):Gh.mapBoth(e($.toReadonlyArray(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:$.fromIterable}):Gh.fail(new Gh.Type(r,t)),pw=e=>Pp([e],{decode:e=>hw(Gh.decodeUnknown(fm(e))),encode:e=>hw(Gh.encodeUnknown(fm(e)))},{description:`Chunk<${sp(e)}>`,pretty:dw,arbitrary:fw,equivalence:$.getEquivalence}),mw=e=>{const t=ap(e);return lg(fm(t),pw(up(t)),{decode:e=>0===e.length?$.empty():$.fromIterable(e),encode:$.toReadonlyArray})},gw=e=>t=>Sa(e(t),{minLength:1}).map((e=>$.unsafeFromNonEmptyArray(e))),yw=e=>t=>`NonEmptyChunk(${$.toReadonlyArray(t).map(e).join(", ")})`,bw=e=>(t,n,r)=>$.isChunk(t)&&$.isNonEmpty(t)?Gh.mapBoth(e($.toReadonlyArray(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:$.unsafeFromNonEmptyArray}):Gh.fail(new Gh.Type(r,t)),Sw=e=>Pp([e],{decode:e=>bw(Gh.decodeUnknown(hm(e))),encode:e=>bw(Gh.encodeUnknown(hm(e)))},{description:`NonEmptyChunk<${sp(e)}>`,pretty:yw,arbitrary:gw,equivalence:$.getEquivalence}),ww=e=>{const t=ap(e);return lg(hm(t),Sw(up(t)),{decode:$.unsafeFromNonEmptyArray,encode:$.toReadonlyArray})},vw=e=>Array.isArray(e)?ae.array(e):ae.struct(e),Ew=e=>t=>e(t).map(vw),kw=e=>t=>`Data(${e(t)})`,xw=e=>(t,n,r)=>o.isEqual(t)?Gh.mapBoth(e(t,n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:vw}):Gh.fail(new Gh.Type(r,t)),_w=e=>Pp([e],{decode:e=>xw(Gh.decodeUnknown(e)),encode:e=>xw(Gh.encodeUnknown(e))},{description:`Data<${sp(e)}>`,pretty:kw,arbitrary:Ew}),Iw=e=>lg(e,_w(up(e)),{strict:!1,decode:vw,encode:e=>Array.isArray(e)?Array.from(e):Object.assign({},e)}),Tw=e=>zh.ownKeys(e).every((t=>{return n=e[t],_p(n)||Mm(n);var n})),Ow=e=>"fields"in e?e.fields:Ow(e.from),Aw=e=>Tw(e)?Dm(e):_p(e)?e:Dm(Ow(e)),Nw=e=>Tw(e)?e:Ow(e),Cw=e=>(t,n)=>jw({kind:"Class",identifier:e,schema:Aw(t),fields:Nw(t),Base:ae.Class,annotations:n}),Rw=e=>_m(xm(Tp(e)),(()=>e)),Fw=e=>(t,n,r)=>{const i=Nw(n),a=Aw(n),s={_tag:Rw(t)},o=Pw(s,i);return class extends(jw({kind:"TaggedClass",identifier:e??t,schema:tg(a,Dm(s)),fields:o,Base:ae.Class,annotations:r})){static _tag=t}},Mw=e=>(t,n,r)=>{class i extends ae.Error{}i.prototype.name=t;const a=Nw(n),s=Aw(n),o={_tag:Rw(t)},c=Pw(o,a);return class extends(jw({kind:"TaggedError",identifier:e??t,schema:tg(s,Dm(o)),fields:c,Base:i,annotations:r,toStringOverride(e){if(m.isString(e.message)&&e.message.length>0){let t=`${e._tag}: ${e.message}`;return m.isString(e.stack)&&(t=`${t}\n${e.stack.split("\n").slice(1).join("\n")}`),t}}})){static _tag=t}},Lw=e=>(t,n,r,i,a)=>{class s extends Ce.Class{get[Jh](){return this.constructor}get[Hh](){return{Failure:n,Success:r}}}const o=Pw({_tag:Rw(t)},i);return class extends(jw({kind:"TaggedRequest",identifier:e??t,schema:Dm(o),fields:o,Base:s,annotations:a})){static _tag=t}},Pw=(e,t)=>{const n={...e};for(const r of zh.ownKeys(t)){if(r in e)throw new Error(Ih.getASTDuplicatePropertySignatureErrorMessage(r));n[r]=t[r]}return n},Dw=(e,t)=>{const n=Me.getTitleAnnotation(e.ast);return d.isNone(n)?e.annotations({title:t}):e},Uw=e=>m.isBoolean(e)?e:e?.disableValidation??!1,jw=({Base:e,annotations:t,fields:n,identifier:r,kind:i,schema:a,toStringOverride:s})=>{const o=Symbol.for(`@effect/schema/${i}/${r}`),c=Dw(a,`${r} (Constructor)`),l=Dw(a,`${r} (Encoded side)`),f=Dw(up(a),`${r} (Type side)`);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=Lm(n,e),Uw(t)||(e=Gh.validateSync(c)(e)),super(e,!0)}static[ep]=np;static get ast(){const e=Pp([f],{decode:()=>(e,t,n)=>{return e instanceof this||(r=e,m.hasProperty(r,o)&&Gh.is(f)(r))?Gh.succeed(e):Gh.fail(new Gh.Type(n,e));var r},encode:()=>(e,t)=>e instanceof this?Gh.succeed(e):Gh.map(Gh.encodeUnknown(f)(e,t),(e=>new this(e,!0)))},{identifier:r,title:r,description:`an instance of ${r}`,pretty:e=>t=>`${r}(${e(t)})`,arbitrary:e=>t=>e(t).map((e=>new this(e))),equivalence:u.identity,[Me.SurrogateAnnotationId]:f.ast,...t});return lg(l,e,{decode:e=>new this(e,!0),encode:u.identity}).annotations({[Me.SurrogateAnnotationId]:a.ast}).ast}static pipe(){return(0,p.pipeArguments)(this,arguments)}static annotations(e){return tp(this.ast).annotations(e)}static toString(){return`(${String(l)} <-> ${r})`}static fields={...n};static identifier=r;static extend(e){return(t,r)=>{const s=Nw(t),o=Aw(t),c=Pw(n,s);return jw({kind:i,identifier:e,schema:tg(a,o),fields:c,Base:this,annotations:r})}}static transformOrFail(e){return(t,r,s)=>{const o=Pw(n,t);return jw({kind:i,identifier:e,schema:ug(a,up(Dm(o)),r),fields:o,Base:this,annotations:s})}}static transformOrFailFrom(e){return(t,r,s)=>{const o=Pw(n,t);return jw({kind:i,identifier:e,schema:ug(op(a),Dm(o),r),fields:o,Base:this,annotations:s})}}get[o](){return o}toString(){if(void 0!==s){const e=s(this);if(void 0!==e)return e}return`${r}({ ${zh.ownKeys(n).map((e=>`${zh.formatPropertyKey(e)}: ${zh.formatUnknown(this[e])}`)).join(", ")} })`}}},Bw=em(Dm({_tag:Tp("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Dm({_tag:Tp("Runtime"),id:Iy.annotations({title:"id",description:"id"}),startTimeMillis:Iy.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Dm({_tag:Tp("Composite"),left:rg((()=>Bw)),right:rg((()=>Bw))}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),qw=e=>e.letrec((t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))}))).FiberId.map(zw),$w=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${$w(e.right)}, ${$w(e.left)})`}};class Ww extends(Pp(Ie.isFiberId,{identifier:"FiberIdFromSelf",pretty:()=>$w,arbitrary:()=>qw})){static annotations=super.annotations}const zw=e=>{switch(e._tag){case"None":return Ie.none;case"Runtime":return Ie.runtime(e.id,e.startTimeMillis);case"Composite":return Ie.composite(zw(e.left),zw(e.right))}},Vw=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:Vw(e.left),right:Vw(e.right)}}};class Gw extends(lg(Bw,Ww,{decode:zw,encode:Vw}).annotations({identifier:"FiberId"})){static annotations=super.annotations}const Kw=Dm({_tag:Tp("Empty")}),Jw=Dm({_tag:Tp("Interrupt"),fiberId:Bw}),Hw=(e,t)=>{const n=rg((()=>r)),r=em(Kw,(e=>Dm({_tag:Tp("Fail"),error:e}))(e),(e=>Dm({_tag:Tp("Die"),defect:e}))(t),Jw,(e=>Dm({_tag:Tp("Sequential"),left:e,right:e}))(n),(e=>Dm({_tag:Tp("Parallel"),left:e,right:e}))(n)).annotations({description:`CauseEncoded<${sp(e)}>`});return r},Yw=(e,t)=>n=>n.letrec((r=>({Empty:n.record({_tag:n.constant("Empty")}),Fail:n.record({_tag:n.constant("Fail"),error:e(n)}),Die:n.record({_tag:n.constant("Die"),defect:t(n)}),Interrupt:n.record({_tag:n.constant("Interrupt"),fiberId:qw(n)}),Sequential:n.record({_tag:n.constant("Sequential"),left:r("Cause"),right:r("Cause")}),Parallel:n.record({_tag:n.constant("Parallel"),left:r("Cause"),right:r("Cause")}),Cause:n.oneof(r("Empty"),r("Fail"),r("Die"),r("Interrupt"),r("Sequential"),r("Parallel"))}))).Cause.map(ev),Zw=e=>t=>{const n=t=>{switch(t._tag){case"Empty":return"Cause.empty";case"Fail":return`Cause.fail(${e(t.error)})`;case"Die":return`Cause.die(${q.pretty(t)})`;case"Interrupt":return`Cause.interrupt(${$w(t.fiberId)})`;case"Sequential":return`Cause.sequential(${n(t.left)}, ${n(t.right)})`;case"Parallel":return`Cause.parallel(${n(t.left)}, ${n(t.right)})`}};return n(t)},Qw=e=>(t,n,r)=>q.isCause(t)?Gh.mapBoth(e(tv(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:ev}):Gh.fail(new Gh.Type(r,t)),Xw=({defect:e=Vp,error:t})=>Pp([t,e],{decode:(e,t)=>Qw(Gh.decodeUnknown(Hw(e,t))),encode:(e,t)=>Qw(Gh.encodeUnknown(Hw(e,t)))},{description:`Cause<${sp(t)}>`,pretty:Zw,arbitrary:Yw});function ev(e){switch(e._tag){case"Empty":return q.empty;case"Fail":return q.fail(e.error);case"Die":return q.die(e.defect);case"Interrupt":return q.interrupt(zw(e.fiberId));case"Sequential":return q.sequential(ev(e.left),ev(e.right));case"Parallel":return q.parallel(ev(e.left),ev(e.right))}}function tv(e){switch(e._tag){case"Empty":return{_tag:"Empty"};case"Fail":return{_tag:"Fail",error:e.error};case"Die":return{_tag:"Die",defect:e.defect};case"Interrupt":return{_tag:"Interrupt",fiberId:e.fiberId};case"Sequential":return{_tag:"Sequential",left:tv(e.left),right:tv(e.right)};case"Parallel":return{_tag:"Parallel",left:tv(e.left),right:tv(e.right)}}}const nv=lg(Vp,Vp,{decode:e=>{if(m.isObject(e)&&"message"in e&&"string"===typeof e.message){const t=new Error(e.message,{cause:e});return"name"in e&&"string"===typeof e.name&&(t.name=e.name),t.stack="stack"in e&&"string"===typeof e.stack?e.stack:"",t}return String(e)},encode:e=>e instanceof Error?{name:e.name,message:e.message}:String(e)}),rv=({defect:e=nv,error:t})=>{const n=ap(t);return lg(Hw(n,e),Xw({error:up(n),defect:up(e)}),{decode:ev,encode:tv})},iv=(e,t,n)=>em(((e,t)=>Dm({_tag:Tp("Failure"),cause:Hw(e,t)}).annotations({description:`FailureEncoded<${sp(e)}>`}))(t,n),(e=>Dm({_tag:Tp("Success"),value:e}).annotations({description:`SuccessEncoded<${sp(e)}>`}))(e)).annotations({description:`ExitEncoded<${sp(e)}, ${sp(t)}>`}),av=e=>{switch(e._tag){case"Failure":return _e.failCause(ev(e.cause));case"Success":return _e.succeed(e.value)}},sv=(e,t,n)=>r=>r.oneof(r.record({_tag:r.constant("Failure"),cause:Yw(t,n)(r)}),r.record({_tag:r.constant("Success"),value:e(r)})).map(av),ov=(e,t)=>n=>"Failure"===n._tag?`Exit.failCause(${Zw(t)(n.cause)})`:`Exit.succeed(${e(n.value)})`,cv=(e,t)=>(n,r,i)=>_e.isExit(n)?_e.match(n,{onFailure:e=>Gh.map(t(e,r),_e.failCause),onSuccess:t=>Gh.map(e(t,r),_e.succeed)}):Gh.fail(new Gh.Type(i,n)),uv=({defect:e=Vp,failure:t,success:n})=>Pp([n,t,e],{decode:(e,t,n)=>cv(Gh.decodeUnknown(e),Gh.decodeUnknown(Xw({error:t,defect:n}))),encode:(e,t,n)=>cv(Gh.encodeUnknown(e),Gh.encodeUnknown(Xw({error:t,defect:n})))},{description:`Exit<${sp(n)}, ${sp(t)}>`,pretty:ov,arbitrary:sv}),lv=({defect:e=nv,failure:t,success:n})=>{const r=ap(n),i=ap(t);return lg(iv(r,i,e),uv({failure:up(i),success:up(r),defect:up(e)}),{decode:av,encode:e=>"Failure"===e._tag?{_tag:"Failure",cause:e.cause}:{_tag:"Success",value:e.value}})},fv=e=>t=>t.array(e(t)).map((e=>K.fromIterable(e))),dv=e=>t=>`HashSet(${Array.from(t).map((t=>e(t))).join(", ")})`,hv=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e),Array.from(n))))},pv=e=>(t,n,r)=>K.isHashSet(t)?Gh.mapBoth(e(Array.from(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:K.fromIterable}):Gh.fail(new Gh.Type(r,t)),mv=e=>Pp([e],{decode:e=>pv(Gh.decodeUnknown(fm(e))),encode:e=>pv(Gh.encodeUnknown(fm(e)))},{description:`HashSet<${sp(e)}>`,pretty:dv,arbitrary:fv,equivalence:hv}),gv=e=>{const t=ap(e);return lg(fm(t),mv(up(t)),{decode:e=>K.fromIterable(e),encode:e=>Array.from(e)})},yv=(e,t)=>n=>n.array(n.tuple(e(n),t(n))).map((e=>Te.fromIterable(e))),bv=(e,t)=>n=>`HashMap([${Array.from(n).map((([n,r])=>`[${e(n)}, ${t(r)}]`)).join(", ")}])`,Sv=(e,t)=>{const n=s.getEquivalence(c.make((([n,r],[i,a])=>e(n,i)&&t(r,a))));return c.make(((e,t)=>n(Array.from(e),Array.from(t))))},wv=e=>(t,n,r)=>Te.isHashMap(t)?Gh.mapBoth(e(Array.from(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:Te.fromIterable}):Gh.fail(new Gh.Type(r,t)),vv=({key:e,value:t})=>Pp([e,t],{decode:(e,t)=>wv(Gh.decodeUnknown(fm(um(e,t)))),encode:(e,t)=>wv(Gh.encodeUnknown(fm(um(e,t))))},{description:`HashMap<${sp(e)}, ${sp(t)}>`,pretty:bv,arbitrary:yv,equivalence:Sv}),Ev=({key:e,value:t})=>{const n=ap(e),r=ap(t);return lg(fm(um(n,r)),vv({key:up(n),value:up(r)}),{decode:e=>Te.fromIterable(e),encode:e=>Array.from(e)})},kv=e=>t=>t.array(e(t)).map((e=>Oe.fromIterable(e))),xv=e=>t=>`List(${Array.from(t).map((t=>e(t))).join(", ")})`,_v=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e),Array.from(n))))},Iv=e=>(t,n,r)=>Oe.isList(t)?Gh.mapBoth(e(Array.from(t),n),{onFailure:e=>new Gh.Composite(r,t,e),onSuccess:Oe.fromIterable}):Gh.fail(new Gh.Type(r,t)),Tv=e=>Pp([e],{decode:e=>Iv(Gh.decodeUnknown(fm(e))),encode:e=>Iv(Gh.encodeUnknown(fm(e)))},{description:`List<${sp(e)}>`,pretty:xv,arbitrary:kv,equivalence:_v}),Ov=e=>{const t=ap(e);return lg(fm(t),Tv(up(t)),{decode:e=>Oe.fromIterable(e),encode:e=>Array.from(e)})},Av=e=>t=>`new SortedSet([${Array.from(Re.values(t)).map((t=>e(t))).join(", ")}])`,Nv=(e,t)=>(n,r,i)=>Re.isSortedSet(n)?Gh.mapBoth(e(Array.from(Re.values(n)),r),{onFailure:e=>new Gh.Composite(i,n,e),onSuccess:e=>Re.fromIterable(e,t)}):Gh.fail(new Gh.Type(i,n)),Cv=(e,t,n)=>Pp([e],{decode:e=>Nv(Gh.decodeUnknown(fm(e)),t),encode:e=>Nv(Gh.encodeUnknown(fm(e)),n)},{description:`SortedSet<${sp(e)}>`,pretty:Av,arbitrary:e=>{return n=e,r=t,e=>e.array(n(e)).map((e=>Re.fromIterable(e,r)));var n,r},equivalence:()=>Re.getEquivalence()}),Rv=(e,t)=>{const n=ap(e),r=up(n);return lg(fm(n),Cv(r,t,t),{decode:e=>Re.fromIterable(e,t),encode:e=>Array.from(Re.values(e))})};class Fv extends(lg(Vp,Zp,{decode:m.isTruthy,encode:u.identity}).annotations({identifier:"BooleanFromUnknown"})){static annotations=super.annotations}const Mv=(e,t)=>{const n=wp(t);return ie(e).pipe(re((e=>n(e).pipe(G.mapLeft((e=>z([],Xh.formatErrorSync(e))))))))}},181107:(e,t,n)=>{n.r(t),n.d(t,{formatError:()=>f,formatErrorSync:()=>d,formatForbiddenMessage:()=>E,formatIssue:()=>u,formatIssueSync:()=>l,formatMissingMessage:()=>x,formatTypeMessage:()=>w,formatUnexpectedMessage:()=>k,getMessage:()=>b});var r=n(477900),i=n(977948),a=n(856572),s=n(728789),o=n(515407);const c=(e,t=[])=>({value:e,forest:t}),u=e=>r.map(I(e),(e=>h(e))),l=e=>r.runSync(u(e)),f=e=>u(e.issue),d=e=>l(e.issue),h=e=>e.value+p("\n",e.forest),p=(e,t)=>{let n="";const r=t.length;let i;for(let a=0;a<r;a++){i=t[a];const s=a===r-1;n+=e+(s?"\u2514":"\u251c")+"\u2500 "+i.value,n+=p(e+(r>1&&!s?"\u2502  ":"   "),i.forest)}return n},m=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},g=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},y=e=>"ast"in e?i.some(e.ast):i.none(),b=e=>{const t=(e=>y(e).pipe(i.flatMap(s.getMessageAnnotation),r.flatMap((t=>{const n=t(e);return a.isString(n)?r.succeed({message:n,override:!1}):r.isEffect(n)?r.map(n,(e=>({message:e,override:!1}))):a.isString(n.message)?r.succeed({message:n.message,override:n.override}):r.map(n.message,(e=>({message:e,override:n.override})))}))))(e);return(e=>{switch(e._tag){case"Refinement":if("From"===e.kind)return b(e.issue);break;case"Transformation":return b(e.issue)}return i.none()})(e).pipe(r.flatMap((e=>r.map(t,(t=>t.override?t.message:e)))),r.catchAll((()=>r.flatMap(t,(t=>!t.override&&("Refinement"===e._tag&&"Predicate"!==e.kind||"Transformation"===e._tag&&"Transformation"!==e.kind)?i.none():r.succeed(t.message))))))},S=e=>y(e).pipe(i.flatMap(s.getParseIssueTitleAnnotation),i.filterMap((t=>i.fromNullable(t(e))))),w=e=>b(e).pipe(r.orElse((()=>S(e))),r.catchAll((()=>r.succeed(e.message??`Expected ${String(e.ast)}, actual ${o.formatUnknown(e.actual)}`)))),v=e=>i.getOrElse(S(e),(()=>String(e.ast))),E=e=>e.message??"is forbidden",k=e=>e.message??"is unexpected",x=e=>s.getMissingMessageAnnotation(e.ast).pipe(r.flatMap((e=>{const t=e();return a.isString(t)?r.succeed(t):t})),r.catchAll((()=>r.succeed(e.message??"is missing")))),_=(e,t)=>r.matchEffect(b(e),{onFailure:t,onSuccess:e=>r.succeed(c(e))}),I=e=>{switch(e._tag){case"Type":return r.map(w(e),c);case"Forbidden":return r.succeed(c(v(e),[c(E(e))]));case"Unexpected":return r.succeed(c(k(e)));case"Missing":return r.map(x(e),c);case"Transformation":return _(e,(()=>r.map(I(e.issue),(t=>c(v(e),[c(m(e.kind),[t])])))));case"Refinement":return _(e,(()=>r.map(I(e.issue),(t=>c(v(e),[c(g(e.kind),[t])])))));case"Pointer":return r.map(I(e.issue),(t=>c(o.formatPath(e.path),[t])));case"Composite":{const t=v(e);return _(e,(()=>o.isNonEmpty(e.issues)?r.map(r.forEach(e.issues,I),(e=>c(t,e))):r.map(I(e.issues),(e=>c(t,[e])))))}}}},641112:(e,t,n)=>{n.r(t),n.d(t,{getASTDuplicateIndexSignatureErrorMessage:()=>I,getASTDuplicatePropertySignatureErrorMessage:()=>C,getASTDuplicatePropertySignatureTransformationErrorMessage:()=>A,getASTIndexSignatureParameterErrorMessage:()=>T,getASTRequiredElementFollowinAnOptionalElementErrorMessage:()=>O,getASTUnsupportedKeySchema:()=>x,getASTUnsupportedLiteral:()=>_,getASTUnsupportedRenameSchema:()=>N,getASTUnsupportedSchema:()=>k,getArbitraryEmptyEnumErrorMessage:()=>f,getArbitraryMissingAnnotationErrorMessage:()=>l,getArbitraryUnsupportedErrorMessage:()=>u,getEquivalenceUnsupportedErrorMessage:()=>d,getInvalidArgumentErrorMessage:()=>s,getJSONSchemaMissingAnnotationErrorMessage:()=>h,getJSONSchemaMissingIdentifierAnnotationErrorMessage:()=>p,getJSONSchemaUnsupportedKeyErrorMessage:()=>y,getJSONSchemaUnsupportedParameterErrorMessage:()=>m,getJSONSchemaUnsupportedPostRestElementsErrorMessage:()=>g,getPrettyMissingAnnotationErrorMessage:()=>b,getPrettyNeverErrorMessage:()=>S,getPrettyNoMatchingSchemaErrorMessage:()=>w,getSchemaExtendErrorMessage:()=>v,getSchemaUnsupportedLiteralSpanErrorMessage:()=>E});var r=n(630768),i=n(515407);const a=(e,t,n,a)=>{let s=e;return n&&r.isNonEmptyReadonlyArray(n)&&(s+=`\nat path: ${i.formatPath(n)}`),void 0!==t&&(s+=`\ndetails: ${t}`),a&&(s+=`\nschema (${a._tag}): ${a}`),s},s=e=>a("Invalid Argument",e),o=(e,t,n)=>a("Unsupported schema",e,t,n),c=(e,t,n)=>a("Missing annotation",e,t,n),u=(e,t)=>o("Cannot build an Arbitrary for this schema",e,t),l=(e,t)=>c('Generating an Arbitrary for this schema requires an "arbitrary" annotation',e,t),f=e=>a("Empty Enums schema","Generating an Arbitrary for this schema requires at least one enum",e),d=(e,t)=>o("Cannot build an Equivalence",t,e),h=(e,t)=>c('Generating a JSON Schema for this schema requires a "jsonSchema" annotation',e,t),p=(e,t)=>c('Generating a JSON Schema for this schema requires an "identifier" annotation',e,t),m=(e,t)=>a("Unsupported index signature parameter",void 0,e,t),g=e=>a("Generating a JSON Schema for post-rest elements is not currently supported. You're welcome to contribute by submitting a Pull Request",void 0,e),y=(e,t)=>a("Unsupported key",`Cannot encode ${i.formatPropertyKey(e)} key to JSON Schema`,t),b=(e,t)=>c('Generating a Pretty for this schema requires a "pretty" annotation',e,t),S="Cannot pretty print a `never` value",w=(e,t,n)=>a("Unexpected Error",`Cannot find a matching schema for ${i.formatUnknown(e)}`,t,n),v=(e,t,n)=>a("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),E=e=>a("Unsupported template literal span",void 0,void 0,e),k=e=>o(void 0,void 0,e),x=e=>a("Unsupported key schema",void 0,void 0,e),_=e=>a("Unsupported literal",`literal value: ${i.formatUnknown(e)}`),I=e=>a("Duplicate index signature",`${e} index signature`),T=a("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),O=a("Invalid element","A required element cannot follow an optional element. ts(1257)"),A=e=>a("Duplicate property signature transformation",`Duplicate key ${i.formatUnknown(e)}`),N=e=>o(void 0,void 0,e),C=e=>a("Duplicate property signature",`Duplicate key ${i.formatUnknown(e)}`)},515407:(e,t,n)=>{n.r(t),n.d(t,{formatPath:()=>h,formatPathKey:()=>d,formatPropertyKey:()=>u,formatUnknown:()=>c,getKeysForIndexSignature:()=>a,isNonEmpty:()=>l,isSingle:()=>f,memoizeThunk:()=>o,ownKeys:()=>s});var r=n(630768),i=n(856572);const a=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return a(e,t.from)}},s=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),o=e=>{let t,n=!1;return()=>(n||(t=e(),n=!0),t)},c=e=>{if(i.isString(e))return JSON.stringify(e);if(i.isNumber(e)||null==e||i.isBoolean(e)||i.isSymbol(e)||i.isDate(e))return String(e);if(i.isBigInt(e))return String(e)+"n";if(!r.isArray(e)&&i.hasProperty(e,"toString")&&i.isFunction(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),r.isArray(e)?`[${e.map(c).join(",")}]`:`{${s(e).map((t=>`${i.isString(t)?JSON.stringify(t):String(t)}:${c(e[t])}`)).join(",")}}`}catch(t){return String(e)}},u=e=>"string"===typeof e?JSON.stringify(e):String(e),l=e=>Array.isArray(e),f=e=>!Array.isArray(e),d=e=>`[${u(e)}]`,h=e=>l(e)?e.map(d).join(""):d(e)},263616:(e,t,n)=>{n.r(t),n.d(t,{expose:()=>c,wrap:()=>o});var r=n(786092),i=n(145916),a=n(477900),s=n(659599);const o=e=>{const t=new Map;e.onmessage=({data:e})=>{const n=t.get(e.id);n&&(n(e.response),t.delete(e.id))};return new Proxy(e,{get:(e,n)=>(...i)=>a.flatMap(r.Config,(r=>a.async((o=>{const c=[],u=i.map((e=>{if("function"!==typeof e)return e;const t=new MessageChannel;return t.port1.onmessage=({data:t})=>{e(...t)},c.push(t.port2),t.port2})),l=(0,s.nanoid)();t.set(l,(e=>{o(a[e._tag](e.value))}));const f={id:l,name:n,args:u,config:r};e.postMessage(f,c)}))))})},c=e=>{let t=null;onmessage=({data:{id:n,name:s,args:o,config:c}})=>{null==t&&(t=(0,r.createRuntime)(c));const u=o.map((e=>e instanceof MessagePort?(...t)=>{e.postMessage(t)}:e));t.runFork(e[s](...u).pipe(a.map((e=>({id:n,response:{_tag:"succeed",value:e}}))),a.catchAll((e=>a.succeed({id:n,response:{_tag:"fail",value:e}}))),a.catchAllDefect((e=>a.succeed({id:n,response:{_tag:"die",value:(0,i.ensureTransferableError)(e)}}))),a.tap((e=>postMessage(e)))))}}},786092:(e,t,n)=>{n.r(t),n.d(t,{Config:()=>D,createRuntime:()=>j,defaultConfig:()=>U});var r=n(689702),i=n(286780),a=n(934321),s=n(860356),o=n(208624),c=(n(420634),n(361369)),u=(n(827964),n(489425),n(672620));n(478908),n(789391);var l=n(265123);l.LoggerTypeId;const f=l.makeLogger,d=(o.addLogger,o.addLoggerEffect,o.addLoggerScoped,l.mapInput,l.mapInputOptions,l.filterLogLevel,l.map,s.batchedLogger,s.loggerWithConsoleLog,s.loggerWithConsoleError,l.none,o.removeLogger,o.replaceLogger),h=(o.replaceLoggerEffect,o.replaceLoggerScoped,l.simple,l.succeed,l.sync,o.withMinimumLogLevel,s.loggerWithSpanAnnotations,l.zip,l.zipLeft,l.zipRight,s.defaultLogger),p=(l.jsonLogger,l.logfmtLogger,l.stringLogger,l.prettyLogger,l.structuredLogger,s.tracerLogger,s.defaultLogger,s.jsonLogger,s.defaultLogger,s.logFmtLogger,s.defaultLogger,s.prettyLogger,s.defaultLogger,s.structuredLogger,o.minimumLogLevel);l.isLogger;var m=n(953533),g=n(908993),y=n(820808),b=n(486881),S=n(103611);function w(e,t){return u.flatMap(e.runtimeEffect,(e=>u.withFiberRuntime((n=>(n.setFiberRefs(e.fiberRefs),n._runtimeFlags=e.runtimeFlags,u.provideContext(t,e.context))))))}const v=(e,t)=>{t=t??b.unsafeMakeMemoMap();const n=S.unsafeRunSyncEffect(s.scopeMake()),r={memoMap:t,scope:n,runtimeEffect:S.unsafeRunSyncEffect(y.memoize(u.tap(g.extend(b.toRuntimeWithMemoMap(e,t),n),(e=>{r.cachedRuntime=e})))),cachedRuntime:void 0,pipe(){return(0,m.pipeArguments)(this,arguments)},runtime:()=>void 0===r.cachedRuntime?S.unsafeRunPromiseEffect(r.runtimeEffect):Promise.resolve(r.cachedRuntime),dispose:()=>S.unsafeRunPromiseEffect(r.disposeEffect),disposeEffect:u.suspend((()=>(r.runtime=u.die("ManagedRuntime disposed"),r.cachedRuntime=void 0,g.close(r.scope,u.exitVoid)))),runFork:(e,t)=>void 0===r.cachedRuntime?S.unsafeForkEffect(w(r,e),t):S.unsafeFork(r.cachedRuntime)(e,t),runSyncExit:e=>void 0===r.cachedRuntime?S.unsafeRunSyncExitEffect(w(r,e)):S.unsafeRunSyncExit(r.cachedRuntime)(e),runSync:e=>void 0===r.cachedRuntime?S.unsafeRunSyncEffect(w(r,e)):S.unsafeRunSync(r.cachedRuntime)(e),runPromiseExit:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunPromiseExitEffect(w(r,e),t):S.unsafeRunPromiseExit(r.cachedRuntime)(e,t),runCallback:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunCallback(S.defaultRuntime)(w(r,e),t):S.unsafeRunCallback(r.cachedRuntime)(e,t),runPromise:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunPromiseEffect(w(r,e),t):S.unsafeRunPromise(r.cachedRuntime)(e,t)};return r};var E=n(757964);n(977948);const k=Symbol.for("@effect/matcher/Matcher"),x={[k]:{_input:c.identity,_filters:c.identity,_remaining:c.identity,_result:c.identity,_return:c.identity},_tag:"TypeMatcher",add(e){return _([...this.cases,e])},pipe(){return(0,m.pipeArguments)(this,arguments)}};function _(e){const t=Object.create(x);return t.cases=e,t}const I={[k]:{_input:c.identity,_filters:c.identity,_result:c.identity,_return:c.identity},_tag:"ValueMatcher",add(e){return"Right"===this.value._tag?this:"When"===e._tag&&!0===e.guard(this.provided)||"Not"===e._tag&&!1===e.guard(this.provided)?T(this.provided,E.right(e.evaluate(this.provided))):this},pipe(){return(0,m.pipeArguments)(this,arguments)}};function T(e,t){const n=Object.create(I);return n.provided=e,n.value=t,n}const O=(e,t)=>({_tag:"When",guard:e,evaluate:t}),A=e=>{if("function"===typeof e)return e;if(Array.isArray(e)){const t=e.map(A),n=t.length;return e=>{if(!Array.isArray(e))return!1;for(let r=0;r<n;r++)if(!1===t[r](e[r]))return!1;return!0}}if(null!==e&&"object"===typeof e){const t=Object.entries(e).map((([e,t])=>[e,A(t)])),n=t.length;return e=>{if("object"!==typeof e||null===e)return!1;for(let r=0;r<n;r++){const[n,i]=t[r];if(!(n in e)||!1===i(e[n]))return!1}return!0}}return t=>t===e},N=e=>{if("ValueMatcher"===e._tag)return e.value;const t=e.cases.length;if(1===t){const t=e.cases[0];return e=>"When"===t._tag&&!0===t.guard(e)||"Not"===t._tag&&!1===t.guard(e)?E.right(t.evaluate(e)):E.left(e)}return n=>{for(let r=0;r<t;r++){const t=e.cases[r];if("When"===t._tag&&!0===t.guard(n))return E.right(t.evaluate(n));if("Not"===t._tag&&!1===t.guard(n))return E.right(t.evaluate(n))}return E.left(n)}},C="effect/Match/exhaustive: absurd",R=e=>{const t=N(e);if(E.isEither(t)){if("Right"===t._tag)return t.right;throw new Error(C)}return e=>{const n=t(e);if("Right"===n._tag)return n.right;throw new Error(C)}};var F=n(856572);const M=e=>T(e,E.left(e)),L=(e,t)=>n=>n.add(O(A(e),t)),P=(F.isString,F.isNumber,F.isBoolean,F.isUndefined,F.isNull,F.isBigInt,F.isSymbol,F.isDate,F.isRecord,R),D=r.GenericTag("Config"),U={reloadUrl:"/",syncUrl:"https://evolu.world",name:"Evolu",maxDrift:3e5,minimumLogLevel:"none"},j=e=>{const t={...U,...e},n=i.succeed(D,t),r=M(t.minimumLogLevel).pipe(L("debug",(()=>a.Debug)),L("none",(()=>a.None)),L("trace",(()=>a.Trace)),L("warning",(()=>a.Warning)),P),s="none"===t.minimumLogLevel?n:i.mergeAll(n,p(r),d(h,B(t.name)));return v(s)},B=e=>f((({logLevel:t,message:n,date:r})=>{const i="Warning"===t._tag?"warn":"Error"===t._tag?"error":"log",a=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}:${r.getMilliseconds().toString().padStart(3,"0")}`,s=Array.isArray(n)?n:[n];globalThis.console[i](`${a} [${e}]`,...s)}))},431437:(e,t,n)=>{n.r(t),n.d(t,{AllowedTimeRange:()=>y,Counter:()=>w,Millis:()=>b,Time:()=>O,diffMerkleTrees:()=>q,initialMerkleTree:()=>M,initialMillis:()=>S,insertIntoMerkleTree:()=>U,makeInitialTimestamp:()=>T,makeSyncTimestamp:()=>I,merkleTreeToString:()=>$,millisToMerkleTreePath:()=>L,receiveTimestamp:()=>F,sendTimestamp:()=>R,timestampToHash:()=>x,timestampToString:()=>E,unsafeMerkleTreeFromString:()=>W,unsafeTimestampFromString:()=>k});var r=n(222396),i=n(160023),a=n(630768),s=n(689702),o=n(477900),c=n(757964),u=n(361369),l=n(286780),f=n(804676),d=n(977948),h=n(243216),p=n(786092),m=n(83643),g=n(184208);const y={greaterThan:860934419999,lessThan:258280326e4},b=r.Number.pipe(r.greaterThan(y.greaterThan),r.lessThan(y.lessThan),r.brand("Millis")),S=i.decodeSync(b)(y.greaterThan+1),w=r.Number.pipe(r.between(0,65535),r.brand("Counter")),v=i.decodeSync(w)(0),E=e=>[new Date(e.millis).toISOString(),e.counter.toString(16).toUpperCase().padStart(4,"0"),e.node].join("-"),k=e=>{const t=e.split("-");return{millis:Date.parse(t.slice(0,3).join("-")).valueOf(),counter:parseInt(t[3],16),node:t[4]}},x=e=>(0,g.murmurhash)(E(e)),_=i.decodeSync(m.NodeId)("0000000000000000"),I=(e=S)=>({millis:e,counter:v,node:_}),T=m.NanoIdGenerator.pipe(o.flatMap((({nodeId:e})=>e)),o.map((e=>({millis:S,counter:v,node:e}))));class O extends(s.Tag("Time")()){}O.Live=l.succeed(O,{now:o.suspend((()=>r.decode(b)(Date.now()))).pipe(o.catchTag("ParseError",(()=>o.fail({_tag:"TimestampTimeOutOfRangeError"}))))});const A=e=>o.gen((function*(){const t=yield*O,n=yield*p.Config,r=yield*t.now,i=Math.max(r,...e);return i-r>n.maxDrift&&(yield*o.fail({_tag:"TimestampDriftError",now:r,next:i})),i})),N=e=>(0,u.pipe)(f.increment(e),r.decodeEither(w),c.mapLeft((()=>({_tag:"TimestampCounterOverflowError"})))),C=i.decodeSync(w)(0),R=e=>o.gen((function*(){const t=yield*A([e.millis]),n=t===e.millis?yield*N(e.counter):C;return{...e,millis:t,counter:n}})),F=({local:e,remote:t})=>o.gen((function*(n){e.node===t.node&&(yield*o.fail({_tag:"TimestampDuplicateNodeError",node:e.node}));const r=yield*A([e.millis,t.millis]),i=yield*r===e.millis&&r===t.millis?N(Math.max(e.counter,t.counter)):r===e.millis?N(e.counter):r===t.millis?N(t.counter):c.right(C);return{...e,millis:r,counter:i}})),M=Object.create(null),L=e=>Math.floor(e/1e3/60).toString(3).split(""),P=(e,t)=>(e||0)^t,D=(e,t,n)=>{if(0===t.length)return e;const r=t[0],i=e[r]||{};return{...e,[r]:{...i,...D(i,t.slice(1),n),hash:P(i.hash,n)}}},U=(e,t)=>{const n=L(t.millis),r=x(t);return D({...e,hash:P(e.hash,r)},n,r)},j=["0","1","2"],B=e=>j.filter((t=>t in e)),q=(e,t)=>{if(e.hash===t.hash)return d.none();let n=e,r=t,i=[];for(;;){const e=a.dedupeWith(B(n).concat(B(r)),h.Equivalence);let t=null;for(let i=0;i<e.length;i++){const a=e[i],s=n[a],o=r[a];if(!s||!o)break;if(s.hash!==o.hash){t=a;break}}if(!t)return d.some(0===(s=i).length?S:1e3*parseInt(s.join("").padEnd(16,"0"),3)*60);i=[...i,t],n=n[t]||M,r=r[t]||M}var s;return d.none()},$=e=>JSON.stringify(e),W=e=>JSON.parse(e)},83643:(e,t,n)=>{n.r(t),n.d(t,{NanoIdGenerator:()=>Ge,NodeId:()=>Je,SecretBox:()=>Ye,createMnemonic:()=>We,createNanoIdGeneratorLive:()=>Ke,mnemonicToSeed:()=>Ve,parseMnemonic:()=>ze,slip21Derive:()=>He});var r=n(222396),i=n(864537),a=n(892075);const s=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),o=s("expand 16-byte k"),c=s("expand 32-byte k"),u=(0,a.u32)(o),l=(0,a.u32)(c);l.slice();function f(e,t){return e<<t|e>>>32-t}function d(e){return e.byteOffset%4===0}const h=64,p=16,m=2**32-1,g=new Uint32Array;function y(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:c}=(0,a.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!==typeof e)throw new Error("core must be a function");return(0,i.number)(s),(0,i.number)(c),(0,i.bool)(o),(0,i.bool)(n),(t,f,y,b,S=0)=>{(0,i.bytes)(t),(0,i.bytes)(f),(0,i.bytes)(y);const w=y.length;if(b||(b=new Uint8Array(w)),(0,i.bytes)(b),(0,i.number)(S),S<0||S>=m)throw new Error("arx: counter overflow");if(b.length<w)throw new Error(`arx: output (${b.length}) is shorter than data (${w})`);const v=[];let E,k,x=t.length;if(32===x)E=t.slice(),v.push(E),k=l;else{if(16!==x||!n)throw new Error(`arx: invalid 32-byte key, got length=${x}`);E=new Uint8Array(32),E.set(t),E.set(t,16),k=u,v.push(E)}d(f)||(f=f.slice(),v.push(f));const _=(0,a.u32)(E);if(r){if(24!==f.length)throw new Error("arx: extended nonce must be 24 bytes");r(k,_,(0,a.u32)(f.subarray(0,16)),_),f=f.subarray(16)}const I=16-s;if(I!==f.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(12!==I){const e=new Uint8Array(12);e.set(f,o?0:12-f.length),f=e,v.push(f)}const T=(0,a.u32)(f);for(!function(e,t,n,r,i,s,o,c){const u=i.length,l=new Uint8Array(h),f=(0,a.u32)(l),y=d(i)&&d(s),b=y?(0,a.u32)(i):g,S=y?(0,a.u32)(s):g;for(let a=0;a<u;o++){if(e(t,n,r,f,o,c),o>=m)throw new Error("arx: counter overflow");const d=Math.min(h,u-a);if(y&&d===h){const e=a/4;if(a%4!==0)throw new Error("arx: invalid block position");for(let t,n=0;n<p;n++)t=e+n,S[t]=b[t]^f[n];a+=h}else{for(let e,t=0;t<d;t++)e=a+t,s[e]=i[e]^l[t];a+=d}}}(e,k,_,T,y,b,S,c);v.length>0;)v.pop().fill(0);return b}}const b=(e,t)=>255&e[t++]|(255&e[t++])<<8;class S{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,a.toBytes)(e),(0,i.bytes)(e,32);const t=b(e,0),n=b(e,2),r=b(e,4),s=b(e,6),o=b(e,8),c=b(e,10),u=b(e,12),l=b(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|c<<2),this.r[7]=8065&(c>>>11|u<<5),this.r[8]=8191&(u>>>8|l<<8),this.r[9]=l>>>5&127;for(let i=0;i<8;i++)this.pad[i]=b(e,16+2*i)}process(e,t,n=!1){const r=n?0:2048,{h:i,r:a}=this,s=a[0],o=a[1],c=a[2],u=a[3],l=a[4],f=a[5],d=a[6],h=a[7],p=a[8],m=a[9],g=b(e,t+0),y=b(e,t+2),S=b(e,t+4),w=b(e,t+6),v=b(e,t+8),E=b(e,t+10),k=b(e,t+12),x=b(e,t+14);let _=i[0]+(8191&g),I=i[1]+(8191&(g>>>13|y<<3)),T=i[2]+(8191&(y>>>10|S<<6)),O=i[3]+(8191&(S>>>7|w<<9)),A=i[4]+(8191&(w>>>4|v<<12)),N=i[5]+(v>>>1&8191),C=i[6]+(8191&(v>>>14|E<<2)),R=i[7]+(8191&(E>>>11|k<<5)),F=i[8]+(8191&(k>>>8|x<<8)),M=i[9]+(x>>>5|r),L=0,P=L+_*s+I*(5*m)+T*(5*p)+O*(5*h)+A*(5*d);L=P>>>13,P&=8191,P+=N*(5*f)+C*(5*l)+R*(5*u)+F*(5*c)+M*(5*o),L+=P>>>13,P&=8191;let D=L+_*o+I*s+T*(5*m)+O*(5*p)+A*(5*h);L=D>>>13,D&=8191,D+=N*(5*d)+C*(5*f)+R*(5*l)+F*(5*u)+M*(5*c),L+=D>>>13,D&=8191;let U=L+_*c+I*o+T*s+O*(5*m)+A*(5*p);L=U>>>13,U&=8191,U+=N*(5*h)+C*(5*d)+R*(5*f)+F*(5*l)+M*(5*u),L+=U>>>13,U&=8191;let j=L+_*u+I*c+T*o+O*s+A*(5*m);L=j>>>13,j&=8191,j+=N*(5*p)+C*(5*h)+R*(5*d)+F*(5*f)+M*(5*l),L+=j>>>13,j&=8191;let B=L+_*l+I*u+T*c+O*o+A*s;L=B>>>13,B&=8191,B+=N*(5*m)+C*(5*p)+R*(5*h)+F*(5*d)+M*(5*f),L+=B>>>13,B&=8191;let q=L+_*f+I*l+T*u+O*c+A*o;L=q>>>13,q&=8191,q+=N*s+C*(5*m)+R*(5*p)+F*(5*h)+M*(5*d),L+=q>>>13,q&=8191;let $=L+_*d+I*f+T*l+O*u+A*c;L=$>>>13,$&=8191,$+=N*o+C*s+R*(5*m)+F*(5*p)+M*(5*h),L+=$>>>13,$&=8191;let W=L+_*h+I*d+T*f+O*l+A*u;L=W>>>13,W&=8191,W+=N*c+C*o+R*s+F*(5*m)+M*(5*p),L+=W>>>13,W&=8191;let z=L+_*p+I*h+T*d+O*f+A*l;L=z>>>13,z&=8191,z+=N*u+C*c+R*o+F*s+M*(5*m),L+=z>>>13,z&=8191;let V=L+_*m+I*p+T*h+O*d+A*f;L=V>>>13,V&=8191,V+=N*l+C*u+R*c+F*o+M*s,L+=V>>>13,V&=8191,L=(L<<2)+L|0,L=L+P|0,P=8191&L,L>>>=13,D+=L,i[0]=P,i[1]=D,i[2]=U,i[3]=j,i[4]=B,i[5]=q,i[6]=$,i[7]=W,i[8]=z,i[9]=V}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=r,r=e[s]>>>13,e[s]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=e[s]+r,r=n[s]>>>13,n[s]&=8191;n[9]-=8192;let i=(1^r)-1;for(let s=0;s<10;s++)n[s]&=i;i=~i;for(let s=0;s<10;s++)e[s]=e[s]&i|n[s];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let a=e[0]+t[0];e[0]=65535&a;for(let s=1;s<8;s++)a=(e[s]+t[s]|0)+(a>>>16)|0,e[s]=65535&a}update(e){(0,i.exists)(this);const{buffer:t,blockLen:n}=this,r=(e=(0,a.toBytes)(e)).length;for(let i=0;i<r;){const a=Math.min(n-this.pos,r-i);if(a!==n)t.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){(0,i.exists)(this),(0,i.output)(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let a=0;for(let i=0;i<8;i++)e[a++]=n[i]>>>0,e[a++]=n[i]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}const w=function(e){const t=(t,n)=>e(n).update((0,a.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}((e=>new S(e)));function v(e,t,n,r,i,a=20){let s=e[0],o=t[0],c=t[1],u=t[2],l=t[3],d=e[1],h=n[0],p=n[1],m=i,g=e[2],y=t[4],b=t[5],S=t[6],w=t[7],v=e[3],E=s,k=o,x=c,_=u,I=l,T=d,O=h,A=p,N=m,C=0,R=g,F=y,M=b,L=S,P=w,D=v;for(let j=0;j<a;j+=2)I^=f(E+M|0,7),N^=f(I+E|0,9),M^=f(N+I|0,13),E^=f(M+N|0,18),C^=f(T+k|0,7),L^=f(C+T|0,9),k^=f(L+C|0,13),T^=f(k+L|0,18),P^=f(R+O|0,7),x^=f(P+R|0,9),O^=f(x+P|0,13),R^=f(O+x|0,18),_^=f(D+F|0,7),A^=f(_+D|0,9),F^=f(A+_|0,13),D^=f(F+A|0,18),k^=f(E+_|0,7),x^=f(k+E|0,9),_^=f(x+k|0,13),E^=f(_+x|0,18),O^=f(T+I|0,7),A^=f(O+T|0,9),I^=f(A+O|0,13),T^=f(I+A|0,18),F^=f(R+C|0,7),N^=f(F+R|0,9),C^=f(N+F|0,13),R^=f(C+N|0,18),M^=f(D+P|0,7),L^=f(M+D|0,9),P^=f(L+M|0,13),D^=f(P+L|0,18);let U=0;r[U++]=s+E|0,r[U++]=o+k|0,r[U++]=c+x|0,r[U++]=u+_|0,r[U++]=l+I|0,r[U++]=d+T|0,r[U++]=h+O|0,r[U++]=p+A|0,r[U++]=m+N|0,r[U++]=0+C|0,r[U++]=g+R|0,r[U++]=y+F|0,r[U++]=b+M|0,r[U++]=S+L|0,r[U++]=w+P|0,r[U++]=v+D|0}const E=y(v,{counterRight:!0,extendNonceFn:function(e,t,n,r){let i=e[0],a=t[0],s=t[1],o=t[2],c=t[3],u=e[1],l=n[0],d=n[1],h=n[2],p=n[3],m=e[2],g=t[4],y=t[5],b=t[6],S=t[7],w=e[3];for(let E=0;E<20;E+=2)c^=f(i+y|0,7),h^=f(c+i|0,9),y^=f(h+c|0,13),i^=f(y+h|0,18),p^=f(u+a|0,7),b^=f(p+u|0,9),a^=f(b+p|0,13),u^=f(a+b|0,18),S^=f(m+l|0,7),s^=f(S+m|0,9),l^=f(s+S|0,13),m^=f(l+s|0,18),o^=f(w+g|0,7),d^=f(o+w|0,9),g^=f(d+o|0,13),w^=f(g+d|0,18),a^=f(i+o|0,7),s^=f(a+i|0,9),o^=f(s+a|0,13),i^=f(o+s|0,18),l^=f(u+c|0,7),d^=f(l+u|0,9),c^=f(d+l|0,13),u^=f(c+d|0,18),g^=f(m+p|0,7),h^=f(g+m|0,9),p^=f(h+g|0,13),m^=f(p+h|0,18),y^=f(w+S|0,7),b^=f(y+w|0,9),S^=f(b+y|0,13),w^=f(S+b|0,18);let v=0;r[v++]=i,r[v++]=u,r[v++]=m,r[v++]=w,r[v++]=l,r[v++]=d,r[v++]=h,r[v++]=p}}),k=(0,a.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},((e,t)=>{const n=16;return(0,i.bytes)(e,32),(0,i.bytes)(t,24),{encrypt:(r,a)=>{(0,i.bytes)(r);const s=r.length+32;a?(0,i.bytes)(a,s):a=new Uint8Array(s),a.set(r,32),E(e,t,a,a);const o=a.subarray(0,32),c=w(a.subarray(32),o);return a.set(c,n),a.subarray(0,n).fill(0),a.subarray(n)},decrypt:r=>{(0,i.bytes)(r);const s=r.length;if(s<n)throw new Error("encrypted data should be at least 16 bytes");const o=new Uint8Array(s+n);o.set(r,n);const c=E(e,t,new Uint8Array(32)),u=w(o.subarray(32),c);if(!(0,a.equalBytes)(o.subarray(16,32),u))throw new Error("invalid tag");const l=E(e,t,o);return l.subarray(0,32).fill(0),c.fill(0),l.subarray(32)}}}));function x(e,t){const n=k(e,t);return{seal:n.encrypt,open:n.decrypt}}function _(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function I(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"===typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function T(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");_(e.outputLen),_(e.blockLen)}function O(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function A(e,t){I(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const N="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const C=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),R=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function F(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),I(e),e}class M{clone(){return this._cloneInto()}}const L={}.toString;function P(e){const t=t=>e().update(F(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function D(e=32){if(N&&"function"===typeof N.getRandomValues)return N.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class U extends M{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,T(e);const n=F(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return O(this),this.iHash.update(e),this}digestInto(e){O(this),I(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:a,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const j=(e,t,n)=>new U(e,t).update(n).digest();j.create=(e,t)=>new U(e,t);const B=(e,t,n)=>e&t^e&n^t&n;class q extends M{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=C(this.buffer)}update(e){O(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=F(e)).length;for(let a=0;a<i;){const s=Math.min(r-this.pos,i-a);if(s!==r)n.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=C(e);for(;r<=i-a;a+=r)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){O(this),A(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let l=a;l<r;l++)t[l]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),s=Number(n>>i&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=C(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)s.setUint32(4*l,u[l],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:a,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=a,r%t&&e.buffer.set(n),e}}const $=BigInt(2**32-1),W=BigInt(32);function z(e,t=!1){return t?{h:Number(e&$),l:Number(e>>W&$)}:{h:0|Number(e>>W&$),l:0|Number(e&$)}}const V={fromBig:z,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:s}=z(e[i],t);[n[i],r[i]]=[a,s]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<W|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},[G,K]=(()=>V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),J=new Uint32Array(80),H=new Uint32Array(80);class Y extends q{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:a,Dh:s,Dl:o,Eh:c,El:u,Fh:l,Fl:f,Gh:d,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,i,a,s,o,c,u,l,f,d,h,p,m]}set(e,t,n,r,i,a,s,o,c,u,l,f,d,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|a,this.Dh=0|s,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|f,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let b=0;b<16;b++,t+=4)J[b]=e.getUint32(t),H[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|J[b-15],t=0|H[b-15],n=V.rotrSH(e,t,1)^V.rotrSH(e,t,8)^V.shrSH(e,t,7),r=V.rotrSL(e,t,1)^V.rotrSL(e,t,8)^V.shrSL(e,t,7),i=0|J[b-2],a=0|H[b-2],s=V.rotrSH(i,a,19)^V.rotrBH(i,a,61)^V.shrSH(i,a,6),o=V.rotrSL(i,a,19)^V.rotrBL(i,a,61)^V.shrSL(i,a,6),c=V.add4L(r,o,H[b-7],H[b-16]),u=V.add4H(c,n,s,J[b-7],J[b-16]);J[b]=0|u,H[b]=0|c}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:s,Cl:o,Dh:c,Dl:u,Eh:l,El:f,Fh:d,Fl:h,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const e=V.rotrSH(l,f,14)^V.rotrSH(l,f,18)^V.rotrBH(l,f,41),t=V.rotrSL(l,f,14)^V.rotrSL(l,f,18)^V.rotrBL(l,f,41),S=l&d^~l&p,w=f&h^~f&m,v=V.add5L(y,t,w,K[b],H[b]),E=V.add5H(v,g,e,S,G[b],J[b]),k=0|v,x=V.rotrSH(n,r,28)^V.rotrBH(n,r,34)^V.rotrBH(n,r,39),_=V.rotrSL(n,r,28)^V.rotrBL(n,r,34)^V.rotrBL(n,r,39),I=n&i^n&s^i&s,T=r&a^r&o^a&o;g=0|p,y=0|m,p=0|d,m=0|h,d=0|l,h=0|f,({h:l,l:f}=V.add(0|c,0|u,0|E,0|k)),c=0|s,u=0|o,s=0|i,o=0|a,i=0|n,a=0|r;const O=V.add3L(k,_,T);n=V.add3H(O,E,x,I),r=0|O}({h:n,l:r}=V.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:a}=V.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:s,l:o}=V.add(0|this.Ch,0|this.Cl,0|s,0|o)),({h:c,l:u}=V.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:f}=V.add(0|this.Eh,0|this.El,0|l,0|f)),({h:d,l:h}=V.add(0|this.Fh,0|this.Fl,0|d,0|h)),({h:p,l:m}=V.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=V.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,r,i,a,s,o,c,u,l,f,d,h,p,m,g,y)}roundClean(){J.fill(0),H.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Z=P((()=>new Y));function Q(e,t,n,r){T(e);const i=function(e,t){if(void 0!==t&&"[object Object]"!==L.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:a,dkLen:s,asyncTick:o}=i;if(_(a),_(s),_(o),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=F(t),u=F(n),l=new Uint8Array(s),f=j.create(e,c),d=f._cloneInto().update(u);return{c:a,dkLen:s,asyncTick:o,DK:l,PRF:f,PRFSalt:d}}function X(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}const ee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),te=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ne=new Uint32Array(64);class re extends q{constructor(){super(64,32,8,!1),this.A=0|te[0],this.B=0|te[1],this.C=0|te[2],this.D=0|te[3],this.E=0|te[4],this.F=0|te[5],this.G=0|te[6],this.H=0|te[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:a,G:s,H:o}=this;return[e,t,n,r,i,a,s,o]}set(e,t,n,r,i,a,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(e,t){for(let f=0;f<16;f++,t+=4)ne[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=ne[f-15],t=ne[f-2],n=R(e,7)^R(e,18)^e>>>3,r=R(t,17)^R(t,19)^t>>>10;ne[f]=r+ne[f-7]+n+ne[f-16]|0}let{A:n,B:r,C:i,D:a,E:s,F:o,G:c,H:u}=this;for(let f=0;f<64;f++){const e=u+(R(s,6)^R(s,11)^R(s,25))+((l=s)&o^~l&c)+ee[f]+ne[f]|0,t=(R(n,2)^R(n,13)^R(n,22))+B(n,r,i)|0;u=c,c=o,o=s,s=a+e|0,a=i,i=r,r=n,n=e+t|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,a,s,o,c,u)}roundClean(){ne.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ie=P((()=>new re));function ae(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function se(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function oe(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function ce(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(ae(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function ue(e=""){if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function le(e,t="="){if(ae(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function fe(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function de(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(ae(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let i=r;i<a.length;i++){const o=a[i],c=t*e+o;if(!Number.isSafeInteger(c)||t*e/t!==e||c-o!==t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(a[i]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");s&&(u?s=!1:r=i)}if(i.push(e),s)break}for(let s=0;s<e.length-1&&0===e[s];s++)i.push(0);return i.reverse()}const he=(e,t)=>t?he(t,e%t):e,pe=(e,t)=>e+(t-he(e,t));function me(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(pe(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${pe(t,n)}`);let i=0,a=0;const s=2**n-1,o=[];for(const c of e){if(ae(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)o.push((i>>a-n&s)>>>0);i&=2**a-1}if(i=i<<n-a&s,!r&&a>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&o.push(i>>>0),o}function ge(e){return ae(e),{encode:t=>{if(!se(t))throw new Error("radix.encode input should be Uint8Array");return de(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(de(t,e,256))}}}function ye(e,t=!1){if(ae(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(pe(8,e)>32||pe(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!se(n))throw new Error("radix2.encode input should be Uint8Array");return me(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(me(n,e,8,t))}}}function be(e,t){if(ae(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!se(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!se(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),a=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return r}}}const Se={alphabet:ce,chain:oe,checksum:be,convertRadix:de,convertRadix2:me,radix:ge,radix2:ye,join:ue,padding:le},we=oe(ye(4),ce("0123456789ABCDEF"),ue("")),ve=oe(ye(5),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),le(5),ue("")),Ee=(ye(5),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ue(""),ye(5),ce("0123456789ABCDEFGHIJKLMNOPQRSTUV"),le(5),ue(""),ye(5),ce("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ue(""),ye(5),ce("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ue(""),fe((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),oe(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),le(6),ue(""))),ke=(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ue(""),oe(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),le(6),ue(""))),xe=(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ue(""),e=>oe(ge(58),ce(e),ue(""))),_e=xe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ie=[0,2,3,5,6,7,9,10,11],Te={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=_e.encode(r).padStart(Ie[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Ie.indexOf(r.length),a=_e.decode(r);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};ce("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ue("");const Oe={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},Ae=(ye(4),ce("0123456789abcdef"),ue(""),fe((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0]);function Ne(e){if("string"!==typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function Ce(e){const t=Ne(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Re(e){I(e,16,20,24,28,32)}function Fe(e,t=128){if(_(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return function(e,t){Re(e);const n=Le(t).encode(e);return n.join(Ae(t)?"\u3000":" ")}(D(t/8),e)}const Me=e=>{const t=8-e.length/4;return new Uint8Array([ie(e)[0]>>t<<t])};function Le(e){if(!Array.isArray(e)||2048!==e.length||"string"!==typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!==typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),Se.chain(Se.checksum(1,Me),Se.radix2(11,!0),Se.alphabet(e))}function Pe(e,t){try{!function(e,t){const{words:n}=Ce(e),r=Le(t).decode(n);Re(r)}(e,t)}catch(n){return!1}return!0}const De=e=>Ne(`mnemonic${e}`);function Ue(e,t=""){return function(e,t,n,r){const{c:i,dkLen:a,DK:s,PRF:o,PRFSalt:c}=Q(e,t,n,r);let u;const l=new Uint8Array(4),f=C(l),d=new Uint8Array(o.outputLen);for(let h=1,p=0;p<a;h++,p+=o.outputLen){const e=s.subarray(p,p+o.outputLen);f.setInt32(0,h,!1),(u=c._cloneInto(u)).update(l).digestInto(d),e.set(d.subarray(0,e.length));for(let t=1;t<i;t++){o._cloneInto(u).update(d).digestInto(d);for(let t=0;t<e.length;t++)e[t]^=d[t]}}return X(o,c,s,u,d)}(Z,Ce(e).nfkd,De(t),{c:2048,dkLen:64})}const je="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var Be=n(689702),qe=n(477900),$e=n(286780);const We=()=>Fe(je,128),ze=e=>{const t=e.trim();return Pe(t,je)?qe.succeed(t):qe.fail({_tag:"InvalidMnemonicError"})},Ve=e=>Ue(e);class Ge extends(Be.Tag("NanoIdGenerator")()){}const Ke=(e,t)=>{const n=e("0123456789abcdef",16);return $e.succeed(Ge,Ge.of({nanoid:qe.sync((()=>t())),nodeId:qe.sync((()=>n())),rowId:qe.sync((()=>t()))}))},Je=r.String.pipe(r.pattern(/^[\w-]{16}$/),r.brand("NodeId")),He=(e,t)=>qe.sync((()=>{let n=j(Z,"Symmetric key seed",e);for(let e=0;e<t.length;e++){const r=(new TextEncoder).encode(t[e]),i=new Uint8Array(r.byteLength+1);i[0]=0,i.set(r,1),n=j(Z,n.slice(0,32),i)}return n.slice(32,64)}));class Ye extends(Be.Tag("SecretBox")()){}Ye.Live=$e.succeed(Ye,Ye.of({seal:(e,t)=>qe.sync((()=>{const n=D(24),r=x(e,n).seal(t);return(0,a.concatBytes)(n,r)})),open:(e,t)=>qe.sync((()=>{const n=t.subarray(0,24),r=t.subarray(24);return x(e,n).open(r)}))}))},145916:(e,t,n)=>{n.r(t),n.d(t,{ensureTransferableError:()=>i,makeUnexpectedError:()=>r});const r=e=>({_tag:"UnexpectedError",error:e}),i=e=>e instanceof Error?{message:e.message,name:e.name,stack:e.stack}:e},184208:(e,t,n)=>{n.r(t),n.d(t,{murmurhash:()=>r});const r=(e,t=0)=>{let n,r,i,a;const s=3&e.length,o=e.length-s;n=t;const c=3432918353,u=461845907;for(a=0;a<o;)i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,++a,i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*u+(((i>>>16)*u&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,r=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(i=0,s){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i^=255&e.charCodeAt(a),i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*u+(((i>>>16)*u&65535)<<16)&4294967295,n^=i}return n^=e.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0}},912317:(e,t,n)=>{n.r(t),n.d(t,{Owner:()=>s,makeOwner:()=>o});var r=n(689702),i=n(477900),a=n(83643);const s=r.GenericTag("Owner"),o=e=>i.gen((function*(t){null==e&&(e=(0,a.createMnemonic)());const n=(0,a.mnemonicToSeed)(e),r=yield*i.map((0,a.slip21Derive)(n,["Evolu","Owner Id"]),(e=>{let t="";for(let n=0;n<21;n++)t+=c[63&e[n]];return t})),s=yield*(0,a.slip21Derive)(n,["Evolu","Encryption Key"]);return{mnemonic:e,id:r,encryptionKey:s}})),c="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"},414816:(e,t,n)=>{n.r(t),n.d(t,{EncryptedMessage:()=>P,MessageContent:()=>D,SyncRequest:()=>M,SyncResponse:()=>L});const r=Symbol.for("protobuf-ts/message-type");function i(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var a,s,o;function c(e){var t,n,r,a;return e.localName=null!==(t=e.localName)&&void 0!==t?t:i(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:i(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:o.NO,e.opt=null!==(a=e.opt)&&void 0!==a?a:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function u(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(a||(a={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(s||(s={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(o||(o={}));class l{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some((e=>!r.includes(e))))return!1;if(!n&&r.some((e=>!i.known.includes(e))))return!1;if(t<1)return!0;for(const a of i.oneofs){const r=e[a];if(!u(r))return!1;if(void 0===r.oneofKind)continue;const i=this.fields.find((e=>e.localName===r.oneofKind));if(!i)return!1;if(!this.field(r[r.oneofKind],i,n,t))return!1}for(const a of this.fields)if(void 0===a.oneof&&!this.field(e[a.localName],a,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,a.INT32,r):this.scalar(e,a.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),a.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let i=0;i<e.length&&i<r;i++)if(!t.isAssignable(e[i],r-1))return!1}else for(let i=0;i<e.length&&i<r;i++)if(!t.is(e[i],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case a.UINT64:case a.FIXED64:case a.INT64:case a.SFIXED64:case a.SINT64:switch(n){case s.BIGINT:return"bigint"==r;case s.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case a.BOOL:return"boolean"==r;case a.STRING:return"string"==r;case a.BYTES:return e instanceof Uint8Array;case a.DOUBLE:case a.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case a.INT32:case a.FIXED32:case a.SFIXED32:case a.SINT32:case a.UINT32:return this.scalars(r.slice(0,n).map((e=>parseInt(e))),t,n);case a.BOOL:return this.scalars(r.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(r,t,n,s.STRING)}}}function f(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),h=[];for(let U=0;U<d.length;U++)h[d[U].charCodeAt(0)]=U;h["-".charCodeAt(0)]=d.indexOf("+"),h["_".charCodeAt(0)]=d.indexOf("/");var p=n(320241),m=n(722274);function g(e,t){switch(t){case s.BIGINT:return e.toBigInt();case s.NUMBER:return e.toNumber();default:return e.toString()}}class y{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=f(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[o,c]of Object.entries(e)){const e=this.fMap[o];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${o}`);continue}const u=e.localName;let l;if(e.oneof){if(null===c&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),l=t[e.oneof]={oneofKind:u}}else l=t;if("map"==e.kind){if(null===c)continue;this.assert(null!==(i=c)&&"object"==typeof i&&!Array.isArray(i),e.name,c);const t=l[u];for(const[r,i]of Object.entries(c)){let o;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":o=e.V.T().internalJsonRead(i,n);break;case"enum":if(o=this.enum(e.V.T(),i,e.name,n.ignoreUnknownFields),!1===o)continue;break;case"scalar":o=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==o,e.name+" map value",i);let c=r;e.K==a.BOOL&&(c="true"==c||"false"!=c&&c),c=this.scalar(c,e.K,s.STRING,e.name).toString(),t[c]=o}}else if(e.repeat){if(null===c)continue;this.assert(Array.isArray(c),e.name,c);const t=l[u];for(const r of c){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":if(i=this.enum(e.T(),r,e.name,n.ignoreUnknownFields),!1===i)continue;break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,c),t.push(i)}}else switch(e.kind){case"message":if(null===c&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}l[u]=e.T().internalJsonRead(c,n,l[u]);break;case"enum":let t=this.enum(e.T(),c,e.name,n.ignoreUnknownFields);if(!1===t)continue;l[u]=t;break;case"scalar":l[u]=this.scalar(c,e.T,e.L,e.name)}}var i}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&(0,m.assert)(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return(0,m.assert)(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let i=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(i=t.substring(e[2].length));let a=e[1][i];return("undefined"!==typeof a||!r)&&((0,m.assert)("number"==typeof a,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),a)}(0,m.assert)(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case a.DOUBLE:case a.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==a.FLOAT&&(0,m.assertFloat32)(r),r;case a.INT32:case a.FIXED32:case a.SFIXED32:case a.SINT32:case a.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":s=Number(e)),void 0===s)break;return t==a.UINT32?(0,m.assertUInt32)(s):(0,m.assertInt32)(s),s;case a.INT64:case a.SFIXED64:case a.SINT64:if(null===e)return g(p.PbLong.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return g(p.PbLong.from(e),n);case a.FIXED64:case a.UINT64:if(null===e)return g(p.PbULong.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return g(p.PbULong.from(e),n);case a.BOOL:if(null===e)return!1;if("boolean"!==typeof e)break;return e;case a.STRING:if(null===e)return"";if("string"!==typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case a.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!==typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,a=0,s=0;for(let o=0;o<e.length;o++){if(n=h[e.charCodeAt(o)],void 0===n)switch(e[o]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:s=n,a=1;break;case 1:r[i++]=s<<2|(48&n)>>4,s=n,a=2;break;case 2:r[i++]=(15&s)<<4|(60&n)>>2,s=n,a=3;break;case 3:r[i++]=(3&s)<<6|n,a=0}}if(1==a)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(s){i=s.message}this.assert(!1,r+(i?" - "+i:""),e)}}class b{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},r=e;for(const i of this.fields){if(!i.oneof){let e=this.field(i,r[i.localName],t);void 0!==e&&(n[t.useProtoFieldName?i.name:i.jsonName]=e);continue}const e=r[i.oneof];if(e.oneofKind!==i.localName)continue;const a="scalar"==i.kind||"enum"==i.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let s=this.field(i,e[i.localName],a);(0,m.assert)(void 0!==s),n[t.useProtoFieldName?i.name:i.jsonName]=s}return n}field(e,t,n){let r;if("map"==e.kind){(0,m.assert)("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,s]of Object.entries(t)){const t=this.scalar(e.V.T,s,e.name,!1,!0);(0,m.assert)(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[s,o]of Object.entries(t)){const t=this.message(r,o,e.name,n);(0,m.assert)(void 0!==t),i[s.toString()]=t}break;case"enum":const a=e.V.T();for(const[s,o]of Object.entries(t)){(0,m.assert)(void 0===o||"number"==typeof o);const t=this.enum(a,o,e.name,!1,!0,n.enumAsInteger);(0,m.assert)(void 0!==t),i[s.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){(0,m.assert)(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);(0,m.assert)(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let s=0;s<t.length;s++){(0,m.assert)(void 0===t[s]||"number"==typeof t[s]);const a=this.enum(r,t[s],e.name,e.opt,!0,n.enumAsInteger);(0,m.assert)(void 0!==a),i.push(a)}break;case"message":const a=e.T();for(let s=0;s<t.length;s++){const r=this.message(a,t[s],e.name,n);(0,m.assert)(void 0!==r),i.push(r)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,a){if("google.protobuf.NullValue"==e[0])return i||r?null:void 0;if(void 0!==t){if(0!==t||i||r)return(0,m.assert)("number"==typeof t),(0,m.assert)(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else(0,m.assert)(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void(0,m.assert)(r);const s=i||r;switch(e){case a.INT32:case a.SFIXED32:case a.SINT32:return 0===t?s?0:void 0:((0,m.assertInt32)(t),t);case a.FIXED32:case a.UINT32:return 0===t?s?0:void 0:((0,m.assertUInt32)(t),t);case a.FLOAT:(0,m.assertFloat32)(t);case a.DOUBLE:return 0===t?s?0:void 0:((0,m.assert)("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case a.STRING:return""===t?s?"":void 0:((0,m.assert)("string"==typeof t),t);case a.BOOL:return!1===t?!s&&void 0:((0,m.assert)("boolean"==typeof t),t);case a.UINT64:case a.FIXED64:(0,m.assert)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=p.PbULong.from(t);if(e.isZero()&&!s)return;return e.toString();case a.INT64:case a.SFIXED64:case a.SINT64:(0,m.assert)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=p.PbLong.from(t);if(n.isZero()&&!s)return;return n.toString();case a.BYTES:return(0,m.assert)(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let a=0;a<e.length;a++)switch(t=e[a],r){case 0:n+=d[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=d[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=d[i|t>>6],n+=d[63&t],r=0}return r&&(n+=d[i],n+="=",1==r&&(n+="=")),n}(t):s?"":void 0}}}var S=n(177688);function w(e,t=s.STRING){switch(e){case a.BOOL:return!1;case a.UINT64:case a.FIXED64:return g(p.PbULong.ZERO,t);case a.INT64:case a.SFIXED64:case a.SINT64:return g(p.PbLong.ZERO,t);case a.DOUBLE:case a.FLOAT:return 0;case a.BYTES:return new Uint8Array(0);case a.STRING:return"";default:return 0}}class v{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),s=this.fieldNoToField.get(r);if(!s){let a=n.readUnknownField;if("throw"==a)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let s=e.skip(i);!1!==a&&(!0===a?S.UnknownFieldHandler.onRead:a)(this.info.typeName,t,r,i,s);continue}let o=t,c=s.repeat,u=s.localName;switch(s.oneof&&(o=o[s.oneof],o.oneofKind!==u&&(o=t[s.oneof]={oneofKind:u})),s.kind){case"scalar":case"enum":let t="enum"==s.kind?a.INT32:s.T,r="scalar"==s.kind?s.L:void 0;if(c){let n=o[u];if(i==S.WireType.LengthDelimited&&t!=a.STRING&&t!=a.BYTES){let i=e.uint32()+e.pos;for(;e.pos<i;)n.push(this.scalar(e,t,r))}else n.push(this.scalar(e,t,r))}else o[u]=this.scalar(e,t,r);break;case"message":if(c){let t=o[u],r=s.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else o[u]=s.T().internalBinaryRead(e,e.uint32(),n,o[u]);break;case"map":let[l,f]=this.mapEntry(s,e,n);o[u][l]=f}}}mapEntry(e,t,n){let r,i,o=t.uint32(),c=t.pos+o;for(;t.pos<c;){let[o,c]=t.tag();switch(o){case 1:r=e.K==a.BOOL?t.bool().toString():this.scalar(t,e.K,s.STRING);break;case 2:switch(e.V.kind){case"scalar":i=this.scalar(t,e.V.T,e.V.L);break;case"enum":i=t.int32();break;case"message":i=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${o} (wire type ${c}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=w(e.K);r=e.K==a.BOOL?t.toString():t}if(void 0===i)switch(e.V.kind){case"scalar":i=w(e.V.T,e.V.L);break;case"enum":i=0;break;case"message":i=e.V.T().create()}return[r,i]}scalar(e,t,n){switch(t){case a.INT32:return e.int32();case a.STRING:return e.string();case a.BOOL:return e.bool();case a.DOUBLE:return e.double();case a.FLOAT:return e.float();case a.INT64:return g(e.int64(),n);case a.UINT64:return g(e.uint64(),n);case a.FIXED64:return g(e.fixed64(),n);case a.FIXED32:return e.fixed32();case a.BYTES:return e.bytes();case a.UINT32:return e.uint32();case a.SFIXED32:return e.sfixed32();case a.SFIXED64:return g(e.sfixed64(),n);case a.SINT32:return e.sint32();case a.SINT64:return g(e.sint64(),n)}}}class E{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const i of this.fields){let r,s,c=i.repeat,u=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==u)continue;r=t[u],s=!0}else r=e[u],s=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?a.INT32:i.T;if(c)if((0,m.assert)(Array.isArray(r)),c==o.PACKED)this.packed(t,e,i.no,r);else for(const n of r)this.scalar(t,e,i.no,n,!0);else void 0===r?(0,m.assert)(i.opt):this.scalar(t,e,i.no,r,s||i.opt);break;case"message":if(c){(0,m.assert)(Array.isArray(r));for(const e of r)this.message(t,n,i.T(),i.no,e)}else this.message(t,n,i.T(),i.no,r);break;case"map":(0,m.assert)("object"==typeof r&&null!==r);for(const[a,s]of Object.entries(r))this.mapEntry(t,n,i,a,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?S.UnknownFieldHandler.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,S.WireType.LengthDelimited),e.fork();let s=r;switch(n.K){case a.INT32:case a.FIXED32:case a.UINT32:case a.SFIXED32:case a.SINT32:s=Number.parseInt(r);break;case a.BOOL:(0,m.assert)("true"==r||"false"==r),s="true"==r}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,a.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,S.WireType.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[a,s,o]=this.scalarInfo(t,r);o&&!i||(e.tag(n,a),e[s](r))}packed(e,t,n,r){if(!r.length)return;(0,m.assert)(t!==a.BYTES&&t!==a.STRING),e.tag(n,S.WireType.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let a=0;a<r.length;a++)e[i](r[a]);e.join()}scalarInfo(e,t){let n,r=S.WireType.Varint,i=void 0===t,s=0===t;switch(e){case a.INT32:n="int32";break;case a.STRING:s=i||!t.length,r=S.WireType.LengthDelimited,n="string";break;case a.BOOL:s=!1===t,n="bool";break;case a.UINT32:n="uint32";break;case a.DOUBLE:r=S.WireType.Bit64,n="double";break;case a.FLOAT:r=S.WireType.Bit32,n="float";break;case a.INT64:s=i||p.PbLong.from(t).isZero(),n="int64";break;case a.UINT64:s=i||p.PbULong.from(t).isZero(),n="uint64";break;case a.FIXED64:s=i||p.PbULong.from(t).isZero(),r=S.WireType.Bit64,n="fixed64";break;case a.BYTES:s=i||!t.byteLength,r=S.WireType.LengthDelimited,n="bytes";break;case a.FIXED32:r=S.WireType.Bit32,n="fixed32";break;case a.SFIXED32:r=S.WireType.Bit32,n="sfixed32";break;case a.SFIXED64:s=i||p.PbLong.from(t).isZero(),r=S.WireType.Bit64,n="sfixed64";break;case a.SINT32:n="sint32";break;case a.SINT64:s=i||p.PbLong.from(t).isZero(),n="sint64"}return[r,n,i||s]}}function k(e,t,n){let r,i,a=n;for(let s of e.fields){let e=s.localName;if(s.oneof){const n=a[s.oneof];if(void 0==(null===n||void 0===n?void 0:n.oneofKind))continue;if(r=n[e],i=t[s.oneof],i.oneofKind=n.oneofKind,void 0==r){delete i[e];continue}}else if(r=a[e],i=t,void 0==r)continue;switch(s.repeat&&(i[e].length=r.length),s.kind){case"scalar":case"enum":if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=r[n];else i[e]=r;break;case"message":let t=s.T();if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=s.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}const x={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},_={ignoreUnknownFields:!1};const I=Object.values;function T(e,t,n){if(t===n)return!0;if(e!==a.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!=i[a])return!1;return!0}function O(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!T(e,t[r],n[r]))return!1;return!0}function A(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}var N=n(334589),C=n(580945);const R=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class F{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(c),this.options=null!==n&&void 0!==n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},R),{[r]:{value:this}})),this.refTypeCheck=new l(this),this.refJsonReader=new y(this),this.refJsonWriter=new b(this),this.refBinReader=new v(this),this.refBinWriter=new E(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},r,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=w(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&k(this,t,e),t}clone(e){let t=this.create();return k(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],s=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?a.INT32:r.T;if(!(r.repeat?O(e,i,s):T(e,i,s)))return!1;break;case"map":if(!("message"==r.V.kind?A(r.V.T(),I(i),I(s)):O("enum"==r.V.kind?a.INT32:r.V.T,I(i),I(s))))return!1;break;case"message":let t=r.T();if(!(r.repeat?A(t,i,s):t.equals(i,s)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){k(this,e,t)}fromBinary(e,t){let n=(0,C.binaryReadOptions)(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},_),e):_}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},x),e):x}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=(0,N.binaryWriteOptions)(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${f(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}const M=new class extends F{constructor(){super("SyncRequest",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>P},{no:2,name:"userId",kind:"scalar",T:9},{no:3,name:"nodeId",kind:"scalar",T:9},{no:4,name:"merkleTree",kind:"scalar",T:9}])}};const L=new class extends F{constructor(){super("SyncResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>P},{no:2,name:"merkleTree",kind:"scalar",T:9}])}};const P=new class extends F{constructor(){super("EncryptedMessage",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:12}])}};const D=new class extends F{constructor(){super("MessageContent",[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"row",kind:"scalar",T:9},{no:3,name:"column",kind:"scalar",T:9},{no:4,name:"stringValue",kind:"scalar",oneof:"value",T:9},{no:5,name:"numberValue",kind:"scalar",oneof:"value",T:9},{no:6,name:"bytesValue",kind:"scalar",oneof:"value",T:12},{no:7,name:"jsonValue",kind:"scalar",oneof:"value",T:9}])}}},13205:(e,t,n)=>{n.r(t),n.d(t,{Sync:()=>zi,SyncFactory:()=>Gi,createSync:()=>Ki,initialSyncState:()=>Vi});var r=n(689702),i=n(477900),a=n(237728),s=n(361369),o=n(883845),c=n(977948),u=n(222396),l=n(672620),f=n(860356),d=n(502787),h=n(71108);l.FiberRefTypeId,f.fiberRefMake,f.fiberRefMakeWith,f.fiberRefMakeContext,f.fiberRefMakeRuntimeFlags;const p=l.fiberRefUnsafeMake,m=(l.fiberRefUnsafeMakeHashSet,l.fiberRefUnsafeMakeContext,f.fiberRefUnsafeMakeSupervisor,l.fiberRefUnsafeMakePatch,l.fiberRefGet,l.fiberRefGetAndSet,l.fiberRefGetAndUpdate,l.fiberRefGetAndUpdateSome,l.fiberRefGetWith,l.fiberRefSet,l.fiberRefDelete,l.fiberRefReset,l.fiberRefModify,l.fiberRefModifySome,l.fiberRefUpdate,l.fiberRefUpdateSome,l.fiberRefUpdateAndGet,l.fiberRefUpdateSomeAndGet,l.currentConcurrency,l.currentRequestBatching,d.currentCache,d.currentCacheEnabled,l.currentContext),g=(l.currentSchedulingPriority,l.currentMaxOpsBeforeYield,l.currentUnhandledErrorLogLevel,l.currentLogAnnotations,f.currentLoggers,l.currentLogLevel,f.currentMinimumLogLevel,l.currentLogSpan,f.currentRuntimeFlags,h.currentScheduler,f.currentSupervisor,l.currentMetricLabels,l.currentTracerEnabled);l.currentTracerTimingEnabled,l.currentTracerSpanAnnotations,l.currentTracerSpanLinks,l.currentInterruptedCause;var y=n(606517),b=n(856572),S=n(767316),w=n(429249),v=n(243216);const E=Symbol.for("@effect/platform/Headers"),k=e=>b.hasProperty(e,E),x=Object.assign(Object.create(null),{[E]:E}),_=e=>Object.assign(Object.create(x),e),I=u.declare(k,{identifier:"Headers",equivalence:()=>S.getEquivalence(v.Equivalence)}),T=(u.String,u.String,u.String,s.identity,Object.create(x)),O=e=>{if(void 0===e)return T;if(Symbol.iterator in e){const t=Object.create(x);for(const[n,r]of e)t[n.toLowerCase()]=r;return t}const t=Object.create(x);for(const[n,r]of Object.entries(e))Array.isArray(r)?t[n.toLowerCase()]=r.join(", "):void 0!==r&&(t[n.toLowerCase()]=r);return t},A=(0,s.dual)(3,((e,t,n)=>{const r=_(e);return r[t.toLowerCase()]=n,r})),N=(0,s.dual)(2,((e,t)=>_({...e,...O(t)}))),C=(0,s.dual)(2,((e,t)=>{const n=_(e);return delete n[t.toLowerCase()],n})),R=(0,s.dual)(2,((e,t)=>{const n={...e},r=t=>{if("string"===typeof t){const r=t.toLowerCase();r in e&&(n[r]=w.make(e[r]))}else for(const r in e)t.test(r)&&(n[r]=w.make(e[r]))};if(Array.isArray(t))for(let i=0;i<t.length;i++)r(t[i]);else r(t);return n})),F=(0,y.globalValue)("@effect/platform/Headers/currentRedactedNames",(()=>p(["authorization","cookie","set-cookie","x-api-key"])));var M=n(630768),L=n(757964);const P=e=>{const t=Symbol.iterator in e?M.fromIterable(e):Object.entries(e),n=[];for(const[r,i]of t)if(Array.isArray(i))for(let e=0;e<i.length;e++)void 0!==i[e]&&n.push([r,String(i[e])]);else void 0!==i&&n.push([r,String(i)]);return n},D=[],U=(0,s.dual)(2,((e,t)=>{const n=P(t),r=n.map((([e])=>e));return M.appendAll(M.filter(e,(([e])=>r.includes(e))),n)})),j=()=>{if("location"in globalThis&&void 0!==globalThis.location&&void 0!==globalThis.location.origin&&void 0!==globalThis.location.pathname)return location.origin+location.pathname};var B=n(695181),q=n(420634),$=n(128420),W=n(762738),z=n(896949),V=n(953533),G=n(366775),K=n(645914);const J=Symbol.for("effect/QueueEnqueue"),H=Symbol.for("effect/QueueDequeue"),Y=Symbol.for("effect/QueueStrategy"),Z=Symbol.for("effect/BackingQueue"),Q={_A:e=>e},X={_A:e=>e},ee={_In:e=>e},te={_Out:e=>e};class ne{queue;takers;shutdownHook;shutdownFlag;strategy;[J]=ee;[H]=te;constructor(e,t,n,r,i){this.queue=e,this.takers=t,this.shutdownHook=n,this.shutdownFlag=r,this.strategy=i}pipe(){return(0,V.pipeArguments)(this,arguments)}capacity(){return this.queue.capacity()}get size(){return l.suspend((()=>l.catchAll(this.unsafeSize(),(()=>l.interrupt))))}unsafeSize(){return K.get(this.shutdownFlag)?c.none():c.some(this.queue.length()-G.length(this.takers)+this.strategy.surplusSize())}get isEmpty(){return l.map(this.size,(e=>e<=0))}get isFull(){return l.map(this.size,(e=>e>=this.capacity()))}get shutdown(){return l.uninterruptible(l.withFiberRuntime((e=>((0,s.pipe)(this.shutdownFlag,K.set(!0)),(0,s.pipe)(f.forEachConcurrentDiscard(ge(this.takers),(t=>l.deferredInterruptWith(t,e.id())),!1,!1),l.zipRight(this.strategy.shutdown),l.whenEffect(l.deferredSucceed(this.shutdownHook,void 0)),l.asVoid)))))}get isShutdown(){return l.sync((()=>K.get(this.shutdownFlag)))}get awaitShutdown(){return l.deferredAwait(this.shutdownHook)}isActive(){return!K.get(this.shutdownFlag)}unsafeOffer(e){if(K.get(this.shutdownFlag))return!1;let t;if(0===this.queue.length()){const n=(0,s.pipe)(this.takers,G.poll(G.EmptyMutableQueue));n!==G.EmptyMutableQueue?(pe(n,e),t=!0):t=!1}else t=!1;if(t)return!0;const n=this.queue.offer(e);return Se(this.strategy,this.queue,this.takers),n}offer(e){return l.suspend((()=>{if(K.get(this.shutdownFlag))return l.interrupt;let t;if(0===this.queue.length()){const n=(0,s.pipe)(this.takers,G.poll(G.EmptyMutableQueue));n!==G.EmptyMutableQueue?(pe(n,e),t=!0):t=!1}else t=!1;if(t)return l.succeed(!0);const n=this.queue.offer(e);return Se(this.strategy,this.queue,this.takers),n?l.succeed(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)}))}offerAll(e){return l.suspend((()=>{if(K.get(this.shutdownFlag))return l.interrupt;const t=M.fromIterable(e),n=0===this.queue.length()?M.fromIterable(ye(this.takers,t.length)):M.empty,[r,i]=(0,s.pipe)(t,M.splitAt(n.length));for(let e=0;e<n.length;e++){const t=n[e],i=r[e];pe(t,i)}if(0===i.length)return l.succeed(!0);const a=this.queue.offerAll(i);return Se(this.strategy,this.queue,this.takers),$.isEmpty(a)?l.succeed(!0):this.strategy.handleSurplus(a,this.queue,this.takers,this.shutdownFlag)}))}get take(){return l.withFiberRuntime((e=>{if(K.get(this.shutdownFlag))return l.interrupt;const t=this.queue.poll(G.EmptyMutableQueue);if(t!==G.EmptyMutableQueue)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),l.succeed(t);{const t=l.deferredUnsafeMake(e.id());return(0,s.pipe)(l.suspend((()=>((0,s.pipe)(this.takers,G.offer(t)),Se(this.strategy,this.queue,this.takers),K.get(this.shutdownFlag)?l.interrupt:l.deferredAwait(t)))),l.onInterrupt((()=>l.sync((()=>be(this.takers,t))))))}}))}get takeAll(){return l.suspend((()=>K.get(this.shutdownFlag)?l.interrupt:l.sync((()=>{const e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),$.fromIterable(e)}))))}takeUpTo(e){return l.suspend((()=>K.get(this.shutdownFlag)?l.interrupt:l.sync((()=>{const t=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),$.fromIterable(t)}))))}takeBetween(e,t){return l.suspend((()=>re(this,e,t,$.empty())))}}const re=(e,t,n,r)=>n<t?l.succeed(r):(0,s.pipe)(ue(e,n),l.flatMap((i=>{const a=t-i.length;return 1===a?(0,s.pipe)(ce(e),l.map((e=>(0,s.pipe)(r,$.appendAll(i),$.append(e))))):a>1?(0,s.pipe)(ce(e),l.flatMap((t=>re(e,a-1,n-i.length-1,(0,s.pipe)(r,$.appendAll(i),$.append(t)))))):l.succeed((0,s.pipe)(r,$.appendAll(i)))}))),ie=(e,t)=>(0,s.pipe)(l.deferredMake(),l.map((n=>((e,t,n,r,i)=>new ne(e,t,n,r,i))(e,G.unbounded(),n,K.make(!1),t))));class ae{mutable;[Z]=X;constructor(e){this.mutable=e}poll(e){return G.poll(this.mutable,e)}pollUpTo(e){return G.pollUpTo(this.mutable,e)}offerAll(e){return G.offerAll(this.mutable,e)}offer(e){return G.offer(this.mutable,e)}capacity(){return G.capacity(this.mutable)}length(){return G.length(this.mutable)}}const se=e=>new ae(e),oe=(0,s.dual)(2,((e,t)=>e.offer(t))),ce=e=>e.take,ue=(0,s.dual)(2,((e,t)=>e.takeUpTo(t))),le=()=>new de,fe=()=>new he;class de{[Y]=Q;putters=G.unbounded();surplusSize(){return G.length(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!G.isEmpty(this.putters)&&!G.isEmpty(e);){const t=G.poll(e,void 0),n=G.poll(this.putters,void 0);n[2]&&pe(n[1],!0),pe(t,n[0])}}get shutdown(){return(0,s.pipe)(l.fiberId,l.flatMap((e=>(0,s.pipe)(l.sync((()=>ge(this.putters))),l.flatMap((t=>f.forEachConcurrentDiscard(t,(([t,n,r])=>r?(0,s.pipe)(l.deferredInterruptWith(n,e),l.asVoid):l.void),!1,!1)))))))}handleSurplus(e,t,n,r){return l.withFiberRuntime((i=>{const a=l.deferredUnsafeMake(i.id());return(0,s.pipe)(l.suspend((()=>(this.unsafeOffer(e,a),this.unsafeOnQueueEmptySpace(t,n),Se(this,t,n),K.get(r)?l.interrupt:l.deferredAwait(a)))),l.onInterrupt((()=>l.sync((()=>this.unsafeRemove(a))))))}))}unsafeOnQueueEmptySpace(e,t){let n=!0;for(;n&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){const r=(0,s.pipe)(this.putters,G.poll(G.EmptyMutableQueue));if(r===G.EmptyMutableQueue)n=!1;else{const n=e.offer(r[0]);n&&r[2]?pe(r[1],!0):n||me(this.putters,(0,s.pipe)(ge(this.putters),$.prepend(r))),Se(this,e,t)}}}unsafeOffer(e,t){const n=M.fromIterable(e);for(let r=0;r<n.length;r++){const e=n[r];r===n.length-1?(0,s.pipe)(this.putters,G.offer([e,t,!0])):(0,s.pipe)(this.putters,G.offer([e,t,!1]))}}unsafeRemove(e){me(this.putters,(0,s.pipe)(ge(this.putters),$.filter((([,t])=>t!==e))))}}class he{[Y]=Q;surplusSize(){return 0}get shutdown(){return l.void}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,n,r){return l.succeed(!1)}unsafeOnQueueEmptySpace(e,t){}}const pe=(e,t)=>l.deferredUnsafeDone(e,l.succeed(t)),me=(e,t)=>(0,s.pipe)(e,G.offerAll(t)),ge=e=>(0,s.pipe)(e,G.pollUpTo(Number.POSITIVE_INFINITY)),ye=(e,t)=>(0,s.pipe)(e,G.pollUpTo(t)),be=(e,t)=>{me(e,(0,s.pipe)(ge(e),$.filter((e=>t!==e))))},Se=(e,t,n)=>{let r=!0;for(;r&&0!==t.length();){const i=(0,s.pipe)(n,G.poll(G.EmptyMutableQueue));if(i!==G.EmptyMutableQueue){const a=t.poll(G.EmptyMutableQueue);a!==G.EmptyMutableQueue?(pe(i,a),e.unsafeOnQueueEmptySpace(t,n)):me(n,(0,s.pipe)(ge(n),$.prepend(i))),r=!0}else r=!1}r&&0===t.length()&&!G.isEmpty(n)&&e.onCompleteTakersWithEmptyQueue(n)},we=e=>(0,s.pipe)(l.sync((()=>G.bounded(e))),l.flatMap((e=>ie(se(e),le())))),ve=()=>(0,s.pipe)(l.sync((()=>G.unbounded())),l.flatMap((e=>ie(se(e),fe())))),Ee=e=>e.size,ke=e=>e.shutdown,xe=oe,_e=ce;var Ie=n(55040),Te=(n(43977),n(599571));n(286780),n(804676),n(232628);var Oe=n(908993);n(992102);const Ae="Continue",Ne="Close",Ce="Yield",Re=Symbol.for("effect/ChannelChildExecutorDecision"),Fe={[Re]:Re},Me=e=>{const t=Object.create(Fe);return t._tag=Ae,t},Le="ContinuationK",Pe=Symbol.for("effect/ChannelContinuation"),De={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};class Ue{onSuccess;onHalt;_tag=Le;[Pe]=De;constructor(e,t){this.onSuccess=e,this.onHalt=t}onExit(e){return z.isFailure(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class je{finalizer;_tag="ContinuationFinalizer";[Pe]=De;constructor(e){this.finalizer=e}}const Be="PullAfterNext",qe="PullAfterAllEnqueued",$e=Symbol.for("effect/ChannelUpstreamPullStrategy"),We={[$e]:{_A:e=>e}},ze=e=>{const t=Object.create(We);return t._tag=Be,t.emitSeparator=e,t},Ve="BracketOut",Ge="Bridge",Ke="ConcatAll",Je="Emit",He="Ensuring",Ye="Fail",Ze="Fold",Qe="FromEffect",Xe="PipeTo",et="Provide",tt="Read",nt="Succeed",rt="SucceedNow",it="Suspend",at=Symbol.for("effect/Channel"),st={[at]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},pipe(){return(0,V.pipeArguments)(this,arguments)}},ot=e=>(0,b.hasProperty)(e,at)||i.isEffect(e),ct=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ve,n.acquire=()=>e,n.finalizer=t,n})),ut=(e,t,n)=>{const r=Object.create(st);return r._tag=Ke,r.combineInners=t,r.combineAll=n,r.onPull=()=>ze(c.none()),r.onEmit=()=>Me,r.value=()=>e,r.k=s.identity,r},lt=(0,s.dual)(4,((e,t,n,r)=>{const i=Object.create(st);return i._tag=Ke,i.combineInners=n,i.combineAll=r,i.onPull=()=>ze(c.none()),i.onEmit=()=>Me,i.value=()=>e,i.k=t,i})),ft=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ge,n.input=t,n.channel=e,n})),dt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=He,n.channel=e,n.finalizer=t,n})),ht=e=>pt(q.fail(e)),pt=e=>mt((()=>e)),mt=e=>{const t=Object.create(st);return t._tag=Ye,t.error=e,t},gt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ze,n.channel=e,n.k=new Ue(t,pt),n})),yt=e=>{const t=Object.create(st);return t._tag=Qe,t.effect=()=>e,t},bt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Xe,n.left=()=>e,n.right=()=>t,n})),St=e=>wt({onInput:e.onInput,onFailure:t=>L.match(q.failureOrCause(t),{onLeft:e.onFailure,onRight:pt}),onDone:e.onDone}),wt=e=>{const t=Object.create(st);return t._tag=tt,t.more=e.onInput,t.done=new Ue(e.onDone,e.onFailure),t},vt=e=>xt((()=>e)),Et=e=>{const t=Object.create(st);return t._tag=rt,t.terminal=e,t},kt=e=>{const t=Object.create(st);return t._tag=it,t.channel=e,t},xt=e=>{const t=Object.create(st);return t._tag=nt,t.evaluate=e,t},_t=Et(void 0),It=e=>{const t=Object.create(st);return t._tag=Je,t.out=e,t},Tt="Done",Ot="Emit",At="FromEffect",Nt="Read",Ct=Symbol.for("effect/ChannelState"),Rt={[Ct]:{_E:e=>e,_R:e=>e}},Ft=()=>{const e=Object.create(Rt);return e._tag=Tt,e},Mt=()=>{const e=Object.create(Rt);return e._tag=Ot,e},Lt=e=>{const t=Object.create(Rt);return t._tag=At,t.effect=e,t},Pt=(e,t,n,r)=>{const i=Object.create(Rt);return i._tag=Nt,i.upstream=e,i.onEffect=t,i.onEmit=n,i.onDone=r,i},Dt=e=>e._tag===At,Ut=e=>Dt(e)?i.ignore(e.effect):void 0,jt="PullFromChild",Bt="PullFromUpstream",qt="DrainChildExecutors",$t="Emit";class Wt{childExecutor;parentSubexecutor;onEmit;_tag=jt;constructor(e,t,n){this.childExecutor=e,this.parentSubexecutor=t,this.onEmit=n}close(e){const t=this.childExecutor.close(e),n=this.parentSubexecutor.close(e);return void 0!==t&&void 0!==n?i.zipWith(i.exit(t),i.exit(n),((e,t)=>(0,s.pipe)(e,z.zipRight(t)))):void 0!==t?t:void 0!==n?n:void 0}enqueuePullFromChild(e){return this}}class zt{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=Bt;constructor(e,t,n,r,i,a,s,o){this.upstreamExecutor=e,this.createChild=t,this.lastDone=n,this.activeChildExecutors=r,this.combineChildResults=i,this.combineWithChildResult=a,this.onPull=s,this.onEmit=o}close(e){const t=this.upstreamExecutor.close(e),n=[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>z.zipRight(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0);return n}enqueuePullFromChild(e){return new zt(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class Vt{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=qt;constructor(e,t,n,r,i,a,s){this.upstreamExecutor=e,this.lastDone=t,this.activeChildExecutors=n,this.upstreamDone=r,this.combineChildResults=i,this.combineWithChildResult=a,this.onPull=s}close(e){const t=this.upstreamExecutor.close(e),n=[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>z.zipRight(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0);return n}enqueuePullFromChild(e){return new Vt(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class Gt{value;next;_tag=$t;constructor(e,t){this.value=e,this.next=t}close(e){const t=this.next.close(e);return t}enqueuePullFromChild(e){return this}}const Kt="Pulled",Jt="NoUpstream",Ht=Symbol.for("effect/ChannelUpstreamPullRequest"),Yt={[Ht]:{_A:e=>e}},Zt=e=>{const t=Object.create(Yt);return t._tag=Kt,t.value=e,t};class Qt{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,t,n){this._currentChannel=e,this._executeCloseLastSubstream=n,this._providedEnv=t}run(){let e;for(;void 0===e;)if(void 0!==this._cancelled)e=this.processCancellation();else if(void 0!==this._activeSubexecutor)e=this.runSubexecutor();else try{if(void 0===this._currentChannel)e=Ft();else if(i.isEffect(this._currentChannel))this._currentChannel=yt(this._currentChannel);else switch(this._currentChannel._tag){case Ve:e=this.runBracketOut(this._currentChannel);break;case Ge:{const t=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,void 0!==this._input){const n=this._input;this._input=void 0;const r=()=>i.flatMap(t.awaitRead(),(()=>i.suspend((()=>{const e=n.run();switch(e._tag){case Tt:return z.match(n.getDone(),{onFailure:e=>t.error(e),onSuccess:e=>t.done(e)});case Ot:return i.flatMap(t.emit(n.getEmit()),(()=>r()));case At:return i.matchCauseEffect(e.effect,{onFailure:e=>t.error(e),onSuccess:()=>r()});case Nt:return tn(e,(()=>r()),(e=>t.error(e)))}}))));e=Lt(i.flatMap(i.forkDaemon(r()),(e=>i.sync((()=>this.addFinalizer((t=>i.flatMap(Te.interrupt(e),(()=>i.suspend((()=>{const e=this.restorePipe(t,n);return void 0!==e?e:i.void})))))))))))}break}case Ke:{const e=new Qt(this._currentChannel.value(),this._providedEnv,(e=>i.sync((()=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;this._closeLastSubstream=(0,s.pipe)(t,i.zipRight(e))}))));e._input=this._input;const t=this._currentChannel;this._activeSubexecutor=new zt(e,(e=>t.k(e)),void 0,[],((e,n)=>t.combineInners(e,n)),((e,n)=>t.combineAll(e,n)),(e=>t.onPull(e)),(e=>t.onEmit(e))),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case Je:this._emitted=this._currentChannel.out,this._currentChannel=void 0!==this._activeSubexecutor?void 0:_t,e=Mt();break;case He:this.runEnsuring(this._currentChannel);break;case Ye:e=this.doneHalt(this._currentChannel.error());break;case Ze:this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break;case Qe:{const t=void 0===this._providedEnv?this._currentChannel.effect():(0,s.pipe)(this._currentChannel.effect(),i.provide(this._providedEnv));e=Lt(i.matchCauseEffect(t,{onFailure:e=>{const t=this.doneHalt(e);return void 0!==t&&Dt(t)?t.effect:i.void},onSuccess:e=>{const t=this.doneSucceed(e);return void 0!==t&&Dt(t)?t.effect:i.void}}));break}case Xe:{const e=this._input,t=new Qt(this._currentChannel.left(),this._providedEnv,(e=>this._executeCloseLastSubstream(e)));t._input=e,this._input=t,this.addFinalizer((t=>{const n=this.restorePipe(t,e);return void 0!==n?n:i.void})),this._currentChannel=this._currentChannel.right();break}case et:{const e=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer((()=>i.sync((()=>{this._providedEnv=e}))));break}case tt:{const t=this._currentChannel;e=Pt(this._input,s.identity,(e=>{try{this._currentChannel=t.more(e)}catch(n){this._currentChannel=t.done.onExit(z.die(n))}}),(e=>{this._currentChannel=(e=>t.done.onExit(e))(e)}));break}case nt:e=this.doneSucceed(this._currentChannel.evaluate());break;case rt:e=this.doneSucceed(this._currentChannel.terminal);break;case it:this._currentChannel=this._currentChannel.channel();break;default:this._currentChannel._tag}}catch(t){this._currentChannel=pt(q.die(t))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){const t=[];let n=this._doneStack.pop();for(;n;)"ContinuationFinalizer"===n._tag&&t.push(n.finalizer),n=this._doneStack.pop();const r=0===t.length?i.void:en(t,e);return this.storeInProgressFinalizer(r),r}popNextFinalizers(){const e=[];for(;0!==this._doneStack.length;){const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return e;e.push(t),this._doneStack.pop()}return e}restorePipe(e,t){const n=this._input;if(this._input=t,void 0!==n){return n.close(e)}return i.void}close(e){let t;const n=this._inProgressFinalizer;let r;void 0!==n&&(t=(0,s.pipe)(n,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const a=this.popAllFinalizers(e);void 0!==a&&(r=(0,s.pipe)(a,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const o=void 0===this._activeSubexecutor?void 0:this._activeSubexecutor.close(e);if(void 0!==o||void 0!==t||void 0!==r)return(0,s.pipe)(i.exit(Xt(o)),i.zip(i.exit(Xt(t))),i.zip(i.exit(Xt(r))),i.map((([[e,t],n])=>(0,s.pipe)(e,z.zipRight(t),z.zipRight(n)))),i.uninterruptible,i.flatMap((e=>i.suspend((()=>e)))))}doneSucceed(e){if(0===this._doneStack.length)return this._done=z.succeed(e),this._currentChannel=void 0,Ft();const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return this._doneStack.pop(),void(this._currentChannel=t.onSuccess(e));const n=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=n.reverse(),this._done=z.succeed(e),this._currentChannel=void 0,Ft();const r=en(n.map((e=>e.finalizer)),z.succeed(e));this.storeInProgressFinalizer(r);const a=(0,s.pipe)(r,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneSucceed(e))))));return Lt(a)}doneHalt(e){if(0===this._doneStack.length)return this._done=z.failCause(e),this._currentChannel=void 0,Ft();const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return this._doneStack.pop(),void(this._currentChannel=t.onHalt(e));const n=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=n.reverse(),this._done=z.failCause(e),this._currentChannel=void 0,Ft();const r=en(n.map((e=>e.finalizer)),z.failCause(e));this.storeInProgressFinalizer(r);const a=(0,s.pipe)(r,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneHalt(e))))));return Lt(a)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Ft()}runBracketOut(e){const t=i.uninterruptible(i.matchCauseEffect(this.provide(e.acquire()),{onFailure:e=>i.sync((()=>{this._currentChannel=pt(e)})),onSuccess:t=>i.sync((()=>{this.addFinalizer((n=>this.provide(e.finalizer(t,n)))),this._currentChannel=It(t)}))}));return Lt(t)}provide(e){return void 0===this._providedEnv?e:(0,s.pipe)(e,i.provide(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new je(e))}runSubexecutor(){const e=this._activeSubexecutor;switch(e._tag){case jt:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case Bt:return this.pullFromUpstream(e);case qt:return this.drainChildExecutors(e);case $t:return this._emitted=e.value,this._activeSubexecutor=e.next,Mt()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){const t=z.match(e,{onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)});return this._activeSubexecutor=void 0,void 0===t?i.void:(e=>Dt(e)?e.effect:i.void)(t)}finishSubexecutorWithCloseEffect(e,...t){this.addFinalizer((()=>(0,s.pipe)(t,i.forEach((t=>(0,s.pipe)(i.sync((()=>t(e))),i.flatMap((e=>void 0!==e?e:i.void)))),{discard:!0}))));const n=(0,s.pipe)(e,z.match({onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)}));return this._activeSubexecutor=void 0,n}applyUpstreamPullStrategy(e,t,n){switch(n._tag){case Be:{const r=!e||t.some((e=>void 0!==e));return[n.emitSeparator,r?[void 0,...t]:t]}case qe:{const r=!e||t.some((e=>void 0!==e));return[n.emitSeparator,r?[...t,void 0]:t]}}}pullFromChild(e,t,n,r){return Pt(e,s.identity,(i=>{const a=n(i);switch(a._tag){case Ae:break;case Ne:this.finishWithDoneValue(e,t,a.value);break;case Ce:{const e=t.enqueuePullFromChild(r);this.replaceSubexecutor(e);break}}this._activeSubexecutor=new Gt(i,this._activeSubexecutor)}),z.match({onFailure:n=>{const r=this.handleSubexecutorFailure(e,t,n);return void 0===r?void 0:Ut(r)},onSuccess:n=>{this.finishWithDoneValue(e,t,n)}}))}finishWithDoneValue(e,t,n){const r=t;switch(r._tag){case Bt:{const t=new zt(r.upstreamExecutor,r.createChild,void 0!==r.lastDone?r.combineChildResults(r.lastDone,n):n,r.activeChildExecutors,r.combineChildResults,r.combineWithChildResult,r.onPull,r.onEmit);this._closeLastSubstream=e.close(z.succeed(n)),this.replaceSubexecutor(t);break}case qt:{const t=new Vt(r.upstreamExecutor,void 0!==r.lastDone?r.combineChildResults(r.lastDone,n):n,r.activeChildExecutors,r.upstreamDone,r.combineChildResults,r.combineWithChildResult,r.onPull);this._closeLastSubstream=e.close(z.succeed(n)),this.replaceSubexecutor(t);break}}}handleSubexecutorFailure(e,t,n){return this.finishSubexecutorWithCloseEffect(z.failCause(n),(e=>t.close(e)),(t=>e.close(t)))}pullFromUpstream(e){if(0===e.activeChildExecutors.length)return this.performPullFromUpstream(e);const t=e.activeChildExecutors[0],n=new zt(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(void 0===t)return this.performPullFromUpstream(n);this.replaceSubexecutor(new Wt(t.childExecutor,n,t.onEmit))}performPullFromUpstream(e){return Pt(e.upstreamExecutor,(e=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(t),i.zipRight(e))}),(t=>{if(void 0!==this._closeLastSubstream){const n=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(n),i.map((()=>{const n=new Qt(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;const[r,i]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Zt(t)));this._activeSubexecutor=new Wt(n,new zt(e.upstreamExecutor,e.createChild,e.lastDone,i,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),c.isSome(r)&&(this._activeSubexecutor=new Gt(r.value,this._activeSubexecutor))})))}const n=new Qt(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;const[r,a]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Zt(t)));this._activeSubexecutor=new Wt(n,new zt(e.upstreamExecutor,e.createChild,e.lastDone,a,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),c.isSome(r)&&(this._activeSubexecutor=new Gt(r.value,this._activeSubexecutor))}),(t=>{if(e.activeChildExecutors.some((e=>void 0!==e))){const t=new Vt(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(void 0!==this._closeLastSubstream){const e=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(e),i.map((()=>this.replaceSubexecutor(t))))}return void this.replaceSubexecutor(t)}const n=this._closeLastSubstream,r=this.finishSubexecutorWithCloseEffect((0,s.pipe)(t,z.map((t=>e.combineWithChildResult(e.lastDone,t)))),(()=>n),(t=>e.upstreamExecutor.close(t)));return void 0===r?void 0:Ut(r)}))}drainChildExecutors(e){if(0===e.activeChildExecutors.length){const t=this._closeLastSubstream;return void 0!==t&&this.addFinalizer((()=>i.succeed(t))),this.finishSubexecutorWithCloseEffect(e.upstreamDone,(()=>t),(t=>e.upstreamExecutor.close(t)))}const t=e.activeChildExecutors[0],n=e.activeChildExecutors.slice(1);if(void 0===t){const[t,r]=this.applyUpstreamPullStrategy(!0,n,e.onPull((e=>{const t=Object.create(Yt);return t._tag=Jt,t.activeDownstreamCount=e,t})(n.reduce(((e,t)=>void 0!==t?e+1:e),0))));return this.replaceSubexecutor(new Vt(e.upstreamExecutor,e.lastDone,r,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),c.isSome(t)?(this._emitted=t.value,Mt()):void 0}const r=new Vt(e.upstreamExecutor,e.lastDone,n,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new Wt(t.childExecutor,r,t.onEmit))}}const Xt=e=>void 0!==e?e:i.void,en=(e,t)=>(0,s.pipe)(i.forEach(e,(e=>i.exit(e(t)))),i.map((e=>(0,s.pipe)(z.all(e),c.getOrElse((()=>z.void))))),i.flatMap((e=>i.suspend((()=>e))))),tn=(e,t,n)=>{const r=[e],a=()=>{const e=r.pop();if(void 0===e||void 0===e.upstream)return i.dieMessage("Unexpected end of input for channel execution");const o=e.upstream.run();switch(o._tag){case Ot:{const o=e.onEmit(e.upstream.getEmit());return 0===r.length?void 0===o?i.suspend(t):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:t})):void 0===o?i.suspend((()=>a())):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}))}case Tt:{const o=e.onDone(e.upstream.getDone());return 0===r.length?void 0===o?i.suspend(t):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:t})):void 0===o?i.suspend((()=>a())):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}))}case At:return r.push(e),(0,s.pipe)(e.onEffect(o.effect),i.catchAllCause((t=>i.suspend((()=>{const n=e.onDone(z.failCause(t));return void 0===n?i.void:n})))),i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}));case Nt:return r.push(e),r.push(o),i.suspend((()=>a()))}};return a()},nn="Done",rn="Await",an=Symbol.for("effect/ChannelMergeDecision"),sn={[an]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},on=e=>{const t=Object.create(sn);return t._tag=rn,t.f=e,t},cn="BothRunning",un="LeftDone",ln="RightDone",fn=Symbol.for("effect/ChannelMergeState"),dn={[fn]:fn},hn=(e,t)=>{const n=Object.create(dn);return n._tag=cn,n.left=e,n.right=t,n},pn=e=>{const t=Object.create(dn);return t._tag=un,t.f=e,t},mn=e=>{const t=Object.create(dn);return t._tag=ln,t.f=e,t},gn="BackPressure",yn="BufferSliding",bn=Symbol.for("effect/ChannelMergeStrategy"),Sn={[bn]:bn},wn=e=>{const t=Object.create(Sn);return t._tag=gn,t},vn=e=>{const t=Object.create(Sn);return t._tag=yn,t},En=(0,s.dual)(2,((e,{onBackPressure:t,onBufferSliding:n})=>{switch(e._tag){case gn:return t();case yn:return n()}})),kn="Empty",xn="Emit",_n="Error",In="Done",Tn=e=>({_tag:kn,notifyProducer:e}),On=e=>({_tag:xn,notifyConsumers:e}),An=e=>({_tag:_n,cause:e}),Nn=e=>({_tag:In,done:e});class Cn{ref;constructor(e){this.ref=e}awaitRead(){return i.flatten(Ie.modify(this.ref,(e=>e._tag===kn?[W.await(e.notifyProducer),e]:[i.void,e])))}get close(){return i.fiberIdWith((e=>this.error(q.interrupt(e))))}done(e){return i.flatten(Ie.modify(this.ref,(t=>{switch(t._tag){case kn:return[W.await(t.notifyProducer),t];case xn:return[i.forEach(t.notifyConsumers,(t=>W.succeed(t,L.left(e))),{discard:!0}),Nn(e)];case _n:case In:return[i.interrupt,t]}})))}emit(e){return i.flatMap(W.make(),(t=>i.flatten(Ie.modify(this.ref,(n=>{switch(n._tag){case kn:return[W.await(n.notifyProducer),n];case xn:{const r=n.notifyConsumers[0],i=n.notifyConsumers.slice(1);if(void 0!==r)return[W.succeed(r,L.right(e)),0===i.length?Tn(t):On(i)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case _n:case In:return[i.interrupt,n]}})))))}error(e){return i.flatten(Ie.modify(this.ref,(t=>{switch(t._tag){case kn:return[W.await(t.notifyProducer),t];case xn:return[i.forEach(t.notifyConsumers,(t=>W.failCause(t,e)),{discard:!0}),An(e)];case _n:case In:return[i.interrupt,t]}})))}get take(){return this.takeWith((e=>z.failCause(q.map(e,L.left))),(e=>z.succeed(e)),(e=>z.fail(L.right(e))))}takeWith(e,t,n){return i.flatMap(W.make(),(r=>i.flatten(Ie.modify(this.ref,(a=>{switch(a._tag){case kn:return[i.zipRight(W.succeed(a.notifyProducer,void 0),i.matchCause(W.await(r),{onFailure:e,onSuccess:L.match({onLeft:n,onRight:t})})),On([r])];case xn:return[i.matchCause(W.await(r),{onFailure:e,onSuccess:L.match({onLeft:n,onRight:t})}),On([...a.notifyConsumers,r])];case _n:return[i.succeed(e(a.cause)),a];case In:return[i.succeed(n(a.done)),a]}})))))}}const Rn=()=>(0,s.pipe)(W.make(),i.flatMap((e=>Ie.make(Tn(e)))),i.map((e=>new Cn(e))));n(820808),n(127514);const Fn=(0,s.dual)(2,((e,t)=>lt(e,t,(()=>{}),(()=>{})))),Mn=(0,s.dual)(2,((e,t)=>dt(e,(()=>t)))),Ln=e=>gt(e,s.identity),Pn=e=>Gn(e.takeWith(pt,(t=>gt(It(t),(()=>Pn(e)))),vt)),Dn=(0,s.dual)(2,((e,t)=>gt(e,(e=>xt((()=>t(e))))))),Un=(0,s.dual)(2,((e,t)=>{const n=St({onInput:e=>gt(It(t(e)),(()=>n)),onFailure:ht,onDone:Et});return bt(e,n)})),jn=e=>t=>Bn(e)(t,s.constVoid),Bn=({bufferSize:e=16,concurrency:t,mergeStrategy:n=wn()})=>(r,a)=>(0,s.pipe)(i.gen((function*(o){const u="unbounded"===t?Number.MAX_SAFE_INTEGER:t,l=yield*o(Rn()),f=Pn(l),d=yield*o(i.acquireRelease(we(e),(e=>ke(e)))),h=yield*o(i.acquireRelease(ve(),(e=>ke(e)))),p=yield*o(Ie.make(c.none())),m=yield*o(W.make()),g=(yield*o(i.makeSemaphore(u))).withPermits,y=yield*o(zn(r)),b=e=>(0,s.pipe)(i.flatMap(e,L.match({onLeft:e=>i.succeed(c.some(e)),onRight:e=>i.as(xe(d,i.succeed(L.right(e))),c.none())})),i.repeat({until:e=>c.isSome(e)}),i.flatMap((e=>Ie.update(p,c.match({onNone:()=>c.some(e.value),onSome:t=>c.some(a(t,e.value))})))),i.catchAllCause((e=>q.isInterrupted(e)?i.failCause(e):(0,s.pipe)(xe(d,i.failCause(e)),i.zipRight(W.succeed(m,void 0)),i.asVoid))));return yield*o(i.matchCauseEffect(y,{onFailure:e=>(0,s.pipe)(xe(d,i.failCause(e)),i.zipRight(i.succeed(!1))),onSuccess:L.match({onLeft:e=>i.raceWith(i.interruptible(W.await(m)),i.interruptible(g(u)(i.void)),{onSelfDone:(e,t)=>i.as(Te.interrupt(t),!1),onOtherDone:(t,n)=>i.zipRight(Te.interrupt(n),(0,s.pipe)(Ie.get(p),i.flatMap(c.match({onNone:()=>xe(d,i.succeed(L.left(e))),onSome:t=>xe(d,i.succeed(L.left(a(t,e))))})),i.as(!1)))}),onRight:e=>En(n,{onBackPressure:()=>i.gen((function*(t){const n=yield*t(W.make()),r=(0,s.pipe)(f,bt(e),zn,i.flatMap((e=>i.race(b(e),i.interruptible(W.await(m))))),i.scoped);yield*t(W.succeed(n,void 0),i.zipRight(r),g(1),i.forkScoped),yield*t(W.await(n));return!(yield*t(W.isDone(m)))})),onBufferSliding:()=>i.gen((function*(t){const n=yield*t(W.make()),r=yield*t(W.make()),a=yield*t(Ee(h));yield*t(_e(h),i.flatMap((e=>W.succeed(e,void 0))),i.when((()=>a>=u))),yield*t(xe(h,n));const o=(0,s.pipe)(f,bt(e),zn,i.flatMap((e=>(0,s.pipe)(b(e),i.race(i.interruptible(W.await(m))),i.race(i.interruptible(W.await(n)))))),i.scoped);yield*t(W.succeed(r,void 0),i.zipRight(o),g(1),i.forkScoped),yield*t(W.await(r));return!(yield*t(W.isDone(m)))}))})})}),i.repeat({while:e=>e}),i.forkScoped),[d,l]})),i.map((([e,t])=>{const n=(0,s.pipe)(_e(e),i.flatten,i.matchCause({onFailure:pt,onSuccess:L.match({onLeft:Et,onRight:e=>gt(It(e),(()=>n))})}),Gn);return ft(n,t)})),Kn),qn=(0,s.dual)(3,((e,t,n)=>jn(n)(Un(e,t)))),$n=(0,s.dual)(2,((e,t)=>Kn(i.flatMap(Rn(),(n=>{const r=Pn(n);return i.map(i.all([zn(bt(r,e)),zn(bt(r,t.other)),i.scope]),(([e,r,a])=>{const o=(e,t,n)=>(r,a,s)=>{const o=e=>{const n=e;return n._tag===nn?i.succeed(yt(i.zipRight(Te.interrupt(t),n.effect))):i.map(Te.await(t),z.match({onFailure:e=>yt(n.f(z.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f(z.succeed(e))),onRight:e=>Zn(It(e),c(s(n.f)))})}))};return z.match(e,{onFailure:e=>o(r(z.failCause(e))),onSuccess:L.match({onLeft:e=>o(r(z.succeed(e))),onRight:e=>i.succeed(gt(It(e),(()=>gt(yt(i.forkDaemon(n)),(e=>c(a(e,t)))))))})})},c=n=>{switch(n._tag){case cn:{const a=i.interruptible(Te.join(n.left)),s=i.interruptible(Te.join(n.right));return Gn(i.raceWith(a,s,{onSelfDone:(r,a)=>i.zipRight(Te.interrupt(a),o(r,n.right,e)(t.onSelfDone,hn,(e=>pn(e)))),onOtherDone:(e,a)=>i.zipRight(Te.interrupt(a),o(e,n.left,r)(t.onOtherDone,((e,t)=>hn(t,e)),(e=>mn(e))))}))}case un:return Gn(i.map(i.exit(r),z.match({onFailure:e=>yt(n.f(z.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f(z.succeed(e))),onRight:e=>gt(It(e),(()=>c(pn(n.f))))})})));case ln:return Gn(i.map(i.exit(e),z.match({onFailure:e=>yt(n.f(z.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f(z.succeed(e))),onRight:e=>gt(It(e),(()=>c(mn(n.f))))})})))}};return(0,s.pipe)(yt(i.zipWith(i.forkIn(e,a),i.forkIn(r,a),((e,t)=>hn(e,t)))),gt(c),ft(n))}))}))))),Wn=(i.never,e=>Gn(i.uninterruptibleMask((t=>i.map(Oe.make(),(n=>ct(i.tapErrorCause(t(Oe.extend(e,n)),(e=>Oe.close(n,z.failCause(e)))),((e,t)=>Oe.close(n,t))))))))),zn=e=>i.map(i.acquireRelease(i.sync((()=>new Qt(e,void 0,s.identity))),((e,t)=>{const n=e.close(t);return void 0===n?i.void:n})),(e=>i.suspend((()=>Vn(e.run(),e))))),Vn=(e,t)=>{const n=e;switch(n._tag){case Tt:return z.match(t.getDone(),{onFailure:i.failCause,onSuccess:e=>i.succeed(L.left(e))});case Ot:return i.succeed(L.right(t.getEmit()));case At:return(0,s.pipe)(n.effect,i.flatMap((()=>Vn(t.run(),t))));case Nt:return tn(n,(()=>Vn(t.run(),t)),(e=>i.failCause(e)))}},Gn=e=>Ln(yt(e)),Kn=e=>ut(Wn(e),((e,t)=>e),((e,t)=>e)),Jn=e=>Hn(0,e.length,e),Hn=(e,t,n)=>e===t?_t:(0,s.pipe)(It((0,s.pipe)(n,$.unsafeGet(e))),gt((()=>Hn(e+1,t,n)))),Yn=(0,s.dual)((e=>ot(e[1])),((e,t,n)=>n?.concurrent?$n(e,{other:t,onSelfDone:e=>on((t=>i.suspend((()=>z.zip(e,t))))),onOtherDone:e=>on((t=>i.suspend((()=>z.zip(t,e)))))}):gt(e,(e=>Dn(t,(t=>[e,t])))))),Zn=(0,s.dual)((e=>ot(e[1])),((e,t,n)=>n?.concurrent?Dn(Yn(e,t,{concurrent:!0}),(e=>e[1])):gt(e,(()=>t))));n(131651);var Qn=n(284073);var Xn=n(103611);const er=Xn.unsafeFork,tr=(Xn.unsafeRunSyncExit,Xn.unsafeRunSync);Xn.unsafeRunCallback,Xn.unsafeRunPromise,Xn.unsafeRunPromiseExit,Xn.defaultRuntime,Xn.defaultRuntimeFlags,Xn.make,Xn.FiberFailureCauseId,Xn.isAsyncFiberException,Xn.isFiberFailure,Xn.fiberFailure,Xn.updateRuntimeFlags,Xn.enableRuntimeFlag,Xn.disableRuntimeFlag,Xn.updateContext,Xn.provideService,Xn.updateFiberRefs,Xn.setFiberRef,Xn.deleteFiberRef;n(727652);n(122859),n(91276);n(827964),n(227561);const nr=Symbol.for("effect/Sink"),rr={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};class ir{channel;[nr]=rr;constructor(e){this.channel=e}pipe(){return(0,V.pipeArguments)(this,arguments)}}const ar=e=>new ir(yt(e));i.never;const sr=Symbol.for("effect/Stream"),or={_R:e=>e,_E:e=>e,_A:e=>e};class cr{channel;[sr]=or;constructor(e){this.channel=e}pipe(){return(0,V.pipeArguments)(this,arguments)}}const ur=e=>(0,b.hasProperty)(e,sr)||i.isEffect(e),lr=e=>yr(i.fail(c.some(e))),fr=(0,s.dual)((e=>ur(e[0])),((e,t,n)=>{const r=n?.bufferSize??16;return n?.switch?dr(n?.concurrency,(()=>hr(e,1,r,t)),(n=>hr(e,n,r,t))):dr(n?.concurrency,(()=>new cr(Fn(mr(e),(e=>(0,s.pipe)(e,$.map((e=>mr(t(e)))),$.reduce(_t,((e,t)=>(0,s.pipe)(e,Zn(t))))))))),(r=>new cr((0,s.pipe)(mr(e),Fn(Jn),qn((e=>mr(t(e))),n)))))})),dr=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return e>1?n(e):t()}},hr=(0,s.dual)(4,((e,t,n,r)=>new cr((0,s.pipe)(mr(e),Fn(Jn),qn((e=>mr(r(e))),{concurrency:t,mergeStrategy:vn(),bufferSize:n}))))),pr=(0,s.dual)((e=>ur(e[0])),((e,t)=>fr(e,s.identity,t))),mr=e=>{if("channel"in e)return e.channel;if(i.isEffect(e))return mr(gr(e));throw new TypeError("Expected a Stream.")},gr=e=>(0,s.pipe)(e,i.mapError(c.some),yr),yr=e=>new cr(Gn(i.match(e,{onFailure:c.match({onNone:()=>_t,onSome:ht}),onSuccess:e=>It($.of(e))})));i.never;const br=e=>_r(e,(e=>(0,s.pipe)(i.map(e,(t=>c.some([t,e]))),i.catchAll(c.match({onNone:()=>i.succeed(c.none()),onSome:i.fail}))))),Sr=e=>br((0,s.pipe)(e,i.map($.of))),wr=e=>new cr(Mn(Wn((0,s.pipe)(e,i.map($.of))),i.void)),vr=e=>new cr(kt((()=>mr(e())))),Er=e=>i.map(zn(mr(e)),(e=>(0,s.pipe)(e,i.mapError(c.some),i.flatMap(L.match({onLeft:()=>i.fail(c.none()),onRight:i.succeed}))))),kr=(0,s.dual)((e=>ur(e[0])),((e,t)=>i.map(i.runtime(),(n=>xr(e,n,t))))),xr=(0,s.dual)((e=>ur(e[0])),((e,t,n)=>{const r=tr(t),a=er(t);let o,c;return new ReadableStream({start(t){c=r(Oe.make()),o=(0,s.pipe)(Er(e),Oe.extend(c),r,i.tap((e=>i.sync((()=>{$.map(e,(e=>{t.enqueue(e)}))})))),i.tapErrorCause((()=>Oe.close(c,z.void))),i.catchTags({None:()=>i.sync((()=>{t.close()})),Some:e=>i.sync((()=>{t.error(e.value)}))}),i.asVoid)},pull:()=>new Promise((e=>{a(o,{scope:c}).addObserver((t=>e()))})),cancel:()=>new Promise((e=>{a(Oe.close(c,z.void)).addObserver((t=>e()))}))},n?.strategy)})),_r=(e,t)=>vr((()=>{const n=e=>Gn(i.map(t(e),c.match({onNone:()=>_t,onSome:([e,t])=>gt(It(e),(()=>n(t)))})));return new cr(n(e))})),Ir=e=>pr(wr(e));const Tr=lr,Or=(e,t)=>Ir(i.map(i.acquireRelease(i.sync((()=>e().getReader())),(e=>i.promise((()=>e.cancel())))),(e=>Sr(i.flatMap(i.tryPromise({try:()=>e.read(),catch:e=>c.some(t(e))}),(({done:e,value:t})=>e?i.fail(c.none()):i.succeed(t))))))),Ar=kr;const Nr=(e,t)=>{class n extends B.Error{_tag=t}return n.prototype[e]=e,n.prototype.name=t,n};const Cr=Symbol.for("@effect/platform/HttpBody");class Rr{[Cr];constructor(){this[Cr]=Cr}[o.NodeInspectSymbol](){return this.toJSON()}toString(){return o.format(this)}}class Fr extends Rr{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}}const Mr=new Fr;class Lr extends Rr{body;contentType;_tag="Uint8Array";constructor(e,t){super(),this.body=e,this.contentType=t}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?(new TextDecoder).decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}}const Pr=(e,t)=>new Lr(e,t??"application/octet-stream");const Dr=Symbol.for("@effect/platform/HttpClientRequest"),Ur=r.GenericTag("@effect/platform/HttpClient"),jr={[Dr]:Dr,...a.CommitPrototype,...o.BaseProto,commit(){return i.flatMap(Ur,(e=>e(this)))},toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:this.headers,body:this.body.toJSON()}}};function Br(e,t,n,r,i,a){const s=Object.create(jr);return s.method=e,s.url=t,s.urlParams=n,s.hash=r,s.headers=i,s.body=a,s}const qr=e=>"object"===typeof e&&null!==e&&Dr in e,$r=Br("GET","",D,c.none(),T,Mr),Wr=e=>(t,n)=>Vr($r,{method:e,url:t,...n??void 0}),zr=Wr("POST"),Vr=(0,s.dual)(2,((e,t)=>{let n=e;return t.method&&(n=Yr(n,t.method)),t.url&&(n=Zr(n,t.url)),t.headers&&(n=Kr(n,t.headers)),t.urlParams&&(n=Qr(n,t.urlParams)),t.hash&&(n=Xr(n,t.hash)),t.body&&(n=ei(n,t.body)),t.accept&&(n=Jr(n,t.accept)),t.acceptJson&&(n=Hr(n)),n})),Gr=(0,s.dual)(3,((e,t,n)=>Br(e.method,e.url,e.urlParams,e.hash,A(e.headers,t,n),e.body))),Kr=(0,s.dual)(2,((e,t)=>Br(e.method,e.url,e.urlParams,e.hash,N(e.headers,t),e.body))),Jr=(0,s.dual)(2,((e,t)=>Gr(e,"Accept",t))),Hr=Jr("application/json"),Yr=(0,s.dual)(2,((e,t)=>Br(t,e.url,e.urlParams,e.hash,e.headers,e.body))),Zr=(0,s.dual)(2,((e,t)=>{if("string"===typeof t)return Br(e.method,t,e.urlParams,e.hash,e.headers,e.body);const n=new URL(t.toString()),r=P(n.searchParams),i=n.hash?c.some(n.hash.slice(1)):c.none();return n.search="",n.hash="",Br(e.method,n.toString(),r,i,e.headers,e.body)})),Qr=(0,s.dual)(2,((e,t)=>Br(e.method,e.url,U(e.urlParams,t),e.hash,e.headers,e.body))),Xr=(0,s.dual)(2,((e,t)=>Br(e.method,e.url,e.urlParams,c.some(t),e.headers,e.body))),ei=(0,s.dual)(2,((e,t)=>{let n=e.headers;if("Empty"===t._tag)n=C(C(n,"Content-Type"),"Content-length");else{const e=t.contentType;e&&(n=A(n,"content-type",e));const r=t.contentLength;r&&(n=A(n,"content-length",r.toString()))}return Br(e.method,e.url,e.urlParams,e.hash,n,t)})),ti=(0,s.dual)((e=>qr(e[0])),((e,t,n="application/octet-stream")=>ei(e,Pr(t,n)))),ni=zr,ri=ti,ii=Symbol.for("@effect/platform/Cookies"),ai=Symbol.for("@effect/platform/Cookies/Cookie");const si={[ii]:ii,...o.BaseProto,toJSON(){return{_id:"@effect/platform/Cookies",cookies:S.map(this.cookies,(e=>e.toJSON()))}},pipe(){return(0,V.pipeArguments)(this,arguments)}},oi=e=>{const t=Object.create(si);return t.cookies=e,t},ci=e=>{const t={};for(const n of e)t[n.name]=n;return oi(t)};function ui(e){const t=e.split(";").map((e=>e.trim())).filter((e=>""!==e));if(0===t.length)return c.none();const n=t[0].indexOf("=");if(-1===n)return c.none();const r=t[0].slice(0,n);if(!li.test(r))return c.none();const i=t[0].slice(n+1),a=di(i);if(1===t.length)return c.some(Object.assign(Object.create(fi),{name:r,value:a,valueEncoded:i}));const s={};for(let o=1;o<t.length;o++){const e=t[o],n=e.indexOf("="),r=-1===n?e:e.slice(0,n).trim(),i=-1===n?void 0:e.slice(n+1).trim();switch(r.toLowerCase()){case"domain":{if(void 0===i)break;const e=i.trim().replace(/^\./,"");e&&(s.domain=e);break}case"expires":{if(void 0===i)break;const e=new Date(i);isNaN(e.getTime())||(s.expires=e);break}case"max-age":{if(void 0===i)break;const e=parseInt(i,10);isNaN(e)||(s.maxAge=Qn.seconds(e));break}case"path":if(void 0===i)break;"/"===i[0]&&(s.path=i);break;case"priority":if(void 0===i)break;switch(i.toLowerCase()){case"low":s.priority="low";break;case"medium":s.priority="medium";break;case"high":s.priority="high"}break;case"httponly":s.httpOnly=!0;break;case"secure":s.secure=!0;break;case"partitioned":s.partitioned=!0;break;case"samesite":if(void 0===i)break;switch(i.toLowerCase()){case"lax":s.sameSite="lax";break;case"strict":s.sameSite="strict";break;case"none":s.sameSite="none"}}}return c.some(Object.assign(Object.create(fi),{name:r,value:a,valueEncoded:i,options:Object.keys(s).length>0?s:void 0}))}const li=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,fi={[ai]:ai,...o.BaseProto,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}};const di=e=>{try{return decodeURIComponent(e)}catch(t){return e}},hi=Symbol.for("@effect/platform/HttpClientError");class pi extends(Nr(hi,"RequestError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}}class mi extends(Nr(hi,"ResponseError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){const e=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${e})`:`${this.reason} error (${e})`}}n(832028);const gi=e=>{return t={b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${"Some"===e.parent._tag?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`},Object.setPrototypeOf(t,x);var t},yi=Symbol.for("@effect/platform/HttpIncomingMessage"),bi=Symbol.for("@effect/platform/HttpClientResponse"),Si=(e,t)=>new wi(e,t);class wi extends o.Class{request;source;[yi];[bi];constructor(e,t){super(),this.request=e,this.source=t,this[yi]=yi,this[bi]=bi}toJSON(){return((e,t)=>{const n=e.headers["content-type"]??"";let r;if(n.includes("application/json"))try{r=i.runSync(e.json)}catch(s){}else if(n.includes("text/")||n.includes("urlencoded"))try{r=i.runSync(e.text)}catch(s){}const a={...t,headers:e.headers,remoteAddress:e.remoteAddress.toJSON()};return void 0!==r&&(a.body=r),a})(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return O(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=(e=>{const t="string"===typeof e?[e]:e,n=[];for(const r of t){const e=ui(r.trim());c.isSome(e)&&n.push(e.value)}return ci(n)})(this.source.headers.getSetCookie())}get remoteAddress(){return c.none()}get stream(){return this.source.body?Or((()=>this.source.body),(e=>new mi({request:this.request,response:this,reason:"Decode",cause:e}))):Tr(new mi({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return i.tryMap(this.text,{try:e=>""===e?null:JSON.parse(e),catch:e=>new mi({request:this.request,response:this,reason:"Decode",cause:e})})}textBody;get text(){return this.textBody??=i.tryPromise({try:()=>this.source.text(),catch:e=>new mi({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(i.cached,i.runSync)}get urlParamsBody(){return i.flatMap(this.text,(e=>i.try({try:()=>P(new URLSearchParams(e)),catch:e=>new mi({request:this.request,response:this,reason:"Decode",cause:e})})))}formDataBody;get formData(){return this.formDataBody??=i.tryPromise({try:()=>this.source.formData(),catch:e=>new mi({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(i.cached,i.runSync)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=i.tryPromise({try:()=>this.source.arrayBuffer(),catch:e=>new mi({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(i.cached,i.runSync)}}const vi=Symbol.for("@effect/platform/HttpClient"),Ei=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),(()=>p(s.constFalse))),ki=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),(()=>p(!0))),xi=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/currentFetchOptions"),(()=>p({}))),_i={[vi]:vi,pipe(){return(0,V.pipeArguments)(this,arguments)}},Ii=(e,t)=>{function n(n){return e(t(n))}return Object.setPrototypeOf(n,_i),n.preprocess=t,n.execute=e,n},Ti=e=>Ii((t=>i.flatMap(t,(t=>i.withFiberRuntime((n=>{const a=r.unsafeGet(n.getFiberRef(m),Oe.Scope),s=new AbortController,o=Oe.addFinalizer(a,i.sync((()=>s.abort()))),c=((e,t,n)=>{try{const r=new URL(e,j());for(let e=0;e<t.length;e++){const[n,i]=t[e];void 0!==i&&r.searchParams.append(n,i)}return"Some"===n._tag&&(r.hash=n.value),L.right(r)}catch(r){return L.left(r)}})(t.url,t.urlParams,t.hash);if("Left"===c._tag)return i.fail(new pi({request:t,reason:"InvalidUrl",cause:c.left}));const u=c.right;return!n.getFiberRef(g)||n.getFiberRef(Ei)(t)?i.zipRight(o,e(t,u,s.signal,n)):i.zipRight(o,i.useSpan(`http.client ${t.method}`,{kind:"client",captureStackTrace:!1},(r=>{r.attribute("http.request.method",t.method),r.attribute("server.address",u.origin),""!==u.port&&r.attribute("server.port",+u.port),r.attribute("url.full",u.toString()),r.attribute("url.path",u.pathname),r.attribute("url.scheme",u.protocol.slice(0,-1));const a=u.search.slice(1);""!==a&&r.attribute("url.query",a);const o=n.getFiberRef(F),c=R(t.headers,o);for(const e in c)r.attribute(`http.request.header.${e}`,String(c[e]));return t=n.getFiberRef(ki)?Kr(t,gi(r)):t,i.tap(i.withParentSpan(e(t,u,s.signal,n),r),(e=>{r.attribute("http.response.status_code",e.status);const t=R(e.headers,o);for(const n in t)r.attribute(`http.response.header.${n}`,String(t[n]))}))})))}))))),i.succeed),Oi=r.GenericTag("@effect/platform/HttpClient/Fetch"),Ai=Ti(((e,t,n,r)=>{const a=r.getFiberRef(m).unsafeMap.get(Oi.key)??globalThis.fetch,s=r.getFiberRef(xi),o=new globalThis.Headers(e.headers),c=r=>i.map(i.tryPromise({try:()=>a(t,{...s,method:e.method,headers:o,body:r,duplex:"Stream"===e.body._tag?"half":void 0,signal:n}),catch:t=>new pi({request:e,reason:"Transport",cause:t})}),(t=>Si(e,t)));if("GET"!==(u=e.method)&&"HEAD"!==u)switch(e.body._tag){case"Raw":case"Uint8Array":return c(e.body.body);case"FormData":return c(e.body.formData);case"Stream":return i.flatMap(Ar(e.body.stream),c)}var u;return c(void 0)})),Ni=(0,s.dual)(2,((e,t)=>Ii(i.flatMap((n=>t(e.execute(i.succeed(n)),n))),e.preprocess))),Ci=e=>Ni(e,((e,t)=>i.filterOrFail(e,(e=>e.status>=200&&e.status<300),(e=>new mi({request:t,response:e,reason:"StatusCode",description:"non 2xx status code"}))))),Ri=Ci(Ai),Fi=Ri,Mi=e=>i.scoped(i.flatMap(e,(e=>e.arrayBuffer)));var Li=n(160023),Pi=n(892075),Di=n(334589),Ui=n(580945),ji=n(786092),Bi=n(431437),qi=n(83643),$i=n(912317),Wi=n(414816);const zi=r.GenericTag("Sync"),Vi={_tag:"SyncStateInitial"};class Gi extends(r.Tag("SyncFactory")()){}const Ki=i.gen((function*(){const e=r.empty().pipe(r.add(qi.SecretBox,yield*qi.SecretBox)),t=yield*W.make();return zi.of({init:n=>i.logDebug(["Sync init",{owner:n}]).pipe(i.tap(W.succeed(t,e.pipe(r.add($i.Owner,n))))),sync:({merkleTree:e,timestamp:n,messages:r})=>i.gen((function*(){yield*i.logDebug(["Sync request",{merkleTree:e,timestamp:n,messages:r}]);const t=yield*qi.SecretBox,a=yield*$i.Owner,s=yield*ji.Config;return yield*i.forEach(r||[],(({timestamp:e,...n})=>i.map(t.seal(a.encryptionKey,Ji(n)),(t=>({timestamp:e,content:t}))))).pipe(i.map((t=>Wi.SyncRequest.toBinary({messages:t,userId:a.id,nodeId:n.node,merkleTree:(0,Bi.merkleTreeToString)(e)},Zi))),i.flatMap((e=>ni(s.syncUrl).pipe(ri(e,"application/x-protobuf"),Fi,Mi))),i.map((e=>Wi.SyncResponse.fromBinary(new Uint8Array(e),Qi))),i.flatMap((e=>i.forEach(e.messages,(e=>i.map(t.open(a.encryptionKey,e.content),(t=>[t,e.timestamp])))).pipe(i.map(M.filterMap((([e,t])=>c.map(Xi(e),(e=>({...e,timestamp:t})))))),i.map((t=>({messages:t,merkleTree:(0,Bi.unsafeMerkleTreeFromString)(e.merkleTree)}))),i.tap((e=>i.logDebug(["Sync response",e])))))),i.catchTag("RequestError",(()=>i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"NetworkError"}}))),i.catchTag("ResponseError",(({response:{status:e}})=>402===e?i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"PaymentRequiredError"}}):i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"ServerError",status:e}}))))})).pipe((e=>i.flatMap(W.await(t),(t=>i.provide(e,t)))))})})),Ji=({value:e,...t})=>(0,Pi.concatBytes)(Hi,Wi.MessageContent.toBinary({value:Yi(e),...t},Zi)),Hi=new Uint8Array([0,1]),Yi=e=>{switch(typeof e){case"string":return{oneofKind:"stringValue",stringValue:e};case"number":return{oneofKind:"numberValue",numberValue:Li.encodeSync(u.NumberFromString)(e)}}return null==e?{oneofKind:void 0}:b.isUint8Array(e)?{oneofKind:"bytesValue",bytesValue:e}:{oneofKind:"jsonValue",jsonValue:JSON.stringify(e)}},Zi={writerFactory:()=>new Di.BinaryWriter({encode:e=>(new TextEncoder).encode(e)})},Qi={readerFactory:e=>new Ui.BinaryReader(e,{decode:e=>(new TextDecoder).decode(e)})},Xi=e=>{if(!ea(e,Hi))return c.none();const{value:t,...n}=Wi.MessageContent.fromBinary(e.slice(Hi.length),Qi);return c.some({value:ta(t),...n})},ea=(e,t)=>{if(t.length>e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},ta=e=>{switch(e.oneofKind){case"numberValue":return Li.decodeSync(u.NumberFromString)(e.numberValue);case"stringValue":return e.stringValue;case"bytesValue":return e.bytesValue;case"jsonValue":return JSON.parse(e.jsonValue);case void 0:return null;default:return(0,s.absurd)(e)}}},864537:(e,t,n)=>{function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function i(e){if("boolean"!==typeof e)throw new Error(`boolean expected, not ${e}`)}function a(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!a(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.r(t),n.d(t,{bool:()=>i,bytes:()=>s,default:()=>l,exists:()=>c,hash:()=>o,isBytes:()=>a,number:()=>r,output:()=>u});const l={number:r,bool:i,bytes:s,hash:o,exists:c,output:u}},892075:(e,t,n)=>{n.r(t),n.d(t,{Hash:()=>_,asyncLoop:()=>b,bytesToHex:()=>l,bytesToNumberBE:()=>m,bytesToUtf8:()=>w,checkOpts:()=>k,concatBytes:()=>E,createView:()=>o,equalBytes:()=>x,hexToBytes:()=>h,hexToNumber:()=>p,isLE:()=>c,nextTick:()=>y,numberToBytesBE:()=>g,setBigUint64:()=>T,toBytes:()=>v,u16:()=>a,u32:()=>s,u64Lengths:()=>O,u8:()=>i,utf8ToBytes:()=>S,wrapCipher:()=>I});var r=n(864537);const i=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),s=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),c=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!c)throw new Error("Non little-endian hardware is not supported");const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){(0,r.bytes)(e);let t="";for(let n=0;n<e.length;n++)t+=u[e[n]];return t}const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function d(e){return e>=f._0&&e<=f._9?e-f._0:e>=f._A&&e<=f._F?e-(f._A-10):e>=f._a&&e<=f._f?e-(f._a-10):void 0}function h(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const t=d(e.charCodeAt(a)),n=d(e.charCodeAt(a+1));if(void 0===t||void 0===n){const t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}r[i]=16*t+n}return r}function p(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function m(e){return p(l(e))}function g(e,t){return h(e.toString(16).padStart(2*t,"0"))}const y=async()=>{};async function b(e,t,n){let r=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-r;e>=0&&e<t||(await y(),r+=e)}}function S(e){if("string"!==typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function w(e){return(new TextDecoder).decode(e)}function v(e){if("string"===typeof e)e=S(e);else{if(!(0,r.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}function E(...e){let t=0;for(let i=0;i<e.length;i++){const n=e[i];(0,r.bytes)(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.length}return n}function k(e,t){if(null==t||"object"!==typeof t)throw new Error("options must be defined");return Object.assign(e,t)}function x(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}class _{}const I=(e,t)=>(Object.assign(t,e),t);function T(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),s=Number(n>>i&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,o,r)}function O(e,t){const n=new Uint8Array(16),r=o(n);return T(r,0,BigInt(t?t.length:0),!0),T(r,8,BigInt(e.length),!0),n}},630768:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>Pt,allocate:()=>b,append:()=>C,appendAll:()=>R,bind:()=>Dt,bindTo:()=>Ut,cartesian:()=>Lt,cartesianWith:()=>Mt,chop:()=>Le,chunksOf:()=>qe,contains:()=>Me,containsWith:()=>Re,copy:()=>Be,dedupe:()=>At,dedupeAdjacent:()=>Ct,dedupeAdjacentWith:()=>Nt,dedupeWith:()=>Ot,difference:()=>Ye,differenceWith:()=>He,drop:()=>se,dropRight:()=>oe,dropWhile:()=>ce,empty:()=>Ze,ensure:()=>k,every:()=>St,extend:()=>vt,filter:()=>ct,filterMap:()=>nt,filterMapWhile:()=>rt,findFirst:()=>fe,findFirstIndex:()=>ue,findLast:()=>de,findLastIndex:()=>le,flatMap:()=>et,flatMapNullable:()=>yt,flatten:()=>tt,forEach:()=>Tt,fromIterable:()=>E,fromNullable:()=>mt,fromOption:()=>_,fromRecord:()=>x,get:()=>W,getEquivalence:()=>It,getLefts:()=>st,getOrder:()=>_t,getRights:()=>ot,getSomes:()=>at,group:()=>We,groupBy:()=>ze,groupWith:()=>$e,head:()=>K,headNonEmpty:()=>J,init:()=>X,initNonEmpty:()=>ee,insertAt:()=>he,intersection:()=>Je,intersectionWith:()=>Ke,intersperse:()=>Ie,isArray:()=>L,isEmptyArray:()=>P,isEmptyReadonlyArray:()=>D,isNonEmptyArray:()=>U,isNonEmptyReadonlyArray:()=>j,join:()=>Rt,last:()=>H,lastNonEmpty:()=>Y,length:()=>B,let:()=>jt,liftEither:()=>bt,liftNullable:()=>gt,liftOption:()=>pt,liftPredicate:()=>ht,make:()=>y,makeBy:()=>S,map:()=>Xe,mapAccum:()=>Ft,match:()=>I,matchLeft:()=>T,matchRight:()=>O,max:()=>kt,min:()=>Et,modify:()=>ge,modifyNonEmptyHead:()=>Te,modifyNonEmptyLast:()=>Ae,modifyOption:()=>ye,of:()=>Qe,partition:()=>ut,partitionMap:()=>it,prepend:()=>A,prependAll:()=>N,range:()=>w,reduce:()=>ft,reduceRight:()=>dt,remove:()=>be,replace:()=>pe,replaceOption:()=>me,replicate:()=>v,reverse:()=>Se,rotate:()=>Ce,scan:()=>F,scanRight:()=>M,separate:()=>lt,setNonEmptyHead:()=>Oe,setNonEmptyLast:()=>Ne,some:()=>wt,sort:()=>we,sortBy:()=>Ee,sortWith:()=>ve,span:()=>ae,split:()=>Ue,splitAt:()=>Pe,splitNonEmptyAt:()=>De,splitWhere:()=>je,tail:()=>Z,tailNonEmpty:()=>Q,take:()=>te,takeRight:()=>ne,takeWhile:()=>re,unappend:()=>G,unfold:()=>xt,union:()=>Ge,unionWith:()=>Ve,unprepend:()=>V,unsafeGet:()=>z,unzip:()=>_e,zip:()=>ke,zipWith:()=>xe});var r=n(757964),i=n(43977),a=n(235309),s=n(361369),o=n(611174),c=n(91276),u=n(977948),l=n(856572),f=n(122859);const d=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){const e=t(r,n);if((0,l.isBoolean)(e)){if(e)return u.some(r)}else if(u.isSome(e))return e;n++}return u.none()})),h=(Symbol.iterator,{next:()=>({done:!0,value:void 0})}),p=(0,s.dual)(2,((e,t)=>({[Symbol.iterator](){const n=e[Symbol.iterator]();let r=0;return{next(){let e=n.next();for(;!e.done;){const i=t(e.value,r++);if(u.isSome(i))return{done:!1,value:i.value};e=n.next()}return{done:!0,value:void 0}}}}})));s.identity;var m=n(259877),g=n(767316);const y=(...e)=>e,b=e=>new Array(e),S=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let i=0;i<n;i++)r[i]=t(i);return r},w=(e,t)=>e<=t?S(t-e+1,(t=>e+t)):[e],v=(0,s.dual)(2,((e,t)=>S(t,(()=>e)))),E=e=>Array.isArray(e)?e:Array.from(e),k=e=>Array.isArray(e)?e:[e],x=g.toEntries,_=u.toArray,I=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(e):t())),T=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(J(e),Q(e)):t())),O=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(ee(e),Y(e)):t())),A=(0,s.dual)(2,((e,t)=>[t,...e])),N=(0,s.dual)(2,((e,t)=>E(t).concat(E(e)))),C=(0,s.dual)(2,((e,t)=>[...e,t])),R=(0,s.dual)(2,((e,t)=>E(e).concat(E(t)))),F=(0,s.dual)(3,((e,t,n)=>{const r=[t];let i=0;for(const a of e)r[i+1]=n(r[i],a),i++;return r})),M=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=new Array(r.length+1);i[r.length]=t;for(let a=r.length-1;a>=0;a--)i[a]=n(i[a+1],r[a]);return i})),L=Array.isArray,P=e=>0===e.length,D=P,U=o.isNonEmptyArray,j=o.isNonEmptyArray,B=e=>e.length,q=(e,t)=>e<0||e>=t.length,$=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),W=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);return q(n,e)?u.none():u.some(e[n])})),z=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);if(q(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]})),V=e=>[J(e),Q(e)],G=e=>[ee(e),Y(e)],K=W(0),J=z(0),H=e=>j(e)?u.some(Y(e)):u.none(),Y=e=>e[e.length-1],Z=e=>{const t=E(e);return j(t)?u.some(Q(t)):u.none()},Q=e=>e.slice(1),X=e=>{const t=E(e);return j(t)?u.some(ee(t)):u.none()},ee=e=>e.slice(0,-1),te=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice(0,$(t,n))})),ne=(0,s.dual)(2,((e,t)=>{const n=E(e),r=$(t,n);return 0===r?[]:n.slice(-r)})),re=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){if(!t(i,n))break;r.push(i),n++}return r})),ie=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},ae=(0,s.dual)(2,((e,t)=>Pe(e,ie(e,t)))),se=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice($(t,n),n.length)})),oe=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice(0,n.length-$(t,n))})),ce=(0,s.dual)(2,((e,t)=>E(e).slice(ie(e,t)))),ue=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){if(t(r,n))return u.some(n);n++}return u.none()})),le=(0,s.dual)(2,((e,t)=>{const n=E(e);for(let r=n.length-1;r>=0;r--)if(t(n[r],r))return u.some(r);return u.none()})),fe=d,de=(0,s.dual)(2,((e,t)=>{const n=E(e);for(let r=n.length-1;r>=0;r--){const e=n[r],i=t(e,r);if((0,l.isBoolean)(i)){if(i)return u.some(e)}else if(u.isSome(i))return i}return u.none()})),he=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);return t<0||t>r.length?u.none():(r.splice(t,0,n),u.some(r))})),pe=(0,s.dual)(3,((e,t,n)=>ge(e,t,(()=>n)))),me=(0,s.dual)(3,((e,t,n)=>ye(e,t,(()=>n)))),ge=(0,s.dual)(3,((e,t,n)=>u.getOrElse(ye(e,t,n),(()=>Array.from(e))))),ye=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);if(q(t,r))return u.none();const i=n(r[t]);return r[t]=i,u.some(r)})),be=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return q(t,n)||n.splice(t,1),n})),Se=e=>Array.from(e).reverse(),we=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return n.sort(t),n})),ve=(0,s.dual)(3,((e,t,n)=>we(e,m.mapInput(n,t)))),Ee=(...e)=>{const t=we(m.combineAll(e));return e=>{const n=E(e);return j(n)?t(n):[]}},ke=(0,s.dual)(2,((e,t)=>xe(e,t,f.make))),xe=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=E(t);if(j(r)&&j(i)){const e=[n(J(r),J(i))],t=Math.min(r.length,i.length);for(let a=1;a<t;a++)e[a]=n(r[a],i[a]);return e}return[]})),_e=e=>{const t=E(e);if(j(t)){const e=[t[0][0]],n=[t[0][1]];for(let r=1;r<t.length;r++)e[r]=t[r][0],n[r]=t[r][1];return[e,n]}return[[],[]]},Ie=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const e=[J(n)],r=Q(n);for(let n=0;n<r.length;n++)n<r.length&&e.push(t),e.push(r[n]);return e}return[]})),Te=(0,s.dual)(2,((e,t)=>[t(J(e)),...Q(e)])),Oe=(0,s.dual)(2,((e,t)=>Te(e,(()=>t)))),Ae=(0,s.dual)(2,((e,t)=>C(ee(e),t(Y(e))))),Ne=(0,s.dual)(2,((e,t)=>Ae(e,(()=>t)))),Ce=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const r=n.length,i=Math.round(t)%r;if(q(Math.abs(i),n)||0===i)return Be(n);if(i<0){const[e,t]=De(n,-i);return R(t,e)}return Ce(e,i-r)}return[]})),Re=e=>(0,s.dual)(2,((t,n)=>{for(const r of t)if(e(n,r))return!0;return!1})),Fe=i.equivalence(),Me=Re(Fe),Le=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const[e,r]=t(n),i=[e];let a=r;for(;o.isNonEmptyArray(a);){const[e,n]=t(a);i.push(e),a=n}return i}return[]})),Pe=(0,s.dual)(2,((e,t)=>{const n=Array.from(e),r=Math.floor(t);return j(n)?r>=1?De(n,r):[[],n]:[n,[]]})),De=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Be(e),[]]:[A(e.slice(1,n),J(e)),e.slice(n)]})),Ue=(0,s.dual)(2,((e,t)=>{const n=E(e);return qe(n,Math.ceil(n.length/Math.floor(t)))})),je=(0,s.dual)(2,((e,t)=>ae(e,((e,n)=>!t(e,n))))),Be=e=>e.slice(),qe=(0,s.dual)(2,((e,t)=>{const n=E(e);return j(n)?Le(n,De(t)):[]})),$e=(0,s.dual)(2,((e,t)=>Le(e,(e=>{const n=J(e),r=[n];let i=1;for(;i<e.length;i++){const a=e[i];if(!t(a,n))break;r.push(a)}return[r,e.slice(i)]})))),We=$e(i.equivalence()),ze=(0,s.dual)(2,((e,t)=>{const n={};for(const r of e){const e=t(r);Object.prototype.hasOwnProperty.call(n,e)?n[e].push(r):n[e]=[r]}return n})),Ve=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=E(t);if(j(r)){if(j(i)){return Ot(n)(R(r,i))}return r}return i})),Ge=(0,s.dual)(2,((e,t)=>Ve(e,t,Fe))),Ke=e=>{const t=Re(e);return(0,s.dual)(2,((e,n)=>E(e).filter((e=>t(n,e)))))},Je=Ke(Fe),He=e=>{const t=Re(e);return(0,s.dual)(2,((e,n)=>E(e).filter((e=>!t(n,e)))))},Ye=He(Fe),Ze=()=>[],Qe=e=>[e],Xe=(0,s.dual)(2,((e,t)=>e.map(t))),et=(0,s.dual)(2,((e,t)=>{if(D(e))return[];const n=[];for(let r=0;r<e.length;r++){const i=t(e[r],r);for(let e=0;e<i.length;e++)n.push(i[e])}return n})),tt=et(s.identity),nt=(0,s.dual)(2,((e,t)=>{const n=E(e),r=[];for(let i=0;i<n.length;i++){const e=t(n[i],i);u.isSome(e)&&r.push(e.value)}return r})),rt=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){const e=t(i,n);if(!u.isSome(e))break;r.push(e.value),n++}return r})),it=(0,s.dual)(2,((e,t)=>{const n=[],i=[],a=E(e);for(let s=0;s<a.length;s++){const e=t(a[s],s);r.isLeft(e)?n.push(e.left):i.push(e.right)}return[n,i]})),at=nt(s.identity),st=e=>{const t=[];for(const n of e)r.isLeft(n)&&t.push(n.left);return t},ot=e=>{const t=[];for(const n of e)r.isRight(n)&&t.push(n.right);return t},ct=(0,s.dual)(2,((e,t)=>{const n=E(e),r=[];for(let i=0;i<n.length;i++)t(n[i],i)&&r.push(n[i]);return r})),ut=(0,s.dual)(2,((e,t)=>{const n=[],r=[],i=E(e);for(let a=0;a<i.length;a++)t(i[a],a)?r.push(i[a]):n.push(i[a]);return[n,r]})),lt=it(s.identity),ft=(0,s.dual)(3,((e,t,n)=>E(e).reduce(((e,t,r)=>n(e,t,r)),t))),dt=(0,s.dual)(3,((e,t,n)=>E(e).reduceRight(((e,t,r)=>n(e,t,r)),t))),ht=e=>t=>e(t)?[t]:[],pt=e=>(...t)=>_(e(...t)),mt=e=>null==e?Ze():[e],gt=e=>(...t)=>mt(e(...t)),yt=(0,s.dual)(2,((e,t)=>et(e,(e=>mt(t(e)))))),bt=e=>(...t)=>{const n=e(...t);return r.isLeft(n)?[]:[n.right]},St=(0,s.dual)(2,((e,t)=>e.every(t))),wt=(0,s.dual)(2,((e,t)=>e.some(t))),vt=(0,s.dual)(2,((e,t)=>e.map(((e,n,r)=>t(r.slice(n)))))),Et=(0,s.dual)(2,((e,t)=>e.reduce(m.min(t)))),kt=(0,s.dual)(2,((e,t)=>e.reduce(m.max(t)))),xt=(e,t)=>{const n=[];let r,i=e;for(;u.isSome(r=t(i));){const[e,t]=r.value;n.push(e),i=t}return n},_t=m.array,It=a.array,Tt=(0,s.dual)(2,((e,t)=>E(e).forEach(((e,n)=>t(e,n))))),Ot=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const e=[J(n)],r=Q(n);for(const n of r)e.every((e=>!t(n,e)))&&e.push(n);return e}return[]})),At=e=>Ot(e,i.equivalence()),Nt=(0,s.dual)(2,((e,t)=>{const n=[];let r=u.none();for(const i of e)!u.isNone(r)&&t(i,r.value)||(n.push(i),r=u.some(i));return n})),Ct=Nt(i.equivalence()),Rt=(0,s.dual)(2,((e,t)=>E(e).join(t))),Ft=(0,s.dual)(3,((e,t,n)=>{let r=0,i=t;const a=[];for(const s of e){const e=n(i,s,r);i=e[0],a.push(e[1]),r++}return[i,a]})),Mt=(0,s.dual)(3,((e,t,n)=>et(e,(e=>Xe(t,(t=>n(e,t))))))),Lt=(0,s.dual)(2,((e,t)=>Mt(e,t,((e,t)=>[e,t])))),Pt=Qe({}),Dt=c.bind(Xe,et),Ut=c.bindTo(Xe),jt=c.let_(Xe)},783733:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>c,Order:()=>u,and:()=>f,eqv:()=>g,every:()=>b,implies:()=>y,isBoolean:()=>s,match:()=>o,nand:()=>d,nor:()=>p,not:()=>l,or:()=>h,some:()=>S,xor:()=>m});var r=n(235309),i=n(361369),a=n(259877);const s=n(856572).isBoolean,o=(0,i.dual)(2,((e,t)=>e?t.onTrue():t.onFalse())),c=r.boolean,u=a.boolean,l=e=>!e,f=(0,i.dual)(2,((e,t)=>e&&t)),d=(0,i.dual)(2,((e,t)=>!(e&&t))),h=(0,i.dual)(2,((e,t)=>e||t)),p=(0,i.dual)(2,((e,t)=>!(e||t))),m=(0,i.dual)(2,((e,t)=>!e&&t||e&&!t)),g=(0,i.dual)(2,((e,t)=>!m(e,t))),y=(0,i.dual)(2,((e,t)=>!e||t)),b=e=>{for(const t of e)if(!t)return!1;return!0},S=e=>{for(const t of e)if(t)return!0;return!1}},420634:(e,t,n)=>{n.r(t),n.d(t,{CauseTypeId:()=>a,ExceededCapacityException:()=>ge,ExceededCapacityExceptionTypeId:()=>f,IllegalArgumentException:()=>oe,IllegalArgumentExceptionTypeId:()=>c,InterruptedException:()=>ae,InterruptedExceptionTypeId:()=>o,InvalidPubSubCapacityExceptionTypeId:()=>l,NoSuchElementException:()=>ue,NoSuchElementExceptionTypeId:()=>u,RuntimeException:()=>fe,RuntimeExceptionTypeId:()=>s,TimeoutException:()=>he,TimeoutExceptionTypeId:()=>d,UnknownException:()=>pe,UnknownExceptionTypeId:()=>h,YieldableError:()=>p,andThen:()=>H,as:()=>G,contains:()=>Z,defects:()=>L,die:()=>y,dieOption:()=>B,empty:()=>m,fail:()=>g,failureOption:()=>D,failureOrCause:()=>U,failures:()=>M,filter:()=>te,find:()=>ee,flatMap:()=>J,flatten:()=>Y,flipCauseOption:()=>j,interrupt:()=>b,interruptOption:()=>q,interruptors:()=>P,isCause:()=>v,isDie:()=>C,isDieType:()=>x,isEmpty:()=>A,isEmptyType:()=>E,isExceededCapacityException:()=>ye,isFailType:()=>k,isFailure:()=>N,isIllegalArgumentException:()=>ce,isInterruptType:()=>_,isInterrupted:()=>R,isInterruptedException:()=>se,isInterruptedOnly:()=>F,isNoSuchElementException:()=>le,isParallelType:()=>T,isRuntimeException:()=>de,isSequentialType:()=>I,isUnknownException:()=>me,keepDefects:()=>$,linearize:()=>W,map:()=>K,match:()=>ne,originalError:()=>we,parallel:()=>S,pretty:()=>be,prettyErrors:()=>Se,reduce:()=>re,reduceWithContext:()=>ie,sequential:()=>w,size:()=>O,squash:()=>Q,squashWith:()=>X,stripFailures:()=>z,stripSomeDefects:()=>V});var r=n(908197),i=n(672620);const a=r.CauseTypeId,s=i.RuntimeExceptionTypeId,o=i.InterruptedExceptionTypeId,c=i.IllegalArgumentExceptionTypeId,u=i.NoSuchElementExceptionTypeId,l=i.InvalidPubSubCapacityExceptionTypeId,f=i.ExceededCapacityExceptionTypeId,d=i.TimeoutExceptionTypeId,h=i.UnknownExceptionTypeId,p=i.YieldableError,m=r.empty,g=r.fail,y=r.die,b=r.interrupt,S=r.parallel,w=r.sequential,v=r.isCause,E=r.isEmptyType,k=r.isFailType,x=r.isDieType,_=r.isInterruptType,I=r.isSequentialType,T=r.isParallelType,O=r.size,A=r.isEmpty,N=r.isFailure,C=r.isDie,R=r.isInterrupted,F=r.isInterruptedOnly,M=r.failures,L=r.defects,P=r.interruptors,D=r.failureOption,U=r.failureOrCause,j=r.flipCauseOption,B=r.dieOption,q=r.interruptOption,$=r.keepDefects,W=r.linearize,z=r.stripFailures,V=r.stripSomeDefects,G=r.as,K=r.map,J=r.flatMap,H=r.andThen,Y=r.flatten,Z=r.contains,Q=i.causeSquash,X=i.causeSquashWith,ee=r.find,te=r.filter,ne=r.match,re=r.reduce,ie=r.reduceWithContext,ae=i.InterruptedException,se=i.isInterruptedException,oe=i.IllegalArgumentException,ce=i.isIllegalArgumentException,ue=i.NoSuchElementException,le=i.isNoSuchElementException,fe=i.RuntimeException,de=i.isRuntimeException,he=i.TimeoutException,pe=i.UnknownException,me=i.isUnknownException,ge=i.ExceededCapacityException,ye=i.isExceededCapacityException,be=r.pretty,Se=r.prettyErrors,we=i.originalInstance},128420:(e,t,n)=>{n.r(t),n.d(t,{append:()=>F,appendAll:()=>B,chunksOf:()=>J,compact:()=>z,contains:()=>Fe,containsWith:()=>Me,dedupe:()=>ve,dedupeAdjacent:()=>Ee,difference:()=>Ve,differenceWith:()=>ze,drop:()=>P,dropRight:()=>D,dropWhile:()=>U,empty:()=>v,every:()=>je,filter:()=>$,filterMap:()=>q,filterMapWhile:()=>W,findFirst:()=>Le,findFirstIndex:()=>Pe,findLast:()=>De,findLastIndex:()=>Ue,flatMap:()=>V,flatten:()=>K,forEach:()=>G,fromIterable:()=>x,get:()=>A,getEquivalence:()=>m,head:()=>Q,headNonEmpty:()=>ee,intersection:()=>H,isChunk:()=>S,isEmpty:()=>Y,isNonEmpty:()=>Z,join:()=>qe,last:()=>te,lastNonEmpty:()=>re,make:()=>E,makeBy:()=>Ce,map:()=>ie,mapAccum:()=>ae,modify:()=>Oe,modifyOption:()=>Te,of:()=>k,partition:()=>se,partitionMap:()=>oe,prepend:()=>M,prependAll:()=>j,range:()=>Re,reduce:()=>$e,reduceRight:()=>We,remove:()=>Ie,replace:()=>Ae,replaceOption:()=>Ne,reverse:()=>O,separate:()=>ce,size:()=>ue,some:()=>Be,sort:()=>le,sortWith:()=>fe,split:()=>pe,splitAt:()=>de,splitNonEmptyAt:()=>he,splitWhere:()=>me,tail:()=>ge,tailNonEmpty:()=>ye,take:()=>L,takeRight:()=>be,takeWhile:()=>Se,toArray:()=>I,toReadonlyArray:()=>T,union:()=>we,unsafeFromArray:()=>N,unsafeFromNonEmptyArray:()=>C,unsafeGet:()=>R,unsafeHead:()=>X,unsafeLast:()=>ne,unzip:()=>ke,zip:()=>_e,zipWith:()=>xe});var r=n(630768),i=n(43977),a=n(235309),s=n(361369),o=n(367337),c=n(883845),u=n(977948),l=n(259877),f=n(953533),d=n(856572);const h=Symbol.for("effect/Chunk");const p=[],m=e=>a.make(((t,n)=>t.length===n.length&&T(t).every(((t,r)=>e(t,R(n,r)))))),g=m(i.equals),y={[h]:{_A:e=>e},toString(){return(0,c.format)(this.toJSON())},toJSON(){return{_id:"Chunk",values:T(this).map(c.toJSON)}},[c.NodeInspectSymbol](){return this.toJSON()},[i.symbol](e){return S(e)&&g(this,e)},[o.symbol](){return o.cached(this,o.array(T(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return p[Symbol.iterator]();default:return T(this)[Symbol.iterator]()}},pipe(){return(0,f.pipeArguments)(this,arguments)}},b=e=>{const t=Object.create(y);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=w,t.right=w;break;case"ISingleton":t.length=1,t.depth=0,t.left=w,t.right=w;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=w,t.right=w}return t},S=e=>(0,d.hasProperty)(e,h),w=b({_tag:"IEmpty"}),v=()=>w,E=(...e)=>1===e.length?k(e[0]):C(e),k=e=>b({_tag:"ISingleton",a:e}),x=e=>S(e)?e:b({_tag:"IArray",array:r.fromIterable(e)}),_=(e,t,n)=>{switch(e.backing._tag){case"IArray":!function(e,t,n,r,i){for(let a=t;a<Math.min(e.length,t+i);a++)n[r+a-t]=e[a]}(e.backing.array,0,t,n,e.length);break;case"IConcat":_(e.left,t,n),_(e.right,t,n+e.left.length);break;case"ISingleton":t[n]=e.backing.a;break;case"ISlice":{let r=0,i=n;for(;r<e.length;)t[i]=R(e,r),r+=1,i+=1;break}}},I=e=>T(e).slice(),T=e=>{switch(e.backing._tag){case"IEmpty":return p;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return _(e,t,0),e.backing={_tag:"IArray",array:t},e.left=w,e.right=w,e.depth=0,t}}},O=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return b({_tag:"IArray",array:r.reverse(e.backing.array)});case"IConcat":return b({_tag:"IConcat",left:O(e.backing.right),right:O(e.backing.left)});case"ISlice":return N(r.reverse(T(e)))}},A=(0,s.dual)(2,((e,t)=>t<0||t>=e.length?u.none():u.some(R(e,t)))),N=e=>b({_tag:"IArray",array:e}),C=e=>N(e),R=(0,s.dual)(2,((e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==t)throw new Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?R(e.left,t):R(e.right,t-e.left.length);case"ISlice":return R(e.backing.chunk,t+e.backing.offset)}})),F=(0,s.dual)(2,((e,t)=>B(e,k(t)))),M=(0,s.dual)(2,((e,t)=>B(k(t),e))),L=(0,s.dual)(2,((e,t)=>{if(t<=0)return w;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?b({_tag:"IConcat",left:e.left,right:L(e.right,t-e.left.length)}):L(e.left,t);default:return b({_tag:"ISlice",chunk:e,offset:0,length:t})}})),P=(0,s.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=e.length)return w;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?P(e.right,t-e.left.length):b({_tag:"IConcat",left:P(e.left,t),right:e.right});default:return b({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}})),D=(0,s.dual)(2,((e,t)=>L(e,Math.max(0,e.length-t)))),U=(0,s.dual)(2,((e,t)=>{const n=T(e),r=n.length;let i=0;for(;i<r&&t(n[i]);)i++;return P(e,i)})),j=(0,s.dual)(2,((e,t)=>B(t,e))),B=(0,s.dual)(2,((e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return b({_tag:"IConcat",left:e,right:t});if(n<-1){if(e.left.depth>=e.right.depth){const n=B(e.right,t);return b({_tag:"IConcat",left:e.left,right:n})}{const n=B(e.right.right,t);if(n.depth===e.depth-3){const t=b({_tag:"IConcat",left:e.right.left,right:n});return b({_tag:"IConcat",left:e.left,right:t})}{const t=b({_tag:"IConcat",left:e.left,right:e.right.left});return b({_tag:"IConcat",left:t,right:n})}}}if(t.right.depth>=t.left.depth){const n=B(e,t.left);return b({_tag:"IConcat",left:n,right:t.right})}{const n=B(e,t.left.left);if(n.depth===t.depth-3){const e=b({_tag:"IConcat",left:n,right:t.left.right});return b({_tag:"IConcat",left:e,right:t.right})}{const e=b({_tag:"IConcat",left:t.left.right,right:t.right});return b({_tag:"IConcat",left:n,right:e})}}})),q=(0,s.dual)(2,((e,t)=>N(r.filterMap(e,t)))),$=(0,s.dual)(2,((e,t)=>N(r.filter(e,t)))),W=(0,s.dual)(2,((e,t)=>N(r.filterMapWhile(e,t)))),z=e=>q(e,s.identity),V=(0,s.dual)(2,((e,t)=>{if("ISingleton"===e.backing._tag)return t(e.backing.a,0);let n=w,r=0;for(const i of e)n=B(n,t(i,r++));return n})),G=(0,s.dual)(2,((e,t)=>T(e).forEach(t))),K=V(s.identity),J=(0,s.dual)(2,((e,t)=>{const n=[];let r=[];return T(e).forEach((e=>{r.push(e),r.length>=t&&(n.push(N(r)),r=[])})),r.length>0&&n.push(N(r)),N(n)})),H=(0,s.dual)(2,((e,t)=>N(r.intersection(T(e),T(t))))),Y=e=>0===e.length,Z=e=>e.length>0,Q=A(0),X=e=>R(e,0),ee=X,te=e=>A(e,e.length-1),ne=e=>R(e,e.length-1),re=ne,ie=(0,s.dual)(2,((e,t)=>"ISingleton"===e.backing._tag?k(t(e.backing.a,0)):N((0,s.pipe)(T(e),r.map(((e,n)=>t(e,n))))))),ae=(0,s.dual)(3,((e,t,n)=>{const[i,a]=r.mapAccum(e,t,n);return[i,N(a)]})),se=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partition(T(e),t),(([e,t])=>[N(e),N(t)])))),oe=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partitionMap(T(e),t),(([e,t])=>[N(e),N(t)])))),ce=e=>(0,s.pipe)(r.separate(T(e)),(([e,t])=>[N(e),N(t)])),ue=e=>e.length,le=(0,s.dual)(2,((e,t)=>N(r.sort(T(e),t)))),fe=(0,s.dual)(3,((e,t,n)=>le(e,l.mapInput(n,t)))),de=(0,s.dual)(2,((e,t)=>[L(e,t),P(e,t)])),he=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[e,v()]:[L(e,n),P(e,n)]})),pe=(0,s.dual)(2,((e,t)=>J(e,Math.ceil(e.length/Math.floor(t))))),me=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of T(e)){if(t(r))break;n++}return de(e,n)})),ge=e=>e.length>0?u.some(P(e,1)):u.none(),ye=e=>P(e,1),be=(0,s.dual)(2,((e,t)=>P(e,e.length-t))),Se=(0,s.dual)(2,((e,t)=>{const n=[];for(const r of T(e)){if(!t(r))break;n.push(r)}return N(n)})),we=(0,s.dual)(2,((e,t)=>N(r.union(T(e),T(t))))),ve=e=>N(r.dedupe(T(e))),Ee=e=>N(r.dedupeAdjacent(e)),ke=e=>{const[t,n]=r.unzip(e);return[N(t),N(n)]},xe=(0,s.dual)(3,((e,t,n)=>N(r.zipWith(e,t,n)))),_e=(0,s.dual)(2,((e,t)=>xe(e,t,((e,t)=>[e,t])))),Ie=(0,s.dual)(2,((e,t)=>N(r.remove(T(e),t)))),Te=(0,s.dual)(3,((e,t,n)=>u.map(r.modifyOption(T(e),t,n),N))),Oe=(0,s.dual)(3,((e,t,n)=>u.getOrElse(Te(e,t,n),(()=>e)))),Ae=(0,s.dual)(3,((e,t,n)=>Oe(e,t,(()=>n)))),Ne=(0,s.dual)(3,((e,t,n)=>Te(e,t,(()=>n)))),Ce=(0,s.dual)(2,((e,t)=>x(r.makeBy(e,t)))),Re=(e,t)=>e<=t?Ce(t-e+1,(t=>e+t)):k(e),Fe=r.contains,Me=r.containsWith,Le=r.findFirst,Pe=r.findFirstIndex,De=r.findLast,Ue=r.findLastIndex,je=(0,s.dual)(2,((e,t)=>r.fromIterable(e).every(t))),Be=(0,s.dual)(2,((e,t)=>r.fromIterable(e).some(t))),qe=r.join,$e=r.reduce,We=r.reduceRight,ze=e=>(0,s.dual)(2,((t,n)=>N(r.differenceWith(e)(n,t)))),Ve=(0,s.dual)(2,((e,t)=>N(r.difference(t,e))))},131651:(e,t,n)=>{n.r(t),n.d(t,{Clock:()=>f,ClockTypeId:()=>a,clockWith:()=>l,currentTimeMillis:()=>c,currentTimeNanos:()=>u,make:()=>s,sleep:()=>o});var r=n(114969),i=n(344862);const a=r.ClockTypeId,s=r.make,o=i.sleep,c=i.currentTimeMillis,u=i.currentTimeNanos,l=i.clockWith,f=r.clockTag},689702:(e,t,n)=>{n.r(t),n.d(t,{GenericTag:()=>i,Tag:()=>y,add:()=>l,empty:()=>c,get:()=>f,getOption:()=>h,isContext:()=>s,isTag:()=>o,make:()=>u,merge:()=>p,omit:()=>g,pick:()=>m,unsafeGet:()=>d,unsafeMake:()=>a});var r=n(883768);r.TagTypeId;const i=r.makeGenericTag,a=(r.TypeId,r.makeContext),s=r.isContext,o=r.isTag,c=r.empty,u=r.make,l=r.add,f=r.get,d=r.unsafeGet,h=r.getOption,p=r.merge,m=r.pick,g=r.omit,y=r.Tag},695181:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>p,Error:()=>S,Structural:()=>g,TaggedClass:()=>m,TaggedError:()=>w,array:()=>l,case:()=>d,struct:()=>o,tagged:()=>h,taggedEnum:()=>y,tuple:()=>u,unsafeArray:()=>f,unsafeStruct:()=>c});var r=n(672620),i=n(234951),a=n(68498),s=n(856572);const o=i.struct,c=e=>Object.setPrototypeOf(e,a.StructuralPrototype),u=(...e)=>f(e),l=e=>f(e.slice(0)),f=e=>Object.setPrototypeOf(e,i.ArrayProto),d=()=>e=>void 0===e?Object.create(a.StructuralPrototype):o(e),h=e=>t=>{const n=void 0===t?Object.create(a.StructuralPrototype):o(t);return n._tag=e,n},p=i.Structural,m=e=>class extends p{_tag=e},g=i.Structural,y=()=>new Proxy({},{get:(e,t,n)=>"$is"===t?s.isTagged:"$match"===t?b:h(t)});function b(){if(1===arguments.length){const e=arguments[0];return function(t){return e[t._tag](t)}}const e=arguments[0];return arguments[1][e._tag](e)}const S=function(){return class extends r.YieldableError{constructor(e){super(e?.message,e?.cause?{cause:e.cause}:void 0),e&&Object.assign(this,e)}}}(),w=e=>{class t extends S{_tag=e}return t.prototype.name=e,t}},762738:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,await:()=>o,complete:()=>c,completeWith:()=>u,die:()=>m,dieSync:()=>g,done:()=>l,fail:()=>f,failCause:()=>h,failCauseSync:()=>p,failSync:()=>d,interrupt:()=>y,interruptWith:()=>b,isDone:()=>S,make:()=>a,makeAs:()=>s,poll:()=>w,succeed:()=>v,sync:()=>E,unsafeDone:()=>x,unsafeMake:()=>k});var r=n(672620);const i=n(304080).DeferredTypeId,a=r.deferredMake,s=r.deferredMakeAs,o=r.deferredAwait,c=r.deferredComplete,u=r.deferredCompleteWith,l=r.deferredDone,f=r.deferredFail,d=r.deferredFailSync,h=r.deferredFailCause,p=r.deferredFailCauseSync,m=r.deferredDie,g=r.deferredDieSync,y=r.deferredInterrupt,b=r.deferredInterruptWith,S=r.deferredIsDone,w=r.deferredPoll,v=r.deferredSucceed,E=r.deferredSync,k=r.deferredUnsafeMake,x=r.deferredUnsafeDone},284073:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>K,Order:()=>V,between:()=>G,clamp:()=>X,days:()=>P,decode:()=>S,decodeUnknown:()=>w,divide:()=>ee,equals:()=>ue,format:()=>le,greaterThan:()=>oe,greaterThanOrEqualTo:()=>ce,hours:()=>L,infinity:()=>A,isDuration:()=>_,isFinite:()=>I,isZero:()=>T,lessThan:()=>ae,lessThanOrEqualTo:()=>se,match:()=>W,matchWith:()=>z,max:()=>Z,micros:()=>C,millis:()=>R,min:()=>H,minutes:()=>M,nanos:()=>N,seconds:()=>F,subtract:()=>re,sum:()=>ie,times:()=>ne,toHrTime:()=>$,toMillis:()=>U,toNanos:()=>B,toSeconds:()=>j,unsafeDivide:()=>te,unsafeToNanos:()=>q,weeks:()=>D,zero:()=>O});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(259877),u=n(953533),l=n(856572);const f=Symbol.for("effect/Duration"),d=BigInt(0),h=BigInt(24),p=BigInt(60),m=BigInt(1e3),g=BigInt(1e6),y=BigInt(1e9),b=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,S=e=>{if(_(e))return e;if((0,l.isNumber)(e))return R(e);if((0,l.isBigInt)(e))return N(e);if(Array.isArray(e)){if(2===e.length&&(0,l.isNumber)(e[0])&&(0,l.isNumber)(e[1]))return N(BigInt(e[0])*y+BigInt(e[1]))}else if((0,l.isString)(e)){b.lastIndex=0;const t=b.exec(e);if(t){const[e,n,r]=t,i=Number(n);switch(r){case"nano":case"nanos":return N(BigInt(n));case"micro":case"micros":return C(BigInt(n));case"milli":case"millis":return R(i);case"second":case"seconds":return F(i);case"minute":case"minutes":return M(i);case"hour":case"hours":return L(i);case"day":case"days":return P(i);case"week":case"weeks":return D(i)}}}throw new Error("Invalid DurationInput")},w=o.liftThrowable(S),v={_tag:"Millis",millis:0},E={_tag:"Infinity"},k={[f]:f,[a.symbol](){return a.cached(this,a.structure(this.value))},[r.symbol](e){return _(e)&&ue(this,e)},toString(){return`Duration(${le(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:$(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,u.pipeArguments)(this,arguments)}},x=e=>{const t=Object.create(k);return(0,l.isNumber)(e)?isNaN(e)||e<=0?t.value=v:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=E:t.value=e<=d?v:{_tag:"Nanos",nanos:e},t},_=e=>(0,l.hasProperty)(e,f),I=e=>"Infinity"!==e.value._tag,T=e=>{switch(e.value._tag){case"Millis":return 0===e.value.millis;case"Nanos":return e.value.nanos===d;case"Infinity":return!1}},O=x(0),A=x(1/0),N=e=>x(e),C=e=>x(e*m),R=e=>x(e),F=e=>x(1e3*e),M=e=>x(6e4*e),L=e=>x(36e5*e),P=e=>x(864e5*e),D=e=>x(6048e5*e),U=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},j=e=>U(e)/1e3,B=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return o.none();case"Nanos":return o.some(t.value.nanos);case"Millis":return o.some(BigInt(Math.round(1e6*t.value.millis)))}},q=e=>{const t=S(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},$=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/y),Number(t.value.nanos%y)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},W=(0,i.dual)(2,((e,t)=>{const n=S(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}})),z=(0,i.dual)(3,((e,t,n)=>{const r=S(e),i=S(t);if("Infinity"===r.value._tag||"Infinity"===i.value._tag)return n.onMillis(U(r),U(i));if("Nanos"===r.value._tag||"Nanos"===i.value._tag){const e="Nanos"===r.value._tag?r.value.nanos:BigInt(Math.round(1e6*r.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return n.onNanos(e,t)}return n.onMillis(r.value.millis,i.value.millis)})),V=c.make(((e,t)=>z(e,t,{onMillis:(e,t)=>e<t?-1:e>t?1:0,onNanos:(e,t)=>e<t?-1:e>t?1:0}))),G=c.between(c.mapInput(V,S)),K=(e,t)=>z(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),J=c.min(V),H=(0,i.dual)(2,((e,t)=>J(S(e),S(t)))),Y=c.max(V),Z=(0,i.dual)(2,((e,t)=>Y(S(e),S(t)))),Q=c.clamp(V),X=(0,i.dual)(2,((e,t)=>Q(S(e),{minimum:S(t.minimum),maximum:S(t.maximum)}))),ee=(0,i.dual)(2,((e,t)=>W(e,{onMillis:e=>0===t||isNaN(t)||!Number.isFinite(t)?o.none():o.some(x(e/t)),onNanos:e=>{if(isNaN(t)||t<=0||!Number.isFinite(t))return o.none();try{return o.some(x(e/BigInt(t)))}catch(n){return o.none()}}}))),te=(0,i.dual)(2,((e,t)=>W(e,{onMillis:e=>x(e/t),onNanos:e=>isNaN(t)||t<0||Object.is(t,-0)?O:Object.is(t,0)||!Number.isFinite(t)?A:x(e/BigInt(t))}))),ne=(0,i.dual)(2,((e,t)=>W(e,{onMillis:e=>x(e*t),onNanos:e=>x(e*BigInt(t))}))),re=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>x(e-t),onNanos:(e,t)=>x(e-t)}))),ie=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>x(e+t),onNanos:(e,t)=>x(e+t)}))),ae=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}))),se=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),oe=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>e>t,onNanos:(e,t)=>e>t}))),ce=(0,i.dual)(2,((e,t)=>z(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t}))),ue=(0,i.dual)(2,((e,t)=>K(S(e),S(t)))),le=e=>{const t=S(e),n=[];if("Infinity"===t.value._tag)return"Infinity";const r=q(t);r%g&&n.push(r%g+"ns");const i=r/g;i%m!==d&&n.push(i%m+"ms");const a=i/m;a%p!==d&&n.push(a%p+"s");const s=a/p;s%p!==d&&n.push(s%p+"m");const o=s/p;o%h!==d&&n.push(o%h+"h");const c=o/h;return c!==d&&n.push(`${c}d`),n.reverse().join(" ")}},477900:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>Nn,EffectTypeId:()=>y,Tag:()=>ia,acquireRelease:()=>lt,acquireReleaseInterruptible:()=>ft,acquireUseRelease:()=>dt,addFinalizer:()=>ht,all:()=>x,allSuccesses:()=>I,allWith:()=>_,allowInterrupt:()=>Be,andThen:()=>Yn,annotateCurrentSpan:()=>Wi,annotateLogs:()=>Wr,annotateLogsScoped:()=>zr,annotateSpans:()=>$i,ap:()=>Ti,as:()=>Ze,asSome:()=>Qe,asSomeError:()=>Xe,asVoid:()=>et,async:()=>H,asyncEffect:()=>Y,awaitAllChildren:()=>_t,bind:()=>Cn,bindTo:()=>Rn,blocked:()=>Oi,cacheRequestResult:()=>Ri,cached:()=>v,cachedFunction:()=>E,cachedInvalidateWithTTL:()=>w,cachedWithTTL:()=>S,catch:()=>ye,catchAll:()=>be,catchAllCause:()=>Se,catchAllDefect:()=>we,catchIf:()=>ve,catchSome:()=>Ee,catchSomeCause:()=>ke,catchSomeDefect:()=>xe,catchTag:()=>_e,catchTags:()=>Ie,cause:()=>Te,checkInterruptible:()=>qe,clock:()=>Jt,clockWith:()=>Ht,configProviderWith:()=>dn,console:()=>Qt,consoleWith:()=>Xt,context:()=>mn,contextWith:()=>gn,contextWithEffect:()=>yn,currentParentSpan:()=>Vi,currentSpan:()=>zi,custom:()=>Z,daemonChildren:()=>It,delay:()=>nn,descriptor:()=>Tt,descriptorWith:()=>Ot,die:()=>re,dieMessage:()=>ie,dieSync:()=>ae,diffFiberRefs:()=>At,disconnect:()=>$e,dropUntil:()=>T,dropWhile:()=>O,either:()=>Mn,ensuring:()=>pt,ensuringChild:()=>Nt,ensuringChildren:()=>Ct,eventually:()=>Oe,every:()=>A,exists:()=>N,exit:()=>Ln,fail:()=>X,failCause:()=>te,failCauseSync:()=>ne,failSync:()=>ee,fiberId:()=>Rt,fiberIdWith:()=>Ft,filter:()=>C,filterMap:()=>R,filterOrDie:()=>jn,filterOrDieMessage:()=>Bn,filterOrElse:()=>qn,filterOrFail:()=>$n,finalizersMask:()=>bt,findFirst:()=>F,firstSuccessOf:()=>M,flatMap:()=>Hn,flatten:()=>Zn,flip:()=>tt,flipWith:()=>nt,forEach:()=>L,forever:()=>ur,fork:()=>Mt,forkAll:()=>Pt,forkDaemon:()=>Lt,forkIn:()=>Dt,forkScoped:()=>Ut,forkWithErrorHandler:()=>jt,fromFiber:()=>Bt,fromFiberEffect:()=>qt,fromNullable:()=>na,functionWithSpan:()=>Xi,gen:()=>se,getFiberRefs:()=>Sr,getRuntimeFlags:()=>ri,head:()=>P,if:()=>Un,ignore:()=>Ae,ignoreLogged:()=>Ne,inheritFiberRefs:()=>wr,interrupt:()=>We,interruptWith:()=>ze,interruptible:()=>Ve,interruptibleMask:()=>Ge,intoDeferred:()=>Pn,isEffect:()=>b,isFailure:()=>Or,isSuccess:()=>Ar,iterate:()=>lr,labelMetrics:()=>ci,labelMetricsScoped:()=>li,let:()=>Fn,liftPredicate:()=>Ye,linkSpans:()=>Ji,locally:()=>vr,locallyScoped:()=>kr,locallyScopedWith:()=>xr,locallyWith:()=>Er,log:()=>Mr,logAnnotations:()=>Vr,logDebug:()=>Dr,logError:()=>Br,logFatal:()=>qr,logInfo:()=>Ur,logTrace:()=>Pr,logWarning:()=>jr,logWithLevel:()=>Lr,loop:()=>fr,makeSemaphore:()=>pi,makeSpan:()=>Hi,makeSpanScoped:()=>Yi,map:()=>rt,mapAccum:()=>it,mapBoth:()=>at,mapError:()=>st,mapErrorCause:()=>ot,mapInputContext:()=>bn,match:()=>Nr,matchCause:()=>Cr,matchCauseEffect:()=>Rr,matchEffect:()=>Fr,merge:()=>ct,mergeAll:()=>D,metricLabels:()=>fi,negate:()=>ut,never:()=>oe,none:()=>ce,onError:()=>mt,onExit:()=>gt,onInterrupt:()=>Ke,once:()=>k,option:()=>Dn,optionFromOptional:()=>ra,orDie:()=>Kr,orDieWith:()=>Jr,orElse:()=>Hr,orElseFail:()=>Yr,orElseSucceed:()=>Zr,parallelErrors:()=>Ce,parallelFinalizers:()=>yt,partition:()=>U,patchFiberRefs:()=>_r,patchRuntimeFlags:()=>ii,promise:()=>ue,provide:()=>Sn,provideService:()=>wn,provideServiceEffect:()=>vn,race:()=>Xn,raceAll:()=>Qn,raceFirst:()=>er,raceWith:()=>tr,random:()=>Qr,randomWith:()=>Xr,reduce:()=>j,reduceEffect:()=>B,reduceRight:()=>q,reduceWhile:()=>$,repeat:()=>dr,repeatN:()=>hr,repeatOrElse:()=>pr,replicate:()=>W,replicateEffect:()=>z,request:()=>Ci,retry:()=>Fe,retryOrElse:()=>Me,runCallback:()=>gi,runFork:()=>mi,runPromise:()=>yi,runPromiseExit:()=>bi,runRequestBlock:()=>Ai,runSync:()=>Si,runSyncExit:()=>wi,runtime:()=>ni,sandbox:()=>Re,schedule:()=>mr,scheduleForked:()=>gr,scheduleFrom:()=>yr,scope:()=>wt,scopeWith:()=>vt,scoped:()=>Et,sequentialFinalizers:()=>St,serviceConstants:()=>_n,serviceFunction:()=>En,serviceFunctionEffect:()=>kn,serviceFunctions:()=>xn,serviceMembers:()=>In,serviceOption:()=>Tn,serviceOptional:()=>On,setFiberRefs:()=>Ir,sleep:()=>rn,spanAnnotations:()=>Gi,spanLinks:()=>Ki,step:()=>Ni,succeed:()=>le,succeedNone:()=>fe,succeedSome:()=>de,summarized:()=>nr,supervised:()=>$t,suspend:()=>he,sync:()=>pe,tagMetrics:()=>oi,tagMetricsScoped:()=>ui,takeUntil:()=>V,takeWhile:()=>G,tap:()=>rr,tapBoth:()=>ir,tapDefect:()=>ar,tapError:()=>sr,tapErrorCause:()=>cr,tapErrorTag:()=>or,timed:()=>an,timedWith:()=>sn,timeout:()=>on,timeoutFail:()=>un,timeoutFailCause:()=>ln,timeoutOption:()=>cn,timeoutTo:()=>fn,tracer:()=>Pi,tracerWith:()=>Di,transplant:()=>Wt,try:()=>Le,tryMap:()=>Pe,tryMapPromise:()=>De,tryPromise:()=>Ue,uninterruptible:()=>Je,uninterruptibleMask:()=>He,unless:()=>Wn,unlessEffect:()=>zn,unsafeMakeSemaphore:()=>hi,unsandbox:()=>je,updateFiberRefs:()=>Tr,updateService:()=>An,useSpan:()=>Zi,using:()=>kt,validate:()=>vi,validateAll:()=>K,validateFirst:()=>J,validateWith:()=>Ei,void:()=>me,when:()=>Vn,whenEffect:()=>Gn,whenFiberRef:()=>Kn,whenRef:()=>Jn,whileLoop:()=>br,withClock:()=>Zt,withClockScoped:()=>Yt,withConcurrency:()=>zt,withConfigProvider:()=>hn,withConfigProviderScoped:()=>pn,withConsole:()=>tn,withConsoleScoped:()=>en,withEarlyRelease:()=>xt,withFiberRuntime:()=>Q,withLogSpan:()=>$r,withMaxOpsBeforeYield:()=>Kt,withMetric:()=>di,withParentSpan:()=>ta,withRandom:()=>ei,withRandomScoped:()=>ti,withRequestBatching:()=>Fi,withRequestCache:()=>Li,withRequestCaching:()=>Mi,withRuntimeFlagsPatch:()=>ai,withRuntimeFlagsPatchScoped:()=>si,withScheduler:()=>Vt,withSchedulingPriority:()=>Gt,withSpan:()=>Qi,withSpanScoped:()=>ea,withTracer:()=>Ui,withTracerEnabled:()=>Bi,withTracerScoped:()=>ji,withTracerTiming:()=>qi,withUnhandledErrorLogLevel:()=>Gr,yieldNow:()=>ge,zip:()=>ki,zipLeft:()=>xi,zipRight:()=>_i,zipWith:()=>Ii});var r=n(361369),i=n(732706),a=n(883768),s=n(820808),o=n(672620),c=n(344862),u=n(212164),l=n(860356),f=n(486881),d=n(502787),h=n(103611),p=n(280561),m=n(866172),g=n(71108);const y=o.EffectTypeId,b=o.isEffect,S=u.cached,w=u.cachedInvalidateWithTTL,v=s.memoize,E=u.cachedFunction,k=s.once,x=l.all,_=l.allWith,I=l.allSuccesses,T=s.dropUntil,O=s.dropWhile,A=s.every,N=l.exists,C=l.filter,R=s.filterMap,F=s.findFirst,M=s.firstSuccessOf,L=l.forEach,P=s.head,D=l.mergeAll,U=l.partition,j=s.reduce,B=l.reduceEffect,q=s.reduceRight,$=s.reduceWhile,W=l.replicate,z=l.replicateEffect,V=s.takeUntil,G=s.takeWhile,K=l.validateAll,J=l.validateFirst,H=o.async,Y=h.asyncEffect,Z=o.custom,Q=o.withFiberRuntime,X=o.fail,ee=o.failSync,te=o.failCause,ne=o.failCauseSync,re=o.die,ie=o.dieMessage,ae=o.dieSync,se=s.gen,oe=o.never,ce=s.none,ue=s.promise,le=o.succeed,fe=s.succeedNone,de=s.succeedSome,he=o.suspend,pe=o.sync,me=o.void,ge=o.yieldNow,ye=s._catch,be=o.catchAll,Se=o.catchAllCause,we=s.catchAllDefect,ve=o.catchIf,Ee=o.catchSome,ke=s.catchSomeCause,xe=s.catchSomeDefect,_e=s.catchTag,Ie=s.catchTags,Te=s.cause,Oe=s.eventually,Ae=s.ignore,Ne=s.ignoreLogged,Ce=s.parallelErrors,Re=s.sandbox,Fe=p.retry_combined,Me=p.retryOrElse_Effect,Le=s.try_,Pe=s.tryMap,De=s.tryMapPromise,Ue=s.tryPromise,je=s.unsandbox,Be=s.allowInterrupt,qe=o.checkInterruptible,$e=l.disconnect,We=o.interrupt,ze=o.interruptWith,Ve=o.interruptible,Ge=o.interruptibleMask,Ke=o.onInterrupt,Je=o.uninterruptible,He=o.uninterruptibleMask,Ye=s.liftPredicate,Ze=o.as,Qe=s.asSome,Xe=s.asSomeError,et=o.asVoid,tt=o.flip,nt=s.flipWith,rt=o.map,it=s.mapAccum,at=o.mapBoth,st=o.mapError,ot=s.mapErrorCause,ct=s.merge,ut=s.negate,lt=l.acquireRelease,ft=l.acquireReleaseInterruptible,dt=o.acquireUseRelease,ht=l.addFinalizer,pt=l.ensuring,mt=o.onError,gt=o.onExit,yt=l.parallelFinalizers,bt=l.finalizersMask,St=l.sequentialFinalizers,wt=l.scope,vt=l.scopeWith,Et=l.scopedEffect,kt=l.using,xt=l.withEarlyRelease,_t=u.awaitAllChildren,It=l.daemonChildren,Tt=s.descriptor,Ot=s.descriptorWith,At=s.diffFiberRefs,Nt=u.ensuringChild,Ct=u.ensuringChildren,Rt=o.fiberId,Ft=o.fiberIdWith,Mt=l.fork,Lt=l.forkDaemon,Pt=u.forkAll,Dt=u.forkIn,Ut=u.forkScoped,jt=l.forkWithErrorHandler,Bt=u.fromFiber,qt=u.fromFiberEffect,$t=u.supervised,Wt=o.transplant,zt=o.withConcurrency,Vt=g.withScheduler,Gt=o.withSchedulingPriority,Kt=o.withMaxOpsBeforeYield,Jt=s.clock,Ht=s.clockWith,Yt=l.withClockScoped,Zt=c.withClock,Qt=i.console,Xt=i.consoleWith,en=i.withConsoleScoped,tn=i.withConsole,nn=s.delay,rn=s.sleep,an=s.timed,sn=s.timedWith,on=u.timeout,cn=u.timeoutOption,un=u.timeoutFail,ln=u.timeoutFailCause,fn=u.timeoutTo,dn=c.configProviderWith,hn=c.withConfigProvider,pn=l.withConfigProviderScoped,mn=o.context,gn=s.contextWith,yn=o.contextWithEffect,bn=o.mapInputContext,Sn=f.effect_provide,wn=s.provideService,vn=s.provideServiceEffect,En=s.serviceFunction,kn=s.serviceFunctionEffect,xn=s.serviceFunctions,_n=s.serviceConstants,In=s.serviceMembers,Tn=s.serviceOption,On=s.serviceOptional,An=s.updateService,Nn=s.Do,Cn=s.bind,Rn=s.bindTo,Fn=s.let_,Mn=o.either,Ln=o.exit,Pn=o.intoDeferred,Dn=s.option,Un=o.if_,jn=s.filterOrDie,Bn=s.filterOrDieMessage,qn=s.filterOrElse,$n=s.filterOrFail,Wn=s.unless,zn=s.unlessEffect,Vn=s.when,Gn=o.whenEffect,Kn=s.whenFiberRef,Jn=s.whenRef,Hn=o.flatMap,Yn=o.andThen,Zn=o.flatten,Qn=l.raceAll,Xn=l.race,er=u.raceFirst,tr=l.raceWith,nr=s.summarized,rr=o.tap,ir=s.tapBoth,ar=s.tapDefect,sr=s.tapError,or=s.tapErrorTag,cr=s.tapErrorCause,ur=s.forever,lr=s.iterate,fr=s.loop,dr=p.repeat_combined,hr=s.repeatN,pr=p.repeatOrElse_Effect,mr=p.schedule_Effect,gr=u.scheduleForked,yr=p.scheduleFrom_Effect,br=o.whileLoop,Sr=s.fiberRefs,wr=s.inheritFiberRefs,vr=o.fiberRefLocally,Er=o.fiberRefLocallyWith,kr=l.fiberRefLocallyScoped,xr=l.fiberRefLocallyScopedWith,_r=s.patchFiberRefs,Ir=s.setFiberRefs,Tr=s.updateFiberRefs,Or=s.isFailure,Ar=s.isSuccess,Nr=s.match,Cr=o.matchCause,Rr=o.matchCauseEffect,Fr=o.matchEffect,Mr=s.log,Lr=(e,...t)=>s.logWithLevel(e)(...t),Pr=s.logTrace,Dr=s.logDebug,Ur=s.logInfo,jr=s.logWarning,Br=s.logError,qr=s.logFatal,$r=s.withLogSpan,Wr=s.annotateLogs,zr=l.annotateLogsScoped,Vr=s.logAnnotations,Gr=o.withUnhandledErrorLogLevel,Kr=o.orDie,Jr=o.orDieWith,Hr=o.orElse,Yr=s.orElseFail,Zr=s.orElseSucceed,Qr=s.random,Xr=c.randomWith,ei=c.withRandom,ti=l.withRandomScoped,ni=h.runtime,ri=o.runtimeFlags,ii=o.updateRuntimeFlags,ai=o.withRuntimeFlags,si=l.withRuntimeFlagsScoped,oi=s.tagMetrics,ci=s.labelMetrics,ui=l.tagMetricsScoped,li=l.labelMetricsScoped,fi=o.metricLabels,di=s.withMetric,hi=u.unsafeMakeSemaphore,pi=u.makeSemaphore,mi=h.unsafeForkEffect,gi=h.unsafeRunEffect,yi=h.unsafeRunPromiseEffect,bi=h.unsafeRunPromiseExitEffect,Si=h.unsafeRunSyncEffect,wi=h.unsafeRunSyncExitEffect,vi=l.validate,Ei=l.validateWith,ki=l.zipOptions,xi=l.zipLeftOptions,_i=l.zipRightOptions,Ii=l.zipWithOptions,Ti=(0,r.dual)(2,((e,t)=>Ii(e,t,((e,t)=>e(t))))),Oi=o.blocked,Ai=o.runRequestBlock,Ni=o.step,Ci=(0,r.dual)((e=>m.isRequest(e[0])),d.fromRequest),Ri=d.cacheRequest,Fi=o.withRequestBatching,Mi=d.withRequestCaching,Li=d.withRequestCache,Pi=s.tracer,Di=c.tracerWith,Ui=c.withTracer,ji=l.withTracerScoped,Bi=o.withTracerEnabled,qi=o.withTracerTiming,$i=s.annotateSpans,Wi=s.annotateCurrentSpan,zi=s.currentSpan,Vi=s.currentParentSpan,Gi=s.spanAnnotations,Ki=s.spanLinks,Ji=s.linkSpans,Hi=s.makeSpan,Yi=l.makeSpanScoped,Zi=s.useSpan,Qi=s.withSpan,Xi=s.functionWithSpan,ea=l.withSpanScoped,ta=s.withParentSpan,na=s.fromNullable,ra=s.optionFromOptional,ia=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}Error.stackTraceLimit=t,Object.setPrototypeOf(r,a.TagProto),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack});const i=new Map;return new Proxy(r,{get(e,t,n){if("use"===t)return e=>o.andThen(r,e);if(t in r)return r[t];if(i.has(t))return i.get(t);const a=(...e)=>o.andThen(r,(n=>"function"===typeof n[t]?(i.set(t,((...e)=>o.andThen(r,(n=>n[t](...e))))),n[t](...e)):(i.set(t,o.andThen(r,(e=>e[t]))),n[t]))),s=o.andThen(r,(e=>e[t]));return Object.assign(a,s),Object.setPrototypeOf(a,Object.getPrototypeOf(s)),i.set(t,a),a}})}},237728:(e,t,n)=>{n.r(t),n.d(t,{ChannelTypeId:()=>o,Class:()=>h,CommitPrototype:()=>u,EffectPrototype:()=>c,EffectTypeId:()=>i,SinkTypeId:()=>s,StreamTypeId:()=>a,StructuralClass:()=>p,StructuralCommitPrototype:()=>l});var r=n(68498);const i=r.EffectTypeId,a=r.StreamTypeId,s=r.SinkTypeId,o=r.ChannelTypeId,c=r.EffectPrototype,u=r.CommitPrototype,l=r.StructuralCommitPrototype,f=r.Base,d=r.StructuralBase;class h extends f{}class p extends d{}},757964:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>$,TypeId:()=>u,all:()=>U,andThen:()=>L,ap:()=>D,bind:()=>W,bindTo:()=>z,filterOrLeft:()=>I,flatMap:()=>M,flip:()=>j,fromNullable:()=>d,fromOption:()=>h,gen:()=>q,getEquivalence:()=>w,getLeft:()=>S,getOrElse:()=>O,getOrNull:()=>A,getOrThrow:()=>R,getOrThrowWith:()=>C,getOrUndefined:()=>N,getRight:()=>b,isEither:()=>m,isLeft:()=>g,isRight:()=>y,left:()=>f,let:()=>V,liftPredicate:()=>_,map:()=>k,mapBoth:()=>v,mapLeft:()=>E,match:()=>x,merge:()=>T,orElse:()=>F,right:()=>l,try:()=>p,zipWith:()=>P});var r=n(235309),i=n(361369),a=n(91276),s=n(609018),o=n(856572),c=n(730276);const u=s.TypeId,l=s.right,f=s.left,d=(0,i.dual)(2,((e,t)=>null==e?f(t(e)):l(e))),h=s.fromOption,p=e=>{if((0,o.isFunction)(e))try{return l(e())}catch(t){return f(t)}else try{return l(e.try())}catch(t){return f(e.catch(t))}},m=s.isEither,g=s.isLeft,y=s.isRight,b=s.getRight,S=s.getLeft,w=({left:e,right:t})=>r.make(((n,r)=>g(n)?g(r)&&e(n.left,r.left):y(r)&&t(n.right,r.right))),v=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?f(t(e.left)):l(n(e.right)))),E=(0,i.dual)(2,((e,t)=>g(e)?f(t(e.left)):l(e.right))),k=(0,i.dual)(2,((e,t)=>y(e)?l(t(e.right)):f(e.left))),x=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?t(e.left):n(e.right))),_=(0,i.dual)(3,((e,t,n)=>t(e)?l(e):f(n(e)))),I=(0,i.dual)(3,((e,t,n)=>M(e,(e=>t(e)?l(e):f(n(e)))))),T=x({onLeft:i.identity,onRight:i.identity}),O=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):e.right)),A=O(i.constNull),N=O(i.constUndefined),C=(0,i.dual)(2,((e,t)=>{if(y(e))return e.right;throw t(e.left)})),R=C((()=>new Error("getOrThrow called on a Left"))),F=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):l(e.right))),M=(0,i.dual)(2,((e,t)=>g(e)?f(e.left):t(e.right))),L=(0,i.dual)(2,((e,t)=>M(e,(e=>{const n=(0,o.isFunction)(t)?t(e):t;return m(n)?n:l(n)})))),P=(0,i.dual)(3,((e,t,n)=>M(e,(e=>k(t,(t=>n(e,t))))))),D=(0,i.dual)(2,((e,t)=>P(e,t,((e,t)=>e(t))))),U=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(g(n))return n;t.push(n.right)}return l(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(g(r))return r;t[n]=r.right}return l(t)},j=e=>g(e)?l(e.left):f(e.right),B=c.adapter(),q=(...e)=>{const t=(1===e.length?e[0]:e[1].bind(e[0]))(B);let n=t.next();if(n.done)return l(n.value);{let e=n.value;if(e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e))return e;for(;!n.done;)if(n=t.next(e.right),!n.done&&(e=n.value,e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e)))return e;return l(n.value)}},$=l({}),W=a.bind(k,M),z=a.bindTo(k),V=a.let_(k)},43977:(e,t,n)=>{n.r(t),n.d(t,{equals:()=>o,equivalence:()=>l,isEqual:()=>u,symbol:()=>s});var r=n(367337),i=n(856572),a=n(730276);const s=Symbol.for("effect/Equal");function o(){return 1===arguments.length?e=>c(e,arguments[0]):c(arguments[0],arguments[1])}function c(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(u(e)&&u(t))return!(r.hash(e)!==r.hash(t)||!e[s](t))||!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(a.structuralRegionState.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>c(e,t[n])));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(const r of n)if(!(r in t)||!c(e[r],t[r]))return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t);return!0}}return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t)}}return!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t)}const u=e=>(0,i.hasProperty)(e,s),l=()=>o},235309:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>y,all:()=>S,array:()=>E,bigint:()=>l,boolean:()=>u,combine:()=>d,combineAll:()=>m,combineMany:()=>h,make:()=>i,mapInput:()=>g,number:()=>c,product:()=>b,productMany:()=>w,strict:()=>s,string:()=>o,struct:()=>k,symbol:()=>f,tuple:()=>v});var r=n(361369);const i=e=>(t,n)=>t===n||e(t,n),a=(e,t)=>e===t,s=()=>a,o=s(),c=s(),u=s(),l=s(),f=s(),d=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(n,r)&&t(n,r))))),h=(0,r.dual)(2,((e,t)=>i(((n,r)=>{if(!e(n,r))return!1;for(const e of t)if(!e(n,r))return!1;return!0})))),p=(e,t)=>!0,m=e=>h(p,e),g=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),y=g(c,(e=>e.getTime())),b=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>e(n,i)&&t(r,a))))),S=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;if(!a(t[i],n[i]))return!1;i++}return!0})),w=(e,t)=>{const n=S(t);return i(((t,r)=>!!e(t[0],r[0])&&n(t.slice(1),r.slice(1))))},v=(...e)=>S(e),E=e=>i(((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){if(!e(t[r],n[r]))return!1}return!0})),k=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t)if(!e[i](n[i],r[i]))return!1;return!0}))}},992102:(e,t,n)=>{n.r(t),n.d(t,{isParallel:()=>c,isParallelN:()=>u,isSequential:()=>o,match:()=>l,parallel:()=>a,parallelN:()=>s,sequential:()=>i});var r=n(232628);const i=r.sequential,a=r.parallel,s=r.parallelN,o=r.isSequential,c=r.isParallel,u=r.isParallelN,l=r.match},896949:(e,t,n)=>{n.r(t),n.d(t,{all:()=>f,as:()=>c,asVoid:()=>u,causeOption:()=>l,die:()=>d,exists:()=>h,fail:()=>p,failCause:()=>m,flatMap:()=>g,flatMapEffect:()=>y,flatten:()=>b,forEachEffect:()=>S,fromEither:()=>w,fromOption:()=>v,getOrElse:()=>E,interrupt:()=>k,isExit:()=>i,isFailure:()=>a,isInterrupted:()=>o,isSuccess:()=>s,map:()=>x,mapBoth:()=>_,mapError:()=>I,mapErrorCause:()=>T,match:()=>O,matchEffect:()=>A,succeed:()=>N,void:()=>C,zip:()=>R,zipLeft:()=>F,zipPar:()=>L,zipParLeft:()=>P,zipParRight:()=>D,zipRight:()=>M,zipWith:()=>U});var r=n(672620);const i=r.exitIsExit,a=r.exitIsFailure,s=r.exitIsSuccess,o=r.exitIsInterrupted,c=r.exitAs,u=r.exitAsVoid,l=r.exitCauseOption,f=r.exitCollectAll,d=r.exitDie,h=r.exitExists,p=r.exitFail,m=r.exitFailCause,g=r.exitFlatMap,y=r.exitFlatMapEffect,b=r.exitFlatten,S=r.exitForEachEffect,w=r.exitFromEither,v=r.exitFromOption,E=r.exitGetOrElse,k=r.exitInterrupt,x=r.exitMap,_=r.exitMapBoth,I=r.exitMapError,T=r.exitMapErrorCause,O=r.exitMatch,A=r.exitMatchEffect,N=r.exitSucceed,C=r.exitVoid,R=r.exitZip,F=r.exitZipLeft,M=r.exitZipRight,L=r.exitZipPar,P=r.exitZipParLeft,D=r.exitZipParRight,U=r.exitZipWith},599571:(e,t,n)=>{n.r(t),n.d(t,{FiberTypeId:()=>o,Order:()=>u,RuntimeFiberTypeId:()=>c,all:()=>g,await:()=>h,awaitAll:()=>p,children:()=>m,done:()=>y,dump:()=>b,dumpAll:()=>S,fail:()=>w,failCause:()=>v,fromEffect:()=>E,getCurrentFiber:()=>k,id:()=>d,inheritAll:()=>x,interrupt:()=>_,interruptAll:()=>A,interruptAllAs:()=>N,interruptAs:()=>T,interruptAsFork:()=>O,interruptFork:()=>C,interrupted:()=>I,isFiber:()=>l,isRuntimeFiber:()=>f,join:()=>R,joinAll:()=>F,map:()=>M,mapEffect:()=>L,mapFiber:()=>P,match:()=>D,never:()=>U,orElse:()=>j,orElseEither:()=>B,poll:()=>q,pretty:()=>$,roots:()=>W,scoped:()=>V,status:()=>G,succeed:()=>K,unsafeRoots:()=>z,void:()=>J,zip:()=>H,zipLeft:()=>Y,zipRight:()=>Z,zipWith:()=>Q});var r=n(672620),i=n(212164),a=n(424285),s=n(860356);const o=a.FiberTypeId,c=a.RuntimeFiberTypeId,u=a.Order,l=a.isFiber,f=a.isRuntimeFiber,d=a.id,h=a._await,p=s.fiberAwaitAll,m=a.children,g=s.fiberAll,y=a.done,b=a.dump,S=a.dumpAll,w=a.fail,v=a.failCause,E=a.fromEffect,k=a.getCurrentFiber,x=a.inheritAll,_=r.interruptFiber,I=a.interrupted,T=r.interruptAsFiber,O=a.interruptAsFork,A=a.interruptAll,N=a.interruptAllAs,C=s.fiberInterruptFork,R=a.join,F=s.fiberJoinAll,M=a.map,L=a.mapEffect,P=a.mapFiber,D=a.match,U=a.never,j=a.orElse,B=a.orElseEither,q=a.poll,$=a.pretty,W=a.roots,z=a.unsafeRoots,V=s.fiberScoped,G=a.status,K=a.succeed,J=a.void,H=i.zipFiber,Y=i.zipLeftFiber,Z=i.zipRightFiber,Q=i.zipWithFiber},295602:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>i,combine:()=>d,combineAll:()=>h,composite:()=>o,getOrElse:()=>p,ids:()=>m,isComposite:()=>f,isFiberId:()=>c,isNone:()=>u,isRuntime:()=>l,make:()=>g,none:()=>a,runtime:()=>s,threadName:()=>y,toOption:()=>b,toSet:()=>S,unsafeMake:()=>w});var r=n(478908);const i=r.FiberIdTypeId,a=r.none,s=r.runtime,o=r.composite,c=r.isFiberId,u=r.isNone,l=r.isRuntime,f=r.isComposite,d=r.combine,h=r.combineAll,p=r.getOrElse,m=r.ids,g=r.make,y=r.threadName,b=r.toOption,S=r.toSet,w=r.unsafeMake},989105:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsSym:()=>i,delete:()=>a,empty:()=>m,fiberRefs:()=>s,forkAs:()=>o,get:()=>c,getOrDefault:()=>u,joinAs:()=>l,setAll:()=>f,unsafeMake:()=>p,updateAs:()=>d,updateManyAs:()=>h});var r=n(789391);const i=r.FiberRefsSym,a=r.delete_,s=r.fiberRefs,o=r.forkAs,c=r.get,u=r.getOrDefault,l=r.joinAs,f=r.setAll,d=r.updateAs,h=r.updateManyAs,p=r.unsafeMake,m=r.empty},46755:(e,t,n)=>{n.r(t),n.d(t,{combine:()=>s,diff:()=>a,empty:()=>i,patch:()=>o});var r=n(392538);const i=r.empty,a=r.diff,s=r.combine,o=r.patch},285485:(e,t,n)=>{n.r(t),n.d(t,{FiberStatusTypeId:()=>y,done:()=>b,isDone:()=>E,isFiberStatus:()=>v,isRunning:()=>k,isSuspended:()=>x,running:()=>S,suspended:()=>w});var r=n(43977),i=n(361369),a=n(367337),s=n(856572);const o="effect/FiberStatus",c=Symbol.for(o),u="Done",l="Running",f="Suspended",d=a.string(`${o}-${u}`);class h{[c]=c;_tag=u;[a.symbol](){return d}[r.symbol](e){return g(e)&&e._tag===u}}class p{runtimeFlags;[c]=c;_tag=l;constructor(e){this.runtimeFlags=e}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===l&&this.runtimeFlags===e.runtimeFlags}}class m{runtimeFlags;blockingOn;[c]=c;_tag=f;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.combine(a.hash(this.blockingOn)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===f&&this.runtimeFlags===e.runtimeFlags&&r.equals(this.blockingOn,e.blockingOn)}}const g=e=>(0,s.hasProperty)(e,c),y=c,b=new h,S=e=>new p(e),w=(e,t)=>new m(e,t),v=g,E=e=>e._tag===u,k=e=>e._tag===l,x=e=>e._tag===f},361369:(e,t,n)=>{n.r(t),n.d(t,{SK:()=>k,absurd:()=>y,apply:()=>a,compose:()=>g,constFalse:()=>f,constNull:()=>d,constTrue:()=>l,constUndefined:()=>h,constVoid:()=>p,constant:()=>u,dual:()=>i,flip:()=>m,flow:()=>v,hole:()=>E,identity:()=>s,isFunction:()=>r,pipe:()=>w,satisfies:()=>o,tupled:()=>b,unsafeCoerce:()=>c,untupled:()=>S});const r=e=>"function"===typeof e,i=function(e,t){if("function"===typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,i){return arguments.length>=4?t(e,n,r,i):function(i){return t(i,e,n,r)}};case 5:return function(e,n,r,i,a){return arguments.length>=5?t(e,n,r,i,a):function(a){return t(a,e,n,r,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(e){return t(e,...n)}}}},a=e=>t=>t(e),s=e=>e,o=()=>e=>e,c=s,u=e=>()=>e,l=u(!0),f=u(!1),d=u(null),h=u(void 0),p=h,m=e=>(...t)=>(...n)=>e(...n)(...t),g=i(2,((e,t)=>n=>t(e(n)))),y=e=>{throw new Error("Called `absurd` function which should be uncallable")},b=e=>t=>e(...t),S=e=>(...t)=>e(t);function w(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return s(a(i(r(n(t(e))))));case 8:return o(s(a(i(r(n(t(e)))))));case 9:return c(o(s(a(i(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}function v(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(a(i(r(n(t(e.apply(this,arguments)))))))))}}}const E=c(y),k=(e,t)=>t},606517:(e,t,n)=>{n.r(t),n.d(t,{globalValue:()=>s});var r=n(853563);const i=Symbol.for(`effect/GlobalValue/globalStoreId/${r.getCurrentVersion()}`);i in globalThis||(globalThis[i]=new Map);const a=globalThis[i],s=(e,t)=>(a.has(e)||a.set(e,t()),a.get(e))},367337:(e,t,n)=>{n.r(t),n.d(t,{array:()=>b,cached:()=>S,combine:()=>f,hash:()=>u,isHash:()=>h,number:()=>p,optimize:()=>d,random:()=>l,string:()=>m,structure:()=>y,structureKeys:()=>g,symbol:()=>c});var r=n(361369),i=n(606517),a=n(856572),s=n(730276);const o=(0,i.globalValue)(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),c=Symbol.for("effect/Hash"),u=e=>{if(!0===s.structuralRegionState.enabled)return 0;switch(typeof e){case"number":return p(e);case"bigint":return m(e.toString(10));case"boolean":case"symbol":return m(String(e));case"string":return m(e);case"undefined":return m("undefined");case"function":case"object":return null===e?m("null"):e instanceof Date?u(e.toISOString()):h(e)?e[c]():l(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},l=e=>(o.has(e)||o.set(e,p(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),o.get(e)),f=e=>t=>53*t^e,d=e=>3221225471&e|e>>>1&1073741824,h=e=>(0,a.hasProperty)(e,c),p=e=>{if(e!==e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return d(e)},m=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return d(t)},g=(e,t)=>{let n=12289;for(let i=0;i<t.length;i++)n^=(0,r.pipe)(m(t[i]),f(u(e[t[i]])));return d(n)},y=e=>g(e,Object.keys(e)),b=e=>{let t=6151;for(let n=0;n<e.length;n++)t=(0,r.pipe)(t,f(u(e[n])));return d(t)},S=function(){if(1===arguments.length){const e=arguments[0];return function(t){return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}},827964:(e,t,n)=>{n.r(t),n.d(t,{beginMutation:()=>E,compact:()=>P,empty:()=>s,endMutation:()=>k,entries:()=>S,filter:()=>L,filterMap:()=>D,findFirst:()=>U,flatMap:()=>R,forEach:()=>F,fromIterable:()=>c,get:()=>l,getHash:()=>f,has:()=>h,hasHash:()=>p,isEmpty:()=>u,isHashMap:()=>a,keySet:()=>y,keys:()=>g,make:()=>o,map:()=>C,modify:()=>T,modifyAt:()=>_,modifyHash:()=>I,mutate:()=>x,reduce:()=>M,remove:()=>A,removeMany:()=>N,set:()=>m,size:()=>v,toEntries:()=>w,union:()=>O,unsafeGet:()=>d,values:()=>b});var r=n(918799),i=n(722167);r.HashMapTypeId;const a=r.isHashMap,s=r.empty,o=r.make,c=r.fromIterable,u=r.isEmpty,l=r.get,f=r.getHash,d=r.unsafeGet,h=r.has,p=r.hasHash,m=r.set,g=r.keys,y=function(e){return(0,i.makeImpl)(e)},b=r.values,S=r.entries,w=e=>Array.from(S(e)),v=r.size,E=r.beginMutation,k=r.endMutation,x=r.mutate,_=r.modifyAt,I=r.modifyHash,T=r.modify,O=r.union,A=r.remove,N=r.removeMany,C=r.map,R=r.flatMap,F=r.forEach,M=r.reduce,L=r.filter,P=r.compact,D=r.filterMap,U=r.findFirst},227561:(e,t,n)=>{n.r(t),n.d(t,{add:()=>y,beginMutation:()=>p,difference:()=>S,empty:()=>a,endMutation:()=>m,every:()=>l,filter:()=>T,flatMap:()=>x,forEach:()=>_,fromIterable:()=>s,has:()=>c,intersection:()=>w,isHashSet:()=>i,isSubset:()=>f,make:()=>o,map:()=>k,mutate:()=>g,partition:()=>O,reduce:()=>I,remove:()=>b,size:()=>h,some:()=>u,toggle:()=>E,union:()=>v,values:()=>d});var r=n(722167);r.HashSetTypeId;const i=r.isHashSet,a=r.empty,s=r.fromIterable,o=r.make,c=r.has,u=r.some,l=r.every,f=r.isSubset,d=r.values,h=r.size,p=r.beginMutation,m=r.endMutation,g=r.mutate,y=r.add,b=r.remove,S=r.difference,w=r.intersection,v=r.union,E=r.toggle,k=r.map,x=r.flatMap,_=r.forEach,I=r.reduce,T=r.filter,O=r.partition},883845:(e,t,n)=>{n.r(t),n.d(t,{BaseProto:()=>o,Class:()=>c,NodeInspectSymbol:()=>i,format:()=>s,stringifyCircular:()=>l,toJSON:()=>a,toStringUnknown:()=>u});var r=n(856572);const i=Symbol.for("nodejs.util.inspect.custom"),a=e=>(0,r.hasProperty)(e,"toJSON")&&(0,r.isFunction)(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(a):e,s=e=>JSON.stringify(e,null,2),o={toJSON(){return a(this)},[i](){return this.toJSON()},toString(){return s(this.toJSON())}};class c{[i](){return this.toJSON()}toString(){return s(this.toJSON())}}const u=(e,t=2)=>{try{return"object"===typeof e?l(e,t):String(e)}catch(n){return String(e)}},l=(e,t)=>{let n=[];const r=JSON.stringify(e,((e,t)=>"object"===typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t),t);return n=void 0,r}},286780:(e,t,n)=>{n.r(t),n.d(t,{LayerTypeId:()=>d,MemoMapTypeId:()=>h,annotateLogs:()=>g,annotateSpans:()=>y,build:()=>b,buildWithMemoMap:()=>Ue,buildWithScope:()=>S,catchAll:()=>w,catchAllCause:()=>v,context:()=>E,die:()=>k,dieSync:()=>x,discard:()=>_,effect:()=>I,effectContext:()=>O,effectDiscard:()=>T,empty:()=>A,extendScope:()=>N,fail:()=>C,failCause:()=>F,failCauseSync:()=>M,failSync:()=>R,fiberRefLocallyScopedWith:()=>te,flatMap:()=>L,flatten:()=>P,fresh:()=>D,function:()=>U,isFresh:()=>m,isLayer:()=>p,launch:()=>j,locally:()=>Q,locallyEffect:()=>Z,locallyScoped:()=>ee,locallyWith:()=>X,makeMemoMap:()=>De,map:()=>B,mapError:()=>q,match:()=>$,matchCause:()=>W,memoize:()=>z,merge:()=>V,mergeAll:()=>G,orDie:()=>K,orElse:()=>J,parentSpan:()=>_e,passthrough:()=>H,project:()=>Y,provide:()=>be,provideMerge:()=>Se,retry:()=>ne,scope:()=>re,scoped:()=>ie,scopedContext:()=>se,scopedDiscard:()=>ae,service:()=>oe,setClock:()=>ke,setConfigProvider:()=>xe,setRequestBatching:()=>Ie,setRequestCache:()=>Oe,setRequestCaching:()=>Te,setScheduler:()=>Ae,setTracer:()=>Ce,setTracerEnabled:()=>Re,setTracerTiming:()=>Fe,setUnhandledErrorLogLevel:()=>Me,span:()=>Ne,succeed:()=>ce,succeedContext:()=>ue,suspend:()=>le,sync:()=>fe,syncContext:()=>de,tap:()=>he,tapError:()=>pe,tapErrorCause:()=>me,toRuntime:()=>ge,toRuntimeWithMemoMap:()=>ye,unwrapEffect:()=>ve,unwrapScoped:()=>Ee,withParentSpan:()=>Pe,withSpan:()=>Le,zipWith:()=>we});var r=n(689702),i=n(114969),a=n(672620),s=n(344862),o=n(860356),c=n(486881),u=n(208624),l=n(502787),f=n(71108);const d=c.LayerTypeId,h=c.MemoMapTypeId,p=c.isLayer,m=c.isFresh,g=c.annotateLogs,y=c.annotateSpans,b=c.build,S=c.buildWithScope,w=c.catchAll,v=c.catchAllCause,E=c.context,k=c.die,x=c.dieSync,_=c.discard,I=c.fromEffect,T=c.fromEffectDiscard,O=c.fromEffectContext,A=c.empty,N=c.extendScope,C=c.fail,R=c.failSync,F=c.failCause,M=c.failCauseSync,L=c.flatMap,P=c.flatten,D=c.fresh,U=c.fromFunction,j=c.launch,B=c.map,q=c.mapError,$=c.match,W=c.matchCause,z=c.memoize,V=c.merge,G=c.mergeAll,K=c.orDie,J=c.orElse,H=c.passthrough,Y=c.project,Z=c.locallyEffect,Q=c.fiberRefLocally,X=c.fiberRefLocallyWith,ee=c.fiberRefLocallyScoped,te=c.fiberRefLocallyScopedWith,ne=c.retry,re=c.scope,ie=c.scoped,ae=c.scopedDiscard,se=c.scopedContext,oe=c.service,ce=c.succeed,ue=c.succeedContext,le=c.suspend,fe=c.sync,de=c.syncContext,he=c.tap,pe=c.tapError,me=c.tapErrorCause,ge=c.toRuntime,ye=c.toRuntimeWithMemoMap,be=c.provide,Se=c.provideMerge,we=c.zipWith,ve=c.unwrapEffect,Ee=c.unwrapScoped,ke=e=>ae(o.fiberRefLocallyScopedWith(s.currentServices,r.add(i.clockTag,e))),xe=u.setConfigProvider,_e=u.parentSpan,Ie=e=>ae(o.fiberRefLocallyScoped(a.currentRequestBatching,e)),Te=e=>ae(o.fiberRefLocallyScoped(l.currentCacheEnabled,e)),Oe=e=>ae(a.isEffect(e)?a.flatMap(e,(e=>o.fiberRefLocallyScoped(l.currentCache,e))):o.fiberRefLocallyScoped(l.currentCache,e)),Ae=e=>ae(o.fiberRefLocallyScoped(f.currentScheduler,e)),Ne=u.span,Ce=u.setTracer,Re=e=>ae(o.fiberRefLocallyScoped(a.currentTracerEnabled,e)),Fe=e=>ae(o.fiberRefLocallyScoped(a.currentTracerTimingEnabled,e)),Me=e=>ae(o.fiberRefLocallyScoped(a.currentUnhandledErrorLogLevel,e)),Le=c.withSpan,Pe=c.withParentSpan,De=c.makeMemoMap,Ue=c.buildWithMemoMap},489425:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>p,append:()=>F,appendAll:()=>M,compact:()=>G,cons:()=>O,drop:()=>U,empty:()=>A,every:()=>j,filter:()=>q,filterMap:()=>V,findFirst:()=>K,flatMap:()=>J,forEach:()=>H,fromIterable:()=>C,getEquivalence:()=>g,head:()=>Y,isCons:()=>_,isList:()=>k,isNil:()=>x,last:()=>Z,make:()=>R,map:()=>Q,nil:()=>T,of:()=>N,partition:()=>X,partitionMap:()=>ee,prepend:()=>L,prependAll:()=>P,prependAllReversed:()=>D,reduce:()=>te,reduceRight:()=>ne,reverse:()=>re,size:()=>I,some:()=>B,splitAt:()=>ie,tail:()=>ae,take:()=>se,toArray:()=>m,toChunk:()=>oe,unsafeHead:()=>ue,unsafeLast:()=>le,unsafeTail:()=>fe});var r=n(630768),i=n(128420),a=n(757964),s=n(43977),o=n(235309),c=n(361369),u=n(367337),l=n(883845),f=n(977948),d=n(953533),h=n(856572);const p=Symbol.for("effect/List"),m=e=>r.fromIterable(e),g=e=>o.mapInput(r.getEquivalence(e),m),y=g(s.equals),b={[p]:p,_tag:"Cons",toString(){return(0,l.format)(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:m(this).map(l.toJSON)}},[l.NodeInspectSymbol](){return this.toJSON()},[s.symbol](e){return k(e)&&this._tag===e._tag&&y(this,e)},[u.symbol](){return u.cached(this,u.array(m(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return(0,d.pipeArguments)(this,arguments)}},S=(e,t)=>{const n=Object.create(b);return n.head=e,n.tail=t,n},w=u.string("Nil"),v={[p]:p,_tag:"Nil",toString(){return(0,l.format)(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[l.NodeInspectSymbol](){return this.toJSON()},[u.symbol]:()=>w,[s.symbol](e){return k(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return(0,d.pipeArguments)(this,arguments)}},E=Object.create(v),k=e=>(0,h.hasProperty)(e,p),x=e=>"Nil"===e._tag,_=e=>"Cons"===e._tag,I=e=>{let t=e,n=0;for(;!x(t);)n+=1,t=t.tail;return n},T=()=>E,O=(e,t)=>S(e,t),A=T,N=e=>S(e,E),C=e=>{const t=e[Symbol.iterator]();let n;if((n=t.next())&&!n.done){const e=S(n.value,E);let r=e;for(;(n=t.next())&&!n.done;){const e=S(n.value,E);r.tail=e,r=e}return e}return E},R=(...e)=>C(e),F=(0,c.dual)(2,((e,t)=>M(e,N(t)))),M=(0,c.dual)(2,((e,t)=>P(t,e))),L=(0,c.dual)(2,((e,t)=>O(t,e))),P=(0,c.dual)(2,((e,t)=>{if(x(e))return t;if(x(t))return e;{const n=S(t.head,e);let r=n,i=t.tail;for(;!x(i);){const t=S(i.head,e);r.tail=t,r=t,i=i.tail}return n}})),D=(0,c.dual)(2,((e,t)=>{let n=e,r=t;for(;_(r);)n=S(r.head,n),r=r.tail;return n})),U=(0,c.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=I(e))return E;let n=e,r=0;for(;!x(n)&&r<t;)n=n.tail,r+=1;return n})),j=(0,c.dual)(2,((e,t)=>{for(const n of e)if(!t(n))return!1;return!0})),B=(0,c.dual)(2,((e,t)=>{let n=e;for(;!x(n);){if(t(n.head))return!0;n=n.tail}return!1})),q=(0,c.dual)(2,((e,t)=>$(e,t,!1))),$=(e,t,n)=>{for(;;){if(x(e))return E;if(t(e.head)!==n)return W(e,e.tail,t,n);e=e.tail}},W=(e,t,n,r)=>{for(;;){if(x(t))return e;if(n(t.head)===r)return z(e,t,n,r);t=t.tail}},z=(e,t,n,r)=>{const i=S(ue(e),E);let a=fe(e),s=i;for(;a!==t;){const e=S(ue(a),E);s.tail=e,s=(0,c.unsafeCoerce)(e),a=(0,c.unsafeCoerce)(a.tail)}let o=t.tail,u=(0,c.unsafeCoerce)(o);for(;!x(o);){if(n(ue(o))!==r)o=o.tail;else{for(;u!==o;){const e=S(ue(u),E);s.tail=e,s=e,u=(0,c.unsafeCoerce)(u.tail)}u=(0,c.unsafeCoerce)(o.tail),o=o.tail}}return x(u)||(s.tail=u),i},V=(0,c.dual)(2,((e,t)=>{const n=[];for(const r of e){const e=t(r);f.isSome(e)&&n.push(e.value)}return C(n)})),G=e=>V(e,c.identity),K=(0,c.dual)(2,((e,t)=>{let n=e;for(;!x(n);){if(t(n.head))return f.some(n.head);n=n.tail}return f.none()})),J=(0,c.dual)(2,((e,t)=>{let n,r,i=e;for(;!x(i);){let e=t(i.head);for(;!x(e);){const t=S(e.head,E);void 0===r?n=t:r.tail=t,r=t,e=e.tail}i=i.tail}return void 0===n?E:n})),H=(0,c.dual)(2,((e,t)=>{let n=e;for(;!x(n);)t(n.head),n=n.tail})),Y=e=>x(e)?f.none():f.some(e.head),Z=e=>x(e)?f.none():f.some(le(e)),Q=(0,c.dual)(2,((e,t)=>{if(x(e))return e;{let n=0;const r=S(t(e.head,n++),E);let i=r,a=e.tail;for(;!x(a);){const e=S(t(a.head,n++),E);i.tail=e,i=e,a=a.tail}return r}})),X=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e)t(i)?r.push(i):n.push(i);return[C(n),C(r)]})),ee=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e){const e=t(i);a.isLeft(e)?n.push(e.left):r.push(e.right)}return[C(n),C(r)]})),te=(0,c.dual)(3,((e,t,n)=>{let r=t,i=e;for(;!x(i);)r=n(r,i.head),i=i.tail;return r})),ne=(0,c.dual)(3,((e,t,n)=>{let r=t,i=re(e);for(;!x(i);)r=n(r,i.head),i=i.tail;return r})),re=e=>{let t=A(),n=e;for(;!x(n);)t=L(t,n.head),n=n.tail;return t},ie=(0,c.dual)(2,((e,t)=>[se(e,t),U(e,t)])),ae=e=>x(e)?f.none():f.some(e.tail),se=(0,c.dual)(2,((e,t)=>{if(t<=0)return E;if(t>=I(e))return e;let n=R(ue(e)),r=fe(e);for(let i=1;i<t;i++)n=S(ue(r),n),r=fe(r);return re(n)})),oe=e=>i.fromIterable(e),ce="Expected List to be non-empty",ue=e=>{if(x(e))throw new Error(ce);return e.head},le=e=>{if(x(e))throw new Error(ce);let t=e,n=e.tail;for(;!x(n);)t=n,n=n.tail;return t.head},fe=e=>{if(x(e))throw new Error(ce);return e.tail}},934321:(e,t,n)=>{n.r(t),n.d(t,{All:()=>o,Debug:()=>d,Error:()=>u,Fatal:()=>c,Info:()=>f,None:()=>p,Order:()=>y,Trace:()=>h,Warning:()=>l,allLevels:()=>m,fromLiteral:()=>E,greaterThan:()=>w,greaterThanEqual:()=>v,lessThan:()=>b,lessThanEqual:()=>S,locally:()=>g});var r=n(361369),i=n(672620),a=n(804676),s=n(259877);const o=i.logLevelAll,c=i.logLevelFatal,u=i.logLevelError,l=i.logLevelWarning,f=i.logLevelInfo,d=i.logLevelDebug,h=i.logLevelTrace,p=i.logLevelNone,m=i.allLogLevels,g=(0,r.dual)(2,((e,t)=>i.fiberRefLocally(e,i.currentLogLevel,t))),y=(0,r.pipe)(a.Order,s.mapInput((e=>e.ordinal))),b=s.lessThan(y),S=s.lessThanOrEqualTo(y),w=s.greaterThan(y),v=s.greaterThanOrEqualTo(y),E=e=>{switch(e){case"All":return o;case"Debug":return d;case"Error":return u;case"Fatal":return c;case"Info":return f;case"Trace":return h;case"None":return p;case"Warning":return l}}},204971:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r,render:()=>i});const r=(e,t)=>({label:e,startTime:t}),i=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`},714349:(e,t,n)=>{n.r(t),n.d(t,{clear:()=>x,empty:()=>h,fromIterable:()=>m,get:()=>g,has:()=>b,make:()=>p,modify:()=>v,modifyAt:()=>E,remove:()=>k,set:()=>S,size:()=>_});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(953533);const u=Symbol.for("effect/MutableHashMap"),l={[u]:u,[Symbol.iterator](){return new f(this)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}};class f{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new d(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new f(this.self)}}class d{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){const e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const h=()=>{const e=Object.create(l);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},p=(...e)=>m(e),m=e=>{const t=h();for(const[n,r]of e)S(t,n,r);return t},g=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.has(t)?o.some(e.referential.get(t)):o.none();const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i?o.none():y(e,i,t)})),y=(e,t,n,i=!1)=>{for(let a=0,s=t.length;a<s;a++)if(n[r.symbol](t[a][0])){const n=t[a][1];return i&&(t.splice(a,1),e.bucketsSize--),o.some(n)}return o.none()},b=(0,i.dual)(2,((e,t)=>o.isSome(g(e,t)))),S=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.set(t,n),e;const i=t[a.symbol](),s=e.buckets.get(i);return void 0===s?(e.buckets.set(i,[[t,n]]),e.bucketsSize++,e):(w(e,s,t),s.push([t,n]),e.bucketsSize++,e)})),w=(e,t,n)=>{for(let i=0,a=t.length;i<a;i++)if(n[r.symbol](t[i][0]))return t.splice(i,1),void e.bucketsSize--},v=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.has(t)&&e.referential.set(t,n(e.referential.get(t))),e;const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s)return e;const c=y(e,s,t,!0);return o.isNone(c)||(s.push([t,n(c.value)]),e.bucketsSize++),e})),E=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t)){const r=n(g(e,t));return o.isSome(r)?S(e,t,r.value):k(e,t),e}const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s){const r=n(o.none());return o.isSome(r)?S(e,t,r.value):e}const c=n(y(e,s,t,!0));return o.isNone(c)?(0===s.length&&e.buckets.delete(i),e):(s.push([t,c.value]),e.bucketsSize++,e)})),k=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.delete(t),e;const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i||(w(e,i,t),0===i.length&&e.buckets.delete(n)),e})),x=e=>(e.referential.clear(),e.buckets.clear(),e.bucketsSize=0,e),_=e=>e.referential.size+e.bucketsSize},366775:(e,t,n)=>{n.r(t),n.d(t,{EmptyMutableQueue:()=>g,bounded:()=>S,capacity:()=>x,isEmpty:()=>E,isFull:()=>k,length:()=>v,offer:()=>_,offerAll:()=>I,poll:()=>T,pollUpTo:()=>O,unbounded:()=>w});var r=n(128420),i=n(361369),a=n(883845),s=n(953533);const o=Symbol.for("effect/MutableList"),c={[o]:o,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();const n=t.value;return t=t.next,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(a.toJSON)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},u=e=>({value:e,removed:!1,prev:void 0,next:void 0}),l=()=>{const e=Object.create(c);return e.head=void 0,e.tail=void 0,e._length=0,e},f=e=>0===d(e),d=e=>e._length,h=i.dual(2,((e,t)=>{const n=u(t);return void 0===e.head&&(e.head=n),void 0===e.tail||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e})),p=(e,t)=>{t.removed||(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},m=Symbol.for("effect/MutableQueue"),g=Symbol.for("effect/mutable/MutableQueue/Empty"),y={[m]:m,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(a.toJSON)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},b=e=>{const t=Object.create(y);return t.queue=l(),t.capacity=e,t},S=e=>b(e),w=()=>b(void 0),v=e=>d(e.queue),E=e=>f(e.queue),k=e=>void 0!==e.capacity&&d(e.queue)===e.capacity,x=e=>void 0===e.capacity?1/0:e.capacity,_=i.dual(2,((e,t)=>{const n=d(e.queue);return(void 0===e.capacity||n!==e.capacity)&&(h(t)(e.queue),!0)})),I=i.dual(2,((e,t)=>{const n=t[Symbol.iterator]();let i,a=r.empty(),s=!0;for(;s&&(i=n.next())&&!i.done;)s=_(i.value)(e);for(;null!=i&&!i.done;)a=r.prepend(i.value)(a),i=n.next();return r.reverse(a)})),T=i.dual(2,((e,t)=>f(e.queue)?t:(e=>{const t=e.head;if(void 0!==t)return p(e,t),t.value})(e.queue))),O=i.dual(2,((e,t)=>{let n=r.empty(),i=0;for(;i<t;){const t=T(g)(e);if(t===g)break;n=r.prepend(t)(n),i+=1}return r.reverse(n)}))},645914:(e,t,n)=>{n.r(t),n.d(t,{compareAndSet:()=>l,decrement:()=>f,decrementAndGet:()=>d,get:()=>h,getAndDecrement:()=>p,getAndIncrement:()=>m,getAndSet:()=>g,getAndUpdate:()=>y,increment:()=>b,incrementAndGet:()=>S,make:()=>u,set:()=>w,setAndGet:()=>v,toggle:()=>x,update:()=>E,updateAndGet:()=>k});var r=n(43977),i=n(361369),a=n(883845),s=n(953533);const o=Symbol.for("effect/MutableRef"),c={[o]:o,toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableRef",current:(0,a.toJSON)(this.current)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},u=e=>{const t=Object.create(c);return t.current=e,t},l=i.dual(3,((e,t,n)=>!!r.equals(t,e.current)&&(e.current=n,!0))),f=e=>E(e,(e=>e-1)),d=e=>k(e,(e=>e-1)),h=e=>e.current,p=e=>y(e,(e=>e-1)),m=e=>y(e,(e=>e+1)),g=i.dual(2,((e,t)=>{const n=e.current;return e.current=t,n})),y=i.dual(2,((e,t)=>g(e,t(h(e))))),b=e=>E(e,(e=>e+1)),S=e=>k(e,(e=>e+1)),w=i.dual(2,((e,t)=>(e.current=t,e))),v=i.dual(2,((e,t)=>(e.current=t,e.current))),E=i.dual(2,((e,t)=>w(e,t(h(e))))),k=i.dual(2,((e,t)=>v(e,t(h(e))))),x=e=>E(e,(e=>!e))},804676:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>m,Order:()=>g,between:()=>v,clamp:()=>E,decrement:()=>p,divide:()=>f,greaterThan:()=>S,greaterThanOrEqualTo:()=>w,increment:()=>h,isNumber:()=>o,lessThan:()=>y,lessThanOrEqualTo:()=>b,max:()=>x,min:()=>k,multiply:()=>u,multiplyAll:()=>T,nextPow2:()=>A,parse:()=>N,remainder:()=>O,sign:()=>_,subtract:()=>l,sum:()=>c,sumAll:()=>I,unsafeDivide:()=>d});var r=n(235309),i=n(361369),a=n(8578),s=n(259877);const o=n(856572).isNumber,c=(0,i.dual)(2,((e,t)=>e+t)),u=(0,i.dual)(2,((e,t)=>e*t)),l=(0,i.dual)(2,((e,t)=>e-t)),f=(0,i.dual)(2,((e,t)=>0===t?a.none:a.some(e/t))),d=(0,i.dual)(2,((e,t)=>e/t)),h=e=>e+1,p=e=>e-1,m=r.number,g=s.number,y=s.lessThan(g),b=s.lessThanOrEqualTo(g),S=s.greaterThan(g),w=s.greaterThanOrEqualTo(g),v=s.between(g),E=s.clamp(g),k=s.min(g),x=s.max(g),_=e=>g(e,0),I=e=>{let t=0;for(const n of e)t+=n;return t},T=e=>{let t=1;for(const n of e){if(0===n)return 0;t*=n}return t},O=(0,i.dual)(2,((e,t)=>{const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)})),A=e=>{const t=Math.ceil(Math.log(e)/Math.log(2));return Math.max(Math.pow(2,t),2)},N=e=>{if("NaN"===e)return a.some(NaN);if("Infinity"===e)return a.some(1/0);if("-Infinity"===e)return a.some(-1/0);if(""===e.trim())return a.none;const t=Number(e);return Number.isNaN(t)?a.none:a.some(t)}},977948:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>de,TypeId:()=>f,all:()=>J,andThen:()=>j,ap:()=>Y,as:()=>L,asVoid:()=>P,bind:()=>fe,bindTo:()=>ue,composeK:()=>W,contains:()=>oe,containsWith:()=>se,exists:()=>ce,filter:()=>te,filterMap:()=>ee,firstSomeOf:()=>I,flatMap:()=>U,flatMapNullable:()=>B,flatten:()=>q,fromIterable:()=>S,fromNullable:()=>T,gen:()=>pe,getEquivalence:()=>ne,getLeft:()=>v,getOrElse:()=>E,getOrNull:()=>A,getOrThrow:()=>F,getOrThrowWith:()=>R,getOrUndefined:()=>N,getOrder:()=>re,getRight:()=>w,isNone:()=>m,isOption:()=>p,isSome:()=>g,let:()=>le,lift2:()=>ie,liftNullable:()=>O,liftPredicate:()=>ae,liftThrowable:()=>C,map:()=>M,match:()=>y,none:()=>d,orElse:()=>k,orElseEither:()=>_,orElseSome:()=>x,partitionMap:()=>X,product:()=>G,productMany:()=>K,reduceCompact:()=>Z,some:()=>h,tap:()=>V,toArray:()=>Q,toRefinement:()=>b,void:()=>D,zipLeft:()=>z,zipRight:()=>$,zipWith:()=>H});var r=n(43977),i=n(235309),a=n(361369),s=n(91276),o=n(609018),c=n(8578),u=n(259877),l=n(730276);const f=Symbol.for("effect/Option"),d=()=>c.none,h=c.some,p=c.isOption,m=c.isNone,g=c.isSome,y=(0,a.dual)(2,((e,{onNone:t,onSome:n})=>m(e)?t():n(e.value))),b=e=>t=>g(e(t)),S=e=>{for(const t of e)return h(t);return d()},w=o.getRight,v=o.getLeft,E=(0,a.dual)(2,((e,t)=>m(e)?t():e.value)),k=(0,a.dual)(2,((e,t)=>m(e)?t():e)),x=(0,a.dual)(2,((e,t)=>m(e)?h(t()):e)),_=(0,a.dual)(2,((e,t)=>m(e)?M(t(),o.right):M(e,o.left))),I=e=>{let t=d();for(t of e)if(g(t))return t;return t},T=e=>null==e?d():h(e),O=e=>(...t)=>T(e(...t)),A=E(a.constNull),N=E(a.constUndefined),C=e=>(...t)=>{try{return h(e(...t))}catch(n){return d()}},R=(0,a.dual)(2,((e,t)=>{if(g(e))return e.value;throw t()})),F=R((()=>new Error("getOrThrow called on a None"))),M=(0,a.dual)(2,((e,t)=>m(e)?d():h(t(e.value)))),L=(0,a.dual)(2,((e,t)=>M(e,(()=>t)))),P=L(void 0),D=h(void 0),U=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),j=(0,a.dual)(2,((e,t)=>U(e,(e=>{const n=(0,a.isFunction)(t)?t(e):t;return p(n)?n:h(n)})))),B=(0,a.dual)(2,((e,t)=>m(e)?d():T(t(e.value)))),q=U(a.identity),$=(0,a.dual)(2,((e,t)=>U(e,(()=>t)))),W=(0,a.dual)(2,((e,t)=>n=>U(e(n),t))),z=(0,a.dual)(2,((e,t)=>V(e,(()=>t)))),V=(0,a.dual)(2,((e,t)=>U(e,(e=>M(t(e),(()=>e)))))),G=(e,t)=>g(e)&&g(t)?h([e.value,t.value]):d(),K=(e,t)=>{if(m(e))return d();const n=[e.value];for(const r of t){if(m(r))return d();n.push(r.value)}return h(n)},J=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(m(n))return d();t.push(n.value)}return h(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(m(r))return d();t[n]=r.value}return h(t)},H=(0,a.dual)(3,((e,t,n)=>M(G(e,t),(([e,t])=>n(e,t))))),Y=(0,a.dual)(2,((e,t)=>H(e,t,((e,t)=>e(t))))),Z=(0,a.dual)(3,((e,t,n)=>{let r=t;for(const i of e)g(i)&&(r=n(r,i.value));return r})),Q=e=>m(e)?[]:[e.value],X=(0,a.dual)(2,((e,t)=>{if(m(e))return[d(),d()];const n=t(e.value);return o.isLeft(n)?[h(n.left),d()]:[d(),h(n.right)]})),ee=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),te=(0,a.dual)(2,((e,t)=>ee(e,(e=>t(e)?c.some(e):c.none)))),ne=e=>i.make(((t,n)=>m(t)?m(n):!m(n)&&e(t.value,n.value))),re=e=>u.make(((t,n)=>g(t)?g(n)?e(t.value,n.value):1:-1)),ie=e=>(0,a.dual)(2,((t,n)=>H(t,n,e))),ae=(0,a.dual)(2,((e,t)=>t(e)?h(e):d())),se=e=>(0,a.dual)(2,((t,n)=>!m(t)&&e(t.value,n))),oe=se(r.equivalence()),ce=(0,a.dual)(2,((e,t)=>!m(e)&&t(e.value))),ue=s.bindTo(M),le=s.let_(M),fe=s.bind(M,U),de=h({}),he=l.adapter(),pe=(...e)=>{let t;t=1===e.length?e[0]:e[1].bind(e[0]);const n=t(he);let r=n.next();if(r.done)return h(r.value);{let e=r.value;if(e=l.isGenKind(e)?e.value:l.yieldWrapGet(e),m(e))return e;for(;!r.done;)if(r=n.next(e.value),!r.done&&(e=r.value,e=l.isGenKind(e)?e.value:l.yieldWrapGet(e),m(e)))return e;return h(r.value)}}},259877:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>m,all:()=>y,array:()=>w,between:()=>A,bigint:()=>c,boolean:()=>o,clamp:()=>O,combine:()=>l,combineAll:()=>h,combineMany:()=>f,empty:()=>d,greaterThan:()=>k,greaterThanOrEqualTo:()=>_,lessThan:()=>E,lessThanOrEqualTo:()=>x,make:()=>i,mapInput:()=>p,max:()=>T,min:()=>I,number:()=>s,product:()=>g,productMany:()=>b,reverse:()=>u,string:()=>a,struct:()=>v,tuple:()=>S});var r=n(361369);const i=e=>(t,n)=>t===n?0:e(t,n),a=i(((e,t)=>e<t?-1:1)),s=i(((e,t)=>e<t?-1:1)),o=i(((e,t)=>e<t?-1:1)),c=i(((e,t)=>e<t?-1:1)),u=e=>i(((t,n)=>e(n,t))),l=(0,r.dual)(2,((e,t)=>i(((n,r)=>{const i=e(n,r);return 0!==i?i:t(n,r)})))),f=(0,r.dual)(2,((e,t)=>i(((n,r)=>{let i=e(n,r);if(0!==i)return i;for(const e of t)if(i=e(n,r),0!==i)return i;return i})))),d=()=>i((()=>0)),h=e=>f(d(),e),p=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),m=p(s,(e=>e.getTime())),g=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>{const s=e(n,i);return 0!==s?s:t(r,a)})))),y=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;const e=a(t[i],n[i]);if(0!==e)return e;i++}return 0})),b=(0,r.dual)(2,((e,t)=>{const n=y(t);return i(((t,r)=>{const i=e(t[0],r[0]);return 0!==i?i:n(t.slice(1),r.slice(1))}))})),S=(...e)=>y(e),w=e=>i(((t,n)=>{const r=t.length,i=n.length,a=Math.min(r,i);for(let s=0;s<a;s++){const r=e(t[s],n[s]);if(0!==r)return r}return s(r,i)})),v=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t){const t=e[i](n[i],r[i]);if(0!==t)return t}return 0}))},E=e=>(0,r.dual)(2,((t,n)=>-1===e(t,n))),k=e=>(0,r.dual)(2,((t,n)=>1===e(t,n))),x=e=>(0,r.dual)(2,((t,n)=>1!==e(t,n))),_=e=>(0,r.dual)(2,((t,n)=>-1!==e(t,n))),I=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)<1?t:n)),T=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)>-1?t:n)),O=e=>(0,r.dual)(2,((t,n)=>I(e)(n.maximum,T(e)(n.minimum,t)))),A=e=>(0,r.dual)(2,((t,n)=>!E(e)(t,n.minimum)&&!k(e)(t,n.maximum)))},953533:(e,t,n)=>{n.r(t),n.d(t,{pipeArguments:()=>r});const r=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}}},856572:(e,t,n)=>{n.r(t),n.d(t,{all:()=>U,and:()=>z,compose:()=>P,eqv:()=>G,every:()=>Y,hasProperty:()=>x,implies:()=>K,isBigInt:()=>h,isBoolean:()=>d,isDate:()=>N,isError:()=>O,isFunction:()=>m,isIterable:()=>C,isMap:()=>u,isNever:()=>w,isNotNull:()=>S,isNotNullable:()=>T,isNotUndefined:()=>y,isNull:()=>b,isNullable:()=>I,isNumber:()=>f,isObject:()=>k,isPromise:()=>M,isPromiseLike:()=>L,isReadonlyRecord:()=>F,isRecord:()=>R,isSet:()=>c,isString:()=>l,isSymbol:()=>p,isTagged:()=>_,isTruthy:()=>o,isTupleOf:()=>a,isTupleOfAtLeast:()=>s,isUint8Array:()=>A,isUndefined:()=>g,isUnknown:()=>v,mapInput:()=>i,nand:()=>H,nor:()=>J,not:()=>$,or:()=>W,product:()=>D,productMany:()=>j,some:()=>Z,struct:()=>q,tuple:()=>B,xor:()=>V});var r=n(361369);const i=(0,r.dual)(2,((e,t)=>n=>e(t(n)))),a=(0,r.dual)(2,((e,t)=>e.length===t)),s=(0,r.dual)(2,((e,t)=>e.length>=t)),o=e=>!!e,c=e=>e instanceof Set,u=e=>e instanceof Map,l=e=>"string"===typeof e,f=e=>"number"===typeof e,d=e=>"boolean"===typeof e,h=e=>"bigint"===typeof e,p=e=>"symbol"===typeof e,m=r.isFunction,g=e=>void 0===e,y=e=>void 0!==e,b=e=>null===e,S=e=>null!==e,w=e=>!1,v=e=>!0,E=e=>"object"===typeof e&&null!==e,k=e=>E(e)||m(e),x=(0,r.dual)(2,((e,t)=>k(e)&&t in e)),_=(0,r.dual)(2,((e,t)=>x(e,"_tag")&&e._tag===t)),I=e=>null===e||void 0===e,T=e=>null!==e&&void 0!==e,O=e=>e instanceof Error,A=e=>e instanceof Uint8Array,N=e=>e instanceof Date,C=e=>x(e,Symbol.iterator),R=e=>E(e)&&!Array.isArray(e),F=R,M=e=>x(e,"then")&&"catch"in e&&m(e.then)&&m(e.catch),L=e=>x(e,"then")&&m(e.then),P=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),D=(e,t)=>([n,r])=>e(n)&&t(r),U=e=>t=>{let n=0;for(const r of e){if(n>=t.length)break;if(!1===r(t[n]))return!1;n++}return!0},j=(e,t)=>{const n=U(t);return([t,...r])=>!1!==e(t)&&n(r)},B=(...e)=>U(e),q=e=>{const t=Object.keys(e);return n=>{for(const r of t)if(!e[r](n[r]))return!1;return!0}},$=e=>t=>!e(t),W=(0,r.dual)(2,((e,t)=>n=>e(n)||t(n))),z=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),V=(0,r.dual)(2,((e,t)=>n=>e(n)!==t(n))),G=(0,r.dual)(2,((e,t)=>n=>e(n)===t(n))),K=(0,r.dual)(2,((e,t)=>n=>!e(n)||t(n))),J=(0,r.dual)(2,((e,t)=>n=>!(e(n)||t(n)))),H=(0,r.dual)(2,((e,t)=>n=>!(e(n)&&t(n)))),Y=e=>t=>{for(const n of e)if(!n(t))return!1;return!0},Z=e=>t=>{for(const n of e)if(n(t))return!0;return!1}},220209:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>o,isReadable:()=>c,make:()=>l,map:()=>f,mapEffect:()=>d,unwrap:()=>h});var r=n(361369),i=n(672620),a=n(953533),s=n(856572);const o=Symbol.for("effect/Readable"),c=e=>(0,s.hasProperty)(e,o),u={[o]:o,pipe(){return(0,a.pipeArguments)(this,arguments)}},l=e=>{const t=Object.create(u);return t.get=e,t},f=(0,r.dual)(2,((e,t)=>l(i.map(e.get,t)))),d=(0,r.dual)(2,((e,t)=>l(i.flatMap(e.get,t)))),h=e=>l(i.flatMap(e,(e=>e.get)))},767316:(e,t,n)=>{n.r(t),n.d(t,{collect:()=>h,difference:()=>V,empty:()=>o,every:()=>q,filter:()=>T,filterMap:()=>I,fromEntries:()=>d,fromIterableBy:()=>f,fromIterableWith:()=>l,get:()=>y,getEquivalence:()=>G,getLefts:()=>A,getRights:()=>N,getSomes:()=>O,has:()=>g,intersection:()=>z,isEmptyReadonlyRecord:()=>u,isEmptyRecord:()=>c,isSubrecord:()=>j,isSubrecordBy:()=>U,keys:()=>M,map:()=>k,mapEntries:()=>_,mapKeys:()=>x,modify:()=>b,modifyOption:()=>S,partition:()=>F,partitionMap:()=>C,pop:()=>E,reduce:()=>B,remove:()=>v,replace:()=>D,replaceOption:()=>w,separate:()=>R,set:()=>P,singleton:()=>K,size:()=>m,some:()=>$,toEntries:()=>p,union:()=>W,values:()=>L});var r=n(757964),i=n(43977),a=n(361369),s=n(977948);const o=()=>({}),c=e=>0===M(e).length,u=c,l=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of e){const[e,i]=t(r);n[e]=i}return n})),f=(e,t)=>l(e,(e=>[t(e),e])),d=Object.fromEntries,h=(0,a.dual)(2,((e,t)=>{const n=[];for(const r of M(e))n.push(t(r,e[r]));return n})),p=h(((e,t)=>[e,t])),m=e=>M(e).length,g=(0,a.dual)(2,((e,t)=>Object.prototype.hasOwnProperty.call(e,t))),y=(0,a.dual)(2,((e,t)=>g(e,t)?s.some(e[t]):s.none())),b=(0,a.dual)(3,((e,t,n)=>g(e,t)?{...e,[t]:n(e[t])}:{...e})),S=(0,a.dual)(3,((e,t,n)=>g(e,t)?s.some({...e,[t]:n(e[t])}):s.none())),w=(0,a.dual)(3,((e,t,n)=>S(e,t,(()=>n)))),v=(0,a.dual)(2,((e,t)=>{if(!g(e,t))return{...e};const n={...e};return delete n[t],n})),E=(0,a.dual)(2,((e,t)=>g(e,t)?s.some([e[t],v(e,t)]):s.none())),k=(0,a.dual)(2,((e,t)=>{const n={...e};for(const r of M(e))n[r]=t(e[r],r);return n})),x=(0,a.dual)(2,((e,t)=>{const n={};for(const r of M(e)){const i=e[r];n[t(r,i)]=i}return n})),_=(0,a.dual)(2,((e,t)=>{const n={};for(const r of M(e)){const[i,a]=t(e[r],r);n[i]=a}return n})),I=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of M(e)){const i=t(e[r],r);s.isSome(i)&&(n[r]=i.value)}return n})),T=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of M(e))t(e[r],r)&&(n[r]=e[r]);return n})),O=I(a.identity),A=e=>{const t=o();for(const n of M(e)){const i=e[n];r.isLeft(i)&&(t[n]=i.left)}return t},N=e=>{const t=o();for(const n of M(e)){const i=e[n];r.isRight(i)&&(t[n]=i.right)}return t},C=(0,a.dual)(2,((e,t)=>{const n=o(),i=o();for(const a of M(e)){const s=t(e[a],a);r.isLeft(s)?n[a]=s.left:i[a]=s.right}return[n,i]})),R=C(a.identity),F=(0,a.dual)(2,((e,t)=>{const n=o(),r=o();for(const i of M(e))t(e[i],i)?r[i]=e[i]:n[i]=e[i];return[n,r]})),M=e=>Object.keys(e),L=e=>h(e,((e,t)=>t)),P=(0,a.dual)(3,((e,t,n)=>({...e,[t]:n}))),D=(0,a.dual)(3,((e,t,n)=>g(e,t)?{...e,[t]:n}:{...e})),U=e=>(0,a.dual)(2,((t,n)=>{for(const r of M(t))if(!g(n,r)||!e(t[r],n[r]))return!1;return!0})),j=U(i.equivalence()),B=(0,a.dual)(3,((e,t,n)=>{let r=t;for(const i of M(e))r=n(r,e[i],i);return r})),q=(0,a.dual)(2,((e,t)=>{for(const n of M(e))if(!t(e[n],n))return!1;return!0})),$=(0,a.dual)(2,((e,t)=>{for(const n of M(e))if(t(e[n],n))return!0;return!1})),W=(0,a.dual)(3,((e,t,n)=>{if(c(e))return{...t};if(c(t))return{...e};const r=o();for(const i of M(e))g(t,i)?r[i]=n(e[i],t[i]):r[i]=e[i];for(const i of M(t))g(r,i)||(r[i]=t[i]);return r})),z=(0,a.dual)(3,((e,t,n)=>{const r=o();if(c(e)||c(t))return r;for(const i of M(e))g(t,i)&&(r[i]=n(e[i],t[i]));return r})),V=(0,a.dual)(2,((e,t)=>{if(c(e))return{...t};if(c(t))return{...e};const n={};for(const r of M(e))g(t,r)||(n[r]=e[r]);for(const r of M(t))g(e,r)||(n[r]=t[r]);return n})),G=e=>{const t=U(e);return(e,n)=>t(e,n)&&t(n,e)},K=(e,t)=>({[e]:t})},429249:(e,t,n)=>{n.r(t),n.d(t,{RedactedTypeId:()=>a,getEquivalence:()=>l,isRedacted:()=>s,make:()=>o,unsafeWipe:()=>u,value:()=>c});var r=n(235309),i=n(36347);const a=i.RedactedTypeId,s=i.isRedacted,o=i.make,c=i.value,u=i.unsafeWipe,l=e=>r.make(((t,n)=>e(c(t),c(n))))},55040:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>i,get:()=>s,getAndSet:()=>o,getAndUpdate:()=>c,getAndUpdateSome:()=>u,make:()=>a,modify:()=>l,modifySome:()=>f,set:()=>d,setAndGet:()=>h,unsafeMake:()=>b,update:()=>p,updateAndGet:()=>m,updateSome:()=>g,updateSomeAndGet:()=>y});var r=n(361974);const i=r.RefTypeId,a=r.make,s=r.get,o=r.getAndSet,c=r.getAndUpdate,u=r.getAndUpdateSome,l=r.modify,f=r.modifySome,d=r.set,h=r.setAndGet,p=r.update,m=r.updateAndGet,g=r.updateSome,y=r.updateSomeAndGet,b=r.unsafeMake},895156:(e,t,n)=>{n.r(t),n.d(t,{escape:()=>r});const r=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&")},866172:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>d,EntryTypeId:()=>v,RequestTypeId:()=>c,TaggedClass:()=>h,complete:()=>p,completeEffect:()=>g,fail:()=>y,failCause:()=>b,interruptWhenPossible:()=>m,isEntry:()=>E,isRequest:()=>u,makeCache:()=>w,makeEntry:()=>k,of:()=>l,succeed:()=>S,tagged:()=>f});var r=n(668481),i=n(561693),a=n(672620),s=n(860356),o=n(502146);const c=o.RequestTypeId,u=o.isRequest,l=o.of,f=o.tagged,d=o.Class,h=o.TaggedClass,p=o.complete,m=s.interruptWhenPossible,g=o.completeEffect,y=o.fail,b=o.failCause,S=o.succeed,w=e=>i.make({...e,lookup:()=>a.map(a.deferredMake(),(e=>({listeners:new o.Listeners,handle:e})))}),v=Symbol.for("effect/RequestBlock.Entry"),E=r.isEntry,k=r.makeEntry},128202:(e,t,n)=>{n.r(t),n.d(t,{andThen:()=>p,both:()=>m,disable:()=>c,disabledSet:()=>w,either:()=>g,empty:()=>a,enable:()=>o,enabledSet:()=>S,exclude:()=>y,includes:()=>h,inverse:()=>b,isActive:()=>l,isDisabled:()=>d,isEmpty:()=>u,isEnabled:()=>f,make:()=>s,render:()=>v});var r=n(66932),i=n(848464);const a=i.empty,s=i.make,o=i.enable,c=i.disable,u=i.isEmpty,l=i.isActive,f=i.isEnabled,d=i.isDisabled,h=i.isActive,p=i.andThen,m=i.both,g=i.either,y=i.exclude,b=i.inverse,S=r.enabledSet,w=r.disabledSet,v=r.renderPatch},727652:(e,t,n)=>{n.r(t),n.d(t,{ScheduleDriverTypeId:()=>a,ScheduleTypeId:()=>i,addDelay:()=>o,addDelayEffect:()=>c,andThen:()=>u,andThenEither:()=>l,as:()=>f,asVoid:()=>d,bothInOut:()=>h,check:()=>p,checkEffect:()=>m,collectAllInputs:()=>g,collectAllOutputs:()=>y,collectUntil:()=>b,collectUntilEffect:()=>S,collectWhile:()=>w,collectWhileEffect:()=>v,compose:()=>E,count:()=>I,cron:()=>T,dayOfMonth:()=>O,dayOfWeek:()=>A,delayed:()=>N,delayedEffect:()=>C,delayedSchedule:()=>R,delays:()=>F,driver:()=>P,duration:()=>D,either:()=>U,eitherWith:()=>j,elapsed:()=>B,ensuring:()=>q,exponential:()=>$,fibonacci:()=>W,fixed:()=>z,forever:()=>V,fromDelay:()=>G,fromDelays:()=>K,fromFunction:()=>J,hourOfDay:()=>H,identity:()=>Y,intersect:()=>Z,intersectWith:()=>Q,jittered:()=>X,jitteredWith:()=>ee,linear:()=>te,makeWithState:()=>s,map:()=>ne,mapBoth:()=>M,mapBothEffect:()=>L,mapEffect:()=>re,mapInput:()=>k,mapInputContext:()=>x,mapInputEffect:()=>_,minuteOfHour:()=>ie,modifyDelay:()=>ae,modifyDelayEffect:()=>se,onDecision:()=>oe,once:()=>ce,passthrough:()=>ue,provideContext:()=>le,provideService:()=>fe,recurUntil:()=>de,recurUntilEffect:()=>he,recurUntilOption:()=>pe,recurUpTo:()=>me,recurWhile:()=>ge,recurWhileEffect:()=>ye,recurs:()=>be,reduce:()=>Se,reduceEffect:()=>we,repeatForever:()=>ve,repetitions:()=>Ee,resetAfter:()=>ke,resetWhen:()=>xe,run:()=>_e,secondOfMinute:()=>Ie,spaced:()=>Te,stop:()=>Oe,succeed:()=>Ae,sync:()=>Ne,tapInput:()=>Ce,tapOutput:()=>Re,unfold:()=>Fe,union:()=>Me,unionWith:()=>Le,untilInput:()=>Pe,untilInputEffect:()=>De,untilOutput:()=>Ue,untilOutputEffect:()=>je,upTo:()=>Be,whileInput:()=>qe,whileInputEffect:()=>$e,whileOutput:()=>We,whileOutputEffect:()=>ze,windowed:()=>Ve,zipLeft:()=>Ge,zipRight:()=>Ke,zipWith:()=>Je});var r=n(280561);const i=r.ScheduleTypeId,a=r.ScheduleDriverTypeId,s=r.makeWithState,o=r.addDelay,c=r.addDelayEffect,u=r.andThen,l=r.andThenEither,f=r.as,d=r.asVoid,h=r.bothInOut,p=r.check,m=r.checkEffect,g=r.collectAllInputs,y=r.collectAllOutputs,b=r.collectUntil,S=r.collectUntilEffect,w=r.collectWhile,v=r.collectWhileEffect,E=r.compose,k=r.mapInput,x=r.mapInputContext,_=r.mapInputEffect,I=r.count,T=r.cron,O=r.dayOfMonth,A=r.dayOfWeek,N=r.delayed,C=r.delayedEffect,R=r.delayedSchedule,F=r.delays,M=r.mapBoth,L=r.mapBothEffect,P=r.driver,D=r.duration,U=r.either,j=r.eitherWith,B=r.elapsed,q=r.ensuring,$=r.exponential,W=r.fibonacci,z=r.fixed,V=r.forever,G=r.fromDelay,K=r.fromDelays,J=r.fromFunction,H=r.hourOfDay,Y=r.identity,Z=r.intersect,Q=r.intersectWith,X=r.jittered,ee=r.jitteredWith,te=r.linear,ne=r.map,re=r.mapEffect,ie=r.minuteOfHour,ae=r.modifyDelay,se=r.modifyDelayEffect,oe=r.onDecision,ce=r.once,ue=r.passthrough,le=r.provideContext,fe=r.provideService,de=r.recurUntil,he=r.recurUntilEffect,pe=r.recurUntilOption,me=r.recurUpTo,ge=r.recurWhile,ye=r.recurWhileEffect,be=r.recurs,Se=r.reduce,we=r.reduceEffect,ve=r.forever,Ee=r.repetitions,ke=r.resetAfter,xe=r.resetWhen,_e=r.run,Ie=r.secondOfMinute,Te=r.spaced,Oe=r.stop,Ae=r.succeed,Ne=r.sync,Ce=r.tapInput,Re=r.tapOutput,Fe=r.unfold,Me=r.union,Le=r.unionWith,Pe=r.untilInput,De=r.untilInputEffect,Ue=r.untilOutput,je=r.untilOutputEffect,Be=r.upTo,qe=r.whileInput,$e=r.whileInputEffect,We=r.whileOutput,ze=r.whileOutputEffect,Ve=r.windowed,Ge=r.zipLeft,Ke=r.zipRight,Je=r.zipWith},530714:(e,t,n)=>{n.r(t),n.d(t,{continue:()=>o,continueWith:()=>c,done:()=>u,isContinue:()=>l,isDone:()=>f});var r=n(128420),i=n(490544);const a="Continue",s="Done",o=e=>({_tag:a,intervals:e}),c=e=>({_tag:a,intervals:i.make(r.of(e))}),u={_tag:s},l=e=>e._tag===a,f=e=>e._tag===s},779100:(e,t,n)=>{n.r(t),n.d(t,{IntervalTypeId:()=>m,after:()=>I,before:()=>T,empty:()=>y,intersect:()=>k,isEmpty:()=>v,isNonEmpty:()=>E,lessThan:()=>b,make:()=>g,max:()=>w,min:()=>S,size:()=>x,union:()=>_});var r=n(284073),i=n(361369),a=n(977948);const s=Symbol.for("effect/ScheduleInterval"),o={[s]:s,startMillis:0,endMillis:0},c=(e,t)=>e>t?o:{[s]:s,startMillis:e,endMillis:t},u=(0,i.dual)(2,((e,t)=>l(e,t)===e)),l=(0,i.dual)(2,((e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t)),f=(0,i.dual)(2,((e,t)=>l(e,t)===e?t:e)),d=e=>e.startMillis>=e.endMillis,h=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return c(n,r)})),p=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return n<r?a.none():a.some(c(n,r))})),m=s,g=c,y=o,b=u,S=l,w=f,v=d,E=e=>!d(e),k=h,x=e=>r.millis(e.endMillis-e.startMillis),_=p,I=e=>c(e,Number.POSITIVE_INFINITY),T=e=>c(Number.NEGATIVE_INFINITY,e)},490544:(e,t,n)=>{n.r(t),n.d(t,{IntervalsTypeId:()=>b,empty:()=>w,end:()=>_,fromIterable:()=>v,intersect:()=>k,isNonEmpty:()=>T,lessThan:()=>I,make:()=>S,max:()=>O,start:()=>x,union:()=>E});var r=n(128420),i=n(361369),a=n(977948),s=n(779100),o=n(94732);const c=Symbol.for("effect/ScheduleIntervals"),u=e=>({[c]:c,intervals:e}),l=u(r.empty()),f=(0,i.dual)(2,((e,t)=>r.isNonEmpty(t.intervals)?r.isNonEmpty(e.intervals)?r.headNonEmpty(e.intervals).startMillis<r.headNonEmpty(t.intervals).startMillis?d(r.tailNonEmpty(e.intervals),t.intervals,r.headNonEmpty(e.intervals),r.empty()):d(e.intervals,r.tailNonEmpty(t.intervals),r.headNonEmpty(t.intervals),r.empty()):t:e)),d=(e,t,n,a)=>{let c=e,l=t,f=n,d=a;for(;r.isNonEmpty(c)||r.isNonEmpty(l);)if(!r.isNonEmpty(c)&&r.isNonEmpty(l))f.endMillis<r.headNonEmpty(l).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(l),l=r.tailNonEmpty(l),c=r.empty()):(f=s.make(f.startMillis,r.headNonEmpty(l).endMillis),l=r.tailNonEmpty(l),c=r.empty());else if(r.isNonEmpty(c)&&r.isEmpty(l))f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),l=r.empty(),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),l=r.empty(),c=r.tailNonEmpty(c));else{if(!r.isNonEmpty(c)||!r.isNonEmpty(l))throw new Error((0,o.getBugErrorMessage)("Intervals.unionLoop"));r.headNonEmpty(c).startMillis<r.headNonEmpty(l).startMillis?f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),c=r.tailNonEmpty(c)):f.endMillis<r.headNonEmpty(l).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(l),l=r.tailNonEmpty(l)):(f=s.make(f.startMillis,r.headNonEmpty(l).endMillis),l=r.tailNonEmpty(l))}return u((0,i.pipe)(d,r.prepend(f),r.reverse))},h=(0,i.dual)(2,((e,t)=>p(e.intervals,t.intervals,r.empty()))),p=(e,t,n)=>{let a=e,o=t,c=n;for(;r.isNonEmpty(a)&&r.isNonEmpty(o);){const e=(0,i.pipe)(r.headNonEmpty(a),s.intersect(r.headNonEmpty(o))),t=s.isEmpty(e)?c:(0,i.pipe)(c,r.prepend(e));(0,i.pipe)(r.headNonEmpty(a),s.lessThan(r.headNonEmpty(o)))?a=r.tailNonEmpty(a):o=r.tailNonEmpty(o),c=t}return u(r.reverse(c))},m=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).startMillis,g=(0,i.dual)(2,((e,t)=>m(e)<m(t))),y=(0,i.dual)(2,((e,t)=>g(e,t)?t:e)),b=c,S=u,w=l,v=e=>Array.from(e).reduce(((e,t)=>(0,i.pipe)(e,f(u(r.of(t))))),l),E=f,k=h,x=m,_=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).endMillis,I=g,T=e=>r.isNonEmpty(e.intervals),O=y},71108:(e,t,n)=>{n.r(t),n.d(t,{ControlledScheduler:()=>l,MixedScheduler:()=>o,PriorityBuckets:()=>s,SyncScheduler:()=>u,currentScheduler:()=>y,defaultScheduler:()=>c,defaultShouldYield:()=>d,make:()=>h,makeBatched:()=>p,makeMatrix:()=>f,timer:()=>m,timerBatched:()=>g,withScheduler:()=>b});var r=n(361369),i=n(606517),a=n(672620);class s{buckets=[];scheduleTask(e,t){let n,r;for(r=0;r<this.buckets.length&&this.buckets[r][0]<=t;r++)n=this.buckets[r];if(n)n[1].push(e);else{const n=[];for(let e=0;e<r;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=r;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class o{maxNextTickBeforeTimer;running=!1;tasks=new s;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let e=0;e<r.length;e++)r[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout((()=>this.starveInternal(0)),0):Promise.resolve(void 0).then((()=>this.starveInternal(e+1)))}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}const c=(0,i.globalValue)(Symbol.for("effect/Scheduler/defaultScheduler"),(()=>new o(2048)));class u{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}this.deferred=!0}}class l{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}step(){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}}const f=(...e)=>{const t=e.sort((([e],[t])=>e<t?-1:e>t?1:0));return{shouldYield(t){for(const n of e){const e=n[1].shouldYield(t);if(!1!==e)return e}return!1},scheduleTask(e,n){let r;for(const i of t){if(!(n>=i[0]))return(r??c).scheduleTask(e,n);r=i[1]}return(r??c).scheduleTask(e,n)}}},d=e=>e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority),h=(e,t=d)=>({scheduleTask:e,shouldYield:t}),p=(e,t=d)=>{let n=!1;const r=new s,i=()=>{const e=r.buckets;r.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]();0===r.buckets.length?n=!1:a()},a=()=>e(i);return h(((e,t)=>{r.scheduleTask(e,t),n||(n=!0,a())}),t)},m=(e,t=d)=>h((t=>setTimeout(t,e)),t),g=(e,t=d)=>p((t=>setTimeout(t,e)),t),y=(0,i.globalValue)(Symbol.for("effect/FiberRef/currentScheduler"),(()=>a.fiberRefUnsafeMake(c))),b=(0,r.dual)(2,((e,t)=>a.fiberRefLocally(e,y,t)))},908993:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>s,Scope:()=>o,ScopeTypeId:()=>a,addFinalizer:()=>c,addFinalizerExit:()=>u,close:()=>l,extend:()=>f,fork:()=>d,make:()=>p,use:()=>h});var r=n(672620),i=n(860356);const a=r.ScopeTypeId,s=r.CloseableScopeTypeId,o=i.scopeTag,c=r.scopeAddFinalizer,u=r.scopeAddFinalizerExit,l=r.scopeClose,f=i.scopeExtend,d=r.scopeFork,h=i.scopeUse,p=i.scopeMake},147985:(e,t,n)=>{n.r(t),n.d(t,{add:()=>Z,difference:()=>Q,empty:()=>J,every:()=>X,filter:()=>ee,flatMap:()=>te,forEach:()=>ne,fromIterable:()=>H,getEquivalence:()=>pe,has:()=>re,intersection:()=>ie,isSortedSet:()=>K,isSubset:()=>ae,make:()=>Y,map:()=>se,partition:()=>oe,remove:()=>ce,size:()=>ue,some:()=>le,toggle:()=>fe,union:()=>de,values:()=>he});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(953533),c=n(856572),u=(n(128420),n(977948)),l=n(630768);const f={Forward:0,Backward:1};class d{self;stack;direction;count=0;constructor(e,t,n){this.self=e,this.stack=t,this.direction=n}clone(){return new d(this.self,this.stack.slice(),this.direction)}reversed(){return new d(this.self,this.stack.slice(),this.direction===f.Forward?f.Backward:f.Forward)}next(){const e=this.entry;switch(this.count++,this.direction===f.Forward?this.moveNext():this.movePrev(),e._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:e.value}}}get key(){return this.stack.length>0?u.some(this.stack[this.stack.length-1].key):u.none()}get value(){return this.stack.length>0?u.some(this.stack[this.stack.length-1].value):u.none()}get entry(){return u.map(l.last(this.stack),(e=>[e.key,e.value]))}get index(){let e=0;const t=this.stack;if(0===t.length){const e=this.self._root;return null!=e?e.count:0}null!=t[t.length-1].left&&(e=t[t.length-1].left.count);for(let n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,null!=t[n].left&&(e+=t[n].left.count));return e}moveNext(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t.right)for(t=t.right;null!=t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}get hasNext(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].right)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}movePrev(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t&&null!=t.left)for(t=t.left;null!=t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}get hasPrev(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].left)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}}const h=0,p=1,m=({color:e,count:t,key:n,left:r,right:i,value:a})=>({color:e,key:n,value:a,left:r,right:i,count:t});function g(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}const y=({count:e,key:t,left:n,right:r,value:i},a)=>({color:a,key:t,value:i,left:n,right:r,count:e}),b=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var S=n(107687);const w="effect/RedBlackTree",v=Symbol.for(w),E={[v]:{_Key:e=>e,_Value:e=>e},[a.symbol](){let e=a.hash(w);for(const t of this)e^=(0,i.pipe)(a.hash(t[0]),a.combine(a.hash(t[1])));return a.cached(this,e)},[r.symbol](e){if(x(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;const t=Array.from(e);return Array.from(this).every(((e,n)=>{const i=t[n];return r.equals(e[0],i[0])&&r.equals(e[1],i[1])}))}return!1},[Symbol.iterator](){const e=[];let t=this._root;for(;null!=t;)e.push(t),t=t.left;return new d(this,e,f.Forward)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},k=(e,t)=>{const n=Object.create(E);return n._ord=e,n._root=t,n},x=e=>(0,c.hasProperty)(e,v),_=e=>k(e,void 0),I=(0,i.dual)(2,((e,t)=>{let n=_(t);for(const[r,i]of e)n=A(n,r,i);return n})),T=(0,i.dual)(2,((e,t)=>{const n=e._ord;let i=e._root;for(;void 0!==i;){const e=n(t,i.key);if(r.equals(t,i.key))return u.some(i.value);i=e<=0?i.left:i.right}return u.none()})),O=(0,i.dual)(2,((e,t)=>u.isSome(T(e,t)))),A=(0,i.dual)(3,((e,t,n)=>{const r=e._ord;let i=e._root;const a=[],s=[];for(;null!=i;){const e=r(t,i.key);a.push(i),s.push(e),i=e<=0?i.left:i.right}a.push({color:h,key:t,value:n,left:void 0,right:void 0,count:1});for(let o=a.length-2;o>=0;--o){const e=a[o];s[o]<=0?a[o]={color:e.color,key:e.key,value:e.value,left:a[o+1],right:e.right,count:e.count+1}:a[o]={color:e.color,key:e.key,value:e.value,left:e.left,right:a[o+1],count:e.count+1}}for(let o=a.length-1;o>1;--o){const e=a[o-1],t=a[o];if(e.color===p||t.color===p)break;const n=a[o-2];if(n.left===e)if(e.left===t){const r=n.right;if(!r||r.color!==h){if(n.color=h,n.left=e.right,e.color=p,e.right=n,a[o-2]=e,a[o-1]=t,b(n),b(e),o>=3){const t=a[o-3];t.left===n?t.left=e:t.right=e}break}e.color=p,n.right=y(r,p),n.color=h,o-=1}else{const r=n.right;if(!r||r.color!==h){if(e.right=t.left,n.color=h,n.left=t.right,t.color=p,t.left=e,t.right=n,a[o-2]=t,a[o-1]=e,b(n),b(e),b(t),o>=3){const e=a[o-3];e.left===n?e.left=t:e.right=t}break}e.color=p,n.right=y(r,p),n.color=h,o-=1}else if(e.right===t){const r=n.left;if(!r||r.color!==h){if(n.color=h,n.right=e.left,e.color=p,e.left=n,a[o-2]=e,a[o-1]=t,b(n),b(e),o>=3){const t=a[o-3];t.right===n?t.right=e:t.left=e}break}e.color=p,n.left=y(r,p),n.color=h,o-=1}else{const r=n.left;if(!r||r.color!==h){if(e.left=t.right,n.color=h,n.right=t.left,t.color=p,t.right=e,t.left=n,a[o-2]=t,a[o-1]=e,b(n),b(e),b(t),o>=3){const e=a[o-3];e.right===n?e.right=t:e.left=t}break}e.color=p,n.left=y(r,p),n.color=h,o-=1}}return a[0].color=p,k(e._ord,a[0])})),N=(e,t)=>{const n=e[Symbol.iterator]();let r=0;return{[Symbol.iterator]:()=>N(e,t),next:()=>{r++;const e=n.key;switch(t===f.Forward?n.moveNext():n.movePrev(),e._tag){case"None":return{done:!0,value:r};case"Some":return{done:!1,value:e.value}}}}},C=(0,i.dual)(2,((e,t)=>{const n=e._root;void 0!==n&&F(n,((e,n)=>(t(e,n),u.none())))})),R=(0,i.dual)(2,((e,t)=>{if(!O(e,t))return e;const n=e._ord,i=n;let a=e._root;const s=[];for(;void 0!==a;){const e=i(t,a.key);s.push(a),a=r.equals(t,a.key)?void 0:e<=0?a.left:a.right}if(0===s.length)return e;const o=new Array(s.length);let c=s[s.length-1];o[o.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let r=s.length-2;r>=0;--r)c=s[r],c.left===s[r+1]?o[r]={color:c.color,key:c.key,value:c.value,left:o[r+1],right:c.right,count:c.count}:o[r]={color:c.color,key:c.key,value:c.value,left:c.left,right:o[r+1],count:c.count};if(c=o[o.length-1],void 0!==c.left&&void 0!==c.right){const e=o.length;for(c=c.left;null!=c.right;)o.push(c),c=c.right;const t=o[e-1];o.push({color:c.color,key:t.key,value:t.value,left:c.left,right:c.right,count:c.count}),o[e-1].key=c.key,o[e-1].value=c.value;for(let n=o.length-2;n>=e;--n)c=o[n],o[n]={color:c.color,key:c.key,value:c.value,left:c.left,right:o[n+1],count:c.count};o[e-1].left=o[e]}if(c=o[o.length-1],c.color===h){const e=o[o.length-2];e.left===c?e.left=void 0:e.right===c&&(e.right=void 0),o.pop();for(let t=0;t<o.length;++t)o[t].count--;return k(n,o[0])}if(void 0!==c.left||void 0!==c.right){void 0!==c.left?g(c,c.left):void 0!==c.right&&g(c,c.right),c.color=p;for(let e=0;e<o.length-1;++e)o[e].count--;return k(n,o[0])}if(1===o.length)return k(n,void 0);{for(let t=0;t<o.length;++t)o[t].count--;const e=o[o.length-2];M(o),e.left===c?e.left=void 0:e.right=void 0}return k(n,o[0])})),F=(e,t)=>{let n,r=e,i=!1;for(;!i;)if(null!=r)n=S.make(r,n),r=r.left;else if(null!=n){const e=t(n.value.key,n.value.value);if(u.isSome(e))return e;r=n.value.right,n=n.previous}else i=!0;return u.none()},M=e=>{let t,n,r,i;for(let a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void(t.color=p);if(n=e[a-1],n.left===t){if(r=n.right,void 0!==r&&void 0!==r.right&&r.right.color===h){if(r=n.right=m(r),i=r.right=m(r.right),n.right=r.left,r.left=n,r.right=i,r.color=n.color,t.color=p,n.color=p,i.color=p,b(n),b(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.left&&r.left.color===h){if(r=n.right=m(r),i=r.left=m(r.left),n.right=i.left,r.left=i.right,i.left=n,i.right=r,i.color=n.color,n.color=p,r.color=p,t.color=p,b(n),b(r),b(i),a>1){const t=e[a-2];t.left===n?t.left=i:t.right=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===p){if(n.color===h)return n.color=p,void(n.right=y(r,h));n.right=y(r,h);continue}if(void 0!==r){if(r=m(r),n.right=r.left,r.left=n,r.color=n.color,n.color=h,b(n),b(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}else{if(r=n.left,void 0!==r&&void 0!==r.left&&r.left.color===h){if(r=n.left=m(r),i=r.left=m(r.left),n.left=r.right,r.right=n,r.left=i,r.color=n.color,t.color=p,n.color=p,i.color=p,b(n),b(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.right&&r.right.color===h){if(r=n.left=m(r),i=r.right=m(r.right),n.left=i.right,r.right=i.left,i.right=n,i.left=r,i.color=n.color,n.color=p,r.color=p,t.color=p,b(n),b(r),b(i),a>1){const t=e[a-2];t.right===n?t.right=i:t.left=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===p){if(n.color===h)return n.color=p,void(n.left=y(r,h));n.left=y(r,h);continue}if(void 0!==r){if(r=m(r),n.left=r.right,r.right=n,r.color=n.color,n.color=h,b(n),b(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}},L=_,P=I,D=e=>e._ord,U=O,j=A,B=e=>N(e,f.Forward),q=C,$=R,W=e=>e._root?.count??0,z=Symbol.for("effect/SortedSet"),V={[z]:{_A:e=>e},[a.symbol](){return(0,i.pipe)(a.hash(this.keyTree),a.combine(a.hash(z)),a.cached(this))},[r.symbol](e){return K(e)&&r.equals(this.keyTree,e.keyTree)},[Symbol.iterator](){return B(this.keyTree)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},G=e=>{const t=Object.create(V);return t.keyTree=e,t},K=e=>(0,c.hasProperty)(e,z),J=e=>G(L(e)),H=i.dual(2,((e,t)=>G(P(Array.from(e).map((e=>[e,!0])),t)))),Y=e=>(...t)=>H(t,e),Z=i.dual(2,((e,t)=>U(e.keyTree,t)?e:G(j(e.keyTree,t,!0)))),Q=i.dual(2,((e,t)=>{let n=e;for(const r of t)n=ce(n,r);return n})),X=i.dual(2,((e,t)=>{for(const n of e)if(!t(n))return!1;return!0})),ee=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=J(n);for(const i of e)t(i)&&(r=Z(r,i));return r})),te=i.dual(3,((e,t,n)=>{let r=J(t);return ne(e,(e=>{for(const t of n(e))r=Z(r,t)})),r})),ne=i.dual(2,((e,t)=>q(e.keyTree,t))),re=i.dual(2,((e,t)=>U(e.keyTree,t))),ie=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=J(n);for(const i of t)re(e,i)&&(r=Z(r,i));return r})),ae=i.dual(2,((e,t)=>X(e,(e=>re(t,e))))),se=i.dual(3,((e,t,n)=>{let r=J(t);return ne(e,(e=>{const t=n(e);re(r,t)||(r=Z(r,t))})),r})),oe=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=J(n),i=J(n);for(const a of e)t(a)?r=Z(r,a):i=Z(i,a);return[i,r]})),ce=i.dual(2,((e,t)=>G($(e.keyTree,t)))),ue=e=>W(e.keyTree),le=i.dual(2,((e,t)=>{for(const n of e)if(t(n))return!0;return!1})),fe=i.dual(2,((e,t)=>re(e,t)?ce(e,t):Z(e,t))),de=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=J(n);for(const i of e)r=Z(i)(r);for(const i of t)r=Z(i)(r);return r})),he=e=>B(e.keyTree),pe=()=>(e,t)=>ae(e,t)&&ae(t,e)},243216:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>l,Order:()=>f,at:()=>R,camelToSnake:()=>re,capitalize:()=>g,charAt:()=>F,charCodeAt:()=>N,codePointAt:()=>M,concat:()=>h,empty:()=>d,endsWith:()=>A,includes:()=>T,indexOf:()=>L,isEmpty:()=>k,isNonEmpty:()=>x,isString:()=>u,kebabToSnake:()=>ae,lastIndexOf:()=>P,length:()=>_,linesIterator:()=>Y,linesWithSeparators:()=>Z,localeCompare:()=>D,match:()=>U,matchAll:()=>j,normalize:()=>B,padEnd:()=>q,padStart:()=>$,pascalToSnake:()=>ie,repeat:()=>W,replace:()=>b,replaceAll:()=>z,search:()=>V,slice:()=>E,snakeToCamel:()=>ee,snakeToKebab:()=>ne,snakeToPascal:()=>te,split:()=>I,startsWith:()=>O,stripMargin:()=>X,stripMarginWith:()=>Q,substring:()=>C,takeLeft:()=>J,takeRight:()=>H,toLocaleLowerCase:()=>G,toLocaleUpperCase:()=>K,toLowerCase:()=>m,toUpperCase:()=>p,trim:()=>S,trimEnd:()=>v,trimStart:()=>w,uncapitalize:()=>y});var r=n(235309),i=n(361369),a=n(611174),s=n(804676),o=n(977948),c=n(259877);const u=n(856572).isString,l=r.string,f=c.string,d="",h=(0,i.dual)(2,((e,t)=>e+t)),p=e=>e.toUpperCase(),m=e=>e.toLowerCase(),g=e=>0===e.length?e:p(e[0])+e.slice(1),y=e=>0===e.length?e:m(e[0])+e.slice(1),b=(e,t)=>n=>n.replace(e,t),S=e=>e.trim(),w=e=>e.trimStart(),v=e=>e.trimEnd(),E=(e,t)=>n=>n.slice(e,t),k=e=>0===e.length,x=e=>e.length>0,_=e=>e.length,I=(0,i.dual)(2,((e,t)=>{const n=e.split(t);return a.isNonEmptyArray(n)?n:[e]})),T=(e,t)=>n=>n.includes(e,t),O=(e,t)=>n=>n.startsWith(e,t),A=(e,t)=>n=>n.endsWith(e,t),N=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.charCodeAt(t)),(e=>!isNaN(e))))),C=(e,t)=>n=>n.substring(e,t),R=(0,i.dual)(2,((e,t)=>o.fromNullable(e.at(t)))),F=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.charAt(t)),x))),M=(0,i.dual)(2,((e,t)=>o.fromNullable(e.codePointAt(t)))),L=e=>t=>o.filter(o.some(t.indexOf(e)),s.greaterThanOrEqualTo(0)),P=e=>t=>o.filter(o.some(t.lastIndexOf(e)),s.greaterThanOrEqualTo(0)),D=(e,t,n)=>r=>s.sign(r.localeCompare(e,t,n)),U=e=>t=>o.fromNullable(t.match(e)),j=e=>t=>t.matchAll(e),B=e=>t=>t.normalize(e),q=(e,t)=>n=>n.padEnd(e,t),$=(e,t)=>n=>n.padStart(e,t),W=e=>t=>t.repeat(e),z=(e,t)=>n=>n.replaceAll(e,t),V=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.search(t)),s.greaterThanOrEqualTo(0)))),G=e=>t=>t.toLocaleLowerCase(e),K=e=>t=>t.toLocaleUpperCase(e),J=(0,i.dual)(2,((e,t)=>e.slice(0,Math.max(t,0)))),H=(0,i.dual)(2,((e,t)=>e.slice(Math.max(0,e.length-Math.floor(t)),1/0))),Y=e=>ue(e,!0),Z=e=>ue(e,!1),Q=(0,i.dual)(2,((e,t)=>{let n="";for(const r of Z(e)){let e=0;for(;e<r.length&&r.charAt(e)<=" ";)e+=1;n+=e<r.length&&r.charAt(e)===t?r.substring(e+1):r}return n})),X=e=>Q(e,"|"),ee=e=>{let t=e[0];for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},te=e=>{let t=e[0].toUpperCase();for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},ne=e=>e.replace(/_/g,"-"),re=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),ie=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),ae=e=>e.replace(/-/g,"_");class se{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};const e=this.index;for(;!this.done&&!oe(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){const e=this.s[this.index];this.index=this.index+1,!this.done&&ce(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new se(this.s,this.stripped)}get done(){return this.index>=this.length}}const oe=e=>{const t=e.charCodeAt(0);return 13===t||10===t},ce=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),ue=(e,t)=>new se(e,t)},832028:(e,t,n)=>{n.r(t),n.d(t,{ParentSpan:()=>s,Tracer:()=>o,TracerTypeId:()=>a,externalSpan:()=>u,make:()=>c,tracerWith:()=>l});var r=n(344862),i=n(127514);const a=i.TracerTypeId,s=i.spanTag,o=i.tracerTag,c=i.make,u=i.externalSpan,l=r.tracerWith},122859:(e,t,n)=>{n.r(t),n.d(t,{appendElement:()=>g,at:()=>y,getEquivalence:()=>p,getFirst:()=>c,getOrder:()=>m,getSecond:()=>u,isTupleOf:()=>s.isTupleOf,isTupleOfAtLeast:()=>s.isTupleOfAtLeast,make:()=>o,mapBoth:()=>l,mapFirst:()=>f,mapSecond:()=>d,swap:()=>h});var r=n(235309),i=n(361369),a=n(259877),s=n(856572);const o=(...e)=>e,c=e=>e[0],u=e=>e[1],l=(0,i.dual)(2,((e,{onFirst:t,onSecond:n})=>[t(e[0]),n(e[1])])),f=(0,i.dual)(2,((e,t)=>[t(e[0]),e[1]])),d=(0,i.dual)(2,((e,t)=>[e[0],t(e[1])])),h=e=>[e[1],e[0]],p=r.tuple,m=a.tuple,g=(0,i.dual)(2,((e,t)=>[...e,t])),y=(0,i.dual)(2,((e,t)=>e[t]))},730276:(e,t,n)=>{n.r(t),n.d(t,{GenKindImpl:()=>u,GenKindTypeId:()=>o,PCGRandom:()=>h,SingleShotGen:()=>l,YieldWrap:()=>g,YieldWrapTypeId:()=>m,adapter:()=>d,internalCall:()=>w,isGenKind:()=>c,makeGenKind:()=>f,structuralRegion:()=>S,structuralRegionState:()=>b,yieldWrapGet:()=>y});var r=n(361369),i=n(606517),a=n(94732),s=n(856572);const o=Symbol.for("effect/Gen/GenKind"),c=e=>(0,s.isObject)(e)&&o in e;class u{value;constructor(e){this.value=e}get _F(){return r.identity}get _R(){return e=>e}get _O(){return e=>e}get _E(){return e=>e}[o]=o;[Symbol.iterator](){return new l(this)}}class l{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new l(this.self)}}const f=e=>new u(e),d=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new u(e)};class h{_state;constructor(e,t,n,r){return(0,s.isNullable)(t)&&(0,s.isNullable)(e)?(t=4294967295*Math.random()>>>0,e=0):(0,s.isNullable)(t)&&(t=e,e=0),(0,s.isNullable)(r)&&(0,s.isNullable)(n)?(r=this._state?this._state[3]:4150755663,n=this._state?this._state[2]:335903614):(0,s.isNullable)(r)&&(r=n,n=0),this._state=new Int32Array([0,0,n>>>0,(1|(r||0))>>>0]),this._next(),p(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(0===((e>>>=0)&e-1))return this._next()&e-1;let t=0;const n=(-e>>>0)%e>>>0;for(t=this._next();t<n;t=this._next());return t%e}number(){return(134217728*(1*(67108863&this._next()))+1*(134217727&this._next()))/9007199254740992}_next(){const e=this._state[0]>>>0,t=this._state[1]>>>0;!function(e,t,n,r,i){let a=(n>>>16)*(65535&i)>>>0,s=(65535&n)*(i>>>16)>>>0,o=(65535&n)*(65535&i)>>>0,c=(n>>>16)*(i>>>16)+((s>>>16)+(a>>>16))>>>0;s=s<<16>>>0,o=o+s>>>0,o>>>0<s>>>0&&(c=c+1>>>0);a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(c=c+1>>>0);c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,i)>>>0,e[0]=c,e[1]=o}(this._state,e,t,1481765933,1284865837),p(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=e>>>18,r=(t>>>18|e<<14)>>>0;n=(n^e)>>>0,r=(r^t)>>>0;const i=(r>>>27|n<<5)>>>0,a=e>>>27;return(i>>>a|i<<((-a>>>0&31)>>>0))>>>0}}function p(e,t,n,r,i){let a=t+r>>>0;const s=n+i>>>0;s>>>0<n>>>0&&(a=a+1|0),e[0]=a,e[1]=s}const m=Symbol.for("effect/Utils/YieldWrap");class g{#e;constructor(e){this.#e=e}[m](){return this.#e}}function y(e){if("object"===typeof e&&null!==e&&m in e)return e[m]();throw new Error((0,a.getBugErrorMessage)("yieldWrapGet"))}const b=(0,i.globalValue)("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),S=(e,t)=>{const n=b.enabled,r=b.tester;b.enabled=!0,t&&(b.tester=t);try{return e()}finally{b.enabled=n,b.tester=r}},w=(e=>{const t={[e]:e=>e()};return function(n){return t[e](n)}})("effect_internal_function")},611174:(e,t,n)=>{n.r(t),n.d(t,{isNonEmptyArray:()=>r});const r=e=>e.length>0},668481:(e,t,n)=>{n.r(t),n.d(t,{EntryTypeId:()=>w,MapRequestResolversReducer:()=>p,RequestBlockParallelTypeId:()=>_,SequentialCollectionTypeId:()=>L,empty:()=>l,flatten:()=>y,isEntry:()=>k,makeEntry:()=>x,mapRequestResolvers:()=>m,par:()=>f,parallelCollectionAdd:()=>N,parallelCollectionCombine:()=>C,parallelCollectionEmpty:()=>O,parallelCollectionIsEmpty:()=>R,parallelCollectionKeys:()=>F,parallelCollectionMake:()=>A,parallelCollectionToSequentialCollection:()=>M,reduce:()=>g,seq:()=>d,sequentialCollectionCombine:()=>j,sequentialCollectionIsEmpty:()=>B,sequentialCollectionKeys:()=>q,sequentialCollectionMake:()=>U,sequentialCollectionToChunk:()=>$,single:()=>h});var r=n(128420),i=n(757964),a=n(43977),s=n(827964),o=n(489425),c=n(977948),u=n(856572);const l={_tag:"Empty"},f=(e,t)=>({_tag:"Par",left:e,right:t}),d=(e,t)=>({_tag:"Seq",left:e,right:t}),h=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t}),p=e=>({emptyCase:()=>l,parCase:(e,t)=>f(e,t),seqCase:(e,t)=>d(e,t),singleCase:(t,n)=>h(e(t),n)}),m=(e,t)=>g(e,p(t)),g=(e,t)=>{let n=o.of(e),r=o.empty();for(;o.isCons(n);){const e=n.head;switch(e._tag){case"Empty":r=o.cons(i.right(t.emptyCase()),r),n=n.tail;break;case"Par":r=o.cons(i.left({_tag:"ParCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Seq":r=o.cons(i.left({_tag:"SeqCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Single":{const a=t.singleCase(e.dataSource,e.blockedRequest);r=o.cons(i.right(a),r),n=n.tail;break}}}const a=o.reduce(r,o.empty(),((e,n)=>{switch(n._tag){case"Left":{const r=o.unsafeHead(e),i=o.unsafeHead(o.unsafeTail(e)),a=o.unsafeTail(o.unsafeTail(e));switch(n.left._tag){case"ParCase":return o.cons(t.parCase(r,i),a);case"SeqCase":return o.cons(t.seqCase(r,i),a)}}case"Right":return o.cons(n.right,e)}}));if(o.isNil(a))throw new Error("BUG: BlockedRequests.reduce - please report an issue at https://github.com/Effect-TS/effect/issues");return a.head},y=e=>{let t=o.of(e),n=o.empty();for(;;){const[e,r]=o.reduce(t,[O(),o.empty()],(([e,t],n)=>{const[r,i]=b(n);return[C(e,r),o.appendAll(t,i)]}));if(n=S(n,e),o.isNil(r))return o.reverse(n);t=r}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},b=e=>{let t=e,n=O(),r=o.empty(),i=o.empty();for(;;)switch(t._tag){case"Empty":if(o.isNil(r))return[n,i];t=r.head,r=r.tail;break;case"Par":r=o.cons(t.right,r),t=t.left;break;case"Seq":{const e=t.left,n=t.right;switch(e._tag){case"Empty":t=n;break;case"Par":{const r=e.left,i=e.right;t=f(d(r,n),d(i,n));break}case"Seq":{const r=e.left,i=e.right;t=d(r,d(i,n));break}case"Single":t=e,i=o.cons(n,i)}break}case"Single":if(n=N(n,t),o.isNil(r))return[n,i];t=r.head,r=r.tail}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},S=(e,t)=>{if(o.isNil(e))return o.of(M(t));if(R(t))return e;const n=q(e.head),r=F(t);return 1===n.length&&1===r.length&&a.equals(n[0],r[0])?o.cons(j(e.head,M(t)),e.tail):o.cons(M(t),e)},w=Symbol.for("effect/RequestBlock/Entry");class v{request;result;listeners;ownerId;state;[w]=E;constructor(e,t,n,r,i){this.request=e,this.result=t,this.listeners=n,this.ownerId=r,this.state=i}}const E={_R:e=>e},k=e=>(0,u.hasProperty)(e,w),x=e=>new v(e.request,e.result,e.listeners,e.ownerId,e.state),_=Symbol.for("effect/RequestBlock/RequestBlockParallel"),I={_R:e=>e};class T{map;[_]=I;constructor(e){this.map=e}}const O=()=>new T(s.empty()),A=(e,t)=>new T(s.make([e,r.of(t)])),N=(e,t)=>new T(s.modifyAt(e.map,t.dataSource,(e=>c.orElseSome(c.map(e,r.append(t.blockedRequest)),(()=>r.of(t.blockedRequest)))))),C=(e,t)=>new T(s.reduce(e.map,t.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>t,onSome:e=>r.appendAll(t,e)}))))),R=e=>s.isEmpty(e.map),F=e=>Array.from(s.keys(e.map)),M=e=>U(s.map(e.map,(e=>r.of(e)))),L=Symbol.for("effect/RequestBlock/RequestBlockSequential"),P={_R:e=>e};class D{map;[L]=P;constructor(e){this.map=e}}const U=e=>new D(e),j=(e,t)=>new D(s.reduce(t.map,e.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>r.empty(),onSome:e=>r.appendAll(e,t)}))))),B=e=>s.isEmpty(e.map),q=e=>Array.from(s.keys(e.map)),$=e=>Array.from(e.map)},561693:(e,t,n)=>{n.r(t),n.d(t,{CacheTypeId:()=>R,MapKeyTypeId:()=>x,complete:()=>v,initialCacheState:()=>C,isMapKey:()=>T,make:()=>D,makeCacheState:()=>N,makeCacheStats:()=>M,makeEntryStats:()=>L,makeKeySet:()=>A,makeMapKey:()=>I,makeWith:()=>U,pending:()=>E,refreshing:()=>k,unsafeMakeWith:()=>j});var r=n(689702),i=n(762738),a=n(284073),s=n(757964),o=n(43977),c=n(896949),u=n(361369),l=n(367337),f=n(714349),d=n(366775),h=n(645914),p=n(977948),m=n(856572),g=n(820808),y=n(672620),b=n(234951),S=n(478908),w=n(860356);const v=(e,t,n,r)=>b.struct({_tag:"Complete",key:e,exit:t,entryStats:n,timeToLiveMillis:r}),E=(e,t)=>b.struct({_tag:"Pending",key:e,deferred:t}),k=(e,t)=>b.struct({_tag:"Refreshing",deferred:e,complete:t}),x=Symbol.for("effect/Cache/MapKey");class _{current;[x]=x;previous=void 0;next=void 0;constructor(e){this.current=e}[l.symbol](){return(0,u.pipe)(l.hash(this.current),l.combine(l.hash(this.previous)),l.combine(l.hash(this.next)),l.cached(this))}[o.symbol](e){return this===e||T(e)&&o.equals(this.current,e.current)&&o.equals(this.previous,e.previous)&&o.equals(this.next,e.next)}}const I=e=>new _(e),T=e=>(0,m.hasProperty)(e,x);class O{head=void 0;tail=void 0;add(e){if(e!==this.tail)if(void 0===this.tail)this.head=e,this.tail=e;else{const t=e.previous,n=e.next;void 0!==n&&(e.next=void 0,void 0!==t?(t.next=n,n.previous=t):(this.head=n,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}remove(){const e=this.head;if(void 0!==e){const t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}const A=()=>new O,N=(e,t,n,r,i,a)=>({map:e,keys:t,accesses:n,updating:r,hits:i,misses:a}),C=()=>N(f.empty(),A(),d.unbounded(),h.make(!1),0,0),R=Symbol.for("effect/Cache"),F={_Key:e=>e,_Error:e=>e,_Value:e=>e},M=e=>e,L=e=>({loadedMillis:e});class P{capacity;context;fiberId;lookup;timeToLive;[R]=F;cacheState;constructor(e,t,n,r,i){this.capacity=e,this.context=t,this.fiberId=n,this.lookup=r,this.timeToLive=i,this.cacheState=C()}get(e){return y.map(this.getEither(e),s.merge)}get cacheStats(){return y.sync((()=>M({hits:this.cacheState.hits,misses:this.cacheState.misses,size:f.size(this.cacheState.map)})))}getOption(e){return y.suspend((()=>p.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=I(e);return this.trackAccess(t),this.trackMiss(),y.succeed(p.none())},onSome:e=>this.resolveMapValue(e)})))}getOptionComplete(e){return y.suspend((()=>p.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=I(e);return this.trackAccess(t),this.trackMiss(),y.succeed(p.none())},onSome:e=>this.resolveMapValue(e,!0)})))}contains(e){return y.sync((()=>f.has(this.cacheState.map,e)))}entryStats(e){return y.sync((()=>{const t=f.get(this.cacheState.map,e);if(p.isSome(t))switch(t.value._tag){case"Complete":{const e=t.value.entryStats.loadedMillis;return p.some(L(e))}case"Pending":return p.none();case"Refreshing":{const e=t.value.complete.entryStats.loadedMillis;return p.some(L(e))}}return p.none()}))}getEither(e){return y.suspend((()=>{const t=e;let n,r,a=p.getOrUndefined(f.get(this.cacheState.map,t));return void 0===a&&(r=i.unsafeMake(this.fiberId),n=I(t),f.has(this.cacheState.map,t)?a=p.getOrUndefined(f.get(this.cacheState.map,t)):f.set(this.cacheState.map,t,E(n,r))),void 0===a?(this.trackAccess(n),this.trackMiss(),y.map(this.lookupValueOf(e,r),s.right)):y.flatMap(this.resolveMapValue(a),p.match({onNone:()=>this.getEither(e),onSome:e=>y.succeed(s.left(e))}))}))}invalidate(e){return y.sync((()=>{f.remove(this.cacheState.map,e)}))}invalidateWhen(e,t){return y.sync((()=>{const n=f.get(this.cacheState.map,e);p.isSome(n)&&"Complete"===n.value._tag&&"Success"===n.value.exit._tag&&t(n.value.exit.value)&&f.remove(this.cacheState.map,e)}))}get invalidateAll(){return y.sync((()=>{this.cacheState.map=f.empty()}))}refresh(e){return g.clockWith((t=>y.suspend((()=>{const n=e,r=i.unsafeMake(this.fiberId);let a=p.getOrUndefined(f.get(this.cacheState.map,n));if(void 0===a&&(f.has(this.cacheState.map,n)?a=p.getOrUndefined(f.get(this.cacheState.map,n)):f.set(this.cacheState.map,n,E(I(n),r))),void 0===a)return y.asVoid(this.lookupValueOf(e,r));switch(a._tag){case"Complete":if(this.hasExpired(t,a.timeToLiveMillis)){const t=p.getOrUndefined(f.get(this.cacheState.map,n));return o.equals(t,a)&&f.remove(this.cacheState.map,n),y.asVoid(this.get(e))}return(0,u.pipe)(this.lookupValueOf(e,r),g.when((()=>{const e=p.getOrUndefined(f.get(this.cacheState.map,n));if(o.equals(e,a)){const e=k(r,a);return f.set(this.cacheState.map,n,e),!0}return!1})),y.asVoid);case"Pending":case"Refreshing":return i.await(a.deferred)}}))))}set(e,t){return g.clockWith((n=>y.sync((()=>{const r=n.unsafeCurrentTimeMillis(),i=e,s=c.succeed(t),o=v(I(i),s,L(r),r+a.toMillis(a.decode(this.timeToLive(s))));f.set(this.cacheState.map,i,o)}))))}get size(){return y.sync((()=>f.size(this.cacheState.map)))}get values(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e}))}get entries(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e}))}get keys(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e}))}resolveMapValue(e,t=!1){return g.clockWith((n=>{switch(e._tag){case"Complete":return this.trackAccess(e.key),this.hasExpired(n,e.timeToLiveMillis)?(f.remove(this.cacheState.map,e.key.current),y.succeed(p.none())):(this.trackHit(),y.map(e.exit,p.some));case"Pending":return this.trackAccess(e.key),this.trackHit(),t?y.succeed(p.none()):y.map(i.await(e.deferred),p.some);case"Refreshing":return this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(n,e.complete.timeToLiveMillis)?t?y.succeed(p.none()):y.map(i.await(e.deferred),p.some):y.map(e.complete.exit,p.some)}}))}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(d.offer(this.cacheState.accesses,e),h.compareAndSet(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){const t=d.poll(this.cacheState.accesses,d.EmptyMutableQueue);t===d.EmptyMutableQueue?e=!1:this.cacheState.keys.add(t)}let t=f.size(this.cacheState.map);for(e=t>this.capacity;e;){const n=this.cacheState.keys.remove();void 0!==n?f.has(this.cacheState.map,n.current)&&(f.remove(this.cacheState.map,n.current),t-=1,e=t>this.capacity):e=!1}h.set(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return g.clockWith((n=>y.suspend((()=>{const r=e;return(0,u.pipe)(this.lookup(e),y.provideContext(this.context),y.exit,y.flatMap((e=>{const s=n.unsafeCurrentTimeMillis(),o=L(s),c=v(I(r),e,o,s+a.toMillis(a.decode(this.timeToLive(e))));return f.set(this.cacheState.map,r,c),y.zipRight(i.done(t,e),e)})),y.onInterrupt((()=>y.zipRight(i.interrupt(t),y.sync((()=>{f.remove(this.cacheState.map,r)}))))))}))))}}const D=e=>{const t=a.decode(e.timeToLive);return U({capacity:e.capacity,lookup:e.lookup,timeToLive:()=>t})},U=e=>y.map(w.all([y.context(),y.fiberId]),(([t,n])=>new P(e.capacity,t,n,e.lookup,(t=>a.decode(e.timeToLive(t)))))),j=(e,t,n)=>new P(e,r.empty(),S.none,t,(e=>a.decode(n(e))))},908197:(e,t,n)=>{n.r(t),n.d(t,{CauseTypeId:()=>k,andThen:()=>ce,as:()=>ie,contains:()=>ue,defects:()=>V,die:()=>T,dieOption:()=>H,electFailures:()=>ne,empty:()=>_,fail:()=>I,failureOption:()=>K,failureOrCause:()=>J,failures:()=>z,filter:()=>pe,find:()=>he,flatMap:()=>se,flatten:()=>oe,flipCauseOption:()=>Y,interrupt:()=>O,interruptOption:()=>Z,interruptors:()=>G,isCause:()=>C,isDie:()=>q,isDieType:()=>M,isEmpty:()=>j,isEmptyType:()=>R,isFailType:()=>F,isFailure:()=>B,isInterruptType:()=>L,isInterrupted:()=>$,isInterruptedOnly:()=>W,isParallelType:()=>D,isSequentialType:()=>P,keepDefects:()=>Q,keepDefectsAndElectFailures:()=>X,linearize:()=>ee,map:()=>ae,match:()=>ve,parallel:()=>A,pretty:()=>xe,prettyErrorMessage:()=>Te,prettyErrors:()=>Re,reduce:()=>Ee,reduceWithContext:()=>ke,sequential:()=>N,size:()=>U,spanToTrace:()=>Ae,stripFailures:()=>te,stripSomeDefects:()=>re});var r=n(630768),i=n(128420),a=n(757964),s=n(43977),o=n(361369),c=n(606517),u=n(367337),l=n(227561),f=n(883845),d=n(977948),h=n(953533),p=n(856572),m=n(94732);const g="Die",y="Empty",b="Fail",S="Interrupt",w="Parallel",v="Sequential",E="effect/Cause",k=Symbol.for(E),x={[k]:{_E:e=>e},[u.symbol](){return(0,o.pipe)(u.hash(E),u.combine(u.hash(fe(this))),u.cached(this))},[s.symbol](e){return C(e)&&le(this,e)},pipe(){return(0,h.pipeArguments)(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:(0,f.toJSON)(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:(0,f.toJSON)(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:(0,f.toJSON)(this.left),right:(0,f.toJSON)(this.right)}}},toString(){return xe(this)},[f.NodeInspectSymbol](){return this.toJSON()}},_=(()=>{const e=Object.create(x);return e._tag=y,e})(),I=e=>{const t=Object.create(x);return t._tag=b,t.error=e,t},T=e=>{const t=Object.create(x);return t._tag=g,t.defect=e,t},O=e=>{const t=Object.create(x);return t._tag=S,t.fiberId=e,t},A=(e,t)=>{const n=Object.create(x);return n._tag=w,n.left=e,n.right=t,n},N=(e,t)=>{const n=Object.create(x);return n._tag=v,n.left=e,n.right=t,n},C=e=>(0,p.hasProperty)(e,k),R=e=>e._tag===y,F=e=>e._tag===b,M=e=>e._tag===g,L=e=>e._tag===S,P=e=>e._tag===v,D=e=>e._tag===w,U=e=>ke(e,void 0,ge),j=e=>e._tag===y||Ee(e,!0,((e,t)=>{switch(t._tag){case y:return d.some(e);case g:case b:case S:return d.some(!1);default:return d.none()}})),B=e=>d.isSome(K(e)),q=e=>d.isSome(H(e)),$=e=>d.isSome(Z(e)),W=e=>ke(void 0,ye)(e),z=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===b?d.some((0,o.pipe)(e,i.prepend(t.error))):d.none()))),V=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===g?d.some((0,o.pipe)(e,i.prepend(t.defect))):d.none()))),G=e=>Ee(e,l.empty(),((e,t)=>t._tag===S?d.some((0,o.pipe)(e,l.add(t.fiberId))):d.none())),K=e=>he(e,(e=>e._tag===b?d.some(e.error):d.none())),J=e=>{const t=K(e);switch(t._tag){case"None":return a.right(e);case"Some":return a.left(t.value)}},H=e=>he(e,(e=>e._tag===g?d.some(e.defect):d.none())),Y=e=>ve(e,{onEmpty:d.some(_),onFail:e=>(0,o.pipe)(e,d.map(I)),onDie:e=>d.some(T(e)),onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none()}),Z=e=>he(e,(e=>e._tag===S?d.some(e.fiberId):d.none())),Q=e=>ve(e,{onEmpty:d.none(),onFail:()=>d.none(),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),X=e=>ve(e,{onEmpty:d.none(),onFail:e=>d.some(T(e)),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),ee=e=>ve(e,{onEmpty:l.empty(),onFail:e=>l.make(I(e)),onDie:e=>l.make(T(e)),onInterrupt:e=>l.make(O(e)),onSequential:(e,t)=>(0,o.pipe)(e,l.flatMap((e=>(0,o.pipe)(t,l.map((t=>N(e,t))))))),onParallel:(e,t)=>(0,o.pipe)(e,l.flatMap((e=>(0,o.pipe)(t,l.map((t=>A(e,t)))))))}),te=e=>ve(e,{onEmpty:_,onFail:()=>_,onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:N,onParallel:A}),ne=e=>ve(e,{onEmpty:_,onFail:e=>T(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}),re=(0,o.dual)(2,((e,t)=>ve(e,{onEmpty:d.some(_),onFail:e=>d.some(I(e)),onDie:e=>{const n=t(e);return d.isSome(n)?d.none():d.some(T(e))},onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}))),ie=(0,o.dual)(2,((e,t)=>ae(e,(()=>t)))),ae=(0,o.dual)(2,((e,t)=>se(e,(e=>I(t(e)))))),se=(0,o.dual)(2,((e,t)=>ve(e,{onEmpty:_,onFail:e=>t(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}))),oe=e=>se(e,o.identity),ce=(0,o.dual)(2,((e,t)=>(0,p.isFunction)(t)?se(e,t):se(e,(()=>t)))),ue=(0,o.dual)(2,((e,t)=>t._tag===y||e===t||Ee(e,!1,((e,n)=>d.some(e||le(n,t)))))),le=(e,t)=>{let n=i.of(e),r=i.of(t);for(;i.isNonEmpty(n)&&i.isNonEmpty(r);){const[e,t]=(0,o.pipe)(i.headNonEmpty(n),Ee([l.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,l.union(r)),(0,o.pipe)(t,i.appendAll(a))])}))),[a,c]=(0,o.pipe)(i.headNonEmpty(r),Ee([l.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,l.union(r)),(0,o.pipe)(t,i.appendAll(a))])})));if(!s.equals(e,a))return!1;n=t,r=c}return!0},fe=e=>de(i.of(e),i.empty()),de=(e,t)=>{for(;;){const[n,a]=(0,o.pipe)(e,r.reduce([l.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return[(0,o.pipe)(e,l.union(r)),(0,o.pipe)(t,i.appendAll(a))]}))),s=l.size(n)>0?(0,o.pipe)(t,i.prepend(n)):t;if(i.isEmpty(a))return i.reverse(s);e=a,t=s}throw new Error((0,m.getBugErrorMessage)("Cause.flattenCauseLoop"))},he=(0,o.dual)(2,((e,t)=>{const n=[e];for(;n.length>0;){const e=n.pop(),r=t(e);switch(r._tag){case"None":switch(e._tag){case v:case w:n.push(e.right),n.push(e.left)}break;case"Some":return r}}return d.none()})),pe=(0,o.dual)(2,((e,t)=>ke(e,void 0,be(t)))),me=e=>{let t=e;const n=[];let r=l.empty(),a=i.empty();for(;void 0!==t;)switch(t._tag){case y:if(0===n.length)return[r,a];t=n.pop();break;case b:if(r=l.add(r,i.make(t._tag,t.error)),0===n.length)return[r,a];t=n.pop();break;case g:if(r=l.add(r,i.make(t._tag,t.defect)),0===n.length)return[r,a];t=n.pop();break;case S:if(r=l.add(r,i.make(t._tag,t.fiberId)),0===n.length)return[r,a];t=n.pop();break;case v:switch(t.left._tag){case y:t=t.right;break;case v:t=N(t.left.left,N(t.left.right,t.right));break;case w:t=A(N(t.left.left,t.right),N(t.left.right,t.right));break;default:a=i.prepend(a,t.right),t=t.left}break;case w:n.push(t.right),t=t.left}throw new Error((0,m.getBugErrorMessage)("Cause.evaluateCauseLoop"))},ge={emptyCase:()=>0,failCase:()=>1,dieCase:()=>1,interruptCase:()=>1,sequentialCase:(e,t,n)=>t+n,parallelCase:(e,t,n)=>t+n},ye={emptyCase:o.constTrue,failCase:o.constFalse,dieCase:o.constFalse,interruptCase:o.constTrue,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},be=e=>({emptyCase:()=>_,failCase:(e,t)=>I(t),dieCase:(e,t)=>T(t),interruptCase:(e,t)=>O(t),sequentialCase:(t,n,r)=>e(n)?e(r)?N(n,r):n:e(r)?r:_,parallelCase:(t,n,r)=>e(n)?e(r)?A(n,r):n:e(r)?r:_}),Se="SequentialCase",we="ParallelCase",ve=(0,o.dual)(2,((e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:i,onParallel:a,onSequential:s})=>ke(e,void 0,{emptyCase:()=>n,failCase:(e,t)=>r(t),dieCase:(e,n)=>t(n),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,n)=>s(t,n),parallelCase:(e,t,n)=>a(t,n)}))),Ee=(0,o.dual)(3,((e,t,n)=>{let r=t,i=e;const a=[];for(;void 0!==i;){const e=n(r,i);switch(r=d.isSome(e)?e.value:r,i._tag){case v:case w:a.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&a.length>0&&(i=a.pop())}return r})),ke=(0,o.dual)(3,((e,t,n)=>{const r=[e],i=[];for(;r.length>0;){const e=r.pop();switch(e._tag){case y:i.push(a.right(n.emptyCase(t)));break;case b:i.push(a.right(n.failCase(t,e.error)));break;case g:i.push(a.right(n.dieCase(t,e.defect)));break;case S:i.push(a.right(n.interruptCase(t,e.fiberId)));break;case v:r.push(e.right),r.push(e.left),i.push(a.left({_tag:Se}));break;case w:r.push(e.right),r.push(e.left),i.push(a.left({_tag:we}))}}const s=[];for(;i.length>0;){const e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case Se:{const e=s.pop(),r=s.pop(),i=n.sequentialCase(t,e,r);s.push(i);break}case we:{const e=s.pop(),r=s.pop(),i=n.parallelCase(t,e,r);s.push(i);break}}break;case"Right":s.push(e.right)}}if(0===s.length)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),xe=(e,t)=>W(e)?"All fibers interrupted without errors.":Re(e).map((function(e){return!0!==t?.renderErrorCause||void 0===e.cause?e.stack:`${e.stack} {\n${_e(e.cause,"  ")}\n}`})).join("\n"),_e=(e,t)=>{const n=e.stack.split("\n");let r=`${t}[cause]: ${n[0]}`;for(let i=1,a=n.length;i<a;i++)r+=`\n${t}${n[i]}`;return e.cause&&(r+=` {\n${_e(e.cause,`${t}  `)}\n${t}}`),r};class Ie extends globalThis.Error{span=void 0;constructor(e){const t="object"===typeof e&&null!==e,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Te(e),t&&"cause"in e&&"undefined"!==typeof e.cause?{cause:new Ie(e.cause)}:void 0),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=e instanceof Error?e.name:"Error",t&&(Ce in e&&(this.span=e[Ce]),Object.keys(e).forEach((t=>{t in this||(this[t]=e[t])}))),this.stack=Ne(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const Te=e=>{if("string"===typeof e)return e;if("object"===typeof e&&null!==e&&e instanceof Error)return e.message;try{if((0,p.hasProperty)(e,"toString")&&(0,p.isFunction)(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},Oe=/\((.*)\)/,Ae=(0,c.globalValue)("effect/Tracer/spanToTrace",(()=>new WeakMap)),Ne=(e,t,n)=>{const r=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let a=1;a<i.length&&!i[a].includes("Generator.next");a++){if(i[a].includes("effect_internal_function")){r.pop();break}r.push(i[a].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let e=n,t=0;for(;e&&"Span"===e._tag&&t<10;){const n=Ae.get(e);if("function"===typeof n){const t=n();if("string"===typeof t){const n=t.match(Oe),i=n?n[1]:t.replace(/^at /,"");r.push(`    at ${e.name} (${i})`)}else r.push(`    at ${e.name}`)}else r.push(`    at ${e.name}`);e=d.getOrUndefined(e.parent),t++}}return r.join("\n")},Ce=Symbol.for("effect/SpanAnnotation"),Re=e=>ke(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new Ie(t)],failCase:(e,t)=>[new Ie(t)],interruptCase:()=>[],parallelCase:(e,t,n)=>[...t,...n],sequentialCase:(e,t,n)=>[...t,...n]})},114969:(e,t,n)=>{n.r(t),n.d(t,{ClockTypeId:()=>o,MAX_TIMER_MILLIS:()=>u,clockTag:()=>c,globalClockScheduler:()=>l,make:()=>p});var r=n(689702),i=n(284073),a=n(361369),s=n(672620);const o=Symbol.for("effect/Clock"),c=r.GenericTag("effect/Clock"),u=2**31-1,l={unsafeSchedule(e,t){const n=i.toMillis(t);if(n>u)return a.constFalse;let r=!1;const s=setTimeout((()=>{r=!0,e()}),n);return()=>(clearTimeout(s),!r)}},f=function(){const e=BigInt(1e6);if("undefined"===typeof performance)return()=>BigInt(Date.now())*e;if("number"===typeof performance.timeOrigin&&0===performance.timeOrigin)return()=>BigInt(Math.round(1e6*performance.now()));const t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),d=function(){const e="hrtime"in{env:{NODE_ENV:"production"}}&&"function"===typeof{env:{NODE_ENV:"production"}}.hrtime.bigint?{env:{NODE_ENV:"production"}}.hrtime:void 0;if(!e)return f;const t=f()-e.bigint();return()=>t+e.bigint()}();class h{[o]=o;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return d()}currentTimeMillis=s.sync((()=>this.unsafeCurrentTimeMillis()));currentTimeNanos=s.sync((()=>this.unsafeCurrentTimeNanos()));scheduler(){return s.succeed(l)}sleep(e){return s.async((t=>{const n=l.unsafeSchedule((()=>t(s.void)),e);return s.asVoid(s.sync(n))}))}}const p=()=>new h},242927:(e,t,n)=>{n.r(t),n.d(t,{currentRequestMap:()=>a});var r=n(606517),i=n(672620);const a=(0,r.globalValue)(Symbol.for("effect/FiberRef/currentRequestMap"),(()=>(0,i.fiberRefUnsafeMake)(new Map)))},564889:(e,t,n)=>{n.r(t),n.d(t,{And:()=>m,ConfigErrorTypeId:()=>h,InvalidData:()=>y,MissingData:()=>b,Or:()=>g,SourceUnavailable:()=>S,Unsupported:()=>w,isAnd:()=>E,isConfigError:()=>v,isInvalidData:()=>x,isMissingData:()=>_,isMissingDataOnly:()=>C,isOr:()=>k,isSourceUnavailable:()=>I,isUnsupported:()=>T,prefixed:()=>O,proto:()=>p,reduceWithContext:()=>N});var r=n(630768),i=n(757964),a=n(361369),s=n(856572);const o="And",c="Or",u="InvalidData",l="MissingData",f="SourceUnavailable",d="Unsupported",h=Symbol.for("effect/ConfigError"),p={_tag:"ConfigError",[h]:h},m=(e,t)=>{const n=Object.create(p);return n._op=o,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},g=(e,t)=>{const n=Object.create(p);return n._op=c,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},y=(e,t,n={pathDelim:"."})=>{const i=Object.create(p);return i._op=u,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Invalid data at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},b=(e,t,n={pathDelim:"."})=>{const i=Object.create(p);return i._op=l,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Missing data at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},S=(e,t,n,i={pathDelim:"."})=>{const s=Object.create(p);return s._op=f,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${(0,a.pipe)(this.path,r.join(i.pathDelim))}: "${this.message}")`}}),s},w=(e,t,n={pathDelim:"."})=>{const i=Object.create(p);return i._op=d,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},v=e=>(0,s.hasProperty)(e,h),E=e=>e._op===o,k=e=>e._op===c,x=e=>e._op===u,_=e=>e._op===l,I=e=>e._op===f,T=e=>e._op===d,O=(0,a.dual)(2,((e,t)=>{switch(e._op){case o:return m(O(e.left,t),O(e.right,t));case c:return g(O(e.left,t),O(e.right,t));case u:return y([...t,...e.path],e.message);case l:return b([...t,...e.path],e.message);case f:return S([...t,...e.path],e.message,e.cause);case d:return w([...t,...e.path],e.message)}})),A={andCase:(e,t,n)=>t&&n,orCase:(e,t,n)=>t&&n,invalidDataCase:a.constFalse,missingDataCase:a.constTrue,sourceUnavailableCase:a.constFalse,unsupportedCase:a.constFalse},N=(0,a.dual)(3,((e,t,n)=>{const r=[e],a=[];for(;r.length>0;){const e=r.pop();switch(e._op){case o:r.push(e.right),r.push(e.left),a.push(i.left({_op:"AndCase"}));break;case c:r.push(e.right),r.push(e.left),a.push(i.left({_op:"OrCase"}));break;case u:a.push(i.right(n.invalidDataCase(t,e.path,e.message)));break;case l:a.push(i.right(n.missingDataCase(t,e.path,e.message)));break;case f:a.push(i.right(n.sourceUnavailableCase(t,e.path,e.message,e.cause)));break;case d:a.push(i.right(n.unsupportedCase(t,e.path,e.message)))}}const s=[];for(;a.length>0;){const e=a.pop();switch(e._op){case"Left":switch(e.left._op){case"AndCase":{const e=s.pop(),r=s.pop(),i=n.andCase(t,e,r);s.push(i);break}case"OrCase":{const e=s.pop(),r=s.pop(),i=n.orCase(t,e,r);s.push(i);break}}break;case"Right":s.push(e.right)}}if(0===s.length)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),C=e=>N(e,void 0,A)},480226:(e,t,n)=>{n.r(t),n.d(t,{ConfigProviderTypeId:()=>F,FlatConfigProviderTypeId:()=>L,configProviderTag:()=>M,constantCase:()=>H,fromEnv:()=>j,fromFlat:()=>U,fromJson:()=>le,fromMap:()=>B,kebabCase:()=>Y,lowerCase:()=>Z,make:()=>P,makeFlat:()=>D,mapInputPath:()=>W,nested:()=>V,orElse:()=>K,snakeCase:()=>Q,unnested:()=>G,upperCase:()=>X,within:()=>ee});var r=n(630768),i=n(689702),a=n(757964),s=n(361369),o=n(827964),c=n(227561),u=n(804676),l=n(977948),f=n(953533),d=n(895156),h=n(564889),p=n(489425);const m={_tag:"Empty"},g=(0,s.dual)(2,((e,t)=>({_tag:"AndThen",first:e,second:t}))),y=(0,s.dual)(2,((e,t)=>g(e,{_tag:"MapName",f:t}))),b=(0,s.dual)(2,((e,t)=>g(e,{_tag:"Nested",name:t}))),S=(0,s.dual)(2,((e,t)=>g(e,{_tag:"Unnested",name:t}))),w=(0,s.dual)(2,((e,t)=>{let n=p.of(t),i=e;for(;p.isCons(n);){const e=n.head;switch(e._tag){case"Empty":n=n.tail;break;case"AndThen":n=p.cons(e.first,p.cons(e.second,n.tail));break;case"MapName":i=r.map(i,e.f),n=n.tail;break;case"Nested":i=r.prepend(i,e.name),n=n.tail;break;case"Unnested":if(!(0,s.pipe)(r.head(i),l.contains(e.name)))return a.left(h.MissingData(i,`Expected ${e.name} to be in path in ConfigProvider#unnested`));i=r.tailNonEmpty(i),n=n.tail;break}}return a.right(i)}));var v=n(672620),E=n(564577);const k=e=>e.toLowerCase(),x=e=>e.toUpperCase(),_=(e,t,n)=>t instanceof RegExp?e.replace(t,n):t.reduce(((e,t)=>e.replace(t,n)),e),I=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],T=/[^A-Z0-9]+/gi,O=(e,t={})=>{const{delimiter:n=" ",splitRegexp:r=I,stripRegexp:i=T,transform:a=k}=t,s=_(_(e,r,"$1\0$2"),i,"\0");let o=0,c=s.length;for(;"\0"===s.charAt(o);)o++;for(;"\0"===s.charAt(c-1);)c--;return s.slice(o,c).split("\0").map(a).join(n)},A=(e,t)=>O(e,{delimiter:"_",transform:x,...t}),N=(e,t)=>O(e,{delimiter:"-",...t}),C=(e,t)=>O(e,{delimiter:"_",...t}),R=(e,t)=>[...e,...t],F=Symbol.for("effect/ConfigProvider"),M=i.GenericTag("effect/ConfigProvider"),L=Symbol.for("effect/ConfigProviderFlat"),P=e=>({[F]:F,pipe(){return(0,f.pipeArguments)(this,arguments)},...e}),D=e=>({[L]:L,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),U=e=>P({load:t=>v.flatMap(q(e,r.empty(),t,!1),(e=>l.match(r.head(e),{onNone:()=>v.fail(h.MissingData(r.empty(),`Expected a single value having structure: ${t}`)),onSome:v.succeed}))),flattened:e}),j=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),i=()=>"env"in{env:{NODE_ENV:"production"}}?{NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"starpy",slug:"starpy",version:"2.1.0",orientation:"portrait",icon:"./assets/icon.png",backgroundColor:"#000000",splash:{image:"./assets/splash.png",backgroundColor:"#000000",resizeMode:"cover"},platforms:["ios","android","web"],scheme:"starpy",env:{DEBUG:"webtorrent"},userInterfaceStyle:"dark",web:{},extra:{eas:{projectId:"96050f57-642d-4f18-8222-de9f9ccb9e21"}},sdkVersion:"51.0.0"},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}:{};return U(D({load:(e,a,o=!0)=>{const c=(e=>(0,s.pipe)(e,r.join(t)))(e),u=i(),f=c in u?l.some(u[c]):l.none();return(0,s.pipe)(f,v.mapError((()=>h.MissingData(e,`Expected ${c} to exist in the process context`))),v.flatMap((t=>te(t,e,a,n,o))))},enumerateChildren:e=>v.sync((()=>{const n=i(),a=Object.keys(n).map((e=>e.toUpperCase().split(t))).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(a)})),patch:m}))},B=(e,t)=>{const{pathDelim:n,seqDelim:i}=Object.assign({seqDelim:",",pathDelim:"."},t),a=e=>(0,s.pipe)(e,r.join(n)),o=e=>e.split(n),u=oe(e,(e=>o(e)),a);return U(D({load:(e,t,n=!0)=>{const r=a(e),o=u.has(r)?l.some(u.get(r)):l.none();return(0,s.pipe)(o,v.mapError((()=>h.MissingData(e,`Expected ${r} to exist in the provided map`))),v.flatMap((r=>te(r,e,t,i,n))))},enumerateChildren:e=>v.sync((()=>{const t=r.fromIterable(u.keys()).map(o).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(t)})),patch:m}))},q=(e,t,n,i)=>{const c=n;switch(c._tag){case E.OP_CONSTANT:return v.succeed(r.of(c.value));case E.OP_DESCRIBED:return v.suspend((()=>q(e,t,c.config,i)));case E.OP_FAIL:return v.fail(h.MissingData(t,c.message));case E.OP_FALLBACK:return(0,s.pipe)(v.suspend((()=>q(e,t,c.first,i))),v.catchAll((n=>c.condition(n)?(0,s.pipe)(q(e,t,c.second,i),v.catchAll((e=>v.fail(h.Or(n,e))))):v.fail(n))));case E.OP_LAZY:return v.suspend((()=>q(e,t,c.config(),i)));case E.OP_MAP_OR_FAIL:return v.suspend((()=>(0,s.pipe)(q(e,t,c.original,i),v.flatMap(v.forEachSequential((e=>(0,s.pipe)(c.mapOrFail(e),v.mapError(h.prefixed(((e,t)=>{let n=t;if("Nested"===n._tag){const t=e.slice();for(;"Nested"===n._tag;)t.push(n.name),n=n.config;return t}return e})(t,c.original))))))))));case E.OP_NESTED:return v.suspend((()=>q(e,R(t,r.of(c.name)),c.config,i)));case E.OP_PRIMITIVE:return(0,s.pipe)(w(t,e.patch),v.flatMap((t=>(0,s.pipe)(e.load(t,c,i),v.flatMap((e=>{if(0===e.length){const e=(0,s.pipe)(r.last(t),l.getOrElse((()=>"<n/a>")));return v.fail(h.MissingData([],`Expected ${c.description} with name ${e}`))}return v.succeed(e)}))))));case E.OP_SEQUENCE:return(0,s.pipe)(w(t,e.patch),v.flatMap((n=>(0,s.pipe)(e.enumerateChildren(n),v.flatMap(re),v.flatMap((i=>0===i.length?v.suspend((()=>v.map(q(e,n,c.config,!0),r.of))):(0,s.pipe)(v.forEachSequential(i,(n=>q(e,r.append(t,`[${n}]`),c.config,!0))),v.map((e=>{const t=r.flatten(e);return 0===t.length?r.of(r.empty()):r.of(t)})))))))));case E.OP_HASHMAP:return v.suspend((()=>(0,s.pipe)(w(t,e.patch),v.flatMap((t=>(0,s.pipe)(e.enumerateChildren(t),v.flatMap((n=>(0,s.pipe)(n,v.forEachSequential((n=>q(e,R(t,r.of(n)),c.valueConfig,i))),v.map((e=>0===e.length?r.of(o.empty()):(0,s.pipe)(ne(e),r.map((e=>o.fromIterable(r.zip(r.fromIterable(n),e))))))))))))))));case E.OP_ZIP_WITH:return v.suspend((()=>(0,s.pipe)(q(e,t,c.left,i),v.either,v.flatMap((n=>(0,s.pipe)(q(e,t,c.right,i),v.either,v.flatMap((e=>{if(a.isLeft(n)&&a.isLeft(e))return v.fail(h.And(n.left,e.left));if(a.isLeft(n)&&a.isRight(e))return v.fail(n.left);if(a.isRight(n)&&a.isLeft(e))return v.fail(e.left);if(a.isRight(n)&&a.isRight(e)){const i=(0,s.pipe)(t,r.join(".")),o=$(t,i),[u,f]=((e,t,n,i)=>{const a=r.unfold(n.length,(t=>t>=i.length?l.none():l.some([e(t),t+1]))),s=r.unfold(i.length,(e=>e>=n.length?l.none():l.some([t(e),e+1])));return[R(n,a),R(i,s)]})(o,o,(0,s.pipe)(n.right,r.map(a.right)),(0,s.pipe)(e.right,r.map(a.right)));return(0,s.pipe)(u,r.zip(f),v.forEachSequential((([e,t])=>(0,s.pipe)(v.zip(e,t),v.map((([e,t])=>c.zip(e,t)))))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))}},$=(e,t)=>n=>a.left(h.MissingData(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),W=(0,s.dual)(2,((e,t)=>U(z(e.flattened,t)))),z=(e,t)=>D({load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:t=>e.enumerateChildren(t),patch:y(e.patch,t)}),V=(0,s.dual)(2,((e,t)=>U(D({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:b(e.flattened.patch,t)})))),G=(0,s.dual)(2,((e,t)=>U(D({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:S(e.flattened.patch,t)})))),K=(0,s.dual)(2,((e,t)=>U(J(e.flattened,(()=>t().flattened))))),J=(e,t)=>D({load:(n,r,i)=>(0,s.pipe)(w(n,e.patch),v.flatMap((t=>e.load(t,r,i))),v.catchAll((e=>(0,s.pipe)(v.sync(t),v.flatMap((t=>(0,s.pipe)(w(n,t.patch),v.flatMap((e=>t.load(e,r,i))),v.catchAll((t=>v.fail(h.Or(e,t))))))))))),enumerateChildren:n=>(0,s.pipe)(w(n,e.patch),v.flatMap((t=>e.enumerateChildren(t))),v.either,v.flatMap((e=>(0,s.pipe)(v.sync(t),v.flatMap((t=>(0,s.pipe)(w(n,t.patch),v.flatMap((e=>t.enumerateChildren(e))),v.either,v.flatMap((t=>{if(a.isLeft(e)&&a.isLeft(t))return v.fail(h.And(e.left,t.left));if(a.isLeft(e)&&a.isRight(t))return v.succeed(t.right);if(a.isRight(e)&&a.isLeft(t))return v.succeed(e.right);if(a.isRight(e)&&a.isRight(t))return v.succeed((0,s.pipe)(e.right,c.union(t.right)));throw new Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))),patch:m}),H=e=>W(e,A),Y=e=>W(e,N),Z=e=>W(e,k),Q=e=>W(e,C),X=e=>W(e,x),ee=(0,s.dual)(3,((e,t,n)=>{const i=r.reduce(t,e,((e,t)=>G(e,t))),a=r.reduceRight(t,n(i),((e,t)=>V(e,t)));return K(a,(()=>e))})),te=(e,t,n,i,a)=>a?(0,s.pipe)(((e,t)=>e.split(new RegExp(`\\s*${d.escape(t)}\\s*`)))(e,i),v.forEachSequential((e=>n.parse(e.trim()))),v.mapError(h.prefixed(t))):(0,s.pipe)(n.parse(e),v.mapBoth({onFailure:h.prefixed(t),onSuccess:r.of})),ne=e=>Object.keys(e[0]).map((t=>e.map((e=>e[t])))),re=e=>(0,s.pipe)(v.forEachSequential(e,se),v.mapBoth({onFailure:()=>r.empty(),onSuccess:r.sort(u.Order)}),v.either,v.map(a.merge)),ie=/(^.+)(\[(\d+)\])$/,ae=/^(\[(\d+)\])$/,se=e=>{const t=e.match(ae);if(null!==t){const e=t[2];return(0,s.pipe)(void 0!==e&&e.length>0?l.some(e):l.none(),l.flatMap(ue))}return l.none()},oe=(e,t,n)=>{const i=new Map;for(const[a,o]of e){const e=(0,s.pipe)(t(a),r.flatMap((e=>l.match(ce(e),{onNone:()=>r.of(e),onSome:([e,t])=>r.make(e,`[${t}]`)}))));i.set(n(e),o)}return i},ce=e=>{const t=e.match(ie);if(null!==t){const e=t[1],n=t[3],r=void 0!==e&&e.length>0?l.some(e):l.none(),i=(0,s.pipe)(void 0!==n&&n.length>0?l.some(n):l.none(),l.flatMap(ue));return l.all([r,i])}return l.none()},ue=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?l.none():l.some(t)},le=e=>{const t=r.map(de(e),(([e,t])=>[fe(e).join("\ufeff"),t]));return B(new Map(t),{pathDelim:"\ufeff",seqDelim:"\ufeff"})},fe=e=>{const t=[];let n=0;for(;n<e.length;){const r=e[n];if("KeyName"===r._tag)if(n+1<e.length){const i=e[n+1];"KeyIndex"===i._tag?(t.push(`${r.name}[${i.index}]`),n+=2):(t.push(r.name),n+=1)}else t.push(r.name),n+=1}return t},de=e=>{const t=(e,t)=>"string"===typeof t?r.make([e,t]):"number"===typeof t||"boolean"===typeof t?r.make([e,String(t)]):r.isArray(t)?n(e,t):"object"===typeof t&&null!==t?i(e,t):r.empty(),n=(e,n)=>r.match(n,{onEmpty:()=>r.make([e,"<nil>"]),onNonEmpty:r.flatMap(((n,i)=>t(r.append(e,(e=>({_tag:"KeyIndex",index:e}))(i)),n)))}),i=(e,n)=>Object.entries(n).flatMap((([n,i])=>{const a=r.append(e,{_tag:"KeyName",name:n});const s=t(a,i);return r.isEmptyReadonlyArray(s)?r.make([a,""]):s}));return i(r.empty(),e)}},732706:(e,t,n)=>{n.r(t),n.d(t,{assert:()=>m,clear:()=>g,console:()=>l,consoleWith:()=>f,count:()=>y,countReset:()=>b,debug:()=>S,dir:()=>w,dirxml:()=>v,error:()=>E,group:()=>k,info:()=>x,log:()=>_,setConsole:()=>p,table:()=>I,time:()=>T,timeLog:()=>O,trace:()=>A,warn:()=>N,withConsole:()=>d,withConsoleScoped:()=>h,withGroup:()=>C,withTime:()=>R});var r=n(689702),i=n(361369),a=n(672620),s=n(344862),o=n(272572),c=n(860356),u=n(486881);const l=a.map(a.fiberRefGet(s.currentServices),r.get(o.consoleTag)),f=e=>a.fiberRefGetWith(s.currentServices,(t=>e(r.get(t,o.consoleTag)))),d=(0,i.dual)(2,((e,t)=>a.fiberRefLocallyWith(e,s.currentServices,r.add(o.consoleTag,t)))),h=e=>c.fiberRefLocallyScopedWith(s.currentServices,r.add(o.consoleTag,e)),p=e=>u.scopedDiscard(c.fiberRefLocallyScopedWith(s.currentServices,r.add(o.consoleTag,e))),m=(e,...t)=>f((n=>n.assert(e,...t))),g=f((e=>e.clear)),y=e=>f((t=>t.count(e))),b=e=>f((t=>t.countReset(e))),S=(...e)=>f((t=>t.debug(...e))),w=(e,t)=>f((n=>n.dir(e,t))),v=(...e)=>f((t=>t.dirxml(...e))),E=(...e)=>f((t=>t.error(...e))),k=e=>f((t=>c.acquireRelease(t.group(e),(()=>t.groupEnd)))),x=(...e)=>f((t=>t.info(...e))),_=(...e)=>f((t=>t.log(...e))),I=(e,t)=>f((n=>n.table(e,t))),T=e=>f((t=>c.acquireRelease(t.time(e),(()=>t.timeEnd(e))))),O=(e,...t)=>f((n=>n.timeLog(e,...t))),A=(...e)=>f((t=>t.trace(...e))),N=(...e)=>f((t=>t.warn(...e))),C=(0,i.dual)((e=>a.isEffect(e[0])),((e,t)=>f((n=>a.acquireUseRelease(n.group(t),(()=>e),(()=>n.groupEnd)))))),R=(0,i.dual)((e=>a.isEffect(e[0])),((e,t)=>f((n=>a.acquireUseRelease(n.time(t),(()=>e),(()=>n.timeEnd(t)))))))},883768:(e,t,n)=>{n.r(t),n.d(t,{ContextProto:()=>y,STMTypeId:()=>d,Tag:()=>m,TagProto:()=>h,TagTypeId:()=>f,TypeId:()=>g,add:()=>x,empty:()=>E,get:()=>I,getOption:()=>T,isContext:()=>S,isTag:()=>w,make:()=>k,makeContext:()=>b,makeGenericTag:()=>p,merge:()=>O,omit:()=>N,pick:()=>A,unsafeGet:()=>_});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(953533),c=n(856572),u=n(68498),l=n(8578);const f=Symbol.for("effect/Context/Tag"),d=Symbol.for("effect/STM"),h={...u.EffectPrototype,_tag:"Tag",_op:"Tag",[d]:u.effectVariance,[f]:{_Service:e=>e,_Identifier:e=>e},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[s.NodeInspectSymbol](){return this.toJSON()},of:e=>e,context(e){return k(this,e)}},p=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(h);return Object.defineProperty(r,"stack",{get:()=>n.stack}),r.key=e,r},m=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,h),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},g=Symbol.for("effect/Context"),y={[g]:{_Services:e=>e},[r.symbol](e){if(S(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!r.equals(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[a.symbol](){return a.cached(this,a.number(this.unsafeMap.size))},pipe(){return(0,o.pipeArguments)(this,arguments)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()}},b=e=>{const t=Object.create(y);return t.unsafeMap=e,t},S=e=>(0,c.hasProperty)(e,g),w=e=>(0,c.hasProperty)(e,f),v=b(new Map),E=()=>v,k=(e,t)=>b(new Map([[e.key,t]])),x=(0,i.dual)(3,((e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),b(r)})),_=(0,i.dual)(2,((e,t)=>{if(!e.unsafeMap.has(t.key))throw(e=>{const t=new Error("Service not found"+(e.key?`: ${String(e.key)}`:""));if(e.stack){const n=e.stack.split("\n");if(n.length>2){const e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){const e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t})(t);return e.unsafeMap.get(t.key)})),I=_,T=(0,i.dual)(2,((e,t)=>e.unsafeMap.has(t.key)?l.some(e.unsafeMap.get(t.key)):l.none)),O=(0,i.dual)(2,((e,t)=>{const n=new Map(e.unsafeMap);for(const[r,i]of t.unsafeMap)n.set(r,i);return b(n)})),A=(...e)=>t=>{const n=new Set(e.map((e=>e.key))),r=new Map;for(const[e,i]of t.unsafeMap.entries())n.has(e)&&r.set(e,i);return b(r)},N=(...e)=>t=>{const n=new Map(t.unsafeMap);for(const r of e)n.delete(r.key);return b(n)}},820808:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>J,_catch:()=>F,allowInterrupt:()=>z,annotateCurrentSpan:()=>zt,annotateLogs:()=>A,annotateSpans:()=>Vt,asSome:()=>N,asSomeError:()=>C,bind:()=>H,bindTo:()=>Y,catchAllDefect:()=>M,catchSomeCause:()=>L,catchSomeDefect:()=>P,catchTag:()=>D,catchTags:()=>U,cause:()=>j,clock:()=>q,clockWith:()=>B,contextWith:()=>ee,currentParentSpan:()=>Gt,currentSpan:()=>Kt,delay:()=>$,descriptor:()=>V,descriptorWith:()=>W,diffFiberRefs:()=>G,diffFiberRefsAndRuntimeFlags:()=>K,dropUntil:()=>Q,dropWhile:()=>X,endSpan:()=>en,eventually:()=>te,every:()=>he,fiberRefs:()=>ye,filterMap:()=>ne,filterOrDie:()=>re,filterOrDieMessage:()=>ie,filterOrElse:()=>ae,filterOrFail:()=>oe,findFirst:()=>ce,firstSuccessOf:()=>le,flipWith:()=>fe,forever:()=>me,fromNullable:()=>sn,functionWithSpan:()=>an,gen:()=>ge,head:()=>be,ignore:()=>Se,ignoreLogged:()=>we,inheritFiberRefs:()=>ve,isFailure:()=>Ee,isSuccess:()=>ke,iterate:()=>xe,labelMetrics:()=>ht,let_:()=>Z,liftPredicate:()=>se,linkSpans:()=>Jt,log:()=>Ie,logAnnotations:()=>Me,logDebug:()=>Oe,logError:()=>Ce,logFatal:()=>Re,logInfo:()=>Ae,logTrace:()=>Te,logWarning:()=>Ne,logWithLevel:()=>_e,loop:()=>Le,makeSpan:()=>Zt,mapAccum:()=>Ue,mapErrorCause:()=>je,match:()=>de,memoize:()=>Be,merge:()=>qe,negate:()=>$e,none:()=>We,once:()=>ze,option:()=>Ve,optionFromOptional:()=>on,orElseFail:()=>Ge,orElseSucceed:()=>Ke,parallelErrors:()=>Je,patchFiberRefs:()=>He,promise:()=>Ye,provideService:()=>Ze,provideServiceEffect:()=>Qe,random:()=>Xe,reduce:()=>et,reduceRight:()=>tt,reduceWhile:()=>nt,repeatN:()=>it,sandbox:()=>st,serviceConstants:()=>Bt,serviceFunction:()=>Ut,serviceFunctionEffect:()=>Dt,serviceFunctions:()=>jt,serviceMembers:()=>qt,serviceOption:()=>$t,serviceOptional:()=>Wt,setFiberRefs:()=>ot,sleep:()=>ct,spanAnnotations:()=>Qt,spanLinks:()=>Xt,succeedNone:()=>ut,succeedSome:()=>lt,summarized:()=>ft,tagMetrics:()=>dt,takeUntil:()=>pt,takeWhile:()=>mt,tapBoth:()=>gt,tapDefect:()=>yt,tapError:()=>bt,tapErrorCause:()=>wt,tapErrorTag:()=>St,timed:()=>vt,timedWith:()=>Et,tracer:()=>xt,tracerWith:()=>kt,tryMap:()=>It,tryMapPromise:()=>Tt,tryPromise:()=>_t,try_:()=>R,unless:()=>Ot,unlessEffect:()=>At,unsafeMakeSpan:()=>Yt,unsandbox:()=>Nt,updateFiberRefs:()=>Ct,updateService:()=>Rt,useSpan:()=>tn,when:()=>Ft,whenFiberRef:()=>Mt,whenRef:()=>Lt,withLogSpan:()=>Fe,withMetric:()=>Pt,withParentSpan:()=>nn,withSpan:()=>rn});var r=n(730276),i=n(630768),a=n(128420),s=n(131651),o=n(689702),c=n(284073),u=n(989105),l=n(361369),f=n(827964),d=n(227561),h=n(489425),p=n(934321),m=n(204971),g=n(977948),y=n(856572),b=n(55040),S=n(832028),w=n(908197),v=n(114969),E=n(672620),k=n(344862),x=n(91276),_=n(392538),I=n(458762),T=n(66932),O=n(127514);const A=(0,l.dual)((e=>E.isEffect(e[0])),(function(){const e=arguments;return E.fiberRefLocallyWith(e[0],E.currentLogAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),N=e=>E.map(e,g.some),C=e=>E.mapError(e,g.some),R=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),E.sync((()=>{try{return t()}catch(e){throw E.makeEffectError(w.fail(n?n(e):new E.UnknownException(e)))}}))},F=(0,l.dual)(3,((e,t,n)=>E.catchAll(e,(e=>y.hasProperty(e,t)&&e[t]===n.failure?n.onFailure(e):E.fail(e))))),M=(0,l.dual)(2,((e,t)=>E.catchAllCause(e,(e=>{const n=w.find(e,(e=>w.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return E.failCause(e);case"Some":return t(n.value.defect)}})))),L=(0,l.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>{const n=t(e);switch(n._tag){case"None":return E.failCause(e);case"Some":return n.value}},onSuccess:E.succeed}))),P=(0,l.dual)(2,((e,t)=>E.catchAllCause(e,(e=>{const n=w.find(e,(e=>w.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return E.failCause(e);case"Some":{const r=t(n.value.defect);return"Some"===r._tag?r.value:E.failCause(e)}}})))),D=(0,l.dual)(3,((e,t,n)=>E.catchIf(e,y.isTagged(t),n))),U=(0,l.dual)(2,((e,t)=>{let n;return E.catchIf(e,(e=>(n??=Object.keys(t),y.hasProperty(e,"_tag")&&y.isString(e._tag)&&n.includes(e._tag))),(e=>t[e._tag](e)))})),j=e=>E.matchCause(e,{onFailure:l.identity,onSuccess:()=>w.empty}),B=s.clockWith,q=B(E.succeed),$=(0,l.dual)(2,((e,t)=>E.zipRight(s.sleep(t),e))),W=e=>E.withFiberRuntime(((t,n)=>e({id:t.id(),status:n,interruptors:w.interruptors(t.getFiberRef(E.currentInterruptedCause))}))),z=W((e=>d.size(e.interruptors)>0?E.interrupt:E.void)),V=W(E.succeed),G=e=>ft(e,ye,_.diff),K=e=>ft(e,E.zip(ye,E.runtimeFlags),(([e,t],[n,r])=>[_.diff(e,n),T.diff(t,r)])),J=E.succeed({}),H=x.bind(E.map,E.flatMap),Y=x.bindTo(E.map),Z=x.let_(E.map),Q=(0,l.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>i?(r.push(e),E.succeed(!0)):t(e,n)))}return E.map(a,(()=>r))})))),X=(0,l.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>E.map(i?t(e,n):E.succeed(!1),(t=>(t||r.push(e),t)))))}return E.map(a,(()=>r))})))),ee=e=>E.map(E.context(),e),te=e=>E.orElse(e,(()=>E.flatMap(E.yieldNow(),(()=>te(e))))),ne=(0,l.dual)(2,((e,t)=>E.map(E.forEachSequential(e,l.identity),i.filterMap(t)))),re=(0,l.dual)(3,((e,t,n)=>ae(e,t,(e=>E.dieSync((()=>n(e))))))),ie=(0,l.dual)(3,((e,t,n)=>ae(e,t,(()=>E.dieMessage(n))))),ae=(0,l.dual)(3,((e,t,n)=>E.flatMap(e,(e=>t(e)?E.succeed(e):n(e))))),se=(0,l.dual)(3,((e,t,n)=>E.suspend((()=>t(e)?E.succeed(e):E.fail(n(e)))))),oe=(0,l.dual)((e=>E.isEffect(e[0])),((e,t,n)=>ae(e,t,(e=>void 0===n?E.fail(new E.NoSuchElementException):E.failSync((()=>n(e))))))),ce=(0,l.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=n.next();return r.done?E.succeed(g.none()):ue(n,0,t,r.value)})))),ue=(e,t,n,r)=>E.flatMap(n(r,t),(i=>{if(i)return E.succeed(g.some(r));const a=e.next();return a.done?E.succeed(g.none()):ue(e,t+1,n,a.value)})),le=e=>E.suspend((()=>{const t=a.fromIterable(e);return a.isNonEmpty(t)?(0,l.pipe)(a.tailNonEmpty(t),i.reduce(a.headNonEmpty(t),((e,t)=>E.orElse(e,(()=>t))))):E.dieSync((()=>new E.IllegalArgumentException("Received an empty collection of effects")))})),fe=(0,l.dual)(2,((e,t)=>E.flip(t(E.flip(e))))),de=(0,l.dual)(2,((e,t)=>E.matchEffect(e,{onFailure:e=>E.succeed(t.onFailure(e)),onSuccess:e=>E.succeed(t.onSuccess(e))}))),he=(0,l.dual)(2,((e,t)=>E.suspend((()=>pe(e[Symbol.iterator](),0,t))))),pe=(e,t,n)=>{const r=e.next();return r.done?E.succeed(!0):E.flatMap(n(r.value,t),(r=>r?pe(e,t+1,n):E.succeed(r)))},me=e=>{const t=E.flatMap(E.flatMap(e,(()=>E.yieldNow())),(()=>t));return t},ge=function(){let e;return e=1===arguments.length?arguments[0]:arguments[1].bind(arguments[0]),E.suspend((()=>{const t=e(l.pipe),n=(0,r.internalCall)((()=>t.next())),i=e=>e.done?E.succeed(e.value):E.flatMap((0,r.yieldWrapGet)(e.value),(e=>i((0,r.internalCall)((()=>t.next(e))))));return i(n)}))},ye=E.withFiberRuntime((e=>E.succeed(e.getFiberRefs()))),be=e=>E.flatMap(e,(e=>{const t=e[Symbol.iterator]().next();return t.done?E.fail(new E.NoSuchElementException):E.succeed(t.value)})),Se=e=>de(e,{onFailure:l.constVoid,onSuccess:l.constVoid}),we=e=>E.matchCauseEffect(e,{onFailure:e=>Oe(e,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>E.void}),ve=e=>Ct(((t,n)=>u.joinAs(n,t,e))),Ee=e=>de(e,{onFailure:l.constTrue,onSuccess:l.constFalse}),ke=e=>de(e,{onFailure:l.constFalse,onSuccess:l.constTrue}),xe=(e,t)=>E.suspend((()=>t.while(e)?E.flatMap(t.body(e),(e=>xe(e,t))):E.succeed(e))),_e=e=>(...t)=>{const n=g.fromNullable(e);let r;for(let e=0,i=t.length;e<i;e++){const n=t[e];w.isCause(n)&&(r=void 0!==r?w.sequential(r,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return void 0===r&&(r=w.empty),E.withFiberRuntime((e=>(e.log(t,r,n),E.void)))},Ie=_e(),Te=_e(p.Trace),Oe=_e(p.Debug),Ae=_e(p.Info),Ne=_e(p.Warning),Ce=_e(p.Error),Re=_e(p.Fatal),Fe=(0,l.dual)(2,((e,t)=>E.flatMap(s.currentTimeMillis,(n=>E.fiberRefLocallyWith(e,E.currentLogSpan,h.prepend(m.make(t,n))))))),Me=E.fiberRefGet(E.currentLogAnnotations),Le=(e,t)=>t.discard?De(e,t.while,t.step,t.body):E.map(Pe(e,t.while,t.step,t.body),i.fromIterable),Pe=(e,t,n,r)=>E.suspend((()=>t(e)?E.flatMap(r(e),(i=>E.map(Pe(n(e),t,n,r),h.prepend(i)))):E.sync((()=>h.empty())))),De=(e,t,n,r)=>E.suspend((()=>t(e)?E.flatMap(r(e),(()=>De(n(e),t,n,r))):E.void)),Ue=(0,l.dual)(3,((e,t,n)=>E.suspend((()=>{const r=e[Symbol.iterator](),i=[];let a,s=E.succeed(t),o=0;for(;!(a=r.next()).done;){const e=o++,t=a.value;s=E.flatMap(s,(r=>E.map(n(r,t,e),(([e,t])=>(i.push(t),e)))))}return E.map(s,(e=>[e,i]))})))),je=(0,l.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>E.failCauseSync((()=>t(e))),onSuccess:E.succeed}))),Be=e=>(0,l.pipe)(E.deferredMake(),E.flatMap((t=>(0,l.pipe)(K(e),E.intoDeferred(t),ze,E.map((e=>E.zipRight(e,(0,l.pipe)(E.deferredAwait(t),E.flatMap((([e,t])=>E.as(E.zip(He(e[0]),E.updateRuntimeFlags(e[1])),t))))))))))),qe=e=>E.matchEffect(e,{onFailure:e=>E.succeed(e),onSuccess:E.succeed}),$e=e=>E.map(e,(e=>!e)),We=e=>E.flatMap(e,(e=>{switch(e._tag){case"None":return E.void;case"Some":return E.fail(new E.NoSuchElementException)}})),ze=e=>E.map(b.make(!0),(t=>E.asVoid(E.whenEffect(e,b.getAndSet(t,!1))))),Ve=e=>E.matchEffect(e,{onFailure:()=>E.succeed(g.none()),onSuccess:e=>E.succeed(g.some(e))}),Ge=(0,l.dual)(2,((e,t)=>E.orElse(e,(()=>E.failSync(t))))),Ke=(0,l.dual)(2,((e,t)=>E.orElse(e,(()=>E.sync(t))))),Je=e=>E.matchCauseEffect(e,{onFailure:e=>{const t=i.fromIterable(w.failures(e));return 0===t.length?E.failCause(e):E.fail(t)},onSuccess:E.succeed}),He=e=>Ct(((t,n)=>(0,l.pipe)(e,_.patch(t,n)))),Ye=e=>e.length>=1?E.async(((t,n)=>{e(n).then((e=>t(E.exitSucceed(e))),(e=>t(E.exitDie(e))))})):E.async((t=>{e().then((e=>t(E.exitSucceed(e))),(e=>t(E.exitDie(e))))})),Ze=(0,l.dual)(3,((e,t,n)=>E.contextWithEffect((r=>E.provideContext(e,o.add(r,t,n)))))),Qe=(0,l.dual)(3,((e,t,n)=>E.contextWithEffect((r=>E.flatMap(n,(n=>E.provideContext(e,(0,l.pipe)(r,o.add(t,n))))))))),Xe=k.randomWith(E.succeed),et=(0,l.dual)(3,((e,t,n)=>i.fromIterable(e).reduce(((e,t,r)=>E.flatMap(e,(e=>n(e,t,r)))),E.succeed(t)))),tt=(0,l.dual)(3,((e,t,n)=>i.fromIterable(e).reduceRight(((e,t,r)=>E.flatMap(e,(e=>n(t,e,r)))),E.succeed(t)))),nt=(0,l.dual)(3,((e,t,n)=>E.flatMap(E.sync((()=>e[Symbol.iterator]())),(e=>rt(e,0,t,n.while,n.body))))),rt=(e,t,n,r,i)=>{const a=e.next();return!a.done&&r(n)?E.flatMap(i(n,a.value,t),(n=>rt(e,t+1,n,r,i))):E.succeed(n)},it=(0,l.dual)(2,((e,t)=>E.suspend((()=>at(e,t))))),at=(e,t)=>E.flatMap(e,(n=>t<=0?E.succeed(n):E.zipRight(E.yieldNow(),at(e,t-1)))),st=e=>E.matchCauseEffect(e,{onFailure:E.fail,onSuccess:E.succeed}),ot=e=>E.suspend((()=>u.setAll(e))),ct=s.sleep,ut=E.succeed(g.none()),lt=e=>E.succeed(g.some(e)),ft=(0,l.dual)(3,((e,t,n)=>E.flatMap(t,(r=>E.flatMap(e,(e=>E.map(t,(t=>[n(r,t),e])))))))),dt=(0,l.dual)((e=>E.isEffect(e[0])),(function(){return ht(arguments[0],"string"===typeof arguments[1]?[I.make(arguments[1],arguments[2])]:Object.entries(arguments[1]).map((([e,t])=>I.make(e,t))))})),ht=(0,l.dual)(2,((e,t)=>E.fiberRefLocallyWith(e,E.currentMetricLabels,(e=>i.union(e,t))))),pt=(0,l.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>i?E.succeed(!0):(r.push(e),t(e,n))))}return E.map(a,(()=>r))})))),mt=(0,l.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>(0,l.pipe)(i?t(e,n):E.succeed(!1),E.map((t=>(t&&r.push(e),t))))))}return E.map(a,(()=>r))})))),gt=(0,l.dual)(2,((e,{onFailure:t,onSuccess:n})=>E.matchCauseEffect(e,{onFailure:e=>{const n=w.failureOrCause(e);switch(n._tag){case"Left":return E.zipRight(t(n.left),E.failCause(e));case"Right":return E.failCause(e)}},onSuccess:e=>E.as(n(e),e)}))),yt=(0,l.dual)(2,((e,t)=>E.catchAllCause(e,(e=>g.match(w.keepDefects(e),{onNone:()=>E.failCause(e),onSome:n=>E.zipRight(t(n),E.failCause(e))}))))),bt=(0,l.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>{const n=w.failureOrCause(e);switch(n._tag){case"Left":return E.zipRight(t(n.left),E.failCause(e));case"Right":return E.failCause(e)}},onSuccess:E.succeed}))),St=(0,l.dual)(3,((e,t,n)=>bt(e,(e=>y.isTagged(e,t)?n(e):E.void)))),wt=(0,l.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>E.zipRight(t(e),E.failCause(e)),onSuccess:E.succeed}))),vt=e=>Et(e,s.currentTimeNanos),Et=(0,l.dual)(2,((e,t)=>ft(e,t,((e,t)=>c.nanos(t-e))))),kt=S.tracerWith,xt=kt(E.succeed),_t=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),t.length>=1?E.async(((e,r)=>{try{t(r).then((t=>e(E.exitSucceed(t))),(t=>e(E.fail(n?n(t):new E.UnknownException(t)))))}catch(i){e(E.fail(n?n(i):new E.UnknownException(i)))}})):E.async((e=>{try{t().then((t=>e(E.exitSucceed(t))),(t=>e(E.fail(n?n(t):new E.UnknownException(t)))))}catch(r){e(E.fail(n?n(r):new E.UnknownException(r)))}}))},It=(0,l.dual)(2,((e,t)=>E.flatMap(e,(e=>R({try:()=>t.try(e),catch:t.catch}))))),Tt=(0,l.dual)(2,((e,t)=>E.flatMap(e,(e=>_t({try:t.try.length>=1?n=>t.try(e,n):()=>t.try(e),catch:t.catch}))))),Ot=(0,l.dual)(2,((e,t)=>E.suspend((()=>t()?ut:N(e))))),At=(0,l.dual)(2,((e,t)=>E.flatMap(t,(t=>t?ut:N(e))))),Nt=e=>je(e,w.flatten),Ct=e=>E.withFiberRuntime((t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),E.void))),Rt=(0,l.dual)(3,((e,t,n)=>E.mapInputContext(e,(e=>o.add(e,t,n(o.unsafeGet(e,t))))))),Ft=(0,l.dual)(2,((e,t)=>E.suspend((()=>t()?E.map(e,g.some):E.succeed(g.none()))))),Mt=(0,l.dual)(3,((e,t,n)=>E.flatMap(E.fiberRefGet(t),(t=>n(t)?E.map(e,(e=>[t,g.some(e)])):E.succeed([t,g.none()]))))),Lt=(0,l.dual)(3,((e,t,n)=>E.flatMap(b.get(t),(t=>n(t)?E.map(e,(e=>[t,g.some(e)])):E.succeed([t,g.none()]))))),Pt=(0,l.dual)(2,((e,t)=>t(e))),Dt=(e,t)=>(...n)=>E.flatMap(e,(e=>t(e)(...n))),Ut=(e,t)=>(...n)=>E.map(e,(e=>t(e)(...n))),jt=e=>new Proxy({},{get:(t,n,r)=>(...t)=>E.flatMap(e,(e=>e[n](...t)))}),Bt=e=>new Proxy({},{get:(t,n,r)=>E.flatMap(e,(e=>E.isEffect(e[n])?e[n]:E.succeed(e[n])))}),qt=e=>({functions:jt(e),constants:Bt(e)}),$t=e=>E.map(E.context(),o.getOption(e)),Wt=e=>E.flatMap(E.context(),o.getOption(e)),zt=function(){const e=arguments;return Se(E.flatMap(Kt,(t=>E.sync((()=>{if("string"===typeof e[0])t.attribute(e[0],e[1]);else for(const n in e[0])t.attribute(n,e[0][n])})))))},Vt=(0,l.dual)((e=>E.isEffect(e[0])),(function(){const e=arguments;return E.fiberRefLocallyWith(e[0],E.currentTracerSpanAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),Gt=Wt(O.spanTag),Kt=E.flatMap(E.context(),(e=>{const t=e.unsafeMap.get(O.spanTag.key);return void 0!==t&&"Span"===t._tag?E.succeed(t):E.fail(new E.NoSuchElementException)})),Jt=(0,l.dual)((e=>E.isEffect(e[0])),((e,t,n)=>E.fiberRefLocallyWith(e,E.currentTracerSpanLinks,a.append({_tag:"SpanLink",span:t,attributes:n??{}})))),Ht=BigInt(0),Yt=(e,t,n)=>{if(!1===e.getFiberRef(E.currentTracerEnabled))return E.noopSpan(t);const r=e.getFiberRef(E.currentContext),c=e.getFiberRef(k.currentServices),l=o.get(c,O.tracerTag),d=o.get(c,s.Clock),h=e.getFiberRef(E.currentTracerTimingEnabled),p=e.getFiberRefs(),m=u.get(p,E.currentTracerSpanAnnotations),y=u.get(p,E.currentTracerSpanLinks),b=n.parent?g.some(n.parent):n.root?g.none():o.getOption(r,O.spanTag),S="Some"===y._tag?void 0!==n.links?[...a.toReadonlyArray(y.value),...n.links??[]]:a.toReadonlyArray(y.value):n.links??i.empty(),v=l.span(t,b,n.context??o.empty(),S,h?d.unsafeCurrentTimeNanos():Ht,n.kind??"internal");return"function"===typeof n.captureStackTrace&&w.spanToTrace.set(v,n.captureStackTrace),"Some"===m._tag&&f.forEach(m.value,((e,t)=>v.attribute(t,e))),void 0!==n.attributes&&Object.entries(n.attributes).forEach((([e,t])=>v.attribute(e,t))),v},Zt=(e,t)=>(t=O.addSpanStackTrace(t),E.withFiberRuntime((n=>E.succeed(Yt(n,e,t))))),Qt=E.fiberRefGet(E.currentTracerSpanAnnotations),Xt=E.fiberRefGet(E.currentTracerSpanLinks),en=(e,t,n,r)=>E.sync((()=>{"Ended"!==e.status._tag&&(E.exitIsFailure(t)&&w.spanToTrace.has(e)&&e.attribute("code.stacktrace",w.spanToTrace.get(e)()),e.end(r?n.unsafeCurrentTimeNanos():Ht,t))})),tn=(e,...t)=>{const n=O.addSpanStackTrace(1===t.length?void 0:t[0]),r=t[t.length-1];return E.withFiberRuntime((t=>{const i=Yt(t,e,n),a=t.getFiberRef(E.currentTracerTimingEnabled),s=o.get(t.getFiberRef(k.currentServices),v.clockTag);return E.onExit(r(i),(e=>en(i,e,s,a)))}))},nn=(0,l.dual)(2,((e,t)=>Ze(e,O.spanTag,t))),rn=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=O.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return tn(t,n,(t=>nn(e,t)))}return e=>tn(t,n,(t=>nn(e,t)))},an=e=>function(){let t=e.captureStackTrace??!1;if(!1!==e.captureStackTrace){const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;let r=!1;t=()=>{if(!1!==r)return r;if(n.stack){const e=n.stack.trim().split("\n");return r=e.slice(2).join("\n").trim(),r}}}return E.suspend((()=>{const n="function"===typeof e.options?e.options.apply(null,arguments):e.options;return rn(E.suspend((()=>(0,r.internalCall)((()=>e.body.apply(this,arguments))))),n.name,{...n,captureStackTrace:t})}))},sn=e=>null==e?E.fail(new E.NoSuchElementException):E.succeed(e),on=e=>E.catchAll(E.map(e,g.some),(e=>E.isNoSuchElementException(e)?ut:E.fail(e)))},672620:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>xn,EffectErrorTypeId:()=>F,EffectTypeId:()=>U,ExceededCapacityException:()=>Jn,ExceededCapacityExceptionTypeId:()=>Kn,FiberRefTypeId:()=>_t,IllegalArgumentException:()=>Bn,IllegalArgumentExceptionTypeId:()=>jn,InterruptedException:()=>Dn,InterruptedExceptionTypeId:()=>Pn,InvalidPubSubCapacityException:()=>Gn,InvalidPubSubCapacityExceptionTypeId:()=>Vn,NoSuchElementException:()=>Wn,NoSuchElementExceptionTypeId:()=>$n,RequestResolverImpl:()=>Wt,RequestResolverTypeId:()=>qt,RevertFlags:()=>j,RuntimeException:()=>Mn,RuntimeExceptionTypeId:()=>Fn,ScopeTypeId:()=>kn,TimeoutException:()=>Qn,TimeoutExceptionTypeId:()=>Zn,UnknownException:()=>nr,UnknownExceptionTypeId:()=>tr,YieldableError:()=>Cn,acquireUseRelease:()=>V,allLogLevels:()=>xt,andThen:()=>be,as:()=>G,asVoid:()=>K,async:()=>Y,attemptOrElse:()=>He,blocked:()=>P,catchAll:()=>Q,catchAllCause:()=>Z,catchIf:()=>X,catchSome:()=>ee,causeSquash:()=>An,causeSquashWith:()=>Nn,checkInterruptible:()=>te,context:()=>ci,contextWith:()=>ui,contextWithEffect:()=>li,currentConcurrency:()=>fn,currentContext:()=>nn,currentForkScopeOverride:()=>yn,currentInterruptedCause:()=>bn,currentLogAnnotations:()=>sn,currentLogLevel:()=>on,currentLogSpan:()=>cn,currentMaxOpsBeforeYield:()=>an,currentMetricLabels:()=>mn,currentRequestBatching:()=>dn,currentSchedulingPriority:()=>rn,currentSpanFromFiber:()=>pi,currentTracerEnabled:()=>Sn,currentTracerSpanAnnotations:()=>vn,currentTracerSpanLinks:()=>En,currentTracerTimingEnabled:()=>wn,currentUnhandledErrorLogLevel:()=>hn,custom:()=>J,deferredAwait:()=>Wr,deferredComplete:()=>zr,deferredCompleteWith:()=>Vr,deferredDie:()=>Zr,deferredDieSync:()=>Qr,deferredDone:()=>Gr,deferredFail:()=>Kr,deferredFailCause:()=>Hr,deferredFailCauseSync:()=>Yr,deferredFailSync:()=>Jr,deferredInterrupt:()=>Xr,deferredInterruptWith:()=>ei,deferredIsDone:()=>ti,deferredMake:()=>qr,deferredMakeAs:()=>$r,deferredPoll:()=>ni,deferredSucceed:()=>ri,deferredSync:()=>ii,deferredUnsafeDone:()=>ai,deferredUnsafeMake:()=>Br,die:()=>se,dieMessage:()=>oe,dieSync:()=>ce,either:()=>ue,exit:()=>le,exitAs:()=>cr,exitAsVoid:()=>ur,exitCauseOption:()=>lr,exitCollectAll:()=>fr,exitDie:()=>dr,exitExists:()=>hr,exitFail:()=>pr,exitFailCause:()=>mr,exitFlatMap:()=>gr,exitFlatMapEffect:()=>yr,exitFlatten:()=>br,exitForEachEffect:()=>Sr,exitFromEither:()=>wr,exitFromOption:()=>vr,exitGetOrElse:()=>Er,exitInterrupt:()=>kr,exitIsExit:()=>ir,exitIsFailure:()=>ar,exitIsInterrupted:()=>or,exitIsSuccess:()=>sr,exitMap:()=>xr,exitMapBoth:()=>_r,exitMapError:()=>Ir,exitMapErrorCause:()=>Tr,exitMatch:()=>Or,exitMatchEffect:()=>Ar,exitSucceed:()=>Nr,exitVoid:()=>Cr,exitZip:()=>Rr,exitZipLeft:()=>Fr,exitZipPar:()=>Lr,exitZipParLeft:()=>Pr,exitZipParRight:()=>Dr,exitZipRight:()=>Mr,exitZipWith:()=>Ur,fail:()=>fe,failCause:()=>he,failCauseSync:()=>pe,failSync:()=>de,fiberId:()=>me,fiberIdWith:()=>ge,fiberRefDelete:()=>Ft,fiberRefGet:()=>Tt,fiberRefGetAndSet:()=>Ot,fiberRefGetAndUpdate:()=>At,fiberRefGetAndUpdateSome:()=>Nt,fiberRefGetWith:()=>Ct,fiberRefLocally:()=>Jt,fiberRefLocallyWith:()=>Ht,fiberRefModify:()=>Lt,fiberRefModifySome:()=>Pt,fiberRefReset:()=>Mt,fiberRefSet:()=>Rt,fiberRefUnsafeMake:()=>Yt,fiberRefUnsafeMakeContext:()=>Xt,fiberRefUnsafeMakeHashSet:()=>Zt,fiberRefUnsafeMakePatch:()=>en,fiberRefUnsafeMakeReadonlyArray:()=>Qt,fiberRefUnsafeMakeRuntimeFlags:()=>tn,fiberRefUpdate:()=>Dt,fiberRefUpdateAndGet:()=>jt,fiberRefUpdateSome:()=>Ut,fiberRefUpdateSomeAndGet:()=>Bt,flatMap:()=>ye,flatten:()=>we,flip:()=>ve,forEachSequential:()=>_e,forEachSequentialDiscard:()=>Ie,if_:()=>Te,interrupt:()=>Oe,interruptAsFiber:()=>mt,interruptFiber:()=>pt,interruptWith:()=>Ae,interruptible:()=>Ne,interruptibleMask:()=>Ce,intoDeferred:()=>Re,isEffect:()=>W,isEffectError:()=>M,isExceededCapacityException:()=>Hn,isIllegalArgumentException:()=>qn,isInterruptedException:()=>Un,isInvalidCapacityError:()=>Yn,isNoSuchElementException:()=>zn,isRequestResolver:()=>zt,isRuntimeException:()=>Ln,isTimeoutException:()=>er,isUnknownException:()=>rr,logLevelAll:()=>gt,logLevelDebug:()=>vt,logLevelError:()=>bt,logLevelFatal:()=>yt,logLevelInfo:()=>wt,logLevelNone:()=>kt,logLevelTrace:()=>Et,logLevelWarning:()=>St,makeEffectError:()=>L,map:()=>Fe,mapBoth:()=>Me,mapError:()=>Le,mapInputContext:()=>hi,matchCause:()=>Ee,matchCauseEffect:()=>ke,matchEffect:()=>xe,metricLabels:()=>gn,never:()=>ht,noopSpan:()=>gi,onError:()=>Pe,onExit:()=>De,onInterrupt:()=>Ue,orDie:()=>Be,orDieWith:()=>qe,orElse:()=>je,originalInstance:()=>ie,partitionMap:()=>$e,provideContext:()=>fi,provideSomeContext:()=>di,requestBlockLocally:()=>Gt,resolverLocally:()=>Vt,runRequestBlock:()=>D,runtimeFlags:()=>We,scopeAddFinalizer:()=>_n,scopeAddFinalizerExit:()=>In,scopeClose:()=>Tn,scopeFork:()=>On,step:()=>Se,succeed:()=>ze,suspend:()=>Ve,sync:()=>Ge,tap:()=>Ke,timeoutExceptionFromDuration:()=>Xn,transplant:()=>Je,uninterruptible:()=>Ye,uninterruptibleMask:()=>Ze,unsafeAsync:()=>H,updateRuntimeFlags:()=>Xe,void:()=>Qe,whenEffect:()=>et,whileLoop:()=>tt,withConcurrency:()=>nt,withFiberRuntime:()=>z,withMaxOpsBeforeYield:()=>ln,withRequestBatching:()=>rt,withRuntimeFlags:()=>it,withSchedulingPriority:()=>un,withTracerEnabled:()=>at,withTracerTiming:()=>st,withUnhandledErrorLogLevel:()=>pn,yieldNow:()=>ot,zip:()=>ct,zipFlatten:()=>ut,zipLeft:()=>lt,zipRight:()=>ft,zipWith:()=>dt});var r=n(730276),i=n(630768),a=n(128420),s=n(689702),o=n(284073),c=n(757964),u=n(43977),l=n(295602),f=n(361369),d=n(606517),h=n(367337),p=n(827964),m=n(883845),g=n(489425),y=n(645914),b=n(977948),S=n(953533),w=n(856572),v=n(128202),E=n(668481),k=n(908197),x=n(304080),_=n(245779),I=n(68498),T=n(94732),O=n(127576),A=n(889706),N=n(66932),C=n(238961),R=n(127514);const F=Symbol.for("effect/EffectError"),M=e=>(0,w.hasProperty)(e,F),L=e=>({[F]:F,_tag:"EffectError",cause:e}),P=(e,t)=>{const n=new B("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},D=e=>{const t=new B("RunBlocked");return t.effect_instruction_i0=e,t},U=Symbol.for("effect/Effect");class j{patch;op;_op=A.OP_REVERT_FLAGS;constructor(e,t){this.patch=e,this.op=t}}class B{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e}[u.symbol](e){return this===e}[h.symbol](){return h.cached(this,h.random(this))}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:(0,m.toJSON)(this.effect_instruction_i0),effect_instruction_i1:(0,m.toJSON)(this.effect_instruction_i1),effect_instruction_i2:(0,m.toJSON)(this.effect_instruction_i2)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new C.SingleShotGen(new r.YieldWrap(this))}}class q{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[u.symbol](e){return ir(e)&&"Failure"===e._op&&u.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[h.symbol](){return(0,f.pipe)(h.string(this._tag),h.combine(h.hash(this.effect_instruction_i0)),h.cached(this))}get cause(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new C.SingleShotGen(new r.YieldWrap(this))}}class ${_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[u.symbol](e){return ir(e)&&"Success"===e._op&&u.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[h.symbol](){return(0,f.pipe)(h.string(this._tag),h.combine(h.hash(this.effect_instruction_i0)),h.cached(this))}get value(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:(0,m.toJSON)(this.value)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new C.SingleShotGen(new r.YieldWrap(this))}}const W=e=>(0,w.hasProperty)(e,U),z=e=>{const t=new B(A.OP_WITH_RUNTIME);return t.effect_instruction_i0=e,t},V=(0,f.dual)(3,((e,t,n)=>Ze((r=>ye(e,(e=>ye(le(Ve((()=>r(t(e))))),(t=>Ve((()=>n(e,t))).pipe(ke({onFailure:e=>{switch(t._tag){case A.OP_FAILURE:return he(k.parallel(t.effect_instruction_i0,e));case A.OP_SUCCESS:return he(e)}},onSuccess:()=>t})))))))))),G=(0,f.dual)(2,((e,t)=>ye(e,(()=>ze(t))))),K=e=>G(e,void 0),J=function(){const e=new B(A.OP_COMMIT);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw new Error((0,T.getBugErrorMessage)("you're not supposed to end up here"))}return e},H=(e,t=l.none)=>{const n=new B(A.OP_ASYNC);let r;return n.effect_instruction_i0=t=>{r=e(t)},n.effect_instruction_i1=t,void 0!==r?Ue(n,(e=>r)):n},Y=(e,t=l.none)=>J(e,(function(){let e,n;function i(t){e?e(t):void 0===n&&(n=t)}const a=new B(A.OP_ASYNC);let s,o;return a.effect_instruction_i0=t=>{e=t,n&&t(n)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(o=new AbortController,s=(0,r.internalCall)((()=>this.effect_instruction_i0(i,o.signal)))):s=(0,r.internalCall)((()=>this.effect_instruction_i0(i))),s||o?Ue(a,(e=>(o&&o.abort(),s??Qe))):a})),Z=(0,f.dual)(2,((e,t)=>{const n=new B(A.OP_ON_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),Q=(0,f.dual)(2,((e,t)=>xe(e,{onFailure:t,onSuccess:ze}))),X=(0,f.dual)(3,((e,t,n)=>Z(e,(e=>{const r=k.failureOrCause(e);switch(r._tag){case"Left":return t(r.left)?n(r.left):he(e);case"Right":return he(r.right)}})))),ee=(0,f.dual)(2,((e,t)=>Z(e,(e=>{const n=k.failureOrCause(e);switch(n._tag){case"Left":return(0,f.pipe)(t(n.left),b.getOrElse((()=>he(e))));case"Right":return he(n.right)}})))),te=e=>z(((t,n)=>e(N.interruption(n.runtimeFlags)))),ne=Symbol.for("effect/SpanAnnotation"),re=Symbol.for("effect/OriginalAnnotation"),ie=e=>(0,w.hasProperty)(e,re)?e[re]:e,ae=(e,t)=>b.isSome(t)?new Proxy(e,{has:(e,t)=>t===ne||t===re||t in e,get:(n,r)=>r===ne?t.value:r===re?e:n[r]}):e,se=e=>(0,w.isObject)(e)&&!(ne in e)?z((t=>he(k.die(ae(e,pi(t)))))):he(k.die(e)),oe=e=>pe((()=>k.die(new Mn(e)))),ce=e=>ye(Ge(e),se),ue=e=>xe(e,{onFailure:e=>ze(c.left(e)),onSuccess:e=>ze(c.right(e))}),le=e=>Ee(e,{onFailure:mr,onSuccess:Nr}),fe=e=>(0,w.isObject)(e)&&!(ne in e)?z((t=>he(k.fail(ae(e,pi(t)))))):he(k.fail(e)),de=e=>ye(Ge(e),fe),he=e=>{const t=new q(A.OP_FAILURE);return t.effect_instruction_i0=e,t},pe=e=>ye(Ge(e),he),me=z((e=>ze(e.id()))),ge=e=>z((t=>e(t.id()))),ye=(0,f.dual)(2,((e,t)=>{const n=new B(A.OP_ON_SUCCESS);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),be=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return W(n)?n:(0,w.isPromiseLike)(n)?Y((e=>{n.then((t=>e(ze(t))),(t=>e(fe(new nr(t)))))})):ze(n)})))),Se=e=>{const t=new B("OnStep");return t.effect_instruction_i0=e,t},we=e=>ye(e,f.identity),ve=e=>xe(e,{onFailure:ze,onSuccess:fe}),Ee=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>ze(t.onFailure(e)),onSuccess:e=>ze(t.onSuccess(e))}))),ke=(0,f.dual)(2,((e,t)=>{const n=new B(A.OP_ON_SUCCESS_AND_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n})),xe=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>{if(k.defects(e).length>0)return he(k.electFailures(e));const n=k.failures(e);return n.length>0?t.onFailure(a.unsafeHead(n)):he(e)},onSuccess:t.onSuccess}))),_e=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e),r=i.allocate(n.length);let a=0;return G(tt({while:()=>a<n.length,body:()=>t(n[a],a),step:e=>{r[a++]=e}}),r)})))),Ie=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e);let r=0;return tt({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})))),Te=(0,f.dual)((e=>"boolean"===typeof e[0]||W(e[0])),((e,t)=>W(e)?ye(e,(e=>e?t.onTrue():t.onFalse())):e?t.onTrue():t.onFalse())),Oe=ye(me,(e=>Ae(e))),Ae=e=>he(k.interrupt(e)),Ne=e=>{const t=new B(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=v.enable(N.Interruption),t.effect_instruction_i1=()=>e,t},Ce=e=>J(e,(function(){const e=new B(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=v.enable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Re=(0,f.dual)(2,((e,t)=>Ze((n=>ye(le(n(e)),(e=>Gr(t,e))))))),Fe=(0,f.dual)(2,((e,t)=>ye(e,(e=>Ge((()=>t(e))))))),Me=(0,f.dual)(2,((e,t)=>xe(e,{onFailure:e=>de((()=>t.onFailure(e))),onSuccess:e=>Ge((()=>t.onSuccess(e)))}))),Le=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>{const n=k.failureOrCause(e);switch(n._tag){case"Left":return de((()=>t(n.left)));case"Right":return he(n.right)}},onSuccess:ze}))),Pe=(0,f.dual)(2,((e,t)=>De(e,(e=>sr(e)?Qe:t(e.effect_instruction_i0))))),De=(0,f.dual)(2,((e,t)=>Ze((n=>ke(n(e),{onFailure:e=>{const n=mr(e);return ke(t(n),{onFailure:t=>mr(k.sequential(e,t)),onSuccess:()=>n})},onSuccess:e=>{const n=Nr(e);return ft(t(n),n)}}))))),Ue=(0,f.dual)(2,((e,t)=>De(e,Or({onFailure:e=>k.isInterruptedOnly(e)?K(t(k.interruptors(e))):Qe,onSuccess:()=>Qe})))),je=(0,f.dual)(2,((e,t)=>He(e,t,ze))),Be=e=>qe(e,f.identity),qe=(0,f.dual)(2,((e,t)=>xe(e,{onFailure:e=>se(t(e)),onSuccess:ze}))),$e=(e,t)=>i.fromIterable(e).reduceRight((([e,n],r)=>{const i=t(r);switch(i._tag){case"Left":return[[i.left,...e],n];case"Right":return[e,[i.right,...n]]}}),[i.empty(),i.empty()]),We=z(((e,t)=>ze(t.runtimeFlags))),ze=e=>{const t=new $(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Ve=e=>ye(Ge(e),f.identity),Ge=e=>{const t=new B(A.OP_SYNC);return t.effect_instruction_i0=e,t},Ke=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return W(n)?G(n,e):(0,w.isPromiseLike)(n)?Y((t=>{n.then((n=>t(ze(e))),(e=>t(fe(new nr(e)))))})):ze(e)})))),Je=e=>z((t=>{const n=t.getFiberRef(yn),r=(0,f.pipe)(n,b.getOrElse((()=>t.scope())));return e(Jt(yn,b.some(r)))})),He=(0,f.dual)(3,((e,t,n)=>ke(e,{onFailure:e=>k.defects(e).length>0?he(b.getOrThrow(k.keepDefectsAndElectFailures(e))):t(),onSuccess:n}))),Ye=e=>{const t=new B(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=v.disable(N.Interruption),t.effect_instruction_i1=()=>e,t},Ze=e=>J(e,(function(){const e=new B(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=v.disable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Qe=ze(void 0),Xe=e=>{const t=new B(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},et=(0,f.dual)(2,((e,t)=>ye(t,(t=>t?(0,f.pipe)(e,Fe(b.some)):ze(b.none()))))),tt=e=>{const t=new B(A.OP_WHILE);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},nt=(0,f.dual)(2,((e,t)=>Jt(e,fn,t))),rt=(0,f.dual)(2,((e,t)=>Jt(e,dn,t))),it=(0,f.dual)(2,((e,t)=>{const n=new B(A.OP_UPDATE_RUNTIME_FLAGS);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n})),at=(0,f.dual)(2,((e,t)=>Jt(e,Sn,t))),st=(0,f.dual)(2,((e,t)=>Jt(e,wn,t))),ot=e=>{const t=new B(A.OP_YIELD);return"undefined"!==typeof e?.priority?un(t,e.priority):t},ct=(0,f.dual)(2,((e,t)=>ye(e,(e=>Fe(t,(t=>[e,t])))))),ut=(0,f.dual)(2,((e,t)=>ye(e,(e=>Fe(t,(t=>[...e,t])))))),lt=(0,f.dual)(2,((e,t)=>ye(e,(e=>G(t,e))))),ft=(0,f.dual)(2,((e,t)=>ye(e,(()=>t)))),dt=(0,f.dual)(3,((e,t,n)=>ye(e,(e=>Fe(t,(t=>n(e,t))))))),ht=Y((()=>{const e=setInterval((()=>{}),2**31-1);return Ge((()=>clearInterval(e)))})),pt=e=>ye(me,(t=>(0,f.pipe)(e,mt(t)))),mt=(0,f.dual)(2,((e,t)=>ye(e.interruptAsFork(t),(()=>e.await)))),gt={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},yt={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},bt={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},St={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},wt={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},vt={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},Et={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return(0,S.pipeArguments)(this,arguments)}},kt={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},xt=[gt,Et,vt,wt,St,bt,yt,kt],_t=Symbol.for("effect/FiberRef"),It={_A:e=>e},Tt=e=>Lt(e,(e=>[e,e])),Ot=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t])))),At=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t(e)])))),Nt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,b.getOrElse(t(e),(()=>e))])))),Ct=(0,f.dual)(2,((e,t)=>ye(Tt(e),t))),Rt=(0,f.dual)(2,((e,t)=>Lt(e,(()=>[void 0,t])))),Ft=e=>z((t=>(t.unsafeDeleteFiberRef(e),Qe))),Mt=e=>Rt(e,e.initial),Lt=(0,f.dual)(2,((e,t)=>z((n=>{const[r,i]=t(n.getFiberRef(e));return n.setFiberRef(e,i),ze(r)})))),Pt=(e,t,n)=>Lt(e,(e=>b.getOrElse(n(e),(()=>[t,e])))),Dt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,t(e)])))),Ut=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,b.getOrElse(t(e),(()=>e))])))),jt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=t(e);return[n,n]})))),Bt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=b.getOrElse(t(e),(()=>e));return[n,n]})))),qt=Symbol.for("effect/RequestResolver"),$t={_A:e=>e,_R:e=>e};class Wt{runAll;target;[qt]=$t;constructor(e,t){this.runAll=e,this.target=t}[h.symbol](){return h.cached(this,this.target?h.hash(this.target):h.random(this))}[u.symbol](e){return this.target?zt(e)&&u.equals(this.target,e.target):this===e}identified(...e){return new Wt(this.runAll,a.fromIterable(e))}pipe(){return(0,S.pipeArguments)(this,arguments)}}const zt=e=>(0,w.hasProperty)(e,qt),Vt=(0,f.dual)(3,((e,t,n)=>new Wt((r=>Jt(e.runAll(r),t,n)),a.make("Locally",e,t,n)))),Gt=(e,t,n)=>E.reduce(e,Kt(t,n)),Kt=(e,t)=>({emptyCase:()=>E.empty,parCase:(e,t)=>E.par(e,t),seqCase:(e,t)=>E.seq(e,t),singleCase:(n,r)=>E.single(Vt(n,e,t),r)}),Jt=(0,f.dual)(3,((e,t,n)=>V(lt(Tt(t),Rt(t,n)),(()=>e),(e=>Rt(t,e))))),Ht=(0,f.dual)(3,((e,t,n)=>Ct(t,(r=>Jt(e,t,n(r)))))),Yt=(e,t)=>en(e,{differ:_.update(),fork:t?.fork??f.identity,join:t?.join}),Zt=e=>{const t=_.hashSet();return en(e,{differ:t,fork:t.empty})},Qt=e=>{const t=_.readonlyArray(_.update());return en(e,{differ:t,fork:t.empty})},Xt=e=>{const t=_.environment();return en(e,{differ:t,fork:t.empty})},en=(e,t)=>({[_t]:It,initial:e,diff:(e,n)=>t.differ.diff(e,n),combine:(e,n)=>t.differ.combine(e,n),patch:e=>n=>t.differ.patch(e,n),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return(0,S.pipeArguments)(this,arguments)}}),tn=e=>en(e,{differ:N.differ,fork:N.differ.empty}),nn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentContext"),(()=>Xt(s.empty()))),rn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentSchedulingPriority"),(()=>Yt(0))),an=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),(()=>Yt(2048))),sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogAnnotation"),(()=>Yt(p.empty()))),on=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogLevel"),(()=>Yt(wt))),cn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogSpan"),(()=>Yt(g.empty()))),un=(0,f.dual)(2,((e,t)=>Jt(e,rn,t))),ln=(0,f.dual)(2,((e,t)=>Jt(e,an,t))),fn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentConcurrency"),(()=>Yt("unbounded"))),dn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentRequestBatching"),(()=>Yt(!0))),hn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),(()=>Yt(b.some(vt)))),pn=(0,f.dual)(2,((e,t)=>Jt(e,hn,t))),mn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMetricLabels"),(()=>Qt(i.empty()))),gn=Tt(mn),yn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentForkScopeOverride"),(()=>Yt(b.none(),{fork:()=>b.none(),join:(e,t)=>e}))),bn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentInterruptedCause"),(()=>Yt(k.empty,{fork:()=>k.empty,join:(e,t)=>e}))),Sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerEnabled"),(()=>Yt(!0))),wn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerTiming"),(()=>Yt(!0))),vn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),(()=>Yt(p.empty()))),En=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),(()=>Yt(a.empty()))),kn=Symbol.for("effect/Scope"),xn=Symbol.for("effect/CloseableScope"),_n=(e,t)=>e.addFinalizer((()=>K(t))),In=(e,t)=>e.addFinalizer(t),Tn=(e,t)=>e.close(t),On=(e,t)=>e.fork(t),An=e=>Nn(f.identity)(e),Nn=(0,f.dual)(2,((e,t)=>{const n=(0,f.pipe)(e,k.failureOption,b.map(t));switch(n._tag){case"None":return(0,f.pipe)(k.defects(e),a.head,b.match({onNone:()=>{const t=i.fromIterable(k.interruptors(e)).flatMap((e=>i.fromIterable(l.ids(e)).map((e=>`#${e}`))));return new Dn(t?`Interrupted by fibers: ${t.join(", ")}`:void 0)},onSome:f.identity}));case"Some":return n.value}})),Cn=function(){class e extends globalThis.Error{commit(){return fe(this)}toJSON(){return{...this}}[m.NodeInspectSymbol](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}\n${this.stack.split("\n").slice(1).join("\n")}`:this.toString():"Bun"in globalThis?k.pretty(k.fail(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,I.StructuralCommitPrototype),e}(),Rn=(e,t)=>{class n extends Cn{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},Fn=Symbol.for("effect/Cause/errors/RuntimeException"),Mn=Rn({[Fn]:Fn},"RuntimeException"),Ln=e=>(0,w.hasProperty)(e,Fn),Pn=Symbol.for("effect/Cause/errors/InterruptedException"),Dn=Rn({[Pn]:Pn},"InterruptedException"),Un=e=>(0,w.hasProperty)(e,Pn),jn=Symbol.for("effect/Cause/errors/IllegalArgument"),Bn=Rn({[jn]:jn},"IllegalArgumentException"),qn=e=>(0,w.hasProperty)(e,jn),$n=Symbol.for("effect/Cause/errors/NoSuchElement"),Wn=Rn({[$n]:$n},"NoSuchElementException"),zn=e=>(0,w.hasProperty)(e,$n),Vn=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),Gn=Rn({[Vn]:Vn},"InvalidPubSubCapacityException"),Kn=Symbol.for("effect/Cause/errors/ExceededCapacityException"),Jn=Rn({[Kn]:Kn},"ExceededCapacityException"),Hn=e=>(0,w.hasProperty)(e,Kn),Yn=e=>(0,w.hasProperty)(e,Vn),Zn=Symbol.for("effect/Cause/errors/Timeout"),Qn=Rn({[Zn]:Zn},"TimeoutException"),Xn=e=>new Qn(`Operation timed out before the specified duration of '${o.format(e)}' elapsed`),er=e=>(0,w.hasProperty)(e,Zn),tr=Symbol.for("effect/Cause/errors/UnknownException"),nr=function(){class e extends Cn{cause;_tag="UnknownException";error;constructor(e,t){super(t??"An unknown error occurred",{cause:e}),this.cause=e,this.error=e}}return Object.assign(e.prototype,{[tr]:tr,name:"UnknownException"}),e}(),rr=e=>(0,w.hasProperty)(e,tr),ir=e=>W(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),ar=e=>"Failure"===e._tag,sr=e=>"Success"===e._tag,or=e=>{switch(e._tag){case A.OP_FAILURE:return k.isInterrupted(e.effect_instruction_i0);case A.OP_SUCCESS:return!1}},cr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t)}})),ur=e=>cr(e,void 0),lr=e=>{switch(e._tag){case A.OP_FAILURE:return b.some(e.effect_instruction_i0);case A.OP_SUCCESS:return b.none()}},fr=(e,t)=>jr(e,t?.parallel?k.parallel:k.sequential),dr=e=>mr(k.die(e)),hr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return!1;case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),pr=e=>mr(k.fail(e)),mr=e=>{const t=new q(A.OP_FAILURE);return t.effect_instruction_i0=e,t},gr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),yr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return ze(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),br=e=>(0,f.pipe)(e,gr(f.identity)),Sr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return ze(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return le(t(e.effect_instruction_i0))}})),wr=e=>{switch(e._tag){case"Left":return pr(e.left);case"Right":return Nr(e.right)}},vr=e=>{switch(e._tag){case"None":return pr(void 0);case"Some":return Nr(e.value)}},Er=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return e.effect_instruction_i0}})),kr=e=>mr(k.interrupt(e)),xr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t(e.effect_instruction_i0))}})),_r=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,k.map(t)));case A.OP_SUCCESS:return Nr(n(e.effect_instruction_i0))}})),Ir=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,k.map(t)));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Tr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(t(e.effect_instruction_i0));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Or=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Ar=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Nr=e=>{const t=new $(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Cr=Nr(void 0),Rr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:k.sequential}))),Fr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:k.sequential}))),Mr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:k.sequential}))),Lr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:k.parallel}))),Pr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:k.parallel}))),Dr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:k.parallel}))),Ur=(0,f.dual)(3,((e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case A.OP_FAILURE:switch(t._tag){case A.OP_SUCCESS:return mr(e.effect_instruction_i0);case A.OP_FAILURE:return mr(n(e.effect_instruction_i0,t.effect_instruction_i0))}case A.OP_SUCCESS:switch(t._tag){case A.OP_SUCCESS:return Nr(r(e.effect_instruction_i0,t.effect_instruction_i0));case A.OP_FAILURE:return mr(t.effect_instruction_i0)}}})),jr=(e,t)=>{const n=a.fromIterable(e);return a.isNonEmpty(n)?(0,f.pipe)(a.tailNonEmpty(n),i.reduce((0,f.pipe)(a.headNonEmpty(n),xr(a.of)),((e,n)=>(0,f.pipe)(e,Ur(n,{onSuccess:(e,t)=>(0,f.pipe)(e,a.prepend(t)),onFailure:t})))),xr(a.reverse),xr((e=>a.toReadonlyArray(e))),b.some):b.none()},Br=e=>({[x.DeferredTypeId]:x.deferredVariance,state:y.make(x.pending([])),blockingOn:e,pipe(){return(0,S.pipeArguments)(this,arguments)}}),qr=()=>ye(me,(e=>$r(e))),$r=e=>Ge((()=>Br(e))),Wr=e=>Y((t=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return t(n.effect);case O.OP_STATE_PENDING:return n.joiners.push(t),si(e,t)}}),e.blockingOn),zr=(0,f.dual)(2,((e,t)=>Re(t,e))),Vr=(0,f.dual)(2,((e,t)=>Ge((()=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return!1;case O.OP_STATE_PENDING:y.set(e.state,x.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t);return!0}})))),Gr=(0,f.dual)(2,((e,t)=>Vr(e,t))),Kr=(0,f.dual)(2,((e,t)=>Vr(e,fe(t)))),Jr=(0,f.dual)(2,((e,t)=>Vr(e,de(t)))),Hr=(0,f.dual)(2,((e,t)=>Vr(e,he(t)))),Yr=(0,f.dual)(2,((e,t)=>Vr(e,pe(t)))),Zr=(0,f.dual)(2,((e,t)=>Vr(e,se(t)))),Qr=(0,f.dual)(2,((e,t)=>Vr(e,ce(t)))),Xr=e=>ye(me,(t=>Vr(e,Ae(t)))),ei=(0,f.dual)(2,((e,t)=>Vr(e,Ae(t)))),ti=e=>Ge((()=>y.get(e.state)._tag===O.OP_STATE_DONE)),ni=e=>Ge((()=>{const t=y.get(e.state);switch(t._tag){case O.OP_STATE_DONE:return b.some(t.effect);case O.OP_STATE_PENDING:return b.none()}})),ri=(0,f.dual)(2,((e,t)=>Vr(e,ze(t)))),ii=(0,f.dual)(2,((e,t)=>Vr(e,Ge(t)))),ai=(e,t)=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){y.set(e.state,x.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t)}},si=(e,t)=>Ge((()=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){const e=n.joiners.indexOf(t);e>=0&&n.joiners.splice(e,1)}})),oi=Tt(nn),ci=()=>oi,ui=e=>Fe(ci(),e),li=e=>ye(ci(),e),fi=(0,f.dual)(2,((e,t)=>Jt(nn,t)(e))),di=(0,f.dual)(2,((e,t)=>Ht(nn,(e=>s.merge(e,t)))(e))),hi=(0,f.dual)(2,((e,t)=>li((n=>fi(e,t(n)))))),pi=e=>{const t=e.getFiberRef(nn).unsafeMap.get(R.spanTag.key);return void 0!==t&&"Span"===t._tag?b.some(t):b.none()},mi={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:b.none(),context:s.empty(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Cr},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},gi=e=>{const t=Object.create(mi);return t.name=e,t}},234951:(e,t,n)=>{n.r(t),n.d(t,{ArrayProto:()=>s,Structural:()=>o,struct:()=>c});var r=n(43977),i=n(367337),a=n(68498);const s=Object.assign(Object.create(Array.prototype),{[i.symbol](){return i.cached(this,i.array(this))},[r.symbol](e){return!(!Array.isArray(e)||this.length!==e.length)&&this.every(((t,n)=>r.equals(t,e[n])))}}),o=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=a.StructuralPrototype,e}(),c=e=>Object.assign(Object.create(a.StructuralPrototype),e)},344862:(e,t,n)=>{n.r(t),n.d(t,{clockWith:()=>g,config:()=>E,configOrDie:()=>k,configProviderWith:()=>v,currentServices:()=>p,currentTimeMillis:()=>y,currentTimeNanos:()=>b,liveServices:()=>h,next:()=>I,nextBoolean:()=>O,nextInt:()=>T,nextIntBetween:()=>N,nextRange:()=>A,randomWith:()=>x,shuffle:()=>C,sleep:()=>m,tracerWith:()=>R,withClock:()=>S,withConfigProvider:()=>w,withRandom:()=>_,withTracer:()=>F});var r=n(689702),i=n(284073),a=n(361369),s=n(606517),o=n(114969),c=n(480226),u=n(672620),l=n(272572),f=n(937540),d=n(127514);const h=(0,a.pipe)(r.empty(),r.add(o.clockTag,o.make()),r.add(l.consoleTag,l.defaultConsole),r.add(f.randomTag,f.make(Math.random())),r.add(c.configProviderTag,c.fromEnv()),r.add(d.tracerTag,d.nativeTracer)),p=(0,s.globalValue)(Symbol.for("effect/DefaultServices/currentServices"),(()=>u.fiberRefUnsafeMakeContext(h))),m=e=>{const t=i.decode(e);return g((e=>e.sleep(t)))},g=e=>u.fiberRefGetWith(p,(t=>e(r.get(t,o.clockTag)))),y=g((e=>e.currentTimeMillis)),b=g((e=>e.currentTimeNanos)),S=(0,a.dual)(2,((e,t)=>u.fiberRefLocallyWith(p,r.add(o.clockTag,t))(e))),w=(0,a.dual)(2,((e,t)=>u.fiberRefLocallyWith(p,r.add(c.configProviderTag,t))(e))),v=e=>u.fiberRefGetWith(p,(t=>e(r.get(t,c.configProviderTag)))),E=e=>v((t=>t.load(e))),k=e=>u.orDie(v((t=>t.load(e)))),x=e=>u.fiberRefGetWith(p,(t=>e(r.get(t,f.randomTag)))),_=(0,a.dual)(2,((e,t)=>u.fiberRefLocallyWith(p,r.add(f.randomTag,t))(e))),I=x((e=>e.next)),T=x((e=>e.nextInt)),O=x((e=>e.nextBoolean)),A=(e,t)=>x((n=>n.nextRange(e,t))),N=(e,t)=>x((n=>n.nextIntBetween(e,t))),C=e=>x((t=>t.shuffle(e))),R=e=>u.fiberRefGetWith(p,(t=>e(r.get(t,d.tracerTag)))),F=(0,a.dual)(2,((e,t)=>u.fiberRefLocallyWith(p,r.add(d.tracerTag,t))(e)))},272572:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>a,consoleTag:()=>s,defaultConsole:()=>o});var r=n(689702),i=n(672620);const a=Symbol.for("effect/Console"),s=r.GenericTag("effect/Console"),o={[a]:a,assert:(e,...t)=>i.sync((()=>{console.assert(e,...t)})),clear:i.sync((()=>{console.clear()})),count:e=>i.sync((()=>{console.count(e)})),countReset:e=>i.sync((()=>{console.countReset(e)})),debug:(...e)=>i.sync((()=>{console.debug(...e)})),dir:(e,t)=>i.sync((()=>{console.dir(e,t)})),dirxml:(...e)=>i.sync((()=>{console.dirxml(...e)})),error:(...e)=>i.sync((()=>{console.error(...e)})),group:e=>e?.collapsed?i.sync((()=>console.groupCollapsed(e?.label))):i.sync((()=>console.group(e?.label))),groupEnd:i.sync((()=>{console.groupEnd()})),info:(...e)=>i.sync((()=>{console.info(...e)})),log:(...e)=>i.sync((()=>{console.log(...e)})),table:(e,t)=>i.sync((()=>{console.table(e,t)})),time:e=>i.sync((()=>console.time(e))),timeEnd:e=>i.sync((()=>console.timeEnd(e))),timeLog:(e,...t)=>i.sync((()=>{console.timeLog(e,...t)})),trace:(...e)=>i.sync((()=>{console.trace(...e)})),warn:(...e)=>i.sync((()=>{console.warn(...e)})),unsafe:console}},304080:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,deferredVariance:()=>a,done:()=>o,pending:()=>s});var r=n(127576);const i=Symbol.for("effect/Deferred"),a={_E:e=>e,_A:e=>e},s=e=>({_tag:r.OP_STATE_PENDING,joiners:e}),o=e=>({_tag:r.OP_STATE_DONE,effect:e})},245779:(e,t,n)=>{n.r(t),n.d(t,{DifferProto:()=>d,DifferTypeId:()=>f,chunk:()=>m,environment:()=>p,hashMap:()=>g,hashSet:()=>y,make:()=>h,orElseEither:()=>b,readonlyArray:()=>S,transform:()=>w,update:()=>v,updateWith:()=>E,zip:()=>k});var r=n(43977),i=n(361369),a=n(211635),s=n(281),o=n(889542),c=n(861324),u=n(888961),l=n(776273);const f=Symbol.for("effect/Differ"),d={[f]:{_P:i.identity,_V:i.identity}},h=e=>{const t=Object.create(d);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},p=()=>h({empty:s.empty(),combine:(e,t)=>s.combine(t)(e),diff:(e,t)=>s.diff(e,t),patch:(e,t)=>s.patch(t)(e)}),m=e=>h({empty:a.empty(),combine:(e,t)=>a.combine(t)(e),diff:(t,n)=>a.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>a.patch(n,e)(t)}),g=e=>h({empty:o.empty(),combine:(e,t)=>o.combine(t)(e),diff:(t,n)=>o.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>o.patch(n,e)(t)}),y=()=>h({empty:c.empty(),combine:(e,t)=>c.combine(t)(e),diff:(e,t)=>c.diff(e,t),patch:(e,t)=>c.patch(t)(e)}),b=i.dual(2,((e,t)=>h({empty:u.empty(),combine:(e,t)=>u.combine(e,t),diff:(n,r)=>u.diff({oldValue:n,newValue:r,left:e,right:t}),patch:(n,r)=>u.patch(n,{oldValue:r,left:e,right:t})}))),S=e=>h({empty:l.empty(),combine:(e,t)=>l.combine(e,t),diff:(t,n)=>l.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>l.patch(t,n,e)}),w=i.dual(2,((e,{toNew:t,toOld:n})=>h({empty:e.empty,combine:(t,n)=>e.combine(t,n),diff:(t,r)=>e.diff(n(t),n(r)),patch:(r,i)=>t(e.patch(r,n(i)))}))),v=()=>E(((e,t)=>t)),E=e=>h({empty:i.identity,combine:(e,t)=>e===i.identity?t:t===i.identity?e:n=>t(e(n)),diff:(e,t)=>r.equals(e,t)?i.identity:(0,i.constant)(t),patch:(t,n)=>e(n,t(n))}),k=i.dual(2,((e,t)=>h({empty:[e.empty,t.empty],combine:(n,r)=>[e.combine(n[0],r[0]),t.combine(n[1],r[1])],diff:(n,r)=>[e.diff(n[0],r[0]),t.diff(n[1],r[1])],patch:(n,r)=>[e.patch(n[0],r[0]),t.patch(n[1],r[1])]})))},211635:(e,t,n)=>{n.r(t),n.d(t,{ChunkPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>w});var r=n(128420),i=n(43977),a=n(361369),s=n(234951);const o=Symbol.for("effect/DifferChunkPatch");function c(e){return e}const u={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},l=Object.assign(Object.create(u),{_tag:"Empty"}),f=Object.create(l),d=()=>f,h=Object.assign(Object.create(u),{_tag:"AndThen"}),p=Object.assign(Object.create(u),{_tag:"Append"}),m=Object.assign(Object.create(u),{_tag:"Slice"}),g=Object.assign(Object.create(u),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=r.unsafeGet(t)(e.oldValue),o=r.unsafeGet(t)(e.newValue),c=e.differ.diff(s,o);i.equals(c,e.differ.empty)||(n=(0,a.pipe)(n,S(y(t,c)))),t+=1}return t<e.oldValue.length&&(n=(0,a.pipe)(n,S(((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t)))),t<e.newValue.length&&(n=(0,a.pipe)(n,S((e=>{const t=Object.create(p);return t.values=e,t})(r.drop(t)(e.newValue))))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),w=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Append":i=r.appendAll(e.values)(i),a=t;break;case"Slice":{const n=r.toReadonlyArray(i);i=r.unsafeFromArray(n.slice(e.from,e.until)),a=t;break}case"Update":{const s=r.toReadonlyArray(i);s[e.index]=n.patch(e.patch,s[e.index]),i=r.unsafeFromArray(s),a=t;break}}}return i}))},281:(e,t,n)=>{n.r(t),n.d(t,{ContextPatchTypeId:()=>c,combine:()=>E,diff:()=>v,empty:()=>h,patch:()=>k});var r=n(128420),i=n(43977),a=n(361369),s=n(883768),o=n(234951);const c=Symbol.for("effect/DifferContextPatch");function u(e){return e}const l={...o.Structural.prototype,[c]:{_Value:u,_Patch:u}},f=Object.assign(Object.create(l),{_tag:"Empty"}),d=Object.create(f),h=()=>d,p=Object.assign(Object.create(l),{_tag:"AndThen"}),m=Object.assign(Object.create(l),{_tag:"AddService"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.service=t,n},y=Object.assign(Object.create(l),{_tag:"RemoveService"}),b=e=>{const t=Object.create(y);return t.key=e,t},S=Object.assign(Object.create(l),{_tag:"UpdateService"}),w=(e,t)=>{const n=Object.create(S);return n.key=e,n.update=t,n},v=(e,t)=>{const n=new Map(e.unsafeMap);let r=h();for(const[a,s]of t.unsafeMap.entries())if(n.has(a)){const e=n.get(a);n.delete(a),i.equals(e,s)||(r=E(w(a,(()=>s)))(r))}else n.delete(a),r=E(g(a,s))(r);for(const[i]of n.entries())r=E(b(i))(r);return r},E=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),k=a.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=!1,i=r.of(e);const a=new Map(t.unsafeMap);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AddService":a.set(e.key,e.service),i=t;break;case"AndThen":i=r.prepend(r.prepend(t,e.second),e.first);break;case"RemoveService":a.delete(e.key),i=t;break;case"UpdateService":a.set(e.key,e.update(a.get(e.key))),n=!0,i=t}}if(!n)return(0,s.makeContext)(a);const o=new Map;for(const[r]of t.unsafeMap)a.has(r)&&(o.set(r,a.get(r)),a.delete(r));for(const[r,s]of a)o.set(r,s);return(0,s.makeContext)(o)}))},889542:(e,t,n)=>{n.r(t),n.d(t,{HashMapPatchTypeId:()=>c,combine:()=>v,diff:()=>w,empty:()=>h,patch:()=>E});var r=n(128420),i=n(43977),a=n(361369),s=n(827964),o=n(234951);const c=Symbol.for("effect/DifferHashMapPatch");function u(e){return e}const l={...o.Structural.prototype,[c]:{_Value:u,_Key:u,_Patch:u}},f=Object.assign(Object.create(l),{_tag:"Empty"}),d=Object.create(f),h=()=>d,p=Object.assign(Object.create(l),{_tag:"AndThen"}),m=Object.assign(Object.create(l),{_tag:"Add"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.value=t,n},y=Object.assign(Object.create(l),{_tag:"Remove"}),b=Object.assign(Object.create(l),{_tag:"Update"}),S=(e,t)=>{const n=Object.create(b);return n.key=e,n.patch=t,n},w=e=>{const[t,n]=s.reduce([e.oldValue,h()],(([t,n],r,a)=>{const o=s.get(a)(t);switch(o._tag){case"Some":{const c=e.differ.diff(o.value,r);return i.equals(c,e.differ.empty)?[s.remove(a)(t),n]:[s.remove(a)(t),v(S(a,c))(n)]}case"None":return[t,v(g(a,r))(n)]}}))(e.newValue);return s.reduce(n,((e,t,n)=>v((e=>{const t=Object.create(y);return t.key=e,t})(n))(e)))(t)},v=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),E=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":i=s.set(e.key,e.value)(i),a=t;break;case"Remove":i=s.remove(e.key)(i),a=t;break;case"Update":{const r=s.get(e.key)(i);"Some"===r._tag&&(i=s.set(e.key,n.patch(e.patch,r.value))(i)),a=t;break}}}return i}))},861324:(e,t,n)=>{n.r(t),n.d(t,{HashSetPatchTypeId:()=>o,combine:()=>w,diff:()=>S,empty:()=>d,makeAdd:()=>g,makeAndThen:()=>p,makeRemove:()=>b,patch:()=>v});var r=n(128420),i=n(361369),a=n(227561),s=n(234951);const o=Symbol.for("effect/DifferHashSetPatch");function c(e){return e}const u={...s.Structural.prototype,[o]:{_Value:c,_Key:c,_Patch:c}},l=Object.assign(Object.create(u),{_tag:"Empty"}),f=Object.create(l),d=()=>f,h=Object.assign(Object.create(u),{_tag:"AndThen"}),p=(e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n},m=Object.assign(Object.create(u),{_tag:"Add"}),g=e=>{const t=Object.create(m);return t.value=e,t},y=Object.assign(Object.create(u),{_tag:"Remove"}),b=e=>{const t=Object.create(y);return t.value=e,t},S=(e,t)=>{const[n,r]=a.reduce([e,d()],(([e,t],n)=>a.has(n)(e)?[a.remove(n)(e),t]:[e,w(g(n))(t)]))(t);return a.reduce(r,((e,t)=>w(b(t))(e)))(n)},w=i.dual(2,((e,t)=>p(e,t))),v=i.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=t,i=r.of(e);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":i=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":n=a.add(e.value)(n),i=t;break;case"Remove":n=a.remove(e.value)(n),i=t}}return n}))},888961:(e,t,n)=>{n.r(t),n.d(t,{OrPatchTypeId:()=>c,combine:()=>_,diff:()=>x,empty:()=>h,makeAndThen:()=>m,makeSetLeft:()=>y,makeSetRight:()=>S,makeUpdateLeft:()=>v,makeUpdateRight:()=>k,patch:()=>I});var r=n(128420),i=n(757964),a=n(43977),s=n(361369),o=n(234951);const c=Symbol.for("effect/DifferOrPatch");function u(e){return e}const l={...o.Structural.prototype,[c]:{_Value:u,_Key:u,_Patch:u}},f=Object.assign(Object.create(l),{_tag:"Empty"}),d=Object.create(f),h=()=>d,p=Object.assign(Object.create(l),{_tag:"AndThen"}),m=(e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n},g=Object.assign(Object.create(l),{_tag:"SetLeft"}),y=e=>{const t=Object.create(g);return t.value=e,t},b=Object.assign(Object.create(l),{_tag:"SetRight"}),S=e=>{const t=Object.create(b);return t.value=e,t},w=Object.assign(Object.create(l),{_tag:"UpdateLeft"}),v=e=>{const t=Object.create(w);return t.patch=e,t},E=Object.assign(Object.create(l),{_tag:"UpdateRight"}),k=e=>{const t=Object.create(E);return t.patch=e,t},x=e=>{switch(e.oldValue._tag){case"Left":switch(e.newValue._tag){case"Left":{const t=e.left.diff(e.oldValue.left,e.newValue.left);return a.equals(t,e.left.empty)?h():v(t)}case"Right":return S(e.newValue.right)}case"Right":switch(e.newValue._tag){case"Left":return y(e.newValue.left);case"Right":{const t=e.right.diff(e.oldValue.right,e.newValue.right);return a.equals(t,e.right.empty)?h():k(t)}}}},_=s.dual(2,((e,t)=>m(e,t))),I=s.dual(2,((e,{left:t,oldValue:n,right:a})=>{if("Empty"===e._tag)return n;let s=r.of(e),o=n;for(;r.isNonEmpty(s);){const e=r.headNonEmpty(s),n=r.tailNonEmpty(s);switch(e._tag){case"Empty":s=n;break;case"AndThen":s=r.prepend(e.first)(r.prepend(e.second)(n));break;case"UpdateLeft":"Left"===o._tag&&(o=i.left(t.patch(e.patch,o.left))),s=n;break;case"UpdateRight":"Right"===o._tag&&(o=i.right(a.patch(e.patch,o.right))),s=n;break;case"SetLeft":o=i.left(e.value),s=n;break;case"SetRight":o=i.right(e.value),s=n}}return o}))},776273:(e,t,n)=>{n.r(t),n.d(t,{ReadonlyArrayPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>w});var r=n(630768),i=n(43977),a=n(361369),s=n(234951);const o=Symbol.for("effect/DifferReadonlyArrayPatch");function c(e){return e}const u={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},l=Object.assign(Object.create(u),{_tag:"Empty"}),f=Object.create(l),d=()=>f,h=Object.assign(Object.create(u),{_tag:"AndThen"}),p=Object.assign(Object.create(u),{_tag:"Append"}),m=Object.assign(Object.create(u),{_tag:"Slice"}),g=Object.assign(Object.create(u),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],a=e.newValue[t],s=e.differ.diff(r,a);i.equals(s,e.differ.empty)||(n=S(n,y(t,s))),t+=1}return t<e.oldValue.length&&(n=S(n,((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t))),t<e.newValue.length&&(n=S(n,(e=>{const t=Object.create(p);return t.values=e,t})(r.drop(t)(e.newValue)))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),w=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t.slice(),a=r.of(e);for(;r.isNonEmptyArray(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":t.unshift(e.first,e.second),a=t;break;case"Append":for(const t of e.values)i.push(t);a=t;break;case"Slice":i=i.slice(e.from,e.until),a=t;break;case"Update":i[e.index]=n.patch(e.patch,i[e.index]),a=t}}return i}))},91276:(e,t,n)=>{n.r(t),n.d(t,{bind:()=>s,bindTo:()=>a,let_:()=>i});var r=n(361369);const i=e=>(0,r.dual)(3,((t,n,r)=>e(t,(e=>Object.assign({},e,{[n]:r(e)}))))),a=e=>(0,r.dual)(2,((t,n)=>e(t,(e=>({[n]:e}))))),s=(e,t)=>(0,r.dual)(3,((n,r,i)=>t(n,(t=>e(i(t),(e=>Object.assign({},t,{[r]:e})))))))},212164:(e,t,n)=>{n.r(t),n.d(t,{SynchronizedTypeId:()=>Q,awaitAllChildren:()=>O,cached:()=>A,cachedFunction:()=>W,cachedInvalidateWithTTL:()=>N,ensuringChild:()=>M,ensuringChildren:()=>L,forkAll:()=>P,forkIn:()=>D,forkScoped:()=>U,fromFiber:()=>j,fromFiberEffect:()=>B,makeSemaphore:()=>T,makeSynchronized:()=>te,raceFirst:()=>z,scheduleForked:()=>V,supervised:()=>G,synchronizedVariance:()=>X,timeout:()=>K,timeoutFail:()=>J,timeoutFailCause:()=>H,timeoutOption:()=>Y,timeoutTo:()=>Z,unsafeMakeSemaphore:()=>I,unsafeMakeSynchronized:()=>ne,updateSomeAndGetEffectSynchronized:()=>re,zipFiber:()=>ie,zipLeftFiber:()=>ae,zipRightFiber:()=>se,zipWithFiber:()=>oe});var r=n(284073),i=n(43977),a=n(896949),s=n(295602),o=n(361369),c=n(367337),u=n(714349),l=n(977948),f=n(953533),d=n(856572),h=n(220209),p=n(71108),m=n(908197),g=n(820808),y=n(672620),b=n(232628),S=n(424285),w=n(860356),v=n(508977),E=n(361974),k=n(280561),x=n(235021);class _{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>y.async((t=>{if(this.free<e){const n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,t(y.succeed(e)))};return this.waiters.add(n),y.sync((()=>{this.waiters.delete(n)}))}return this.taken+=e,t(y.succeed(e))}));updateTaken=e=>y.withFiberRuntime((t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(p.currentScheduler).scheduleTask((()=>{const e=this.waiters.values();let t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()}),t.getFiberRef(y.currentSchedulingPriority)),y.succeed(this.free))));release=e=>this.updateTaken((t=>t-e));releaseAll=this.updateTaken((e=>0));withPermits=e=>t=>y.uninterruptibleMask((n=>y.flatMap(n(this.take(e)),(e=>w.ensuring(n(t),this.release(e))))))}const I=e=>new _(e),T=e=>y.sync((()=>I(e))),O=e=>L(e,w.fiberAwaitAll),A=(0,o.dual)(2,((e,t)=>y.map(N(e,t),(e=>e[0])))),N=(0,o.dual)(2,((e,t)=>{const n=r.decode(t);return y.flatMap(y.context(),(t=>y.map(te(l.none()),(r=>[y.provideContext(R(e,n,r),t),F(r)]))))})),C=(e,t,n)=>{const i=r.toMillis(r.decode(t));return(0,o.pipe)(y.deferredMake(),y.tap((t=>y.intoDeferred(e,t))),y.map((e=>l.some([n+i,e]))))},R=(e,t,n)=>y.uninterruptibleMask((r=>(0,o.pipe)(g.clockWith((e=>e.currentTimeMillis)),y.flatMap((r=>re(n,(n=>{switch(n._tag){case"None":return l.some(C(e,t,r));case"Some":{const[i]=n.value;return i-r<=0?l.some(C(e,t,r)):l.none()}}})))),y.flatMap((e=>l.isNone(e)?y.dieMessage("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):r(y.deferredAwait(e.value[1]))))))),F=e=>E.set(e,l.none()),M=(0,o.dual)(2,((e,t)=>L(e,(e=>t(w.fiberAll(e)))))),L=(0,o.dual)(2,((e,t)=>y.flatMap(x.track,(n=>(0,o.pipe)(G(e,n),w.ensuring(y.flatMap(n.value,t))))))),P=(0,o.dual)((e=>d.isIterable(e[0])),((e,t)=>t?.discard?y.forEachSequentialDiscard(e,w.fork):y.map(y.forEachSequential(e,w.fork),w.fiberAll))),D=(0,o.dual)(2,((e,t)=>y.uninterruptibleMask((n=>y.flatMap(t.fork(b.sequential),(t=>(0,o.pipe)(n(e),y.onExit((e=>t.close(e))),w.forkDaemon,y.tap((e=>t.addFinalizer((()=>y.fiberIdWith((t=>i.equals(t,e.id())?y.void:y.asVoid(y.interruptFiber(e))))))))))))))),U=e=>w.scopeWith((t=>D(e,t))),j=e=>S.join(e),B=e=>y.suspend((()=>y.flatMap(e,S.join))),q=Symbol.for("effect/Effect/memoizeFunction.key");class ${a;eq;[q]=q;constructor(e,t){this.a=e,this.eq=t}[i.symbol](e){return!!d.hasProperty(e,q)&&(this.eq?this.eq(this.a,e.a):i.equals(this.a,e.a))}[c.symbol](){return this.eq?0:c.cached(this,c.hash(this.a))}}const W=(e,t)=>(0,o.pipe)(y.sync((()=>u.empty())),y.flatMap(te),y.map((n=>r=>(0,o.pipe)(n.modifyEffect((n=>{const i=(0,o.pipe)(n,u.get(new $(r,t)));return l.isNone(i)?(0,o.pipe)(y.deferredMake(),y.tap((t=>(0,o.pipe)(g.diffFiberRefs(e(r)),y.intoDeferred(t),w.fork))),y.map((e=>[e,(0,o.pipe)(n,u.set(new $(r,t),e))]))):y.succeed([i.value,n])})),y.flatMap(y.deferredAwait),y.flatMap((([e,t])=>(0,o.pipe)(g.patchFiberRefs(e),y.as(t)))))))),z=(0,o.dual)(2,((e,t)=>(0,o.pipe)(y.exit(e),w.race(y.exit(t)),(e=>y.flatten(e))))),V=(0,o.dual)(2,((e,t)=>(0,o.pipe)(e,k.schedule_Effect(t),U))),G=(0,o.dual)(2,((e,t)=>y.fiberRefLocallyWith(w.currentSupervisor,(e=>e.zip(t)))(e))),K=(0,o.dual)(2,((e,t)=>J(e,{onTimeout:()=>y.timeoutExceptionFromDuration(t),duration:t}))),J=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failSync(n),onSuccess:y.succeed,duration:t})))),H=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failCauseSync(n),onSuccess:y.succeed,duration:t})))),Y=(0,o.dual)(2,((e,t)=>Z(e,{duration:t,onSuccess:l.some,onTimeout:l.none}))),Z=(0,o.dual)(2,((e,{duration:t,onSuccess:n,onTimeout:r})=>y.fiberIdWith((i=>w.raceFibersWith(e,y.interruptible(g.sleep(t)),{onSelfWin:(e,t)=>y.flatMap(e.await,(r=>"Success"===r._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),n(r.value)))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(r.cause))))),onOtherWin:(e,t)=>y.flatMap(e.await,(n=>"Success"===n._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),r()))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(n.cause))))),otherScope:v.globalScope}))))),Q=Symbol.for("effect/Ref/SynchronizedRef"),X={_A:e=>e};class ee{ref;withLock;[Q]=X;[E.RefTypeId]=E.refVariance;[h.TypeId];constructor(e,t){this.ref=e,this.withLock=t,this[h.TypeId]=h.TypeId,this.get=E.get(this.ref)}get;modify(e){return this.modifyEffect((t=>y.succeed(e(t))))}modifyEffect(e){return this.withLock((0,o.pipe)(y.flatMap(E.get(this.ref),e),y.flatMap((([e,t])=>y.as(E.set(this.ref,t),e)))))}pipe(){return(0,f.pipeArguments)(this,arguments)}}const te=e=>y.sync((()=>ne(e))),ne=e=>{const t=E.unsafeMake(e),n=I(1);return new ee(t,n.withPermits(1))},re=(0,o.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return y.succeed([e,e]);case"Some":return y.map(n.value,(e=>[e,e]))}})))),ie=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>[e,t])))),ae=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>e)))),se=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>t)))),oe=(0,o.dual)(3,((e,t,n)=>({[S.FiberTypeId]:S.fiberVariance,id:()=>(0,o.pipe)(e.id(),s.getOrElse(t.id())),await:(0,o.pipe)(e.await,y.flatten,w.zipWithOptions(y.flatten(t.await),n,{concurrent:!0}),y.exit),children:e.children,inheritAll:y.zipRight(t.inheritAll,e.inheritAll),poll:y.zipWith(e.poll,t.poll,((e,t)=>(0,o.pipe)(e,l.flatMap((e=>(0,o.pipe)(t,l.map((t=>a.zipWith(e,t,{onSuccess:n,onFailure:m.parallel}))))))))),interruptAsFork:n=>y.zipRight(e.interruptAsFork(n),t.interruptAsFork(n)),pipe(){return(0,f.pipeArguments)(this,arguments)}})))},68498:(e,t,n)=>{n.r(t),n.d(t,{Base:()=>b,ChannelTypeId:()=>d,CommitPrototype:()=>g,EffectPrototype:()=>p,EffectTypeId:()=>u,SinkTypeId:()=>f,StreamTypeId:()=>l,StructuralBase:()=>S,StructuralCommitPrototype:()=>y,StructuralPrototype:()=>m,effectVariance:()=>h});var r=n(43977),i=n(367337),a=n(953533),s=n(730276),o=n(889706),c=n(853563);const u=Symbol.for("effect/Effect"),l=Symbol.for("effect/Stream"),f=Symbol.for("effect/Sink"),d=Symbol.for("effect/Channel"),h={_R:e=>e,_E:e=>e,_A:e=>e,_V:c.getCurrentVersion()},p={[u]:h,[l]:h,[f]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[d]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[r.symbol](e){return this===e},[i.symbol](){return i.cached(this,i.random(this))},[Symbol.iterator](){return new s.SingleShotGen(new s.YieldWrap(this))},pipe(){return(0,a.pipeArguments)(this,arguments)}},m={[i.symbol](){return i.cached(this,i.structure(this))},[r.symbol](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const i of t)if(!(i in e)||!r.equals(this[i],e[i]))return!1;return!0}},g={...p,_op:o.OP_COMMIT},y={...g,...m},b=function(){function e(){}return e.prototype=g,e}(),S=function(){function e(){}return e.prototype=y,e}()},609018:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>l,fromOption:()=>v,getLeft:()=>S,getRight:()=>w,isEither:()=>p,isLeft:()=>m,isRight:()=>g,left:()=>y,right:()=>b});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(856572),c=n(68498),u=n(8578);const l=Symbol.for("effect/Either"),f={...c.EffectPrototype,[l]:{_R:e=>e},[s.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,s.format)(this.toJSON())}},d=Object.assign(Object.create(f),{_tag:"Right",_op:"Right",[r.symbol](e){return p(e)&&g(e)&&r.equals(this.right,e.right)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:(0,s.toJSON)(this.right)}}}),h=Object.assign(Object.create(f),{_tag:"Left",_op:"Left",[r.symbol](e){return p(e)&&m(e)&&r.equals(this.left,e.left)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:(0,s.toJSON)(this.left)}}}),p=e=>(0,o.hasProperty)(e,l),m=e=>"Left"===e._tag,g=e=>"Right"===e._tag,y=e=>{const t=Object.create(h);return t.left=e,t},b=e=>{const t=Object.create(d);return t.right=e,t},S=e=>g(e)?u.none:u.some(e.left),w=e=>m(e)?u.none:u.some(e.right),v=(0,i.dual)(2,((e,t)=>u.isNone(e)?y(t()):b(e.value)))},94732:(e,t,n)=>{n.r(t),n.d(t,{getBugErrorMessage:()=>r});const r=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`},232628:(e,t,n)=>{n.r(t),n.d(t,{OP_PARALLEL:()=>a,OP_PARALLEL_N:()=>s,OP_SEQUENTIAL:()=>i,isParallel:()=>f,isParallelN:()=>d,isSequential:()=>l,match:()=>h,parallel:()=>c,parallelN:()=>u,sequential:()=>o});var r=n(361369);const i="Sequential",a="Parallel",s="ParallelN",o={_tag:i},c={_tag:a},u=e=>({_tag:s,parallelism:e}),l=e=>e._tag===i,f=e=>e._tag===a,d=e=>e._tag===s,h=(0,r.dual)(2,((e,t)=>{switch(e._tag){case i:return t.onSequential();case a:return t.onParallel();case s:return t.onParallelN(e.parallelism)}}))},424285:(e,t,n)=>{n.r(t),n.d(t,{FiberTypeId:()=>b,Order:()=>E,RuntimeFiberTypeId:()=>v,_await:()=>_,children:()=>I,currentFiberURI:()=>ee,done:()=>T,dump:()=>O,dumpAll:()=>A,fail:()=>N,failCause:()=>C,fiberVariance:()=>S,fromEffect:()=>R,getCurrentFiber:()=>te,id:()=>F,inheritAll:()=>M,interruptAll:()=>P,interruptAllAs:()=>D,interruptAsFork:()=>U,interrupted:()=>L,isFiber:()=>k,isRuntimeFiber:()=>x,join:()=>j,map:()=>B,mapEffect:()=>q,mapFiber:()=>$,match:()=>W,never:()=>z,orElse:()=>V,orElseEither:()=>G,poll:()=>K,pretty:()=>J,roots:()=>Y,status:()=>Z,succeed:()=>Q,unsafeRoots:()=>H,void:()=>X});var r=n(131651),i=n(757964),a=n(896949),s=n(295602),o=n(285485),c=n(361369),u=n(227561),l=n(804676),f=n(977948),d=n(259877),h=n(953533),p=n(856572),m=n(672620),g=n(508977),y=n(66932);const b=Symbol.for("effect/Fiber"),S={_E:e=>e,_A:e=>e},w={[b]:S,pipe(){return(0,h.pipeArguments)(this,arguments)}},v=Symbol.for("effect/Fiber"),E=(0,c.pipe)(d.tuple(l.Order,l.Order),d.mapInput((e=>[e.id().startTimeMillis,e.id().id]))),k=e=>(0,p.hasProperty)(e,b),x=e=>v in e,_=e=>e.await,I=e=>e.children,T=e=>({...w,id:()=>s.none,await:m.succeed(e),children:m.succeed([]),inheritAll:m.void,poll:m.succeed(f.some(e)),interruptAsFork:()=>m.void}),O=e=>m.map(e.status,(t=>({id:e.id(),status:t}))),A=e=>m.forEachSequential(e,O),N=e=>T(a.fail(e)),C=e=>T(a.failCause(e)),R=e=>m.map(m.exit(e),T),F=e=>e.id(),M=e=>e.inheritAll,L=e=>T(a.interrupt(e)),P=e=>m.flatMap(m.fiberId,(t=>(0,c.pipe)(e,D(t)))),D=(0,c.dual)(2,((e,t)=>(0,c.pipe)(m.forEachSequentialDiscard(e,U(t)),m.zipRight((0,c.pipe)(e,m.forEachSequentialDiscard(_)))))),U=(0,c.dual)(2,((e,t)=>e.interruptAsFork(t))),j=e=>m.zipLeft(m.flatten(e.await),e.inheritAll),B=(0,c.dual)(2,((e,t)=>q(e,(e=>m.sync((()=>t(e))))))),q=(0,c.dual)(2,((e,t)=>({...w,id:()=>e.id(),await:m.flatMap(e.await,a.forEachEffect(t)),children:e.children,inheritAll:e.inheritAll,poll:m.flatMap(e.poll,(e=>{switch(e._tag){case"None":return m.succeed(f.none());case"Some":return(0,c.pipe)(a.forEachEffect(e.value,t),m.map(f.some))}})),interruptAsFork:t=>e.interruptAsFork(t)}))),$=(0,c.dual)(2,((e,t)=>m.map(e.await,a.match({onFailure:e=>C(e),onSuccess:e=>t(e)})))),W=(0,c.dual)(2,((e,{onFiber:t,onRuntimeFiber:n})=>x(e)?n(e):t(e))),z={...w,id:()=>s.none,await:m.never,children:m.succeed([]),inheritAll:m.never,poll:m.succeed(f.none()),interruptAsFork:()=>m.never},V=(0,c.dual)(2,((e,t)=>({...w,id:()=>s.getOrElse(e.id(),t.id()),await:m.zipWith(e.await,t.await,((e,t)=>a.isSuccess(e)?e:t)),children:e.children,inheritAll:m.zipRight(t.inheritAll,e.inheritAll),poll:m.zipWith(e.poll,t.poll,((e,t)=>{switch(e._tag){case"None":return f.none();case"Some":return a.isSuccess(e.value)?e:t}})),interruptAsFork:n=>(0,c.pipe)(m.interruptAsFiber(e,n),m.zipRight((0,c.pipe)(t,m.interruptAsFiber(n))),m.asVoid)}))),G=(0,c.dual)(2,((e,t)=>V(B(e,i.left),B(t,i.right)))),K=e=>e.poll,J=e=>m.flatMap(r.currentTimeMillis,(t=>m.map(O(e),(e=>{const n=t-e.id.startTimeMillis,{days:r,hours:i,milliseconds:a,minutes:c,seconds:l}=(e=>{const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}})(n),f=(0===r?"":`${r}d`)+(0===r&&0===i?"":`${i}h`)+(0===r&&0===i&&0===c?"":`${c}m`)+(0===r&&0===i&&0===c&&0===l?"":`${l}s`)+`${a}ms`,d=o.isSuspended(e.status)?(()=>{const t=s.ids(e.status.blockingOn);return u.size(t)>0?"waiting on "+Array.from(t).map((e=>`${e}`)).join(", "):""})():"",h=(e=>o.isDone(e)?"Done":o.isRunning(e)?"Running":`Suspended(${y.interruptible(e.runtimeFlags)?"interruptible":"uninterruptible"})`)(e.status);return`[Fiber](#${e.id.id}) (${f}) ${d}\n   Status: ${h}`})))),H=()=>Array.from(g.globalScope.roots),Y=m.sync(H),Z=e=>e.status,Q=e=>T(a.succeed(e)),X=Q(void 0),ee="effect/FiberCurrent",te=()=>f.fromNullable(globalThis[ee])},478908:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>h,combine:()=>O,combineAll:()=>A,composite:()=>k,getOrElse:()=>N,ids:()=>C,isComposite:()=>T,isFiberId:()=>x,isNone:()=>_,isRuntime:()=>I,make:()=>F,none:()=>v,runtime:()=>E,threadName:()=>M,toOption:()=>L,toSet:()=>P,unsafeMake:()=>D});var r=n(43977),i=n(361369),a=n(606517),s=n(367337),o=n(227561),c=n(883845),u=n(645914),l=n(977948),f=n(856572);const d="effect/FiberId",h=Symbol.for(d),p="None",m="Runtime",g="Composite",y=s.string(`${d}-${p}`);class b{[h]=h;_tag=p;id=-1;startTimeMillis=-1;[s.symbol](){return y}[r.symbol](e){return x(e)&&e._tag===p}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[c.NodeInspectSymbol](){return this.toJSON()}}class S{id;startTimeMillis;[h]=h;_tag=m;constructor(e,t){this.id=e,this.startTimeMillis=t}[s.symbol](){return s.cached(this,s.string(`${d}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[r.symbol](e){return x(e)&&e._tag===m&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[c.NodeInspectSymbol](){return this.toJSON()}}class w{left;right;[h]=h;_tag=g;constructor(e,t){this.left=e,this.right=t}_hash;[s.symbol](){return(0,i.pipe)(s.string(`${d}-${this._tag}`),s.combine(s.hash(this.left)),s.combine(s.hash(this.right)),s.cached(this))}[r.symbol](e){return x(e)&&e._tag===g&&r.equals(this.left,e.left)&&r.equals(this.right,e.right)}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:(0,c.toJSON)(this.left),right:(0,c.toJSON)(this.right)}}[c.NodeInspectSymbol](){return this.toJSON()}}const v=new b,E=(e,t)=>new S(e,t),k=(e,t)=>new w(e,t),x=e=>(0,f.hasProperty)(e,h),_=e=>e._tag===p||(0,i.pipe)(P(e),o.every((e=>_(e)))),I=e=>e._tag===m,T=e=>e._tag===g,O=(0,i.dual)(2,((e,t)=>e._tag===p?t:t._tag===p?e:new w(e,t))),A=e=>(0,i.pipe)(e,o.reduce(v,((e,t)=>O(t)(e)))),N=(0,i.dual)(2,((e,t)=>_(e)?t:e)),C=e=>{switch(e._tag){case p:return o.empty();case m:return o.make(e.id);case g:return(0,i.pipe)(C(e.left),o.union(C(e.right)))}},R=(0,a.globalValue)(Symbol.for("effect/Fiber/Id/_fiberCounter"),(()=>u.make(0))),F=(e,t)=>new S(e,t),M=e=>Array.from(C(e)).map((e=>`#${e}`)).join(","),L=e=>{const t=P(e);if(0===o.size(t))return l.none();let n,r=!0;for(const a of t)r?(n=a,r=!1):n=(0,i.pipe)(n,O(a));return l.some(n)},P=e=>{switch(e._tag){case p:return o.empty();case m:return o.make(e);case g:return(0,i.pipe)(P(e.left),o.union(P(e.right)))}},D=()=>{const e=u.get(R);return(0,i.pipe)(R,u.set(e+1)),new S(e,Date.now())}},44402:(e,t,n)=>{n.r(t),n.d(t,{OP_INTERRUPT_SIGNAL:()=>r,OP_RESUME:()=>a,OP_STATEFUL:()=>i,OP_YIELD_NOW:()=>s,interruptSignal:()=>o,resume:()=>u,stateful:()=>c,yieldNow:()=>l});const r="InterruptSignal",i="Stateful",a="Resume",s="YieldNow",o=e=>({_tag:r,cause:e}),c=e=>({_tag:i,onFiber:e}),u=e=>({_tag:a,effect:e}),l=()=>({_tag:s})},789391:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsImpl:()=>h,FiberRefsSym:()=>d,delete_:()=>S,empty:()=>f,fiberRefs:()=>y,forkAs:()=>m,get:()=>w,getOrDefault:()=>v,joinAs:()=>p,setAll:()=>b,unsafeMake:()=>l,updateAs:()=>E,updateManyAs:()=>x});var r=n(630768),i=n(43977),a=n(361369),s=n(227561),o=n(977948),c=n(953533),u=n(672620);function l(e){return new h(e)}function f(){return l(new Map)}const d=Symbol.for("effect/FiberRefs");class h{locals;[d]=d;constructor(e){this.locals=e}pipe(){return(0,c.pipeArguments)(this,arguments)}}const p=(0,a.dual)(3,((e,t,n)=>{const a=new Map(e.locals);return n.locals.forEach(((e,n)=>{const s=e[0][1];if(!e[0][0][i.symbol](t)){if(!a.has(n)){if(i.equals(s,n.initial))return;return void a.set(n,[[t,n.join(n.initial,s)]])}const o=a.get(n),[c,u]=((e,t,n,i=!1)=>{const a=e;let s,o=t,c=n,u=i;for(;void 0===s;)if(r.isNonEmptyReadonlyArray(o)&&r.isNonEmptyReadonlyArray(c)){const e=r.headNonEmpty(o)[0],t=r.tailNonEmpty(o),n=r.headNonEmpty(c)[0],i=r.headNonEmpty(c)[1],a=r.tailNonEmpty(c);e.startTimeMillis<n.startTimeMillis?(c=a,u=!0):e.startTimeMillis>n.startTimeMillis?o=t:e.id<n.id?(c=a,u=!0):e.id>n.id?o=t:s=[i,u]}else s=[a.initial,!0];return s})(n,o,e);if(u){const e=n.diff(c,s),r=o[0][1],u=n.join(r,n.patch(e)(r));if(!i.equals(r,u)){let e;const r=o[0][0];e=r[i.symbol](t)?[[r,u],...o.slice(1)]:[[t,u],...o],a.set(n,e)}}}})),new h(a)})),m=(0,a.dual)(2,((e,t)=>{const n=new Map;return g(e,n,t),new h(n)})),g=(e,t,n)=>{e.locals.forEach(((e,r)=>{const a=e[0][1],s=r.patch(r.fork)(a);i.equals(a,s)?t.set(r,e):t.set(r,[[n,s],...e])}))},y=e=>s.fromIterable(e.locals.keys()),b=e=>u.forEachSequentialDiscard(y(e),(t=>u.fiberRefSet(t,v(e,t)))),S=(0,a.dual)(2,((e,t)=>{const n=new Map(e.locals);return n.delete(t),new h(n)})),w=(0,a.dual)(2,((e,t)=>e.locals.has(t)?o.some(r.headNonEmpty(e.locals.get(t))[1]):o.none())),v=(0,a.dual)(2,((e,t)=>(0,a.pipe)(w(e,t),o.getOrElse((()=>t.initial))))),E=(0,a.dual)(2,((e,{fiberId:t,fiberRef:n,value:r})=>{if(0===e.locals.size)return new h(new Map([[n,[[t,r]]]]));const i=new Map(e.locals);return k(i,t,n,r),new h(i)})),k=(e,t,n,a)=>{const s=e.get(n)??[];let o;if(r.isNonEmptyReadonlyArray(s)){const[e,n]=r.headNonEmpty(s);if(e[i.symbol](t)){if(i.equals(n,a))return;o=[[t,a],...s.slice(1)]}else o=[[t,a],...s]}else o=[[t,a]];e.set(n,o)},x=(0,a.dual)(2,((e,{entries:t,forkAs:n})=>{if(0===e.locals.size)return new h(new Map(t));const r=new Map(e.locals);return void 0!==n&&g(e,r,n),t.forEach((([e,t])=>{1===t.length?k(r,t[0][0],e,t[0][1]):t.forEach((([t,n])=>{k(r,t,e,n)}))})),new h(r)}))},392538:(e,t,n)=>{n.r(t),n.d(t,{OP_ADD:()=>c,OP_AND_THEN:()=>f,OP_EMPTY:()=>o,OP_REMOVE:()=>u,OP_UPDATE:()=>l,combine:()=>p,diff:()=>h,empty:()=>d,patch:()=>m});var r=n(630768),i=n(43977),a=n(361369),s=n(789391);const o="Empty",c="Add",u="Remove",l="Update",f="AndThen",d={_tag:o},h=(e,t)=>{const n=new Map(e.locals);let a=d;for(const[s,o]of t.locals.entries()){const e=r.headNonEmpty(o)[1],t=n.get(s);if(void 0!==t){const n=r.headNonEmpty(t)[1];(0,i.equals)(n,e)||(a=p({_tag:l,fiberRef:s,patch:s.diff(n,e)})(a))}else a=p({_tag:c,fiberRef:s,value:e})(a);n.delete(s)}for(const[r]of n.entries())a=p({_tag:u,fiberRef:r})(a);return a},p=(0,a.dual)(2,((e,t)=>({_tag:f,first:e,second:t}))),m=(0,a.dual)(3,((e,t,n)=>{let i=n,a=r.of(e);for(;r.isNonEmptyReadonlyArray(a);){const e=r.headNonEmpty(a),n=r.tailNonEmpty(a);switch(e._tag){case o:a=n;break;case c:i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),a=n;break;case u:i=s.delete_(i,e.fiberRef),a=n;break;case l:{const r=s.getOrDefault(i,e.fiberRef);i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),a=n;break}case f:a=r.prepend(e.first)(r.prepend(e.second)(n))}}return i}))},860356:(e,t,n)=>{n.r(t),n.d(t,{FiberRuntime:()=>In,acquireRelease:()=>Bn,acquireReleaseInterruptible:()=>qn,addFinalizer:()=>$n,all:()=>Jn,allSuccesses:()=>Yn,allWith:()=>Hn,annotateLogsScoped:()=>jn,batchedLogger:()=>Un,currentLoggers:()=>Dn,currentMinimumLogLevel:()=>Tn,currentRuntimeFlags:()=>Xr,currentSupervisor:()=>ei,daemonChildren:()=>Wn,defaultLogger:()=>Nn,disconnect:()=>oi,ensuring:()=>fi,exists:()=>Vn,fiberActive:()=>pn,fiberAll:()=>ni,fiberAwaitAll:()=>ti,fiberFailures:()=>gn,fiberInterruptFork:()=>ri,fiberJoinAll:()=>ii,fiberLifetimes:()=>yn,fiberRefLocallyScoped:()=>Kr,fiberRefLocallyScopedWith:()=>Jr,fiberRefMake:()=>Hr,fiberRefMakeContext:()=>Zr,fiberRefMakeRuntimeFlags:()=>Qr,fiberRefMakeWith:()=>Yr,fiberRefUnsafeMakeSupervisor:()=>Gr,fiberScoped:()=>ai,fiberStarted:()=>hn,fiberSuccesses:()=>mn,filter:()=>Kn,finalizersMask:()=>br,forEach:()=>Xn,forEachConcurrentDiscard:()=>tr,forEachParN:()=>nr,forEachParUnbounded:()=>er,fork:()=>rr,forkDaemon:()=>ir,forkWithErrorHandler:()=>ar,interruptWhenPossible:()=>hi,invokeWithInterrupt:()=>di,jsonLogger:()=>Cn,labelMetricsScoped:()=>kr,logFmtLogger:()=>Rn,loggerWithConsoleError:()=>An,loggerWithConsoleLog:()=>On,loggerWithSpanAnnotations:()=>Pn,makeSpanScoped:()=>pi,mergeAll:()=>lr,parallelFinalizers:()=>gr,parallelNFinalizers:()=>yr,partition:()=>fr,prettyLogger:()=>Fn,race:()=>ci,raceAll:()=>hr,raceFibersWith:()=>ui,raceWith:()=>si,reduceEffect:()=>mr,replicate:()=>Zn,replicateEffect:()=>Qn,scope:()=>Br,scopeExtend:()=>zr,scopeMake:()=>Wr,scopeTag:()=>jr,scopeUse:()=>Vr,scopeWith:()=>Sr,scopedEffect:()=>wr,sequentialFinalizers:()=>vr,structuredLogger:()=>Mn,tagMetricsScoped:()=>Er,tracerLogger:()=>Ln,unsafeFork:()=>sr,unsafeForkUnstarted:()=>or,unsafeMakeChildFiber:()=>cr,using:()=>xr,validate:()=>_r,validateAll:()=>dr,validateAllPar:()=>Tr,validateAllParDiscard:()=>Or,validateFirst:()=>Ar,validateWith:()=>Ir,withClockScoped:()=>Nr,withConfigProviderScoped:()=>Rr,withEarlyRelease:()=>Fr,withRandomScoped:()=>Cr,withRuntimeFlagsScoped:()=>Ur,withSpanScoped:()=>gi,withTracerScoped:()=>mi,zipLeftOptions:()=>Lr,zipOptions:()=>Mr,zipRightOptions:()=>Pr,zipWithOptions:()=>Dr});var r=n(730276),i=n(630768),a=n(783733),s=n(128420),o=n(689702),c=n(762738),u=n(237728),l=n(992102),f=n(295602),d=n(989105),h=n(46755),p=n(285485),m=n(361369),g=n(606517),y=n(827964),b=n(227561),S=n(883845),w=n(934321),v=n(757964),E=(n(91276),n(68498),n(238961)),k=n(977948),x=n(953533),_=n(856572);const I=Symbol.for("effect/Micro"),T=Symbol.for("effect/Micro/runSymbol"),O=Symbol.for("effect/Micro/MicroCause");m.identity;globalThis.Error,S.NodeInspectSymbol;v.right,v.left,v.isRight,v.isLeft;const A=Symbol.for("effect/Micro/Env"),N=Symbol.for("effect/Micro/EnvRef"),C={[A]:{_R:m.identity},pipe(){return(0,x.pipeArguments)(this,arguments)}},R=e=>{const t=Object.create(C);return t.refs=e,t},F=(0,m.dual)(2,((e,t)=>t.key in e.refs?e.refs[t.key]:t.initial)),M=(0,m.dual)(3,((e,t,n)=>{const r=Object.assign(Object.create(null),e.refs);return r[t.key]=n,R(r)})),L={[N]:N},P=(e,t)=>(0,g.globalValue)(e,(()=>{const n=Object.create(L);return n.key=e,n.initial=t(),n})),D=P("effect/Micro/currentAbortController",(()=>{})),U=P("effect/Micro/currentAbortSignal",(()=>{})),j=P("effect/Micro/currentContext",(()=>o.empty()));u.EffectPrototype,m.identity,m.identity,m.identity,Symbol.iterator,"setImmediate"in globalThis&&globalThis.setImmediate;var B=n(645914),q=n(55040),$=n(128202),W=n(71108),z=n(668481),V=n(908197),G=n(114969),K=n(242927),J=n(672620);const H=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return J.fiberRefGetWith(J.currentConcurrency,(e=>"unbounded"===e?n():e>1?r(e):t()));default:return e>1?r(e):t()}},Y=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return J.fiberRefGetWith(J.currentConcurrency,(e=>"unbounded"===e||e>1?n():t()));default:return e>1?n():t()}};var Z=n(480226),Q=n(820808),X=n(344862),ee=n(272572),te=n(232628),ne=n(424285),re=n(44402),ie=n(789391),ae=n(508977),se=n(265123),oe=(n(131651),n(284073)),ce=n(43977),ue=n(367337);const le="effect/MetricBoundaries",fe=Symbol.for(le);class de{values;[fe]=fe;constructor(e){this.values=e,this._hash=(0,m.pipe)(ue.string(le),ue.combine(ue.array(this.values)))}_hash;[ue.symbol](){return this._hash}[ce.symbol](e){return he(e)&&ce.equals(this.values,e.values)}pipe(){return(0,x.pipeArguments)(this,arguments)}}const he=e=>(0,_.hasProperty)(e,fe),pe=e=>{const t=(0,m.pipe)(e,i.appendAll(s.of(Number.POSITIVE_INFINITY)),i.dedupe);return new de(t)},me=e=>(0,m.pipe)(i.makeBy(e.count-1,(t=>e.start*Math.pow(e.factor,t))),s.unsafeFromArray,pe),ge=Symbol.for("effect/MetricKeyType"),ye="effect/MetricKeyType/Counter",be=Symbol.for(ye),Se="effect/MetricKeyType/Frequency",we=Symbol.for(Se),ve="effect/MetricKeyType/Gauge",Ee=Symbol.for(ve),ke="effect/MetricKeyType/Histogram",xe=Symbol.for(ke),_e="effect/MetricKeyType/Summary",Ie=Symbol.for(_e),Te={_In:e=>e,_Out:e=>e};class Oe{incremental;bigint;[ge]=Te;[be]=be;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ue.string(ye)}_hash;[ue.symbol](){return this._hash}[ce.symbol](e){return Ne(e)}pipe(){return(0,x.pipeArguments)(this,arguments)}}ue.symbol,ce.symbol;ue.symbol,ce.symbol;class Ae{boundaries;[ge]=Te;[xe]=xe;constructor(e){this.boundaries=e,this._hash=(0,m.pipe)(ue.string(ke),ue.combine(ue.hash(this.boundaries)))}_hash;[ue.symbol](){return this._hash}[ce.symbol](e){return Fe(e)&&ce.equals(this.boundaries,e.boundaries)}pipe(){return(0,x.pipeArguments)(this,arguments)}}ue.symbol,ce.symbol;const Ne=e=>(0,_.hasProperty)(e,be),Ce=e=>(0,_.hasProperty)(e,we),Re=e=>(0,_.hasProperty)(e,Ee),Fe=e=>(0,_.hasProperty)(e,xe),Me=e=>(0,_.hasProperty)(e,Ie);var Le=n(458762);const Pe=Symbol.for("effect/MetricKey"),De={_Type:e=>e},Ue=i.getEquivalence(ce.equals);class je{name;keyType;description;tags;[Pe]=De;constructor(e,t,n,r=[]){this.name=e,this.keyType=t,this.description=n,this.tags=r,this._hash=(0,m.pipe)(ue.string(this.name+this.description),ue.combine(ue.hash(this.keyType)),ue.combine(ue.array(this.tags)))}_hash;[ue.symbol](){return this._hash}[ce.symbol](e){return Be(e)&&this.name===e.name&&ce.equals(this.keyType,e.keyType)&&ce.equals(this.description,e.description)&&Ue(this.tags,e.tags)}pipe(){return(0,x.pipeArguments)(this,arguments)}}const Be=e=>(0,_.hasProperty)(e,Pe),qe=(e,t)=>new je(e,(e=>new Oe(e?.incremental??!1,e?.bigint??!1))(t),k.fromNullable(t?.description)),$e=(e,t,n)=>new je(e,(e=>new Ae(e))(t),k.fromNullable(n)),We=(0,m.dual)(2,((e,t)=>0===t.length?e:new je(e.name,e.keyType,e.description,i.union(e.tags,t))));var ze=n(714349),Ve=n(804676);const Ge=Symbol.for("effect/MetricState"),Ke="effect/MetricState/Counter",Je=Symbol.for(Ke),He="effect/MetricState/Frequency",Ye=Symbol.for(He),Ze="effect/MetricState/Gauge",Qe=Symbol.for(Ze),Xe="effect/MetricState/Histogram",et=Symbol.for(Xe),tt="effect/MetricState/Summary",nt=Symbol.for(tt),rt={_A:e=>e};class it{count;[Ge]=rt;[Je]=Je;constructor(e){this.count=e}[ue.symbol](){return(0,m.pipe)(ue.hash(Ke),ue.combine(ue.hash(this.count)),ue.cached(this))}[ce.symbol](e){return lt(e)&&this.count===e.count}pipe(){return(0,x.pipeArguments)(this,arguments)}}const at=i.getEquivalence(ce.equals);class st{occurrences;[Ge]=rt;[Ye]=Ye;constructor(e){this.occurrences=e}_hash;[ue.symbol](){return(0,m.pipe)(ue.string(He),ue.combine(ue.array(i.fromIterable(this.occurrences.entries()))),ue.cached(this))}[ce.symbol](e){return ft(e)&&at(i.fromIterable(this.occurrences.entries()),i.fromIterable(e.occurrences.entries()))}pipe(){return(0,x.pipeArguments)(this,arguments)}}class ot{value;[Ge]=rt;[Qe]=Qe;constructor(e){this.value=e}[ue.symbol](){return(0,m.pipe)(ue.hash(Ze),ue.combine(ue.hash(this.value)),ue.cached(this))}[ce.symbol](e){return dt(e)&&this.value===e.value}pipe(){return(0,x.pipeArguments)(this,arguments)}}class ct{buckets;count;min;max;sum;[Ge]=rt;[et]=et;constructor(e,t,n,r,i){this.buckets=e,this.count=t,this.min=n,this.max=r,this.sum=i}[ue.symbol](){return(0,m.pipe)(ue.hash(Xe),ue.combine(ue.hash(this.buckets)),ue.combine(ue.hash(this.count)),ue.combine(ue.hash(this.min)),ue.combine(ue.hash(this.max)),ue.combine(ue.hash(this.sum)),ue.cached(this))}[ce.symbol](e){return ht(e)&&ce.equals(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,x.pipeArguments)(this,arguments)}}class ut{error;quantiles;count;min;max;sum;[Ge]=rt;[nt]=nt;constructor(e,t,n,r,i,a){this.error=e,this.quantiles=t,this.count=n,this.min=r,this.max=i,this.sum=a}[ue.symbol](){return(0,m.pipe)(ue.hash(tt),ue.combine(ue.hash(this.error)),ue.combine(ue.hash(this.quantiles)),ue.combine(ue.hash(this.count)),ue.combine(ue.hash(this.min)),ue.combine(ue.hash(this.max)),ue.combine(ue.hash(this.sum)),ue.cached(this))}[ce.symbol](e){return pt(e)&&this.error===e.error&&ce.equals(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,x.pipeArguments)(this,arguments)}}const lt=e=>(0,_.hasProperty)(e,Je),ft=e=>(0,_.hasProperty)(e,Ye),dt=e=>(0,_.hasProperty)(e,Qe),ht=e=>(0,_.hasProperty)(e,et),pt=e=>(0,_.hasProperty)(e,nt),mt=Symbol.for("effect/MetricHook"),gt={_In:e=>e,_Out:e=>e},yt=e=>({[mt]:gt,pipe(){return(0,x.pipeArguments)(this,arguments)},...e}),bt=BigInt(0),St=e=>{let t=e.keyType.bigint?bt:0;const n=e.keyType.incremental?e.keyType.bigint?e=>e>=bt:e=>e>=0:e=>!0;return yt({get:()=>new it(t),update:e=>{n(e)&&(t+=e)}})},wt=e=>{const t=new Map;for(const n of e.keyType.preregisteredWords)t.set(n,0);return yt({get:()=>new st(t),update:e=>{const n=t.get(e)??0;t.set(e,n+1)}})},vt=(e,t)=>{let n=t;return yt({get:()=>new ot(n),update:e=>{n=e}})},Et=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),a=new Float32Array(n);let s=0,o=0,c=Number.MAX_VALUE,u=Number.MIN_VALUE;(0,m.pipe)(t,i.sort(Ve.Order),i.map(((e,t)=>{a[t]=e})));const l=()=>{const e=i.allocate(n);let t=0;for(let i=0;i<n;i++){const n=a[i];t+=r[i],e[i]=[n,t]}return e};return yt({get:()=>{return e={buckets:l(),count:s,min:c,max:u,sum:o},new ct(e.buckets,e.count,e.min,e.max,e.sum);var e},update:e=>{let t=0,i=n;for(;t!==i;){const n=Math.floor(t+(i-t)/2);e<=a[n]?i=n:t=n,i===t+1&&(e<=a[t]?i=t:t=i)}r[t]=r[t]+1,s+=1,o+=e,e<c&&(c=e),e>u&&(u=e)}})},kt=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:a}=e.keyType,s=(0,m.pipe)(a,i.sort(Ve.Order)),o=i.allocate(r);let c=0,u=0,l=0,f=Number.MAX_VALUE,d=Number.MIN_VALUE;const h=e=>{const a=[];let c=0;for(;c!==r-1;){const t=o[c];if(null!=t){const[r,i]=t,s=oe.millis(e-r);oe.greaterThanOrEqualTo(s,oe.zero)&&s<=n&&a.push(i)}c+=1}return xt(t,s,i.sort(a,Ve.Order))};return yt({get:()=>{return e={error:t,quantiles:h(Date.now()),count:u,min:f,max:d,sum:l},new ut(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var e},update:([e,t])=>((e,t)=>{r>0&&(c+=1,o[c%r]=[t,e]);u+=1,l+=e,e<f&&(f=e),e>d&&(d=e)})(e,t)})},xt=(e,t,n)=>{const r=n.length;if(!i.isNonEmptyReadonlyArray(t))return i.empty();const a=t[0],s=t.slice(1),o=_t(e,r,k.none(),0,a,n),c=i.of(o);return s.forEach((t=>{c.push(_t(e,r,o.value,o.consumed,t,o.rest))})),i.map(c,(e=>[e.quantile,e.value]))},_t=(e,t,n,r,a,s)=>{let o=e,c=t,u=n,l=r,f=a,d=s,h=e,p=t,m=n,g=r,y=a,b=s;for(;;){if(!i.isNonEmptyReadonlyArray(d))return{quantile:f,value:k.none(),consumed:l,rest:[]};if(1===f)return{quantile:f,value:k.some(i.lastNonEmpty(d)),consumed:l+d.length,rest:[]};const e=i.span(d,(e=>e<=d[0])),t=f*c,n=o/2*t,r=l+e[0].length,a=Math.abs(r-t);if(r<t-n)h=o,p=c,m=i.head(d),g=r,y=f,b=e[1],o=h,c=p,u=m,l=g,f=y,d=b;else{if(r>t+n)return{quantile:f,value:u,consumed:l,rest:d};switch(u._tag){case"None":h=o,p=c,m=i.head(d),g=r,y=f,b=e[1],o=h,c=p,u=m,l=g,f=y,d=b;continue;case"Some":if(a<Math.abs(t-u.value)){h=o,p=c,m=i.head(d),g=r,y=f,b=e[1],o=h,c=p,u=m,l=g,f=y,d=b;continue}return{quantile:f,value:k.some(u.value),consumed:l,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},It=Symbol.for("effect/MetricPair"),Tt={_Type:e=>e},Ot=(e,t)=>({[It]:Tt,metricKey:e,metricState:t,pipe(){return(0,x.pipeArguments)(this,arguments)}}),At=Symbol.for("effect/MetricRegistry");class Nt{[At]=At;map=ze.empty();snapshot(){const e=[];for(const[t,n]of this.map)e.push(Ot(t,n.get()));return e}get(e){const t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){if(Ne(e.keyType))return this.getCounter(e);if(Re(e.keyType))return this.getGauge(e);if(Ce(e.keyType))return this.getFrequency(e);if(Fe(e.keyType))return this.getHistogram(e);if(Me(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}return t}getCounter(e){let t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){const n=St(e);(0,m.pipe)(this.map,ze.has(e))||(0,m.pipe)(this.map,ze.set(e,n)),t=n}return t}getFrequency(e){let t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){const n=wt(e);(0,m.pipe)(this.map,ze.has(e))||(0,m.pipe)(this.map,ze.set(e,n)),t=n}return t}getGauge(e){let t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){const n=vt(0,e.keyType.bigint?BigInt(0):0);(0,m.pipe)(this.map,ze.has(e))||(0,m.pipe)(this.map,ze.set(e,n)),t=n}return t}getHistogram(e){let t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){const n=Et(e);(0,m.pipe)(this.map,ze.has(e))||(0,m.pipe)(this.map,ze.set(e,n)),t=n}return t}getSummary(e){let t=(0,m.pipe)(this.map,ze.get(e),k.getOrUndefined);if(null==t){const n=kt(e);(0,m.pipe)(this.map,ze.has(e))||(0,m.pipe)(this.map,ze.set(e,n)),t=n}return t}}const Ct=Symbol.for("effect/Metric"),Rt={_Type:e=>e,_In:e=>e,_Out:e=>e},Ft=(0,g.globalValue)(Symbol.for("effect/Metric/globalMetricRegistry"),(()=>new Nt)),Mt=function(e,t,n){const r=Object.assign((e=>J.tap(e,(e=>Bt(r,e)))),{[Ct]:Rt,keyType:e,unsafeUpdate:t,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return(0,x.pipeArguments)(this,arguments)}});return r},Lt=(e,t)=>Pt(qe(e,t)),Pt=e=>{let t;const n=new WeakMap,r=r=>{if(0===r.length)return void 0!==t||(t=Ft.get(e)),t;let i=n.get(r);return void 0!==i||(i=Ft.get(We(e,r)),n.set(r,i)),i};return Mt(e.keyType,((e,t)=>r(t).update(e)),(e=>r(e).get()))},Dt=(e,t,n)=>Pt($e(e,t,n)),Ut=(0,m.dual)(3,((e,t,n)=>jt(e,[Le.make(t,n)]))),jt=(0,m.dual)(2,((e,t)=>Mt(e.keyType,((n,r)=>e.unsafeUpdate(n,i.union(t,r))),(n=>e.unsafeValue(i.union(t,n)))))),Bt=(0,m.dual)(2,((e,t)=>J.fiberRefGetWith(J.currentMetricLabels,(n=>J.sync((()=>e.unsafeUpdate(t,n)))))));var qt=n(889706),$t=n(937540),Wt=n(502146),zt=n(66932),Vt=n(235021),Gt=n(245779),Kt=n(211635),Jt=n(281),Ht=n(889542),Yt=n(861324),Zt=n(888961),Qt=n(776273);Gt.DifferTypeId,Kt.ChunkPatchTypeId,Jt.ContextPatchTypeId,Ht.HashMapPatchTypeId,Yt.HashSetPatchTypeId,Zt.OrPatchTypeId,Qt.ReadonlyArrayPatchTypeId;const Xt=Gt.make,en=(Gt.environment,Gt.chunk,Gt.hashMap,Gt.hashSet,Gt.orElseEither,Gt.readonlyArray,Gt.transform,Gt.update,Gt.updateWith,Gt.zip,"Empty"),tn="AddSupervisor",nn="RemoveSupervisor",rn="AndThen",an={_tag:en},sn=(e,t)=>({_tag:rn,first:e,second:t}),on=(e,t)=>{let n=e,r=t;for(;s.isNonEmpty(r);){const e=s.headNonEmpty(r);switch(e._tag){case en:r=s.tailNonEmpty(r);break;case tn:n=n.zip(e.supervisor),r=s.tailNonEmpty(r);break;case nn:n=cn(n,e.supervisor),r=s.tailNonEmpty(r);break;case rn:r=s.prepend(e.first)(s.prepend(e.second)(s.tailNonEmpty(r)))}}return n},cn=(e,t)=>ce.equals(e,t)?Vt.none:Vt.isZip(e)?cn(e.left,t).zip(cn(e.right,t)):e,un=e=>ce.equals(e,Vt.none)?b.empty():Vt.isZip(e)?(0,m.pipe)(un(e.left),b.union(un(e.right))):b.make(e),ln=Xt({empty:an,patch:(e,t)=>on(t,s.of(e)),combine:sn,diff:(e,t)=>{if(ce.equals(e,t))return an;const n=un(e),r=un(t),i=(0,m.pipe)(r,b.difference(n),b.reduce(an,((e,t)=>sn(e,{_tag:tn,supervisor:t})))),a=(0,m.pipe)(n,b.difference(r),b.reduce(an,((e,t)=>sn(e,{_tag:nn,supervisor:t}))));return sn(i,a)}});var fn=n(127514),dn=n(853563);const hn=Lt("effect_fiber_started",{incremental:!0}),pn=Lt("effect_fiber_active"),mn=Lt("effect_fiber_successes",{incremental:!0}),gn=Lt("effect_fiber_failures",{incremental:!0}),yn=Ut(Dt("effect_fiber_lifetimes",me({start:.5,factor:2,count:35})),"time_unit","milliseconds"),bn="Continue",Sn="Yield",wn={_E:e=>e,_A:e=>e},vn=e=>{throw new Error(`BUG: FiberRuntime - ${S.toStringUnknown(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},En=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),kn=(0,g.globalValue)("effect/internal/fiberRuntime/yieldedOpChannel",(()=>({currentOp:null}))),xn={[qt.OP_ON_SUCCESS]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i1(n))),OnStep:(e,t,n)=>J.exitSucceed(J.exitSucceed(n)),[qt.OP_ON_SUCCESS_AND_FAILURE]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i2(n))),[qt.OP_REVERT_FLAGS]:(e,t,n)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),zt.interruptible(e._runtimeFlags)&&e.isInterrupted()?J.exitFailCause(e.getInterruptedCause()):J.exitSucceed(n)),[qt.OP_WHILE]:(e,t,n)=>((0,r.internalCall)((()=>t.effect_instruction_i2(n))),(0,r.internalCall)((()=>t.effect_instruction_i0()))?(e.pushStack(t),(0,r.internalCall)((()=>t.effect_instruction_i1()))):J.void)},_n={[re.OP_INTERRUPT_SIGNAL]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),zt.interruptible(t)?J.exitFailCause(r.cause):n),[re.OP_RESUME]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[re.OP_STATEFUL]:(e,t,n,r)=>(r.onFiber(e,p.running(t)),n),[re.OP_YIELD_NOW]:(e,t,n,r)=>J.flatMap(J.yieldNow(),(()=>n))};class In{[ne.FiberTypeId]=ne.fiberVariance;[ne.RuntimeFiberTypeId]=wn;pipe(){return(0,x.pipeArguments)(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,n){if(this._runtimeFlags=n,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(ei),this._scheduler=this.getFiberRef(W.currentScheduler),zt.runtimeMetrics(n)){const e=this.getFiberRef(J.currentMetricLabels);hn.unsafeUpdate(1,e),pn.unsafeUpdate(1,e)}this._tracer=o.get(this.getFiberRef(X.currentServices),fn.tracerTag)}id(){return this._fiberId}resume(e){this.tell(re.resume(e))}get status(){return this.ask(((e,t)=>t))}get runtimeFlags(){return this.ask(((e,t)=>p.isDone(t)?e._runtimeFlags:t.runtimeFlags))}scope(){return ae.unsafeMake(this)}get children(){return this.ask((e=>Array.from(e.getChildren())))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(J.currentInterruptedCause)}fiberRefs(){return this.ask((e=>e.getFiberRefs()))}ask(e){return J.suspend((()=>{const t=J.deferredUnsafeMake(this._fiberId);return this.tell(re.stateful(((n,r)=>{J.deferredUnsafeDone(t,J.sync((()=>e(n,r))))}))),J.deferredAwait(t)}))}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return J.async((e=>{const t=t=>e(J.succeed(t));return this.tell(re.stateful(((e,n)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)}))),J.sync((()=>this.tell(re.stateful(((e,n)=>{e.removeObserver(t)})))))}),this.id())}get inheritAll(){return J.withFiberRuntime(((e,t)=>{const n=e.id(),r=e.getFiberRefs(),i=t.runtimeFlags,a=this.getFiberRefs(),s=ie.joinAs(r,n,a);e.setFiberRefs(s);const o=e.getFiberRef(Xr),c=(0,m.pipe)(zt.diff(i,o),$.exclude(zt.Interruption),$.exclude(zt.WindDown));return J.updateRuntimeFlags(c)}))}get poll(){return J.sync((()=>k.fromNullable(this._exitValue)))}unsafePoll(){return this._exitValue}interruptAsFork(e){return J.sync((()=>this.tell(re.interruptSignal(V.interrupt(e)))))}unsafeInterruptAsFork(e){this.tell(re.interruptSignal(V.interrupt(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter((t=>t!==e))}getFiberRefs(){return this.setFiberRef(Xr,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=ie.delete_(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=ie.updateAs(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=o.get(this.getFiberRef(X.currentServices),fn.tracerTag),this._supervisor=this.getFiberRef(ei),this._scheduler=this.getFiberRef(W.currentScheduler)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=bn;const n=globalThis[ne.currentFiberURI];globalThis[ne.currentFiberURI]=this;try{for(;t===bn;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[ne.currentFiberURI]=n}this._queue.length>0&&!this._running?(this._running=!0,t===Sn?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(J.currentSchedulingPriority))}drainQueueWhileRunning(e,t){let n=t;for(;this._queue.length>0;){const t=this._queue.splice(0,1)[0];n=_n[t._tag](this,e,n,t)}return n}isInterrupted(){return!V.isEmpty(this.getFiberRef(J.currentInterruptedCause))}addInterruptedCause(e){const t=this.getFiberRef(J.currentInterruptedCause);this.setFiberRef(J.currentInterruptedCause,V.sequential(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(const t of this._children)t.tell(re.interruptSignal(V.interrupt(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let t=!1;const n=()=>{const n=e.next();return n.done?J.sync((()=>{t=!0})):J.asVoid(n.value.await)};return J.whileLoop({while:()=>!t,body:n,step:()=>{}})}return null}reportExitValue(e){if(zt.runtimeMetrics(this._runtimeFlags)){const t=this.getFiberRef(J.currentMetricLabels),n=this.id().startTimeMillis,r=Date.now();switch(yn.unsafeUpdate(r-n,t),pn.unsafeUpdate(-1,t),e._tag){case qt.OP_SUCCESS:mn.unsafeUpdate(1,t);break;case qt.OP_FAILURE:gn.unsafeUpdate(1,t)}}if("Failure"===e._tag){const t=this.getFiberRef(J.currentUnhandledErrorLogLevel);V.isInterruptedOnly(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(Dn)}log(e,t,n){const r=k.isSome(n)?n.value:this.getFiberRef(J.currentLogLevel),i=this.getFiberRef(Tn);if(w.greaterThan(i,r))return;const a=this.getFiberRef(J.currentLogSpan),s=this.getFiberRef(J.currentLogAnnotations),c=this.getLoggers(),u=this.getFiberRefs();if(b.size(c)>0){const n=o.get(this.getFiberRef(X.currentServices),G.clockTag),i=new Date(n.unsafeCurrentTimeMillis());for(const o of c)o.log({fiberId:this.id(),logLevel:r,message:e,cause:t,context:u,spans:a,annotations:s,date:i})}}evaluateMessageWhileSuspended(e){switch(e._tag){case re.OP_YIELD_NOW:return Sn;case re.OP_INTERRUPT_SIGNAL:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(J.exitFailCause(e.cause)),this._asyncInterruptor=null),bn;case re.OP_RESUME:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),bn;case re.OP_STATEFUL:return e.onFiber(this,null!==this._exitValue?p.done:p.suspended(this._runtimeFlags,this._asyncBlockingOn)),bn;default:return vn(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=zt.interruptible(this._runtimeFlags)&&this.isInterrupted()?J.exitFailCause(this.getInterruptedCause()):e;for(;null!==t;){const e=t,n=this.runLoop(e);if(n===En){const e=kn.currentOp;kn.currentOp=null,e._op===qt.OP_YIELD?zt.cooperativeYielding(this._runtimeFlags)?(this.tell(re.yieldNow()),this.tell(re.resume(J.exitVoid)),t=null):t=J.exitVoid:e._op===qt.OP_ASYNC&&(t=null)}else{this._runtimeFlags=(0,m.pipe)(this._runtimeFlags,zt.enable(zt.WindDown));const e=this.interruptAllChildren();null!==e?t=J.flatMap(e,(()=>n)):(0===this._queue.length?this.setExitValue(n):this.tell(re.resume(n)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(re.resume(e));else{this._running=!0;const t=globalThis[ne.currentFiberURI];globalThis[ne.currentFiberURI]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[ne.currentFiberURI]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(re.resume(e))}patchRuntimeFlags(e,t){const n=zt.patch(e,t);return globalThis[ne.currentFiberURI]=this,this._runtimeFlags=n,n}initiateAsync(e,t){let n=!1;const r=e=>{n||(n=!0,this.tell(re.resume(e)))};zt.interruptible(e)&&(this._asyncInterruptor=r);try{t(r)}catch(i){r(J.failCause(V.die(i)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==qt.OP_ON_FAILURE)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==qt.OP_ON_SUCCESS&&e._op!==qt.OP_WHILE)return e;e=this.popStack()}}[qt.OP_TAG](e){return J.map(J.fiberRefGet(J.currentContext),(t=>o.unsafeGet(t,e)))}Left(e){return J.fail(e.left)}None(e){return J.fail(new J.NoSuchElementException)}Right(e){return J.exitSucceed(e.right)}Some(e){return J.exitSucceed(e.value)}Micro(e){return J.unsafeAsync((t=>{const n=(()=>{const e=new AbortController,t=Object.create(null);return t[D.key]=e,t[U.key]=e.signal,R(t)})().pipe(M(j,this.getFiberRef(J.currentContext)));let r=t;return e[T](n,(e=>{if("Right"===e._tag)return r(J.exitSucceed(e.right));switch(e.left._tag){case"Interrupt":return r(J.exitFailCause(V.interrupt(f.none)));case"Fail":return r(J.fail(e.left.error));case"Die":return r(J.die(e.left.defect))}})),J.async((e=>{r=t=>{e(J.void)},F(n,D).abort()}))}))}[qt.OP_SYNC](e){const t=(0,r.internalCall)((()=>e.effect_instruction_i0())),n=this.getNextSuccessCont();return void 0!==n?(n._op in xn||vn(n),xn[n._op](this,n,t)):(kn.currentOp=J.exitSucceed(t),En)}[qt.OP_SUCCESS](e){const t=e,n=this.getNextSuccessCont();return void 0!==n?(n._op in xn||vn(n),xn[n._op](this,n,t.effect_instruction_i0)):(kn.currentOp=t,En)}[qt.OP_FAILURE](e){const t=e.effect_instruction_i0,n=this.getNextFailCont();if(void 0===n)return kn.currentOp=J.exitFailCause(t),En;switch(n._op){case qt.OP_ON_FAILURE:case qt.OP_ON_SUCCESS_AND_FAILURE:return zt.interruptible(this._runtimeFlags)&&this.isInterrupted()?J.exitFailCause(V.stripFailures(t)):(0,r.internalCall)((()=>n.effect_instruction_i1(t)));case"OnStep":return zt.interruptible(this._runtimeFlags)&&this.isInterrupted()?J.exitFailCause(V.stripFailures(t)):J.exitSucceed(J.exitFailCause(t));case qt.OP_REVERT_FLAGS:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),zt.interruptible(this._runtimeFlags)&&this.isInterrupted()?J.exitFailCause(V.sequential(t,this.getInterruptedCause())):J.exitFailCause(t);default:vn(n)}}[qt.OP_WITH_RUNTIME](e){return(0,r.internalCall)((()=>e.effect_instruction_i0(this,p.running(this._runtimeFlags))))}Blocked(e){const t=this.getFiberRefs(),n=this._runtimeFlags;if(this._steps.length>0){const r=[],i=this._steps[this._steps.length-1];let a=this.popStack();for(;a&&"OnStep"!==a._op;)r.push(a),a=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;const s=h.diff(i.refs,t),o=zt.diff(i.flags,n);return J.exitSucceed(J.blocked(e.effect_instruction_i0,J.withFiberRuntime((t=>{for(;r.length>0;)t.pushStack(r.pop());return t.setFiberRefs(h.patch(t.id(),t.getFiberRefs())(s)),t._runtimeFlags=zt.patch(o)(t._runtimeFlags),e.effect_instruction_i1}))))}return J.uninterruptibleMask((t=>J.flatMap(ir(J.runRequestBlock(e.effect_instruction_i0)),(()=>t(e.effect_instruction_i1)))))}RunBlocked(e){return(e=>J.forEachSequentialDiscard(z.flatten(e),(e=>tr(z.sequentialCollectionToChunk(e),(([e,t])=>{const n=new Map,r=[];for(const a of t){r.push(s.toReadonlyArray(a));for(const e of a)n.set(e.request,e)}const i=r.flat();return J.fiberRefLocally(di(e.runAll(r),i,(()=>i.forEach((e=>{e.listeners.interrupted=!0})))),K.currentRequestMap,n)}),!1,!1))))(e.effect_instruction_i0)}[qt.OP_UPDATE_RUNTIME_FLAGS](e){const t=e.effect_instruction_i0,n=this._runtimeFlags,i=zt.patch(n,t);if(zt.interruptible(i)&&this.isInterrupted())return J.exitFailCause(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),e.effect_instruction_i1){const t=zt.diff(i,n);return this.pushStack(new J.RevertFlags(t,e)),(0,r.internalCall)((()=>e.effect_instruction_i1(n)))}return J.exitVoid}[qt.OP_ON_SUCCESS](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[qt.OP_ON_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[qt.OP_ON_SUCCESS_AND_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[qt.OP_ASYNC](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),kn.currentOp=e,En}[qt.OP_YIELD](e){return this.isYielding=!1,kn.currentOp=e,En}[qt.OP_WHILE](e){const t=e.effect_instruction_i0,n=e.effect_instruction_i1;return t()?(this.pushStack(e),n()):J.exitVoid}[qt.OP_COMMIT](e){return(0,r.internalCall)((()=>e.commit()))}runLoop(e){let t=e;for(this.currentOpCount=0;;){if(0!==(this._runtimeFlags&zt.OpSupervision)&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;const e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;const n=t;t=J.flatMap(J.yieldNow({priority:e}),(()=>n))}}try{if("_op"in t&&t._op in this||vn(t),t=this._tracer.context((()=>dn.getCurrentVersion()!==t[u.EffectTypeId]._V?J.dieMessage(`Cannot execute an Effect versioned ${t[u.EffectTypeId]._V} with a Runtime of version ${dn.getCurrentVersion()}`):this[t._op](t)),this),t===En){const e=kn.currentOp;return e._op===qt.OP_YIELD||e._op===qt.OP_ASYNC?En:(kn.currentOp=null,e._op===qt.OP_SUCCESS||e._op===qt.OP_FAILURE?e:J.exitFailCause(V.die(e)))}}catch(n){t=J.isEffectError(n)?J.exitFailCause(n.cause):J.isInterruptedException(n)?J.exitFailCause(V.sequential(V.die(n),V.interrupt(f.none))):J.die(n)}}}run=()=>{this.drainQueueOnCurrentThread()}}const Tn=(0,g.globalValue)("effect/FiberRef/currentMinimumLogLevel",(()=>J.fiberRefUnsafeMake(w.fromLiteral("Info")))),On=e=>se.makeLogger((t=>{const n=d.getOrDefault(t.context,X.currentServices);o.get(n,ee.consoleTag).unsafe.log(e.log(t))})),An=e=>se.makeLogger((t=>{const n=d.getOrDefault(t.context,X.currentServices);o.get(n,ee.consoleTag).unsafe.error(e.log(t))})),Nn=(0,g.globalValue)(Symbol.for("effect/Logger/defaultLogger"),(()=>On(se.stringLogger))),Cn=(0,g.globalValue)(Symbol.for("effect/Logger/jsonLogger"),(()=>On(se.jsonLogger))),Rn=(0,g.globalValue)(Symbol.for("effect/Logger/logFmtLogger"),(()=>On(se.logfmtLogger))),Fn=(0,g.globalValue)(Symbol.for("effect/Logger/prettyLogger"),(()=>se.prettyLogger())),Mn=(0,g.globalValue)(Symbol.for("effect/Logger/structuredLogger"),(()=>On(se.structuredLogger))),Ln=(0,g.globalValue)(Symbol.for("effect/Logger/tracerLogger"),(()=>se.makeLogger((({annotations:e,cause:t,context:n,fiberId:r,logLevel:i,message:a})=>{const s=k.flatMap(ie.get(n,J.currentContext),o.getOption(fn.spanTag)),c=k.map(ie.get(n,X.currentServices),(e=>o.get(e,G.clockTag)));if("None"===s._tag||"ExternalSpan"===s.value._tag||"None"===c._tag)return;const u=Object.fromEntries(y.map(e,S.toStringUnknown));u["effect.fiberId"]=f.threadName(r),u["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(u["effect.cause"]=V.pretty(t)),s.value.event(String(a),c.value.unsafeCurrentTimeNanos(),u)})))),Pn=e=>se.mapInputOptions(e,(e=>{const t=k.flatMap(ie.get(e.context,J.currentContext),o.getOption(fn.spanTag));return"None"===t._tag?e:{...e,annotations:(0,m.pipe)(e.annotations,y.set("effect.traceId",t.value.traceId),y.set("effect.spanId",t.value.spanId),"Span"===t.value._tag?y.set("effect.spanName",t.value.name):m.identity)}})),Dn=(0,g.globalValue)(Symbol.for("effect/FiberRef/currentLoggers"),(()=>J.fiberRefUnsafeMakeHashSet(b.make(Nn,Ln)))),Un=(0,m.dual)(3,((e,t,n)=>J.flatMap(Br,(r=>{let i=[];const a=J.suspend((()=>{if(0===i.length)return J.void;const e=i;return i=[],n(e)}));return J.uninterruptibleMask((n=>(0,m.pipe)(Q.sleep(t),J.zipRight(a),Q.forever,n,ir,J.flatMap((e=>J.scopeAddFinalizer(r,J.interruptFiber(e)))),J.zipRight($n((()=>a))),J.as(se.makeLogger((t=>{i.push(e.log(t))}))))))})))),jn=function(){if("string"===typeof arguments[0])return Jr(J.currentLogAnnotations,y.set(arguments[0],arguments[1]));const e=Object.entries(arguments[0]);return Jr(J.currentLogAnnotations,y.mutate((t=>{for(let n=0;n<e.length;n++){const[r,i]=e[n];y.set(t,r,i)}return t})))},Bn=(0,m.dual)((e=>J.isEffect(e[0])),((e,t)=>J.uninterruptible(J.tap(e,(e=>$n((n=>t(e,n)))))))),qn=(0,m.dual)((e=>J.isEffect(e[0])),((e,t)=>fi(e,$n((e=>t(e)))))),$n=e=>J.withFiberRuntime((t=>{const n=t.getFiberRefs(),r=t._runtimeFlags;return J.flatMap(Br,(t=>J.scopeAddFinalizerExit(t,(t=>J.withFiberRuntime((i=>{const a=i.getFiberRefs(),s=i._runtimeFlags,o=h.diff(a,n),c=zt.diff(s,r),u=h.diff(n,a);return i.setFiberRefs(h.patch(o,i.id(),n)),fi(J.withRuntimeFlags(e(t),c),J.sync((()=>{i.setFiberRefs(h.patch(u,i.id(),i.getFiberRefs()))})))}))))))})),Wn=e=>J.fiberRefLocally(J.currentForkScopeOverride,k.some(ae.globalScope))(e),zn=Symbol.for("effect/Effect/existsPar/found"),Vn=(0,m.dual)((e=>_.isIterable(e[0])&&!J.isEffect(e[0])),((e,t,n)=>Y(n?.concurrency,(()=>J.suspend((()=>Gn(e[Symbol.iterator](),0,t)))),(()=>J.matchEffect(Xn(e,((e,n)=>J.if_(t(e,n),{onTrue:()=>J.fail(zn),onFalse:()=>J.void})),n),{onFailure:e=>e===zn?J.succeed(!0):J.fail(e),onSuccess:()=>J.succeed(!1)}))))),Gn=(e,t,n)=>{const r=e.next();return r.done?J.succeed(!1):(0,m.pipe)(J.flatMap(n(r.value,t),(r=>r?J.succeed(r):Gn(e,t+1,n))))},Kn=(0,m.dual)((e=>_.isIterable(e[0])&&!J.isEffect(e[0])),((e,t,n)=>{const r=n?.negate?(e,n)=>J.map(t(e,n),a.not):t;return Y(n?.concurrency,(()=>J.suspend((()=>i.fromIterable(e).reduceRight(((e,t,n)=>J.zipWith(e,J.suspend((()=>r(t,n))),((e,n)=>n?[t,...e]:e))),J.sync((()=>new Array)))))),(()=>J.map(Xn(e,((e,t)=>J.map(r(e,t),(t=>t?k.some(e):k.none()))),n),i.getSomes)))})),Jn=(e,t)=>{const[n,r]=(e=>{if(Array.isArray(e)||_.isIterable(e))return[e,k.none()];const t=Object.keys(e),n=t.length;return[t.map((t=>e[t])),k.some((e=>{const r={};for(let i=0;i<n;i++)r[t[i]]=e[i];return r}))]})(e);return"validate"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(J.either(i));return J.flatMap(Xn(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>{const r=k.none(),i=e.length,a=new Array(i),s=new Array(i);let o=!1;for(let t=0;t<i;t++){const n=e[t];"Left"===n._tag?(a[t]=k.some(n.left),o=!0):(s[t]=n.right,a[t]=r)}return o?"Some"===t._tag?J.fail(t.value(a)):J.fail(a):n?.discard?J.void:"Some"===t._tag?J.succeed(t.value(s)):J.succeed(s)}))})(n,r,t):"either"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(J.either(i));return n?.discard?Xn(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):J.map(Xn(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>"Some"===t._tag?t.value(e):e))})(n,r,t):!0!==t?.discard&&"Some"===r._tag?J.map(Xn(n,m.identity,t),r.value):Xn(n,m.identity,t)},Hn=e=>t=>Jn(t,e),Yn=(e,t)=>J.map(Jn(i.fromIterable(e).map(J.exit),t),i.filterMap((e=>J.exitIsSuccess(e)?k.some(e.effect_instruction_i0):k.none()))),Zn=(0,m.dual)(2,((e,t)=>Array.from({length:t},(()=>e)))),Qn=(0,m.dual)((e=>J.isEffect(e[0])),((e,t,n)=>Jn(Zn(e,t),n))),Xn=(0,m.dual)((e=>_.isIterable(e[0])),((e,t,n)=>J.withFiberRuntime((r=>{const i=!0===n?.batching||"inherit"===n?.batching&&r.getFiberRef(J.currentRequestBatching);return n?.discard?H(n.concurrency,(()=>br(l.sequential)((n=>i?tr(e,((e,r)=>n(t(e,r))),!0,!1,1):J.forEachSequentialDiscard(e,((e,r)=>n(t(e,r))))))),(()=>br(l.parallel)((n=>tr(e,((e,r)=>n(t(e,r))),i,!1)))),(n=>br(l.parallelN(n))((r=>tr(e,((e,n)=>r(t(e,n))),i,!1,n))))):H(n?.concurrency,(()=>br(l.sequential)((n=>i?nr(e,1,((e,r)=>n(t(e,r))),!0):J.forEachSequential(e,((e,r)=>n(t(e,r))))))),(()=>br(l.parallel)((n=>er(e,((e,r)=>n(t(e,r))),i)))),(n=>br(l.parallelN(n))((r=>nr(e,n,((e,n)=>r(t(e,n))),i)))))})))),er=(e,t,n)=>J.suspend((()=>{const r=i.fromIterable(e),a=new Array(r.length);return J.zipRight(tr(r,((e,n)=>J.flatMap(t(e,n),(e=>J.sync((()=>a[n]=e))))),n,!1),J.succeed(a))})),tr=(e,t,n,r,i)=>J.uninterruptibleMask((a=>J.transplant((s=>J.withFiberRuntime((o=>{let c=Array.from(e).reverse(),u=c.length;if(0===u)return J.void;let l=0,f=!1;const d=i?Math.min(c.length,i):c.length,h=new Set,p=new Array,m=new Array,g=new Array,y=new Array,b=()=>{const e=p.filter((({exit:e})=>"Failure"===e._tag)).sort(((e,t)=>e.index<t.index?-1:e.index===t.index?0:1)).map((({exit:e})=>e));return 0===e.length&&e.push(J.exitVoid),e},S=(e,t=!1)=>{const n=J.uninterruptible(s(e)),r=or(n,o,o._runtimeFlags,ae.globalScope);return o._scheduler.scheduleTask((()=>{t&&r.unsafeInterruptAsFork(o.id()),r.resume(n)}),0),r},w=()=>{r||(u-=c.length,c=[]),f=!0,h.forEach((e=>{e._scheduler.scheduleTask((()=>{e.unsafeInterruptAsFork(o.id())}),0)}))},v=n?J.step:J.exit,E=S(J.async((e=>{const r=(e,t)=>{"Blocked"===e._op?y.push(e):(p.push({index:t,exit:e}),"Failure"!==e._op||f||w())},s=()=>{if(c.length>0){const d=c.pop();let w=l++;const E=()=>{const e=c.pop();return w=l++,J.flatMap(J.yieldNow(),(()=>J.flatMap(v(a(t(e,w))),x)))},x=e=>c.length>0&&(r(e,w),c.length>0)?E():J.succeed(e),_=J.flatMap(v(a(t(d,w))),x),I=S(_);m.push(I),h.add(I),f&&I._scheduler.scheduleTask((()=>{I.unsafeInterruptAsFork(o.id())}),0),I.addObserver((t=>{let a;if(a="Failure"===t._op?t:t.effect_instruction_i0,g.push(I),h.delete(I),r(a,w),p.length===u)e(J.succeed(k.getOrElse(J.exitCollectAll(b(),{parallel:!0}),(()=>J.exitVoid))));else if(y.length+p.length===u){const t=y.map((e=>e.effect_instruction_i0)).reduce(z.par);e(J.succeed(J.blocked(t,tr([k.getOrElse(J.exitCollectAll(b(),{parallel:!0}),(()=>J.exitVoid)),...y.map((e=>e.effect_instruction_i1))],(e=>e),n,!0,i))))}else s()}))}};for(let t=0;t<d;t++)s()})));return J.asVoid(J.onExit(J.flatten(a(ne.join(E))),J.exitMatch({onFailure:()=>{w();const e=y.length+1,t=Math.min("number"===typeof i?i:y.length,y.length),n=Array.from(y);return J.async((r=>{const i=[];let a=0,s=0;const o=(t,s)=>o=>{i[t]=o,a++,a===e&&r(k.getOrThrow(J.exitCollectAll(i,{parallel:!0}))),n.length>0&&s&&c()},c=()=>{S(n.pop(),!0).addObserver(o(s,!0)),s++};E.addObserver(o(s,!1)),s++;for(let e=0;e<t;e++)c()}))},onSuccess:()=>J.forEachSequential(g,(e=>e.inheritAll))})))})))))),nr=(e,t,n,r)=>J.suspend((()=>{const a=i.fromIterable(e),s=new Array(a.length);return J.zipRight(tr(a,((e,t)=>J.map(n(e,t),(e=>s[t]=e))),r,!1,t),J.succeed(s))})),rr=e=>J.withFiberRuntime(((t,n)=>J.succeed(sr(e,t,n.runtimeFlags)))),ir=e=>ur(e,ae.globalScope),ar=(0,m.dual)(2,((e,t)=>rr(J.onError(e,(e=>{const n=V.failureOrCause(e);switch(n._tag){case"Left":return t(n.left);case"Right":return J.failCause(n.right)}}))))),sr=(e,t,n,r=null)=>{const i=cr(e,t,n,r);return i.resume(e),i},or=(e,t,n,r=null)=>cr(e,t,n,r),cr=(e,t,n,r=null)=>{const i=f.unsafeMake(),a=t.getFiberRefs(),s=ie.forkAs(a,i),o=new In(i,s,n),c=ie.getOrDefault(s,J.currentContext),u=o._supervisor;u.onStart(c,e,k.some(t),o),o.addObserver((e=>u.onEnd(e,o)));return(null!==r?r:(0,m.pipe)(t.getFiberRef(J.currentForkScopeOverride),k.getOrElse((()=>t.scope())))).add(n,o),o},ur=(e,t)=>J.withFiberRuntime(((n,r)=>J.succeed(sr(e,n,r.runtimeFlags,t)))),lr=(0,m.dual)((e=>_.isFunction(e[2])),((e,t,n,r)=>Y(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>J.zipWith(e,t,((e,t)=>n(e,t,r)))),J.succeed(t))),(()=>J.flatMap(q.make(t),(t=>J.flatMap(Xn(e,((e,r)=>J.flatMap(e,(e=>q.update(t,(t=>n(t,e,r)))))),r),(()=>q.get(t))))))))),fr=(0,m.dual)((e=>_.isIterable(e[0])),((e,t,n)=>(0,m.pipe)(Xn(e,((e,n)=>J.either(t(e,n))),n),J.map((e=>J.partitionMap(e,m.identity)))))),dr=(0,m.dual)((e=>_.isIterable(e[0])),((e,t,n)=>J.flatMap(fr(e,t,{concurrency:n?.concurrency,batching:n?.batching}),(([e,t])=>0===e.length?n?.discard?J.void:J.succeed(t):J.fail(e))))),hr=e=>{const t=s.fromIterable(e);if(!s.isNonEmpty(t))return J.dieSync((()=>new J.IllegalArgumentException("Received an empty collection of effects")));const n=s.headNonEmpty(t),r=s.tailNonEmpty(t),a=e=>(0,m.pipe)(ne.inheritAll(e[1]),J.as(e[0]));return(0,m.pipe)(J.deferredMake(),J.flatMap((e=>(0,m.pipe)(q.make(r.length),J.flatMap((t=>J.uninterruptibleMask((o=>(0,m.pipe)(rr(J.interruptible(n)),J.flatMap((n=>(0,m.pipe)(r,J.forEachSequential((e=>rr(J.interruptible(e)))),J.map((e=>s.unsafeFromArray(e))),J.map((e=>(0,m.pipe)(e,s.prepend(n)))),J.tap((n=>(0,m.pipe)(n,i.reduce(J.void,((r,i)=>(0,m.pipe)(r,J.zipRight((0,m.pipe)(ne._await(i),J.flatMap(pr(n,i,e,t)),rr,J.asVoid)))))))),J.flatMap((t=>(0,m.pipe)(o((0,m.pipe)(c.await(e),J.flatMap(a))),J.onInterrupt((()=>(0,m.pipe)(t,i.reduce(J.void,((e,t)=>(0,m.pipe)(e,J.zipLeft(J.interruptFiber(t)))))))))))))))))))))))},pr=(e,t,n,r)=>a=>J.exitMatchEffect(a,{onFailure:e=>(0,m.pipe)(q.modify(r,(t=>[0===t?(0,m.pipe)(J.deferredFailCause(n,e),J.asVoid):J.void,t-1])),J.flatten),onSuccess:r=>(0,m.pipe)(J.deferredSucceed(n,[r,t]),J.flatMap((n=>n?(0,m.pipe)(s.fromIterable(e),i.reduce(J.void,((e,n)=>n===t?e:(0,m.pipe)(e,J.zipLeft(J.interruptFiber(n)))))):J.void)))}),mr=(0,m.dual)((e=>_.isIterable(e[0])&&!J.isEffect(e[0])),((e,t,n,r)=>Y(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>J.zipWith(e,t,((e,t)=>n(e,t,r)))),t)),(()=>J.suspend((()=>(0,m.pipe)(lr([t,...e],k.none(),((e,t,r)=>{switch(e._tag){case"None":return k.some(t);case"Some":return k.some(n(e.value,t,r))}}),r),J.map((e=>{switch(e._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return e.value}}))))))))),gr=e=>J.contextWithEffect((t=>k.match(o.getOption(t,jr),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return J.flatMap(J.scopeFork(t,l.parallel),(t=>zr(e,t)))}}}))),yr=e=>t=>J.contextWithEffect((n=>k.match(o.getOption(n,jr),{onNone:()=>t,onSome:n=>"ParallelN"===n.strategy._tag&&n.strategy.parallelism===e?t:J.flatMap(J.scopeFork(n,l.parallelN(e)),(e=>zr(t,e)))}))),br=e=>t=>J.contextWithEffect((n=>k.match(o.getOption(n,jr),{onNone:()=>t(m.identity),onSome:n=>{const r="Parallel"===e._tag?gr:"Sequential"===e._tag?vr:yr(e.parallelism);switch(n.strategy._tag){case"Parallel":return r(t(gr));case"Sequential":return r(t(vr));case"ParallelN":return r(t(yr(n.strategy.parallelism)))}}}))),Sr=e=>J.flatMap(jr,e),wr=e=>J.flatMap(Wr(),(t=>Vr(e,t))),vr=e=>J.contextWithEffect((t=>k.match(o.getOption(t,jr),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return J.flatMap(J.scopeFork(t,l.sequential),(t=>zr(e,t)))}}}))),Er=(e,t)=>kr([Le.make(e,t)]),kr=e=>Jr(J.currentMetricLabels,(t=>i.union(t,e))),xr=(0,m.dual)(2,((e,t)=>J.acquireUseRelease(Wr(),(n=>J.flatMap(zr(e,n),t)),((e,t)=>J.scopeClose(e,t))))),_r=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n)=>Ir(e,t,((e,t)=>[e,t]),n))),Ir=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n,r)=>J.flatten(Dr(J.exit(e),J.exit(t),((e,t)=>J.exitZipWith(e,t,{onSuccess:n,onFailure:(e,t)=>r?.concurrent?V.parallel(e,t):V.sequential(e,t)})),r)))),Tr=(0,m.dual)(2,((e,t)=>J.flatMap(fr(e,t),(([e,t])=>0===e.length?J.succeed(t):J.fail(e))))),Or=(0,m.dual)(2,((e,t)=>J.flatMap(fr(e,t),(([e,t])=>0===e.length?J.void:J.fail(e))))),Ar=(0,m.dual)((e=>_.isIterable(e[0])),((e,t,n)=>J.flip(Xn(e,((e,n)=>J.flip(t(e,n))),n)))),Nr=e=>Jr(X.currentServices,o.add(G.clockTag,e)),Cr=e=>Jr(X.currentServices,o.add($t.randomTag,e)),Rr=e=>Jr(X.currentServices,o.add(Z.configProviderTag,e)),Fr=e=>Sr((t=>J.flatMap(J.scopeFork(t,te.sequential),(t=>(0,m.pipe)(e,zr(t),J.map((e=>[J.fiberIdWith((e=>J.scopeClose(t,J.exitInterrupt(e)))),e]))))))),Mr=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n)=>Dr(e,t,((e,t)=>[e,t]),n))),Lr=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Dr(e,t,((e,t)=>e),n):J.zipLeft(e,t))),Pr=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Dr(e,t,((e,t)=>t),n):J.zipRight(e,t))),Dr=(0,m.dual)((e=>J.isEffect(e[1])),((e,t,n,r)=>J.map(Jn([e,t],{concurrency:r?.concurrent?2:1,batching:r?.batching}),(([e,t])=>n(e,t))))),Ur=e=>e===$.empty?J.void:(0,m.pipe)(J.runtimeFlags,J.flatMap((t=>{const n=zt.patch(t,e),r=zt.diff(n,t);return(0,m.pipe)(J.updateRuntimeFlags(e),J.zipRight($n((()=>J.updateRuntimeFlags(r)))),J.asVoid)})),J.uninterruptible),jr=o.GenericTag("effect/Scope"),Br=jr,qr={[J.ScopeTypeId]:J.ScopeTypeId,[J.CloseableScopeTypeId]:J.CloseableScopeTypeId,pipe(){return(0,x.pipeArguments)(this,arguments)},fork(e){return J.sync((()=>{const t=$r(e);if("Closed"===this.state._tag)return t.state=this.state,t;const n=e=>t.close(e);return this.state.finalizers.add(n),((e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)})(t,(e=>J.sync((()=>{"Open"===this.state._tag&&this.state.finalizers.delete(n)})))),t}))},close(e){return J.suspend((()=>{if("Closed"===this.state._tag)return J.void;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},0===t.length?J.void:te.isSequential(this.strategy)?(0,m.pipe)(J.forEachSequential(t,(t=>J.exit(t(e)))),J.flatMap((e=>(0,m.pipe)(J.exitCollectAll(e),k.map(J.exitAsVoid),k.getOrElse((()=>J.exitVoid)))))):te.isParallel(this.strategy)?(0,m.pipe)(er(t,(t=>J.exit(t(e))),!1),J.flatMap((e=>(0,m.pipe)(J.exitCollectAll(e,{parallel:!0}),k.map(J.exitAsVoid),k.getOrElse((()=>J.exitVoid)))))):(0,m.pipe)(nr(t,this.strategy.parallelism,(t=>J.exit(t(e))),!1),J.flatMap((e=>(0,m.pipe)(J.exitCollectAll(e,{parallel:!0}),k.map(J.exitAsVoid),k.getOrElse((()=>J.exitVoid))))))}))},addFinalizer(e){return J.suspend((()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),J.void)))}},$r=(e=te.sequential)=>{const t=Object.create(qr);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Wr=(e=te.sequential)=>J.sync((()=>$r(e))),zr=(0,m.dual)(2,((e,t)=>J.mapInputContext(e,o.merge(o.make(jr,t))))),Vr=(0,m.dual)(2,((e,t)=>(0,m.pipe)(e,zr(t),J.onExit((e=>t.close(e)))))),Gr=e=>J.fiberRefUnsafeMakePatch(e,{differ:ln,fork:an}),Kr=(0,m.dual)(2,((e,t)=>J.asVoid(Bn(J.flatMap(J.fiberRefGet(e),(n=>J.as(J.fiberRefSet(e,t),n))),(t=>J.fiberRefSet(e,t)))))),Jr=(0,m.dual)(2,((e,t)=>J.fiberRefGetWith(e,(n=>Kr(e,t(n)))))),Hr=(e,t)=>Yr((()=>J.fiberRefUnsafeMake(e,t))),Yr=e=>Bn(J.tap(J.sync(e),(e=>J.fiberRefUpdate(e,m.identity))),(e=>J.fiberRefDelete(e))),Zr=e=>Yr((()=>J.fiberRefUnsafeMakeContext(e))),Qr=e=>Yr((()=>J.fiberRefUnsafeMakeRuntimeFlags(e))),Xr=J.fiberRefUnsafeMakeRuntimeFlags(zt.none),ei=Gr(Vt.none),ti=e=>J.asVoid(ne._await(ni(e))),ni=e=>({[ne.FiberTypeId]:ne.fiberVariance,id:()=>i.fromIterable(e).reduce(((e,t)=>f.combine(e,t.id())),f.none),await:J.exit(er(e,(e=>J.flatten(e.await)),!1)),children:J.map(er(e,(e=>e.children),!1),i.flatten),inheritAll:J.forEachSequentialDiscard(e,(e=>e.inheritAll)),poll:J.map(J.forEachSequential(e,(e=>e.poll)),i.reduceRight(k.some(J.exitSucceed(new Array)),((e,t)=>{switch(t._tag){case"None":return k.none();case"Some":switch(e._tag){case"None":return k.none();case"Some":return k.some(J.exitZipWith(t.value,e.value,{onSuccess:(e,t)=>[e,...t],onFailure:V.parallel}))}}}))),interruptAsFork:t=>J.forEachSequentialDiscard(e,(e=>e.interruptAsFork(t))),pipe(){return(0,x.pipeArguments)(this,arguments)}}),ri=e=>J.asVoid(ir(J.interruptFiber(e))),ii=e=>ne.join(ni(e)),ai=e=>Bn(J.succeed(e),J.interruptFiber),si=(0,m.dual)(3,((e,t,n)=>ui(e,t,{onSelfWin:(e,t)=>J.flatMap(e.await,(r=>{switch(r._tag){case qt.OP_SUCCESS:return J.flatMap(e.inheritAll,(()=>n.onSelfDone(r,t)));case qt.OP_FAILURE:return n.onSelfDone(r,t)}})),onOtherWin:(e,t)=>J.flatMap(e.await,(r=>{switch(r._tag){case qt.OP_SUCCESS:return J.flatMap(e.inheritAll,(()=>n.onOtherDone(r,t)));case qt.OP_FAILURE:return n.onOtherDone(r,t)}}))}))),oi=e=>J.uninterruptibleMask((t=>J.fiberIdWith((n=>J.flatMap(ir(t(e)),(e=>(0,m.pipe)(t(ne.join(e)),J.onInterrupt((()=>(0,m.pipe)(e,ne.interruptAsFork(n))))))))))),ci=(0,m.dual)(2,((e,t)=>J.fiberIdWith((n=>si(e,t,{onSelfDone:(e,t)=>J.exitMatchEffect(e,{onFailure:e=>(0,m.pipe)(ne.join(t),Q.mapErrorCause((t=>V.parallel(e,t)))),onSuccess:e=>(0,m.pipe)(t,J.interruptAsFiber(n),J.as(e))}),onOtherDone:(e,t)=>J.exitMatchEffect(e,{onFailure:e=>(0,m.pipe)(ne.join(t),Q.mapErrorCause((t=>V.parallel(t,e)))),onSuccess:e=>(0,m.pipe)(t,J.interruptAsFiber(n),J.as(e))})}))))),ui=(0,m.dual)(3,((e,t,n)=>J.withFiberRuntime(((r,i)=>{const a=i.runtimeFlags,s=B.make(!0),o=cr(e,r,a,n.selfScope),c=cr(t,r,a,n.otherScope);return J.async((r=>{o.addObserver((()=>li(o,c,n.onSelfWin,s,r))),c.addObserver((()=>li(c,o,n.onOtherWin,s,r))),o.startFork(e),c.startFork(t)}),f.combine(o.id(),c.id()))})))),li=(e,t,n,r,i)=>{B.compareAndSet(!0,!1)(r)&&i(n(e,t))},fi=(0,m.dual)(2,((e,t)=>J.uninterruptibleMask((n=>J.matchCauseEffect(n(e),{onFailure:e=>J.matchCauseEffect(t,{onFailure:t=>J.failCause(V.sequential(e,t)),onSuccess:()=>J.failCause(e)}),onSuccess:e=>J.as(t,e)}))))),di=(e,t,n)=>J.fiberIdWith((r=>J.flatMap(J.flatMap(ir(J.interruptible(e)),(e=>J.async((r=>{const i=t.map((e=>e.listeners.count)),a=()=>{i.every((e=>0===e))&&t.every((e=>"Pending"===e.result.state.current._tag||!("Done"!==e.result.state.current._tag||!J.exitIsExit(e.result.state.current.effect)||"Failure"!==e.result.state.current.effect._tag||!V.isInterrupted(e.result.state.current.effect.cause))))&&(s.forEach((e=>e())),n?.(),r(J.interruptFiber(e)))};e.addObserver((e=>{s.forEach((e=>e())),r(e)}));const s=t.map(((e,t)=>{const n=e=>{i[t]=e,a()};return e.listeners.addObserver(n),()=>e.listeners.removeObserver(n)}));return a(),J.sync((()=>{s.forEach((e=>e()))}))})))),(()=>J.suspend((()=>{const e=t.flatMap((e=>e.state.completed?[]:[e]));return J.forEachSequentialDiscard(e,(e=>(0,Wt.complete)(e.request,J.exitInterrupt(r))))})))))),hi=(0,m.dual)(2,((e,t)=>J.fiberRefGetWith(K.currentRequestMap,(n=>J.suspend((()=>{const r=i.fromIterable(t).flatMap((e=>n.has(e)?[n.get(e)]:[]));return di(e,r)})))))),pi=(e,t)=>(t=fn.addSpanStackTrace(t),J.uninterruptible(J.withFiberRuntime((n=>{const r=o.unsafeGet(n.getFiberRef(J.currentContext),jr),i=Q.unsafeMakeSpan(n,e,t),a=n.getFiberRef(J.currentTracerTimingEnabled),s=o.get(n.getFiberRef(X.currentServices),G.clockTag);return J.as(J.scopeAddFinalizerExit(r,(e=>Q.endSpan(i,e,s,a))),i)})))),mi=e=>Jr(X.currentServices,o.add(fn.tracerTag,e)),gi=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=fn.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return J.flatMap(pi(t,fn.addSpanStackTrace(n)),(t=>Q.provideService(e,fn.spanTag,t)))}return e=>J.flatMap(pi(t,fn.addSpanStackTrace(n)),(t=>Q.provideService(e,fn.spanTag,t)))}},508977:(e,t,n)=>{n.r(t),n.d(t,{FiberScopeTypeId:()=>s,globalScope:()=>l,unsafeMake:()=>u});var r=n(295602),i=n(606517),a=n(44402);const s=Symbol.for("effect/FiberScope");class o{[s]=s;fiberId=r.none;roots=new Set;add(e,t){this.roots.add(t),t.addObserver((()=>{this.roots.delete(t)}))}}class c{fiberId;parent;[s]=s;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(a.stateful((e=>{e.addChild(t),t.addObserver((()=>{e.removeChild(t)}))})))}}const u=e=>new c(e.id(),e),l=(0,i.globalValue)(Symbol.for("effect/FiberScope/Global"),(()=>new o))},918799:(e,t,n)=>{n.r(t),n.d(t,{HashMapTypeId:()=>N,beginMutation:()=>ee,compact:()=>pe,empty:()=>U,endMutation:()=>te,entries:()=>Q,filter:()=>he,filterMap:()=>me,findFirst:()=>ge,flatMap:()=>le,forEach:()=>fe,fromIterable:()=>B,get:()=>W,getHash:()=>z,has:()=>G,hasHash:()=>K,isEmpty:()=>$,isHashMap:()=>q,keys:()=>Y,make:()=>j,map:()=>ue,modify:()=>ae,modifyAt:()=>re,modifyHash:()=>ie,mutate:()=>ne,reduce:()=>de,remove:()=>oe,removeMany:()=>ce,set:()=>J,setTree:()=>H,size:()=>X,union:()=>se,unsafeGet:()=>V,values:()=>Z});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(953533),u=n(856572);const l=Math.pow(2,5),f=l-1,d=l/2,h=l/4;function p(e,t){return t>>>e&f}function m(e){return 1<<e}function g(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n}var y=n(107687);function b(e,t,n,r){let i=r;if(!e){const e=r.length;i=new Array(e);for(let t=0;t<e;++t)i[t]=r[t]}return i[t]=n,i}function S(e,t,n){const r=n.length-1;let i=0,a=0,s=n;if(e)i=a=t;else for(s=new Array(r);i<t;)s[a++]=n[i++];for(++i;i<=r;)s[a++]=n[i++];return e&&(s.length=r),s}class w{_tag="EmptyNode";modify(e,t,n,r,i,a){const s=n(o.none());return o.isNone(s)?new w:(++a.value,new k(e,r,i,s))}}function v(e){return(0,u.isTagged)(e,"EmptyNode")}function E(e,t){return!v(e)&&t===e.edit}class k{edit;hash;key;value;_tag="LeafNode";constructor(e,t,n,r){this.edit=e,this.hash=t,this.key=n,this.value=r}modify(e,t,n,i,a,s){if((0,r.equals)(a,this.key)){const t=n(this.value);return t===this.value?this:o.isNone(t)?(--s.value,new w):E(this,e)?(this.value=t,this):new k(e,i,a,t)}const c=n(o.none());return o.isNone(c)?this:(++s.value,O(e,t,this.hash,this,i,new k(e,i,a,c)))}}class x{edit;hash;children;_tag="CollisionNode";constructor(e,t,n){this.edit=e,this.hash=t,this.children=n}modify(e,t,n,r,i,a){if(r===this.hash){const t=E(this,e),r=this.updateCollisionList(t,e,this.hash,this.children,n,i,a);return r===this.children?this:r.length>1?new x(e,this.hash,r):r[0]}const s=n(o.none());return o.isNone(s)?this:(++a.value,O(e,t,this.hash,this,r,new k(e,r,i,s)))}updateCollisionList(e,t,n,i,a,s,c){const u=i.length;for(let f=0;f<u;++f){const u=i[f];if("key"in u&&(0,r.equals)(s,u.key)){const r=u.value,l=a(r);return l===r?i:o.isNone(l)?(--c.value,S(e,f,i)):b(e,f,new k(t,n,s,l),i)}}const l=a(o.none());return o.isNone(l)?i:(++c.value,b(e,u,new k(t,n,s,l),i))}}class _{edit;mask;children;_tag="IndexedNode";constructor(e,t,n){this.edit=e,this.mask=t,this.children=n}modify(e,t,n,r,i,a){const s=this.mask,o=this.children,c=p(t,r),u=m(c),l=g(s,u),f=s&u,h=E(this,e);if(!f){const f=(new w).modify(e,t+5,n,r,i,a);return f?o.length>=d?function(e,t,n,r,i){const a=[];let s=r,o=0;for(let c=0;s;++c)1&s&&(a[c]=i[o++]),s>>>=1;return a[t]=n,new I(e,o+1,a)}(e,c,f,s,o):new _(e,s|u,function(e,t,n,r){const i=r.length;if(e){let e=i;for(;e>=t;)r[e--]=r[e];return r[t]=n,r}let a=0,s=0;const o=new Array(i+1);for(;a<t;)o[s++]=r[a++];for(o[t]=n;a<i;)o[++s]=r[a++];return o}(h,l,f,o)):this}const y=o[l],k=y.modify(e,t+5,n,r,i,a);if(y===k)return this;let x,T=s;if(v(k)){if(T&=~u,!T)return new w;if(o.length<=2&&(v(O=o[1^l])||"LeafNode"===O._tag||"CollisionNode"===O._tag))return o[1^l];x=S(h,l,o)}else x=b(h,l,k,o);var O;return h?(this.mask=T,this.children=x,this):new _(e,T,x)}}class I{edit;size;children;_tag="ArrayNode";constructor(e,t,n){this.edit=e,this.size=t,this.children=n}modify(e,t,n,r,i,a){let s=this.size;const o=this.children,c=p(t,r),u=o[c],l=(u||new w).modify(e,t+5,n,r,i,a);if(u===l)return this;const f=E(this,e);let d;if(v(u)&&!v(l))++s,d=b(f,c,l,o);else if(!v(u)&&v(l)){if(--s,s<=h)return function(e,t,n,r){const i=new Array(t-1);let a=0,s=0;for(let o=0,c=r.length;o<c;++o)if(o!==n){const e=r[o];e&&!v(e)&&(i[a++]=e,s|=1<<o)}return new _(e,s,i)}(e,s,c,o);d=b(f,c,new w,o)}else d=b(f,c,l,o);return f?(this.size=s,this.children=d,this):new I(e,s,d)}}function T(e,t,n,r,i,a){if(n===i)return new x(e,n,[a,r]);const s=p(t,n),o=p(t,i);if(s===o)return t=>new _(e,m(s)|m(o),[t]);{const t=s<o?[r,a]:[a,r];return new _(e,m(s)|m(o),t)}}function O(e,t,n,r,i,a){let s,o=t;for(;;){const t=T(e,o,n,r,i,a);if("function"!==typeof t){let e=t;for(;null!=s;)e=s.value(e),s=s.previous;return e}s=y.make(t,s),o+=5}}const A="effect/HashMap",N=Symbol.for(A),C={[N]:N,[Symbol.iterator](){return new F(this,((e,t)=>[e,t]))},[a.symbol](){let e=a.hash(A);for(const t of this)e^=(0,i.pipe)(a.hash(t[0]),a.combine(a.hash(t[1])));return a.cached(this,e)},[r.symbol](e){if(q(e)){if(e._size!==this._size)return!1;for(const t of this){const n=(0,i.pipe)(e,z(t[0],a.hash(t[0])));if(o.isNone(n))return!1;if(!r.equals(t[1],n.value))return!1}return!0}return!1},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}},R=(e,t,n,r)=>{const i=Object.create(C);return i._editable=e,i._edit=t,i._root=n,i._size=r,i};class F{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=L(this.map._root,this.f,void 0)}next(){if(o.isNone(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=M(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new F(this.map,this.f)}}const M=e=>e?P(e[0],e[1],e[2],e[3],e[4]):o.none(),L=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return o.isSome(e.value)?o.some({value:t(e.key,e.value.value),cont:n}):M(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return P(r.length,r,0,t,n)}default:return M(n)}},P=(e,t,n,r,i)=>{for(;n<e;){const a=t[n++];if(a&&!v(a))return L(a,r,[e,t,n,r,i])}return M(i)},D=R(!1,0,new w,0),U=()=>D,j=(...e)=>B(e),B=e=>{const t=ee(U());for(const n of e)J(t,n[0],n[1]);return te(t)},q=e=>(0,u.hasProperty)(e,N),$=e=>e&&v(e._root),W=i.dual(2,((e,t)=>z(e,t,a.hash(t)))),z=i.dual(3,((e,t,n)=>{let i=e._root,a=0;for(;;)switch(i._tag){case"LeafNode":return r.equals(t,i.key)?i.value:o.none();case"CollisionNode":if(n===i.hash){const e=i.children;for(let n=0,i=e.length;n<i;++n){const i=e[n];if("key"in i&&r.equals(t,i.key))return i.value}}return o.none();case"IndexedNode":{const e=m(p(a,n));if(i.mask&e){i=i.children[g(i.mask,e)],a+=5;break}return o.none()}case"ArrayNode":if(i=i.children[p(a,n)],i){a+=5;break}return o.none();default:return o.none()}})),V=i.dual(2,((e,t)=>{const n=z(e,t,a.hash(t));if(o.isNone(n))throw new Error("Expected map to contain key");return n.value})),G=i.dual(2,((e,t)=>o.isSome(z(e,t,a.hash(t))))),K=i.dual(3,((e,t,n)=>o.isSome(z(e,t,n)))),J=i.dual(3,((e,t,n)=>re(e,t,(()=>o.some(n))))),H=i.dual(3,((e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:R(e._editable,e._edit,t,n))),Y=e=>new F(e,(e=>e)),Z=e=>new F(e,((e,t)=>t)),Q=e=>new F(e,((e,t)=>[e,t])),X=e=>e._size,ee=e=>R(!0,e._edit+1,e._root,e._size),te=e=>(e._editable=!1,e),ne=i.dual(2,((e,t)=>{const n=ee(e);return t(n),te(n)})),re=i.dual(3,((e,t,n)=>ie(e,t,a.hash(t),n))),ie=i.dual(4,((e,t,n,r)=>{const a={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,a);return(0,i.pipe)(e,H(s,a.value))})),ae=i.dual(3,((e,t,n)=>re(e,t,o.map(n)))),se=i.dual(2,((e,t)=>{const n=ee(e);return fe(t,((e,t)=>J(n,t,e))),te(n)})),oe=i.dual(2,((e,t)=>re(e,t,o.none))),ce=i.dual(2,((e,t)=>ne(e,(e=>{for(const n of t)oe(n)(e)})))),ue=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>J(e,r,t(n,r)))))),le=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>ne(e,(e=>fe(t(n,r),((t,n)=>J(e,n,t))))))))),fe=i.dual(2,((e,t)=>de(e,void 0,((e,n,r)=>t(n,r))))),de=i.dual(3,((e,t,n)=>{const r=e._root;if("LeafNode"===r._tag)return o.isSome(r.value)?n(t,r.value.value,r.key):t;if("EmptyNode"===r._tag)return t;const i=[r.children];let a;for(;a=i.pop();)for(let e=0,r=a.length;e<r;){const r=a[e++];r&&!v(r)&&("LeafNode"===r._tag?o.isSome(r.value)&&(t=n(t,r.value.value,r.key)):i.push(r.children))}return t})),he=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e)t(i,r)&&J(n,r,i)})))),pe=e=>me(e,i.identity),me=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e){const e=t(i,r);o.isSome(e)&&J(n,r,e.value)}})))),ge=i.dual(2,((e,t)=>{for(const n of e)if(t(n[1],n[0]))return o.some(n);return o.none()}))},722167:(e,t,n)=>{n.r(t),n.d(t,{HashSetTypeId:()=>f,add:()=>O,beginMutation:()=>_,difference:()=>N,empty:()=>g,endMutation:()=>I,every:()=>v,filter:()=>U,flatMap:()=>L,forEach:()=>P,fromIterable:()=>y,has:()=>S,intersection:()=>C,isHashSet:()=>p,isSubset:()=>E,make:()=>b,makeImpl:()=>h,map:()=>M,mutate:()=>T,partition:()=>j,reduce:()=>D,remove:()=>A,size:()=>x,some:()=>w,toggle:()=>F,union:()=>R,values:()=>k});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(953533),c=n(856572),u=n(918799);const l="effect/HashSet",f=Symbol.for(l),d={[f]:f,[Symbol.iterator](){return u.keys(this._keyMap)},[a.symbol](){return a.cached(this,a.combine(a.hash(this._keyMap))(a.hash(l)))},[r.symbol](e){return!!p(e)&&(u.size(this._keyMap)===u.size(e._keyMap)&&r.equals(this._keyMap,e._keyMap))},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},h=e=>{const t=Object.create(d);return t._keyMap=e,t},p=e=>(0,c.hasProperty)(e,f),m=h(u.empty()),g=()=>m,y=e=>{const t=_(g());for(const n of e)O(t,n);return I(t)},b=(...e)=>{const t=_(g());for(const n of e)O(t,n);return I(t)},S=(0,i.dual)(2,((e,t)=>u.has(e._keyMap,t))),w=(0,i.dual)(2,((e,t)=>{let n=!1;for(const r of e)if(n=t(r),n)break;return n})),v=(0,i.dual)(2,((e,t)=>!w(e,(e=>!t(e))))),E=(0,i.dual)(2,((e,t)=>v(e,(e=>S(t,e))))),k=e=>u.keys(e._keyMap),x=e=>u.size(e._keyMap),_=e=>h(u.beginMutation(e._keyMap)),I=e=>(e._keyMap._editable=!1,e),T=(0,i.dual)(2,((e,t)=>{const n=_(e);return t(n),I(n)})),O=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(u.set(t,!0)(e._keyMap),e):h(u.set(t,!0)(e._keyMap)))),A=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(u.remove(t)(e._keyMap),e):h(u.remove(t)(e._keyMap)))),N=(0,i.dual)(2,((e,t)=>T(e,(e=>{for(const n of t)A(e,n)})))),C=(0,i.dual)(2,((e,t)=>T(g(),(n=>{for(const r of t)S(r)(e)&&O(r)(n)})))),R=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>O(n,e)));for(const e of t)O(n,e)})))),F=(0,i.dual)(2,((e,t)=>S(e,t)?A(e,t):O(e,t))),M=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{const r=t(e);S(n,r)||O(n,r)}))})))),L=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{for(const r of t(e))S(n,r)||O(n,r)}))})))),P=(0,i.dual)(2,((e,t)=>u.forEach(e._keyMap,((e,n)=>t(n))))),D=(0,i.dual)(3,((e,t,n)=>u.reduce(e._keyMap,t,((e,t,r)=>n(e,r))))),U=(0,i.dual)(2,((e,t)=>T(g(),(n=>{const r=k(e);let i;for(;!(i=r.next()).done;){const e=i.value;t(e)&&O(n,e)}})))),j=(0,i.dual)(2,((e,t)=>{const n=k(e);let r;const i=_(g()),a=_(g());for(;!(r=n.next()).done;){const e=r.value;t(e)?O(i,e):O(a,e)}return[I(a),I(i)]}))},486881:(e,t,n)=>{n.r(t),n.d(t,{LayerTypeId:()=>O,MemoMapTypeId:()=>N,annotateLogs:()=>Ve,annotateSpans:()=>Ge,build:()=>P,buildWithMemoMap:()=>U,buildWithScope:()=>D,catchAll:()=>B,catchAllCause:()=>q,context:()=>V,die:()=>$,dieSync:()=>W,discard:()=>z,effect_provide:()=>Ze,empty:()=>Ce,extendScope:()=>G,fail:()=>K,failCause:()=>H,failCauseSync:()=>Y,failSync:()=>J,fiberRefLocally:()=>re,fiberRefLocallyScoped:()=>se,fiberRefLocallyScopedWith:()=>oe,fiberRefLocallyWith:()=>ae,flatMap:()=>Z,flatten:()=>Q,fresh:()=>X,fromEffect:()=>ee,fromEffectContext:()=>ne,fromEffectDiscard:()=>te,fromFunction:()=>ce,isFresh:()=>R,isLayer:()=>C,launch:()=>ue,locallyEffect:()=>ie,makeMemoMap:()=>M,map:()=>le,mapError:()=>fe,match:()=>he,matchCause:()=>de,memoize:()=>pe,merge:()=>me,mergeAll:()=>ge,orDie:()=>ye,orElse:()=>be,passthrough:()=>Se,project:()=>we,provide:()=>Be,provideMerge:()=>qe,retry:()=>ve,scope:()=>Te,scoped:()=>xe,scopedContext:()=>Ie,scopedDiscard:()=>_e,service:()=>Oe,succeed:()=>Ae,succeedContext:()=>Ne,suspend:()=>Re,sync:()=>Fe,syncContext:()=>Me,tap:()=>Le,tapError:()=>Pe,tapErrorCause:()=>De,toRuntime:()=>Ue,toRuntimeWithMemoMap:()=>je,unsafeMakeMemoMap:()=>L,unwrapEffect:()=>We,unwrapScoped:()=>ze,withParentSpan:()=>Je,withSpan:()=>Ke,zipWith:()=>$e});var r=n(420634),i=n(131651),a=n(689702),s=n(284073),o=n(46755),c=n(361369),u=n(827964),l=n(953533),f=n(856572),d=n(530714),h=n(490544),p=n(908993),m=n(820808),g=n(672620),y=n(212164),b=n(860356),S=n(889706);const w="Fresh",v="FromEffect",E="ProvideMerge";var k=n(361974),x=n(103611),_=n(66932),I=n(823180),T=n(127514);const O=Symbol.for("effect/Layer"),A={[O]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return(0,l.pipeArguments)(this,arguments)}},N=Symbol.for("effect/Layer/MemoMap"),C=e=>(0,f.hasProperty)(e,O),R=e=>e._tag===w;class F{ref;[N];constructor(e){this.ref=e,this[N]=N}getOrElseMemoize(e,t){return(0,c.pipe)(I.modifyEffect(this.ref,(n=>{const r=n.get(e);if(void 0!==r){const[e,i]=r,a=(0,c.pipe)(e,g.flatMap((([e,t])=>(0,c.pipe)(m.patchFiberRefs(e),g.as(t)))),g.onExit(g.exitMatch({onFailure:()=>g.void,onSuccess:()=>g.scopeAddFinalizerExit(t,i)})));return g.succeed([a,n])}return(0,c.pipe)(k.make(0),g.flatMap((r=>(0,c.pipe)(g.deferredMake(),g.flatMap((i=>(0,c.pipe)(k.make((()=>g.void)),g.map((a=>{const s=g.uninterruptibleMask((s=>(0,c.pipe)(b.scopeMake(),g.flatMap((o=>(0,c.pipe)(s(g.flatMap(j(e,o,!0),(e=>m.diffFiberRefs(e(this))))),g.exit,g.flatMap((s=>{switch(s._tag){case S.OP_FAILURE:return(0,c.pipe)(g.deferredFailCause(i,s.effect_instruction_i0),g.zipRight(g.scopeClose(o,s)),g.zipRight(g.failCause(s.effect_instruction_i0)));case S.OP_SUCCESS:return(0,c.pipe)(k.set(a,(e=>(0,c.pipe)(g.scopeClose(o,e),g.whenEffect(k.modify(r,(e=>[1===e,e-1]))),g.asVoid))),g.zipRight(k.update(r,(e=>e+1))),g.zipRight(g.scopeAddFinalizerExit(t,(t=>(0,c.pipe)(g.sync((()=>n.delete(e))),g.zipRight(k.get(a)),g.flatMap((e=>e(t))))))),g.zipRight(g.deferredSucceed(i,s.effect_instruction_i0)),g.as(s.effect_instruction_i0[1]))}})))))))),o=[(0,c.pipe)(g.deferredAwait(i),g.onExit(g.exitMatchEffect({onFailure:()=>g.void,onSuccess:()=>k.update(r,(e=>e+1))}))),e=>(0,c.pipe)(k.get(a),g.flatMap((t=>t(e))))];return[s,R(e)?n:n.set(e,o)]})))))))))})),g.flatten)}}const M=g.suspend((()=>g.map(y.makeSynchronized(new Map),(e=>new F(e))))),L=()=>new F(y.unsafeMakeSynchronized(new Map)),P=e=>b.scopeWith((t=>D(e,t))),D=(0,c.dual)(2,((e,t)=>g.flatMap(M,(n=>g.flatMap(j(e,t),(e=>e(n))))))),U=(0,c.dual)(3,((e,t,n)=>g.flatMap(j(e,n),(e=>e(t))))),j=(e,t,n=!1)=>{const r=e;switch(r._tag){case"Locally":return g.sync((()=>e=>r.f(e.getOrElseMemoize(r.self,t))));case"ExtendScope":return g.sync((()=>e=>b.scopeWith((t=>e.getOrElseMemoize(r.layer,t)))));case"Fold":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.layer,t),g.matchCauseEffect({onFailure:n=>e.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>e.getOrElseMemoize(r.successK(n),t)}))));case"Fresh":return g.sync((()=>e=>(0,c.pipe)(r.layer,D(t))));case"FromEffect":return n?g.sync((()=>e=>r.effect)):g.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Provide":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),g.flatMap((n=>(0,c.pipe)(e.getOrElseMemoize(r.second,t),g.provideContext(n)))))));case"Scoped":return n?g.sync((()=>e=>b.scopeExtend(r.effect,t))):g.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Suspend":return g.sync((()=>e=>e.getOrElseMemoize(r.evaluate(),t)));case"ProvideMerge":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),g.zipWith(e.getOrElseMemoize(r.second,t),r.zipK))));case"ZipWith":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),b.zipWithOptions(e.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0}))))}},B=(0,c.dual)(2,((e,t)=>he(e,{onFailure:t,onSuccess:Ne}))),q=(0,c.dual)(2,((e,t)=>de(e,{onFailure:t,onSuccess:Ne}))),$=e=>H(r.die(e)),W=e=>Y((()=>r.die(e()))),z=e=>le(e,(()=>a.empty())),V=()=>ne(g.context()),G=e=>{const t=Object.create(A);return t._tag="ExtendScope",t.layer=e,t},K=e=>H(r.fail(e)),J=e=>Y((()=>r.fail(e()))),H=e=>ne(g.failCause(e)),Y=e=>ne(g.failCauseSync(e)),Z=(0,c.dual)(2,((e,t)=>he(e,{onFailure:K,onSuccess:t}))),Q=(0,c.dual)(2,((e,t)=>Z(e,a.get(t)))),X=e=>{const t=Object.create(A);return t._tag=w,t.layer=e,t},ee=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.map(i,(e=>a.make(r,e))))})),te=e=>ne(g.map(e,(()=>a.empty())));function ne(e){const t=Object.create(A);return t._tag=v,t.effect=e,t}const re=(0,c.dual)(3,((e,t,n)=>ie(e,g.fiberRefLocally(t,n)))),ie=(0,c.dual)(2,((e,t)=>{const n=Object.create(A);return n._tag="Locally",n.self=e,n.f=t,n})),ae=(0,c.dual)(3,((e,t,n)=>ie(e,g.fiberRefLocallyWith(t,n)))),se=(e,t)=>_e(b.fiberRefLocallyScoped(e,t)),oe=(e,t)=>_e(b.fiberRefLocallyScopedWith(e,t)),ce=(e,t,n)=>ne(g.map(e,(e=>a.make(t,n(e))))),ue=e=>b.scopedEffect(g.zipRight(b.scopeWith((t=>(0,c.pipe)(e,D(t)))),g.never)),le=(0,c.dual)(2,((e,t)=>Z(e,(e=>Ne(t(e)))))),fe=(0,c.dual)(2,((e,t)=>B(e,(e=>J((()=>t(e))))))),de=(0,c.dual)(2,((e,{onFailure:t,onSuccess:n})=>{const r=Object.create(A);return r._tag="Fold",r.layer=e,r.failureK=t,r.successK=n,r})),he=(0,c.dual)(2,((e,{onFailure:t,onSuccess:n})=>de(e,{onFailure:e=>{const n=r.failureOrCause(e);switch(n._tag){case"Left":return t(n.left);case"Right":return H(n.right)}},onSuccess:n}))),pe=e=>b.scopeWith((t=>g.map(m.memoize(D(e,t)),ne))),me=(0,c.dual)(2,((e,t)=>$e(e,t,((e,t)=>a.merge(e,t))))),ge=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t=me(t,e[n]);return t},ye=e=>B(e,(e=>$(e))),be=(0,c.dual)(2,((e,t)=>B(e,t))),Se=e=>me(V(),e),we=(0,c.dual)(4,((e,t,n,r)=>le(e,(e=>a.make(n,r(a.unsafeGet(e,t))))))),ve=(0,c.dual)(2,((e,t)=>Re((()=>{const n=a.GenericTag("effect/Layer/retry/{ state: unknown }");return(0,c.pipe)(Ae(n,{state:t.initial}),Z((r=>Ee(e,t,n,(0,c.pipe)(r,a.get(n)).state))))})))),Ee=(e,t,n,r)=>(0,c.pipe)(e,B((i=>(0,c.pipe)(ke(t,n,i,r),Z((r=>X(Ee(e,t,n,(0,c.pipe)(r,a.get(n)).state)))))))),ke=(e,t,n,r)=>ee(t,(0,c.pipe)(i.currentTimeMillis,g.flatMap((t=>(0,c.pipe)(e.step(t,n,r),g.flatMap((([e,r,a])=>d.isDone(a)?g.fail(n):(0,c.pipe)(i.sleep(s.millis(h.start(a.intervals)-t)),g.as({state:e}))))))))),xe=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return Ie(g.map(i,(e=>a.make(r,e))))})),_e=e=>Ie((0,c.pipe)(e,g.as(a.empty()))),Ie=e=>{const t=Object.create(A);return t._tag="Scoped",t.effect=e,t},Te=Ie(g.map(b.acquireRelease(b.scopeMake(),((e,t)=>e.close(t))),(e=>a.make(p.Scope,e)))),Oe=e=>ee(e,e),Ae=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.succeed(a.make(r,i)))})),Ne=e=>ne(g.succeed(e)),Ce=Ne(a.empty()),Re=e=>{const t=Object.create(A);return t._tag="Suspend",t.evaluate=e,t},Fe=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.sync((()=>a.make(r,i()))))})),Me=e=>ne(g.sync(e)),Le=(0,c.dual)(2,((e,t)=>Z(e,(e=>ne(g.as(t(e),e)))))),Pe=(0,c.dual)(2,((e,t)=>B(e,(e=>ne(g.flatMap(t(e),(()=>g.fail(e)))))))),De=(0,c.dual)(2,((e,t)=>q(e,(e=>ne(g.flatMap(t(e),(()=>g.failCause(e)))))))),Ue=e=>(0,c.pipe)(b.scopeWith((t=>D(e,t))),g.flatMap((e=>(0,c.pipe)(x.runtime(),g.provideContext(e))))),je=(0,c.dual)(2,((e,t)=>g.flatMap(b.scopeWith((n=>U(e,t,n))),(e=>(0,c.pipe)(x.runtime(),g.provideContext(e)))))),Be=(0,c.dual)(2,((e,t)=>Re((()=>{const n=Object.create(A);return n._tag="Provide",n.first=Object.create(A,{_tag:{value:E,enumerable:!0},first:{value:V(),enumerable:!0},second:{value:t},zipK:{value:(e,t)=>(0,c.pipe)(e,a.merge(t))}}),n.second=e,n})))),qe=(0,c.dual)(2,((e,t)=>{const n=Object.create(A);return n._tag=E,n.first=t,n.second=Be(e,t),n.zipK=(e,t)=>(0,c.pipe)(e,a.merge(t)),n})),$e=(0,c.dual)(3,((e,t,n)=>Re((()=>{const r=Object.create(A);return r._tag="ZipWith",r.first=e,r.second=t,r.zipK=n,r})))),We=e=>{const t=a.GenericTag("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return Z(ee(t,e),(e=>a.get(e,t)))},ze=e=>{const t=a.GenericTag("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return Z(xe(t,e),(e=>a.get(e,t)))},Ve=(0,c.dual)((e=>C(e[0])),(function(){const e=arguments;return ae(e[0],g.currentLogAnnotations,"string"===typeof e[1]?u.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>u.set(e,t,n)),t))})),Ge=(0,c.dual)((e=>C(e[0])),(function(){const e=arguments;return ae(e[0],g.currentTracerSpanAnnotations,"string"===typeof e[1]?u.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>u.set(e,t,n)),t))})),Ke=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=T.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return ze(g.map(n?.onEnd?g.tap(b.makeSpanScoped(t,n),(e=>b.addFinalizer((t=>n.onEnd(e,t))))):b.makeSpanScoped(t,n),(t=>Je(e,t))))}return e=>ze(g.map(n?.onEnd?g.tap(b.makeSpanScoped(t,n),(e=>b.addFinalizer((t=>n.onEnd(e,t))))):b.makeSpanScoped(t,n),(t=>Je(e,t))))},Je=(0,c.dual)(2,((e,t)=>Be(e,Ne(a.make(T.spanTag,t))))),He=(0,c.dual)(2,((e,t)=>g.acquireUseRelease(b.scopeMake(),(n=>g.flatMap(D(t,n),(t=>g.provideSomeContext(e,t)))),((e,t)=>g.scopeClose(e,t))))),Ye=(0,c.dual)(2,((e,t)=>{const n=o.diff(x.defaultRuntime.fiberRefs,t.fiberRefs),r=_.diff(x.defaultRuntime.runtimeFlags,t.runtimeFlags);return g.uninterruptibleMask((i=>g.withFiberRuntime((s=>{const c=s.getFiberRef(g.currentContext),u=s.getFiberRefs(),l=o.patch(s.id(),u)(n),f=s._runtimeFlags,d=_.patch(r)(f),h=o.diff(l,u),p=_.diff(d,f);return s.setFiberRefs(l),s._runtimeFlags=d,b.ensuring(g.provideSomeContext(i(e),a.merge(c,t.context)),g.withFiberRuntime((e=>(e.setFiberRefs(o.patch(e.id(),e.getFiberRefs())(h)),e._runtimeFlags=_.patch(p)(e._runtimeFlags),g.void))))}))))})),Ze=(0,c.dual)(2,((e,t)=>C(t)?He(e,t):a.isContext(t)?g.provideSomeContext(e,t):Ye(e,t)))},208624:(e,t,n)=>{n.r(t),n.d(t,{addLogger:()=>m,addLoggerEffect:()=>g,addLoggerScoped:()=>y,addSupervisor:()=>E,disableCooperativeYielding:()=>O,disableInterruption:()=>A,disableOpSupervision:()=>N,disableRuntimeMetrics:()=>C,disableWindDown:()=>R,enableCooperativeYielding:()=>k,enableInterruption:()=>x,enableOpSupervision:()=>_,enableRuntimeMetrics:()=>I,enableWindDown:()=>T,minimumLogLevel:()=>h,parentSpan:()=>M,removeLogger:()=>b,replaceLogger:()=>S,replaceLoggerEffect:()=>w,replaceLoggerScoped:()=>v,setConfigProvider:()=>F,setTracer:()=>P,span:()=>L,withMinimumLogLevel:()=>p});var r=n(689702),i=n(361369),a=n(227561),s=n(672620),o=n(860356),c=n(486881),u=n(66932),l=n(848464),f=n(235021),d=n(127514);const h=e=>c.scopedDiscard(o.fiberRefLocallyScoped(o.currentMinimumLogLevel,e)),p=(0,i.dual)(2,((e,t)=>s.fiberRefLocally(o.currentMinimumLogLevel,t)(e))),m=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentLoggers,a.add(e))),g=e=>c.unwrapEffect(s.map(e,m)),y=e=>c.unwrapScoped(s.map(e,m)),b=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentLoggers,a.remove(e))),S=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>m(t))))),w=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>g(t))))),v=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>y(t))))),E=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentSupervisor,(t=>new f.Zip(t,e)))),k=c.scopedDiscard(o.withRuntimeFlagsScoped(l.enable(u.CooperativeYielding))),x=c.scopedDiscard(o.withRuntimeFlagsScoped(l.enable(u.Interruption))),_=c.scopedDiscard(o.withRuntimeFlagsScoped(l.enable(u.OpSupervision))),I=c.scopedDiscard(o.withRuntimeFlagsScoped(l.enable(u.RuntimeMetrics))),T=c.scopedDiscard(o.withRuntimeFlagsScoped(l.enable(u.WindDown))),O=c.scopedDiscard(o.withRuntimeFlagsScoped(l.disable(u.CooperativeYielding))),A=c.scopedDiscard(o.withRuntimeFlagsScoped(l.disable(u.Interruption))),N=c.scopedDiscard(o.withRuntimeFlagsScoped(l.disable(u.OpSupervision))),C=c.scopedDiscard(o.withRuntimeFlagsScoped(l.disable(u.RuntimeMetrics))),R=c.scopedDiscard(o.withRuntimeFlagsScoped(l.disable(u.WindDown))),F=e=>c.scopedDiscard(o.withConfigProviderScoped(e)),M=e=>c.succeedContext(r.make(d.spanTag,e)),L=(e,t)=>(t=d.addSpanStackTrace(t),c.scoped(d.spanTag,t?.onEnd?s.tap(o.makeSpanScoped(e,t),(e=>o.addFinalizer((n=>t.onEnd(e,n))))):o.makeSpanScoped(e,t))),P=e=>c.scopedDiscard(o.withTracerScoped(e))},265123:(e,t,n)=>{n.r(t),n.d(t,{LoggerTypeId:()=>y,filterLogLevel:()=>E,isLogger:()=>q,jsonLogger:()=>D,logfmtLogger:()=>M,makeLogger:()=>S,map:()=>k,mapInput:()=>w,mapInputOptions:()=>v,none:()=>x,prettyLogger:()=>X,simple:()=>_,stringLogger:()=>C,structuredLogger:()=>L,structuredMessage:()=>P,succeed:()=>I,sync:()=>T,zip:()=>O,zipLeft:()=>A,zipRight:()=>N});var r=n(630768),i=n(689702),a=n(989105),s=n(361369),o=n(827964),c=n(883845),u=n(489425),l=n(204971),f=n(977948),d=n(953533),h=n(908197),p=n(344862),m=n(272572),g=n(478908);const y=Symbol.for("effect/Logger"),b={_Message:e=>e,_Output:e=>e},S=e=>({[y]:b,log:e,pipe(){return(0,d.pipeArguments)(this,arguments)}}),w=(0,s.dual)(2,((e,t)=>S((n=>e.log({...n,message:t(n.message)}))))),v=(0,s.dual)(2,((e,t)=>S((n=>e.log(t(n)))))),E=(0,s.dual)(2,((e,t)=>S((n=>t(n.logLevel)?f.some(e.log(n)):f.none())))),k=(0,s.dual)(2,((e,t)=>S((n=>t(e.log(n)))))),x={[y]:b,log:s.constVoid,pipe(){return(0,d.pipeArguments)(this,arguments)}},_=e=>({[y]:b,log:({message:t})=>e(t),pipe(){return(0,d.pipeArguments)(this,arguments)}}),I=e=>_((()=>e)),T=e=>_(e),O=(0,s.dual)(2,((e,t)=>S((n=>[e.log(n),t.log(n)])))),A=(0,s.dual)(2,((e,t)=>k(O(e,t),(e=>e[0])))),N=(0,s.dual)(2,((e,t)=>k(O(e,t),(e=>e[1])))),C=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:f,spans:d})=>{const p=n.getTime();let m=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${g.threadName(i)}`].join(" ");const y=r.ensure(f);for(let r=0;r<y.length;r++){const e=c.toStringUnknown(y[r]);e.length>0&&(m+=" message=",m=F(e,m))}if(null!=t&&"Empty"!==t._tag&&(m+=" cause=",m=F(h.pretty(t,{renderErrorCause:!0}),m)),u.isCons(d)){m+=" ";let e=!0;for(const t of d)e?e=!1:m+=" ",m+=(0,s.pipe)(t,l.render(p))}if(o.size(e)>0){m+=" ";let t=!0;for(const[n,r]of e)t?t=!1:m+=" ",m+=U(n),m+="=",m=F(c.toStringUnknown(r),m)}return m})),R=/^[^\s"=]+$/,F=(e,t)=>t+(e.match(R)?e:`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`),M=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:l,spans:f})=>{const d=n.getTime();let p=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${g.threadName(i)}`].join(" ");const m=r.ensure(l);for(let r=0;r<m.length;r++){const e=c.toStringUnknown(m[r],0);e.length>0&&(p+=" message=",p=j(e,p))}if(null!=t&&"Empty"!==t._tag&&(p+=" cause=",p=j(h.pretty(t,{renderErrorCause:!0}),p)),u.isCons(f)){p+=" ";let e=!0;for(const t of f)e?e=!1:p+=" ",p+=(0,s.pipe)(t,B(d))}if(o.size(e)>0){p+=" ";let t=!0;for(const[n,r]of e)t?t=!1:p+=" ",p+=U(n),p+="=",p=j(c.toStringUnknown(r,0),p)}return p})),L=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:s,spans:c})=>{const l=n.getTime(),f={},d={};if(o.size(e)>0)for(const[r,o]of e)f[r]=P(o);if(u.isCons(c))for(const r of c)d[r.label]=l-r.startTime;const p=r.ensure(s);return{message:1===p.length?P(p[0]):p.map(P),logLevel:a.label,timestamp:n.toISOString(),cause:h.isEmpty(t)?void 0:h.pretty(t,{renderErrorCause:!0}),annotations:f,spans:d,fiberId:g.threadName(i)}})),P=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},D=k(L,c.stringifyCircular),U=e=>e.replace(/[\s="]/g,"_"),j=(e,t)=>{return t+(e.match(R)?e:(n=e,JSON.stringify(n)));var n},B=e=>t=>`${U(t.label)}=${e-t.startTime}ms`,q=e=>"object"===typeof e&&null!=e&&y in e,$=(e,...t)=>{let n="";for(let r=0;r<t.length;r++)n+=`\x1b[${t[r]}m`;return n+e+"\x1b[0m"},W=(e,...t)=>e,z="1",V="36",G="37",K={None:[],All:[],Trace:["90"],Debug:["34"],Info:["32"],Warning:["33"],Error:["31"],Fatal:["101","30"]},J={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},H=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,Y="object"===typeof{env:{NODE_ENV:"production"}}.stdout&&null!=={env:{NODE_ENV:"production"}}.stdout&&!0==={env:{NODE_ENV:"production"}}.stdout.isTTY,Z="object"===typeof window,Q="object"===typeof self&&null!==self&&"function"===typeof self.constructor&&self.constructor.name.includes("Worker"),X=e=>{const t=e?.mode??"auto",n="browser"===("auto"===t?Z||Q?"browser":"tty":t),r="boolean"===typeof e?.colors?e.colors:Y||n,i=e?.formatDate??H;return n?te({colors:r,formatDate:i}):ee({colors:r,formatDate:i,stderr:!0===e?.stderr})},ee=e=>{const t="isBun"in{env:{NODE_ENV:"production"}}&&!0==={env:{NODE_ENV:"production"}}.isBun,n=e.colors&&Y?$:W;return S((({annotations:s,cause:c,context:l,date:f,fiberId:d,logLevel:y,message:b,spans:S})=>{const w=a.getOrDefault(l,p.currentServices),v=i.get(w,m.consoleTag).unsafe,E=!0===e.stderr?v.error:v.log,k=r.ensure(b);let x=n(`[${e.formatDate(f)}]`,G)+` ${n(y.label,...K[y._tag])}`+` (${g.threadName(d)})`;if(u.isCons(S)){const e=f.getTime(),t=B(e);for(const n of S)x+=" "+t(n)}x+=":";let _=0;if(k.length>0){const e=P(k[0]);"string"===typeof e&&(x+=" "+n(e,z,V),_++)}if(E(x),t||v.group(),h.isEmpty(c)||E(h.pretty(c,{renderErrorCause:!0})),_<k.length)for(;_<k.length;_++)E(k[_]);if(o.size(s)>0)for(const[e,t]of s)E(n(`${e}:`,z,G),t);t||v.groupEnd()}))},te=e=>{const t=e.colors?"%c":"";return S((({annotations:n,cause:s,context:c,date:l,fiberId:f,logLevel:d,message:y,spans:b})=>{const S=a.getOrDefault(c,p.currentServices),w=i.get(S,m.consoleTag).unsafe,v=r.ensure(y);let E=`${t}[${e.formatDate(l)}]`;const k=[];if(e.colors&&k.push("color:gray"),E+=` ${t}${d.label}${t} (${g.threadName(f)})`,e.colors&&k.push(J[d._tag],""),u.isCons(b)){const e=l.getTime(),t=B(e);for(const n of b)E+=" "+t(n)}E+=":";let x=0;if(v.length>0){const n=P(v[0]);"string"===typeof n&&(E+=` ${t}${n}`,e.colors&&k.push("color:deepskyblue"),x++)}if(w.groupCollapsed(E,...k),h.isEmpty(s)||w.error(h.pretty(s,{renderErrorCause:!0})),x<v.length)for(;x<v.length;x++)w.log(v[x]);if(o.size(n)>0)for(const[t,r]of n)e.colors?w.log(`%c${t}:`,"color:gray",r):w.log(`${t}:`,r);w.groupEnd()}))}},458762:(e,t,n)=>{n.r(t),n.d(t,{MetricLabelTypeId:()=>c,isMetricLabel:()=>f,make:()=>l});var r=n(43977),i=n(367337),a=n(953533),s=n(856572);const o="effect/MetricLabel",c=Symbol.for(o);class u{key;value;[c]=c;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=i.string(o+this.key+this.value)}[i.symbol](){return this._hash}[r.symbol](e){return f(e)&&this.key===e.key&&this.value===e.value}pipe(){return(0,a.pipeArguments)(this,arguments)}}const l=(e,t)=>new u(e,t),f=e=>(0,s.hasProperty)(e,c)},564577:(e,t,n)=>{n.r(t),n.d(t,{OP_CONSTANT:()=>r,OP_DESCRIBED:()=>s,OP_FAIL:()=>i,OP_FALLBACK:()=>a,OP_HASHMAP:()=>d,OP_LAZY:()=>o,OP_MAP_OR_FAIL:()=>c,OP_NESTED:()=>u,OP_PRIMITIVE:()=>l,OP_SEQUENCE:()=>f,OP_ZIP_WITH:()=>h});const r="Constant",i="Fail",a="Fallback",s="Described",o="Lazy",c="MapOrFail",u="Nested",l="Primitive",f="Sequence",d="HashMap",h="ZipWith"},127576:(e,t,n)=>{n.r(t),n.d(t,{OP_STATE_DONE:()=>i,OP_STATE_PENDING:()=>r});const r="Pending",i="Done"},889706:(e,t,n)=>{n.r(t),n.d(t,{OP_ASYNC:()=>r,OP_COMMIT:()=>i,OP_FAILURE:()=>a,OP_ON_FAILURE:()=>s,OP_ON_SUCCESS:()=>o,OP_ON_SUCCESS_AND_FAILURE:()=>c,OP_REVERT_FLAGS:()=>g,OP_SUCCESS:()=>u,OP_SYNC:()=>l,OP_TAG:()=>f,OP_UPDATE_RUNTIME_FLAGS:()=>d,OP_WHILE:()=>h,OP_WITH_RUNTIME:()=>p,OP_YIELD:()=>m});const r="Async",i="Commit",a="Failure",s="OnFailure",o="OnSuccess",c="OnSuccessAndFailure",u="Success",l="Sync",f="Tag",d="UpdateRuntimeFlags",h="While",p="WithRuntime",m="Yield",g="RevertFlags"},8578:(e,t,n)=>{n.r(t),n.d(t,{isNone:()=>p,isOption:()=>h,isSome:()=>m,none:()=>g,some:()=>y});var r=n(43977),i=n(367337),a=n(883845),s=n(856572),o=n(68498);const c=Symbol.for("effect/Option"),u={...o.EffectPrototype,[c]:{_A:e=>e},[a.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,a.format)(this.toJSON())}},l=Object.assign(Object.create(u),{_tag:"Some",_op:"Some",[r.symbol](e){return h(e)&&m(e)&&r.equals(this.value,e.value)},[i.symbol](){return i.cached(this,i.combine(i.hash(this._tag))(i.hash(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:(0,a.toJSON)(this.value)}}}),f=i.hash("None"),d=Object.assign(Object.create(u),{_tag:"None",_op:"None",[r.symbol]:e=>h(e)&&p(e),[i.symbol]:()=>f,toJSON(){return{_id:"Option",_tag:this._tag}}}),h=e=>(0,s.hasProperty)(e,c),p=e=>"None"===e._tag,m=e=>"Some"===e._tag,g=Object.create(d),y=e=>{const t=Object.create(l);return t.value=e,t}},502787:(e,t,n)=>{n.r(t),n.d(t,{cacheRequest:()=>p,currentCache:()=>f,currentCacheEnabled:()=>d,fromRequest:()=>h,withRequestCache:()=>g,withRequestCaching:()=>m});var r=n(284073),i=n(361369),a=n(606517),s=n(668481),o=n(561693),c=n(672620),u=n(860356),l=n(502146);const f=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCache"),(()=>c.fiberRefUnsafeMake((0,o.unsafeMakeWith)(65536,(()=>c.map(c.deferredMake(),(e=>({listeners:new l.Listeners,handle:e})))),(()=>(0,r.seconds)(60)))))),d=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCacheEnabled"),(()=>c.fiberRefUnsafeMake(!1))),h=(e,t)=>c.flatMap(c.isEffect(t)?t:c.succeed(t),(t=>c.fiberIdWith((n=>{const r=new Proxy(e,{});return c.fiberRefGetWith(d,(e=>{if(e){const e=c.fiberRefGetWith(f,(i=>c.flatMap(i.getEither(r),(a=>{switch(a._tag){case"Left":return a.left.listeners.interrupted?c.flatMap(i.invalidateWhen(r,(e=>e.handle===a.left.handle)),(()=>e)):(a.left.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.empty,e(c.deferredAwait(a.left.handle)))),(e=>(a.left.listeners.decrement(),e))))));case"Right":return a.right.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.single(t,s.makeEntry({request:r,result:a.right.handle,listeners:a.right.listeners,ownerId:n,state:{completed:!1}})),e(c.deferredAwait(a.right.handle)))),(()=>(a.right.listeners.decrement(),c.deferredAwait(a.right.handle))))))}}))));return e}const i=new l.Listeners;return i.increment(),c.flatMap(c.deferredMake(),(e=>(0,u.ensuring)(c.blocked(s.single(t,s.makeEntry({request:r,result:e,listeners:i,ownerId:n,state:{completed:!1}})),c.deferredAwait(e)),c.sync((()=>i.decrement())))))}))})))),p=(e,t)=>c.fiberRefGetWith(d,(n=>n?c.fiberRefGetWith(f,(n=>c.flatMap(n.getEither(e),(e=>{switch(e._tag){case"Left":return c.void;case"Right":return c.deferredComplete(e.right.handle,t)}})))):c.void)),m=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,d,t))),g=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,f,t)))},937540:(e,t,n)=>{n.r(t),n.d(t,{RandomTypeId:()=>u,make:()=>p,randomTag:()=>l});var r=n(128420),i=n(689702),a=n(361369),s=n(367337),o=n(730276),c=n(672620);const u=Symbol.for("effect/Random"),l=i.GenericTag("effect/Random");class f{seed;[u]=u;PRNG;constructor(e){this.seed=e,this.PRNG=new o.PCGRandom(e)}get next(){return c.sync((()=>this.PRNG.number()))}get nextBoolean(){return c.map(this.next,(e=>e>.5))}get nextInt(){return c.sync((()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER)))}nextRange(e,t){return c.map(this.next,(n=>(t-e)*n+e))}nextIntBetween(e,t){return c.sync((()=>this.PRNG.integer(t-e)+e))}shuffle(e){return d(e,(e=>this.nextIntBetween(0,e)))}}const d=(e,t)=>c.suspend((()=>(0,a.pipe)(c.sync((()=>Array.from(e))),c.flatMap((e=>{const n=[];for(let t=e.length;t>=2;t-=1)n.push(t);return(0,a.pipe)(n,c.forEachSequentialDiscard((n=>(0,a.pipe)(t(n),c.map((t=>h(e,n-1,t)))))),c.as(r.fromIterable(e)))}))))),h=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},p=e=>new f(s.hash(e))},36347:(e,t,n)=>{n.r(t),n.d(t,{RedactedTypeId:()=>f,isRedacted:()=>h,make:()=>p,proto:()=>d,redactedRegistry:()=>l,unsafeWipe:()=>g,value:()=>m});var r=n(43977),i=n(361369),a=n(606517),s=n(367337),o=n(953533),c=n(856572);const u="effect/Redacted",l=(0,a.globalValue)("effect/Redacted/redactedRegistry",(()=>new WeakMap)),f=Symbol.for(u),d={[f]:{_A:e=>e},pipe(){return(0,o.pipeArguments)(this,arguments)},toString:()=>"<redacted>",toJSON:()=>"<redacted>",[s.symbol](){return(0,i.pipe)(s.hash(u),s.combine(s.hash(l.get(this))),s.cached(this))},[r.symbol](e){return h(e)&&r.equals(l.get(this),l.get(e))}},h=e=>(0,c.hasProperty)(e,f),p=e=>{const t=Object.create(d);return l.set(t,e),t},m=e=>{if(l.has(e))return l.get(e);throw new Error("Unable to get redacted value")},g=e=>l.delete(e)},361974:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>u,get:()=>p,getAndSet:()=>g,getAndUpdate:()=>y,getAndUpdateSome:()=>b,make:()=>h,modify:()=>w,modifySome:()=>v,refVariance:()=>l,set:()=>m,setAndGet:()=>S,unsafeGet:()=>I,unsafeMake:()=>d,update:()=>E,updateAndGet:()=>k,updateSome:()=>x,updateSomeAndGet:()=>_});var r=n(361369),i=n(645914),a=n(977948),s=n(953533),o=n(220209),c=n(672620);const u=Symbol.for("effect/Ref"),l={_A:e=>e};class f{ref;[u]=l;[o.TypeId];constructor(e){this.ref=e,this[o.TypeId]=o.TypeId,this.get=c.sync((()=>i.get(this.ref)))}get;modify(e){return c.sync((()=>{const t=i.get(this.ref),[n,r]=e(t);return t!==r&&i.set(r)(this.ref),n}))}pipe(){return(0,s.pipeArguments)(this,arguments)}}const d=e=>new f(i.make(e)),h=e=>c.sync((()=>d(e))),p=e=>e.get,m=(0,r.dual)(2,((e,t)=>e.modify((()=>[void 0,t])))),g=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t])))),y=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t(e)])))),b=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[e,n.value]}})))),S=(0,r.dual)(2,((e,t)=>e.modify((()=>[t,t])))),w=(0,r.dual)(2,((e,t)=>e.modify(t))),v=(0,r.dual)(3,((e,t,n)=>e.modify((e=>{const r=n(e);switch(r._tag){case"None":return[t,e];case"Some":return r.value}})))),E=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,t(e)])))),k=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);return[n,n]})))),x=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,a.match(t(e),{onNone:()=>e,onSome:e=>e})])))),_=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[n.value,n.value]}})))),I=e=>i.get(e.ref)},502146:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>h,Listeners:()=>w,RequestTypeId:()=>c,TaggedClass:()=>p,complete:()=>m,completeEffect:()=>g,fail:()=>y,failCause:()=>b,filterOutCompleted:()=>v,isRequest:()=>l,of:()=>f,succeed:()=>S,tagged:()=>d});var r=n(361369),i=n(856572),a=n(242927),s=n(672620),o=n(68498);const c=Symbol.for("effect/Request"),u={...o.StructuralPrototype,[c]:{_E:e=>e,_A:e=>e}},l=e=>(0,i.hasProperty)(e,c),f=()=>e=>Object.assign(Object.create(u),e),d=e=>t=>{const n=Object.assign(Object.create(u),t);return n._tag=e,n},h=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=u,e}(),p=e=>class extends h{_tag=e},m=(0,r.dual)(2,((e,t)=>s.fiberRefGetWith(a.currentRequestMap,(n=>s.sync((()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,s.deferredUnsafeDone(r.result,t))}})))))),g=(0,r.dual)(2,((e,t)=>s.matchEffect(t,{onFailure:t=>m(e,s.exitFail(t)),onSuccess:t=>m(e,s.exitSucceed(t))}))),y=(0,r.dual)(2,((e,t)=>m(e,s.exitFail(t)))),b=(0,r.dual)(2,((e,t)=>m(e,s.exitFailCause(t)))),S=(0,r.dual)(2,((e,t)=>m(e,s.exitSucceed(t))));class w{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach((e=>e(this.count)))}decrement(){this.count--,this.observers.forEach((e=>e(this.count)))}}const v=e=>s.fiberRefGetWith(a.currentRequestMap,(t=>s.succeed(e.filter((e=>!(!0===t.get(e)?.state.completed))))))},103611:(e,t,n)=>{n.r(t),n.d(t,{FiberFailureCauseId:()=>N,FiberFailureId:()=>A,RuntimeImpl:()=>U,asyncEffect:()=>re,defaultRuntime:()=>$,defaultRuntimeFlags:()=>q,deleteFiberRef:()=>Y,disableRuntimeFlag:()=>z,enableRuntimeFlag:()=>V,fiberFailure:()=>R,isAsyncFiberException:()=>O,isFiberFailure:()=>F,make:()=>j,provideService:()=>K,runtime:()=>B,setFiberRef:()=>H,unsafeFork:()=>x,unsafeForkEffect:()=>Q,unsafeRunCallback:()=>_,unsafeRunEffect:()=>Z,unsafeRunPromise:()=>P,unsafeRunPromiseEffect:()=>X,unsafeRunPromiseExit:()=>D,unsafeRunPromiseExitEffect:()=>ee,unsafeRunSync:()=>I,unsafeRunSyncEffect:()=>te,unsafeRunSyncExit:()=>L,unsafeRunSyncExitEffect:()=>ne,updateContext:()=>G,updateFiberRefs:()=>J,updateRuntimeFlags:()=>W});var r=n(43977),i=n(689702),a=n(896949),s=n(599571),o=n(295602),c=n(989105),u=n(361369),l=n(883845),f=n(977948),d=n(953533),h=n(856572),p=n(71108),m=n(908993),g=n(908197),y=n(672620),b=n(232628),S=n(860356),w=n(508977),v=n(889706),E=n(66932),k=n(235021);const x=e=>(t,n)=>{const i=o.unsafeMake(),a=[[y.currentContext,[[i,e.context]]]];n?.scheduler&&a.push([p.currentScheduler,[[i,n.scheduler]]]);let s=c.updateManyAs(e.fiberRefs,{entries:a,forkAs:i});n?.updateRefs&&(s=n.updateRefs(s,i));const u=new S.FiberRuntime(i,s,e.runtimeFlags);let l=t;n?.scope&&(l=y.flatMap(m.fork(n.scope,b.sequential),(e=>y.zipRight(y.scopeAddFinalizer(e,y.fiberIdWith((e=>(0,r.equals)(e,u.id())?y.void:y.interruptAsFiber(u,e)))),y.onExit(t,(t=>m.close(e,t)))))));const d=u._supervisor;return d!==k.none&&(d.onStart(e.context,l,f.none(),u),u.addObserver((e=>d.onEnd(e,u)))),w.globalScope.add(e.runtimeFlags,u),!1===n?.immediate?u.resume(l):u.start(l),u},_=e=>(t,n={})=>{const r=x(e)(t,n);return n.onExit&&r.addObserver((e=>{n.onExit(e)})),(t,n)=>_(e)((0,u.pipe)(r,s.interruptAs(t??o.none)),{...n,onExit:n?.onExit?e=>n.onExit(a.flatten(e)):void 0})},I=e=>t=>{const n=L(e)(t);if("Failure"===n._tag)throw R(n.effect_instruction_i0);return n.effect_instruction_i0};class T extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const O=e=>h.isTagged(e,"AsyncFiberException")&&"fiber"in e,A=Symbol.for("effect/Runtime/FiberFailure"),N=Symbol.for("effect/Runtime/FiberFailure/Cause");class C extends Error{[A];[N];constructor(e){super(),this[A]=A,this[N]=e;const t=g.prettyErrors(e);if(t.length>0){const e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,void 0!==this.message&&0!==this.message.length||(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[N].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[l.NodeInspectSymbol](){return this.toString()}}const R=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new C(e);return Error.stackTraceLimit=t,n},F=e=>h.hasProperty(e,A),M=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return y.exitFail(t.left);case"Right":return y.exitSucceed(t.right);case"Some":return y.exitSucceed(t.value);case"None":return y.exitFail(y.NoSuchElementException())}},L=e=>t=>{const n=M(t);if(n)return n;const r=new p.SyncScheduler,i=x(e)(t,{scheduler:r});r.flush();const a=i.unsafePoll();if(a)return a;throw(e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new T(e);return Error.stackTraceLimit=t,n})(i)},P=e=>(t,n)=>D(e)(t,n).then((e=>{switch(e._tag){case v.OP_SUCCESS:return e.effect_instruction_i0;case v.OP_FAILURE:throw R(e.effect_instruction_i0)}})),D=e=>(t,n)=>new Promise((r=>{const i=M(t);i&&r(i);const a=x(e)(t);a.addObserver((e=>{r(e)})),void 0!==n?.signal&&(n.signal.aborted?a.unsafeInterruptAsFork(a.id()):n.signal.addEventListener("abort",(()=>{a.unsafeInterruptAsFork(a.id())}),{once:!0}))}));class U{context;runtimeFlags;fiberRefs;constructor(e,t,n){this.context=e,this.runtimeFlags=t,this.fiberRefs=n}pipe(){return(0,d.pipeArguments)(this,arguments)}}const j=e=>new U(e.context,e.runtimeFlags,e.fiberRefs),B=()=>y.withFiberRuntime(((e,t)=>y.succeed(new U(e.getFiberRef(y.currentContext),t.runtimeFlags,e.getFiberRefs())))),q=E.make(E.Interruption,E.CooperativeYielding,E.RuntimeMetrics),$=j({context:i.empty(),runtimeFlags:q,fiberRefs:c.empty()}),W=(0,u.dual)(2,((e,t)=>j({context:e.context,runtimeFlags:t(e.runtimeFlags),fiberRefs:e.fiberRefs}))),z=(0,u.dual)(2,((e,t)=>W(e,E.disable(t)))),V=(0,u.dual)(2,((e,t)=>W(e,E.enable(t)))),G=(0,u.dual)(2,((e,t)=>j({context:t(e.context),runtimeFlags:e.runtimeFlags,fiberRefs:e.fiberRefs}))),K=(0,u.dual)(3,((e,t,n)=>G(e,i.add(t,n)))),J=(0,u.dual)(2,((e,t)=>j({context:e.context,runtimeFlags:e.runtimeFlags,fiberRefs:t(e.fiberRefs)}))),H=(0,u.dual)(3,((e,t,n)=>J(e,c.updateAs({fiberId:o.none,fiberRef:t,value:n})))),Y=(0,u.dual)(2,((e,t)=>J(e,c.delete(t)))),Z=_($),Q=x($),X=P($),ee=D($),te=I($),ne=L($),re=e=>y.suspend((()=>{let t;return y.flatMap(y.deferredMake(),(n=>y.flatMap(B(),(r=>y.uninterruptibleMask((i=>y.zipRight(S.fork(i(y.matchCauseEffect(e((e=>_(r)(y.intoDeferred(e,n)))),{onFailure:e=>y.deferredFailCause(n,e),onSuccess:e=>(t=e,y.void)}))),i(y.onInterrupt(y.deferredAwait(n),(()=>t??y.void))))))))))}))},66932:(e,t,n)=>{n.r(t),n.d(t,{CooperativeYielding:()=>f,Interruption:()=>o,None:()=>s,OpSupervision:()=>c,RuntimeMetrics:()=>u,WindDown:()=>l,allFlags:()=>d,cooperativeYielding:()=>p,diff:()=>R,differ:()=>L,disable:()=>m,disableAll:()=>g,disabledSet:()=>C,enable:()=>y,enableAll:()=>b,enabledSet:()=>N,interruptible:()=>S,interruption:()=>w,isDisabled:()=>v,isEnabled:()=>E,make:()=>k,none:()=>x,opSupervision:()=>_,patch:()=>F,render:()=>I,renderPatch:()=>M,runtimeMetrics:()=>T,toSet:()=>O,windDown:()=>A});var r=n(361369),i=n(245779),a=n(848464);const s=0,o=1,c=2,u=4,l=16,f=32,d=[s,o,c,u,l,f],h=e=>{switch(e){case f:return"CooperativeYielding";case l:return"WindDown";case u:return"RuntimeMetrics";case c:return"OpSupervision";case o:return"Interruption";case s:return"None"}},p=e=>E(e,f),m=(0,r.dual)(2,((e,t)=>e&~t)),g=(0,r.dual)(2,((e,t)=>e&~t)),y=(0,r.dual)(2,((e,t)=>e|t)),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>w(e)&&!A(e),w=e=>E(e,o),v=(0,r.dual)(2,((e,t)=>!E(e,t))),E=(0,r.dual)(2,((e,t)=>0!==(e&t))),k=(...e)=>e.reduce(((e,t)=>e|t),0),x=k(s),_=e=>E(e,c),I=e=>{const t=[];return d.forEach((n=>{E(e,n)&&t.push(`${h(n)}`)})),`RuntimeFlags(${t.join(", ")})`},T=e=>E(e,u),O=e=>new Set(d.filter((t=>E(e,t)))),A=e=>E(e,l),N=e=>O(a.active(e)&a.enabled(e)),C=e=>O(a.active(e)&~a.enabled(e)),R=(0,r.dual)(2,((e,t)=>a.make(e^t,t))),F=(0,r.dual)(2,((e,t)=>e&(a.invert(a.active(t))|a.enabled(t))|a.active(t)&a.enabled(t))),M=e=>`RuntimeFlagsPatch(enabled = (${Array.from(N(e)).map((e=>h(e))).join(", ")}), disabled = (${Array.from(C(e)).map((e=>h(e))).join(", ")}))`,L=i.make({empty:a.empty,diff:(e,t)=>R(e,t),combine:(e,t)=>a.andThen(t)(e),patch:(e,t)=>F(t,e)})},848464:(e,t,n)=>{n.r(t),n.d(t,{active:()=>a,andThen:()=>b,both:()=>g,disable:()=>l,either:()=>y,empty:()=>c,enable:()=>u,enabled:()=>s,exclude:()=>m,inverse:()=>S,invert:()=>w,isActive:()=>d,isDisabled:()=>p,isEmpty:()=>f,isEnabled:()=>h,make:()=>o});var r=n(361369);const i=255,a=e=>e&i,s=e=>e>>8&i,o=(e,t)=>(e&i)+((t&e&i)<<8),c=o(0,0),u=e=>o(e,e),l=e=>o(e,0),f=e=>0===e,d=(0,r.dual)(2,((e,t)=>0!==(a(e)&t))),h=(0,r.dual)(2,((e,t)=>0!==(s(e)&t))),p=(0,r.dual)(2,((e,t)=>0!==(a(e)&t)&&0===(s(e)&t))),m=(0,r.dual)(2,((e,t)=>o(a(e)&~t,s(e)))),g=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)&s(t)))),y=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)|s(t)))),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>o(s(e),w(a(e))),w=e=>~e>>>0&i},280561:(e,t,n)=>{n.r(t),n.d(t,{ScheduleDriverTypeId:()=>Q,ScheduleTypeId:()=>Y,addDelay:()=>ie,addDelayEffect:()=>ae,andThen:()=>se,andThenEither:()=>oe,as:()=>ce,asVoid:()=>ue,beginningOfDay:()=>Qt,beginningOfHour:()=>Ht,beginningOfMinute:()=>Gt,beginningOfSecond:()=>Wt,bothInOut:()=>le,check:()=>fe,checkEffect:()=>de,collectAllInputs:()=>he,collectAllOutputs:()=>pe,collectUntil:()=>me,collectUntilEffect:()=>ge,collectWhile:()=>ye,collectWhileEffect:()=>be,compose:()=>Se,count:()=>Sn,cron:()=>ke,dayOfMonth:()=>xe,dayOfWeek:()=>_e,delayed:()=>Ie,delayedEffect:()=>Te,delayedSchedule:()=>Oe,delays:()=>Ae,driver:()=>Re,duration:()=>Fe,either:()=>Me,eitherWith:()=>Le,elapsed:()=>wn,endOfDay:()=>Xt,endOfHour:()=>Yt,endOfMinute:()=>Kt,endOfSecond:()=>zt,ensuring:()=>Pe,exponential:()=>De,fibonacci:()=>Ue,findNextMonth:()=>nn,fixed:()=>je,forever:()=>vn,fromDelay:()=>Be,fromDelays:()=>qe,fromFunction:()=>$e,hourOfDay:()=>We,identity:()=>ze,intersect:()=>Ve,intersectWith:()=>Ge,isSchedule:()=>Z,jittered:()=>Je,jitteredWith:()=>He,linear:()=>Ye,makeWithState:()=>re,map:()=>Ze,mapBoth:()=>Ne,mapBothEffect:()=>Ce,mapEffect:()=>Qe,mapInput:()=>we,mapInputContext:()=>ve,mapInputEffect:()=>Ee,minuteOfHour:()=>Xe,modifyDelay:()=>et,modifyDelayEffect:()=>tt,nextDay:()=>en,nextDayOfMonth:()=>tn,nextHour:()=>Zt,nextMinute:()=>Jt,nextSecond:()=>Vt,onDecision:()=>nt,once:()=>En,passthrough:()=>rt,provideContext:()=>it,provideService:()=>at,recurUntil:()=>st,recurUntilEffect:()=>ot,recurUntilOption:()=>ct,recurUpTo:()=>ut,recurWhile:()=>lt,recurWhileEffect:()=>ft,recurs:()=>dt,reduce:()=>ht,reduceEffect:()=>pt,repeatForever:()=>mt,repeatOrElse_Effect:()=>ln,repeat_Effect:()=>cn,repeat_combined:()=>un,repetitions:()=>gt,resetAfter:()=>yt,resetWhen:()=>bt,retryOrElse_Effect:()=>pn,retry_Effect:()=>dn,retry_combined:()=>hn,run:()=>St,scheduleFrom_Effect:()=>yn,schedule_Effect:()=>gn,secondOfMinute:()=>vt,spaced:()=>Et,stop:()=>kn,succeed:()=>kt,sync:()=>xt,tapInput:()=>_t,tapOutput:()=>It,unfold:()=>Tt,union:()=>Ot,unionWith:()=>At,untilInput:()=>Nt,untilInputEffect:()=>Ct,untilOutput:()=>Rt,untilOutputEffect:()=>Ft,upTo:()=>Mt,whileInput:()=>Lt,whileInputEffect:()=>Pt,whileOutput:()=>Dt,whileOutputEffect:()=>Ut,windowed:()=>jt,zipLeft:()=>Bt,zipRight:()=>qt,zipWith:()=>$t});var r=n(128420),i=n(131651),a=n(689702),s=n(630768),o=n(757964),c=n(43977),u=n(235309),l=n(361369),f=n(367337),d=n(883845),h=n(804676),p=n(953533),m=n(856572),g=n(243216);const y=Symbol.for("effect/Cron"),b={[y]:y,[c.symbol](e){return S(e)&&O(this,e)},[f.symbol](){return(0,l.pipe)(f.array(s.fromIterable(this.minutes)),f.combine(f.array(s.fromIterable(this.hours))),f.combine(f.array(s.fromIterable(this.days))),f.combine(f.array(s.fromIterable(this.months))),f.combine(f.array(s.fromIterable(this.weekdays))),f.cached(this))},toString(){return(0,d.format)(this.toJSON())},toJSON(){return{_id:"Cron",minutes:s.fromIterable(this.minutes),hours:s.fromIterable(this.hours),days:s.fromIterable(this.days),months:s.fromIterable(this.months),weekdays:s.fromIterable(this.weekdays)}},[d.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,p.pipeArguments)(this,arguments)}},S=e=>(0,m.hasProperty)(e,y),w=Symbol.for("effect/Cron/errors/ParseError"),v={_tag:"ParseError",[w]:w},E=(e,t)=>{const n=Object.create(v);return n.message=e,void 0!==t&&(n.input=t),n},k=e=>{const t=e.split(" ").filter(g.isNonEmpty);if(5!==t.length)return o.left(E("Invalid number of segments in cron expression",e));const[n,r,i,a,c]=t;return o.all({minutes:M(n,A),hours:M(r,N),days:M(i,C),months:M(a,R),weekdays:M(c,F)}).pipe(o.map((e=>(({days:e,hours:t,minutes:n,months:r,weekdays:i})=>{const a=Object.create(b);return a.minutes=new Set(s.sort(n,h.Order)),a.hours=new Set(s.sort(t,h.Order)),a.days=new Set(s.sort(e,h.Order)),a.months=new Set(s.sort(r,h.Order)),a.weekdays=new Set(s.sort(i,h.Order)),a})(e))))},x=(e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=0!==i.size,c=0!==r.size,u=0!==n.size,l=0!==a.size,f=0!==s.size,d=t?new Date(t.getTime()):new Date;d.setMinutes(d.getMinutes()+1),d.setSeconds(0),d.setMilliseconds(0);const h=new Date(d).setFullYear(d.getFullYear()+8);for(;d.getTime()<=h;)if(!l||a.has(d.getMonth()+1)){if(u&&f){if(!n.has(d.getDate())&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(u){if(!n.has(d.getDate())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(f&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}if(!c||r.has(d.getHours())){if(!o||i.has(d.getMinutes()))return d;d.setMinutes(d.getMinutes()+1)}else d.setHours(d.getHours()+1),d.setMinutes(0)}else d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0),d.setMinutes(0);throw new Error("Unable to find next cron date")},_=u.make(((e,t)=>T(e.minutes,t.minutes)&&T(e.hours,t.hours)&&T(e.days,t.days)&&T(e.months,t.months)&&T(e.weekdays,t.weekdays))),I=u.array(u.number),T=(e,t)=>I(s.fromIterable(e),s.fromIterable(t)),O=(0,l.dual)(2,((e,t)=>_(e,t))),A={segment:"minute",min:0,max:59},N={segment:"hour",min:0,max:23},C={segment:"day",min:1,max:31},R={segment:"month",min:1,max:12,aliases:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}},F={segment:"weekday",min:0,max:6,aliases:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},M=(e,t)=>{const n=t.max-t.min+1,r=new Set,i=e.split(",");for(const a of i){const[i,s]=L(a);if("*"===i&&void 0===s)return o.right(new Set);if(void 0!==s){if(!Number.isInteger(s))return o.left(E("Expected step value to be a positive integer",e));if(s<1)return o.left(E("Expected step value to be greater than 0",e));if(s>t.max)return o.left(E(`Expected step value to be less than ${t.max}`,e))}if("*"===i)for(let e=t.min;e<=t.max;e+=s??1)r.add(e);else{const[n,a]=P(i,t.aliases);if(!Number.isInteger(n))return o.left(E("Expected a positive integer",e));if(n<t.min||n>t.max)return o.left(E(`Expected a value between ${t.min} and ${t.max}`,e));if(void 0===a)r.add(n);else{if(!Number.isInteger(a))return o.left(E("Expected a positive integer",e));if(a<t.min||a>t.max)return o.left(E(`Expected a value between ${t.min} and ${t.max}`,e));if(n>a)return o.left(E("Invalid value range",e));for(let e=n;e<=a;e+=s??1)r.add(e)}}if(r.size>=n)return o.right(new Set)}return o.right(r)},L=e=>{const t=e.indexOf("/");return-1!==t?[e.slice(0,t),Number(e.slice(t+1))]:[e,void 0]},P=(e,t)=>{const n=e.indexOf("-");return-1!==n?[D(e.slice(0,n),t),D(e.slice(n+1),t)]:[D(e,t),void 0]};function D(e,t){return t?.[e.toLocaleLowerCase()]??Number(e)}var U=n(284073),j=n(977948),B=n(344862),q=n(937540);q.RandomTypeId;const $=B.next;B.nextInt,B.nextBoolean,B.nextRange,B.nextIntBetween,B.shuffle,B.randomWith,q.randomTag,q.make;var W=n(530714),z=n(779100),V=n(490544),G=n(908197),K=n(820808),J=n(672620),H=n(361974);const Y=Symbol.for("effect/Schedule"),Z=e=>(0,m.hasProperty)(e,Y),Q=Symbol.for("effect/ScheduleDriver"),X={_Out:e=>e,_In:e=>e,_R:e=>e},ee={_Out:e=>e,_In:e=>e,_R:e=>e};class te{initial;step;[Y]=X;constructor(e,t){this.initial=e,this.step=t}pipe(){return(0,p.pipeArguments)(this,arguments)}}class ne{schedule;ref;[Q]=ee;constructor(e,t){this.schedule=e,this.ref=t}get state(){return J.map(H.get(this.ref),(e=>e[1]))}get last(){return J.flatMap(H.get(this.ref),(([e,t])=>{switch(e._tag){case"None":return J.failSync((()=>new J.NoSuchElementException));case"Some":return J.succeed(e.value)}}))}get reset(){return H.set(this.ref,[j.none(),this.schedule.initial])}next(e){return(0,l.pipe)(J.map(H.get(this.ref),(e=>e[1])),J.flatMap((t=>(0,l.pipe)(i.currentTimeMillis,J.flatMap((n=>(0,l.pipe)(J.suspend((()=>this.schedule.step(n,e,t))),J.flatMap((([e,t,r])=>{const i=H.set(this.ref,[j.some(t),e]);if(W.isDone(r))return J.zipRight(i,J.fail(j.none()));const a=V.start(r.intervals)-n;return a<=0?J.as(i,t):(0,l.pipe)(i,J.zipRight(K.sleep(U.millis(a))),J.as(t))})))))))))}}const re=(e,t)=>new te(e,t),ie=(0,l.dual)(2,((e,t)=>ae(e,(e=>J.sync((()=>t(e))))))),ae=(0,l.dual)(2,((e,t)=>tt(e,((e,n)=>J.map(t(e),(e=>U.sum(n,U.decode(e)))))))),se=(0,l.dual)(2,((e,t)=>Ze(oe(e,t),o.merge))),oe=(0,l.dual)(2,((e,t)=>re([e.initial,t.initial,!0],((n,r,i)=>i[2]?J.flatMap(e.step(n,r,i[0]),(([e,a,s])=>W.isDone(s)?J.map(t.step(n,r,i[1]),(([t,n,r])=>[[e,t,!1],o.right(n),r])):J.succeed([[e,i[1],!0],o.left(a),s]))):J.map(t.step(n,r,i[1]),(([e,t,n])=>[[i[0],e,!1],o.right(t),n])))))),ce=(0,l.dual)(2,((e,t)=>Ze(e,(()=>t)))),ue=e=>Ze(e,l.constVoid),le=(0,l.dual)(2,((e,t)=>re([e.initial,t.initial],((n,[r,i],a)=>J.zipWith(e.step(n,r,a[0]),t.step(n,i,a[1]),(([e,t,n],[r,i,a])=>{if(W.isContinue(n)&&W.isContinue(a)){const s=(0,l.pipe)(n.intervals,V.union(a.intervals));return[[e,r],[t,i],W.continue(s)]}return[[e,r],[t,i],W.done]})))))),fe=(0,l.dual)(2,((e,t)=>de(e,((e,n)=>J.sync((()=>t(e,n))))))),de=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([e,n,i])=>W.isDone(i)?J.succeed([e,n,W.done]):J.map(t(r,n),(t=>t?[e,n,i]:[e,n,W.done])))))))),he=()=>pe(ze()),pe=e=>ht(e,r.empty(),((e,t)=>(0,l.pipe)(e,r.append(t)))),me=e=>pe(st(e)),ge=e=>pe(ot(e)),ye=e=>pe(lt(e)),be=e=>pe(ft(e)),Se=(0,l.dual)(2,((e,t)=>re([e.initial,t.initial],((n,r,i)=>J.flatMap(e.step(n,r,i[0]),(([e,r,a])=>J.map(t.step(n,r,i[1]),(([t,n,r])=>W.isDone(a)||W.isDone(r)?[[e,t],n,W.done]:[[e,t],n,W.continue((0,l.pipe)(a.intervals,V.max(r.intervals)))])))))))),we=(0,l.dual)(2,((e,t)=>Ee(e,(e=>J.sync((()=>t(e))))))),ve=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.mapInputContext(e.step(n,r,i),t))))),Ee=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(t(r),(t=>e.step(n,t,i))))))),ke=e=>{const t=S(e)?o.right(e):k(e);return re([!0,[Number.MIN_SAFE_INTEGER,0,0]],((e,n,[r,i])=>{if(e<i[0])return J.succeed([[!1,i],[i[1],i[2]],W.continueWith(z.make(i[1],i[2]))]);if(o.isLeft(t))return J.die(t.left);const a=t.right,s=new Date(e);let c;if(r&&((e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=t.getMinutes();if(0!==i.size&&!i.has(o))return!1;const c=t.getHours();if(0!==r.size&&!r.has(c))return!1;const u=t.getMonth()+1;if(0!==a.size&&!a.has(u))return!1;if(0===n.size&&0===s.size)return!0;const l=t.getDate();if(0===s.size)return n.has(l);const f=t.getDay();return 0===n.size?s.has(f):n.has(l)||s.has(f)})(a,s))c=e;else{c=x(a,s).getTime()}const u=Gt(c),l=Kt(c),f=z.make(u,l);return J.succeed([[!1,[c,u,l]],[u,l],W.continueWith(f)])}))},xe=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||31<e)return J.dieSync((()=>new J.IllegalArgumentException(`Invalid argument in: dayOfMonth(${e}). Must be in range 1...31`)));const i=r[1],a=tn(t,e,0===i),s=Qt(a),o=Xt(a),c=z.make(s,o);return J.succeed([[o,i+1],i,W.continueWith(c)])})),_e=e=>re([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||7<e)return J.dieSync((()=>new J.IllegalArgumentException(`Invalid argument in: dayOfWeek(${e}). Must be in range 1 (Monday)...7 (Sunday)`)));const i=r[1],a=en(t,e,0===i),s=Qt(a),o=Xt(a),c=z.make(s,o);return J.succeed([[o,i+1],i,W.continueWith(c)])})),Ie=(0,l.dual)(2,((e,t)=>Te(e,(e=>J.sync((()=>t(e))))))),Te=(0,l.dual)(2,((e,t)=>tt(e,((e,n)=>t(n))))),Oe=e=>ie(e,(e=>e)),Ae=e=>re(e.initial,((t,n,r)=>(0,l.pipe)(e.step(t,n,r),J.flatMap((([e,n,r])=>W.isDone(r)?J.succeed([e,U.zero,r]):J.succeed([e,U.millis(V.start(r.intervals)-t),r])))))),Ne=(0,l.dual)(2,((e,{onInput:t,onOutput:n})=>Ze(we(e,t),n))),Ce=(0,l.dual)(2,((e,{onInput:t,onOutput:n})=>Qe(Ee(e,t),n))),Re=e=>(0,l.pipe)(H.make([j.none(),e.initial]),J.map((t=>new ne(e,t)))),Fe=e=>{const t=U.decode(e),n=U.toMillis(t);return re(!0,((e,r,i)=>J.succeed(i?[!1,t,W.continueWith(z.after(e+n))]:[!1,U.zero,W.done])))},Me=(0,l.dual)(2,((e,t)=>Ot(e,t))),Le=(0,l.dual)(3,((e,t,n)=>At(e,t,n))),Pe=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([e,n,r])=>W.isDone(r)?J.as(t,[e,n,r]):J.succeed([e,n,r]))))))),De=(e,t=2)=>{const n=U.decode(e);return Oe(Ze(vn,(e=>U.times(n,Math.pow(t,e)))))},Ue=e=>{const t=U.decode(e);return Oe((0,l.pipe)(Tt([t,t],(([e,t])=>[t,U.sum(e,t)])),Ze((e=>e[0]))))},je=e=>{const t=U.decode(e),n=U.toMillis(t);return re([j.none(),0],((e,r,[i,a])=>J.sync((()=>{switch(i._tag){case"None":return[[j.some([e,e+n]),a+1],a,W.continueWith(z.after(e+n))];case"Some":{const[r,s]=i.value,o=e>s+n,u=c.equals(t,U.zero)?t:U.millis(n-(e-r)%n),l=c.equals(u,U.zero)?t:u,f=o?e:e+U.toMillis(l);return[[j.some([r,f]),a+1],a,W.continueWith(z.after(f))]}}}))))},Be=e=>Fe(e),qe=(e,...t)=>re([[e,...t].map((e=>U.decode(e))),!0],((e,t,[n,r])=>J.sync((()=>{if(r){const t=n[0],r=z.after(e+U.toMillis(t));if(n.length>=2)return[[n.slice(1),!0],t,W.continueWith(r)];return[[[t,...n.slice(1)],!1],t,W.continueWith(r)]}return[[n,!1],U.zero,W.done]})))),$e=e=>Ze(ze(),e),We=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||23<e)return J.dieSync((()=>new J.IllegalArgumentException(`Invalid argument in: hourOfDay(${e}). Must be in range 0...23`)));const i=r[1],a=Zt(t,e,0===i),s=Ht(a),o=Yt(a),c=z.make(s,o);return J.succeed([[o,i+1],i,W.continueWith(c)])})),ze=()=>re(void 0,((e,t,n)=>J.succeed([n,t,W.continueWith(z.after(e))]))),Ve=(0,l.dual)(2,((e,t)=>Ge(e,t,V.intersect))),Ge=(0,l.dual)(3,((e,t,n)=>re([e.initial,t.initial],((r,i,a)=>(0,l.pipe)(J.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),((e,t)=>[e,t])),J.flatMap((([[r,a,s],[o,c,u]])=>W.isContinue(s)&&W.isContinue(u)?Ke(e,t,i,r,a,s.intervals,o,c,u.intervals,n):J.succeed([[r,o],[a,c],W.done])))))))),Ke=(e,t,n,r,i,a,s,o,c,u)=>{const f=u(a,c);return V.isNonEmpty(f)?J.succeed([[r,s],[i,o],W.continue(f)]):(0,l.pipe)(a,V.lessThan(c))?J.flatMap(e.step(V.end(a),n,r),(([r,i,a])=>W.isDone(a)?J.succeed([[r,s],[i,o],W.done]):Ke(e,t,n,r,i,a.intervals,s,o,c,u))):J.flatMap(t.step(V.end(c),n,s),(([s,o,c])=>W.isDone(c)?J.succeed([[r,s],[i,o],W.done]):Ke(e,t,n,r,i,a,s,o,c.intervals,u)))},Je=e=>He(e,{min:.8,max:1.2}),He=(0,l.dual)(2,((e,t)=>{const{max:n,min:r}=Object.assign({min:.8,max:1.2},t);return Te(e,(e=>J.map($,(t=>{const i=U.toMillis(e),a=i*r*(1-t)+i*n*t;return U.millis(a)}))))})),Ye=e=>{const t=U.decode(e);return Oe(Ze(vn,(e=>U.times(t,e+1))))},Ze=(0,l.dual)(2,((e,t)=>Qe(e,(e=>J.sync((()=>t(e))))))),Qe=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([e,n,r])=>J.map(t(n),(t=>[e,t,r])))))))),Xe=e=>re([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return J.dieSync((()=>new J.IllegalArgumentException(`Invalid argument in: minuteOfHour(${e}). Must be in range 0...59`)));const i=r[1],a=Jt(t,e,0===i),s=Gt(a),o=Kt(a),c=z.make(s,o);return J.succeed([[o,i+1],i,W.continueWith(c)])})),et=(0,l.dual)(2,((e,t)=>tt(e,((e,n)=>J.sync((()=>t(e,n))))))),tt=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([e,r,i])=>{if(W.isDone(i))return J.succeed([e,r,i]);const a=i.intervals,s=z.size(z.make(n,V.start(a)));return J.map(t(r,s),(t=>{const i=U.decode(t),s=V.start(a),o=n+U.toMillis(i),c=o-s,u=Math.max(0,V.end(a)+c),l=z.make(o,u);return[e,r,W.continueWith(l)]}))})))))),nt=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([e,n,r])=>J.as(t(n,r),[e,n,r]))))))),rt=e=>re(e.initial,((t,n,r)=>(0,l.pipe)(e.step(t,n,r),J.map((([e,t,r])=>[e,n,r]))))),it=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.provideContext(e.step(n,r,i),t))))),at=(0,l.dual)(3,((e,t,n)=>re(e.initial,((r,i,s)=>J.contextWithEffect((o=>J.provideContext(e.step(r,i,s),a.add(o,t,n)))))))),st=e=>Nt(ze(),e),ot=e=>Ct(ze(),e),ct=e=>Rt(Ze(ze(),e),j.isSome),ut=e=>{const t=U.decode(e);return Dt(wn,(e=>U.lessThan(e,t)))},lt=e=>Lt(ze(),e),ft=e=>Pt(ze(),e),dt=e=>Dt(vn,(t=>t<e)),ht=(0,l.dual)(3,((e,t,n)=>pt(e,t,((e,t)=>J.sync((()=>n(e,t))))))),pt=(0,l.dual)(3,((e,t,n)=>re([e.initial,t],((t,r,[i,a])=>J.flatMap(e.step(t,r,i),(([e,t,r])=>W.isDone(r)?J.succeed([[e,a],a,r]):J.map(n(a,t),(t=>[[e,t],a,r])))))))),mt=e=>re(e.initial,((t,n,r)=>{const i=(t,n,r)=>J.flatMap(e.step(t,n,r),(([r,a,s])=>W.isDone(s)?i(t,n,e.initial):J.succeed([r,a,s])));return i(t,n,r)})),gt=e=>ht(e,0,((e,t)=>e+1)),yt=(0,l.dual)(2,((e,t)=>{const n=U.decode(t);return(0,l.pipe)(e,Ve(wn),bt((([,e])=>U.greaterThanOrEqualTo(e,n))),Ze((e=>e[0])))})),bt=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.flatMap(e.step(n,r,i),(([i,a,s])=>t(a)?e.step(n,r,e.initial):J.succeed([i,a,s]))))))),St=(0,l.dual)(3,((e,t,n)=>(0,l.pipe)(wt(e,t,r.fromIterable(n),e.initial,r.empty()),J.map((e=>r.reverse(e)))))),wt=(e,t,n,i,a)=>{if(!r.isNonEmpty(n))return J.succeed(a);const s=r.headNonEmpty(n),o=r.tailNonEmpty(n);return J.flatMap(e.step(t,s,i),(([t,n,i])=>W.isDone(i)?J.sync((()=>(0,l.pipe)(a,r.prepend(n)))):wt(e,V.start(i.intervals),o,t,r.prepend(a,n))))},vt=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return J.dieSync((()=>new J.IllegalArgumentException(`Invalid argument in: secondOfMinute(${e}). Must be in range 0...59`)));const i=r[1],a=Vt(t,e,0===i),s=Wt(a),o=zt(a),c=z.make(s,o);return J.succeed([[o,i+1],i,W.continueWith(c)])})),Et=e=>ie(vn,(()=>e)),kt=e=>Ze(vn,(()=>e)),xt=e=>Ze(vn,e),_t=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.zipRight(t(r),e.step(n,r,i)))))),It=(0,l.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>J.tap(e.step(n,r,i),(([,e])=>t(e))))))),Tt=(e,t)=>re(e,((e,n,r)=>J.sync((()=>[t(r),r,W.continueWith(z.after(e))])))),Ot=(0,l.dual)(2,((e,t)=>At(e,t,V.union))),At=(0,l.dual)(3,((e,t,n)=>re([e.initial,t.initial],((r,i,a)=>J.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),(([e,t,r],[i,a,s])=>{if(W.isDone(r)&&W.isDone(s))return[[e,i],[t,a],W.done];if(W.isDone(r)&&W.isContinue(s))return[[e,i],[t,a],W.continue(s.intervals)];if(W.isContinue(r)&&W.isDone(s))return[[e,i],[t,a],W.continue(r.intervals)];if(W.isContinue(r)&&W.isContinue(s)){const o=n(r.intervals,s.intervals);return[[e,i],[t,a],W.continue(o)]}throw new Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),Nt=(0,l.dual)(2,((e,t)=>fe(e,((e,n)=>!t(e))))),Ct=(0,l.dual)(2,((e,t)=>de(e,((e,n)=>K.negate(t(e)))))),Rt=(0,l.dual)(2,((e,t)=>fe(e,((e,n)=>!t(n))))),Ft=(0,l.dual)(2,((e,t)=>de(e,((e,n)=>K.negate(t(n)))))),Mt=(0,l.dual)(2,((e,t)=>Bt(e,ut(t)))),Lt=(0,l.dual)(2,((e,t)=>fe(e,((e,n)=>t(e))))),Pt=(0,l.dual)(2,((e,t)=>de(e,((e,n)=>t(e))))),Dt=(0,l.dual)(2,((e,t)=>fe(e,((e,n)=>t(n))))),Ut=(0,l.dual)(2,((e,t)=>de(e,((e,n)=>t(n))))),jt=e=>{const t=U.decode(e),n=U.toMillis(t);return re([j.none(),0],((e,t,[r,i])=>{switch(r._tag){case"None":return J.succeed([[j.some(e),i+1],i,W.continueWith(z.after(e+n))]);case"Some":return J.succeed([[j.some(r.value),i+1],i,W.continueWith(z.after(e+(n-(e-r.value)%n)))])}}))},Bt=(0,l.dual)(2,((e,t)=>Ze(Ve(e,t),(e=>e[0])))),qt=(0,l.dual)(2,((e,t)=>Ze(Ve(e,t),(e=>e[1])))),$t=(0,l.dual)(3,((e,t,n)=>Ze(Ve(e,t),(([e,t])=>n(e,t))))),Wt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0).getTime()},zt=e=>{const t=new Date(Wt(e));return t.setSeconds(t.getSeconds()+1)},Vt=(e,t,n)=>{const r=new Date(e);if(r.getSeconds()===t&&n)return e;if(r.getSeconds()<t)return r.setSeconds(t);const i=new Date(r.setSeconds(t));return i.setTime(i.getTime()+6e4)},Gt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0).getTime()},Kt=e=>{const t=new Date(Gt(e));return t.setMinutes(t.getMinutes()+1)},Jt=(e,t,n)=>{const r=new Date(e);if(r.getMinutes()===t&&n)return e;if(r.getMinutes()<t)return r.setMinutes(t);const i=new Date(r.setMinutes(t));return i.setTime(i.getTime()+36e5)},Ht=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime()},Yt=e=>{const t=new Date(Ht(e));return t.setHours(t.getHours()+1)},Zt=(e,t,n)=>{const r=new Date(e);if(r.getHours()===t&&n)return e;if(r.getHours()<t)return r.setHours(t);const i=new Date(r.setHours(t));return i.setTime(i.getTime()+864e5)},Qt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime()},Xt=e=>{const t=new Date(Qt(e));return t.setDate(t.getDate()+1)},en=(e,t,n)=>{const r=new Date(e);if(r.getDay()===t&&n)return e;const i=(7+t-r.getDay())%7;return r.setDate(r.getDate()+(0===i?7:i))},tn=(e,t,n)=>{const r=new Date(e);return r.getDate()===t&&n?e:r.getDate()<t?r.setDate(t):nn(e,t,1)},nn=(e,t,n)=>{const r=new Date(e),i=new Date(r.setDate(t));if(new Date(i.setMonth(i.getMonth()+n)).getDate()===t){const r=new Date(e),i=new Date(r.setDate(t));return i.setMonth(i.getMonth()+n)}return nn(e,t,n+1)},rn=Symbol.for("effect/Schedule/ScheduleDefect");class an{error;[rn];constructor(e){this.error=e,this[rn]=rn}}const sn=e=>J.catchAll(e,(e=>J.die(new an(e)))),on=e=>J.catchAllCause(e,(e=>j.match(G.find(e,(e=>{return G.isDieType(e)&&(t=e.defect,(0,m.hasProperty)(t,rn))?j.some(e.defect):j.none();var t})),{onNone:()=>J.failCause(e),onSome:e=>J.fail(e.error)}))),cn=(0,l.dual)(2,((e,t)=>ln(e,t,((e,t)=>J.fail(e))))),un=(0,l.dual)(2,((e,t)=>{if(Z(t))return cn(e,t);const n=t.schedule??rt(vn),r=t.while?Pt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?J.succeed(n):sn(n)})):n,i=t.until?Ct(r,(e=>{const n=t.until(e);return"boolean"===typeof n?J.succeed(n):sn(n)})):r,a=t.times?Ve(i,dt(t.times)):i;return on(cn(e,a))})),ln=(0,l.dual)(3,((e,t,n)=>J.flatMap(Re(t),(t=>J.matchEffect(e,{onFailure:e=>n(e,j.none()),onSuccess:r=>fn(e,t,n,r)}))))),fn=(e,t,n,r)=>J.matchEffect(t.next(r),{onFailure:()=>J.orDie(t.last),onSuccess:r=>J.matchEffect(e,{onFailure:e=>n(e,j.some(r)),onSuccess:r=>fn(e,t,n,r)})}),dn=(0,l.dual)(2,((e,t)=>pn(e,t,((e,t)=>J.fail(e))))),hn=(0,l.dual)(2,((e,t)=>{if(Z(t))return dn(e,t);const n=t.schedule??vn,r=t.while?Pt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?J.succeed(n):sn(n)})):n,i=t.until?Ct(r,(e=>{const n=t.until(e);return"boolean"===typeof n?J.succeed(n):sn(n)})):r,a=t.times?Ve(i,dt(t.times)):i;return on(dn(e,a))})),pn=(0,l.dual)(3,((e,t,n)=>J.flatMap(Re(t),(t=>mn(e,t,n))))),mn=(e,t,n)=>J.catchAll(e,(r=>J.matchEffect(t.next(r),{onFailure:()=>(0,l.pipe)(t.last,J.orDie,J.flatMap((e=>n(r,e)))),onSuccess:()=>mn(e,t,n)}))),gn=(0,l.dual)(2,((e,t)=>yn(e,void 0,t))),yn=(0,l.dual)(3,((e,t,n)=>J.flatMap(Re(n),(n=>bn(e,t,n))))),bn=(e,t,n)=>J.matchEffect(n.next(t),{onFailure:()=>J.orDie(n.last),onSuccess:()=>J.flatMap(e,(t=>bn(e,t,n)))}),Sn=Tt(0,(e=>e+1)),wn=re(j.none(),((e,t,n)=>{switch(n._tag){case"None":return J.succeed([j.some(e),U.zero,W.continueWith(z.after(e))]);case"Some":return J.succeed([j.some(n.value),U.millis(e-n.value),W.continueWith(z.after(e))])}})),vn=Tt(0,(e=>e+1)),En=ue(dt(1)),kn=ue(dt(0))},238961:(e,t,n)=>{n.r(t),n.d(t,{SingleShotGen:()=>r});class r{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new r(this.self)}}},107687:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r});const r=(e,t)=>({value:e,previous:t})},235021:(e,t,n)=>{n.r(t),n.d(t,{Const:()=>m,ProxySupervisor:()=>f,SupervisorTypeId:()=>u,Track:()=>p,Zip:()=>d,fibersIn:()=>v,fromEffect:()=>S,isZip:()=>h,none:()=>w,supervisorVariance:()=>l,track:()=>b,unsafeTrack:()=>y});var r=n(361369),i=n(606517),a=n(645914),s=n(856572),o=n(147985),c=n(672620);const u=Symbol.for("effect/Supervisor"),l={_T:e=>e};class f{underlying;value0;[u]=l;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,n,r){this.underlying.onStart(e,t,n,r)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}}class d{left;right;_tag="Zip";[u]=l;constructor(e,t){this.left=e,this.right=t}get value(){return c.zip(this.left.value,this.right.value)}onStart(e,t,n,r){this.left.onStart(e,t,n,r),this.right.onStart(e,t,n,r)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}}const h=e=>(0,s.hasProperty)(e,u)&&(0,s.isTagged)(e,"Zip");class p{[u]=l;fibers=new Set;get value(){return c.sync((()=>Array.from(this.fibers)))}onStart(e,t,n,r){this.fibers.add(r)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}class m{effect;[u]=l;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,n,r){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}class g{ref;[u]=l;constructor(e){this.ref=e}get value(){return c.sync((()=>a.get(this.ref)))}onStart(e,t,n,i){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),o.add(i))))}onEnd(e,t){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),o.remove(t))))}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}const y=()=>new p,b=c.sync(y),S=e=>new m(e),w=(0,i.globalValue)("effect/Supervisor/none",(()=>S(c.void))),v=e=>c.sync((()=>new g(e)))},823180:(e,t,n)=>{n.r(t),n.d(t,{getAndUpdateEffect:()=>s,getAndUpdateSomeEffect:()=>o,modify:()=>c,modifyEffect:()=>u,modifySomeEffect:()=>l,updateAndGetEffect:()=>d,updateEffect:()=>f,updateSomeEffect:()=>h});var r=n(361369),i=n(977948),a=n(672620);const s=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(t=>[e,t])))))),o=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return a.succeed([e,e]);case"Some":return a.map(n.value,(t=>[e,t]))}})))),c=(0,r.dual)(2,((e,t)=>e.modify(t))),u=(0,r.dual)(2,((e,t)=>e.modifyEffect(t))),l=(0,r.dual)(3,((e,t,n)=>e.modifyEffect((e=>(0,r.pipe)(n(e),i.getOrElse((()=>a.succeed([t,e])))))))),f=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(e=>[void 0,e])))))),d=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(e=>[e,e])))))),h=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return a.succeed([void 0,e]);case"Some":return a.map(n.value,(e=>[void 0,e]))}}))))},127514:(e,t,n)=>{n.r(t),n.d(t,{NativeSpan:()=>u,TracerTypeId:()=>i,addSpanStackTrace:()=>d,externalSpan:()=>f,make:()=>a,nativeTracer:()=>l,spanTag:()=>o,tracerTag:()=>s});var r=n(689702);const i=Symbol.for("effect/Tracer"),a=e=>({[i]:i,...e}),s=r.GenericTag("effect/Tracer"),o=r.GenericTag("effect/ParentSpan"),c=function(){const e="abcdef0123456789";return function(t){let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(16*Math.random()));return n}}();class u{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,n,r,i,a){this.name=e,this.parent=t,this.context=n,this.links=r,this.startTime=i,this.kind=a,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:c(32),this.spanId=c(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,n){this.events.push([e,t,n??{}])}}const l=a({span:(e,t,n,r,i,a)=>new u(e,t,n,r,i,a),context:e=>e()}),f=e=>({_tag:"ExternalSpan",spanId:e.spanId,traceId:e.traceId,sampled:e.sampled??!0,context:e.context??r.empty()}),d=e=>{if(!1===e?.captureStackTrace)return e;if(void 0!==e?.captureStackTrace&&"boolean"!==typeof e.captureStackTrace)return e;const t=Error.stackTraceLimit;Error.stackTraceLimit=3;const n=new Error;Error.stackTraceLimit=t;let r=!1;return{...e,captureStackTrace:()=>{if(!1!==r)return r;if(void 0!==n.stack){const e=n.stack.split("\n");if(void 0!==e[3])return r=e[3].trim(),r}}}}},853563:(e,t,n)=>{n.r(t),n.d(t,{getCurrentVersion:()=>i,setCurrentVersion:()=>a});let r="3.5.7";const i=()=>r,a=e=>{r=e}},659599:(e,t,n)=>{n.r(t),n.d(t,{customAlphabet:()=>s,customRandom:()=>a,nanoid:()=>o,random:()=>i,urlAlphabet:()=>r});let r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),a=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(a=t)=>{let s="";for(;;){let t=n(i),o=i;for(;o--;)if(s+=e[t[o]&r]||"",s.length===a)return s}}},s=(e,t=21)=>a(e,t,i),o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);
//# sourceMappingURL=122.js.map