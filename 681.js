/*! For license information please see 681.js.LICENSE.txt */
"use strict";(self.webpackChunkStarpyApp=self.webpackChunkStarpyApp||[]).push([[681],{489011:(e,t,n)=>{function r(e,t){if(!e)throw new Error(t)}function i(e,t){throw new Error(null!==t&&void 0!==t?t:"Unexpected object: "+e)}n.r(t),n.d(t,{assert:()=>r,assertFloat32:()=>d,assertInt32:()=>u,assertNever:()=>i,assertUInt32:()=>f});const a=34028234663852886e22,s=-34028234663852886e22,o=4294967295,c=2147483647,l=-2147483648;function u(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>c||e<l)throw new Error("invalid int 32: "+e)}function f(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>o||e<0)throw new Error("invalid uint 32: "+e)}function d(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>a||e<s))throw new Error("invalid float 32: "+e)}},438645:(e,t,n)=>{var r,i;function a(e,t){return Object.assign(Object.assign({},e),t)}n.r(t),n.d(t,{UnknownFieldHandler:()=>r,WireType:()=>i,mergeBinaryOptions:()=>a}),function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,a,s)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:a,data:s})},e.onWrite=(t,n,r)=>{for(let{no:i,wireType:a,data:s}of e.list(n))r.tag(i,a).raw(s)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter((e=>e.no==r)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(r||(r={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(i||(i={}))},729618:(e,t,n)=>{n.r(t),n.d(t,{BinaryReader:()=>c,binaryReadOptions:()=>o});var r=n(438645),i=n(207194),a=n(947532);const s={readUnknownField:!0,readerFactory:e=>new c(e)};function o(e){return e?Object.assign(Object.assign({},s),e):s}class c{constructor(e,t){this.varint64=a.varint64read,this.uint32=a.varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case r.WireType.Varint:for(;128&this.buf[this.pos++];);break;case r.WireType.Bit64:this.pos+=4;case r.WireType.Bit32:this.pos+=4;break;case r.WireType.LengthDelimited:let t=this.uint32();this.pos+=t;break;case r.WireType.StartGroup:let n;for(;(n=this.tag()[1])!==r.WireType.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new i.PbLong(...this.varint64())}uint64(){return new i.PbULong(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new i.PbLong(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new i.PbULong(this.sfixed32(),this.sfixed32())}sfixed64(){return new i.PbLong(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}},697554:(e,t,n)=>{n.r(t),n.d(t,{BinaryWriter:()=>c,binaryWriteOptions:()=>o});var r=n(207194),i=n(947532),a=n(489011);const s={writeUnknownFields:!0,writerFactory:()=>new c};function o(e){return e?Object.assign(Object.assign({},s),e):s}class c{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for((0,a.assertUInt32)(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return(0,a.assertInt32)(e),(0,i.varint32write)(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){(0,a.assertFloat32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){(0,a.assertUInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){(0,a.assertInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return(0,a.assertInt32)(e),e=(e<<1^e>>31)>>>0,(0,i.varint32write)(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=r.PbLong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=r.PbULong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=r.PbLong.from(e);return(0,i.varint64write)(t.lo,t.hi,this.buf),this}sint64(e){let t=r.PbLong.from(e),n=t.hi>>31,a=t.lo<<1^n,s=(t.hi<<1|t.lo>>>31)^n;return(0,i.varint64write)(a,s,this.buf),this}uint64(e){let t=r.PbULong.from(e);return(0,i.varint64write)(t.lo,t.hi,this.buf),this}}},947532:(e,t,n)=>{function r(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function i(e,t,n){for(let a=0;a<28;a+=7){const r=e>>>a,i=!(r>>>7==0&&0==t),s=255&(i?128|r:r);if(n.push(s),!i)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0),a=255&(i?128|r:r);if(n.push(a),!i)return}n.push(t>>>31&1)}}n.r(t),n.d(t,{int64fromString:()=>s,int64toString:()=>o,varint32read:()=>l,varint32write:()=>c,varint64read:()=>r,varint64write:()=>i});const a=4294967296;function s(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(t,s){const o=Number(e.slice(t,s));i*=n,r=r*n+o,r>=a&&(i+=r/a|0,r%=a)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function o(e,t){if(t>>>0<=2097151)return""+(a*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,s=n+8147497*r,o=2*r,c=1e7;function l(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=c&&(s+=Math.floor(i/c),i%=c),s>=c&&(o+=Math.floor(s/c),s%=c),l(o,0)+l(s,o)+l(i,1)}function c(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function l(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}},207194:(e,t,n)=>{n.r(t),n.d(t,{PbLong:()=>d,PbULong:()=>f,detectBi:()=>a});var r=n(947532);let i;function a(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64;i=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}function s(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}a();const o=/^-?[0-9]+$/,c=4294967296,l=2147483648;class u{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*c+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class f extends u{static from(e){if(i)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=i.C(e);case"number":if(0===e)return this.ZERO;e=i.C(e);case"bigint":if(!e)return this.ZERO;if(e<i.UMIN)throw new Error("signed value for ulong");if(e>i.UMAX)throw new Error("ulong too large");return i.V.setBigUint64(0,e,!0),new f(i.V.getInt32(0,!0),i.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,n,i]=(0,r.int64fromString)(e);if(t)throw new Error("signed value for ulong");return new f(n,i);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new f(e,e/c)}throw new Error("unknown value "+typeof e)}toString(){return i?this.toBigInt().toString():(0,r.int64toString)(this.lo,this.hi)}toBigInt(){return s(i),i.V.setInt32(0,this.lo,!0),i.V.setInt32(4,this.hi,!0),i.V.getBigUint64(0,!0)}}f.ZERO=new f(0,0);class d extends u{static from(e){if(i)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=i.C(e);case"number":if(0===e)return this.ZERO;e=i.C(e);case"bigint":if(!e)return this.ZERO;if(e<i.MIN)throw new Error("signed long too small");if(e>i.MAX)throw new Error("signed long too large");return i.V.setBigInt64(0,e,!0),new d(i.V.getInt32(0,!0),i.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,n,i]=(0,r.int64fromString)(e);if(t){if(i>l||i==l&&0!=n)throw new Error("signed long too small")}else if(i>=l)throw new Error("signed long too large");let a=new d(n,i);return t?a.negate():a;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new d(e,e/c):new d(-e,-e/c).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!==(this.hi&l)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new d(t,e)}toString(){if(i)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+(0,r.int64toString)(e.lo,e.hi)}return(0,r.int64toString)(this.lo,this.hi)}toBigInt(){return s(i),i.V.setInt32(0,this.lo,!0),i.V.setInt32(4,this.hi,!0),i.V.getBigInt64(0,!0)}}d.ZERO=new d(0,0)},263616:(e,t,n)=>{n.r(t),n.d(t,{expose:()=>c,wrap:()=>o});var r=n(684802),i=n(145916),a=n(737028),s=n(659599);const o=e=>{const t=new Map;e.onmessage=({data:e})=>{const n=t.get(e.id);n&&(n(e.response),t.delete(e.id))};return new Proxy(e,{get:(e,n)=>(...i)=>a.flatMap(r.Config,(r=>a.async((o=>{const c=[],l=i.map((e=>{if("function"!==typeof e)return e;const t=new MessageChannel;return t.port1.onmessage=({data:t})=>{e(...t)},c.push(t.port2),t.port2})),u=(0,s.nanoid)();t.set(u,(e=>{o(a[e._tag](e.value))}));const f={id:u,name:n,args:l,config:r};e.postMessage(f,c)}))))})},c=e=>{let t=null;onmessage=({data:{id:n,name:s,args:o,config:c}})=>{null==t&&(t=(0,r.createRuntime)(c));const l=o.map((e=>e instanceof MessagePort?(...t)=>{e.postMessage(t)}:e));t.runFork(e[s](...l).pipe(a.map((e=>({id:n,response:{_tag:"succeed",value:e}}))),a.catchAll((e=>a.succeed({id:n,response:{_tag:"fail",value:e}}))),a.catchAllDefect((e=>a.succeed({id:n,response:{_tag:"die",value:(0,i.ensureTransferableError)(e)}}))),a.tap((e=>postMessage(e)))))}}},684802:(e,t,n)=>{n.r(t),n.d(t,{Config:()=>D,createRuntime:()=>j,defaultConfig:()=>U});var r=n(499779),i=n(350025),a=n(161938),s=n(365519),o=n(797281),c=(n(114471),n(154258)),l=(n(398826),n(287258),n(597081));n(646699),n(334196);var u=n(60526);u.LoggerTypeId;const f=u.makeLogger,d=(o.addLogger,o.addLoggerEffect,o.addLoggerScoped,u.mapInput,u.mapInputOptions,u.filterLogLevel,u.map,s.batchedLogger,s.loggerWithConsoleLog,s.loggerWithConsoleError,u.none,o.removeLogger,o.replaceLogger),p=(o.replaceLoggerEffect,o.replaceLoggerScoped,u.simple,u.succeed,u.sync,o.withMinimumLogLevel,s.loggerWithSpanAnnotations,u.zip,u.zipLeft,u.zipRight,s.defaultLogger),h=(u.jsonLogger,u.logfmtLogger,u.stringLogger,u.prettyLogger,u.structuredLogger,s.tracerLogger,s.defaultLogger,s.jsonLogger,s.defaultLogger,s.logFmtLogger,s.defaultLogger,s.prettyLogger,s.defaultLogger,s.structuredLogger,o.minimumLogLevel);u.isLogger;var m=n(709322),g=n(823864),y=n(694375),b=n(232376),S=n(595296);function v(e,t){return l.flatMap(e.runtimeEffect,(e=>l.withFiberRuntime((n=>(n.setFiberRefs(e.fiberRefs),n._runtimeFlags=e.runtimeFlags,l.provideContext(t,e.context))))))}const w=(e,t)=>{t=t??b.unsafeMakeMemoMap();const n=S.unsafeRunSyncEffect(s.scopeMake()),r={memoMap:t,scope:n,runtimeEffect:S.unsafeRunSyncEffect(y.memoize(l.tap(g.extend(b.toRuntimeWithMemoMap(e,t),n),(e=>{r.cachedRuntime=e})))),cachedRuntime:void 0,pipe(){return(0,m.pipeArguments)(this,arguments)},runtime:()=>void 0===r.cachedRuntime?S.unsafeRunPromiseEffect(r.runtimeEffect):Promise.resolve(r.cachedRuntime),dispose:()=>S.unsafeRunPromiseEffect(r.disposeEffect),disposeEffect:l.suspend((()=>(r.runtime=l.die("ManagedRuntime disposed"),r.cachedRuntime=void 0,g.close(r.scope,l.exitVoid)))),runFork:(e,t)=>void 0===r.cachedRuntime?S.unsafeForkEffect(v(r,e),t):S.unsafeFork(r.cachedRuntime)(e,t),runSyncExit:e=>void 0===r.cachedRuntime?S.unsafeRunSyncExitEffect(v(r,e)):S.unsafeRunSyncExit(r.cachedRuntime)(e),runSync:e=>void 0===r.cachedRuntime?S.unsafeRunSyncEffect(v(r,e)):S.unsafeRunSync(r.cachedRuntime)(e),runPromiseExit:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunPromiseExitEffect(v(r,e),t):S.unsafeRunPromiseExit(r.cachedRuntime)(e,t),runCallback:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunCallback(S.defaultRuntime)(v(r,e),t):S.unsafeRunCallback(r.cachedRuntime)(e,t),runPromise:(e,t)=>void 0===r.cachedRuntime?S.unsafeRunPromiseEffect(v(r,e),t):S.unsafeRunPromise(r.cachedRuntime)(e,t)};return r};var E=n(411123);n(504491);const _=Symbol.for("@effect/matcher/Matcher"),k={[_]:{_input:c.identity,_filters:c.identity,_remaining:c.identity,_result:c.identity,_return:c.identity},_tag:"TypeMatcher",add(e){return x([...this.cases,e])},pipe(){return(0,m.pipeArguments)(this,arguments)}};function x(e){const t=Object.create(k);return t.cases=e,t}const I={[_]:{_input:c.identity,_filters:c.identity,_result:c.identity,_return:c.identity},_tag:"ValueMatcher",add(e){return"Right"===this.value._tag?this:"When"===e._tag&&!0===e.guard(this.provided)||"Not"===e._tag&&!1===e.guard(this.provided)?T(this.provided,E.right(e.evaluate(this.provided))):this},pipe(){return(0,m.pipeArguments)(this,arguments)}};function T(e,t){const n=Object.create(I);return n.provided=e,n.value=t,n}const O=(e,t)=>({_tag:"When",guard:e,evaluate:t}),A=e=>{if("function"===typeof e)return e;if(Array.isArray(e)){const t=e.map(A),n=t.length;return e=>{if(!Array.isArray(e))return!1;for(let r=0;r<n;r++)if(!1===t[r](e[r]))return!1;return!0}}if(null!==e&&"object"===typeof e){const t=Object.entries(e).map((([e,t])=>[e,A(t)])),n=t.length;return e=>{if("object"!==typeof e||null===e)return!1;for(let r=0;r<n;r++){const[n,i]=t[r];if(!(n in e)||!1===i(e[n]))return!1}return!0}}return t=>t===e},N=e=>{if("ValueMatcher"===e._tag)return e.value;const t=e.cases.length;if(1===t){const t=e.cases[0];return e=>"When"===t._tag&&!0===t.guard(e)||"Not"===t._tag&&!1===t.guard(e)?E.right(t.evaluate(e)):E.left(e)}return n=>{for(let r=0;r<t;r++){const t=e.cases[r];if("When"===t._tag&&!0===t.guard(n))return E.right(t.evaluate(n));if("Not"===t._tag&&!1===t.guard(n))return E.right(t.evaluate(n))}return E.left(n)}},M="effect/Match/exhaustive: absurd",C=e=>{const t=N(e);if(E.isEither(t)){if("Right"===t._tag)return t.right;throw new Error(M)}return e=>{const n=t(e);if("Right"===n._tag)return n.right;throw new Error(M)}};var R=n(125105);const F=e=>T(e,E.left(e)),L=(e,t)=>n=>n.add(O(A(e),t)),P=(R.isString,R.isNumber,R.isBoolean,R.isUndefined,R.isNull,R.isBigInt,R.isSymbol,R.isDate,R.isRecord,C),D=r.GenericTag("Config"),U={reloadUrl:"/",syncUrl:"https://evolu.world",name:"Evolu",maxDrift:3e5,minimumLogLevel:"none"},j=e=>{const t={...U,...e},n=i.succeed(D,t),r=F(t.minimumLogLevel).pipe(L("debug",(()=>a.Debug)),L("none",(()=>a.None)),L("trace",(()=>a.Trace)),L("warning",(()=>a.Warning)),P),s="none"===t.minimumLogLevel?n:i.mergeAll(n,h(r),d(p,q(t.name)));return w(s)},q=e=>f((({logLevel:t,message:n,date:r})=>{const i="Warning"===t._tag?"warn":"Error"===t._tag?"error":"log",a=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}:${r.getMilliseconds().toString().padStart(3,"0")}`,s=Array.isArray(n)?n:[n];globalThis.console[i](`${a} [${e}]`,...s)}))},431437:(e,t,n)=>{n.r(t),n.d(t,{AllowedTimeRange:()=>y,Counter:()=>v,Millis:()=>b,Time:()=>O,diffMerkleTrees:()=>W,initialMerkleTree:()=>F,initialMillis:()=>S,insertIntoMerkleTree:()=>U,makeInitialTimestamp:()=>T,makeSyncTimestamp:()=>I,merkleTreeToString:()=>B,millisToMerkleTreePath:()=>L,receiveTimestamp:()=>R,sendTimestamp:()=>C,timestampToHash:()=>k,timestampToString:()=>E,unsafeMerkleTreeFromString:()=>z,unsafeTimestampFromString:()=>_});var r=n(973043),i=n(919662),a=n(342072),s=n(499779),o=n(837875),c=n(411123),l=n(154258),u=n(350025),f=n(962047),d=n(504491),p=n(263247),h=n(684802),m=n(752066),g=n(184208);const y={greaterThan:860934419999,lessThan:258280326e4},b=r.Number.pipe(r.greaterThan(y.greaterThan),r.lessThan(y.lessThan),r.brand("Millis")),S=i.decodeSync(b)(y.greaterThan+1),v=r.Number.pipe(r.between(0,65535),r.brand("Counter")),w=i.decodeSync(v)(0),E=e=>[new Date(e.millis).toISOString(),e.counter.toString(16).toUpperCase().padStart(4,"0"),e.node].join("-"),_=e=>{const t=e.split("-");return{millis:Date.parse(t.slice(0,3).join("-")).valueOf(),counter:parseInt(t[3],16),node:t[4]}},k=e=>(0,g.murmurhash)(E(e)),x=i.decodeSync(m.NodeId)("0000000000000000"),I=(e=S)=>({millis:e,counter:w,node:x}),T=m.NanoIdGenerator.pipe(o.flatMap((({nodeId:e})=>e)),o.map((e=>({millis:S,counter:w,node:e}))));class O extends(s.Tag("Time")()){}O.Live=u.succeed(O,{now:o.suspend((()=>r.decode(b)(Date.now()))).pipe(o.catchTag("ParseError",(()=>o.fail({_tag:"TimestampTimeOutOfRangeError"}))))});const A=e=>o.gen((function*(){const t=yield*O,n=yield*h.Config,r=yield*t.now,i=Math.max(r,...e);return i-r>n.maxDrift&&(yield*o.fail({_tag:"TimestampDriftError",now:r,next:i})),i})),N=e=>(0,l.pipe)(f.increment(e),r.decodeEither(v),c.mapLeft((()=>({_tag:"TimestampCounterOverflowError"})))),M=i.decodeSync(v)(0),C=e=>o.gen((function*(){const t=yield*A([e.millis]),n=t===e.millis?yield*N(e.counter):M;return{...e,millis:t,counter:n}})),R=({local:e,remote:t})=>o.gen((function*(n){e.node===t.node&&(yield*o.fail({_tag:"TimestampDuplicateNodeError",node:e.node}));const r=yield*A([e.millis,t.millis]),i=yield*r===e.millis&&r===t.millis?N(Math.max(e.counter,t.counter)):r===e.millis?N(e.counter):r===t.millis?N(t.counter):c.right(M);return{...e,millis:r,counter:i}})),F=Object.create(null),L=e=>Math.floor(e/1e3/60).toString(3).split(""),P=(e,t)=>(e||0)^t,D=(e,t,n)=>{if(0===t.length)return e;const r=t[0],i=e[r]||{};return{...e,[r]:{...i,...D(i,t.slice(1),n),hash:P(i.hash,n)}}},U=(e,t)=>{const n=L(t.millis),r=k(t);return D({...e,hash:P(e.hash,r)},n,r)},j=["0","1","2"],q=e=>j.filter((t=>t in e)),W=(e,t)=>{if(e.hash===t.hash)return d.none();let n=e,r=t,i=[];for(;;){const e=a.dedupeWith(q(n).concat(q(r)),p.Equivalence);let t=null;for(let i=0;i<e.length;i++){const a=e[i],s=n[a],o=r[a];if(!s||!o)break;if(s.hash!==o.hash){t=a;break}}if(!t)return d.some(0===(s=i).length?S:1e3*parseInt(s.join("").padEnd(16,"0"),3)*60);i=[...i,t],n=n[t]||F,r=r[t]||F}var s;return d.none()},B=e=>JSON.stringify(e),z=e=>JSON.parse(e)},752066:(e,t,n)=>{n.r(t),n.d(t,{NanoIdGenerator:()=>Ge,NodeId:()=>He,SecretBox:()=>Ye,createMnemonic:()=>ze,createNanoIdGeneratorLive:()=>Je,mnemonicToSeed:()=>Ve,parseMnemonic:()=>$e,slip21Derive:()=>Ke});var r=n(973043),i=n(643566),a=n(643528);const s=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),o=s("expand 16-byte k"),c=s("expand 32-byte k"),l=(0,a.u32)(o),u=(0,a.u32)(c);u.slice();function f(e,t){return e<<t|e>>>32-t}function d(e){return e.byteOffset%4===0}const p=64,h=16,m=2**32-1,g=new Uint32Array;function y(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:c}=(0,a.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!==typeof e)throw new Error("core must be a function");return(0,i.number)(s),(0,i.number)(c),(0,i.bool)(o),(0,i.bool)(n),(t,f,y,b,S=0)=>{(0,i.bytes)(t),(0,i.bytes)(f),(0,i.bytes)(y);const v=y.length;if(b||(b=new Uint8Array(v)),(0,i.bytes)(b),(0,i.number)(S),S<0||S>=m)throw new Error("arx: counter overflow");if(b.length<v)throw new Error(`arx: output (${b.length}) is shorter than data (${v})`);const w=[];let E,_,k=t.length;if(32===k)E=t.slice(),w.push(E),_=u;else{if(16!==k||!n)throw new Error(`arx: invalid 32-byte key, got length=${k}`);E=new Uint8Array(32),E.set(t),E.set(t,16),_=l,w.push(E)}d(f)||(f=f.slice(),w.push(f));const x=(0,a.u32)(E);if(r){if(24!==f.length)throw new Error("arx: extended nonce must be 24 bytes");r(_,x,(0,a.u32)(f.subarray(0,16)),x),f=f.subarray(16)}const I=16-s;if(I!==f.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(12!==I){const e=new Uint8Array(12);e.set(f,o?0:12-f.length),f=e,w.push(f)}const T=(0,a.u32)(f);for(!function(e,t,n,r,i,s,o,c){const l=i.length,u=new Uint8Array(p),f=(0,a.u32)(u),y=d(i)&&d(s),b=y?(0,a.u32)(i):g,S=y?(0,a.u32)(s):g;for(let a=0;a<l;o++){if(e(t,n,r,f,o,c),o>=m)throw new Error("arx: counter overflow");const d=Math.min(p,l-a);if(y&&d===p){const e=a/4;if(a%4!==0)throw new Error("arx: invalid block position");for(let t,n=0;n<h;n++)t=e+n,S[t]=b[t]^f[n];a+=p}else{for(let e,t=0;t<d;t++)e=a+t,s[e]=i[e]^u[t];a+=d}}}(e,_,x,T,y,b,S,c);w.length>0;)w.pop().fill(0);return b}}const b=(e,t)=>255&e[t++]|(255&e[t++])<<8;class S{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,a.toBytes)(e),(0,i.bytes)(e,32);const t=b(e,0),n=b(e,2),r=b(e,4),s=b(e,6),o=b(e,8),c=b(e,10),l=b(e,12),u=b(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|c<<2),this.r[7]=8065&(c>>>11|l<<5),this.r[8]=8191&(l>>>8|u<<8),this.r[9]=u>>>5&127;for(let i=0;i<8;i++)this.pad[i]=b(e,16+2*i)}process(e,t,n=!1){const r=n?0:2048,{h:i,r:a}=this,s=a[0],o=a[1],c=a[2],l=a[3],u=a[4],f=a[5],d=a[6],p=a[7],h=a[8],m=a[9],g=b(e,t+0),y=b(e,t+2),S=b(e,t+4),v=b(e,t+6),w=b(e,t+8),E=b(e,t+10),_=b(e,t+12),k=b(e,t+14);let x=i[0]+(8191&g),I=i[1]+(8191&(g>>>13|y<<3)),T=i[2]+(8191&(y>>>10|S<<6)),O=i[3]+(8191&(S>>>7|v<<9)),A=i[4]+(8191&(v>>>4|w<<12)),N=i[5]+(w>>>1&8191),M=i[6]+(8191&(w>>>14|E<<2)),C=i[7]+(8191&(E>>>11|_<<5)),R=i[8]+(8191&(_>>>8|k<<8)),F=i[9]+(k>>>5|r),L=0,P=L+x*s+I*(5*m)+T*(5*h)+O*(5*p)+A*(5*d);L=P>>>13,P&=8191,P+=N*(5*f)+M*(5*u)+C*(5*l)+R*(5*c)+F*(5*o),L+=P>>>13,P&=8191;let D=L+x*o+I*s+T*(5*m)+O*(5*h)+A*(5*p);L=D>>>13,D&=8191,D+=N*(5*d)+M*(5*f)+C*(5*u)+R*(5*l)+F*(5*c),L+=D>>>13,D&=8191;let U=L+x*c+I*o+T*s+O*(5*m)+A*(5*h);L=U>>>13,U&=8191,U+=N*(5*p)+M*(5*d)+C*(5*f)+R*(5*u)+F*(5*l),L+=U>>>13,U&=8191;let j=L+x*l+I*c+T*o+O*s+A*(5*m);L=j>>>13,j&=8191,j+=N*(5*h)+M*(5*p)+C*(5*d)+R*(5*f)+F*(5*u),L+=j>>>13,j&=8191;let q=L+x*u+I*l+T*c+O*o+A*s;L=q>>>13,q&=8191,q+=N*(5*m)+M*(5*h)+C*(5*p)+R*(5*d)+F*(5*f),L+=q>>>13,q&=8191;let W=L+x*f+I*u+T*l+O*c+A*o;L=W>>>13,W&=8191,W+=N*s+M*(5*m)+C*(5*h)+R*(5*p)+F*(5*d),L+=W>>>13,W&=8191;let B=L+x*d+I*f+T*u+O*l+A*c;L=B>>>13,B&=8191,B+=N*o+M*s+C*(5*m)+R*(5*h)+F*(5*p),L+=B>>>13,B&=8191;let z=L+x*p+I*d+T*f+O*u+A*l;L=z>>>13,z&=8191,z+=N*c+M*o+C*s+R*(5*m)+F*(5*h),L+=z>>>13,z&=8191;let $=L+x*h+I*p+T*d+O*f+A*u;L=$>>>13,$&=8191,$+=N*l+M*c+C*o+R*s+F*(5*m),L+=$>>>13,$&=8191;let V=L+x*m+I*h+T*p+O*d+A*f;L=V>>>13,V&=8191,V+=N*u+M*l+C*c+R*o+F*s,L+=V>>>13,V&=8191,L=(L<<2)+L|0,L=L+P|0,P=8191&L,L>>>=13,D+=L,i[0]=P,i[1]=D,i[2]=U,i[3]=j,i[4]=q,i[5]=W,i[6]=B,i[7]=z,i[8]=$,i[9]=V}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=r,r=e[s]>>>13,e[s]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=e[s]+r,r=n[s]>>>13,n[s]&=8191;n[9]-=8192;let i=(1^r)-1;for(let s=0;s<10;s++)n[s]&=i;i=~i;for(let s=0;s<10;s++)e[s]=e[s]&i|n[s];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let a=e[0]+t[0];e[0]=65535&a;for(let s=1;s<8;s++)a=(e[s]+t[s]|0)+(a>>>16)|0,e[s]=65535&a}update(e){(0,i.exists)(this);const{buffer:t,blockLen:n}=this,r=(e=(0,a.toBytes)(e)).length;for(let i=0;i<r;){const a=Math.min(n-this.pos,r-i);if(a!==n)t.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){(0,i.exists)(this),(0,i.output)(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let a=0;for(let i=0;i<8;i++)e[a++]=n[i]>>>0,e[a++]=n[i]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}const v=function(e){const t=(t,n)=>e(n).update((0,a.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}((e=>new S(e)));function w(e,t,n,r,i,a=20){let s=e[0],o=t[0],c=t[1],l=t[2],u=t[3],d=e[1],p=n[0],h=n[1],m=i,g=e[2],y=t[4],b=t[5],S=t[6],v=t[7],w=e[3],E=s,_=o,k=c,x=l,I=u,T=d,O=p,A=h,N=m,M=0,C=g,R=y,F=b,L=S,P=v,D=w;for(let j=0;j<a;j+=2)I^=f(E+F|0,7),N^=f(I+E|0,9),F^=f(N+I|0,13),E^=f(F+N|0,18),M^=f(T+_|0,7),L^=f(M+T|0,9),_^=f(L+M|0,13),T^=f(_+L|0,18),P^=f(C+O|0,7),k^=f(P+C|0,9),O^=f(k+P|0,13),C^=f(O+k|0,18),x^=f(D+R|0,7),A^=f(x+D|0,9),R^=f(A+x|0,13),D^=f(R+A|0,18),_^=f(E+x|0,7),k^=f(_+E|0,9),x^=f(k+_|0,13),E^=f(x+k|0,18),O^=f(T+I|0,7),A^=f(O+T|0,9),I^=f(A+O|0,13),T^=f(I+A|0,18),R^=f(C+M|0,7),N^=f(R+C|0,9),M^=f(N+R|0,13),C^=f(M+N|0,18),F^=f(D+P|0,7),L^=f(F+D|0,9),P^=f(L+F|0,13),D^=f(P+L|0,18);let U=0;r[U++]=s+E|0,r[U++]=o+_|0,r[U++]=c+k|0,r[U++]=l+x|0,r[U++]=u+I|0,r[U++]=d+T|0,r[U++]=p+O|0,r[U++]=h+A|0,r[U++]=m+N|0,r[U++]=0+M|0,r[U++]=g+C|0,r[U++]=y+R|0,r[U++]=b+F|0,r[U++]=S+L|0,r[U++]=v+P|0,r[U++]=w+D|0}const E=y(w,{counterRight:!0,extendNonceFn:function(e,t,n,r){let i=e[0],a=t[0],s=t[1],o=t[2],c=t[3],l=e[1],u=n[0],d=n[1],p=n[2],h=n[3],m=e[2],g=t[4],y=t[5],b=t[6],S=t[7],v=e[3];for(let E=0;E<20;E+=2)c^=f(i+y|0,7),p^=f(c+i|0,9),y^=f(p+c|0,13),i^=f(y+p|0,18),h^=f(l+a|0,7),b^=f(h+l|0,9),a^=f(b+h|0,13),l^=f(a+b|0,18),S^=f(m+u|0,7),s^=f(S+m|0,9),u^=f(s+S|0,13),m^=f(u+s|0,18),o^=f(v+g|0,7),d^=f(o+v|0,9),g^=f(d+o|0,13),v^=f(g+d|0,18),a^=f(i+o|0,7),s^=f(a+i|0,9),o^=f(s+a|0,13),i^=f(o+s|0,18),u^=f(l+c|0,7),d^=f(u+l|0,9),c^=f(d+u|0,13),l^=f(c+d|0,18),g^=f(m+h|0,7),p^=f(g+m|0,9),h^=f(p+g|0,13),m^=f(h+p|0,18),y^=f(v+S|0,7),b^=f(y+v|0,9),S^=f(b+y|0,13),v^=f(S+b|0,18);let w=0;r[w++]=i,r[w++]=l,r[w++]=m,r[w++]=v,r[w++]=u,r[w++]=d,r[w++]=p,r[w++]=h}}),_=(0,a.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},((e,t)=>{const n=16;return(0,i.bytes)(e,32),(0,i.bytes)(t,24),{encrypt:(r,a)=>{(0,i.bytes)(r);const s=r.length+32;a?(0,i.bytes)(a,s):a=new Uint8Array(s),a.set(r,32),E(e,t,a,a);const o=a.subarray(0,32),c=v(a.subarray(32),o);return a.set(c,n),a.subarray(0,n).fill(0),a.subarray(n)},decrypt:r=>{(0,i.bytes)(r);const s=r.length;if(s<n)throw new Error("encrypted data should be at least 16 bytes");const o=new Uint8Array(s+n);o.set(r,n);const c=E(e,t,new Uint8Array(32)),l=v(o.subarray(32),c);if(!(0,a.equalBytes)(o.subarray(16,32),l))throw new Error("invalid tag");const u=E(e,t,o);return u.subarray(0,32).fill(0),c.fill(0),u.subarray(32)}}}));function k(e,t){const n=_(e,t);return{seal:n.encrypt,open:n.decrypt}}function x(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function I(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"===typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function T(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");x(e.outputLen),x(e.blockLen)}function O(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function A(e,t){I(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const N="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const M=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),C=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function R(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),I(e),e}class F{clone(){return this._cloneInto()}}const L={}.toString;function P(e){const t=t=>e().update(R(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function D(e=32){if(N&&"function"===typeof N.getRandomValues)return N.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class U extends F{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,T(e);const n=R(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return O(this),this.iHash.update(e),this}digestInto(e){O(this),I(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:a,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const j=(e,t,n)=>new U(e,t).update(n).digest();j.create=(e,t)=>new U(e,t);const q=(e,t,n)=>e&t^e&n^t&n;class W extends F{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=M(this.buffer)}update(e){O(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=R(e)).length;for(let a=0;a<i;){const s=Math.min(r-this.pos,i-a);if(s!==r)n.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=M(e);for(;r<=i-a;a+=r)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){O(this),A(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let u=a;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),s=Number(n>>i&a),o=Number(n&a),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=M(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)s.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:a,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=a,r%t&&e.buffer.set(n),e}}const B=BigInt(2**32-1),z=BigInt(32);function $(e,t=!1){return t?{h:Number(e&B),l:Number(e>>z&B)}:{h:0|Number(e>>z&B),l:0|Number(e&B)}}const V={fromBig:$,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:s}=$(e[i],t);[n[i],r[i]]=[a,s]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<z|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},[G,J]=(()=>V.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),H=new Uint32Array(80),K=new Uint32Array(80);class Y extends W{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:a,Dh:s,Dl:o,Eh:c,El:l,Fh:u,Fl:f,Gh:d,Gl:p,Hh:h,Hl:m}=this;return[e,t,n,r,i,a,s,o,c,l,u,f,d,p,h,m]}set(e,t,n,r,i,a,s,o,c,l,u,f,d,p,h,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|a,this.Dh=0|s,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|f,this.Gh=0|d,this.Gl=0|p,this.Hh=0|h,this.Hl=0|m}process(e,t){for(let b=0;b<16;b++,t+=4)H[b]=e.getUint32(t),K[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|H[b-15],t=0|K[b-15],n=V.rotrSH(e,t,1)^V.rotrSH(e,t,8)^V.shrSH(e,t,7),r=V.rotrSL(e,t,1)^V.rotrSL(e,t,8)^V.shrSL(e,t,7),i=0|H[b-2],a=0|K[b-2],s=V.rotrSH(i,a,19)^V.rotrBH(i,a,61)^V.shrSH(i,a,6),o=V.rotrSL(i,a,19)^V.rotrBL(i,a,61)^V.shrSL(i,a,6),c=V.add4L(r,o,K[b-7],K[b-16]),l=V.add4H(c,n,s,H[b-7],H[b-16]);H[b]=0|l,K[b]=0|c}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:s,Cl:o,Dh:c,Dl:l,Eh:u,El:f,Fh:d,Fl:p,Gh:h,Gl:m,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const e=V.rotrSH(u,f,14)^V.rotrSH(u,f,18)^V.rotrBH(u,f,41),t=V.rotrSL(u,f,14)^V.rotrSL(u,f,18)^V.rotrBL(u,f,41),S=u&d^~u&h,v=f&p^~f&m,w=V.add5L(y,t,v,J[b],K[b]),E=V.add5H(w,g,e,S,G[b],H[b]),_=0|w,k=V.rotrSH(n,r,28)^V.rotrBH(n,r,34)^V.rotrBH(n,r,39),x=V.rotrSL(n,r,28)^V.rotrBL(n,r,34)^V.rotrBL(n,r,39),I=n&i^n&s^i&s,T=r&a^r&o^a&o;g=0|h,y=0|m,h=0|d,m=0|p,d=0|u,p=0|f,({h:u,l:f}=V.add(0|c,0|l,0|E,0|_)),c=0|s,l=0|o,s=0|i,o=0|a,i=0|n,a=0|r;const O=V.add3L(_,x,T);n=V.add3H(O,E,k,I),r=0|O}({h:n,l:r}=V.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:a}=V.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:s,l:o}=V.add(0|this.Ch,0|this.Cl,0|s,0|o)),({h:c,l:l}=V.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:f}=V.add(0|this.Eh,0|this.El,0|u,0|f)),({h:d,l:p}=V.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:h,l:m}=V.add(0|this.Gh,0|this.Gl,0|h,0|m)),({h:g,l:y}=V.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,r,i,a,s,o,c,l,u,f,d,p,h,m,g,y)}roundClean(){H.fill(0),K.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Z=P((()=>new Y));function Q(e,t,n,r){T(e);const i=function(e,t){if(void 0!==t&&"[object Object]"!==L.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:a,dkLen:s,asyncTick:o}=i;if(x(a),x(s),x(o),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=R(t),l=R(n),u=new Uint8Array(s),f=j.create(e,c),d=f._cloneInto().update(l);return{c:a,dkLen:s,asyncTick:o,DK:u,PRF:f,PRFSalt:d}}function X(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}const ee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),te=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ne=new Uint32Array(64);class re extends W{constructor(){super(64,32,8,!1),this.A=0|te[0],this.B=0|te[1],this.C=0|te[2],this.D=0|te[3],this.E=0|te[4],this.F=0|te[5],this.G=0|te[6],this.H=0|te[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:a,G:s,H:o}=this;return[e,t,n,r,i,a,s,o]}set(e,t,n,r,i,a,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(e,t){for(let f=0;f<16;f++,t+=4)ne[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=ne[f-15],t=ne[f-2],n=C(e,7)^C(e,18)^e>>>3,r=C(t,17)^C(t,19)^t>>>10;ne[f]=r+ne[f-7]+n+ne[f-16]|0}let{A:n,B:r,C:i,D:a,E:s,F:o,G:c,H:l}=this;for(let f=0;f<64;f++){const e=l+(C(s,6)^C(s,11)^C(s,25))+((u=s)&o^~u&c)+ee[f]+ne[f]|0,t=(C(n,2)^C(n,13)^C(n,22))+q(n,r,i)|0;l=c,c=o,o=s,s=a+e|0,a=i,i=r,r=n,n=e+t|0}var u;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,a,s,o,c,l)}roundClean(){ne.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ie=P((()=>new re));function ae(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function se(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function oe(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function ce(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(ae(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function le(e=""){if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function ue(e,t="="){if(ae(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function fe(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function de(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(ae(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let i=r;i<a.length;i++){const o=a[i],c=t*e+o;if(!Number.isSafeInteger(c)||t*e/t!==e||c-o!==t*e)throw new Error("convertRadix: carry overflow");e=c%n;const l=Math.floor(c/n);if(a[i]=l,!Number.isSafeInteger(l)||l*n+e!==c)throw new Error("convertRadix: carry overflow");s&&(l?s=!1:r=i)}if(i.push(e),s)break}for(let s=0;s<e.length-1&&0===e[s];s++)i.push(0);return i.reverse()}const pe=(e,t)=>t?pe(t,e%t):e,he=(e,t)=>e+(t-pe(e,t));function me(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(he(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${he(t,n)}`);let i=0,a=0;const s=2**n-1,o=[];for(const c of e){if(ae(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)o.push((i>>a-n&s)>>>0);i&=2**a-1}if(i=i<<n-a&s,!r&&a>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&o.push(i>>>0),o}function ge(e){return ae(e),{encode:t=>{if(!se(t))throw new Error("radix.encode input should be Uint8Array");return de(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(de(t,e,256))}}}function ye(e,t=!1){if(ae(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(he(8,e)>32||he(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!se(n))throw new Error("radix2.encode input should be Uint8Array");return me(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(me(n,e,8,t))}}}function be(e,t){if(ae(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!se(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!se(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),a=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return r}}}const Se={alphabet:ce,chain:oe,checksum:be,convertRadix:de,convertRadix2:me,radix:ge,radix2:ye,join:le,padding:ue},ve=oe(ye(4),ce("0123456789ABCDEF"),le("")),we=oe(ye(5),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ue(5),le("")),Ee=(ye(5),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),le(""),ye(5),ce("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ue(5),le(""),ye(5),ce("0123456789ABCDEFGHIJKLMNOPQRSTUV"),le(""),ye(5),ce("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),le(""),fe((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),oe(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ue(6),le(""))),_e=(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),le(""),oe(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ue(6),le(""))),ke=(ye(6),ce("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),le(""),e=>oe(ge(58),ce(e),le(""))),xe=ke("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ie=[0,2,3,5,6,7,9,10,11],Te={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=xe.encode(r).padStart(Ie[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Ie.indexOf(r.length),a=xe.decode(r);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};ce("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),le("");const Oe={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},Ae=(ye(4),ce("0123456789abcdef"),le(""),fe((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0]);function Ne(e){if("string"!==typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function Me(e){const t=Ne(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Ce(e){I(e,16,20,24,28,32)}function Re(e,t=128){if(x(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return function(e,t){Ce(e);const n=Le(t).encode(e);return n.join(Ae(t)?"\u3000":" ")}(D(t/8),e)}const Fe=e=>{const t=8-e.length/4;return new Uint8Array([ie(e)[0]>>t<<t])};function Le(e){if(!Array.isArray(e)||2048!==e.length||"string"!==typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!==typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),Se.chain(Se.checksum(1,Fe),Se.radix2(11,!0),Se.alphabet(e))}function Pe(e,t){try{!function(e,t){const{words:n}=Me(e),r=Le(t).decode(n);Ce(r)}(e,t)}catch(n){return!1}return!0}const De=e=>Ne(`mnemonic${e}`);function Ue(e,t=""){return function(e,t,n,r){const{c:i,dkLen:a,DK:s,PRF:o,PRFSalt:c}=Q(e,t,n,r);let l;const u=new Uint8Array(4),f=M(u),d=new Uint8Array(o.outputLen);for(let p=1,h=0;h<a;p++,h+=o.outputLen){const e=s.subarray(h,h+o.outputLen);f.setInt32(0,p,!1),(l=c._cloneInto(l)).update(u).digestInto(d),e.set(d.subarray(0,e.length));for(let t=1;t<i;t++){o._cloneInto(l).update(d).digestInto(d);for(let t=0;t<e.length;t++)e[t]^=d[t]}}return X(o,c,s,l,d)}(Z,Me(e).nfkd,De(t),{c:2048,dkLen:64})}const je="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var qe=n(499779),We=n(837875),Be=n(350025);const ze=()=>Re(je,128),$e=e=>{const t=e.trim();return Pe(t,je)?We.succeed(t):We.fail({_tag:"InvalidMnemonicError"})},Ve=e=>Ue(e);class Ge extends(qe.Tag("NanoIdGenerator")()){}const Je=(e,t)=>{const n=e("0123456789abcdef",16);return Be.succeed(Ge,Ge.of({nanoid:We.sync((()=>t())),nodeId:We.sync((()=>n())),rowId:We.sync((()=>t()))}))},He=r.String.pipe(r.pattern(/^[\w-]{16}$/),r.brand("NodeId")),Ke=(e,t)=>We.sync((()=>{let n=j(Z,"Symmetric key seed",e);for(let e=0;e<t.length;e++){const r=(new TextEncoder).encode(t[e]),i=new Uint8Array(r.byteLength+1);i[0]=0,i.set(r,1),n=j(Z,n.slice(0,32),i)}return n.slice(32,64)}));class Ye extends(qe.Tag("SecretBox")()){}Ye.Live=Be.succeed(Ye,Ye.of({seal:(e,t)=>We.sync((()=>{const n=D(24),r=k(e,n).seal(t);return(0,a.concatBytes)(n,r)})),open:(e,t)=>We.sync((()=>{const n=t.subarray(0,24),r=t.subarray(24);return k(e,n).open(r)}))}))},145916:(e,t,n)=>{n.r(t),n.d(t,{ensureTransferableError:()=>i,makeUnexpectedError:()=>r});const r=e=>({_tag:"UnexpectedError",error:e}),i=e=>e instanceof Error?{message:e.message,name:e.name,stack:e.stack}:e},184208:(e,t,n)=>{n.r(t),n.d(t,{murmurhash:()=>r});const r=(e,t=0)=>{let n,r,i,a;const s=3&e.length,o=e.length-s;n=t;const c=3432918353,l=461845907;for(a=0;a<o;)i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,++a,i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*l+(((i>>>16)*l&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,r=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(i=0,s){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i^=255&e.charCodeAt(a),i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*l+(((i>>>16)*l&65535)<<16)&4294967295,n^=i}return n^=e.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0}},912317:(e,t,n)=>{n.r(t),n.d(t,{Owner:()=>s,makeOwner:()=>o});var r=n(499779),i=n(837875),a=n(752066);const s=r.GenericTag("Owner"),o=e=>i.gen((function*(t){null==e&&(e=(0,a.createMnemonic)());const n=(0,a.mnemonicToSeed)(e),r=yield*i.map((0,a.slip21Derive)(n,["Evolu","Owner Id"]),(e=>{let t="";for(let n=0;n<21;n++)t+=c[63&e[n]];return t})),s=yield*(0,a.slip21Derive)(n,["Evolu","Encryption Key"]);return{mnemonic:e,id:r,encryptionKey:s}})),c="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"},524982:(e,t,n)=>{n.r(t),n.d(t,{EncryptedMessage:()=>P,MessageContent:()=>D,SyncRequest:()=>F,SyncResponse:()=>L});const r=Symbol.for("protobuf-ts/message-type");function i(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var a,s,o;function c(e){var t,n,r,a;return e.localName=null!==(t=e.localName)&&void 0!==t?t:i(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:i(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:o.NO,e.opt=null!==(a=e.opt)&&void 0!==a?a:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function l(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(a||(a={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(s||(s={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(o||(o={}));class u{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some((e=>!r.includes(e))))return!1;if(!n&&r.some((e=>!i.known.includes(e))))return!1;if(t<1)return!0;for(const a of i.oneofs){const r=e[a];if(!l(r))return!1;if(void 0===r.oneofKind)continue;const i=this.fields.find((e=>e.localName===r.oneofKind));if(!i)return!1;if(!this.field(r[r.oneofKind],i,n,t))return!1}for(const a of this.fields)if(void 0===a.oneof&&!this.field(e[a.localName],a,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,a.INT32,r):this.scalar(e,a.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),a.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let i=0;i<e.length&&i<r;i++)if(!t.isAssignable(e[i],r-1))return!1}else for(let i=0;i<e.length&&i<r;i++)if(!t.is(e[i],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case a.UINT64:case a.FIXED64:case a.INT64:case a.SFIXED64:case a.SINT64:switch(n){case s.BIGINT:return"bigint"==r;case s.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case a.BOOL:return"boolean"==r;case a.STRING:return"string"==r;case a.BYTES:return e instanceof Uint8Array;case a.DOUBLE:case a.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case a.INT32:case a.FIXED32:case a.SFIXED32:case a.SINT32:case a.UINT32:return this.scalars(r.slice(0,n).map((e=>parseInt(e))),t,n);case a.BOOL:return this.scalars(r.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(r,t,n,s.STRING)}}}function f(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),p=[];for(let U=0;U<d.length;U++)p[d[U].charCodeAt(0)]=U;p["-".charCodeAt(0)]=d.indexOf("+"),p["_".charCodeAt(0)]=d.indexOf("/");var h=n(207194),m=n(489011);function g(e,t){switch(t){case s.BIGINT:return e.toBigInt();case s.NUMBER:return e.toNumber();default:return e.toString()}}class y{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=f(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[o,c]of Object.entries(e)){const e=this.fMap[o];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${o}`);continue}const l=e.localName;let u;if(e.oneof){if(null===c&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),u=t[e.oneof]={oneofKind:l}}else u=t;if("map"==e.kind){if(null===c)continue;this.assert(null!==(i=c)&&"object"==typeof i&&!Array.isArray(i),e.name,c);const t=u[l];for(const[r,i]of Object.entries(c)){let o;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":o=e.V.T().internalJsonRead(i,n);break;case"enum":if(o=this.enum(e.V.T(),i,e.name,n.ignoreUnknownFields),!1===o)continue;break;case"scalar":o=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==o,e.name+" map value",i);let c=r;e.K==a.BOOL&&(c="true"==c||"false"!=c&&c),c=this.scalar(c,e.K,s.STRING,e.name).toString(),t[c]=o}}else if(e.repeat){if(null===c)continue;this.assert(Array.isArray(c),e.name,c);const t=u[l];for(const r of c){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":if(i=this.enum(e.T(),r,e.name,n.ignoreUnknownFields),!1===i)continue;break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,c),t.push(i)}}else switch(e.kind){case"message":if(null===c&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}u[l]=e.T().internalJsonRead(c,n,u[l]);break;case"enum":let t=this.enum(e.T(),c,e.name,n.ignoreUnknownFields);if(!1===t)continue;u[l]=t;break;case"scalar":u[l]=this.scalar(c,e.T,e.L,e.name)}}var i}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&(0,m.assert)(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return(0,m.assert)(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let i=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(i=t.substring(e[2].length));let a=e[1][i];return("undefined"!==typeof a||!r)&&((0,m.assert)("number"==typeof a,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),a)}(0,m.assert)(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case a.DOUBLE:case a.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==a.FLOAT&&(0,m.assertFloat32)(r),r;case a.INT32:case a.FIXED32:case a.SFIXED32:case a.SINT32:case a.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":s=Number(e)),void 0===s)break;return t==a.UINT32?(0,m.assertUInt32)(s):(0,m.assertInt32)(s),s;case a.INT64:case a.SFIXED64:case a.SINT64:if(null===e)return g(h.PbLong.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return g(h.PbLong.from(e),n);case a.FIXED64:case a.UINT64:if(null===e)return g(h.PbULong.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return g(h.PbULong.from(e),n);case a.BOOL:if(null===e)return!1;if("boolean"!==typeof e)break;return e;case a.STRING:if(null===e)return"";if("string"!==typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case a.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!==typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,a=0,s=0;for(let o=0;o<e.length;o++){if(n=p[e.charCodeAt(o)],void 0===n)switch(e[o]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:s=n,a=1;break;case 1:r[i++]=s<<2|(48&n)>>4,s=n,a=2;break;case 2:r[i++]=(15&s)<<4|(60&n)>>2,s=n,a=3;break;case 3:r[i++]=(3&s)<<6|n,a=0}}if(1==a)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(s){i=s.message}this.assert(!1,r+(i?" - "+i:""),e)}}class b{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},r=e;for(const i of this.fields){if(!i.oneof){let e=this.field(i,r[i.localName],t);void 0!==e&&(n[t.useProtoFieldName?i.name:i.jsonName]=e);continue}const e=r[i.oneof];if(e.oneofKind!==i.localName)continue;const a="scalar"==i.kind||"enum"==i.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let s=this.field(i,e[i.localName],a);(0,m.assert)(void 0!==s),n[t.useProtoFieldName?i.name:i.jsonName]=s}return n}field(e,t,n){let r;if("map"==e.kind){(0,m.assert)("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,s]of Object.entries(t)){const t=this.scalar(e.V.T,s,e.name,!1,!0);(0,m.assert)(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[s,o]of Object.entries(t)){const t=this.message(r,o,e.name,n);(0,m.assert)(void 0!==t),i[s.toString()]=t}break;case"enum":const a=e.V.T();for(const[s,o]of Object.entries(t)){(0,m.assert)(void 0===o||"number"==typeof o);const t=this.enum(a,o,e.name,!1,!0,n.enumAsInteger);(0,m.assert)(void 0!==t),i[s.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){(0,m.assert)(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);(0,m.assert)(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let s=0;s<t.length;s++){(0,m.assert)(void 0===t[s]||"number"==typeof t[s]);const a=this.enum(r,t[s],e.name,e.opt,!0,n.enumAsInteger);(0,m.assert)(void 0!==a),i.push(a)}break;case"message":const a=e.T();for(let s=0;s<t.length;s++){const r=this.message(a,t[s],e.name,n);(0,m.assert)(void 0!==r),i.push(r)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,a){if("google.protobuf.NullValue"==e[0])return i||r?null:void 0;if(void 0!==t){if(0!==t||i||r)return(0,m.assert)("number"==typeof t),(0,m.assert)(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else(0,m.assert)(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void(0,m.assert)(r);const s=i||r;switch(e){case a.INT32:case a.SFIXED32:case a.SINT32:return 0===t?s?0:void 0:((0,m.assertInt32)(t),t);case a.FIXED32:case a.UINT32:return 0===t?s?0:void 0:((0,m.assertUInt32)(t),t);case a.FLOAT:(0,m.assertFloat32)(t);case a.DOUBLE:return 0===t?s?0:void 0:((0,m.assert)("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case a.STRING:return""===t?s?"":void 0:((0,m.assert)("string"==typeof t),t);case a.BOOL:return!1===t?!s&&void 0:((0,m.assert)("boolean"==typeof t),t);case a.UINT64:case a.FIXED64:(0,m.assert)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=h.PbULong.from(t);if(e.isZero()&&!s)return;return e.toString();case a.INT64:case a.SFIXED64:case a.SINT64:(0,m.assert)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=h.PbLong.from(t);if(n.isZero()&&!s)return;return n.toString();case a.BYTES:return(0,m.assert)(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let a=0;a<e.length;a++)switch(t=e[a],r){case 0:n+=d[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=d[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=d[i|t>>6],n+=d[63&t],r=0}return r&&(n+=d[i],n+="=",1==r&&(n+="=")),n}(t):s?"":void 0}}}var S=n(438645);function v(e,t=s.STRING){switch(e){case a.BOOL:return!1;case a.UINT64:case a.FIXED64:return g(h.PbULong.ZERO,t);case a.INT64:case a.SFIXED64:case a.SINT64:return g(h.PbLong.ZERO,t);case a.DOUBLE:case a.FLOAT:return 0;case a.BYTES:return new Uint8Array(0);case a.STRING:return"";default:return 0}}class w{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),s=this.fieldNoToField.get(r);if(!s){let a=n.readUnknownField;if("throw"==a)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let s=e.skip(i);!1!==a&&(!0===a?S.UnknownFieldHandler.onRead:a)(this.info.typeName,t,r,i,s);continue}let o=t,c=s.repeat,l=s.localName;switch(s.oneof&&(o=o[s.oneof],o.oneofKind!==l&&(o=t[s.oneof]={oneofKind:l})),s.kind){case"scalar":case"enum":let t="enum"==s.kind?a.INT32:s.T,r="scalar"==s.kind?s.L:void 0;if(c){let n=o[l];if(i==S.WireType.LengthDelimited&&t!=a.STRING&&t!=a.BYTES){let i=e.uint32()+e.pos;for(;e.pos<i;)n.push(this.scalar(e,t,r))}else n.push(this.scalar(e,t,r))}else o[l]=this.scalar(e,t,r);break;case"message":if(c){let t=o[l],r=s.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else o[l]=s.T().internalBinaryRead(e,e.uint32(),n,o[l]);break;case"map":let[u,f]=this.mapEntry(s,e,n);o[l][u]=f}}}mapEntry(e,t,n){let r,i,o=t.uint32(),c=t.pos+o;for(;t.pos<c;){let[o,c]=t.tag();switch(o){case 1:r=e.K==a.BOOL?t.bool().toString():this.scalar(t,e.K,s.STRING);break;case 2:switch(e.V.kind){case"scalar":i=this.scalar(t,e.V.T,e.V.L);break;case"enum":i=t.int32();break;case"message":i=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${o} (wire type ${c}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=v(e.K);r=e.K==a.BOOL?t.toString():t}if(void 0===i)switch(e.V.kind){case"scalar":i=v(e.V.T,e.V.L);break;case"enum":i=0;break;case"message":i=e.V.T().create()}return[r,i]}scalar(e,t,n){switch(t){case a.INT32:return e.int32();case a.STRING:return e.string();case a.BOOL:return e.bool();case a.DOUBLE:return e.double();case a.FLOAT:return e.float();case a.INT64:return g(e.int64(),n);case a.UINT64:return g(e.uint64(),n);case a.FIXED64:return g(e.fixed64(),n);case a.FIXED32:return e.fixed32();case a.BYTES:return e.bytes();case a.UINT32:return e.uint32();case a.SFIXED32:return e.sfixed32();case a.SFIXED64:return g(e.sfixed64(),n);case a.SINT32:return e.sint32();case a.SINT64:return g(e.sint64(),n)}}}class E{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const i of this.fields){let r,s,c=i.repeat,l=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==l)continue;r=t[l],s=!0}else r=e[l],s=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?a.INT32:i.T;if(c)if((0,m.assert)(Array.isArray(r)),c==o.PACKED)this.packed(t,e,i.no,r);else for(const n of r)this.scalar(t,e,i.no,n,!0);else void 0===r?(0,m.assert)(i.opt):this.scalar(t,e,i.no,r,s||i.opt);break;case"message":if(c){(0,m.assert)(Array.isArray(r));for(const e of r)this.message(t,n,i.T(),i.no,e)}else this.message(t,n,i.T(),i.no,r);break;case"map":(0,m.assert)("object"==typeof r&&null!==r);for(const[a,s]of Object.entries(r))this.mapEntry(t,n,i,a,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?S.UnknownFieldHandler.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,S.WireType.LengthDelimited),e.fork();let s=r;switch(n.K){case a.INT32:case a.FIXED32:case a.UINT32:case a.SFIXED32:case a.SINT32:s=Number.parseInt(r);break;case a.BOOL:(0,m.assert)("true"==r||"false"==r),s="true"==r}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,a.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,S.WireType.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[a,s,o]=this.scalarInfo(t,r);o&&!i||(e.tag(n,a),e[s](r))}packed(e,t,n,r){if(!r.length)return;(0,m.assert)(t!==a.BYTES&&t!==a.STRING),e.tag(n,S.WireType.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let a=0;a<r.length;a++)e[i](r[a]);e.join()}scalarInfo(e,t){let n,r=S.WireType.Varint,i=void 0===t,s=0===t;switch(e){case a.INT32:n="int32";break;case a.STRING:s=i||!t.length,r=S.WireType.LengthDelimited,n="string";break;case a.BOOL:s=!1===t,n="bool";break;case a.UINT32:n="uint32";break;case a.DOUBLE:r=S.WireType.Bit64,n="double";break;case a.FLOAT:r=S.WireType.Bit32,n="float";break;case a.INT64:s=i||h.PbLong.from(t).isZero(),n="int64";break;case a.UINT64:s=i||h.PbULong.from(t).isZero(),n="uint64";break;case a.FIXED64:s=i||h.PbULong.from(t).isZero(),r=S.WireType.Bit64,n="fixed64";break;case a.BYTES:s=i||!t.byteLength,r=S.WireType.LengthDelimited,n="bytes";break;case a.FIXED32:r=S.WireType.Bit32,n="fixed32";break;case a.SFIXED32:r=S.WireType.Bit32,n="sfixed32";break;case a.SFIXED64:s=i||h.PbLong.from(t).isZero(),r=S.WireType.Bit64,n="sfixed64";break;case a.SINT32:n="sint32";break;case a.SINT64:s=i||h.PbLong.from(t).isZero(),n="sint64"}return[r,n,i||s]}}function _(e,t,n){let r,i,a=n;for(let s of e.fields){let e=s.localName;if(s.oneof){const n=a[s.oneof];if(void 0==(null===n||void 0===n?void 0:n.oneofKind))continue;if(r=n[e],i=t[s.oneof],i.oneofKind=n.oneofKind,void 0==r){delete i[e];continue}}else if(r=a[e],i=t,void 0==r)continue;switch(s.repeat&&(i[e].length=r.length),s.kind){case"scalar":case"enum":if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=r[n];else i[e]=r;break;case"message":let t=s.T();if(s.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=s.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}const k={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},x={ignoreUnknownFields:!1};const I=Object.values;function T(e,t,n){if(t===n)return!0;if(e!==a.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!=i[a])return!1;return!0}function O(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!T(e,t[r],n[r]))return!1;return!0}function A(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}var N=n(697554),M=n(729618);const C=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class R{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(c),this.options=null!==n&&void 0!==n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},C),{[r]:{value:this}})),this.refTypeCheck=new u(this),this.refJsonReader=new y(this),this.refJsonWriter=new b(this),this.refBinReader=new w(this),this.refBinWriter=new E(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},r,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=v(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&_(this,t,e),t}clone(e){let t=this.create();return _(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],s=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?a.INT32:r.T;if(!(r.repeat?O(e,i,s):T(e,i,s)))return!1;break;case"map":if(!("message"==r.V.kind?A(r.V.T(),I(i),I(s)):O("enum"==r.V.kind?a.INT32:r.V.T,I(i),I(s))))return!1;break;case"message":let t=r.T();if(!(r.repeat?A(t,i,s):t.equals(i,s)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){_(this,e,t)}fromBinary(e,t){let n=(0,M.binaryReadOptions)(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},x),e):x}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},k),e):k}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=(0,N.binaryWriteOptions)(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${f(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}const F=new class extends R{constructor(){super("SyncRequest",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>P},{no:2,name:"userId",kind:"scalar",T:9},{no:3,name:"nodeId",kind:"scalar",T:9},{no:4,name:"merkleTree",kind:"scalar",T:9}])}};const L=new class extends R{constructor(){super("SyncResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>P},{no:2,name:"merkleTree",kind:"scalar",T:9}])}};const P=new class extends R{constructor(){super("EncryptedMessage",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:12}])}};const D=new class extends R{constructor(){super("MessageContent",[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"row",kind:"scalar",T:9},{no:3,name:"column",kind:"scalar",T:9},{no:4,name:"stringValue",kind:"scalar",oneof:"value",T:9},{no:5,name:"numberValue",kind:"scalar",oneof:"value",T:9},{no:6,name:"bytesValue",kind:"scalar",oneof:"value",T:12},{no:7,name:"jsonValue",kind:"scalar",oneof:"value",T:9}])}}},477966:(e,t,n)=>{n.r(t),n.d(t,{Sync:()=>Vi,SyncFactory:()=>Ji,createSync:()=>Hi,initialSyncState:()=>Gi});var r=n(499779),i=n(837875),a=n(938507),s=n(154258),o=n(58536),c=n(504491),l=n(973043),u=n(597081),f=n(365519),d=n(808816),p=n(84221);u.FiberRefTypeId,f.fiberRefMake,f.fiberRefMakeWith,f.fiberRefMakeContext,f.fiberRefMakeRuntimeFlags;const h=u.fiberRefUnsafeMake,m=(u.fiberRefUnsafeMakeHashSet,u.fiberRefUnsafeMakeContext,f.fiberRefUnsafeMakeSupervisor,u.fiberRefUnsafeMakePatch,u.fiberRefGet,u.fiberRefGetAndSet,u.fiberRefGetAndUpdate,u.fiberRefGetAndUpdateSome,u.fiberRefGetWith,u.fiberRefSet,u.fiberRefDelete,u.fiberRefReset,u.fiberRefModify,u.fiberRefModifySome,u.fiberRefUpdate,u.fiberRefUpdateSome,u.fiberRefUpdateAndGet,u.fiberRefUpdateSomeAndGet,u.currentConcurrency,u.currentRequestBatching,d.currentCache,d.currentCacheEnabled,u.currentContext),g=(u.currentSchedulingPriority,u.currentMaxOpsBeforeYield,u.currentUnhandledErrorLogLevel,u.currentLogAnnotations,f.currentLoggers,u.currentLogLevel,f.currentMinimumLogLevel,u.currentLogSpan,f.currentRuntimeFlags,p.currentScheduler,f.currentSupervisor,u.currentMetricLabels,u.currentTracerEnabled);u.currentTracerTimingEnabled,u.currentTracerSpanAnnotations,u.currentTracerSpanLinks,u.currentInterruptedCause;var y=n(744628),b=n(125105),S=n(939739),v=n(766922),w=n(263247);const E=Symbol.for("@effect/platform/Headers"),_=e=>b.hasProperty(e,E),k=Object.assign(Object.create(null),{[E]:E}),x=e=>Object.assign(Object.create(k),e),I=l.declare(_,{identifier:"Headers",equivalence:()=>S.getEquivalence(w.Equivalence)}),T=(l.String,l.String,l.String,s.identity,Object.create(k)),O=e=>{if(void 0===e)return T;if(Symbol.iterator in e){const t=Object.create(k);for(const[n,r]of e)t[n.toLowerCase()]=r;return t}const t=Object.create(k);for(const[n,r]of Object.entries(e))Array.isArray(r)?t[n.toLowerCase()]=r.join(", "):void 0!==r&&(t[n.toLowerCase()]=r);return t},A=(0,s.dual)(3,((e,t,n)=>{const r=x(e);return r[t.toLowerCase()]=n,r})),N=(0,s.dual)(2,((e,t)=>x({...e,...O(t)}))),M=(0,s.dual)(2,((e,t)=>{const n=x(e);return delete n[t.toLowerCase()],n})),C=(0,s.dual)(2,((e,t)=>{const n={...e},r=t=>{if("string"===typeof t){const r=t.toLowerCase();r in e&&(n[r]=v.make(e[r]))}else for(const r in e)t.test(r)&&(n[r]=v.make(e[r]))};if(Array.isArray(t))for(let i=0;i<t.length;i++)r(t[i]);else r(t);return n})),R=(0,y.globalValue)("@effect/platform/Headers/currentRedactedNames",(()=>h(["authorization","cookie","set-cookie","x-api-key"])));var F=n(342072),L=n(411123);const P=e=>{const t=Symbol.iterator in e?F.fromIterable(e):Object.entries(e),n=[];for(const[r,i]of t)if(Array.isArray(i))for(let e=0;e<i.length;e++)void 0!==i[e]&&n.push([r,String(i[e])]);else void 0!==i&&n.push([r,String(i)]);return n},D=[],U=(0,s.dual)(2,((e,t)=>{const n=P(t),r=n.map((([e])=>e));return F.appendAll(F.filter(e,(([e])=>r.includes(e))),n)})),j=()=>{if("location"in globalThis&&void 0!==globalThis.location&&void 0!==globalThis.location.origin&&void 0!==globalThis.location.pathname)return location.origin+location.pathname};var q=n(338358),W=n(114471),B=n(889133),z=n(38429),$=n(676966),V=n(709322),G=n(350043),J=n(847857);const H=Symbol.for("effect/QueueEnqueue"),K=Symbol.for("effect/QueueDequeue"),Y=Symbol.for("effect/QueueStrategy"),Z=Symbol.for("effect/BackingQueue"),Q={_A:e=>e},X={_A:e=>e},ee={_In:e=>e},te={_Out:e=>e};class ne{queue;takers;shutdownHook;shutdownFlag;strategy;[H]=ee;[K]=te;constructor(e,t,n,r,i){this.queue=e,this.takers=t,this.shutdownHook=n,this.shutdownFlag=r,this.strategy=i}pipe(){return(0,V.pipeArguments)(this,arguments)}capacity(){return this.queue.capacity()}get size(){return u.suspend((()=>u.catchAll(this.unsafeSize(),(()=>u.interrupt))))}unsafeSize(){return J.get(this.shutdownFlag)?c.none():c.some(this.queue.length()-G.length(this.takers)+this.strategy.surplusSize())}get isEmpty(){return u.map(this.size,(e=>e<=0))}get isFull(){return u.map(this.size,(e=>e>=this.capacity()))}get shutdown(){return u.uninterruptible(u.withFiberRuntime((e=>((0,s.pipe)(this.shutdownFlag,J.set(!0)),(0,s.pipe)(f.forEachConcurrentDiscard(ge(this.takers),(t=>u.deferredInterruptWith(t,e.id())),!1,!1),u.zipRight(this.strategy.shutdown),u.whenEffect(u.deferredSucceed(this.shutdownHook,void 0)),u.asVoid)))))}get isShutdown(){return u.sync((()=>J.get(this.shutdownFlag)))}get awaitShutdown(){return u.deferredAwait(this.shutdownHook)}isActive(){return!J.get(this.shutdownFlag)}unsafeOffer(e){if(J.get(this.shutdownFlag))return!1;let t;if(0===this.queue.length()){const n=(0,s.pipe)(this.takers,G.poll(G.EmptyMutableQueue));n!==G.EmptyMutableQueue?(he(n,e),t=!0):t=!1}else t=!1;if(t)return!0;const n=this.queue.offer(e);return Se(this.strategy,this.queue,this.takers),n}offer(e){return u.suspend((()=>{if(J.get(this.shutdownFlag))return u.interrupt;let t;if(0===this.queue.length()){const n=(0,s.pipe)(this.takers,G.poll(G.EmptyMutableQueue));n!==G.EmptyMutableQueue?(he(n,e),t=!0):t=!1}else t=!1;if(t)return u.succeed(!0);const n=this.queue.offer(e);return Se(this.strategy,this.queue,this.takers),n?u.succeed(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)}))}offerAll(e){return u.suspend((()=>{if(J.get(this.shutdownFlag))return u.interrupt;const t=F.fromIterable(e),n=0===this.queue.length()?F.fromIterable(ye(this.takers,t.length)):F.empty,[r,i]=(0,s.pipe)(t,F.splitAt(n.length));for(let e=0;e<n.length;e++){const t=n[e],i=r[e];he(t,i)}if(0===i.length)return u.succeed(!0);const a=this.queue.offerAll(i);return Se(this.strategy,this.queue,this.takers),B.isEmpty(a)?u.succeed(!0):this.strategy.handleSurplus(a,this.queue,this.takers,this.shutdownFlag)}))}get take(){return u.withFiberRuntime((e=>{if(J.get(this.shutdownFlag))return u.interrupt;const t=this.queue.poll(G.EmptyMutableQueue);if(t!==G.EmptyMutableQueue)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),u.succeed(t);{const t=u.deferredUnsafeMake(e.id());return(0,s.pipe)(u.suspend((()=>((0,s.pipe)(this.takers,G.offer(t)),Se(this.strategy,this.queue,this.takers),J.get(this.shutdownFlag)?u.interrupt:u.deferredAwait(t)))),u.onInterrupt((()=>u.sync((()=>be(this.takers,t))))))}}))}get takeAll(){return u.suspend((()=>J.get(this.shutdownFlag)?u.interrupt:u.sync((()=>{const e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),B.fromIterable(e)}))))}takeUpTo(e){return u.suspend((()=>J.get(this.shutdownFlag)?u.interrupt:u.sync((()=>{const t=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),B.fromIterable(t)}))))}takeBetween(e,t){return u.suspend((()=>re(this,e,t,B.empty())))}}const re=(e,t,n,r)=>n<t?u.succeed(r):(0,s.pipe)(le(e,n),u.flatMap((i=>{const a=t-i.length;return 1===a?(0,s.pipe)(ce(e),u.map((e=>(0,s.pipe)(r,B.appendAll(i),B.append(e))))):a>1?(0,s.pipe)(ce(e),u.flatMap((t=>re(e,a-1,n-i.length-1,(0,s.pipe)(r,B.appendAll(i),B.append(t)))))):u.succeed((0,s.pipe)(r,B.appendAll(i)))}))),ie=(e,t)=>(0,s.pipe)(u.deferredMake(),u.map((n=>((e,t,n,r,i)=>new ne(e,t,n,r,i))(e,G.unbounded(),n,J.make(!1),t))));class ae{mutable;[Z]=X;constructor(e){this.mutable=e}poll(e){return G.poll(this.mutable,e)}pollUpTo(e){return G.pollUpTo(this.mutable,e)}offerAll(e){return G.offerAll(this.mutable,e)}offer(e){return G.offer(this.mutable,e)}capacity(){return G.capacity(this.mutable)}length(){return G.length(this.mutable)}}const se=e=>new ae(e),oe=(0,s.dual)(2,((e,t)=>e.offer(t))),ce=e=>e.take,le=(0,s.dual)(2,((e,t)=>e.takeUpTo(t))),ue=()=>new de,fe=()=>new pe;class de{[Y]=Q;putters=G.unbounded();surplusSize(){return G.length(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!G.isEmpty(this.putters)&&!G.isEmpty(e);){const t=G.poll(e,void 0),n=G.poll(this.putters,void 0);n[2]&&he(n[1],!0),he(t,n[0])}}get shutdown(){return(0,s.pipe)(u.fiberId,u.flatMap((e=>(0,s.pipe)(u.sync((()=>ge(this.putters))),u.flatMap((t=>f.forEachConcurrentDiscard(t,(([t,n,r])=>r?(0,s.pipe)(u.deferredInterruptWith(n,e),u.asVoid):u.void),!1,!1)))))))}handleSurplus(e,t,n,r){return u.withFiberRuntime((i=>{const a=u.deferredUnsafeMake(i.id());return(0,s.pipe)(u.suspend((()=>(this.unsafeOffer(e,a),this.unsafeOnQueueEmptySpace(t,n),Se(this,t,n),J.get(r)?u.interrupt:u.deferredAwait(a)))),u.onInterrupt((()=>u.sync((()=>this.unsafeRemove(a))))))}))}unsafeOnQueueEmptySpace(e,t){let n=!0;for(;n&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){const r=(0,s.pipe)(this.putters,G.poll(G.EmptyMutableQueue));if(r===G.EmptyMutableQueue)n=!1;else{const n=e.offer(r[0]);n&&r[2]?he(r[1],!0):n||me(this.putters,(0,s.pipe)(ge(this.putters),B.prepend(r))),Se(this,e,t)}}}unsafeOffer(e,t){const n=F.fromIterable(e);for(let r=0;r<n.length;r++){const e=n[r];r===n.length-1?(0,s.pipe)(this.putters,G.offer([e,t,!0])):(0,s.pipe)(this.putters,G.offer([e,t,!1]))}}unsafeRemove(e){me(this.putters,(0,s.pipe)(ge(this.putters),B.filter((([,t])=>t!==e))))}}class pe{[Y]=Q;surplusSize(){return 0}get shutdown(){return u.void}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,n,r){return u.succeed(!1)}unsafeOnQueueEmptySpace(e,t){}}const he=(e,t)=>u.deferredUnsafeDone(e,u.succeed(t)),me=(e,t)=>(0,s.pipe)(e,G.offerAll(t)),ge=e=>(0,s.pipe)(e,G.pollUpTo(Number.POSITIVE_INFINITY)),ye=(e,t)=>(0,s.pipe)(e,G.pollUpTo(t)),be=(e,t)=>{me(e,(0,s.pipe)(ge(e),B.filter((e=>t!==e))))},Se=(e,t,n)=>{let r=!0;for(;r&&0!==t.length();){const i=(0,s.pipe)(n,G.poll(G.EmptyMutableQueue));if(i!==G.EmptyMutableQueue){const a=t.poll(G.EmptyMutableQueue);a!==G.EmptyMutableQueue?(he(i,a),e.unsafeOnQueueEmptySpace(t,n)):me(n,(0,s.pipe)(ge(n),B.prepend(i))),r=!0}else r=!1}r&&0===t.length()&&!G.isEmpty(n)&&e.onCompleteTakersWithEmptyQueue(n)},ve=e=>(0,s.pipe)(u.sync((()=>G.bounded(e))),u.flatMap((e=>ie(se(e),ue())))),we=()=>(0,s.pipe)(u.sync((()=>G.unbounded())),u.flatMap((e=>ie(se(e),fe())))),Ee=e=>e.size,_e=e=>e.shutdown,ke=oe,xe=ce;var Ie=n(581757),Te=(n(382300),n(911122));n(350025),n(962047),n(49859);var Oe=n(823864);n(83859);const Ae="Continue",Ne="Close",Me="Yield",Ce=Symbol.for("effect/ChannelChildExecutorDecision"),Re={[Ce]:Ce},Fe=e=>{const t=Object.create(Re);return t._tag=Ae,t},Le="ContinuationK",Pe=Symbol.for("effect/ChannelContinuation"),De={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};class Ue{onSuccess;onHalt;_tag=Le;[Pe]=De;constructor(e,t){this.onSuccess=e,this.onHalt=t}onExit(e){return $.isFailure(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class je{finalizer;_tag="ContinuationFinalizer";[Pe]=De;constructor(e){this.finalizer=e}}const qe="PullAfterNext",We="PullAfterAllEnqueued",Be=Symbol.for("effect/ChannelUpstreamPullStrategy"),ze={[Be]:{_A:e=>e}},$e=e=>{const t=Object.create(ze);return t._tag=qe,t.emitSeparator=e,t},Ve="BracketOut",Ge="Bridge",Je="ConcatAll",He="Emit",Ke="Ensuring",Ye="Fail",Ze="Fold",Qe="FromEffect",Xe="PipeTo",et="Provide",tt="Read",nt="Succeed",rt="SucceedNow",it="Suspend",at=Symbol.for("effect/Channel"),st={[at]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},pipe(){return(0,V.pipeArguments)(this,arguments)}},ot=e=>(0,b.hasProperty)(e,at)||i.isEffect(e),ct=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ve,n.acquire=()=>e,n.finalizer=t,n})),lt=(e,t,n)=>{const r=Object.create(st);return r._tag=Je,r.combineInners=t,r.combineAll=n,r.onPull=()=>$e(c.none()),r.onEmit=()=>Fe,r.value=()=>e,r.k=s.identity,r},ut=(0,s.dual)(4,((e,t,n,r)=>{const i=Object.create(st);return i._tag=Je,i.combineInners=n,i.combineAll=r,i.onPull=()=>$e(c.none()),i.onEmit=()=>Fe,i.value=()=>e,i.k=t,i})),ft=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ge,n.input=t,n.channel=e,n})),dt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ke,n.channel=e,n.finalizer=t,n})),pt=e=>ht(W.fail(e)),ht=e=>mt((()=>e)),mt=e=>{const t=Object.create(st);return t._tag=Ye,t.error=e,t},gt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Ze,n.channel=e,n.k=new Ue(t,ht),n})),yt=e=>{const t=Object.create(st);return t._tag=Qe,t.effect=()=>e,t},bt=(0,s.dual)(2,((e,t)=>{const n=Object.create(st);return n._tag=Xe,n.left=()=>e,n.right=()=>t,n})),St=e=>vt({onInput:e.onInput,onFailure:t=>L.match(W.failureOrCause(t),{onLeft:e.onFailure,onRight:ht}),onDone:e.onDone}),vt=e=>{const t=Object.create(st);return t._tag=tt,t.more=e.onInput,t.done=new Ue(e.onDone,e.onFailure),t},wt=e=>kt((()=>e)),Et=e=>{const t=Object.create(st);return t._tag=rt,t.terminal=e,t},_t=e=>{const t=Object.create(st);return t._tag=it,t.channel=e,t},kt=e=>{const t=Object.create(st);return t._tag=nt,t.evaluate=e,t},xt=Et(void 0),It=e=>{const t=Object.create(st);return t._tag=He,t.out=e,t},Tt="Done",Ot="Emit",At="FromEffect",Nt="Read",Mt=Symbol.for("effect/ChannelState"),Ct={[Mt]:{_E:e=>e,_R:e=>e}},Rt=()=>{const e=Object.create(Ct);return e._tag=Tt,e},Ft=()=>{const e=Object.create(Ct);return e._tag=Ot,e},Lt=e=>{const t=Object.create(Ct);return t._tag=At,t.effect=e,t},Pt=(e,t,n,r)=>{const i=Object.create(Ct);return i._tag=Nt,i.upstream=e,i.onEffect=t,i.onEmit=n,i.onDone=r,i},Dt=e=>e._tag===At,Ut=e=>Dt(e)?i.ignore(e.effect):void 0,jt="PullFromChild",qt="PullFromUpstream",Wt="DrainChildExecutors",Bt="Emit";class zt{childExecutor;parentSubexecutor;onEmit;_tag=jt;constructor(e,t,n){this.childExecutor=e,this.parentSubexecutor=t,this.onEmit=n}close(e){const t=this.childExecutor.close(e),n=this.parentSubexecutor.close(e);return void 0!==t&&void 0!==n?i.zipWith(i.exit(t),i.exit(n),((e,t)=>(0,s.pipe)(e,$.zipRight(t)))):void 0!==t?t:void 0!==n?n:void 0}enqueuePullFromChild(e){return this}}class $t{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=qt;constructor(e,t,n,r,i,a,s,o){this.upstreamExecutor=e,this.createChild=t,this.lastDone=n,this.activeChildExecutors=r,this.combineChildResults=i,this.combineWithChildResult=a,this.onPull=s,this.onEmit=o}close(e){const t=this.upstreamExecutor.close(e),n=[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>$.zipRight(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0);return n}enqueuePullFromChild(e){return new $t(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class Vt{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=Wt;constructor(e,t,n,r,i,a,s){this.upstreamExecutor=e,this.lastDone=t,this.activeChildExecutors=n,this.upstreamDone=r,this.combineChildResults=i,this.combineWithChildResult=a,this.onPull=s}close(e){const t=this.upstreamExecutor.close(e),n=[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>$.zipRight(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0);return n}enqueuePullFromChild(e){return new Vt(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class Gt{value;next;_tag=Bt;constructor(e,t){this.value=e,this.next=t}close(e){const t=this.next.close(e);return t}enqueuePullFromChild(e){return this}}const Jt="Pulled",Ht="NoUpstream",Kt=Symbol.for("effect/ChannelUpstreamPullRequest"),Yt={[Kt]:{_A:e=>e}},Zt=e=>{const t=Object.create(Yt);return t._tag=Jt,t.value=e,t};class Qt{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,t,n){this._currentChannel=e,this._executeCloseLastSubstream=n,this._providedEnv=t}run(){let e;for(;void 0===e;)if(void 0!==this._cancelled)e=this.processCancellation();else if(void 0!==this._activeSubexecutor)e=this.runSubexecutor();else try{if(void 0===this._currentChannel)e=Rt();else if(i.isEffect(this._currentChannel))this._currentChannel=yt(this._currentChannel);else switch(this._currentChannel._tag){case Ve:e=this.runBracketOut(this._currentChannel);break;case Ge:{const t=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,void 0!==this._input){const n=this._input;this._input=void 0;const r=()=>i.flatMap(t.awaitRead(),(()=>i.suspend((()=>{const e=n.run();switch(e._tag){case Tt:return $.match(n.getDone(),{onFailure:e=>t.error(e),onSuccess:e=>t.done(e)});case Ot:return i.flatMap(t.emit(n.getEmit()),(()=>r()));case At:return i.matchCauseEffect(e.effect,{onFailure:e=>t.error(e),onSuccess:()=>r()});case Nt:return tn(e,(()=>r()),(e=>t.error(e)))}}))));e=Lt(i.flatMap(i.forkDaemon(r()),(e=>i.sync((()=>this.addFinalizer((t=>i.flatMap(Te.interrupt(e),(()=>i.suspend((()=>{const e=this.restorePipe(t,n);return void 0!==e?e:i.void})))))))))))}break}case Je:{const e=new Qt(this._currentChannel.value(),this._providedEnv,(e=>i.sync((()=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;this._closeLastSubstream=(0,s.pipe)(t,i.zipRight(e))}))));e._input=this._input;const t=this._currentChannel;this._activeSubexecutor=new $t(e,(e=>t.k(e)),void 0,[],((e,n)=>t.combineInners(e,n)),((e,n)=>t.combineAll(e,n)),(e=>t.onPull(e)),(e=>t.onEmit(e))),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case He:this._emitted=this._currentChannel.out,this._currentChannel=void 0!==this._activeSubexecutor?void 0:xt,e=Ft();break;case Ke:this.runEnsuring(this._currentChannel);break;case Ye:e=this.doneHalt(this._currentChannel.error());break;case Ze:this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break;case Qe:{const t=void 0===this._providedEnv?this._currentChannel.effect():(0,s.pipe)(this._currentChannel.effect(),i.provide(this._providedEnv));e=Lt(i.matchCauseEffect(t,{onFailure:e=>{const t=this.doneHalt(e);return void 0!==t&&Dt(t)?t.effect:i.void},onSuccess:e=>{const t=this.doneSucceed(e);return void 0!==t&&Dt(t)?t.effect:i.void}}));break}case Xe:{const e=this._input,t=new Qt(this._currentChannel.left(),this._providedEnv,(e=>this._executeCloseLastSubstream(e)));t._input=e,this._input=t,this.addFinalizer((t=>{const n=this.restorePipe(t,e);return void 0!==n?n:i.void})),this._currentChannel=this._currentChannel.right();break}case et:{const e=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer((()=>i.sync((()=>{this._providedEnv=e}))));break}case tt:{const t=this._currentChannel;e=Pt(this._input,s.identity,(e=>{try{this._currentChannel=t.more(e)}catch(n){this._currentChannel=t.done.onExit($.die(n))}}),(e=>{this._currentChannel=(e=>t.done.onExit(e))(e)}));break}case nt:e=this.doneSucceed(this._currentChannel.evaluate());break;case rt:e=this.doneSucceed(this._currentChannel.terminal);break;case it:this._currentChannel=this._currentChannel.channel();break;default:this._currentChannel._tag}}catch(t){this._currentChannel=ht(W.die(t))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){const t=[];let n=this._doneStack.pop();for(;n;)"ContinuationFinalizer"===n._tag&&t.push(n.finalizer),n=this._doneStack.pop();const r=0===t.length?i.void:en(t,e);return this.storeInProgressFinalizer(r),r}popNextFinalizers(){const e=[];for(;0!==this._doneStack.length;){const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return e;e.push(t),this._doneStack.pop()}return e}restorePipe(e,t){const n=this._input;if(this._input=t,void 0!==n){return n.close(e)}return i.void}close(e){let t;const n=this._inProgressFinalizer;let r;void 0!==n&&(t=(0,s.pipe)(n,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const a=this.popAllFinalizers(e);void 0!==a&&(r=(0,s.pipe)(a,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const o=void 0===this._activeSubexecutor?void 0:this._activeSubexecutor.close(e);if(void 0!==o||void 0!==t||void 0!==r)return(0,s.pipe)(i.exit(Xt(o)),i.zip(i.exit(Xt(t))),i.zip(i.exit(Xt(r))),i.map((([[e,t],n])=>(0,s.pipe)(e,$.zipRight(t),$.zipRight(n)))),i.uninterruptible,i.flatMap((e=>i.suspend((()=>e)))))}doneSucceed(e){if(0===this._doneStack.length)return this._done=$.succeed(e),this._currentChannel=void 0,Rt();const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return this._doneStack.pop(),void(this._currentChannel=t.onSuccess(e));const n=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=n.reverse(),this._done=$.succeed(e),this._currentChannel=void 0,Rt();const r=en(n.map((e=>e.finalizer)),$.succeed(e));this.storeInProgressFinalizer(r);const a=(0,s.pipe)(r,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneSucceed(e))))));return Lt(a)}doneHalt(e){if(0===this._doneStack.length)return this._done=$.failCause(e),this._currentChannel=void 0,Rt();const t=this._doneStack[this._doneStack.length-1];if(t._tag===Le)return this._doneStack.pop(),void(this._currentChannel=t.onHalt(e));const n=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=n.reverse(),this._done=$.failCause(e),this._currentChannel=void 0,Rt();const r=en(n.map((e=>e.finalizer)),$.failCause(e));this.storeInProgressFinalizer(r);const a=(0,s.pipe)(r,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneHalt(e))))));return Lt(a)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Rt()}runBracketOut(e){const t=i.uninterruptible(i.matchCauseEffect(this.provide(e.acquire()),{onFailure:e=>i.sync((()=>{this._currentChannel=ht(e)})),onSuccess:t=>i.sync((()=>{this.addFinalizer((n=>this.provide(e.finalizer(t,n)))),this._currentChannel=It(t)}))}));return Lt(t)}provide(e){return void 0===this._providedEnv?e:(0,s.pipe)(e,i.provide(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new je(e))}runSubexecutor(){const e=this._activeSubexecutor;switch(e._tag){case jt:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case qt:return this.pullFromUpstream(e);case Wt:return this.drainChildExecutors(e);case Bt:return this._emitted=e.value,this._activeSubexecutor=e.next,Ft()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){const t=$.match(e,{onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)});return this._activeSubexecutor=void 0,void 0===t?i.void:(e=>Dt(e)?e.effect:i.void)(t)}finishSubexecutorWithCloseEffect(e,...t){this.addFinalizer((()=>(0,s.pipe)(t,i.forEach((t=>(0,s.pipe)(i.sync((()=>t(e))),i.flatMap((e=>void 0!==e?e:i.void)))),{discard:!0}))));const n=(0,s.pipe)(e,$.match({onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)}));return this._activeSubexecutor=void 0,n}applyUpstreamPullStrategy(e,t,n){switch(n._tag){case qe:{const r=!e||t.some((e=>void 0!==e));return[n.emitSeparator,r?[void 0,...t]:t]}case We:{const r=!e||t.some((e=>void 0!==e));return[n.emitSeparator,r?[...t,void 0]:t]}}}pullFromChild(e,t,n,r){return Pt(e,s.identity,(i=>{const a=n(i);switch(a._tag){case Ae:break;case Ne:this.finishWithDoneValue(e,t,a.value);break;case Me:{const e=t.enqueuePullFromChild(r);this.replaceSubexecutor(e);break}}this._activeSubexecutor=new Gt(i,this._activeSubexecutor)}),$.match({onFailure:n=>{const r=this.handleSubexecutorFailure(e,t,n);return void 0===r?void 0:Ut(r)},onSuccess:n=>{this.finishWithDoneValue(e,t,n)}}))}finishWithDoneValue(e,t,n){const r=t;switch(r._tag){case qt:{const t=new $t(r.upstreamExecutor,r.createChild,void 0!==r.lastDone?r.combineChildResults(r.lastDone,n):n,r.activeChildExecutors,r.combineChildResults,r.combineWithChildResult,r.onPull,r.onEmit);this._closeLastSubstream=e.close($.succeed(n)),this.replaceSubexecutor(t);break}case Wt:{const t=new Vt(r.upstreamExecutor,void 0!==r.lastDone?r.combineChildResults(r.lastDone,n):n,r.activeChildExecutors,r.upstreamDone,r.combineChildResults,r.combineWithChildResult,r.onPull);this._closeLastSubstream=e.close($.succeed(n)),this.replaceSubexecutor(t);break}}}handleSubexecutorFailure(e,t,n){return this.finishSubexecutorWithCloseEffect($.failCause(n),(e=>t.close(e)),(t=>e.close(t)))}pullFromUpstream(e){if(0===e.activeChildExecutors.length)return this.performPullFromUpstream(e);const t=e.activeChildExecutors[0],n=new $t(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(void 0===t)return this.performPullFromUpstream(n);this.replaceSubexecutor(new zt(t.childExecutor,n,t.onEmit))}performPullFromUpstream(e){return Pt(e.upstreamExecutor,(e=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(t),i.zipRight(e))}),(t=>{if(void 0!==this._closeLastSubstream){const n=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(n),i.map((()=>{const n=new Qt(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;const[r,i]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Zt(t)));this._activeSubexecutor=new zt(n,new $t(e.upstreamExecutor,e.createChild,e.lastDone,i,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),c.isSome(r)&&(this._activeSubexecutor=new Gt(r.value,this._activeSubexecutor))})))}const n=new Qt(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;const[r,a]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Zt(t)));this._activeSubexecutor=new zt(n,new $t(e.upstreamExecutor,e.createChild,e.lastDone,a,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),c.isSome(r)&&(this._activeSubexecutor=new Gt(r.value,this._activeSubexecutor))}),(t=>{if(e.activeChildExecutors.some((e=>void 0!==e))){const t=new Vt(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(void 0!==this._closeLastSubstream){const e=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,s.pipe)(this._executeCloseLastSubstream(e),i.map((()=>this.replaceSubexecutor(t))))}return void this.replaceSubexecutor(t)}const n=this._closeLastSubstream,r=this.finishSubexecutorWithCloseEffect((0,s.pipe)(t,$.map((t=>e.combineWithChildResult(e.lastDone,t)))),(()=>n),(t=>e.upstreamExecutor.close(t)));return void 0===r?void 0:Ut(r)}))}drainChildExecutors(e){if(0===e.activeChildExecutors.length){const t=this._closeLastSubstream;return void 0!==t&&this.addFinalizer((()=>i.succeed(t))),this.finishSubexecutorWithCloseEffect(e.upstreamDone,(()=>t),(t=>e.upstreamExecutor.close(t)))}const t=e.activeChildExecutors[0],n=e.activeChildExecutors.slice(1);if(void 0===t){const[t,r]=this.applyUpstreamPullStrategy(!0,n,e.onPull((e=>{const t=Object.create(Yt);return t._tag=Ht,t.activeDownstreamCount=e,t})(n.reduce(((e,t)=>void 0!==t?e+1:e),0))));return this.replaceSubexecutor(new Vt(e.upstreamExecutor,e.lastDone,r,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),c.isSome(t)?(this._emitted=t.value,Ft()):void 0}const r=new Vt(e.upstreamExecutor,e.lastDone,n,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new zt(t.childExecutor,r,t.onEmit))}}const Xt=e=>void 0!==e?e:i.void,en=(e,t)=>(0,s.pipe)(i.forEach(e,(e=>i.exit(e(t)))),i.map((e=>(0,s.pipe)($.all(e),c.getOrElse((()=>$.void))))),i.flatMap((e=>i.suspend((()=>e))))),tn=(e,t,n)=>{const r=[e],a=()=>{const e=r.pop();if(void 0===e||void 0===e.upstream)return i.dieMessage("Unexpected end of input for channel execution");const o=e.upstream.run();switch(o._tag){case Ot:{const o=e.onEmit(e.upstream.getEmit());return 0===r.length?void 0===o?i.suspend(t):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:t})):void 0===o?i.suspend((()=>a())):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}))}case Tt:{const o=e.onDone(e.upstream.getDone());return 0===r.length?void 0===o?i.suspend(t):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:t})):void 0===o?i.suspend((()=>a())):(0,s.pipe)(o,i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}))}case At:return r.push(e),(0,s.pipe)(e.onEffect(o.effect),i.catchAllCause((t=>i.suspend((()=>{const n=e.onDone($.failCause(t));return void 0===n?i.void:n})))),i.matchCauseEffect({onFailure:n,onSuccess:()=>a()}));case Nt:return r.push(e),r.push(o),i.suspend((()=>a()))}};return a()},nn="Done",rn="Await",an=Symbol.for("effect/ChannelMergeDecision"),sn={[an]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},on=e=>{const t=Object.create(sn);return t._tag=rn,t.f=e,t},cn="BothRunning",ln="LeftDone",un="RightDone",fn=Symbol.for("effect/ChannelMergeState"),dn={[fn]:fn},pn=(e,t)=>{const n=Object.create(dn);return n._tag=cn,n.left=e,n.right=t,n},hn=e=>{const t=Object.create(dn);return t._tag=ln,t.f=e,t},mn=e=>{const t=Object.create(dn);return t._tag=un,t.f=e,t},gn="BackPressure",yn="BufferSliding",bn=Symbol.for("effect/ChannelMergeStrategy"),Sn={[bn]:bn},vn=e=>{const t=Object.create(Sn);return t._tag=gn,t},wn=e=>{const t=Object.create(Sn);return t._tag=yn,t},En=(0,s.dual)(2,((e,{onBackPressure:t,onBufferSliding:n})=>{switch(e._tag){case gn:return t();case yn:return n()}})),_n="Empty",kn="Emit",xn="Error",In="Done",Tn=e=>({_tag:_n,notifyProducer:e}),On=e=>({_tag:kn,notifyConsumers:e}),An=e=>({_tag:xn,cause:e}),Nn=e=>({_tag:In,done:e});class Mn{ref;constructor(e){this.ref=e}awaitRead(){return i.flatten(Ie.modify(this.ref,(e=>e._tag===_n?[z.await(e.notifyProducer),e]:[i.void,e])))}get close(){return i.fiberIdWith((e=>this.error(W.interrupt(e))))}done(e){return i.flatten(Ie.modify(this.ref,(t=>{switch(t._tag){case _n:return[z.await(t.notifyProducer),t];case kn:return[i.forEach(t.notifyConsumers,(t=>z.succeed(t,L.left(e))),{discard:!0}),Nn(e)];case xn:case In:return[i.interrupt,t]}})))}emit(e){return i.flatMap(z.make(),(t=>i.flatten(Ie.modify(this.ref,(n=>{switch(n._tag){case _n:return[z.await(n.notifyProducer),n];case kn:{const r=n.notifyConsumers[0],i=n.notifyConsumers.slice(1);if(void 0!==r)return[z.succeed(r,L.right(e)),0===i.length?Tn(t):On(i)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case xn:case In:return[i.interrupt,n]}})))))}error(e){return i.flatten(Ie.modify(this.ref,(t=>{switch(t._tag){case _n:return[z.await(t.notifyProducer),t];case kn:return[i.forEach(t.notifyConsumers,(t=>z.failCause(t,e)),{discard:!0}),An(e)];case xn:case In:return[i.interrupt,t]}})))}get take(){return this.takeWith((e=>$.failCause(W.map(e,L.left))),(e=>$.succeed(e)),(e=>$.fail(L.right(e))))}takeWith(e,t,n){return i.flatMap(z.make(),(r=>i.flatten(Ie.modify(this.ref,(a=>{switch(a._tag){case _n:return[i.zipRight(z.succeed(a.notifyProducer,void 0),i.matchCause(z.await(r),{onFailure:e,onSuccess:L.match({onLeft:n,onRight:t})})),On([r])];case kn:return[i.matchCause(z.await(r),{onFailure:e,onSuccess:L.match({onLeft:n,onRight:t})}),On([...a.notifyConsumers,r])];case xn:return[i.succeed(e(a.cause)),a];case In:return[i.succeed(n(a.done)),a]}})))))}}const Cn=()=>(0,s.pipe)(z.make(),i.flatMap((e=>Ie.make(Tn(e)))),i.map((e=>new Mn(e))));n(694375),n(460011);const Rn=(0,s.dual)(2,((e,t)=>ut(e,t,(()=>{}),(()=>{})))),Fn=(0,s.dual)(2,((e,t)=>dt(e,(()=>t)))),Ln=e=>gt(e,s.identity),Pn=e=>Gn(e.takeWith(ht,(t=>gt(It(t),(()=>Pn(e)))),wt)),Dn=(0,s.dual)(2,((e,t)=>gt(e,(e=>kt((()=>t(e))))))),Un=(0,s.dual)(2,((e,t)=>{const n=St({onInput:e=>gt(It(t(e)),(()=>n)),onFailure:pt,onDone:Et});return bt(e,n)})),jn=e=>t=>qn(e)(t,s.constVoid),qn=({bufferSize:e=16,concurrency:t,mergeStrategy:n=vn()})=>(r,a)=>(0,s.pipe)(i.gen((function*(o){const l="unbounded"===t?Number.MAX_SAFE_INTEGER:t,u=yield*o(Cn()),f=Pn(u),d=yield*o(i.acquireRelease(ve(e),(e=>_e(e)))),p=yield*o(i.acquireRelease(we(),(e=>_e(e)))),h=yield*o(Ie.make(c.none())),m=yield*o(z.make()),g=(yield*o(i.makeSemaphore(l))).withPermits,y=yield*o($n(r)),b=e=>(0,s.pipe)(i.flatMap(e,L.match({onLeft:e=>i.succeed(c.some(e)),onRight:e=>i.as(ke(d,i.succeed(L.right(e))),c.none())})),i.repeat({until:e=>c.isSome(e)}),i.flatMap((e=>Ie.update(h,c.match({onNone:()=>c.some(e.value),onSome:t=>c.some(a(t,e.value))})))),i.catchAllCause((e=>W.isInterrupted(e)?i.failCause(e):(0,s.pipe)(ke(d,i.failCause(e)),i.zipRight(z.succeed(m,void 0)),i.asVoid))));return yield*o(i.matchCauseEffect(y,{onFailure:e=>(0,s.pipe)(ke(d,i.failCause(e)),i.zipRight(i.succeed(!1))),onSuccess:L.match({onLeft:e=>i.raceWith(i.interruptible(z.await(m)),i.interruptible(g(l)(i.void)),{onSelfDone:(e,t)=>i.as(Te.interrupt(t),!1),onOtherDone:(t,n)=>i.zipRight(Te.interrupt(n),(0,s.pipe)(Ie.get(h),i.flatMap(c.match({onNone:()=>ke(d,i.succeed(L.left(e))),onSome:t=>ke(d,i.succeed(L.left(a(t,e))))})),i.as(!1)))}),onRight:e=>En(n,{onBackPressure:()=>i.gen((function*(t){const n=yield*t(z.make()),r=(0,s.pipe)(f,bt(e),$n,i.flatMap((e=>i.race(b(e),i.interruptible(z.await(m))))),i.scoped);yield*t(z.succeed(n,void 0),i.zipRight(r),g(1),i.forkScoped),yield*t(z.await(n));return!(yield*t(z.isDone(m)))})),onBufferSliding:()=>i.gen((function*(t){const n=yield*t(z.make()),r=yield*t(z.make()),a=yield*t(Ee(p));yield*t(xe(p),i.flatMap((e=>z.succeed(e,void 0))),i.when((()=>a>=l))),yield*t(ke(p,n));const o=(0,s.pipe)(f,bt(e),$n,i.flatMap((e=>(0,s.pipe)(b(e),i.race(i.interruptible(z.await(m))),i.race(i.interruptible(z.await(n)))))),i.scoped);yield*t(z.succeed(r,void 0),i.zipRight(o),g(1),i.forkScoped),yield*t(z.await(r));return!(yield*t(z.isDone(m)))}))})})}),i.repeat({while:e=>e}),i.forkScoped),[d,u]})),i.map((([e,t])=>{const n=(0,s.pipe)(xe(e),i.flatten,i.matchCause({onFailure:ht,onSuccess:L.match({onLeft:Et,onRight:e=>gt(It(e),(()=>n))})}),Gn);return ft(n,t)})),Jn),Wn=(0,s.dual)(3,((e,t,n)=>jn(n)(Un(e,t)))),Bn=(0,s.dual)(2,((e,t)=>Jn(i.flatMap(Cn(),(n=>{const r=Pn(n);return i.map(i.all([$n(bt(r,e)),$n(bt(r,t.other)),i.scope]),(([e,r,a])=>{const o=(e,t,n)=>(r,a,s)=>{const o=e=>{const n=e;return n._tag===nn?i.succeed(yt(i.zipRight(Te.interrupt(t),n.effect))):i.map(Te.await(t),$.match({onFailure:e=>yt(n.f($.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f($.succeed(e))),onRight:e=>Zn(It(e),c(s(n.f)))})}))};return $.match(e,{onFailure:e=>o(r($.failCause(e))),onSuccess:L.match({onLeft:e=>o(r($.succeed(e))),onRight:e=>i.succeed(gt(It(e),(()=>gt(yt(i.forkDaemon(n)),(e=>c(a(e,t)))))))})})},c=n=>{switch(n._tag){case cn:{const a=i.interruptible(Te.join(n.left)),s=i.interruptible(Te.join(n.right));return Gn(i.raceWith(a,s,{onSelfDone:(r,a)=>i.zipRight(Te.interrupt(a),o(r,n.right,e)(t.onSelfDone,pn,(e=>hn(e)))),onOtherDone:(e,a)=>i.zipRight(Te.interrupt(a),o(e,n.left,r)(t.onOtherDone,((e,t)=>pn(t,e)),(e=>mn(e))))}))}case ln:return Gn(i.map(i.exit(r),$.match({onFailure:e=>yt(n.f($.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f($.succeed(e))),onRight:e=>gt(It(e),(()=>c(hn(n.f))))})})));case un:return Gn(i.map(i.exit(e),$.match({onFailure:e=>yt(n.f($.failCause(e))),onSuccess:L.match({onLeft:e=>yt(n.f($.succeed(e))),onRight:e=>gt(It(e),(()=>c(mn(n.f))))})})))}};return(0,s.pipe)(yt(i.zipWith(i.forkIn(e,a),i.forkIn(r,a),((e,t)=>pn(e,t)))),gt(c),ft(n))}))}))))),zn=(i.never,e=>Gn(i.uninterruptibleMask((t=>i.map(Oe.make(),(n=>ct(i.tapErrorCause(t(Oe.extend(e,n)),(e=>Oe.close(n,$.failCause(e)))),((e,t)=>Oe.close(n,t))))))))),$n=e=>i.map(i.acquireRelease(i.sync((()=>new Qt(e,void 0,s.identity))),((e,t)=>{const n=e.close(t);return void 0===n?i.void:n})),(e=>i.suspend((()=>Vn(e.run(),e))))),Vn=(e,t)=>{const n=e;switch(n._tag){case Tt:return $.match(t.getDone(),{onFailure:i.failCause,onSuccess:e=>i.succeed(L.left(e))});case Ot:return i.succeed(L.right(t.getEmit()));case At:return(0,s.pipe)(n.effect,i.flatMap((()=>Vn(t.run(),t))));case Nt:return tn(n,(()=>Vn(t.run(),t)),(e=>i.failCause(e)))}},Gn=e=>Ln(yt(e)),Jn=e=>lt(zn(e),((e,t)=>e),((e,t)=>e)),Hn=e=>Kn(0,e.length,e),Kn=(e,t,n)=>e===t?xt:(0,s.pipe)(It((0,s.pipe)(n,B.unsafeGet(e))),gt((()=>Kn(e+1,t,n)))),Yn=(0,s.dual)((e=>ot(e[1])),((e,t,n)=>n?.concurrent?Bn(e,{other:t,onSelfDone:e=>on((t=>i.suspend((()=>$.zip(e,t))))),onOtherDone:e=>on((t=>i.suspend((()=>$.zip(t,e)))))}):gt(e,(e=>Dn(t,(t=>[e,t])))))),Zn=(0,s.dual)((e=>ot(e[1])),((e,t,n)=>n?.concurrent?Dn(Yn(e,t,{concurrent:!0}),(e=>e[1])):gt(e,(()=>t))));n(823478);var Qn=n(860118);var Xn=n(595296);const er=Xn.unsafeFork,tr=(Xn.unsafeRunSyncExit,Xn.unsafeRunSync);Xn.unsafeRunCallback,Xn.unsafeRunPromise,Xn.unsafeRunPromiseExit,Xn.defaultRuntime,Xn.defaultRuntimeFlags,Xn.make,Xn.FiberFailureCauseId,Xn.isAsyncFiberException,Xn.isFiberFailure,Xn.fiberFailure,Xn.updateRuntimeFlags,Xn.enableRuntimeFlag,Xn.disableRuntimeFlag,Xn.updateContext,Xn.provideService,Xn.updateFiberRefs,Xn.setFiberRef,Xn.deleteFiberRef;n(292075);n(194514),n(997385);n(398826),n(895868);const nr=Symbol.for("effect/Sink"),rr={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};class ir{channel;[nr]=rr;constructor(e){this.channel=e}pipe(){return(0,V.pipeArguments)(this,arguments)}}const ar=e=>new ir(yt(e));i.never;const sr=Symbol.for("effect/Stream"),or={_R:e=>e,_E:e=>e,_A:e=>e};class cr{channel;[sr]=or;constructor(e){this.channel=e}pipe(){return(0,V.pipeArguments)(this,arguments)}}const lr=e=>(0,b.hasProperty)(e,sr)||i.isEffect(e),ur=e=>yr(i.fail(c.some(e))),fr=(0,s.dual)((e=>lr(e[0])),((e,t,n)=>{const r=n?.bufferSize??16;return n?.switch?dr(n?.concurrency,(()=>pr(e,1,r,t)),(n=>pr(e,n,r,t))):dr(n?.concurrency,(()=>new cr(Rn(mr(e),(e=>(0,s.pipe)(e,B.map((e=>mr(t(e)))),B.reduce(xt,((e,t)=>(0,s.pipe)(e,Zn(t))))))))),(r=>new cr((0,s.pipe)(mr(e),Rn(Hn),Wn((e=>mr(t(e))),n)))))})),dr=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return e>1?n(e):t()}},pr=(0,s.dual)(4,((e,t,n,r)=>new cr((0,s.pipe)(mr(e),Rn(Hn),Wn((e=>mr(r(e))),{concurrency:t,mergeStrategy:wn(),bufferSize:n}))))),hr=(0,s.dual)((e=>lr(e[0])),((e,t)=>fr(e,s.identity,t))),mr=e=>{if("channel"in e)return e.channel;if(i.isEffect(e))return mr(gr(e));throw new TypeError("Expected a Stream.")},gr=e=>(0,s.pipe)(e,i.mapError(c.some),yr),yr=e=>new cr(Gn(i.match(e,{onFailure:c.match({onNone:()=>xt,onSome:pt}),onSuccess:e=>It(B.of(e))})));i.never;const br=e=>xr(e,(e=>(0,s.pipe)(i.map(e,(t=>c.some([t,e]))),i.catchAll(c.match({onNone:()=>i.succeed(c.none()),onSome:i.fail}))))),Sr=e=>br((0,s.pipe)(e,i.map(B.of))),vr=e=>new cr(Fn(zn((0,s.pipe)(e,i.map(B.of))),i.void)),wr=e=>new cr(_t((()=>mr(e())))),Er=e=>i.map($n(mr(e)),(e=>(0,s.pipe)(e,i.mapError(c.some),i.flatMap(L.match({onLeft:()=>i.fail(c.none()),onRight:i.succeed}))))),_r=(0,s.dual)((e=>lr(e[0])),((e,t)=>i.map(i.runtime(),(n=>kr(e,n,t))))),kr=(0,s.dual)((e=>lr(e[0])),((e,t,n)=>{const r=tr(t),a=er(t);let o,c;return new ReadableStream({start(t){c=r(Oe.make()),o=(0,s.pipe)(Er(e),Oe.extend(c),r,i.tap((e=>i.sync((()=>{B.map(e,(e=>{t.enqueue(e)}))})))),i.tapErrorCause((()=>Oe.close(c,$.void))),i.catchTags({None:()=>i.sync((()=>{t.close()})),Some:e=>i.sync((()=>{t.error(e.value)}))}),i.asVoid)},pull:()=>new Promise((e=>{a(o,{scope:c}).addObserver((t=>e()))})),cancel:()=>new Promise((e=>{a(Oe.close(c,$.void)).addObserver((t=>e()))}))},n?.strategy)})),xr=(e,t)=>wr((()=>{const n=e=>Gn(i.map(t(e),c.match({onNone:()=>xt,onSome:([e,t])=>gt(It(e),(()=>n(t)))})));return new cr(n(e))})),Ir=e=>hr(vr(e));const Tr=ur,Or=(e,t)=>Ir(i.map(i.acquireRelease(i.sync((()=>e().getReader())),(e=>i.promise((()=>e.cancel())))),(e=>Sr(i.flatMap(i.tryPromise({try:()=>e.read(),catch:e=>c.some(t(e))}),(({done:e,value:t})=>e?i.fail(c.none()):i.succeed(t))))))),Ar=_r;const Nr=(e,t)=>{class n extends q.Error{_tag=t;constructor(e){super(e),b.hasProperty(this.error,"stack")&&(this.stack=this.error.stack)}get message(){return b.hasProperty(this.error,"message")?this.error.message:b.hasProperty(this.error,"toJSON")&&"function"===typeof this.error.toJSON?JSON.stringify(this.error.toJSON()):String(this.error)}}return n.prototype[e]=e,n.prototype.name=t,n};r.Tag("@effect/platform/FileSystem/WatchBackend")();const Mr=Symbol.for("@effect/platform/HttpBody");class Cr{[Mr];constructor(){this[Mr]=Mr}[o.NodeInspectSymbol](){return this.toJSON()}toString(){return o.format(this)}}class Rr extends Cr{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}}const Fr=new Rr;class Lr extends Cr{body;contentType;_tag="Uint8Array";constructor(e,t){super(),this.body=e,this.contentType=t}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?(new TextDecoder).decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}}const Pr=(e,t)=>new Lr(e,t??"application/octet-stream");const Dr=Symbol.for("@effect/platform/HttpClientRequest"),Ur=r.GenericTag("@effect/platform/HttpClient"),jr={[Dr]:Dr,...a.CommitPrototype,...o.BaseProto,commit(){return i.flatMap(Ur,(e=>e(this)))},toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:this.headers,body:this.body.toJSON()}}};function qr(e,t,n,r,i,a){const s=Object.create(jr);return s.method=e,s.url=t,s.urlParams=n,s.hash=r,s.headers=i,s.body=a,s}const Wr=e=>"object"===typeof e&&null!==e&&Dr in e,Br=qr("GET","",D,c.none(),T,Fr),zr=e=>(t,n)=>Vr(Br,{method:e,url:t,...n??void 0}),$r=zr("POST"),Vr=(0,s.dual)(2,((e,t)=>{let n=e;return t.method&&(n=Yr(n,t.method)),t.url&&(n=Zr(n,t.url)),t.headers&&(n=Jr(n,t.headers)),t.urlParams&&(n=Qr(n,t.urlParams)),t.hash&&(n=Xr(n,t.hash)),t.body&&(n=ei(n,t.body)),t.accept&&(n=Hr(n,t.accept)),t.acceptJson&&(n=Kr(n)),n})),Gr=(0,s.dual)(3,((e,t,n)=>qr(e.method,e.url,e.urlParams,e.hash,A(e.headers,t,n),e.body))),Jr=(0,s.dual)(2,((e,t)=>qr(e.method,e.url,e.urlParams,e.hash,N(e.headers,t),e.body))),Hr=(0,s.dual)(2,((e,t)=>Gr(e,"Accept",t))),Kr=Hr("application/json"),Yr=(0,s.dual)(2,((e,t)=>qr(t,e.url,e.urlParams,e.hash,e.headers,e.body))),Zr=(0,s.dual)(2,((e,t)=>{if("string"===typeof t)return qr(e.method,t,e.urlParams,e.hash,e.headers,e.body);const n=new URL(t.toString()),r=P(n.searchParams),i=n.hash?c.some(n.hash.slice(1)):c.none();return n.search="",n.hash="",qr(e.method,n.toString(),r,i,e.headers,e.body)})),Qr=(0,s.dual)(2,((e,t)=>qr(e.method,e.url,U(e.urlParams,t),e.hash,e.headers,e.body))),Xr=(0,s.dual)(2,((e,t)=>qr(e.method,e.url,e.urlParams,c.some(t),e.headers,e.body))),ei=(0,s.dual)(2,((e,t)=>{let n=e.headers;if("Empty"===t._tag)n=M(M(n,"Content-Type"),"Content-length");else{const e=t.contentType;e&&(n=A(n,"content-type",e));const r=t.contentLength;r&&(n=A(n,"content-length",r.toString()))}return qr(e.method,e.url,e.urlParams,e.hash,n,t)})),ti=(0,s.dual)((e=>Wr(e[0])),((e,t,n="application/octet-stream")=>ei(e,Pr(t,n)))),ni=$r,ri=ti,ii=Symbol.for("@effect/platform/Cookies"),ai=Symbol.for("@effect/platform/Cookies/Cookie"),si=Symbol.for("@effect/platform/Cookies/CookieError");((e,t)=>{class n extends q.Error{_tag=t}n.prototype[e]=e,n.prototype.name=t})(si,"CookieError");const oi={[ii]:ii,...o.BaseProto,toJSON(){return{_id:"@effect/platform/Cookies",cookies:S.map(this.cookies,(e=>e.toJSON()))}},pipe(){return(0,V.pipeArguments)(this,arguments)}},ci=e=>{const t=Object.create(oi);return t.cookies=e,t},li=e=>{const t={};for(const n of e)t[n.name]=n;return ci(t)};function ui(e){const t=e.split(";").map((e=>e.trim())).filter((e=>""!==e));if(0===t.length)return c.none();const n=t[0].indexOf("=");if(-1===n)return c.none();const r=t[0].slice(0,n);if(!fi.test(r))return c.none();const i=t[0].slice(n+1),a=pi(i);if(1===t.length)return c.some(Object.assign(Object.create(di),{name:r,value:a,valueEncoded:i}));const s={};for(let o=1;o<t.length;o++){const e=t[o],n=e.indexOf("="),r=-1===n?e:e.slice(0,n).trim(),i=-1===n?void 0:e.slice(n+1).trim();switch(r.toLowerCase()){case"domain":{if(void 0===i)break;const e=i.trim().replace(/^\./,"");e&&(s.domain=e);break}case"expires":{if(void 0===i)break;const e=new Date(i);isNaN(e.getTime())||(s.expires=e);break}case"max-age":{if(void 0===i)break;const e=parseInt(i,10);isNaN(e)||(s.maxAge=Qn.seconds(e));break}case"path":if(void 0===i)break;"/"===i[0]&&(s.path=i);break;case"priority":if(void 0===i)break;switch(i.toLowerCase()){case"low":s.priority="low";break;case"medium":s.priority="medium";break;case"high":s.priority="high"}break;case"httponly":s.httpOnly=!0;break;case"secure":s.secure=!0;break;case"partitioned":s.partitioned=!0;break;case"samesite":if(void 0===i)break;switch(i.toLowerCase()){case"lax":s.sameSite="lax";break;case"strict":s.sameSite="strict";break;case"none":s.sameSite="none"}}}return c.some(Object.assign(Object.create(di),{name:r,value:a,valueEncoded:i,options:Object.keys(s).length>0?s:void 0}))}const fi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,di={[ai]:ai,...o.BaseProto,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}};const pi=e=>{try{return decodeURIComponent(e)}catch(t){return e}},hi=Symbol.for("@effect/platform/HttpClientError");class mi extends(Nr(hi,"RequestError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){const e=super.message;return`${this.reason} error (${this.methodAndUrl}): ${e}`}}class gi extends(Nr(hi,"ResponseError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){const e=super.message;return`${this.reason} error (${this.response.status} ${this.methodAndUrl}): ${e}`}}n(494011);const yi=e=>{return t={b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${"Some"===e.parent._tag?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`},Object.setPrototypeOf(t,k);var t},bi=Symbol.for("@effect/platform/HttpIncomingMessage"),Si=Symbol.for("@effect/platform/HttpClientResponse"),vi=(e,t)=>new wi(e,t);class wi extends o.Class{request;source;[bi];[Si];constructor(e,t){super(),this.request=e,this.source=t,this[bi]=bi,this[Si]=Si}toJSON(){return((e,t)=>{const n=e.headers["content-type"]??"";let r;if(n.includes("application/json"))try{r=i.runSync(e.json)}catch(s){}else if(n.includes("text/")||n.includes("urlencoded"))try{r=i.runSync(e.text)}catch(s){}const a={...t,headers:e.headers,remoteAddress:e.remoteAddress.toJSON()};return void 0!==r&&(a.body=r),a})(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return O(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=(e=>{const t="string"===typeof e?[e]:e,n=[];for(const r of t){const e=ui(r.trim());c.isSome(e)&&n.push(e.value)}return li(n)})(this.source.headers.getSetCookie())}get remoteAddress(){return c.none()}get stream(){return this.source.body?Or((()=>this.source.body),(e=>new gi({request:this.request,response:this,reason:"Decode",error:e}))):Tr(new gi({request:this.request,response:this,reason:"EmptyBody",error:"can not create stream from empty body"}))}get json(){return i.tryMap(this.text,{try:e=>""===e?null:JSON.parse(e),catch:e=>new gi({request:this.request,response:this,reason:"Decode",error:e})})}textBody;get text(){return this.textBody??=i.tryPromise({try:()=>this.source.text(),catch:e=>new gi({request:this.request,response:this,reason:"Decode",error:e})}).pipe(i.cached,i.runSync)}get urlParamsBody(){return i.flatMap(this.text,(e=>i.try({try:()=>P(new URLSearchParams(e)),catch:e=>new gi({request:this.request,response:this,reason:"Decode",error:e})})))}formDataBody;get formData(){return this.formDataBody??=i.tryPromise({try:()=>this.source.formData(),catch:e=>new gi({request:this.request,response:this,reason:"Decode",error:e})}).pipe(i.cached,i.runSync)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=i.tryPromise({try:()=>this.source.arrayBuffer(),catch:e=>new gi({request:this.request,response:this,reason:"Decode",error:e})}).pipe(i.cached,i.runSync)}}const Ei=Symbol.for("@effect/platform/HttpClient"),_i=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),(()=>h(s.constFalse))),ki=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),(()=>h(!0))),xi=(0,y.globalValue)(Symbol.for("@effect/platform/HttpClient/currentFetchOptions"),(()=>h({}))),Ii={[Ei]:Ei,pipe(){return(0,V.pipeArguments)(this,arguments)}},Ti=(e,t)=>{function n(n){return e(t(n))}return Object.setPrototypeOf(n,Ii),n.preprocess=t,n.execute=e,n},Oi=e=>Ti((t=>i.flatMap(t,(t=>i.withFiberRuntime((n=>{const a=r.unsafeGet(n.getFiberRef(m),Oe.Scope),s=new AbortController,o=Oe.addFinalizer(a,i.sync((()=>s.abort()))),c=((e,t,n)=>{try{const r=new URL(e,j());for(let e=0;e<t.length;e++){const[n,i]=t[e];void 0!==i&&r.searchParams.append(n,i)}return"Some"===n._tag&&(r.hash=n.value),L.right(r)}catch(r){return L.left(r)}})(t.url,t.urlParams,t.hash);if("Left"===c._tag)return i.fail(new mi({request:t,reason:"InvalidUrl",error:c.left}));const l=c.right;return!n.getFiberRef(g)||n.getFiberRef(_i)(t)?i.zipRight(o,e(t,l,s.signal,n)):i.zipRight(o,i.useSpan(`http.client ${t.method}`,{kind:"client",captureStackTrace:!1},(r=>{r.attribute("http.request.method",t.method),r.attribute("server.address",l.origin),""!==l.port&&r.attribute("server.port",+l.port),r.attribute("url.full",l.toString()),r.attribute("url.path",l.pathname),r.attribute("url.scheme",l.protocol.slice(0,-1));const a=l.search.slice(1);""!==a&&r.attribute("url.query",a);const o=n.getFiberRef(R),c=C(t.headers,o);for(const e in c)r.attribute(`http.request.header.${e}`,String(c[e]));return t=n.getFiberRef(ki)?Jr(t,yi(r)):t,i.tap(i.withParentSpan(e(t,l,s.signal,n),r),(e=>{r.attribute("http.response.status_code",e.status);const t=C(e.headers,o);for(const n in t)r.attribute(`http.response.header.${n}`,String(t[n]))}))})))}))))),i.succeed),Ai=r.GenericTag("@effect/platform/HttpClient/Fetch"),Ni=Oi(((e,t,n,r)=>{const a=r.getFiberRef(m).unsafeMap.get(Ai.key)??globalThis.fetch,s=r.getFiberRef(xi),o=new globalThis.Headers(e.headers),c=r=>i.map(i.tryPromise({try:()=>a(t,{...s,method:e.method,headers:o,body:r,duplex:"Stream"===e.body._tag?"half":void 0,signal:n}),catch:t=>new mi({request:e,reason:"Transport",error:t})}),(t=>vi(e,t)));if("GET"!==(l=e.method)&&"HEAD"!==l)switch(e.body._tag){case"Raw":case"Uint8Array":return c(e.body.body);case"FormData":return c(e.body.formData);case"Stream":return i.flatMap(Ar(e.body.stream),c)}var l;return c(void 0)})),Mi=(0,s.dual)(2,((e,t)=>Ti(i.flatMap((n=>t(e.execute(i.succeed(n)),n))),e.preprocess))),Ci=e=>Mi(e,((e,t)=>i.filterOrFail(e,(e=>e.status>=200&&e.status<300),(e=>new gi({request:t,response:e,reason:"StatusCode",error:"non 2xx status code"}))))),Ri=Ci(Ni),Fi=Ri,Li=e=>i.scoped(i.flatMap(e,(e=>e.arrayBuffer)));var Pi=n(919662),Di=n(643528),Ui=n(697554),ji=n(729618),qi=n(684802),Wi=n(431437),Bi=n(752066),zi=n(912317),$i=n(524982);const Vi=r.GenericTag("Sync"),Gi={_tag:"SyncStateInitial"};class Ji extends(r.Tag("SyncFactory")()){}const Hi=i.gen((function*(){const e=r.empty().pipe(r.add(Bi.SecretBox,yield*Bi.SecretBox)),t=yield*z.make();return Vi.of({init:n=>i.logDebug(["Sync init",{owner:n}]).pipe(i.tap(z.succeed(t,e.pipe(r.add(zi.Owner,n))))),sync:({merkleTree:e,timestamp:n,messages:r})=>i.gen((function*(){yield*i.logDebug(["Sync request",{merkleTree:e,timestamp:n,messages:r}]);const t=yield*Bi.SecretBox,a=yield*zi.Owner,s=yield*qi.Config;return yield*i.forEach(r||[],(({timestamp:e,...n})=>i.map(t.seal(a.encryptionKey,Ki(n)),(t=>({timestamp:e,content:t}))))).pipe(i.map((t=>$i.SyncRequest.toBinary({messages:t,userId:a.id,nodeId:n.node,merkleTree:(0,Wi.merkleTreeToString)(e)},Qi))),i.flatMap((e=>ni(s.syncUrl).pipe(ri(e,"application/x-protobuf"),Fi,Li))),i.map((e=>$i.SyncResponse.fromBinary(new Uint8Array(e),Xi))),i.flatMap((e=>i.forEach(e.messages,(e=>i.map(t.open(a.encryptionKey,e.content),(t=>[t,e.timestamp])))).pipe(i.map(F.filterMap((([e,t])=>c.map(ea(e),(e=>({...e,timestamp:t})))))),i.map((t=>({messages:t,merkleTree:(0,Wi.unsafeMerkleTreeFromString)(e.merkleTree)}))),i.tap((e=>i.logDebug(["Sync response",e])))))),i.catchTag("RequestError",(()=>i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"NetworkError"}}))),i.catchTag("ResponseError",(({response:{status:e}})=>402===e?i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"PaymentRequiredError"}}):i.fail({_tag:"SyncStateIsNotSynced",error:{_tag:"ServerError",status:e}}))))})).pipe((e=>i.flatMap(z.await(t),(t=>i.provide(e,t)))))})})),Ki=({value:e,...t})=>(0,Di.concatBytes)(Yi,$i.MessageContent.toBinary({value:Zi(e),...t},Qi)),Yi=new Uint8Array([0,1]),Zi=e=>{switch(typeof e){case"string":return{oneofKind:"stringValue",stringValue:e};case"number":return{oneofKind:"numberValue",numberValue:Pi.encodeSync(l.NumberFromString)(e)}}return null==e?{oneofKind:void 0}:b.isUint8Array(e)?{oneofKind:"bytesValue",bytesValue:e}:{oneofKind:"jsonValue",jsonValue:JSON.stringify(e)}},Qi={writerFactory:()=>new Ui.BinaryWriter({encode:e=>(new TextEncoder).encode(e)})},Xi={readerFactory:e=>new ji.BinaryReader(e,{decode:e=>(new TextDecoder).decode(e)})},ea=e=>{if(!ta(e,Yi))return c.none();const{value:t,...n}=$i.MessageContent.fromBinary(e.slice(Yi.length),Xi);return c.some({value:na(t),...n})},ta=(e,t)=>{if(t.length>e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},na=e=>{switch(e.oneofKind){case"numberValue":return Pi.decodeSync(l.NumberFromString)(e.numberValue);case"stringValue":return e.stringValue;case"bytesValue":return e.bytesValue;case"jsonValue":return JSON.parse(e.jsonValue);case void 0:return null;default:return(0,s.absurd)(e)}}},674232:(e,t,n)=>{n.r(t),n.d(t,{AnyKeyword:()=>me,BatchingAnnotationId:()=>x,BigIntKeyword:()=>Te,BooleanKeyword:()=>ke,BrandAnnotationId:()=>p,ComposeTransformation:()=>vt,ConcurrencyAnnotationId:()=>k,Declaration:()=>K,DefaultAnnotationId:()=>w,DescriptionAnnotationId:()=>S,DocumentationAnnotationId:()=>_,Enums:()=>Pe,ExamplesAnnotationId:()=>v,FinalTransformation:()=>yt,IdentifierAnnotationId:()=>y,IndexSignature:()=>Ye,JSONSchemaAnnotationId:()=>E,Literal:()=>Q,MessageAnnotationId:()=>m,MissingMessageAnnotationId:()=>g,NeverKeyword:()=>le,NumberKeyword:()=>we,ObjectKeyword:()=>Re,OptionalType:()=>ze,ParseIssueTitleAnnotationId:()=>I,ParseOptionsAnnotationId:()=>T,PropertySignature:()=>He,PropertySignatureTransformation:()=>_t,Refinement:()=>dt,StableFilterAnnotationId:()=>A,StringKeyword:()=>be,SurrogateAnnotationId:()=>O,Suspend:()=>ut,SymbolKeyword:()=>Ne,TemplateLiteral:()=>je,TemplateLiteralSpan:()=>Ue,TitleAnnotationId:()=>b,Transformation:()=>mt,TupleType:()=>Ve,Type:()=>Be,TypeAnnotationId:()=>h,TypeLiteral:()=>Ze,TypeLiteralTransformation:()=>xt,UndefinedKeyword:()=>re,Union:()=>at,UniqueSymbol:()=>te,UnknownKeyword:()=>de,VoidKeyword:()=>se,annotations:()=>Tt,anyKeyword:()=>ge,bigIntKeyword:()=>Oe,booleanKeyword:()=>xe,compose:()=>fn,composeTransformation:()=>wt,defaultParseOption:()=>ht,encodedAST:()=>Ht,encodedBoundAST:()=>Kt,flatten:()=>rt,getAnnotation:()=>N,getBatchingAnnotation:()=>B,getBrandAnnotation:()=>M,getCardinality:()=>Zt,getCompiler:()=>Wt,getConcurrencyAnnotation:()=>W,getDefaultAnnotation:()=>U,getDescriptionAnnotation:()=>P,getDocumentationAnnotation:()=>q,getExamplesAnnotation:()=>D,getIdentifierAnnotation:()=>L,getJSONIdentifier:()=>$t,getJSONIdentifierAnnotation:()=>H,getJSONSchemaAnnotation:()=>j,getMessageAnnotation:()=>C,getMissingMessageAnnotation:()=>R,getNumberIndexedAccess:()=>Mt,getParameterBase:()=>an,getParseIssueTitleAnnotation:()=>z,getParseOptionsAnnotation:()=>$,getPropertyKeyIndexedAccess:()=>Ct,getPropertySignatures:()=>Nt,getSurrogateAnnotation:()=>V,getTemplateLiteralRegExp:()=>At,getTitleAnnotation:()=>F,getWeight:()=>rn,isAnyKeyword:()=>ye,isBigIntKeyword:()=>Ae,isBooleanKeyword:()=>Ie,isComposeTransformation:()=>Et,isDeclaration:()=>Z,isEnums:()=>De,isFinalTransformation:()=>St,isLiteral:()=>X,isMembers:()=>ot,isNeverKeyword:()=>fe,isNumberKeyword:()=>_e,isObjectKeyword:()=>Le,isParameter:()=>Ke,isRefinement:()=>pt,isStringKeyword:()=>ve,isSuspend:()=>ft,isSymbolKeyword:()=>Ce,isTemplateLiteral:()=>We,isTransformation:()=>gt,isTupleType:()=>Je,isTypeLiteral:()=>et,isTypeLiteralTransformation:()=>It,isUndefinedKeyword:()=>ae,isUnion:()=>ct,isUniqueSymbol:()=>ne,isUnknownKeyword:()=>he,isVoidKeyword:()=>ce,keyof:()=>Ot,mapMembers:()=>st,mutable:()=>qt,neverKeyword:()=>ue,null:()=>ee,numberKeyword:()=>Ee,objectKeyword:()=>Fe,omit:()=>Pt,orUndefined:()=>Dt,partial:()=>Ut,pick:()=>Lt,preserveAnnotations:()=>zt,record:()=>Ft,rename:()=>dn,required:()=>jt,stringKeyword:()=>Se,symbolKeyword:()=>Me,typeAST:()=>Bt,undefinedKeyword:()=>ie,unify:()=>it,unknownKeyword:()=>pe,voidKeyword:()=>oe});var r=n(342072),i=n(154258),a=n(744628),s=n(962047),o=n(504491),c=n(880308),l=n(125105),u=n(951791),f=n(758729),d=n(464178);const p=Symbol.for("@effect/schema/annotation/Brand"),h=Symbol.for("@effect/schema/annotation/Type"),m=Symbol.for("@effect/schema/annotation/Message"),g=Symbol.for("@effect/schema/annotation/MissingMessage"),y=Symbol.for("@effect/schema/annotation/Identifier"),b=Symbol.for("@effect/schema/annotation/Title"),S=Symbol.for("@effect/schema/annotation/Description"),v=Symbol.for("@effect/schema/annotation/Examples"),w=Symbol.for("@effect/schema/annotation/Default"),E=Symbol.for("@effect/schema/annotation/JSONSchema"),_=Symbol.for("@effect/schema/annotation/Documentation"),k=Symbol.for("@effect/schema/annotation/Concurrency"),x=Symbol.for("@effect/schema/annotation/Batching"),I=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),T=Symbol.for("@effect/schema/annotation/ParseOptions"),O=Symbol.for("@effect/schema/annotation/Surrogate"),A=Symbol.for("@effect/schema/annotation/StableFilter"),N=(0,i.dual)(2,((e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?o.some(e.annotations[t]):o.none())),M=N(p),C=N(m),R=N(g),F=N(b),L=N(y),P=N(S),D=N(v),U=N(w),j=N(E),q=N(_),W=N(k),B=N(x),z=N(I),$=N(T),V=N(O),G=N(A),J=Symbol.for("@effect/schema/annotation/JSONIdentifier"),H=N(J);class K{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,n,r={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=n,this.annotations=r}toString(){return o.getOrElse(hn(this),(()=>"<declaration schema>"))}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map((e=>e.toJSON())),annotations:Yt(this.annotations)}}}const Y=e=>t=>t._tag===e,Z=Y("Declaration");class Q{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return o.getOrElse(hn(this),(()=>d.formatUnknown(this.literal)))}toJSON(){return{_tag:this._tag,literal:l.isBigInt(this.literal)?String(this.literal):this.literal,annotations:Yt(this.annotations)}}}const X=Y("Literal"),ee=new Q(null,{[y]:"null"});class te{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return o.getOrElse(hn(this),(()=>d.formatUnknown(this.symbol)))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Yt(this.annotations)}}}const ne=Y("UniqueSymbol");class re{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const ie=new re({[b]:"undefined"}),ae=Y("UndefinedKeyword");class se{annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const oe=new se({[b]:"void"}),ce=Y("VoidKeyword");class le{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const ue=new le({[b]:"never"}),fe=Y("NeverKeyword");class de{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const pe=new de({[b]:"unknown"}),he=Y("UnknownKeyword");class me{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const ge=new me({[b]:"any"}),ye=Y("AnyKeyword");class be{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const Se=new be({[b]:"string",[S]:"a string"}),ve=Y("StringKeyword");class we{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const Ee=new we({[b]:"number",[S]:"a number"}),_e=Y("NumberKeyword");class ke{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const xe=new ke({[b]:"boolean",[S]:"a boolean"}),Ie=Y("BooleanKeyword");class Te{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const Oe=new Te({[b]:"bigint",[S]:"a bigint"}),Ae=Y("BigIntKeyword");class Ne{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const Me=new Ne({[b]:"symbol",[S]:"a symbol"}),Ce=Y("SymbolKeyword");class Re{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return pn(this)}toJSON(){return{_tag:this._tag,annotations:Yt(this.annotations)}}}const Fe=new Re({[y]:"object",[b]:"object",[S]:"an object in the TypeScript meaning, i.e. the `object` type"}),Le=Y("ObjectKeyword");class Pe{enums;annotations;_tag="Enums";constructor(e,t={}){this.enums=e,this.annotations=t}toString(){return o.getOrElse(hn(this),(()=>`<enum ${this.enums.length} value(s): ${this.enums.map(((e,t)=>JSON.stringify(t))).join(" | ")}>`))}toJSON(){return{_tag:this._tag,enums:this.enums,annotations:Yt(this.annotations)}}}const De=Y("Enums");class Ue{type;literal;constructor(e,t){this.type=e,this.literal=t}toString(){switch(this.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}}toJSON(){return{type:this.type.toJSON(),literal:this.literal}}}class je{head;spans;annotations;_tag="TemplateLiteral";constructor(e,t,n={}){this.head=e,this.spans=t,this.annotations=n}toString(){return o.getOrElse(hn(this),(()=>qe(this)))}toJSON(){return{_tag:this._tag,head:this.head,spans:this.spans.map((e=>e.toJSON())),annotations:Yt(this.annotations)}}}const qe=e=>"`"+e.head+e.spans.map((e=>String(e)+e.literal)).join("")+"`",We=Y("TemplateLiteral");class Be{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:Yt(this.annotations)}}toString(){return String(this.type)}}class ze extends Be{isOptional;constructor(e,t,n={}){super(e,n),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Yt(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const $e=e=>e.map((e=>e.type));class Ve{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,n,r={}){this.elements=e,this.rest=t,this.isReadonly=n,this.annotations=r;let i=!1,a=!1;for(const s of e)if(s.isOptional)i=!0;else if(i){a=!0;break}if(a||i&&t.length>1)throw new Error(f.getASTRequiredElementFollowinAnOptionalElementErrorMessage)}toString(){return o.getOrElse(hn(this),(()=>Ge(this)))}toJSON(){return{_tag:this._tag,elements:this.elements.map((e=>e.toJSON())),rest:this.rest.map((e=>e.toJSON())),isReadonly:this.isReadonly,annotations:Yt(this.annotations)}}}const Ge=e=>{const t=e.elements.map(String).join(", ");return r.matchLeft(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const i=String(n),a=i.includes(" | ")?`(${i})`:i;if(r.length>0){const n=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${a}[], ${n}]`:`readonly [...${a}[], ${n}]`}return e.elements.length>0?`readonly [${t}, ...${a}[]]`:`ReadonlyArray<${i}>`}})},Je=Y("TupleType");class He extends ze{name;isReadonly;constructor(e,t,n,r,i){super(t,n,i),this.name=e,this.isReadonly=r}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Yt(this.annotations)}}}const Ke=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Ke(e.from)}return!1};class Ye{type;isReadonly;parameter;constructor(e,t,n){if(this.type=t,this.isReadonly=n,!Ke(e))throw new Error(f.getASTIndexSignatureParameterErrorMessage);this.parameter=e}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Ze{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,n={}){this.annotations=n;const r={};for(let a=0;a<e.length;a++){const t=e[a].name;if(Object.prototype.hasOwnProperty.call(r,t))throw new Error(f.getASTDuplicatePropertySignatureErrorMessage(t));r[t]=null}const i={string:!1,symbol:!1};for(let a=0;a<t.length;a++){const e=an(t[a].parameter);if(ve(e)){if(i.string)throw new Error(f.getASTDuplicateIndexSignatureErrorMessage("string"));i.string=!0}else if(Ce(e)){if(i.symbol)throw new Error(f.getASTDuplicateIndexSignatureErrorMessage("symbol"));i.symbol=!0}}this.propertySignatures=Qt(e),this.indexSignatures=Xt(t)}toString(){return o.getOrElse(hn(this),(()=>Xe(this)))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map((e=>e.toJSON())),indexSignatures:this.indexSignatures.map((e=>e.toJSON())),annotations:Yt(this.annotations)}}}const Qe=e=>e.map(String).join("; "),Xe=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${Qe(e.indexSignatures)} }`:`{ ${t} }`}return e.indexSignatures.length>0?`{ ${Qe(e.indexSignatures)} }`:"{}"},et=Y("TypeLiteral"),tt=r.sort(c.mapInput(s.Order,(e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4}))),nt={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},rt=e=>r.flatMap(e,(e=>ct(e)?rt(e.types):[e])),it=e=>{const t=tt(e),n=[],r={},i=[];for(const a of t)switch(a._tag){case"NeverKeyword":break;case"AnyKeyword":return[ge];case"UnknownKeyword":return[pe];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":r[a._tag]||(r[a._tag]=a,n.push(a));break;case"Literal":{const e=typeof a.literal;switch(e){case"string":case"number":case"bigint":case"boolean":r[nt[e]]||i.includes(a.literal)||(i.push(a.literal),n.push(a));break;case"object":i.includes(a.literal)||(i.push(a.literal),n.push(a))}break}case"UniqueSymbol":r.SymbolKeyword||i.includes(a.symbol)||(i.push(a.symbol),n.push(a));break;case"TupleType":r.ObjectKeyword||n.push(a);break;case"TypeLiteral":0===a.propertySignatures.length&&0===a.indexSignatures.length?r["{}"]||(r["{}"]=a,n.push(a)):r.ObjectKeyword||n.push(a);break;default:n.push(a)}return n};class at{types;annotations;static make=(e,t)=>{const n=[],r=new Set;for(let i=0;i<e.length;i++){const t=e[i];t===ue||r.has(t)||(r.add(t),n.push(t))}return at.union(n,t)};static members=(e,t)=>at.union((e=>e.filter((e=>!(e===ue))))(e),t);static unify=(e,t)=>at.union(it(rt(e)),t);static union=(e,t)=>ot(e)?new at(e,t):1===e.length?e[0]:ue;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return o.getOrElse(hn(this),(()=>this.types.map(String).join(" | ")))}toJSON(){return{_tag:this._tag,types:this.types.map((e=>e.toJSON())),annotations:Yt(this.annotations)}}}const st=(e,t)=>e.map(t),ot=e=>e.length>1,ct=Y("Union"),lt=(0,a.globalValue)(Symbol.for("@effect/schema/AST/toJSONMemoMap"),(()=>new WeakMap));class ut{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=d.memoizeThunk(e)}toString(){return hn(this).pipe(o.orElse((()=>o.flatMap(o.liftThrowable(this.f)(),(e=>hn(e))))),o.getOrElse((()=>"<suspended schema>")))}toJSON(){const e=this.f();let t=lt.get(e);return t||(lt.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:Yt(this.annotations)},lt.set(e,t),t)}}const ft=Y("Suspend");class dt{from;filter;annotations;_tag="Refinement";constructor(e,t,n={}){this.from=e,this.filter=t,this.annotations=n}toString(){return o.getOrElse(hn(this),(()=>`{ ${this.from} | filter }`))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Yt(this.annotations)}}}const pt=Y("Refinement"),ht={};class mt{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,n,r={}){this.from=e,this.to=t,this.transformation=n,this.annotations=r}toString(){return o.getOrElse(hn(this),(()=>`(${String(this.from)} <-> ${String(this.to)})`))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Yt(this.annotations)}}}const gt=Y("Transformation");class yt{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}const bt=e=>t=>t._tag===e,St=bt("FinalTransformation");class vt{_tag="ComposeTransformation"}const wt=new vt,Et=bt("ComposeTransformation");class _t{from;to;decode;encode;constructor(e,t,n,r){this.from=e,this.to=t,this.decode=n,this.encode=r}}const kt=e=>e.decode===i.identity&&e.encode===i.identity;class xt{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const t={},n={};for(const r of e){const e=r.from;if(t[e])throw new Error(f.getASTDuplicatePropertySignatureTransformationErrorMessage(e));t[e]=!0;const i=r.to;if(n[i])throw new Error(f.getASTDuplicatePropertySignatureTransformationErrorMessage(i));n[i]=!0}}}const It=bt("TypeLiteralTransformation"),Tt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);return n.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),n)},Ot=e=>at.unify(un(e)),At=e=>{let t=`^${u.escape(e.head)}`;for(const n of e.spans)ve(n.type)?t+=".*":_e(n.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=u.escape(n.literal);return t+="$",new RegExp(t)},Nt=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return Nt(t.value);break}case"TypeLiteral":return e.propertySignatures.slice();case"Suspend":return Nt(e.f())}return Rt(e).map((t=>Ct(e,t)))},Mt=e=>{switch(e._tag){case"TupleType":{let t=!1,n=[];for(const r of e.elements)r.isOptional&&(t=!0),n.push(r.type);return t&&n.push(ie),n=n.concat($e(e.rest)),at.make(n)}case"Refinement":return Mt(e.from);case"Union":return at.make(e.types.map(Mt));case"Suspend":return Mt(e.f())}throw new Error(f.getASTUnsupportedSchema(e))},Ct=(e,t)=>{switch(e._tag){case"Declaration":{const n=V(e);if(o.isSome(n))return Ct(n.value,t);break}case"TypeLiteral":{const n=r.findFirst(e.propertySignatures,(e=>e.name===t));if(o.isSome(n))return n.value;if(l.isString(t))for(const r of e.indexSignatures){const e=an(r.parameter);switch(e._tag){case"TemplateLiteral":if(At(e).test(t))return new He(t,r.type,!1,!0);break;case"StringKeyword":return new He(t,r.type,!1,!0)}}else if(l.isSymbol(t))for(const r of e.indexSignatures){const e=an(r.parameter);if(Ce(e))return new He(t,r.type,!1,!0)}break}case"Union":return new He(t,at.make(e.types.map((e=>Ct(e,t).type))),!1,!0);case"Suspend":return Ct(e.f(),t)}return new He(t,ue,!1,!0)},Rt=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return Rt(t.value);break}case"TypeLiteral":return e.propertySignatures.map((e=>e.name));case"Suspend":return Rt(e.f());case"Union":return e.types.slice(1).reduce(((e,t)=>r.intersection(e,Rt(t))),Rt(e.types[0]));case"Transformation":return Rt(e.to)}return[]},Ft=(e,t)=>{const n=[],r=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new Ye(e,t,!0));break;case"Literal":if(!l.isString(e.literal)&&!l.isNumber(e.literal))throw new Error(f.getASTUnsupportedLiteral(e.literal));n.push(new He(e.literal,t,!1,!0));break;case"Enums":for(const[r,i]of e.enums)n.push(new He(i,t,!1,!0));break;case"UniqueSymbol":n.push(new He(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw new Error(f.getASTUnsupportedKeySchema(e))}};return i(e),{propertySignatures:n,indexSignatures:r}},Lt=(e,t)=>{if(gt(e))switch(e.transformation._tag){case"ComposeTransformation":return new mt(Lt(e.from,t),Lt(e.to,t),wt);case"TypeLiteralTransformation":{const n=[],i=[];for(const r of t){const t=e.transformation.propertySignatureTransformations.find((e=>e.to===r));t?(n.push(t),i.push(t.from)):i.push(r)}return r.isNonEmptyReadonlyArray(n)?new mt(Lt(e.from,i),Lt(e.to,t),new xt(n)):Lt(e.from,i)}case"FinalTransformation":{const n=V(e);if(o.isSome(n))return Lt(n.value,t);throw new Error(f.getASTUnsupportedSchema(e))}}return new Ze(t.map((t=>Ct(e,t))),[])},Pt=(e,t)=>Lt(e,Rt(e).filter((e=>!t.includes(e)))),Dt=e=>at.make([e,ie]),Ut=(e,t)=>{const n=!0===t?.exact;switch(e._tag){case"TupleType":return new Ve(e.elements.map((e=>new ze(n?e.type:Dt(e.type),!0))),r.match(e.rest,{onEmpty:()=>e.rest,onNonEmpty:e=>[new Be(at.make([...$e(e),ie]))]}),e.isReadonly);case"TypeLiteral":return new Ze(e.propertySignatures.map((e=>new He(e.name,n?e.type:Dt(e.type),!0,e.isReadonly,e.annotations))),e.indexSignatures.map((e=>new Ye(e.parameter,Dt(e.type),e.isReadonly))));case"Union":return at.make(e.types.map((e=>Ut(e,t))));case"Suspend":return new ut((()=>Ut(e.f(),t)));case"Declaration":case"Refinement":throw new Error(f.getASTUnsupportedSchema(e));case"Transformation":if(It(e.transformation)&&e.transformation.propertySignatureTransformations.every(kt))return new mt(Ut(e.from,t),Ut(e.to,t),e.transformation);throw new Error(f.getASTUnsupportedSchema(e))}return e},jt=e=>{switch(e._tag){case"TupleType":return new Ve(e.elements.map((e=>new ze(e.type,!1))),e.rest,e.isReadonly);case"TypeLiteral":return new Ze(e.propertySignatures.map((e=>new He(e.name,e.type,!1,e.isReadonly,e.annotations))),e.indexSignatures);case"Union":return at.make(e.types.map((e=>jt(e))));case"Suspend":return new ut((()=>jt(e.f())));case"Declaration":case"Refinement":throw new Error(f.getASTUnsupportedSchema(e));case"Transformation":if(It(e.transformation)&&e.transformation.propertySignatureTransformations.every(kt))return new mt(jt(e.from),jt(e.to),e.transformation);throw new Error(f.getASTUnsupportedSchema(e))}return e},qt=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new Ve(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{const t=Gt(e.propertySignatures,(e=>!1===e.isReadonly?e:new He(e.name,e.type,e.isOptional,!1,e.annotations))),n=Gt(e.indexSignatures,(e=>!1===e.isReadonly?e:new Ye(e.parameter,e.type,!1)));return t===e.propertySignatures&&n===e.indexSignatures?e:new Ze(t,n,e.annotations)}case"Union":{const t=Gt(e.types,qt);return t===e.types?e:at.make(t,e.annotations)}case"Suspend":return new ut((()=>qt(e.f())),e.annotations);case"Refinement":{const t=qt(e.from);return t===e.from?e:new dt(t,e.filter,e.annotations)}case"Transformation":{const t=qt(e.from),n=qt(e.to);return t===e.from&&n===e.to?e:new mt(t,n,e.transformation,e.annotations)}}return e},Wt=e=>{const t=(n,r)=>e[n._tag](n,t,r);return t},Bt=e=>{switch(e._tag){case"Declaration":{const t=Gt(e.typeParameters,Bt);return t===e.typeParameters?e:new K(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=Gt(e.elements,(e=>{const t=Bt(e.type);return t===e.type?e:new ze(t,e.isOptional)})),n=$e(e.rest),r=Gt(n,Bt);return t===e.elements&&r===n?e:new Ve(t,r.map((e=>new Be(e))),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=Gt(e.propertySignatures,(e=>{const t=Bt(e.type);return t===e.type?e:new He(e.name,t,e.isOptional,e.isReadonly)})),n=Gt(e.indexSignatures,(e=>{const t=Bt(e.type);return t===e.type?e:new Ye(e.parameter,t,e.isReadonly)}));return t===e.propertySignatures&&n===e.indexSignatures?e:new Ze(t,n,e.annotations)}case"Union":{const t=Gt(e.types,Bt);return t===e.types?e:at.make(t,e.annotations)}case"Suspend":return new ut((()=>Bt(e.f())),e.annotations);case"Refinement":{const t=Bt(e.from);return t===e.from?e:new dt(t,e.filter,e.annotations)}case"Transformation":return Bt(e.to)}return e},zt=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(void 0===n&&(n={}),n[r]=t.annotations[r]);return n},$t=e=>o.orElse(H(e),(()=>L(e))),Vt=e=>o.match($t(e),{onNone:()=>{},onSome:e=>({[J]:e})});function Gt(e,t){let n=!1;const i=r.allocate(e.length);for(let r=0;r<e.length;r++){const a=e[r],s=t(a);s!==a&&(n=!0),i[r]=s}return n?i:e}const Jt=(e,t)=>{switch(e._tag){case"Declaration":{const n=Gt(e.typeParameters,(e=>Jt(e,t)));return n===e.typeParameters?e:new K(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=Gt(e.elements,(e=>{const n=Jt(e.type,t);return n===e.type?e:new ze(n,e.isOptional)})),r=$e(e.rest),i=Gt(r,(e=>Jt(e,t)));return n===e.elements&&i===r?e:new Ve(n,i.map((e=>new Be(e))),e.isReadonly,Vt(e))}case"TypeLiteral":{const n=Gt(e.propertySignatures,(e=>{const n=Jt(e.type,t);return n===e.type?e:new He(e.name,n,e.isOptional,e.isReadonly)})),r=Gt(e.indexSignatures,(e=>{const n=Jt(e.type,t);return n===e.type?e:new Ye(e.parameter,n,e.isReadonly)}));return n===e.propertySignatures&&r===e.indexSignatures?e:new Ze(n,r,Vt(e))}case"Union":{const n=Gt(e.types,(e=>Jt(e,t)));return n===e.types?e:at.make(n,Vt(e))}case"Suspend":return new ut((()=>Jt(e.f(),t)),Vt(e));case"Refinement":{const n=Jt(e.from,t);if(t){if(n===e.from)return e;if(!gt(e.from)){const t=G(e);if(o.isSome(t)&&!0===t.value)return new dt(n,e.filter)}}return n}case"Transformation":return Jt(e.from,t)}return e},Ht=e=>Jt(e,!1),Kt=e=>Jt(e,!0),Yt=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},Zt=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},Qt=r.sort(c.mapInput(s.Order,(e=>Zt(e.type)))),Xt=r.sort(c.mapInput(s.Order,(e=>{switch(an(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}}))),en=c.tuple(s.Order,s.Order,s.Order),tn=c.max(en),nn=[0,0,0],rn=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{const t=e.propertySignatures.length,n=e.indexSignatures.length;return t+n===0?[-4,0,0]:[4,t,n]}case"Declaration":{const t=V(e);if(o.isSome(t)){const[e,n,r]=rn(t.value);return[6,n,r]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return e.types.map(rn).reduce(tn,nn);case"Refinement":{const[t,n,r]=rn(e.from);return[t+1,n,r]}case"Transformation":return rn(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return nn}},an=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return an(e.from)}},sn=r.getEquivalence(((e,t)=>e.type._tag===t.type._tag&&e.literal===t.literal)),on=r.getEquivalence(((e,t)=>t[0]===e[0]&&t[1]===e[1])),cn=(e,t)=>{switch(e._tag){case"Literal":return X(t)&&t.literal===e.literal;case"UniqueSymbol":return ne(t)&&t.symbol===e.symbol;case"UndefinedKeyword":case"VoidKeyword":case"NeverKeyword":case"UnknownKeyword":case"AnyKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":case"ObjectKeyword":return t._tag===e._tag;case"TemplateLiteral":return We(t)&&t.head===e.head&&sn(t.spans,e.spans);case"Enums":return De(t)&&on(t.enums,e.enums);case"Refinement":case"TupleType":case"TypeLiteral":case"Union":case"Suspend":case"Transformation":case"Declaration":return e===t}},ln=r.intersectionWith(cn),un=e=>{switch(e._tag){case"Declaration":{const t=V(e);if(o.isSome(t))return un(t.value);break}case"TypeLiteral":return e.propertySignatures.map((e=>l.isSymbol(e.name)?new te(e.name):new Q(e.name))).concat(e.indexSignatures.map((e=>an(e.parameter))));case"Suspend":return un(e.f());case"Union":return e.types.slice(1).reduce(((e,t)=>ln(e,un(t))),un(e.types[0]));case"Transformation":return un(e.to)}throw new Error(f.getASTUnsupportedSchema(e))},fn=(e,t)=>new mt(e,t,wt),dn=(e,t)=>{switch(e._tag){case"TypeLiteral":{const n=[];for(const e of d.ownKeys(t)){const r=t[e];void 0!==r&&n.push(new _t(e,r,i.identity,i.identity))}return 0===n.length?e:new mt(e,new Ze(e.propertySignatures.map((e=>{const n=t[e.name];return new He(void 0===n?e.name:n,Bt(e.type),e.isOptional,e.isReadonly,e.annotations)})),e.indexSignatures),new xt(n))}case"Union":return at.make(e.types.map((e=>dn(e,t))));case"Suspend":return new ut((()=>dn(e.f(),t)));case"Transformation":return fn(e,dn(Bt(e),t))}throw new Error(f.getASTUnsupportedRenameSchema(e))},pn=e=>o.getOrElse(hn(e),(()=>e._tag)),hn=e=>L(e).pipe(o.orElse((()=>F(e))),o.orElse((()=>P(e))))},919662:(e,t,n)=>{n.r(t),n.d(t,{Composite:()=>b,Forbidden:()=>_,Missing:()=>y,ParseError:()=>I,ParseErrorTypeId:()=>k,Pointer:()=>m,Refinement:()=>v,Transformation:()=>w,Type:()=>E,Unexpected:()=>g,asserts:()=>ue,decode:()=>re,decodeEither:()=>te,decodeOption:()=>ee,decodePromise:()=>ne,decodeSync:()=>X,decodeUnknown:()=>J,decodeUnknownEither:()=>V,decodeUnknownOption:()=>$,decodeUnknownPromise:()=>G,decodeUnknownSync:()=>z,eitherOrUndefined:()=>L,encode:()=>me,encodeEither:()=>pe,encodeOption:()=>de,encodePromise:()=>he,encodeSync:()=>fe,encodeUnknown:()=>Q,encodeUnknownEither:()=>Y,encodeUnknownOption:()=>K,encodeUnknownPromise:()=>Z,encodeUnknownSync:()=>H,fail:()=>A,flatMap:()=>C,fromOption:()=>M,getFinalTransformation:()=>Ae,getLiterals:()=>_e,getSearchTree:()=>ke,is:()=>le,isComposite:()=>S,isParseError:()=>x,map:()=>R,mapBoth:()=>P,mapError:()=>F,mergeInternalOptions:()=>U,orElse:()=>D,parseError:()=>T,succeed:()=>O,try:()=>N,validate:()=>ce,validateEither:()=>se,validateOption:()=>ae,validatePromise:()=>oe,validateSync:()=>ie});var r=n(342072),i=n(338358),a=n(837875),s=n(411123),o=n(154258),c=n(744628),l=n(58536),u=n(504491),f=n(125105),d=n(674232),p=n(464178),h=n(660926);class m{path;actual;issue;_tag="Pointer";constructor(e,t,n){this.path=e,this.actual=t,this.issue=n}}class g{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class y{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class b{ast;actual;issues;output;_tag="Composite";constructor(e,t,n,r){this.ast=e,this.actual=t,this.issues=n,this.output=r}}const S=e=>f.hasProperty(e,"_tag");class v{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,n,r){this.ast=e,this.actual=t,this.kind=n,this.issue=r}}class w{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,n,r){this.ast=e,this.actual=t,this.kind=n,this.issue=r}}class E{ast;actual;message;_tag="Type";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}class _{ast;actual;message;_tag="Forbidden";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}const k=Symbol.for("@effect/schema/ParseErrorTypeId"),x=e=>f.hasProperty(e,k);class I extends((0,i.TaggedError)("ParseError")){[k]=k;get message(){return this.toString()}toString(){return h.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[l.NodeInspectSymbol](){return this.toJSON()}}const T=e=>new I({issue:e}),O=s.right,A=s.left,N=s.try,M=s.fromOption,C=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?n:"Right"===n._tag?t(n.right):a.flatMap(e,t)})),R=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?n:"Right"===n._tag?s.right(t(n.right)):a.map(e,t)})),F=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?s.left(t(n.left)):"Right"===n._tag?n:a.mapError(e,t)})),L=e=>{const t=e;if("Left"===t._tag||"Right"===t._tag)return t},P=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?s.left(t.onFailure(n.left)):"Right"===n._tag?s.right(t.onSuccess(n.right)):a.mapBoth(e,t)})),D=(0,o.dual)(2,((e,t)=>{const n=e;return"Left"===n._tag?t(n.left):"Right"===n._tag?n:a.catchAll(e,t)})),U=(e,t)=>void 0===t||f.isNumber(t)?e:void 0===e?t:{...e,...t},j=(e,t,n)=>{const r=be(e,t);return(e,t)=>r(e,U(n,t))},q=(e,t,n)=>{const r=j(e,t,n);return(e,t)=>s.getOrThrowWith(r(e,t),T)},W=(e,t,n)=>{const r=j(e,t,n);return(e,t)=>u.getRight(r(e,t))},B=(e,t,n)=>{const r=be(e,t);return(e,t)=>r(e,{...U(n,t),isEffectAllowed:!0})},z=(e,t)=>q(e.ast,!0,t),$=(e,t)=>W(e.ast,!0,t),V=(e,t)=>j(e.ast,!0,t),G=(e,t)=>{const n=J(e,t);return(e,t)=>a.runPromise(n(e,t))},J=(e,t)=>B(e.ast,!0,t),H=(e,t)=>q(e.ast,!1,t),K=(e,t)=>W(e.ast,!1,t),Y=(e,t)=>j(e.ast,!1,t),Z=(e,t)=>{const n=Q(e,t);return(e,t)=>a.runPromise(n(e,t))},Q=(e,t)=>B(e.ast,!1,t),X=z,ee=$,te=V,ne=G,re=J,ie=(e,t)=>q(d.typeAST(e.ast),!0,t),ae=(e,t)=>W(d.typeAST(e.ast),!0,t),se=(e,t)=>j(d.typeAST(e.ast),!0,t),oe=(e,t)=>{const n=ce(e,t);return(e,t)=>a.runPromise(n(e,t))},ce=(e,t)=>B(d.typeAST(e.ast),!0,t),le=(e,t)=>{const n=be(d.typeAST(e.ast),!0);return(e,r)=>s.isRight(n(e,{exact:!0,...U(t,r)}))},ue=(e,t)=>{const n=be(d.typeAST(e.ast),!0);return(e,r)=>{const i=n(e,{exact:!0,...U(t,r)});if(s.isLeft(i))throw T(i.left)}},fe=H,de=K,pe=Y,he=Z,me=Q,ge=(0,c.globalValue)(Symbol.for("@effect/schema/Parser/decodeMemoMap"),(()=>new WeakMap)),ye=(0,c.globalValue)(Symbol.for("@effect/schema/Parser/encodeMemoMap"),(()=>new WeakMap)),be=(e,t)=>{const n=t?ge:ye,r=n.get(e);if(r)return r;const i=we(e,t),a=d.getParseOptionsAnnotation(e),s=u.isSome(a)?(e,t)=>i(e,U(t,a.value)):i;return n.set(e,s),s},Se=e=>u.getOrUndefined(d.getConcurrencyAnnotation(e)),ve=e=>u.getOrUndefined(d.getBatchingAnnotation(e)),we=(e,t)=>{switch(e._tag){case"Refinement":if(t){const t=be(e.from,!0);return(n,r)=>Ie(C(F(t(n,r),(t=>new v(e,n,"From",t))),(t=>u.match(e.filter(t,r??d.defaultParseOption,e),{onNone:()=>s.right(t),onSome:t=>s.left(new v(e,n,"Predicate",t))}))),e,n,r)}{const t=be(d.typeAST(e),!0),n=be(xe(e.from),!1);return(r,i)=>Ie(C(t(r,i),(e=>n(e,i))),e,r,i)}case"Transformation":{const n=Ae(e.transformation,t),r=t?be(e.from,!0):be(e.to,!1),i=t?be(e.to,!0):be(e.from,!1);return(a,s)=>Ie(C(F(r(a,s),(n=>new w(e,a,t?"Encoded":"Type",n))),(r=>C(F(n(r,s??d.defaultParseOption,e),(t=>new w(e,a,"Transformation",t))),(n=>F(i(n,s),(n=>new w(e,a,t?"Type":"Encoded",n))))))),e,a,s)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,r)=>Ie(n(t,r??d.defaultParseOption,e),e,t,r)}case"Literal":return Ee(e,(t=>t===e.literal));case"UniqueSymbol":return Ee(e,(t=>t===e.symbol));case"UndefinedKeyword":case"VoidKeyword":return Ee(e,f.isUndefined);case"NeverKeyword":return Ee(e,f.isNever);case"UnknownKeyword":case"AnyKeyword":return s.right;case"StringKeyword":return Ee(e,f.isString);case"NumberKeyword":return Ee(e,f.isNumber);case"BooleanKeyword":return Ee(e,f.isBoolean);case"BigIntKeyword":return Ee(e,f.isBigInt);case"SymbolKeyword":return Ee(e,f.isSymbol);case"ObjectKeyword":return Ee(e,f.isObject);case"Enums":return Ee(e,(t=>e.enums.some((([e,n])=>n===t))));case"TemplateLiteral":{const t=d.getTemplateLiteralRegExp(e);return Ee(e,(e=>f.isString(e)&&t.test(e)))}case"TupleType":{const n=e.elements.map((e=>be(e.type,t))),i=e.rest.map((e=>be(e.type,t)));let o=e.elements.filter((e=>!e.isOptional));e.rest.length>0&&(o=o.concat(e.rest.slice(1)));const c=o.length,l=e.elements.length>0?e.elements.map(((e,t)=>t)).join(" | "):"never",u=Se(e),f=ve(e);return(t,d)=>{if(!r.isArray(t))return s.left(new E(e,t));const p="all"===d?.errors,h=[];let S=0;const v=[],w=t.length;for(let n=w;n<=c-1;n++){const r=new m(n,t,new y(o[n-w]));if(!p)return s.left(new b(e,t,r,v));h.push([S++,r])}if(0===e.rest.length)for(let n=e.elements.length;n<=w-1;n++){const r=new m(n,t,new g(t[n],`is unexpected, expected: ${l}`));if(!p)return s.left(new b(e,t,r,v));h.push([S++,r])}let _,k=0;for(;k<n.length;k++)if(w<k+1){if(e.elements[k].isOptional)continue}else{const r=(0,n[k])(t[k],d),i=L(r);if(i){if(s.isLeft(i)){const n=new m(k,t,i.left);if(p){h.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(v)))}v.push([S++,i.right])}else{const n=S++,i=k;_||(_=[]),_.push((({es:o,output:c})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const l=new m(i,t,r.left);return p?(o.push([n,l]),a.void):s.left(new b(e,t,l,Oe(c)))}return c.push([n,r.right]),a.void}))))}}if(r.isNonEmptyReadonlyArray(i)){const[n,...r]=i;for(;k<w-r.length;k++){const r=n(t[k],d),i=L(r);if(i){if(s.isLeft(i)){const n=new m(k,t,i.left);if(p){h.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(v)))}v.push([S++,i.right])}else{const n=S++,i=k;_||(_=[]),_.push((({es:o,output:c})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const l=new m(i,t,r.left);return p?(o.push([n,l]),a.void):s.left(new b(e,t,l,Oe(c)))}return c.push([n,r.right]),a.void}))))}}for(let i=0;i<r.length;i++)if(k+=i,!(w<k+1)){const n=r[i](t[k],d),o=L(n);if(o){if(s.isLeft(o)){const n=new m(k,t,o.left);if(p){h.push([S++,n]);continue}return s.left(new b(e,t,n,Oe(v)))}v.push([S++,o.right])}else{const r=S++,i=k;_||(_=[]),_.push((({es:o,output:c})=>a.flatMap(a.either(n),(n=>{if(s.isLeft(n)){const l=new m(i,t,n.left);return p?(o.push([r,l]),a.void):s.left(new b(e,t,l,Oe(c)))}return c.push([r,n.right]),a.void}))))}}}const x=({es:n,output:i})=>r.isNonEmptyArray(n)?s.left(new b(e,t,Oe(n),Oe(i))):s.right(Oe(i));if(_&&_.length>0){const e=_;return a.suspend((()=>{const t={es:r.copy(h),output:r.copy(v)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:u,batching:f,discard:!0}),(()=>x(t)))}))}return x({output:v,es:h})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return Ee(e,f.isNotNullable);const n=[],i={},o=[];for(const r of e.propertySignatures)n.push([be(r.type,t),r]),i[r.name]=null,o.push(r.name);const c=e.indexSignatures.map((e=>[be(e.parameter,t),be(e.type,t),e.parameter])),l=d.Union.make(e.indexSignatures.map((e=>e.parameter)).concat(o.map((e=>f.isSymbol(e)?new d.UniqueSymbol(e):new d.Literal(e))))),u=be(l,t),h=Se(e),S=ve(e);return(t,d)=>{if(!f.isRecord(t))return s.left(new E(e,t));const v="all"===d?.errors,w=[];let _=0;const k="error"===d?.onExcessProperty,x={};let I,T;if(k||"preserve"===d?.onExcessProperty){I=p.ownKeys(t);for(const n of I){const r=L(u(n,d));if(s.isLeft(r)){if(k){const r=new m(n,t,new g(t[n],`is unexpected, expected: ${String(l)}`));if(v){w.push([_++,r]);continue}return s.left(new b(e,t,r,x))}x[n]=t[n]}}}const O=!0===d?.exact;for(let r=0;r<n.length;r++){const i=n[r][1],o=i.name,c=Object.prototype.hasOwnProperty.call(t,o);if(!c){if(i.isOptional)continue;if(O){const n=new m(o,t,new y(i));if(v){w.push([_++,n]);continue}return s.left(new b(e,t,n,x))}}const l=(0,n[r][0])(t[o],d),u=L(l);if(u){if(s.isLeft(u)){const n=new m(o,t,c?u.left:new y(i));if(v){w.push([_++,n]);continue}return s.left(new b(e,t,n,x))}x[o]=u.right}else{const n=_++,r=o;T||(T=[]),T.push((({es:o,output:u})=>a.flatMap(a.either(l),(l=>{if(s.isLeft(l)){const f=new m(r,t,c?l.left:new y(i));return v?(o.push([n,f]),a.void):s.left(new b(e,t,f,u))}return u[r]=l.right,a.void}))))}}for(let n=0;n<c.length;n++){const r=c[n],o=r[0],l=r[1],u=p.getKeysForIndexSignature(t,r[2]);for(const n of u){const r=L(o(n,d));if(r&&s.isRight(r)){const r=l(t[n],d),o=L(r);if(o){if(s.isLeft(o)){const r=new m(n,t,o.left);if(v){w.push([_++,r]);continue}return s.left(new b(e,t,r,x))}Object.prototype.hasOwnProperty.call(i,n)||(x[n]=o.right)}else{const o=_++,c=n;T||(T=[]),T.push((({es:l,output:u})=>a.flatMap(a.either(r),(r=>{if(s.isLeft(r)){const n=new m(c,t,r.left);return v?(l.push([o,n]),a.void):s.left(new b(e,t,n,u))}return Object.prototype.hasOwnProperty.call(i,n)||(u[n]=r.right),a.void}))))}}}}const A=({es:n,output:i})=>{if(r.isNonEmptyArray(n))return s.left(new b(e,t,Oe(n),i));if("original"===d?.propertyOrder){const e=I||p.ownKeys(t);for(const t of o)-1===e.indexOf(t)&&e.push(t);const n={};for(const t of e)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t]);return s.right(n)}return s.right(i)};if(T&&T.length>0){const e=T;return a.suspend((()=>{const t={es:r.copy(w),output:Object.assign({},x)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:h,batching:S,discard:!0}),(()=>A(t)))}))}return A({es:w,output:x})}}case"Union":{const n=ke(e.types,t),i=p.ownKeys(n.keys),o=i.length,c=new Map;for(let r=0;r<e.types.length;r++)c.set(e.types[r],be(e.types[r],t));const l=Se(e)??1,u=ve(e);return(t,p)=>{const h=[];let g,S=0,v=[];if(o>0)if(f.isRecord(t))for(let e=0;e<o;e++){const r=i[e],a=n.keys[r].buckets;if(Object.prototype.hasOwnProperty.call(t,r)){const e=String(t[r]);if(Object.prototype.hasOwnProperty.call(a,e))v=v.concat(a[e]);else{const e=d.Union.make(n.keys[r].literals);h.push([S++,new b(new d.TypeLiteral([new d.PropertySignature(r,e,!1,!0)],[]),t,new m(r,t,new E(e,t[r])))])}}else{const e=d.Union.make(n.keys[r].literals),i=new d.PropertySignature(r,e,!1,!0);h.push([S++,new b(new d.TypeLiteral([i],[]),t,new m(r,t,new y(i)))])}}else h.push([S++,new E(e,t)]);n.otherwise.length>0&&(v=v.concat(n.otherwise));for(let e=0;e<v.length;e++){const n=v[e],r=c.get(n)(t,p),i=g&&0!==g.length?void 0:L(r);if(i){if(s.isRight(i))return s.right(i.right);h.push([S++,i.left])}else{const e=S++;g||(g=[]),g.push((t=>a.suspend((()=>"finalResult"in t?a.void:a.flatMap(a.either(r),(n=>(s.isRight(n)?t.finalResult=s.right(n.right):t.es.push([e,n.left]),a.void)))))))}}const w=n=>r.isNonEmptyArray(n)?1===n.length&&"Type"===n[0][1]._tag?s.left(n[0][1]):s.left(new b(e,t,Oe(n))):s.left(new E(e,t));if(g&&g.length>0){const e=g;return a.suspend((()=>{const t={es:r.copy(h)};return a.flatMap(a.forEach(e,(e=>e(t)),{concurrency:l,batching:u,discard:!0}),(()=>"finalResult"in t?t.finalResult:w(t.es)))}))}return w(h)}}case"Suspend":{const n=p.memoizeThunk((()=>be(d.annotations(e.f(),e.annotations),t)));return(e,t)=>n()(e,t)}}},Ee=(e,t)=>n=>t(n)?s.right(n):s.left(new E(e,n)),_e=(e,t)=>{switch(e._tag){case"Declaration":{const n=d.getSurrogateAnnotation(e);if(u.isSome(n))return _e(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const i=e.propertySignatures[r],a=t?d.encodedAST(i.type):d.typeAST(i.type);d.isLiteral(a)&&!i.isOptional&&n.push([i.name,a])}return n}case"Refinement":return _e(e.from,t);case"Suspend":return _e(e.f(),t);case"Transformation":return _e(t?e.from:e.to,t)}return[]},ke=(e,t)=>{const n={},r=[];for(let i=0;i<e.length;i++){const a=e[i],s=_e(a,t);if(s.length>0)for(let e=0;e<s.length;e++){const[t,r]=s[e],i=String(r.literal);n[t]=n[t]||{buckets:{},literals:[]};const o=n[t].buckets;if(!Object.prototype.hasOwnProperty.call(o,i)){o[i]=[a],n[t].literals.push(r);break}e<s.length-1||(o[i].push(a),n[t].literals.push(r))}else r.push(a)}return{keys:n,otherwise:r}},xe=e=>d.isRefinement(e)?xe(e.from):e,Ie=(e,t,n,r)=>{const i=L(e);if(i)return i;if(!0===r?.isEffectAllowed)return e;try{return a.runSync(a.either(e))}catch(o){return s.left(new _(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},Te=([e],[t])=>e>t?1:e<t?-1:0;function Oe(e){return e.sort(Te).map((e=>e[1]))}const Ae=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return s.right;case"TypeLiteralTransformation":return n=>{let r=s.right(n);for(const i of e.propertySignatureTransformations){const[e,n]=t?[i.from,i.to]:[i.to,i.from],a=t?i.decode:i.encode,s=t=>{const r=a(Object.prototype.hasOwnProperty.call(t,e)?u.some(t[e]):u.none());return delete t[e],u.isSome(r)&&(t[n]=r.value),t};r=R(r,s)}return r}}}},973043:(e,t,n)=>{n.r(t),n.d(t,{Any:()=>nm,Array:()=>wm,Base64:()=>Qb,Base64Url:()=>Xb,BetweenBigDecimalTypeId:()=>Cv,BetweenBigIntTypeId:()=>fb,BetweenDurationTypeId:()=>Jb,BetweenTypeId:()=>Ly,BigDecimal:()=>uv,BigDecimalFromNumber:()=>fv,BigDecimalFromSelf:()=>lv,BigInt:()=>bb,BigIntFromNumber:()=>Tb,BigIntFromSelf:()=>rm,Boolean:()=>om,BooleanFromUnknown:()=>rE,BrandTypeId:()=>Jh,Capitalize:()=>oy,Capitalized:()=>Hg,CapitalizedTypeId:()=>Gg,Cause:()=>Tw,CauseDefectUnknown:()=>Iw,CauseFromSelf:()=>_w,Char:()=>ry,Chunk:()=>jv,ChunkFromSelf:()=>Uv,Class:()=>tw,Config:()=>iE,Data:()=>Yv,DataFromSelf:()=>Kv,Date:()=>mS,DateFromNumber:()=>gS,DateFromSelf:()=>dS,DateFromString:()=>hS,Duration:()=>Db,DurationFromMillis:()=>Lb,DurationFromNanos:()=>Fb,DurationFromSelf:()=>Rb,Either:()=>jS,EitherFromSelf:()=>PS,EitherFromUnion:()=>qS,EndsWithTypeId:()=>jg,Enums:()=>Wh,Exit:()=>Fw,ExitFromSelf:()=>Rw,FiberId:()=>gw,FiberIdFromSelf:()=>pw,Finite:()=>Gy,FiniteTypeId:()=>wy,FromPropertySignature:()=>Im,GreaterThanBigDecimalTypeId:()=>dv,GreaterThanBigIntTypeId:()=>rb,GreaterThanDurationTypeId:()=>zb,GreaterThanOrEqualToBigDecimalTypeId:()=>hv,GreaterThanOrEqualToBigIntTypeId:()=>ab,GreaterThanOrEqualToDurationTypeId:()=>Vb,GreaterThanOrEqualToTypeId:()=>xy,GreaterThanTypeId:()=>_y,HashMap:()=>Gw,HashMapFromSelf:()=>Vw,HashSet:()=>qw,HashSetFromSelf:()=>jw,Hex:()=>eS,IncludesTypeId:()=>Wg,InstanceOfTypeId:()=>Kh,Int:()=>Jy,IntTypeId:()=>Ay,ItemsCountTypeId:()=>aS,JsonNumber:()=>eb,JsonNumberTypeId:()=>Xy,LengthTypeId:()=>ty,LessThanBigDecimalTypeId:()=>gv,LessThanBigIntTypeId:()=>ob,LessThanDurationTypeId:()=>jb,LessThanOrEqualToBigDecimalTypeId:()=>bv,LessThanOrEqualToBigIntTypeId:()=>lb,LessThanOrEqualToDurationTypeId:()=>Wb,LessThanOrEqualToTypeId:()=>Ry,LessThanTypeId:()=>My,List:()=>Qw,ListFromSelf:()=>Zw,Literal:()=>Dh,Lowercase:()=>ay,Lowercased:()=>Vg,LowercasedTypeId:()=>zg,Map:()=>KS,MapFromRecord:()=>ZS,MapFromSelf:()=>JS,MaxItemsTypeId:()=>rS,MaxLengthTypeId:()=>Mg,MinItemsTypeId:()=>tS,MinLengthTypeId:()=>Rg,MultipleOfTypeId:()=>Ty,Negative:()=>Yy,NegativeBigDecimalFromSelf:()=>Ov,NegativeBigDecimalTypeId:()=>Iv,NegativeBigInt:()=>Eb,NegativeBigIntFromSelf:()=>wb,Never:()=>em,NonEmpty:()=>hy,NonEmptyArray:()=>_m,NonEmptyChunk:()=>$v,NonEmptyChunkFromSelf:()=>zv,NonNaN:()=>Hy,NonNaNTypeId:()=>Dy,NonNegative:()=>Qy,NonNegativeBigDecimalFromSelf:()=>xv,NonNegativeBigDecimalTypeId:()=>_v,NonNegativeBigInt:()=>Ib,NonNegativeBigIntFromSelf:()=>xb,NonPositive:()=>Zy,NonPositiveBigDecimalFromSelf:()=>Mv,NonPositiveBigDecimalTypeId:()=>Av,NonPositiveBigInt:()=>kb,NonPositiveBigIntFromSelf:()=>_b,Not:()=>tb,Null:()=>Xh,NullOr:()=>fm,NullishOr:()=>pm,Number:()=>sm,NumberFromString:()=>Vy,Object:()=>cm,Option:()=>IS,OptionFromNullOr:()=>TS,OptionFromNullishOr:()=>OS,OptionFromSelf:()=>_S,OptionFromUndefinedOr:()=>AS,PatternTypeId:()=>Lg,Positive:()=>Ky,PositiveBigDecimalFromSelf:()=>Ev,PositiveBigDecimalTypeId:()=>vv,PositiveBigInt:()=>vb,PositiveBigIntFromSelf:()=>Sb,PropertySignatureDeclaration:()=>xm,PropertySignatureTransformation:()=>Om,PropertySignatureTypeId:()=>Nm,ReadonlyMap:()=>HS,ReadonlyMapFromRecord:()=>YS,ReadonlyMapFromSelf:()=>GS,ReadonlySet:()=>av,ReadonlySetFromSelf:()=>rv,Record:()=>Zm,Redacted:()=>Cb,RedactedFromSelf:()=>Mb,Set:()=>sv,SetFromSelf:()=>iv,SortedSet:()=>nE,SortedSetFromSelf:()=>tE,StartsWithTypeId:()=>Dg,String:()=>am,Struct:()=>Jm,Symbol:()=>nb,SymbolFromSelf:()=>im,TaggedClass:()=>rw,TaggedError:()=>iw,TaggedRequest:()=>aw,TaggedStruct:()=>Km,TemplateLiteral:()=>Bh,ToPropertySignature:()=>Tm,Trim:()=>uy,Trimmed:()=>ly,TrimmedTypeId:()=>Ag,Tuple:()=>Sm,TypeId:()=>uh,ULID:()=>vy,ULIDTypeId:()=>by,UUID:()=>yy,UUIDTypeId:()=>my,Uint8Array:()=>Yb,Uint8ArrayFromSelf:()=>Kb,Uncapitalize:()=>cy,Uncapitalized:()=>Zg,UncapitalizedTypeId:()=>Kg,Undefined:()=>Zh,UndefinedOr:()=>dm,Union:()=>um,UniqueSymbolFromSelf:()=>jh,Unknown:()=>tm,Uppercase:()=>sy,Uppercased:()=>ey,UppercasedTypeId:()=>Qg,ValidDateFromSelf:()=>pS,ValidDateTypeId:()=>uS,Void:()=>Qh,annotations:()=>Tg,asSchema:()=>mh,asserts:()=>nh.asserts,attachPropertySignature:()=>Ig,between:()=>Py,betweenBigDecimal:()=>Rv,betweenBigInt:()=>db,betweenDuration:()=>Hb,brand:()=>ng,capitalized:()=>Jg,clamp:()=>zy,clampBigDecimal:()=>Fv,clampBigInt:()=>yb,clampDuration:()=>Ub,compose:()=>pg,declare:()=>Gh,decode:()=>Ah,decodeEither:()=>Nh,decodeOption:()=>nh.decodeOption,decodePromise:()=>Mh,decodeSync:()=>nh.decodeSync,decodeUnknown:()=>Ih,decodeUnknownEither:()=>Th,decodeUnknownOption:()=>nh.decodeUnknownOption,decodeUnknownPromise:()=>Oh,decodeUnknownSync:()=>nh.decodeUnknownSync,element:()=>mm,encode:()=>_h,encodeEither:()=>kh,encodeOption:()=>nh.encodeOption,encodePromise:()=>xh,encodeSync:()=>nh.encodeSync,encodeUnknown:()=>vh,encodeUnknownEither:()=>wh,encodeUnknownOption:()=>nh.encodeUnknownOption,encodeUnknownPromise:()=>Eh,encodeUnknownSync:()=>nh.encodeUnknownSync,encodedBoundSchema:()=>bh,encodedSchema:()=>yh,endsWith:()=>qg,extend:()=>dg,filter:()=>Sg,filterEffect:()=>vg,finite:()=>Ey,format:()=>gh,fromBrand:()=>Hh,fromKey:()=>jm,getClassTag:()=>nw,getNumberIndexedAccess:()=>oS,greaterThan:()=>ky,greaterThanBigDecimal:()=>pv,greaterThanBigInt:()=>ib,greaterThanDuration:()=>$b,greaterThanOrEqualTo:()=>Iy,greaterThanOrEqualToBigDecimal:()=>mv,greaterThanOrEqualToBigInt:()=>sb,greaterThanOrEqualToDuration:()=>Gb,head:()=>cS,headOrElse:()=>lS,includes:()=>Bg,instanceOf:()=>Yh,int:()=>Ny,is:()=>nh.is,isSchema:()=>Lh,itemsCount:()=>sS,keyof:()=>hm,length:()=>ny,lessThan:()=>Cy,lessThanBigDecimal:()=>yv,lessThanBigInt:()=>cb,lessThanDuration:()=>qb,lessThanOrEqualTo:()=>Fy,lessThanOrEqualToBigDecimal:()=>Sv,lessThanOrEqualToBigInt:()=>ub,lessThanOrEqualToDuration:()=>Bb,lowercased:()=>$g,make:()=>fh,makePropertySignature:()=>Cm,maxItems:()=>iS,maxLength:()=>Cg,minItems:()=>nS,minLength:()=>Fg,multipleOf:()=>Oy,mutable:()=>ag,negative:()=>qy,negativeBigDecimal:()=>Tv,negativeBigInt:()=>hb,nonEmpty:()=>iy,nonNaN:()=>Uy,nonNegative:()=>By,nonNegativeBigDecimal:()=>kv,nonNegativeBigInt:()=>mb,nonPositive:()=>Wy,nonPositiveBigDecimal:()=>Nv,nonPositiveBigInt:()=>gb,omit:()=>Xm,optional:()=>zm,optionalElement:()=>gm,optionalToOptional:()=>Bm,optionalToRequired:()=>qm,parseJson:()=>py,parseNumber:()=>$y,partial:()=>rg,pattern:()=>Pg,pick:()=>Qm,pickLiteral:()=>Uh,pluck:()=>eg,positive:()=>jy,positiveBigDecimal:()=>wv,positiveBigInt:()=>pb,propertySignature:()=>Fm,refineTypeId:()=>mg,rename:()=>Og,required:()=>ig,requiredToOptional:()=>Wm,split:()=>fy,startsWith:()=>Ug,suspend:()=>hg,tag:()=>Hm,transform:()=>_g,transformLiteral:()=>kg,transformLiterals:()=>xg,transformOrFail:()=>Eg,trimmed:()=>Ng,typeSchema:()=>Sh,uncapitalized:()=>Yg,uppercased:()=>Xg,validDate:()=>fS,validate:()=>Ch,validateEither:()=>Rh,validateOption:()=>nh.validateOption,validatePromise:()=>Fh,validateSync:()=>nh.validateSync,withConstructorDefault:()=>Lm,withDecodingDefault:()=>Dm,withDefaults:()=>Um});var r={};n.r(r),n.d(r,{__commitHash:()=>kr,__type:()=>Er,__version:()=>_r,congruential32:()=>Kn,generateN:()=>zn,mersenne:()=>Xn,skipN:()=>Vn,uniformArrayIntDistribution:()=>fr,uniformBigIntDistribution:()=>hr,uniformIntDistribution:()=>wr,unsafeGenerateN:()=>Bn,unsafeSkipN:()=>$n,unsafeUniformArrayIntDistribution:()=>ur,unsafeUniformBigIntDistribution:()=>pr,unsafeUniformIntDistribution:()=>vr,xoroshiro128plus:()=>rr,xorshift128plus:()=>tr});var i={};n.r(i),n.d(i,{Arbitrary:()=>Ye,ExecutionStatus:()=>si,PreconditionFailure:()=>Ue,Random:()=>ui,Stream:()=>Be,Value:()=>He,VerbosityLevel:()=>Ir,__commitHash:()=>Fp,__type:()=>Cp,__version:()=>Rp,anything:()=>lf,array:()=>Ea,ascii:()=>Ba,asciiString:()=>Cf,assert:()=>Oi,asyncDefaultReportMessage:()=>Ei,asyncModelRun:()=>Wd,asyncProperty:()=>jn,asyncStringify:()=>Xr,asyncToStringMethod:()=>Gr,base64:()=>Va,base64String:()=>Lf,bigInt:()=>Ia,bigInt64Array:()=>Zd,bigIntN:()=>Ta,bigUint:()=>Oa,bigUint64Array:()=>Qd,bigUintN:()=>Aa,boolean:()=>Ra,char:()=>Ja,char16bits:()=>Ha,check:()=>Ti,clone:()=>Ss,cloneIfNeeded:()=>Ge,cloneMethod:()=>$e,commands:()=>Fd,compareBooleanFunc:()=>fl,compareFunc:()=>pl,configureGlobal:()=>Cn,constant:()=>ss,constantFrom:()=>Pa,context:()=>cs,createDepthIdentifier:()=>ea,date:()=>hs,defaultReportMessage:()=>wi,dictionary:()=>Ds,domain:()=>_o,double:()=>Tc,emailAddress:()=>Ao,falsy:()=>Da,float:()=>nl,float32Array:()=>vu,float64Array:()=>_u,fullUnicode:()=>Qa,fullUnicodeString:()=>Qu,func:()=>gl,gen:()=>Li,getDepthContextFor:()=>Xi,hasAsyncToStringMethod:()=>Jr,hasCloneMethod:()=>Ve,hasToStringMethod:()=>Vr,hash:()=>al,hexa:()=>ts,hexaString:()=>Pl,infiniteStream:()=>Nf,int16Array:()=>Iu,int32Array:()=>Tu,int8Array:()=>Ou,integer:()=>Zi,ipV4:()=>Ol,ipV4Extended:()=>Cl,ipV6:()=>Xl,json:()=>ff,jsonValue:()=>uf,letrec:()=>nu,limitShrink:()=>Mp,lorem:()=>cu,mapToConstant:()=>Ys,maxSafeInteger:()=>Sl,maxSafeNat:()=>wl,memo:()=>uu,mixedCase:()=>yu,modelRun:()=>qd,nat:()=>Hs,noBias:()=>Na,noShrink:()=>sl,object:()=>of,oneof:()=>Gs,option:()=>so,pre:()=>je,property:()=>Wn,readConfigureGlobal:()=>Rn,record:()=>If,resetConfigureGlobal:()=>Fn,sample:()=>Ni,scheduledModelRun:()=>Bd,scheduler:()=>Kd,schedulerFor:()=>Yd,shuffledSubarray:()=>Vf,sparseArray:()=>Wu,statistics:()=>Mi,stream:()=>ze,string:()=>ef,string16bits:()=>jf,stringMatching:()=>Tp,stringOf:()=>po,stringify:()=>Zr,subarray:()=>$f,toStringMethod:()=>$r,tuple:()=>On,uint16Array:()=>Au,uint32Array:()=>Nu,uint8Array:()=>Mu,uint8ClampedArray:()=>Cu,ulid:()=>rd,unicode:()=>as,unicodeJson:()=>mf,unicodeJsonValue:()=>hf,unicodeString:()=>pf,uniqueArray:()=>Is,uuid:()=>ud,uuidV:()=>fd,webAuthority:()=>gd,webFragments:()=>bd,webPath:()=>_d,webQueryParameters:()=>kd,webSegment:()=>Sd,webUrl:()=>Ad});var a={};n.r(a),n.d(a,{Arbitrary:()=>Ye,ExecutionStatus:()=>si,PreconditionFailure:()=>Ue,Random:()=>ui,Stream:()=>Be,Value:()=>He,VerbosityLevel:()=>Ir,__commitHash:()=>Fp,__type:()=>Cp,__version:()=>Rp,anything:()=>lf,array:()=>Ea,ascii:()=>Ba,asciiString:()=>Cf,assert:()=>Oi,asyncDefaultReportMessage:()=>Ei,asyncModelRun:()=>Wd,asyncProperty:()=>jn,asyncStringify:()=>Xr,asyncToStringMethod:()=>Gr,base64:()=>Va,base64String:()=>Lf,bigInt:()=>Ia,bigInt64Array:()=>Zd,bigIntN:()=>Ta,bigUint:()=>Oa,bigUint64Array:()=>Qd,bigUintN:()=>Aa,boolean:()=>Ra,char:()=>Ja,char16bits:()=>Ha,check:()=>Ti,clone:()=>Ss,cloneIfNeeded:()=>Ge,cloneMethod:()=>$e,commands:()=>Fd,compareBooleanFunc:()=>fl,compareFunc:()=>pl,configureGlobal:()=>Cn,constant:()=>ss,constantFrom:()=>Pa,context:()=>cs,createDepthIdentifier:()=>ea,date:()=>hs,defaultReportMessage:()=>wi,dictionary:()=>Ds,domain:()=>_o,double:()=>Tc,emailAddress:()=>Ao,falsy:()=>Da,float:()=>nl,float32Array:()=>vu,float64Array:()=>_u,fullUnicode:()=>Qa,fullUnicodeString:()=>Qu,func:()=>gl,gen:()=>Li,getDepthContextFor:()=>Xi,hasAsyncToStringMethod:()=>Jr,hasCloneMethod:()=>Ve,hasToStringMethod:()=>Vr,hash:()=>al,hexa:()=>ts,hexaString:()=>Pl,infiniteStream:()=>Nf,int16Array:()=>Iu,int32Array:()=>Tu,int8Array:()=>Ou,integer:()=>Zi,ipV4:()=>Ol,ipV4Extended:()=>Cl,ipV6:()=>Xl,json:()=>ff,jsonValue:()=>uf,letrec:()=>nu,limitShrink:()=>Mp,lorem:()=>cu,mapToConstant:()=>Ys,maxSafeInteger:()=>Sl,maxSafeNat:()=>wl,memo:()=>uu,mixedCase:()=>yu,modelRun:()=>qd,nat:()=>Hs,noBias:()=>Na,noShrink:()=>sl,object:()=>of,oneof:()=>Gs,option:()=>so,pre:()=>je,property:()=>Wn,readConfigureGlobal:()=>Rn,record:()=>If,resetConfigureGlobal:()=>Fn,sample:()=>Ni,scheduledModelRun:()=>Bd,scheduler:()=>Kd,schedulerFor:()=>Yd,shuffledSubarray:()=>Vf,sparseArray:()=>Wu,statistics:()=>Mi,stream:()=>ze,string:()=>ef,string16bits:()=>jf,stringMatching:()=>Tp,stringOf:()=>po,stringify:()=>Zr,subarray:()=>$f,toStringMethod:()=>$r,tuple:()=>On,uint16Array:()=>Au,uint32Array:()=>Nu,uint8Array:()=>Mu,uint8ClampedArray:()=>Cu,ulid:()=>rd,unicode:()=>as,unicodeJson:()=>mf,unicodeJsonValue:()=>hf,unicodeString:()=>pf,uniqueArray:()=>Is,uuid:()=>ud,uuidV:()=>fd,webAuthority:()=>gd,webFragments:()=>bd,webPath:()=>_d,webQueryParameters:()=>kd,webSegment:()=>Sd,webUrl:()=>Ad});var s=n(342072),o=n(382300),c=n(84108),l=n(154258),u=n(353370),f=n(58536),d=n(504491),p=n(880308),h=n(709322),m=n(125105);const g=Symbol.for("effect/BigDecimal"),y={[g]:g,[u.symbol](){const e=k(this);return(0,l.pipe)(u.hash(e.value),u.combine(u.number(e.scale)),u.cached(this))},[o.symbol](e){return b(e)&&L(this,e)},toString(){return`BigDecimal(${D(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[f.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,h.pipeArguments)(this,arguments)}},b=e=>(0,m.hasProperty)(e,g),S=(e,t)=>{const n=Object.create(y);return n.value=e,n.scale=t,n},v=(e,t)=>{if(e!==w&&e%E===w)throw new RangeError("Value must be normalized");const n=S(e,t);return n.normalized=n,n},w=BigInt(0),E=BigInt(10),_=v(w,0),k=e=>{if(void 0===e.normalized)if(e.value===w)e.normalized=_;else{const t=`${e.value}`;let n=0;for(let e=t.length-1;e>=0&&"0"===t[e];e--)n++;0===n&&(e.normalized=e);const r=BigInt(t.substring(0,t.length-n)),i=e.scale-n;e.normalized=v(r,i)}return e.normalized},x=(e,t)=>t>e.scale?S(e.value*E**BigInt(t-e.scale),t):t<e.scale?S(e.value/E**BigInt(e.scale-t),t):e,I=p.make(((e,t)=>{const n=p.number(R(e),R(t));return 0!==n?n:e.scale>t.scale?p.bigint(e.value,x(t,e.scale).value):e.scale<t.scale?p.bigint(x(e,t.scale).value,t.value):p.bigint(e.value,t.value)})),T=p.lessThan(I),O=p.lessThanOrEqualTo(I),A=p.greaterThan(I),N=p.greaterThanOrEqualTo(I),M=p.between(I),C=p.clamp(I),R=e=>e.value===w?0:e.value<w?-1:1,F=c.make(((e,t)=>e.scale>t.scale?x(t,e.scale).value===e.value:e.scale<t.scale?x(e,t.scale).value===t.value:e.value===t.value)),L=(0,l.dual)(2,((e,t)=>F(e,t))),P=e=>{let t,n;const r=e.search(/\./);if(-1!==r){const i=e.slice(0,r),a=e.slice(r+1);t=`${i}${a}`,n=a.length}else t=e,n=0;return""===t?d.some(_):/^(?:\+|-)?\d+$/.test(t)?d.some(S(BigInt(t),n)):d.none()},D=e=>{const t=e.value<w,n=t?`${e.value}`.substring(1):`${e.value}`;let r,i;if(e.scale>=n.length)r="0",i="0".repeat(e.scale-n.length)+n;else{const t=n.length-e.scale;if(t>n.length){const e=t-n.length;r=`${n}${"0".repeat(e)}`,i=""}else i=n.slice(t),r=n.slice(0,t)}const a=""===i?r:`${r}.${i}`;return t?`-${a}`:a},U=(m.isBigInt,c.bigint,p.bigint),j=p.clamp(U);var q=n(893212),W=n(114471),B=n(889133),z=n(849063);z.ConfigErrorTypeId,z.And,z.Or,z.MissingData;const $=z.InvalidData;z.SourceUnavailable,z.Unsupported,z.isConfigError,z.isAnd,z.isOr,z.isInvalidData,z.isMissingData,z.isMissingDataOnly,z.isSourceUnavailable,z.isUnsupported,z.prefixed,z.reduceWithContext;var V=n(860118),G=n(411123),J=n(895868),H=(n(597081),n(130949)),K=n(995515),Y=n(502600);n(332570);const Z=Symbol.for("effect/Config"),Q={...K.CommitPrototype,[Z]:{_A:e=>e},commit(){return H.config(this)}},X=(0,l.dual)(2,((e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_MAP_OR_FAIL,n.original=e,n.mapOrFail=t,n})),ee=(0,l.dual)(2,((e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_NESTED,n.name=t,n.config=e,n})),te=(e,t)=>{const n=Object.create(Q);return n._tag=Y.OP_PRIMITIVE,n.description=e,n.parse=t,n},ne=e=>{const t=te("a text property",G.right);return void 0===e?t:ee(t,e)},re=X,ie=ne;var ae=n(338358),se=n(837875);const oe=Symbol.for("effect/Encoding/errors/Decode"),ce=(e,t)=>{const n={_tag:"DecodeException",[oe]:oe,input:e};return(0,m.isString)(t)&&(n.message=t),n},le=new TextEncoder,ue=e=>{const t=e.length;let n,r="";for(n=2;n<t;n+=3)r+=pe[e[n-2]>>2],r+=pe[(3&e[n-2])<<4|e[n-1]>>4],r+=pe[(15&e[n-1])<<2|e[n]>>6],r+=pe[63&e[n]];return n===t+1&&(r+=pe[e[n-2]>>2],r+=pe[(3&e[n-2])<<4],r+="=="),n===t&&(r+=pe[e[n-2]>>2],r+=pe[(3&e[n-2])<<4|e[n-1]>>4],r+=pe[(15&e[n-1])<<2],r+="="),r},fe=e=>{const t=e.length;if(t%4!==0)return G.left(ce(e,`Length must be a multiple of 4, but is ${t}`));const n=e.indexOf("=");if(-1!==n&&(n<t-2||n===t-2&&"="!==e[t-1]))return G.left(ce(e,"Found a '=' character, but it is not at the end"));try{const n=e.endsWith("==")?2:e.endsWith("=")?1:0,r=new Uint8Array(t/4*3);for(let i=0,a=0;i<t;i+=4,a+=3){const t=de(e.charCodeAt(i))<<18|de(e.charCodeAt(i+1))<<12|de(e.charCodeAt(i+2))<<6|de(e.charCodeAt(i+3));r[a]=t>>16,r[a+1]=t>>8&255,r[a+2]=255&t}return G.right(r.subarray(0,r.length-n))}catch(r){return G.left(ce(e,r instanceof Error?r.message:"Invalid input"))}};function de(e){if(e>=he.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);const t=he[e];if(255===t)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}const pe=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],he=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],me=e=>ue(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ge=e=>{let t="";for(let n=0;n<e.length;++n)t+=ye[e[n]];return t},ye=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],be=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw new TypeError("Invalid input")},Se=e=>ue("string"===typeof e?le.encode(e):e),ve=e=>fe(e),we=e=>me("string"===typeof e?le.encode(e):e),Ee=e=>(e=>{const t=e.length;if(t%4===1)return G.left(ce(e,`Length should be a multiple of 4, but is ${t}`));if(!/^[-_A-Z0-9]*?={0,2}$/i.test(e))return G.left(ce(e,"Invalid input"));let n=t%4===2?`${e}==`:t%4===3?`${e}=`:e;return n=n.replace(/-/g,"+").replace(/_/g,"/"),fe(n)})(e),_e=e=>ge("string"===typeof e?le.encode(e):e),ke=e=>(e=>{const t=(new TextEncoder).encode(e);if(t.length%2!==0)return G.left(ce(e,`Length must be a multiple of 2, but is ${t.length}`));try{const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const e=be(t[2*r]),i=be(t[2*r+1]);n[r]=e<<4|i}return G.right(n)}catch(n){return G.left(ce(e,n instanceof Error?n.message:"Invalid input"))}})(e);var xe=n(676966),Ie=n(61915),Te=n(398826),Oe=n(287258),Ae=n(962047),Ne=n(939739),Me=n(766922),Ce=n(33389),Re=n(769512),Fe=n(263247);const Le=(0,l.dual)((e=>m.isObject(e[0])),((e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n})),Pe=(0,l.dual)((e=>m.isObject(e[0])),((e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}));c.struct,p.struct;var De=n(674232);class Ue extends Error{constructor(e=!1){super(),this.interruptExecution=e,this.footprint=Ue.SharedFootPrint}static isFailure(e){return null!=e&&e.footprint===Ue.SharedFootPrint}}function je(e){if(!e)throw new Ue}Ue.SharedFootPrint=Symbol.for("fast-check/PreconditionFailure");class qe{[Symbol.iterator](){return this}next(e){return{value:e,done:!0}}}qe.nil=new qe;const We=Symbol.iterator;class Be{static nil(){return new Be(qe.nil)}static of(...e){return new Be(e[We]())}constructor(e){this.g=e}next(){return this.g.next()}[We](){return this.g}map(e){return new Be(function*(e,t){for(const n of e)yield t(n)}(this.g,e))}flatMap(e){return new Be(function*(e,t){for(const n of e)yield*t(n)}(this.g,e))}dropWhile(e){let t=!1;return this.flatMap((function*(n){!t&&e(n)||(t=!0,yield n)}))}drop(e){if(e<=0)return this;let t=0;return this.dropWhile((function(){return t++<e}))}takeWhile(e){return new Be(function*(e,t){let n=e.next();for(;!n.done&&t(n.value);)yield n.value,n=e.next()}(this.g,e))}take(e){return new Be(function*(e,t){for(let n=0;n<t;++n){const t=e.next();if(t.done)break;yield t.value}}(this.g,e))}filter(e){return new Be(function*(e,t){for(const n of e)t(n)&&(yield n)}(this.g,e))}every(e){for(const t of this.g)if(!e(t))return!1;return!0}has(e){for(const t of this.g)if(e(t))return[!0,t];return[!1,null]}join(...e){return new Be(function*(e,t){for(let n=e.next();!n.done;n=e.next())yield n.value;for(const n of t)for(let e=n.next();!e.done;e=n.next())yield e.value}(this.g,e))}getNthOrLast(e){let t=e,n=null;for(const r of this.g){if(0===t--)return r;n=r}return n}}function ze(e){return new Be(e)}const $e=Symbol.for("fast-check/cloneMethod");function Ve(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&$e in e&&"function"===typeof e[$e]}function Ge(e){return Ve(e)?e[$e]():e}const Je=Object.defineProperty;class He{constructor(e,t,n=void 0){this.value_=e,this.context=t,this.hasToBeCloned=void 0!==n||Ve(e),this.readOnce=!1,this.hasToBeCloned?Je(this,"value",{get:void 0!==n?n:this.getValue}):this.value=e}getValue(){return this.hasToBeCloned?this.readOnce?this.value_[$e]():(this.readOnce=!0,this.value_):this.value_}}const Ke=Object.assign;class Ye{filter(e){return new Xe(this,e)}map(e,t){return new Qe(this,e,t)}chain(e){return new Ze(this,e)}noShrink(){return new et(this)}noBias(){return new tt(this)}}class Ze extends Ye{constructor(e,t){super(),this.arb=e,this.chainer=t}generate(e,t){const n=e.clone(),r=this.arb.generate(e,t);return this.valueChainer(r,e,n,t)}canShrinkWithoutContext(e){return!1}shrink(e,t){return this.isSafeContext(t)?(t.stoppedForOriginal?Be.nil():this.arb.shrink(t.originalValue,t.originalContext).map((e=>this.valueChainer(e,t.clonedMrng.clone(),t.clonedMrng,t.originalBias)))).join(t.chainedArbitrary.shrink(e,t.chainedContext).map((e=>{const n=Ke(Ke({},t),{chainedContext:e.context,stoppedForOriginal:!0});return new He(e.value_,n)}))):Be.nil()}valueChainer(e,t,n,r){const i=this.chainer(e.value_),a=i.generate(t,r),s={originalBias:r,originalValue:e.value_,originalContext:e.context,stoppedForOriginal:!1,chainedArbitrary:i,chainedContext:a.context,clonedMrng:n};return new He(a.value_,s)}isSafeContext(e){return null!=e&&"object"===typeof e&&"originalBias"in e&&"originalValue"in e&&"originalContext"in e&&"stoppedForOriginal"in e&&"chainedArbitrary"in e&&"chainedContext"in e&&"clonedMrng"in e}}class Qe extends Ye{constructor(e,t,n){super(),this.arb=e,this.mapper=t,this.unmapper=n,this.bindValueMapper=e=>this.valueMapper(e)}generate(e,t){const n=this.arb.generate(e,t);return this.valueMapper(n)}canShrinkWithoutContext(e){if(void 0!==this.unmapper)try{const t=this.unmapper(e);return this.arb.canShrinkWithoutContext(t)}catch(t){return!1}return!1}shrink(e,t){if(this.isSafeContext(t))return this.arb.shrink(t.originalValue,t.originalContext).map(this.bindValueMapper);if(void 0!==this.unmapper){const t=this.unmapper(e);return this.arb.shrink(t,void 0).map(this.bindValueMapper)}return Be.nil()}mapperWithCloneIfNeeded(e){const t=e.value,n=this.mapper(t);return e.hasToBeCloned&&("object"===typeof n&&null!==n||"function"===typeof n)&&Object.isExtensible(n)&&!Ve(n)&&Object.defineProperty(n,$e,{get:()=>()=>this.mapperWithCloneIfNeeded(e)[0]}),[n,t]}valueMapper(e){const[t,n]=this.mapperWithCloneIfNeeded(e),r={originalValue:n,originalContext:e.context};return new He(t,r)}isSafeContext(e){return null!=e&&"object"===typeof e&&"originalValue"in e&&"originalContext"in e}}class Xe extends Ye{constructor(e,t){super(),this.arb=e,this.refinement=t,this.bindRefinementOnValue=e=>this.refinementOnValue(e)}generate(e,t){for(;;){const n=this.arb.generate(e,t);if(this.refinementOnValue(n))return n}}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)&&this.refinement(e)}shrink(e,t){return this.arb.shrink(e,t).filter(this.bindRefinementOnValue)}refinementOnValue(e){return this.refinement(e.value)}}class et extends Ye{constructor(e){super(),this.arb=e}generate(e,t){return this.arb.generate(e,t)}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)}shrink(e,t){return Be.nil()}noShrink(){return this}}class tt extends Ye{constructor(e){super(),this.arb=e}generate(e,t){return this.arb.generate(e,void 0)}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)}shrink(e,t){return this.arb.shrink(e,t)}noBias(){return this}}function nt(e){return"object"===typeof e&&null!==e&&"generate"in e&&"shrink"in e&&"canShrinkWithoutContext"in e}function rt(e){if(!nt(e))throw new Error("Unexpected value received: not an instance of Arbitrary")}const it=Function.prototype.apply,at=Symbol("apply");function st(e,t,n){return function(e){try{return e.apply}catch(t){return}}(e)===it?e.apply(t,n):function(e,t,n){const r=e;r[at]=it;const i=r[at](t,n);return delete r[at],i}(e,t,n)}const ot="undefined"!==typeof Array?Array:void 0,ct="undefined"!==typeof BigInt?BigInt:void 0,lt="undefined"!==typeof BigInt64Array?BigInt64Array:void 0,ut="undefined"!==typeof BigUint64Array?BigUint64Array:void 0,ft="undefined"!==typeof Boolean?Boolean:void 0,dt="undefined"!==typeof Date?Date:void 0,pt="undefined"!==typeof Error?Error:void 0,ht="undefined"!==typeof Float32Array?Float32Array:void 0,mt="undefined"!==typeof Float64Array?Float64Array:void 0,gt="undefined"!==typeof Int8Array?Int8Array:void 0,yt="undefined"!==typeof Int16Array?Int16Array:void 0,bt="undefined"!==typeof Int32Array?Int32Array:void 0,St="undefined"!==typeof Number?Number:void 0,vt="undefined"!==typeof String?String:void 0,wt="undefined"!==typeof Set?Set:void 0,Et="undefined"!==typeof Uint8Array?Uint8Array:void 0,_t="undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:void 0,kt="undefined"!==typeof Uint16Array?Uint16Array:void 0,xt="undefined"!==typeof Uint32Array?Uint32Array:void 0,It="undefined"!==typeof encodeURIComponent?encodeURIComponent:void 0,Tt=Array.prototype.forEach,Ot=Array.prototype.indexOf,At=Array.prototype.join,Nt=Array.prototype.map,Mt=Array.prototype.filter,Ct=Array.prototype.push,Rt=Array.prototype.pop,Ft=Array.prototype.splice,Lt=Array.prototype.slice,Pt=Array.prototype.sort,Dt=Array.prototype.every;function Ut(e,t){return function(e){try{return e.forEach}catch(t){return}}(e)===Tt?e.forEach(t):st(Tt,e,[t])}function jt(e,...t){return function(e){try{return e.indexOf}catch(t){return}}(e)===Ot?e.indexOf(...t):st(Ot,e,t)}function qt(e,...t){return function(e){try{return e.join}catch(t){return}}(e)===At?e.join(...t):st(At,e,t)}function Wt(e,t){return function(e){try{return e.map}catch(t){return}}(e)===Nt?e.map(t):st(Nt,e,[t])}function Bt(e,t){return function(e){try{return e.filter}catch(t){return}}(e)===Mt?e.filter(t):st(Mt,e,[t])}function zt(e,...t){return function(e){try{return e.push}catch(t){return}}(e)===Ct?e.push(...t):st(Ct,e,t)}function $t(e,...t){return function(e){try{return e.splice}catch(t){return}}(e)===Ft?e.splice(...t):st(Ft,e,t)}function Vt(e,...t){return function(e){try{return e.slice}catch(t){return}}(e)===Lt?e.slice(...t):st(Lt,e,t)}function Gt(e,...t){return function(e){try{return e.sort}catch(t){return}}(e)===Pt?e.sort(...t):st(Pt,e,t)}function Jt(e,...t){return function(e){try{return e.every}catch(t){return}}(e)===Dt?e.every(...t):st(Dt,e,t)}const Ht=Date.prototype.getTime,Kt=Date.prototype.toISOString;function Yt(e){return function(e){try{return e.getTime}catch(t){return}}(e)===Ht?e.getTime():st(Ht,e,[])}const Zt=Set.prototype.add;function Qt(e,t){return function(e){try{return e.add}catch(t){return}}(e)===Zt?e.add(t):st(Zt,e,[t])}const Xt=String.prototype.split,en=String.prototype.startsWith,tn=String.prototype.endsWith,nn=String.prototype.substring,rn=String.prototype.toLowerCase,an=String.prototype.toUpperCase,sn=String.prototype.padStart,on=String.prototype.charCodeAt,cn=String.prototype.replace;function ln(e,...t){return function(e){try{return e.split}catch(t){return}}(e)===Xt?e.split(...t):st(Xt,e,t)}function un(e,...t){return function(e){try{return e.substring}catch(t){return}}(e)===nn?e.substring(...t):st(nn,e,t)}function fn(e){return function(e){try{return e.toLowerCase}catch(t){return}}(e)===rn?e.toLowerCase():st(rn,e,[])}function dn(e){return function(e){try{return e.toUpperCase}catch(t){return}}(e)===an?e.toUpperCase():st(an,e,[])}function pn(e,t){return function(e){try{return e.charCodeAt}catch(t){return}}(e)===on?e.charCodeAt(t):st(on,e,[t])}const hn=Number.prototype.toString;function mn(e,...t){return function(e){try{return e.toString}catch(t){return}}(e)===hn?e.toString(...t):st(hn,e,t)}const gn=Object.prototype.hasOwnProperty,yn=Object.prototype.toString;function bn(e,t){return st(gn,e,[t])}function Sn(e){return st(yn,e,[])}class vn{constructor(e){this.producer=e}[Symbol.iterator](){return void 0===this.it&&(this.it=this.producer()),this.it}next(){return void 0===this.it&&(this.it=this.producer()),this.it.next()}}function wn(e){return new vn(e)}const En=Array.isArray,_n=Object.defineProperty;function kn(e,t){return _n(e,$e,{value:()=>{const e=[];for(let n=0;n!==t.length;++n)zt(e,t[n].value);return kn(e,t),e}})}function xn(e){let t=!1;const n=[],r=[];for(let i=0;i!==e.length;++i){const a=e[i];t=t||a.hasToBeCloned,zt(n,a.value),zt(r,a.context)}return t&&kn(n,e),new He(n,r)}function In(e,t,n){const r=[],i=En(n)?n:[];for(let a=0;a!==e.length;++a)zt(r,wn((()=>e[a].shrink(t[a],i[a]).map((e=>{const n=Wt(t,((e,t)=>new He(Ge(e),i[t])));return[...Vt(n,0,a),e,...Vt(n,a+1)]})).map(xn))));return Be.nil().join(...r)}class Tn extends Ye{constructor(e){super(),this.arbs=e;for(let t=0;t!==e.length;++t){const n=e[t];if(null==n||null==n.generate)throw new Error(`Invalid parameter encountered at index ${t}: expecting an Arbitrary`)}}generate(e,t){const n=[];for(let r=0;r!==this.arbs.length;++r)zt(n,this.arbs[r].generate(e,t));return xn(n)}canShrinkWithoutContext(e){if(!En(e)||e.length!==this.arbs.length)return!1;for(let t=0;t!==this.arbs.length;++t)if(!this.arbs[t].canShrinkWithoutContext(e[t]))return!1;return!0}shrink(e,t){return In(this.arbs,e,t)}}function On(...e){return new Tn(e)}const An=Math.log;function Nn(e){return 2+~~(.4342944819032518*An(e+1))}let Mn={};function Cn(e){Mn=e}function Rn(){return Mn}function Fn(){Mn={}}const Ln=Symbol("UndefinedContextPlaceholder");function Pn(e){return void 0!==e.context?e:e.hasToBeCloned?new He(e.value_,Ln,(()=>e.value)):new He(e.value_,Ln)}class Dn{constructor(e,t){this.arb=e,this.predicate=t;const{asyncBeforeEach:n,asyncAfterEach:r,beforeEach:i,afterEach:a}=Rn()||{};if(void 0!==n&&void 0!==i)throw pt('Global "asyncBeforeEach" and "beforeEach" parameters can\'t be set at the same time when running async properties');if(void 0!==r&&void 0!==a)throw pt('Global "asyncAfterEach" and "afterEach" parameters can\'t be set at the same time when running async properties');this.beforeEachHook=n||i||Dn.dummyHook,this.afterEachHook=r||a||Dn.dummyHook}isAsync(){return!0}generate(e,t){return Pn(this.arb.generate(e,null!=t?Nn(t):void 0))}shrink(e){if(void 0===e.context&&!this.arb.canShrinkWithoutContext(e.value_))return Be.nil();const t=e.context!==Ln?e.context:void 0;return this.arb.shrink(e.value_,t).map(Pn)}async runBeforeEach(){await this.beforeEachHook()}async runAfterEach(){await this.afterEachHook()}async run(e,t){t||await this.beforeEachHook();try{const t=await this.predicate(e);return null==t||!0===t?null:{error:new pt("Property failed by returning false"),errorMessage:"Error: Property failed by returning false"}}catch(n){return Ue.isFailure(n)?n:n instanceof pt&&n.stack?{error:n,errorMessage:n.stack}:{error:n,errorMessage:vt(n)}}finally{t||await this.afterEachHook()}}beforeEach(e){const t=this.beforeEachHook;return this.beforeEachHook=()=>e(t),this}afterEach(e){const t=this.afterEachHook;return this.afterEachHook=()=>e(t),this}}Dn.dummyHook=()=>{};class Un extends Ye{constructor(e){super(),this.arb=e}generate(e,t){return Pn(this.arb.generate(e,t))}canShrinkWithoutContext(e){return!0}shrink(e,t){if(void 0===t&&!this.arb.canShrinkWithoutContext(e))return Be.nil();const n=t!==Ln?t:void 0;return this.arb.shrink(e,n).map(Pn)}}function jn(...e){if(e.length<2)throw new Error("asyncProperty expects at least two parameters");const t=Vt(e,0,e.length-1),n=e[e.length-1];Ut(t,rt);const r=Wt(t,(e=>new Un(e)));return new Dn(On(...r),(e=>n(...e)))}class qn{constructor(e,t){this.arb=e,this.predicate=t;const{beforeEach:n=qn.dummyHook,afterEach:r=qn.dummyHook,asyncBeforeEach:i,asyncAfterEach:a}=Rn()||{};if(void 0!==i)throw pt('"asyncBeforeEach" can\'t be set when running synchronous properties');if(void 0!==a)throw pt('"asyncAfterEach" can\'t be set when running synchronous properties');this.beforeEachHook=n,this.afterEachHook=r}isAsync(){return!1}generate(e,t){return Pn(this.arb.generate(e,null!=t?Nn(t):void 0))}shrink(e){if(void 0===e.context&&!this.arb.canShrinkWithoutContext(e.value_))return Be.nil();const t=e.context!==Ln?e.context:void 0;return this.arb.shrink(e.value_,t).map(Pn)}runBeforeEach(){this.beforeEachHook()}runAfterEach(){this.afterEachHook()}run(e,t){t||this.beforeEachHook();try{const t=this.predicate(e);return null==t||!0===t?null:{error:new pt("Property failed by returning false"),errorMessage:"Error: Property failed by returning false"}}catch(n){return Ue.isFailure(n)?n:n instanceof pt&&n.stack?{error:n,errorMessage:n.stack}:{error:n,errorMessage:vt(n)}}finally{t||this.afterEachHook()}}beforeEach(e){const t=this.beforeEachHook;return this.beforeEachHook=()=>e(t),this}afterEach(e){const t=this.afterEachHook;return this.afterEachHook=()=>e(t),this}}function Wn(...e){if(e.length<2)throw new Error("property expects at least two parameters");const t=Vt(e,0,e.length-1),n=e[e.length-1];Ut(t,rt);const r=Wt(t,(e=>new Un(e)));return new qn(On(...r),(e=>n(...e)))}function Bn(e,t){for(var n=[],r=0;r!=t;++r)n.push(e.unsafeNext());return n}function zn(e,t){var n=e.clone();return[Bn(n,t),n]}function $n(e,t){for(var n=0;n!=t;++n)e.unsafeNext()}function Vn(e,t){var n=e.clone();return $n(n,t),n}qn.dummyHook=()=>{};var Gn=function(e){return 214013*e+2531011&4294967295},Jn=function(e){return(-2147483649&e)>>16},Hn=function(){function e(e){this.seed=e}return e.prototype.clone=function(){return new e(this.seed)},e.prototype.next=function(){var t=new e(this.seed);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=Gn(this.seed),t=Jn(e),n=Gn(e),r=Jn(n);return this.seed=Gn(n),0|Jn(this.seed)+(r+(t<<15)<<15)},e.prototype.getState=function(){return[this.seed]},e}();var Kn=Object.assign((function(e){return new Hn(e)}),{fromState:function(e){if(!(1===e.length))throw new Error("The state must have been produced by a congruential32 RandomGenerator");return new Hn(e[0])}}),Yn=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s},Zn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Qn=function(){function e(e,t){this.states=e,this.index=t}return e.twist=function(t){for(var n=t.slice(),r=0;r!==e.N-e.M;++r){var i=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M]^i>>>1^-(1&i)&e.A}for(r=e.N-e.M;r!==e.N-1;++r){var a=(n[r]&e.MASK_UPPER)+(n[r+1]&e.MASK_LOWER);n[r]=n[r+e.M-e.N]^a>>>1^-(1&a)&e.A}var s=(n[e.N-1]&e.MASK_UPPER)+(n[0]&e.MASK_LOWER);return n[e.N-1]=n[e.M-1]^s>>>1^-(1&s)&e.A,n},e.seeded=function(t){var n=Array(e.N);n[0]=t;for(var r=1;r!==e.N;++r){var i=n[r-1]^n[r-1]>>>30;n[r]=Math.imul(e.F,i)+r|0}return n},e.from=function(t){return new e(e.twist(e.seeded(t)),0)},e.prototype.clone=function(){return new e(this.states,this.index)},e.prototype.next=function(){var t=new e(this.states,this.index);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var t=this.states[this.index];return t^=this.states[this.index]>>>e.U,t^=t<<e.S&e.B,t^=t<<e.T&e.C,t^=t>>>e.L,++this.index>=e.N&&(this.states=e.twist(this.states),this.index=0),t},e.prototype.getState=function(){return Zn([this.index],Yn(this.states),!1)},e.fromState=function(t){if(!(t.length===e.N+1&&t[0]>=0&&t[0]<e.N))throw new Error("The state must have been produced by a mersenne RandomGenerator");return new e(t.slice(1),t[0])},e.N=624,e.M=397,e.R=31,e.A=2567483615,e.F=1812433253,e.U=11,e.S=7,e.B=2636928640,e.T=15,e.C=4022730752,e.L=18,e.MASK_LOWER=Math.pow(2,e.R)-1,e.MASK_UPPER=Math.pow(2,e.R),e}();const Xn=Object.assign((function(e){return Qn.from(e)}),{fromState:function(e){return Qn.fromState(e)}});var er=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,t=this.s01^(this.s01<<23|this.s00>>>9),n=e^this.s10^(e>>>18|t<<14)^(this.s10>>>5|this.s11<<27),r=t^this.s11^t>>>18^this.s11>>>5,i=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=r,this.s10=n,i},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,i=[1667051007,2321340297,1548169110,304075285],a=0;4!==a;++a)for(var s=1;s;s<<=1)i[a]&s&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var tr=Object.assign((function(e){return new er(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xorshift128plus RandomGenerator");return new er(e[0],e[1],e[2],e[3])}}),nr=function(){function e(e,t,n,r){this.s01=e,this.s00=t,this.s11=n,this.s10=r}return e.prototype.clone=function(){return new e(this.s01,this.s00,this.s11,this.s10)},e.prototype.next=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return[t.unsafeNext(),t]},e.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,t=this.s10^this.s00,n=this.s11^this.s01,r=this.s00,i=this.s01;return this.s00=r<<24^i>>>8^t^t<<16,this.s01=i<<24^r>>>8^n^(n<<16|t>>>16),this.s10=n<<5^t>>>27,this.s11=t<<5^n>>>27,e},e.prototype.jump=function(){var t=new e(this.s01,this.s00,this.s11,this.s10);return t.unsafeJump(),t},e.prototype.unsafeJump=function(){for(var e=0,t=0,n=0,r=0,i=[3639956645,3750757012,1261568508,386426335],a=0;4!==a;++a)for(var s=1;s;s<<=1)i[a]&s&&(e^=this.s01,t^=this.s00,n^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=t,this.s11=n,this.s10=r},e.prototype.getState=function(){return[this.s01,this.s00,this.s11,this.s10]},e}();var rr=Object.assign((function(e){return new nr(-1,~e,0|e,0)}),{fromState:function(e){if(!(4===e.length))throw new Error("The state must have been produced by a xoroshiro128plus RandomGenerator");return new nr(e[0],e[1],e[2],e[3])}});function ir(e,t){if(e.sign!==t.sign)return ar(e,{sign:-t.sign,data:t.data});for(var n=[],r=0,i=e.data,a=t.data,s=i.length-1,o=a.length-1;s>=0||o>=0;--s,--o){var c=(s>=0?i[s]:0)+(o>=0?a[o]:0)+r;n.push(c>>>0),r=~~(c/4294967296)}return 0!==r&&n.push(r),{sign:e.sign,data:n.reverse()}}function ar(e,t){if(e.sign!==t.sign)return ir(e,{sign:-t.sign,data:t.data});var n=e.data,r=t.data;if(function(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;++r){var i=r+e.length-n,a=r+t.length-n,s=i>=0?e[i]:0,o=a>=0?t[a]:0;if(s<o)return!0;if(s>o)return!1}return!1}(n,r)){var i=ar(t,e);return i.sign=-i.sign,i}for(var a=[],s=0,o=n.length-1,c=r.length-1;o>=0||c>=0;--o,--c){var l=(o>=0?n[o]:0)-(c>=0?r[c]:0)-s;a.push(l>>>0),s=l<0?1:0}return{sign:e.sign,data:a.reverse()}}function sr(e){for(var t=e.data,n=0;n!==t.length&&0===t[n];++n);return n===t.length?(e.sign=1,e.data=[0],e):(t.splice(0,n),e)}function or(e,t){if(t<0){var n=-t;e.sign=-1,e.data[0]=~~(n/4294967296),e.data[1]=n>>>0}else e.sign=1,e.data[0]=~~(t/4294967296),e.data[1]=t>>>0;return e}function cr(e,t){for(var n=e>2?~~(4294967296/e)*e:4294967296,r=t.unsafeNext()+2147483648;r>=n;)r=t.unsafeNext()+2147483648;return r%e}function lr(e,t,n){for(var r=t.length;;){for(var i=0;i!==r;++i){var a=cr(0===i?t[0]+1:4294967296,n);e[i]=a}for(i=0;i!==r;++i){var s=e[i],o=t[i];if(s<o)return e;if(s>o)break}}}function ur(e,t,n){var r=sr(function(e){e.sign=1;for(var t=e.data,n=t.length-1;n>=0;--n){if(4294967295!==t[n])return t[n]+=1,e;t[n]=0}return t.unshift(1),e}(ar(t,e)));return sr(ir({sign:1,data:lr(r.data.slice(0),r.data,n)},e))}function fr(e,t,n){if(null!=n){var r=n.clone();return[ur(e,t,r),r]}return function(n){var r=n.clone();return[ur(e,t,r),r]}}var dr="undefined"!==typeof BigInt?BigInt:void 0;function pr(e,t,n){for(var r=t-e+dr(1),i=dr(-2147483648),a=dr(4294967296),s=a,o=1;s<r;)s*=a,++o;for(var c=s-s%r;;){for(var l=dr(0),u=0;u!==o;++u){var f=n.unsafeNext();l=a*l+(dr(f)-i)}if(l<c)return l%r+e}}function hr(e,t,n){if(null!=n){var r=n.clone();return[pr(e,t,r),r]}return function(n){var r=n.clone();return[pr(e,t,r),r]}}var mr=Number.MAX_SAFE_INTEGER,gr={sign:1,data:[0,0]},yr={sign:1,data:[0,0]},br={sign:1,data:[0,0]},Sr=[0,0];function vr(e,t,n){var r=t-e;return r<=4294967295?cr(r+1,n)+e:function(e,t,n,r){var i=n<=mr?or(br,n):function(e,t,n){var r=t.data[1],i=t.data[0],a=t.sign,s=n.data[1],o=n.data[0],c=n.sign;if(e.sign=1,1===a&&-1===c){var l=r+s,u=i+o+(l>4294967295?1:0);return e.data[0]=u>>>0,e.data[1]=l>>>0,e}var f=r,d=i,p=s,h=o;-1===a&&(f=s,d=o,p=r,h=i);var m=0,g=f-p;return g<0&&(m=1,g>>>=0),e.data[0]=d-h-m,e.data[1]=g,e}(br,or(gr,t),or(yr,e));return 4294967295===i.data[1]?(i.data[0]+=1,i.data[1]=0):i.data[1]+=1,lr(Sr,i.data,r),4294967296*Sr[0]+Sr[1]+e}(e,t,r,n)}function wr(e,t,n){if(null!=n){var r=n.clone();return[vr(e,t,r),r]}return function(n){var r=n.clone();return[vr(e,t,r),r]}}var Er="module",_r="6.1.0",kr="a413dd2b721516be2ef29adffb515c5ae67bfbad";const xr=r;var Ir;!function(e){e[e.None=0]="None",e[e.Verbose=1]="Verbose",e[e.VeryVerbose=2]="VeryVerbose"}(Ir||(Ir={}));const Tr=Date.now,Or=Math.min,Ar=Math.random;class Nr{constructor(e){const t=e||{};this.seed=Nr.readSeed(t),this.randomType=Nr.readRandomType(t),this.numRuns=Nr.readNumRuns(t),this.verbose=Nr.readVerbose(t),this.maxSkipsPerRun=Nr.readOrDefault(t,"maxSkipsPerRun",100),this.timeout=Nr.safeTimeout(Nr.readOrDefault(t,"timeout",null)),this.skipAllAfterTimeLimit=Nr.safeTimeout(Nr.readOrDefault(t,"skipAllAfterTimeLimit",null)),this.interruptAfterTimeLimit=Nr.safeTimeout(Nr.readOrDefault(t,"interruptAfterTimeLimit",null)),this.markInterruptAsFailure=Nr.readBoolean(t,"markInterruptAsFailure"),this.skipEqualValues=Nr.readBoolean(t,"skipEqualValues"),this.ignoreEqualValues=Nr.readBoolean(t,"ignoreEqualValues"),this.logger=Nr.readOrDefault(t,"logger",(e=>{console.log(e)})),this.path=Nr.readOrDefault(t,"path",""),this.unbiased=Nr.readBoolean(t,"unbiased"),this.examples=Nr.readOrDefault(t,"examples",[]),this.endOnFailure=Nr.readBoolean(t,"endOnFailure"),this.reporter=Nr.readOrDefault(t,"reporter",null),this.asyncReporter=Nr.readOrDefault(t,"asyncReporter",null),this.errorWithCause=Nr.readBoolean(t,"errorWithCause")}toParameters(){const e=e=>null!==e?e:void 0;return{seed:this.seed,randomType:this.randomType,numRuns:this.numRuns,maxSkipsPerRun:this.maxSkipsPerRun,timeout:e(this.timeout),skipAllAfterTimeLimit:e(this.skipAllAfterTimeLimit),interruptAfterTimeLimit:e(this.interruptAfterTimeLimit),markInterruptAsFailure:this.markInterruptAsFailure,skipEqualValues:this.skipEqualValues,ignoreEqualValues:this.ignoreEqualValues,path:this.path,logger:this.logger,unbiased:this.unbiased,verbose:this.verbose,examples:this.examples,endOnFailure:this.endOnFailure,reporter:e(this.reporter),asyncReporter:e(this.asyncReporter),errorWithCause:this.errorWithCause}}static read(e){return new Nr(e)}}Nr.createQualifiedRandomGenerator=e=>t=>{const n=e(t);return void 0===n.unsafeJump&&(n.unsafeJump=()=>$n(n,42)),n},Nr.readSeed=e=>{if(null==e.seed)return Tr()^4294967296*Ar();const t=0|e.seed;if(e.seed===t)return t;return t^4294967296*(e.seed-t)},Nr.readRandomType=e=>{if(null==e.randomType)return xr.xorshift128plus;if("string"===typeof e.randomType)switch(e.randomType){case"mersenne":return Nr.createQualifiedRandomGenerator(xr.mersenne);case"congruential":case"congruential32":return Nr.createQualifiedRandomGenerator(xr.congruential32);case"xorshift128plus":return xr.xorshift128plus;case"xoroshiro128plus":return xr.xoroshiro128plus;default:throw new Error(`Invalid random specified: '${e.randomType}'`)}const t=e.randomType(0);if("min"in t&&-2147483648!==t.min)throw new Error(`Invalid random number generator: min must equal -0x80000000, got ${String(t.min)}`);if("max"in t&&2147483647!==t.max)throw new Error(`Invalid random number generator: max must equal 0x7fffffff, got ${String(t.max)}`);return"unsafeJump"in t?e.randomType:Nr.createQualifiedRandomGenerator(e.randomType)},Nr.readNumRuns=e=>null!=e.numRuns?e.numRuns:null!=e.num_runs?e.num_runs:100,Nr.readVerbose=e=>null==e.verbose?Ir.None:"boolean"===typeof e.verbose?!0===e.verbose?Ir.Verbose:Ir.None:e.verbose<=Ir.None?Ir.None:e.verbose>=Ir.VeryVerbose?Ir.VeryVerbose:0|e.verbose,Nr.readBoolean=(e,t)=>!0===e[t],Nr.readOrDefault=(e,t,n)=>{const r=e[t];return null!=r?r:n},Nr.safeTimeout=e=>null===e?null:Or(e,2147483647);class Mr{constructor(e,t,n,r,i,a){this.property=e,this.getTime=t,this.interruptExecution=r,this.setTimeoutSafe=i,this.clearTimeoutSafe=a,this.skipAfterTime=this.getTime()+n,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}run(e,t){const n=this.skipAfterTime-this.getTime();if(n<=0){const e=new Ue(this.interruptExecution);return this.isAsync()?Promise.resolve(e):e}if(this.interruptExecution&&this.isAsync()){const r=function(e,t,n){let r=null;return{clear:()=>n(r),promise:new Promise((n=>{r=t((()=>{const e=new Ue(!0);n(e)}),e)}))}}(n,this.setTimeoutSafe,this.clearTimeoutSafe),i=Promise.race([this.property.run(e,t),r.promise]);return i.then(r.clear,r.clear),i}return this.property.run(e,t)}}class Cr{constructor(e,t,n,r){this.property=e,this.timeMs=t,this.setTimeoutSafe=n,this.clearTimeoutSafe=r,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>Promise.resolve(this.property.runBeforeEach()),this.runAfterEach=()=>Promise.resolve(this.property.runAfterEach()))}isAsync(){return!0}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}async run(e,t){const n=((e,t,n)=>{let r=null;return{clear:()=>n(r),promise:new Promise((n=>{r=t((()=>{n({error:new pt(`Property timeout: exceeded limit of ${e} milliseconds`),errorMessage:`Property timeout: exceeded limit of ${e} milliseconds`})}),e)}))}})(this.timeMs,this.setTimeoutSafe,this.clearTimeoutSafe),r=Promise.race([this.property.run(e,t),n.promise]);return r.then(n.clear,n.clear),r}}class Rr{constructor(e){this.property=e,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,void 0)}shrink(e){return this.property.shrink(e)}run(e,t){return this.property.run(e,t)}}const Fr=Array.from,Lr="undefined"!==typeof Buffer?Buffer.isBuffer:void 0,Pr=JSON.stringify,Dr=Number.isNaN,Ur=Object.keys,jr=Object.getOwnPropertySymbols,qr=Object.getOwnPropertyDescriptor,Wr=Object.getPrototypeOf,Br=Number.NEGATIVE_INFINITY,zr=Number.POSITIVE_INFINITY,$r=Symbol.for("fast-check/toStringMethod");function Vr(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&$r in e&&"function"===typeof e[$r]}const Gr=Symbol.for("fast-check/asyncToStringMethod");function Jr(e){return null!==e&&("object"===typeof e||"function"===typeof e)&&Gr in e&&"function"===typeof e[Gr]}const Hr=/^Symbol\((.*)\)$/;function Kr(e){switch(e){case 0:return 1/e===Br?"-0":"0";case Br:return"Number.NEGATIVE_INFINITY";case zr:return"Number.POSITIVE_INFINITY";default:return e===e?vt(e):"Number.NaN"}}function Yr(e,t,n){const r=[...t,e];if("object"===typeof e&&-1!==jt(t,e))return"[cyclic]";if(Jr(e)){const t=n(e);if("fulfilled"===t.state)return t.value}if(Vr(e))try{return e[$r]()}catch(a){}switch(Sn(e)){case"[object Array]":{const t=e;if(t.length>=50&&function(e){let t=-1;for(const n in e){const e=Number(n);if(e!==t+1)return!0;t=e}return t+1!==e.length}(t)){const e=[];for(const i in t)Dr(Number(i))||zt(e,`${i}:${Yr(t[i],r,n)}`);return 0!==e.length?`Object.assign(Array(${t.length}),{${qt(e,",")}})`:`Array(${t.length})`}const i=qt(Wt(t,(e=>Yr(e,r,n))),",");return 0===t.length||t.length-1 in t?`[${i}]`:`[${i},]`}case"[object BigInt]":return`${e}n`;case"[object Boolean]":{const t=1==e?"true":"false";return"boolean"===typeof e?t:`new Boolean(${t})`}case"[object Date]":{const t=e;return Dr(Yt(t))?"new Date(NaN)":`new Date(${Pr((i=t,function(e){try{return e.toISOString}catch(a){return}}(i)===Kt?i.toISOString():st(Kt,i,[])))})`}case"[object Map]":return`new Map(${Yr(Array.from(e),r,n)})`;case"[object Null]":return"null";case"[object Number]":return"number"===typeof e?Kr(e):`new Number(${Kr(Number(e))})`;case"[object Object]":{try{const t=e.toString;if("function"===typeof t&&t!==Object.prototype.toString)return e.toString()}catch(a){return"[object Object]"}const t=t=>`${"__proto__"===t?'["__proto__"]':"symbol"===typeof t?`[${Yr(t,r,n)}]`:Pr(t)}:${Yr(e[t],r,n)}`,i="{"+qt([...Wt(Ur(e),t),...Wt(Bt(jr(e),(t=>{const n=qr(e,t);return n&&n.enumerable})),t)],",")+"}";return null===Wr(e)?"{}"===i?"Object.create(null)":`Object.assign(Object.create(null),${i})`:i}case"[object Set]":return`new Set(${Yr(Array.from(e),r,n)})`;case"[object String]":return"string"===typeof e?Pr(e):`new String(${Pr(e)})`;case"[object Symbol]":{const t=e;if(void 0!==Symbol.keyFor(t))return`Symbol.for(${Pr(Symbol.keyFor(t))})`;const n=function(e){if(void 0!==e.description)return e.description;const t=Hr.exec(vt(e));return t&&t[1].length?t[1]:null}(t);if(null===n)return"Symbol()";return t===(n.startsWith("Symbol.")&&Symbol[n.substring(7)])?n:`Symbol(${Pr(n)})`}case"[object Promise]":{const t=n(e);switch(t.state){case"fulfilled":return`Promise.resolve(${Yr(t.value,r,n)})`;case"rejected":return`Promise.reject(${Yr(t.value,r,n)})`;case"pending":return"new Promise(() => {/*pending*/})";default:return"new Promise(() => {/*unknown*/})"}}case"[object Error]":if(e instanceof Error)return`new Error(${Yr(e.message,r,n)})`;break;case"[object Undefined]":return"undefined";case"[object Int8Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Int16Array]":case"[object Uint16Array]":case"[object Int32Array]":case"[object Uint32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object BigInt64Array]":case"[object BigUint64Array]":{if("function"===typeof Lr&&Lr(e))return`Buffer.from(${Yr(Fr(e.values()),r,n)})`;const t=Wr(e),i=t&&t.constructor&&t.constructor.name;if("string"===typeof i){const t=e.values();return`${i}.from(${Yr(Fr(t),r,n)})`}break}}var i;try{return e.toString()}catch(s){return Sn(e)}}function Zr(e){return Yr(e,[],(()=>({state:"unknown",value:void 0})))}function Qr(e){const t=Symbol(),n=[],r=new Map;const i={state:"unknown",value:void 0},a=function(e){const a=e;if(r.has(a))return r.get(a);const s=function(){let e=null;return{delay:new Promise((n=>{e=setTimeout((()=>{e=null,n(t)}),0)})),cancel:()=>{null!==e&&clearTimeout(e)}}}(),o=Gr in e?Promise.resolve().then((()=>e[Gr]())):e;return o.catch((()=>{})),n.push(Promise.race([o,s.delay]).then((e=>{e===t?r.set(a,{state:"pending",value:void 0}):r.set(a,{state:"fulfilled",value:e}),s.cancel()}),(e=>{r.set(a,{state:"rejected",value:e}),s.cancel()}))),r.set(a,i),i};return function t(){const r=Yr(e,[],a);return 0===n.length?r:Promise.all(n.splice(0)).then(t)}()}async function Xr(e){return Promise.resolve(Qr(e))}function ei(e){return null===e?new Ue:e}function ti(e,t){return function(...e){return e[1]?e[0].then(ei):ei(e[0])}(e,t)}class ni{constructor(e,t){this.property=e,this.skipRuns=t,this.coveredCases=new Map,void 0!==this.property.runBeforeEach&&void 0!==this.property.runAfterEach&&(this.runBeforeEach=()=>this.property.runBeforeEach(),this.runAfterEach=()=>this.property.runAfterEach())}isAsync(){return this.property.isAsync()}generate(e,t){return this.property.generate(e,t)}shrink(e){return this.property.shrink(e)}run(e,t){const n=Zr(e);if(this.coveredCases.has(n)){const e=this.coveredCases.get(n);return this.skipRuns?ti(e,this.property.isAsync()):e}const r=this.property.run(e,t);return this.coveredCases.set(n,r),r}}const ri=Date.now,ii=setTimeout,ai=clearTimeout;var si;!function(e){e[e.Success=0]="Success",e[e.Skipped=-1]="Skipped",e[e.Failure=1]="Failure"}(si||(si={}));class oi{constructor(e,t){this.verbosity=e,this.interruptedAsFailure=t,this.isSuccess=()=>null==this.pathToFailure,this.firstFailure=()=>this.pathToFailure?+ln(this.pathToFailure,":")[0]:-1,this.numShrinks=()=>this.pathToFailure?ln(this.pathToFailure,":").length-1:0,this.rootExecutionTrees=[],this.currentLevelExecutionTrees=this.rootExecutionTrees,this.failure=null,this.numSkips=0,this.numSuccesses=0,this.interrupted=!1}appendExecutionTree(e,t){const n={status:e,value:t,children:[]};return this.currentLevelExecutionTrees.push(n),n}fail(e,t,n){if(this.verbosity>=Ir.Verbose){const t=this.appendExecutionTree(si.Failure,e);this.currentLevelExecutionTrees=t.children}null==this.pathToFailure?this.pathToFailure=`${t}`:this.pathToFailure+=`:${t}`,this.value=e,this.failure=n}skip(e){this.verbosity>=Ir.VeryVerbose&&this.appendExecutionTree(si.Skipped,e),null==this.pathToFailure&&++this.numSkips}success(e){this.verbosity>=Ir.VeryVerbose&&this.appendExecutionTree(si.Success,e),null==this.pathToFailure&&++this.numSuccesses}interrupt(){this.interrupted=!0}extractFailures(){if(this.isSuccess())return[];const e=[];let t=this.rootExecutionTrees;for(;t.length>0&&t[t.length-1].status===si.Failure;){const n=t[t.length-1];e.push(n.value),t=n.children}return e}toRunDetails(e,t,n,r){if(!this.isSuccess())return{failed:!0,interrupted:this.interrupted,numRuns:this.firstFailure()+1-this.numSkips,numSkips:this.numSkips,numShrinks:this.numShrinks(),seed:e,counterexample:this.value,counterexamplePath:oi.mergePaths(t,this.pathToFailure),error:this.failure.errorMessage,errorInstance:this.failure.error,failures:this.extractFailures(),executionSummary:this.rootExecutionTrees,verbose:this.verbosity,runConfiguration:r.toParameters()};const i=this.interruptedAsFailure||0===this.numSuccesses;return{failed:this.numSkips>n||this.interrupted&&i,interrupted:this.interrupted,numRuns:this.numSuccesses,numSkips:this.numSkips,numShrinks:0,seed:e,counterexample:null,counterexamplePath:null,error:null,errorInstance:null,failures:[],executionSummary:this.rootExecutionTrees,verbose:this.verbosity,runConfiguration:r.toParameters()}}}oi.mergePaths=(e,t)=>{if(0===e.length)return t;const n=e.split(":"),r=t.split(":"),i=+n[n.length-1]+ +r[0];return[...n.slice(0,n.length-1),`${i}`,...r.slice(1)].join(":")};class ci{constructor(e,t,n,r){this.sourceValues=e,this.shrink=t,this.runExecution=new oi(n,r),this.currentIdx=-1,this.nextValues=e}[Symbol.iterator](){return this}next(){const e=this.nextValues.next();return e.done||this.runExecution.interrupted?{done:!0,value:void 0}:(this.currentValue=e.value,++this.currentIdx,{done:!1,value:e.value.value_})}handleResult(e){null==e||"object"!==typeof e||Ue.isFailure(e)?null!=e?e.interruptExecution?this.runExecution.interrupt():(this.runExecution.skip(this.currentValue.value_),this.sourceValues.skippedOne()):this.runExecution.success(this.currentValue.value_):(this.runExecution.fail(this.currentValue.value_,this.currentIdx,e),this.currentIdx=-1,this.nextValues=this.shrink(this.currentValue))}}class li{constructor(e,t,n){this.initialValues=e,this.maxInitialIterations=t,this.remainingSkips=n}[Symbol.iterator](){return this}next(){if(-1!==--this.maxInitialIterations&&this.remainingSkips>=0){const e=this.initialValues.next();if(!e.done)return{value:e.value,done:!1}}return{value:void 0,done:!0}}skippedOne(){--this.remainingSkips,++this.maxInitialIterations}}class ui{constructor(e){this.internalRng=e.clone()}clone(){return new ui(this.internalRng)}next(e){return vr(0,(1<<e)-1,this.internalRng)}nextBoolean(){return 1==vr(0,1,this.internalRng)}nextInt(e,t){return vr(null==e?ui.MIN_INT:e,null==t?ui.MAX_INT:t,this.internalRng)}nextBigInt(e,t){return pr(e,t,this.internalRng)}nextArrayInt(e,t){return ur(e,t,this.internalRng)}nextDouble(){const e=this.next(26),t=this.next(27);return(e*ui.DBL_FACTOR+t)*ui.DBL_DIVISOR}getState(){if("getState"in this.internalRng&&"function"===typeof this.internalRng.getState)return this.internalRng.getState()}}function fi(e,t,n){return t.unsafeJump(),e.generate(new ui(t),n)}function*di(e,t,n,r){for(let i=0;i!==r.length;++i)yield new He(r[i],void 0);for(let i=0,a=n(t);;++i)yield fi(e,a,i)}function pi(e,t,n){return()=>e.generate(new ui(t),n)}function*hi(e,t,n,r){yield*Wt(r,(e=>()=>new He(e,void 0)));let i=0,a=n(t);for(;;)a=a.jump?a.jump():Vn(a,42),yield pi(e,a,i++)}function mi(e){return e()}function gi(e,t,n){const r=t,i=e.split(":").map((e=>+e));if(0===i.length)return r.map(mi);if(!i.every((e=>!Number.isNaN(e))))throw new Error(`Unable to replay, got invalid path=${e}`);let a=r.drop(i[0]).map(mi);for(const s of i.slice(1)){const t=a.getNthOrLast(0);if(null===t)throw new Error(`Unable to replay, got wrong path=${e}`);a=n(t).drop(s)}return a}ui.MIN_INT=-2147483648,ui.MAX_INT=2147483647,ui.DBL_FACTOR=Math.pow(2,27),ui.DBL_DIVISOR=Math.pow(2,-53);const yi=Object.assign;function bi(e,t){const n=[],r=[];for(const i of e.slice().reverse())r.push({depth:1,tree:i});for(;0!==r.length;){const e=r.pop(),i=e.tree,a=e.depth,s=i.status===si.Success?"\x1b[32m\u221a\x1b[0m":i.status===si.Failure?"\x1b[31m\xd7\x1b[0m":"\x1b[33m!\x1b[0m",o=Array(a).join(". ");n.push(`${o}${s} ${t(i.value)}`);for(const t of i.children.slice().reverse())r.push({depth:a+1,tree:t})}return`Execution summary:\n${n.join("\n")}`}function Si(e,t){const n=e.runConfiguration.errorWithCause?"":`\nGot ${function(e,t,n){return function(e){try{return e.replace}catch(t){return}}(e)===cn?e.replace(t,n):st(cn,e,[t,n])}(e.error,/^Error: /,"error: ")}`,r=`Property failed after ${e.numRuns} tests\n{ seed: ${e.seed}, path: "${e.counterexamplePath}", endOnFailure: true }\nCounterexample: ${t(e.counterexample)}\nShrunk ${e.numShrinks} time(s)${n}`;let i=null;const a=[];return e.verbose>=Ir.VeryVerbose?i=bi(e.executionSummary,t):e.verbose===Ir.Verbose?i=function(e,t){return`Encountered failures were:\n- ${e.map(t).join("\n- ")}`}(e.failures,t):zt(a,"Enable verbose mode in order to have the list of all failing values encountered during the run"),{message:r,details:i,hints:a}}function vi(e,t){if(!e.failed)return;const{message:n,details:r,hints:i}=null===e.counterexamplePath?e.interrupted?function(e,t){const n=`Property interrupted after ${e.numRuns} tests\n{ seed: ${e.seed} }`;let r=null;const i=[];return e.verbose>=Ir.VeryVerbose?r=bi(e.executionSummary,t):zt(i,"Enable verbose mode at level VeryVerbose in order to check all generated values and their associated status"),{message:n,details:r,hints:i}}(e,t):function(e,t){const n=`Failed to run property, too many pre-condition failures encountered\n{ seed: ${e.seed} }\n\nRan ${e.numRuns} time(s)\nSkipped ${e.numSkips} time(s)`;let r=null;const i=["Try to reduce the number of rejected values by combining map, flatMap and built-in arbitraries","Increase failure tolerance by setting maxSkipsPerRun to an higher value"];return e.verbose>=Ir.VeryVerbose?r=bi(e.executionSummary,t):zt(i,"Enable verbose mode at level VeryVerbose in order to check all generated values and their associated status"),{message:n,details:r,hints:i}}(e,t):Si(e,t);let a=n;return null!=r&&(a+=`\n\n${r}`),i.length>0&&(a+=`\n\n${function(e){return 1===e.length?`Hint: ${e[0]}`:e.map(((e,t)=>`Hint (${t+1}): ${e}`)).join("\n")}(i)}`),a}function wi(e){return vi(e,Zr)}async function Ei(e){const t=[];const n=vi(e,(function(e){const n=Qr(e);return"string"===typeof n?n:(t.push(Promise.all([e,n])),"\u2026")}));if(0===t.length)return n;const r=new Map(await Promise.all(t));return vi(e,(function(e){const t=r.get(e);return void 0!==t?t:Zr(e)}))}function _i(e,t){if(!t.runConfiguration.errorWithCause)throw new pt(e);const n=new pt(e,{cause:t.errorInstance});return"cause"in n||yi(n,{cause:t.errorInstance}),n}function ki(e){return e.runConfiguration.asyncReporter?e.runConfiguration.asyncReporter(e):e.runConfiguration.reporter?e.runConfiguration.reporter(e):function(e){if(e.failed)throw _i(wi(e),e)}(e)}async function xi(e){return e.runConfiguration.asyncReporter?e.runConfiguration.asyncReporter(e):e.runConfiguration.reporter?e.runConfiguration.reporter(e):async function(e){if(e.failed)throw _i(await Ei(e),e)}(e)}const Ii=Object.assign;function Ti(e,t){if(null==e||null==e.generate)throw new Error("Invalid property encountered, please use a valid property");if(null==e.run)throw new Error("Invalid property encountered, please use a valid property not an arbitrary");const n=Nr.read(Ii(Ii({},Rn()),t));if(null!==n.reporter&&null!==n.asyncReporter)throw new Error("Invalid parameters encountered, reporter and asyncReporter cannot be specified together");if(null!==n.asyncReporter&&!e.isAsync())throw new Error("Invalid parameters encountered, only asyncProperty can be used when asyncReporter specified");const r=function(e,t){let n=e;return e.isAsync()&&null!=t.timeout&&(n=new Cr(n,t.timeout,ii,ai)),t.unbiased&&(n=new Rr(n)),null!=t.skipAllAfterTimeLimit&&(n=new Mr(n,ri,t.skipAllAfterTimeLimit,!1,ii,ai)),null!=t.interruptAfterTimeLimit&&(n=new Mr(n,ri,t.interruptAfterTimeLimit,!0,ii,ai)),t.skipEqualValues&&(n=new ni(n,!0)),t.ignoreEqualValues&&(n=new ni(n,!1)),n}(e,n),i=0===n.path.length||-1===n.path.indexOf(":")?n.numRuns:-1,a=n.numRuns*n.maxSkipsPerRun,s=(...e)=>r.shrink(...e),o=0===n.path.length?di(r,n.seed,n.randomType,n.examples):gi(n.path,ze(hi(r,n.seed,n.randomType,n.examples)),s),c=new li(o,i,a),l=n.endOnFailure?Be.nil:s;return r.isAsync()?async function(e,t,n,r,i){const a=void 0!==e.runBeforeEach&&void 0!==e.runAfterEach,s=new ci(n,t,r,i);for(const o of s){a&&await e.runBeforeEach();const t=await e.run(o,a);a&&await e.runAfterEach(),s.handleResult(t)}return s.runExecution}(r,l,c,n.verbose,n.markInterruptAsFailure).then((e=>e.toRunDetails(n.seed,n.path,a,n))):function(e,t,n,r,i){const a=void 0!==e.runBeforeEach&&void 0!==e.runAfterEach,s=new ci(n,t,r,i);for(const o of s){a&&e.runBeforeEach();const t=e.run(o,a);a&&e.runAfterEach(),s.handleResult(t)}return s.runExecution}(r,l,c,n.verbose,n.markInterruptAsFailure).toRunDetails(n.seed,n.path,a,n)}function Oi(e,t){const n=Ti(e,t);if(e.isAsync())return n.then(xi);ki(n)}function Ai(e,t){const n="number"===typeof t?Object.assign(Object.assign({},Rn()),{numRuns:t}):Object.assign(Object.assign({},Rn()),t),r=Nr.read(n),i=function(e,t){const n=Object.prototype.hasOwnProperty.call(e,"isAsync")?e:new qn(e,(()=>!0));return!0===t.unbiased?new Rr(n):n}(e,r),a=i.shrink.bind(i);return(0===r.path.length?ze(di(i,r.seed,r.randomType,r.examples)):gi(r.path,ze(hi(i,r.seed,r.randomType,r.examples)),a)).take(r.numRuns).map((e=>e.value_))}function Ni(e,t){return[...Ai(e,t)]}function Mi(e,t,n){const r="number"===typeof n?Object.assign(Object.assign({},Rn()),{numRuns:n}):Object.assign(Object.assign({},Rn()),n),i=Nr.read(r),a={};for(const l of Ai(e,n)){const e=t(l),n=Array.isArray(e)?e:[e];for(const t of n)a[t]=(a[t]||0)+1}const s=Object.entries(a).sort(((e,t)=>t[1]-e[1])).map((e=>{return[e[0],`${t=100*e[1]/i.numRuns,(Math.round(100*t)/100).toFixed(2)}%`];var t})),o=s.map((e=>e[0].length)).reduce(((e,t)=>Math.max(e,t)),0),c=s.map((e=>e[1].length)).reduce(((e,t)=>Math.max(e,t)),0);for(const l of s)i.logger(`${l[0].padEnd(o,".")}..${l[1].padStart(c,".")}`)}function Ci(e,t,n,r){const i=n();let a=e.clone();const s={mrng:e.clone(),biasFactor:t,history:[]},o={values:()=>s.history.map((e=>e.value)),[$e]:()=>Ci(e,t,n,r).value,[$r]:()=>Zr(s.history.map((e=>e.value)))},c=Object.assign(((e,...n)=>(e=>{const n=i[s.history.length];if(void 0!==n&&n.arb===e){const t=n.value;return s.history.push({arb:e,value:t,context:n.context,mrng:n.mrng}),a=n.mrng.clone(),t}const r=e.generate(a,t);return s.history.push({arb:e,value:r.value_,context:r.context,mrng:a.clone()}),r.value})(r(e,n))),o);return new He(c,s)}function Ri(e,t){if(null!==e&&"object"===typeof e&&null!==t&&"object"===typeof t){if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1}else if(Array.isArray(t))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){if(!(n in t))return!1;if(!Ri(e[n],t[n]))return!1}return!0}return Object.is(e,t)}class Fi extends Ye{constructor(){super(...arguments),this.arbitraryCache=function(e){const t=new Map;return function(n,r){const i=t.get(n);if(void 0===i){const e=n(...r);return t.set(n,[{args:r,value:e}]),e}const a=i;for(const t of a)if(e(r,t.args))return t.value;const s=n(...r);return a.push({args:r,value:s}),s}}(Ri)}generate(e,t){return Ci(e,t,(()=>[]),this.arbitraryCache)}canShrinkWithoutContext(e){return!1}shrink(e,t){if(void 0===t)return Be.nil();const n=t,r=n.mrng,i=n.biasFactor,a=n.history;return In(a.map((e=>e.arb)),a.map((e=>e.value)),a.map((e=>e.context))).map((e=>Ci(r,i,(function(){const t=e.value,n=e.context;return a.map(((e,r)=>({arb:e.arb,value:t[r],context:n[r],mrng:e.mrng})))}),this.arbitraryCache)))}}function Li(){return new Fi}const Pi=Math.floor,Di=Math.log;function Ui(e){return Pi(Di(e)/Di(2))}function ji(e){return e===ct(0)?ct(0):ct(vt(e).length)}function qi(e,t,n){if(e===t)return[{min:e,max:t}];if(e<0&&t>0){const r=n(-e),i=n(t);return[{min:-r,max:i},{min:t-i,max:t},{min:e,max:e+r}]}const r=n(t-e),i={min:e,max:e+r},a={min:t-r,max:t};return e<0?[a,i]:[i,a]}const Wi=Math.ceil,Bi=Math.floor;function zi(e){return Bi(e/2)}function $i(e){return Wi(e/2)}function Vi(e,t,n){const r=e-t;return ze(r>0?function*(){let i=n?void 0:t;for(let a=n?r:zi(r);a>0;a=zi(a)){const n=a===r?t:e-a;yield new He(n,i),i=n}}():function*(){let i=n?void 0:t;for(let a=n?r:$i(r);a<0;a=$i(a)){const n=a===r?t:e-a;yield new He(n,i),i=n}}())}const Gi=Math.sign,Ji=Number.isInteger,Hi=Object.is;class Ki extends Ye{constructor(e,t){super(),this.min=e,this.max=t}generate(e,t){const n=this.computeGenerateRange(e,t);return new He(e.nextInt(n.min,n.max),void 0)}canShrinkWithoutContext(e){return"number"===typeof e&&Ji(e)&&!Hi(e,-0)&&this.min<=e&&e<=this.max}shrink(e,t){if(!Ki.isValidContext(e,t)){return Vi(e,this.defaultTarget(),!0)}return this.isLastChanceTry(e,t)?Be.of(new He(t,void 0)):Vi(e,t,!1)}defaultTarget(){return this.min<=0&&this.max>=0?0:this.min<0?this.max:this.min}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=qi(this.min,this.max,Ui);if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}isLastChanceTry(e,t){return e>0?e===t+1&&e>this.min:e<0&&(e===t-1&&e<this.max)}static isValidContext(e,t){if(void 0===t)return!1;if("number"!==typeof t)throw new Error("Invalid context type passed to IntegerArbitrary (#1)");if(0!==t&&Gi(e)!==Gi(t))throw new Error("Invalid context value passed to IntegerArbitrary (#2)");return!0}}const Yi=Number.isInteger;function Zi(e={}){const t=function(e){return{min:void 0!==e.min?e.min:-2147483648,max:void 0!==e.max?e.max:2147483647}}(e);if(t.min>t.max)throw new Error("fc.integer maximum value should be equal or greater than the minimum one");if(!Yi(t.min))throw new Error("fc.integer minimum value should be an integer");if(!Yi(t.max))throw new Error("fc.integer maximum value should be an integer");return new Ki(t.min,t.max)}const Qi=new Map;function Xi(e){if(void 0===e)return{depth:0};if("string"!==typeof e)return e;const t=Qi.get(e);if(void 0!==t)return t;const n={depth:0};return Qi.set(e,n),n}function ea(){return{depth:0}}class ta{constructor(e,t,n){this.arb=e,this.mrng=t,this.biasFactor=n}attemptExact(){}next(){return this.arb.generate(this.mrng,this.biasFactor)}}const na=Math.min,ra=Math.max;class ia{constructor(e,t,n,r){this.arb=e,this.mrng=t,this.slices=n,this.biasFactor=r,this.activeSliceIndex=0,this.nextIndexInSlice=0,this.lastIndexInSlice=-1}attemptExact(e){if(0!==e&&1===this.mrng.nextInt(1,this.biasFactor)){const t=[];for(let n=0;n!==this.slices.length;++n){this.slices[n].length===e&&zt(t,n)}if(0===t.length)return;this.activeSliceIndex=t[this.mrng.nextInt(0,t.length-1)],this.nextIndexInSlice=0,this.lastIndexInSlice=e-1}}next(){if(this.nextIndexInSlice<=this.lastIndexInSlice)return new He(this.slices[this.activeSliceIndex][this.nextIndexInSlice++],void 0);if(1!==this.mrng.nextInt(1,this.biasFactor))return this.arb.generate(this.mrng,this.biasFactor);this.activeSliceIndex=this.mrng.nextInt(0,this.slices.length-1);const e=this.slices[this.activeSliceIndex];if(1!==this.mrng.nextInt(1,this.biasFactor))return this.nextIndexInSlice=1,this.lastIndexInSlice=e.length-1,new He(e[0],void 0);const t=this.mrng.nextInt(0,e.length-1),n=this.mrng.nextInt(0,e.length-1);return this.nextIndexInSlice=na(t,n),this.lastIndexInSlice=ra(t,n),new He(e[this.nextIndexInSlice++],void 0)}}function aa(e,t,n,r){return void 0===r||0===n.length||1!==t.nextInt(1,r)?new ta(e,t,r):new ia(e,t,n,r)}const sa=Math.floor,oa=Math.log,ca=Math.max,la=Array.isArray;function ua(e,t){return e===t?e:e+sa(oa(t-e)/oa(2))}class fa extends Ye{constructor(e,t,n,r,i,a,s){super(),this.arb=e,this.minLength=t,this.maxGeneratedLength=n,this.maxLength=r,this.setBuilder=a,this.customSlices=s,this.lengthArb=Zi({min:t,max:n}),this.depthContext=Xi(i)}preFilter(e){if(void 0===this.setBuilder)return e;const t=this.setBuilder();for(let n=0;n!==e.length;++n)t.tryAdd(e[n]);return t.getData()}static makeItCloneable(e,t){return e[$e]=()=>{const e=[];for(let n=0;n!==t.length;++n)zt(e,t[n].value);return this.makeItCloneable(e,t),e},e}generateNItemsNoDuplicates(e,t,n,r){let i=0;const a=e(),s=aa(this.arb,n,this.customSlices,r);for(;a.size()<t&&i<this.maxGeneratedLength;){const e=s.next();a.tryAdd(e)?i=0:i+=1}return a.getData()}safeGenerateNItemsNoDuplicates(e,t,n,r){const i=ca(0,t-ua(this.minLength,this.maxGeneratedLength));this.depthContext.depth+=i;try{return this.generateNItemsNoDuplicates(e,t,n,r)}finally{this.depthContext.depth-=i}}generateNItems(e,t,n){const r=[],i=aa(this.arb,t,this.customSlices,n);i.attemptExact(e);for(let a=0;a!==e;++a){zt(r,i.next())}return r}safeGenerateNItems(e,t,n){const r=ca(0,e-ua(this.minLength,this.maxGeneratedLength));this.depthContext.depth+=r;try{return this.generateNItems(e,t,n)}finally{this.depthContext.depth-=r}}wrapper(e,t,n,r){const i=t?this.preFilter(e):e;let a=!1;const s=[],o=[];for(let l=0;l!==i.length;++l){const e=i[l];a=a||e.hasToBeCloned,zt(s,e.value),zt(o,e.context)}a&&fa.makeItCloneable(s,i);const c={shrunkOnce:t,lengthContext:e.length===i.length&&void 0!==n?n:void 0,itemsContexts:o,startIndex:r};return new He(s,c)}generate(e,t){const n=this.applyBias(e,t),r=n.size,i=void 0!==this.setBuilder?this.safeGenerateNItemsNoDuplicates(this.setBuilder,r,e,n.biasFactorItems):this.safeGenerateNItems(r,e,n.biasFactorItems);return this.wrapper(i,!1,void 0,0)}applyBias(e,t){if(void 0===t)return{size:this.lengthArb.generate(e,void 0).value};if(this.minLength===this.maxGeneratedLength)return{size:this.lengthArb.generate(e,void 0).value,biasFactorItems:t};if(1!==e.nextInt(1,t))return{size:this.lengthArb.generate(e,void 0).value};if(1!==e.nextInt(1,t)||this.minLength===this.maxGeneratedLength)return{size:this.lengthArb.generate(e,void 0).value,biasFactorItems:t};const n=ua(this.minLength,this.maxGeneratedLength);return{size:Zi({min:this.minLength,max:n}).generate(e,void 0).value,biasFactorItems:t}}canShrinkWithoutContext(e){if(!la(e)||this.minLength>e.length||e.length>this.maxLength)return!1;for(let t=0;t!==e.length;++t){if(!(t in e))return!1;if(!this.arb.canShrinkWithoutContext(e[t]))return!1}return this.preFilter(Wt(e,(e=>new He(e,void 0)))).length===e.length}shrinkItemByItem(e,t,n){const r=[];for(let i=t.startIndex;i<n;++i)zt(r,wn((()=>this.arb.shrink(e[i],t.itemsContexts[i]).map((n=>{const r=Wt(Vt(e,0,i),((e,n)=>new He(Ge(e),t.itemsContexts[n]))),a=Wt(Vt(e,i+1),((e,n)=>new He(Ge(e),t.itemsContexts[n+i+1])));return[[...r,n,...a],void 0,i]})))));return Be.nil().join(...r)}shrinkImpl(e,t){if(0===e.length)return Be.nil();const n=void 0!==t?t:{shrunkOnce:!1,lengthContext:void 0,itemsContexts:[],startIndex:0};return this.lengthArb.shrink(e.length,n.lengthContext).drop(n.shrunkOnce&&void 0===n.lengthContext&&e.length>this.minLength+1?1:0).map((t=>{const r=e.length-t.value;return[Wt(Vt(e,r),((e,t)=>new He(Ge(e),n.itemsContexts[t+r]))),t.context,0]})).join(wn((()=>e.length>this.minLength?this.shrinkItemByItem(e,n,1):this.shrinkItemByItem(e,n,e.length)))).join(e.length>this.minLength?wn((()=>{const t={shrunkOnce:!1,lengthContext:void 0,itemsContexts:Vt(n.itemsContexts,1),startIndex:0};return this.shrinkImpl(Vt(e,1),t).filter((e=>this.minLength<=e[0].length+1)).map((t=>[[new He(Ge(e[0]),n.itemsContexts[0]),...t[0]],void 0,0]))})):Be.nil())}shrink(e,t){return this.shrinkImpl(e,t).map((e=>this.wrapper(e[0],!0,e[1],e[2])))}}const da=Math.floor,pa=Math.min,ha=2147483647,ma=["xsmall","small","medium","large","xlarge"],ga=["-4","-3","-2","-1","=","+1","+2","+3","+4"],ya="small";function ba(e,t){const n=jt(ga,e);if(-1===n)return e;const r=jt(ma,t);if(-1===r)throw new Error(`Unable to offset size based on the unknown defaulted one: ${t}`);const i=r+n-4;return i<0?ma[0]:i>=ma.length?ma[ma.length-1]:ma[i]}function Sa(e,t,n,r){const{baseSize:i=ya,defaultSizeToMaxWhenMaxSpecified:a}=Rn()||{},s=void 0!==e?e:r&&a?"max":i;if("max"===s)return n;const o=ba(s,i);return pa(function(e,t){switch(t){case"xsmall":return da(1.1*e)+1;case"small":return 2*e+10;case"medium":return 11*e+100;case"large":return 101*e+1e3;case"xlarge":return 1001*e+1e4;default:throw new Error(`Unable to compute lengths based on received size: ${t}`)}}(t,o),n)}function va(e,t){if("number"===typeof e)return 1/e;const{baseSize:n=ya,defaultSizeToMaxWhenMaxSpecified:r}=Rn()||{},i=void 0!==e?e:t&&r?"max":n;if("max"===i)return 0;switch(ba(i,n)){case"xsmall":return 1;case"small":return.5;case"medium":return.25;case"large":return.125;case"xlarge":return.0625}}function wa(e){const{baseSize:t=ya}=Rn()||{};return void 0===e?t:ba(e,t)}function Ea(e,t={}){const n=t.size,r=t.minLength||0,i=t.maxLength,a=t.depthIdentifier,s=void 0!==i?i:ha,o=Sa(n,r,s,void 0!==i),c=t.experimentalCustomSlices||[];return new fa(e,r,o,s,a,void 0,c)}function _a(e){return e/ct(2)}function ka(e,t,n){const r=e-t;return ze(r>0?function*(){let i=n?void 0:t;for(let t=n?r:_a(r);t>0;t=_a(t)){const n=e-t;yield new He(n,i),i=n}}():function*(){let i=n?void 0:t;for(let t=n?r:_a(r);t<0;t=_a(t)){const n=e-t;yield new He(n,i),i=n}}())}class xa extends Ye{constructor(e,t){super(),this.min=e,this.max=t}generate(e,t){const n=this.computeGenerateRange(e,t);return new He(e.nextBigInt(n.min,n.max),void 0)}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=qi(this.min,this.max,ji);if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}canShrinkWithoutContext(e){return"bigint"===typeof e&&this.min<=e&&e<=this.max}shrink(e,t){if(!xa.isValidContext(e,t)){return ka(e,this.defaultTarget(),!0)}return this.isLastChanceTry(e,t)?Be.of(new He(t,void 0)):ka(e,t,!1)}defaultTarget(){return this.min<=0&&this.max>=0?ct(0):this.min<0?this.max:this.min}isLastChanceTry(e,t){return e>0?e===t+ct(1)&&e>this.min:e<0&&(e===t-ct(1)&&e<this.max)}static isValidContext(e,t){if(void 0===t)return!1;if("bigint"!==typeof t)throw new Error("Invalid context type passed to BigIntArbitrary (#1)");const n=e>0&&t<0||e<0&&t>0;if(t!==ct(0)&&n)throw new Error("Invalid context value passed to BigIntArbitrary (#2)");return!0}}function Ia(...e){const t=function(e){const t=ct(-1)<<ct(255),n=(ct(1)<<ct(255))-ct(1),r=e.min,i=e.max;return{min:void 0!==r?r:t-(void 0!==i&&i<ct(0)?i*i:ct(0)),max:void 0!==i?i:n+(void 0!==r&&r>ct(0)?r*r:ct(0))}}(function(e){if(void 0===e[0])return{};if(void 0===e[1])return e[0];return{min:e[0],max:e[1]}}(e));if(t.min>t.max)throw new Error("fc.bigInt expects max to be greater than or equal to min");return new xa(t.min,t.max)}function Ta(e){if(e<1)throw new Error("fc.bigIntN expects requested number of bits to be superior or equal to 1");const t=ct(-1)<<ct(e-1),n=(ct(1)<<ct(e-1))-ct(1);return new xa(t,n)}function Oa(e){const t="object"===typeof e?e.max:e,n=void 0!==t?t:(ct(1)<<ct(256))-ct(1);if(n<0)throw new Error("fc.bigUint expects max to be greater than or equal to zero");return new xa(ct(0),n)}function Aa(e){if(e<0)throw new Error("fc.bigUintN expects requested number of bits to be superior or equal to 0");const t=ct(0),n=(ct(1)<<ct(e))-ct(1);return new xa(t,n)}function Na(e){return e.noBias()}function Ma(e){return 1===e}function Ca(e){if("boolean"!==typeof e)throw new Error("Unsupported input type");return!0===e?1:0}function Ra(){return Na(Zi({min:0,max:1}).map(Ma,Ca))}const Fa=Object.is;class La extends Ye{constructor(e){super(),this.values=e}generate(e,t){const n=1===this.values.length?0:e.nextInt(0,this.values.length-1),r=this.values[n];return Ve(r)?new He(r,n,(()=>r[$e]())):new He(r,n)}canShrinkWithoutContext(e){for(let t=0;t!==this.values.length;++t)if(Fa(this.values[t],e))return!0;return!1}shrink(e,t){return 0===t||Fa(e,this.values[0])?Be.nil():Be.of(new He(this.values[0],0))}}function Pa(...e){if(0===e.length)throw new Error("fc.constantFrom expects at least one parameter");return new La(e)}function Da(e){return e&&e.withBigInt?Pa(!1,null,void 0,0,"",NaN,ct(0)):Pa(!1,null,void 0,0,"",NaN)}const Ua=String.fromCodePoint;function ja(e,t,n,r){return Zi({min:e,max:t}).map((e=>Ua(n(e))),(e=>r(function(e){if("string"!==typeof e)throw new Error("Cannot unmap non-string");if(0===e.length||e.length>2)throw new Error("Cannot unmap string with more or less than one character");const t=pn(e,0);if(1===e.length)return t;const n=pn(e,1);if(t<55296||t>56319||n<56320||n>57343)throw new Error("Cannot unmap invalid surrogate pairs");return e.codePointAt(0)}(e))))}function qa(e){return e<95?e+32:e<=126?e-95:e}function Wa(e){return e>=32&&e<=126?e-32:e>=0&&e<=31?e+95:e}function Ba(){return ja(0,127,qa,Wa)}function za(e){return e<26?e+65:e<52?e+97-26:e<62?e+48-52:62===e?43:47}function $a(e){return e>=65&&e<=90?e-65:e>=97&&e<=122?e-97+26:e>=48&&e<=57?e-48+52:43===e?62:47===e?63:-1}function Va(){return ja(0,63,za,$a)}function Ga(e){return e}function Ja(){return ja(32,126,Ga,Ga)}function Ha(){return ja(0,65535,qa,Wa)}const Ka=2048;function Ya(e){return e<55296?qa(e):e+Ka}function Za(e){return e<55296?Wa(e):e<=57343?-1:e-Ka}function Qa(){return ja(0,1114111-Ka,Ya,Za)}function Xa(e){return e<10?e+48:e+97-10}function es(e){return e<58?e-48:e>=97&&e<103?e-97+10:-1}function ts(){return ja(0,15,Xa,es)}const ns=2048;function rs(e){return e<55296?qa(e):e+ns}function is(e){return e<55296?Wa(e):e<=57343?-1:e-ns}function as(){return ja(0,65535-ns,rs,is)}function ss(e){return new La([e])}class os{constructor(){this.receivedLogs=[]}log(e){this.receivedLogs.push(e)}size(){return this.receivedLogs.length}toString(){return JSON.stringify({logs:this.receivedLogs})}[$e](){return new os}}function cs(){return ss(new os)}const ls=Number.NaN,us=Number.isNaN;function fs(e){return new dt(e)}function ds(e){if(!(e instanceof dt)||e.constructor!==dt)throw new pt("Not a valid value for date unmapper");return Yt(e)}const ps=Number.isNaN;function hs(e={}){const t=void 0!==e.min?Yt(e.min):-864e13,n=void 0!==e.max?Yt(e.max):864e13,r=void 0===e.noInvalidDate||e.noInvalidDate;if(ps(t))throw new Error("fc.date min must be valid instance of Date");if(ps(n))throw new Error("fc.date max must be valid instance of Date");if(t>n)throw new Error("fc.date max must be greater or equal to min");if(r)return Zi({min:t,max:n}).map(fs,ds);const i=n+1;return Zi({min:t,max:n+1}).map(function(e){return t=>t===e?new dt(ls):fs(t)}(i),function(e){return t=>{const n=ds(t);return us(n)?e:n}}(i))}const ms=Symbol.iterator,gs=Array.isArray,ys=Object.is;class bs extends Ye{constructor(e,t){super(),this.arb=e,this.numValues=t}generate(e,t){const n=[];if(this.numValues<=0)return this.wrapper(n);for(let r=0;r!==this.numValues-1;++r)zt(n,this.arb.generate(e.clone(),t));return zt(n,this.arb.generate(e,t)),this.wrapper(n)}canShrinkWithoutContext(e){if(!gs(e)||e.length!==this.numValues)return!1;if(0===e.length)return!0;for(let t=1;t<e.length;++t)if(!ys(e[0],e[t]))return!1;return this.arb.canShrinkWithoutContext(e[0])}shrink(e,t){return 0===e.length?Be.nil():new Be(this.shrinkImpl(e,void 0!==t?t:[])).map((e=>this.wrapper(e)))}*shrinkImpl(e,t){const n=Wt(e,((e,n)=>this.arb.shrink(e,t[n])[ms]()));let r=Wt(n,(e=>e.next()));for(;!r[0].done;)yield Wt(r,(e=>e.value)),r=Wt(n,(e=>e.next()))}static makeItCloneable(e,t){return e[$e]=()=>{const e=[];for(let n=0;n!==t.length;++n)zt(e,t[n].value);return this.makeItCloneable(e,t),e},e}wrapper(e){let t=!1;const n=[],r=[];for(let i=0;i!==e.length;++i){const a=e[i];t=t||a.hasToBeCloned,zt(n,a.value),zt(r,a.context)}return t&&bs.makeItCloneable(n,e),new He(n,r)}}function Ss(e,t){return new bs(e,t)}class vs{constructor(e){this.isEqual=e,this.data=[]}tryAdd(e){for(let t=0;t!==this.data.length;++t)if(this.isEqual(this.data[t],e))return!1;return zt(this.data,e),!0}size(){return this.data.length}getData(){return this.data}}const ws=Number.isNaN;class Es{constructor(e){this.selector=e,this.selectedItemsExceptNaN=new wt,this.data=[]}tryAdd(e){const t=this.selector(e);if(ws(t))return zt(this.data,e),!0;const n=this.selectedItemsExceptNaN.size;return Qt(this.selectedItemsExceptNaN,t),n!==this.selectedItemsExceptNaN.size&&(zt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}const _s=Object.is;class ks{constructor(e){this.selector=e,this.selectedItemsExceptMinusZero=new wt,this.data=[],this.hasMinusZero=!1}tryAdd(e){const t=this.selector(e);if(_s(t,-0))return!this.hasMinusZero&&(zt(this.data,e),this.hasMinusZero=!0,!0);const n=this.selectedItemsExceptMinusZero.size;return Qt(this.selectedItemsExceptMinusZero,t),n!==this.selectedItemsExceptMinusZero.size&&(zt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}class xs{constructor(e){this.selector=e,this.selectedItems=new wt,this.data=[]}tryAdd(e){const t=this.selector(e),n=this.selectedItems.size;return Qt(this.selectedItems,t),n!==this.selectedItems.size&&(zt(this.data,e),!0)}size(){return this.data.length}getData(){return this.data}}function Is(e,t={}){const n=void 0!==t.minLength?t.minLength:0,r=void 0!==t.maxLength?t.maxLength:ha,i=Sa(t.size,n,r,void 0!==t.maxLength),a=t.depthIdentifier,s=function(e){if("function"===typeof e.comparator){if(void 0===e.selector){const t=e.comparator,n=(e,n)=>t(e.value_,n.value_);return()=>new vs(n)}const t=e.comparator,n=e.selector,r=e=>n(e.value_),i=(e,n)=>t(r(e),r(n));return()=>new vs(i)}const t=e.selector||(e=>e),n=e=>t(e.value_);switch(e.comparator){case"IsStrictlyEqual":return()=>new Es(n);case"SameValueZero":return()=>new xs(n);case"SameValue":case void 0:return()=>new ks(n)}}(t),o=new fa(e,n,i,r,a,s,[]);return 0===n?o:o.filter((e=>e.length>=n))}const Ts=Object.create,Os=Object.defineProperty,As=Object.getOwnPropertyDescriptor,Ns=Object.getPrototypeOf,Ms=Object.getOwnPropertySymbols,Cs=Object.getOwnPropertyNames,Rs=Object.entries;function Fs(e){const t=e[1]?Ts(null):{};for(const n of e[0])Os(t,n[0],{enumerable:!0,configurable:!0,writable:!0,value:n[1]});return t}function Ls(e){if("object"!==typeof e||null===e)throw new pt("Incompatible instance received: should be a non-null object");const t=null===Ns(e),n="constructor"in e&&e.constructor===Object;if(!t&&!n)throw new pt("Incompatible instance received: should be of exact type Object");if(Ms(e).length>0)throw new pt("Incompatible instance received: should contain symbols");if(!Jt(Cs(e),(r=e,function(e){const t=As(r,e);return void 0!==t&&!!t.configurable&&!!t.enumerable&&!!t.writable&&void 0===t.get&&void 0===t.set})))throw new pt("Incompatible instance received: should contain only c/e/w properties without get/set");var r;return[Rs(e),t]}function Ps(e){return e[0]}function Ds(e,t,n={}){const r=!1!==n.noNullPrototype;return On(Is(On(e,t),{minLength:n.minKeys,maxLength:n.maxKeys,size:n.size,selector:Ps,depthIdentifier:n.depthIdentifier}),r?ss(!1):Ra()).map(Fs,Ls)}const Us=Number.POSITIVE_INFINITY,js=Number.MAX_SAFE_INTEGER,qs=Number.isInteger,Ws=Math.floor,Bs=Math.pow,zs=Math.min;class $s extends Ye{static from(e,t,n){if(0===e.length)throw new Error(`${n} expects at least one weighted arbitrary`);let r=0;for(let a=0;a!==e.length;++a){if(void 0===e[a].arbitrary)throw new Error(`${n} expects arbitraries to be specified`);const t=e[a].weight;if(r+=t,!qs(t))throw new Error(`${n} expects weights to be integer values`);if(t<0)throw new Error(`${n} expects weights to be superior or equal to 0`)}if(r<=0)throw new Error(`${n} expects the sum of weights to be strictly superior to 0`);const i={depthBias:va(t.depthSize,void 0!==t.maxDepth),maxDepth:void 0!=t.maxDepth?t.maxDepth:Us,withCrossShrink:!!t.withCrossShrink};return new $s(e,i,Xi(t.depthIdentifier))}constructor(e,t,n){super(),this.warbs=e,this.constraints=t,this.context=n;let r=0;this.cumulatedWeights=[];for(let i=0;i!==e.length;++i)r+=e[i].weight,zt(this.cumulatedWeights,r);this.totalWeight=r}generate(e,t){if(this.mustGenerateFirst())return this.safeGenerateForIndex(e,0,t);const n=e.nextInt(this.computeNegDepthBenefit(),this.totalWeight-1);for(let r=0;r!==this.cumulatedWeights.length;++r)if(n<this.cumulatedWeights[r])return this.safeGenerateForIndex(e,r,t);throw new Error("Unable to generate from fc.frequency")}canShrinkWithoutContext(e){return-1!==this.canShrinkWithoutContextIndex(e)}shrink(e,t){if(void 0!==t){const n=t,r=n.selectedIndex,i=n.originalBias,a=this.warbs[r].arbitrary.shrink(e,n.originalContext).map((e=>this.mapIntoValue(r,e,null,i)));if(null!==n.clonedMrngForFallbackFirst){void 0===n.cachedGeneratedForFirst&&(n.cachedGeneratedForFirst=this.safeGenerateForIndex(n.clonedMrngForFallbackFirst,0,i));const e=n.cachedGeneratedForFirst;return Be.of(e).join(a)}return a}const n=this.canShrinkWithoutContextIndex(e);return-1===n?Be.nil():this.defaultShrinkForFirst(n).join(this.warbs[n].arbitrary.shrink(e,void 0).map((e=>this.mapIntoValue(n,e,null,void 0))))}defaultShrinkForFirst(e){++this.context.depth;try{if(!this.mustFallbackToFirstInShrink(e)||void 0===this.warbs[0].fallbackValue)return Be.nil()}finally{--this.context.depth}const t=new He(this.warbs[0].fallbackValue.default,void 0);return Be.of(this.mapIntoValue(0,t,null,void 0))}canShrinkWithoutContextIndex(e){if(this.mustGenerateFirst())return this.warbs[0].arbitrary.canShrinkWithoutContext(e)?0:-1;try{++this.context.depth;for(let t=0;t!==this.warbs.length;++t){const n=this.warbs[t];if(0!==n.weight&&n.arbitrary.canShrinkWithoutContext(e))return t}return-1}finally{--this.context.depth}}mapIntoValue(e,t,n,r){const i={selectedIndex:e,originalBias:r,originalContext:t.context,clonedMrngForFallbackFirst:n};return new He(t.value,i)}safeGenerateForIndex(e,t,n){++this.context.depth;try{const r=this.warbs[t].arbitrary.generate(e,n),i=this.mustFallbackToFirstInShrink(t)?e.clone():null;return this.mapIntoValue(t,r,i,n)}finally{--this.context.depth}}mustGenerateFirst(){return this.constraints.maxDepth<=this.context.depth}mustFallbackToFirstInShrink(e){return 0!==e&&this.constraints.withCrossShrink&&0!==this.warbs[0].weight}computeNegDepthBenefit(){const e=this.constraints.depthBias;if(e<=0||0===this.warbs[0].weight)return 0;const t=Ws(Bs(1+e,this.context.depth))-1;return-zs(this.totalWeight*t,js)||0}}function Vs(e){return nt(e)?{arbitrary:e,weight:1}:e}function Gs(...e){const t=e[0];if(null!=(n=t)&&"object"===typeof n&&!("generate"in n)&&!("arbitrary"in n)&&!("weight"in n)){const n=Wt(Vt(e,1),Vs);return $s.from(n,t,"fc.oneof")}var n;const r=Wt(e,Vs);return $s.from(r,{},"fc.oneof")}const Js=Number.isInteger;function Hs(e){const t="number"===typeof e?e:e&&void 0!==e.max?e.max:2147483647;if(t<0)throw new Error("fc.nat value should be greater than or equal to 0");if(!Js(t))throw new Error("fc.nat maximum value should be an integer");return new Ki(0,t)}function Ks(e){let t=null;return function(n){null===t&&(t=function(e){const t={mapping:new Map,negativeZeroIndex:void 0};let n=0;for(let r=0;r!==e.length;++r){const i=e[r];for(let e=0;e!==i.num;++e){const r=i.build(e);0===r&&1/r===Number.NEGATIVE_INFINITY?t.negativeZeroIndex=n:t.mapping.set(r,n),++n}}return t}(e));const r=Object.is(n,-0)?t.negativeZeroIndex:t.mapping.get(n);if(void 0===r)throw new Error("Unknown value encountered cannot be built using this mapToConstant");return r}}function Ys(...e){return Hs({max:function(e){if(0===e.length)throw new Error("fc.mapToConstant expects at least one option");let t=0;for(let n=0;n!==e.length;++n){if(e[n].num<0)throw new Error("fc.mapToConstant expects all options to have a number of entries greater or equal to zero");t+=e[n].num}if(0===t)throw new Error("fc.mapToConstant expects at least one choice among options");return t}(e)-1}).map(function(e){return function(t){let n=-1,r=0;for(;t>=r;)r+=e[++n].num;return e[n].build(t-r+e[n].num)}}(e),Ks(e))}const Zs=String.fromCharCode,Qs={num:26,build:e=>Zs(e+97)},Xs={num:26,build:e=>Zs(e+65)},eo={num:10,build:e=>Zs(e+48)};const to=Qa().map((function(e){const t=It(e);return e!==t?t:`%${mn(pn(e,0),16)}`}),(function(e){if("string"!==typeof e)throw new Error("Unsupported");return decodeURIComponent(e)})),no=e=>Ys(Qs,{num:e.length,build:t=>e[t]}),ro=e=>Ys(Qs,eo,{num:e.length,build:t=>e[t]}),io=e=>Ys(Qs,Xs,eo,{num:e.length,build:t=>e[t]}),ao=e=>Gs({weight:10,arbitrary:io(e)},{weight:1,arbitrary:to});function so(e,t={}){const n=null==t.freq?5:t.freq,r=bn(t,"nil")?t.nil:null,i=[{arbitrary:ss(r),weight:1,fallbackValue:{default:r}},{arbitrary:e,weight:n}],a={withCrossShrink:!0,depthSize:t.depthSize,maxDepth:t.maxDepth,depthIdentifier:t.depthIdentifier};return $s.from(i,a,"fc.option")}function oo(e){return qt(e,"")}const co=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__proto__","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","apply","arguments","bind","call","caller","length","name","prototype","key","ref"];function lo(e,t,n){let r;try{r=n(e)}catch(i){return}for(const a of r)if(!t.canShrinkWithoutContext(a))return;return r}function uo(e,t){const n=[];for(const r of co){const i=lo(r,e,t);void 0!==i&&zt(n,i)}return n}const fo=Object.assign;function po(e,t={}){const n=function(e,t){return function(n){if("string"!==typeof n)throw new Error("Unsupported value");const r=void 0!==t.minLength?t.minLength:0,i=void 0!==t.maxLength?t.maxLength:ha;if(0===n.length){if(r>0)throw new Error("Unable to unmap received string");return[]}const a=[{endIndexChunks:0,nextStartIndex:1,chunks:[]}];for(;a.length>0;){const t=function(e){try{return e.pop}catch(t){return}}(s=a)===Rt?s.pop():st(Rt,s,[]);for(let s=t.nextStartIndex;s<=n.length;++s){const o=un(n,t.endIndexChunks,s);if(e.canShrinkWithoutContext(o)){const e=[...t.chunks,o];if(s===n.length){if(e.length<r||e.length>i)break;return e}zt(a,{endIndexChunks:t.endIndexChunks,nextStartIndex:s+1,chunks:t.chunks}),zt(a,{endIndexChunks:s,nextStartIndex:s+1,chunks:e});break}}}var s;throw new Error("Unable to unmap received string")}}(e,t),r=uo(e,n);return Ea(e,fo(fo({},t),{experimentalCustomSlices:r})).map(oo,n)}function ho(e){return!(e.length>63)&&(e.length<4||"x"!==e[0]||"n"!==e[1]||"-"!==e[2]||"-"!==e[3])}const mo=Symbol("adapted-value");class go extends Ye{constructor(e,t){super(),this.sourceArb=e,this.adapter=t,this.adaptValue=e=>function(e,t){const n=t(e.value_);return n.adapted?new He(n.value,mo):e}(e,t)}generate(e,t){const n=this.sourceArb.generate(e,t);return this.adaptValue(n)}canShrinkWithoutContext(e){return this.sourceArb.canShrinkWithoutContext(e)&&!this.adapter(e).adapted}shrink(e,t){return t===mo?this.sourceArb.canShrinkWithoutContext(e)?this.sourceArb.shrink(e,void 0).map(this.adaptValue):Be.nil():this.sourceArb.shrink(e,t).map(this.adaptValue)}}function yo(e,t){return new go(e,t)}function bo([e,t]){return null===t?e:`${e}${t[0]}${t[1]}`}function So(e){if("string"!==typeof e||0===e.length)throw new Error("Unsupported");return 1===e.length?[e[0],null]:[e[0],[un(e,1,e.length-1),e[e.length-1]]]}function vo(e){return`${qt(e[0],".")}.${e[1]}`}function wo(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=e.lastIndexOf(".");return[ln(un(e,0,t),"."),un(e,t+1)]}function Eo(e){const[t,n]=e;let r=n.length;for(let i=0;i!==t.length;++i)if(r+=1+t[i].length,r>255)return{adapted:!0,value:[Vt(t,0,i),n]};return{adapted:!1,value:e}}function _o(e={}){const t=wa(e.size),n=ba("-1",t),r=po(no([]),{minLength:2,maxLength:63,size:n});return yo(On(Ea(function(e){const t=ro([]);return On(t,so(On(po(ro(["-"]),{size:e,maxLength:61}),t))).map(bo,So).filter(ho)}(t),{size:n,minLength:1,maxLength:127}),r),Eo).map(vo,wo)}function ko(e){let t=e[0].length;for(let n=1;n!==e.length;++n)if(t+=1+e[n].length,t>64)return{adapted:!0,value:Vt(e,0,n)};return{adapted:!1,value:e}}function xo(e){return qt(e,".")}function Io(e){if("string"!==typeof e)throw new Error("Unsupported");return ln(e,".")}function To(e){return`${e[0]}@${e[1]}`}function Oo(e){if("string"!==typeof e)throw new Error("Unsupported");return ln(e,"@",2)}function Ao(e={}){return On(yo(Ea(po(ro(["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"]),{minLength:1,maxLength:64,size:e.size}),{minLength:1,maxLength:32,size:e.size}),ko).map(xo,Io),_o({size:e.size})).map(To,Oo)}const No={sign:1,data:[0,0]},Mo={sign:1,data:[0,1]};function Co(e){return 0===e.data[0]&&0===e.data[1]}function Ro(e){return-1===e.sign&&!Co(e)}function Fo(e){return 1===e.sign&&!Co(e)}function Lo(e,t){return e.data[0]===t.data[0]&&e.data[1]===t.data[1]&&(e.sign===t.sign||0===e.data[0]&&0===e.data[1])}function Po(e,t){return e[0]<t[0]||e[0]===t[0]&&e[1]<t[1]}function Do(e,t){return e.sign===t.sign?1===e.sign?Po(e.data,t.data):Po(t.data,e.data):-1===e.sign&&(!Co(e)||!Co(t))}function Uo(e){return{sign:e.sign,data:[e.data[0],e.data[1]]}}function jo(e,t){let n=0,r=e[1]-t[1];return r<0&&(n=1,r>>>=0),[e[0]-t[0]-n,r]}function qo(e,t){if(1===e.sign&&-1===t.sign){const n=e.data[1]+t.data[1];return{sign:1,data:[e.data[0]+t.data[0]+(n>4294967295?1:0)>>>0,n>>>0]}}return{sign:1,data:1===e.sign?jo(e.data,t.data):jo(t.data,e.data)}}function Wo(e,t){if(Do(e,t)){const n=qo(t,e);return n.sign=-1,n}return qo(e,t)}function Bo(e,t){return Co(t)?Co(e)?Uo(No):Uo(e):Wo(e,function(e){return{sign:-e.sign,data:[e.data[0],e.data[1]]}}(t))}function zo(e){return{sign:e.sign,data:[Math.floor(e.data[0]/2),(e.data[0]%2===1?2147483648:0)+Math.floor(e.data[1]/2)]}}function $o(e){return{sign:e.sign,data:[0,Math.floor(Math.log(4294967296*e.data[0]+e.data[1])/Math.log(2))]}}class Vo extends Ye{constructor(e,t){super(),this.min=e,this.max=t,this.biasedRanges=null}generate(e,t){const n=this.computeGenerateRange(e,t),r=e.nextArrayInt(n.min,n.max);return 1===r.data.length&&r.data.unshift(0),new He(r,void 0)}computeGenerateRange(e,t){if(void 0===t||1!==e.nextInt(1,t))return{min:this.min,max:this.max};const n=this.retrieveBiasedRanges();if(1===n.length)return n[0];const r=e.nextInt(-2*(n.length-1),n.length-2);return r<0?n[0]:n[r+1]}canShrinkWithoutContext(e){const t=e;return"object"===typeof e&&null!==e&&(-1===t.sign||1===t.sign)&&Array.isArray(t.data)&&2===t.data.length&&(Do(this.min,t)&&Do(t,this.max)||Lo(this.min,t)||Lo(this.max,t))}shrinkArrayInt64(e,t,n){const r=Wo(e,t);return ze(function*(){let i=n?void 0:t;for(let t=n?r:zo(r);!Co(t);t=zo(t)){const n=Wo(e,t);yield new He(n,i),i=n}}())}shrink(e,t){if(!Vo.isValidContext(e,t)){const t=this.defaultTarget();return this.shrinkArrayInt64(e,t,!0)}return this.isLastChanceTry(e,t)?Be.of(new He(t,void 0)):this.shrinkArrayInt64(e,t,!1)}defaultTarget(){return Fo(this.min)||Ro(this.max)?Ro(this.min)?this.max:this.min:No}isLastChanceTry(e,t){return!Co(e)&&(1===e.sign?Lo(e,Bo(t,Mo))&&Fo(Wo(e,this.min)):Lo(e,Wo(t,Mo))&&Ro(Wo(e,this.max)))}static isValidContext(e,t){if(void 0===t)return!1;if("object"!==typeof t||null===t||!("sign"in t)||!("data"in t))throw new Error("Invalid context type passed to ArrayInt64Arbitrary (#1)");return!0}retrieveBiasedRanges(){if(null!=this.biasedRanges)return this.biasedRanges;if(Lo(this.min,this.max))return this.biasedRanges=[{min:this.min,max:this.max}],this.biasedRanges;const e=Ro(this.min),t=Fo(this.max);if(e&&t){const e=$o(this.min),t=$o(this.max);this.biasedRanges=[{min:e,max:t},{min:Wo(this.max,t),max:this.max},{min:this.min,max:Wo(this.min,e)}]}else{const t=$o(Wo(this.max,this.min)),n={min:this.min,max:Bo(this.min,t)},r={min:Wo(this.max,t),max:this.max};this.biasedRanges=e?[r,n]:[n,r]}return this.biasedRanges}}function Go(e,t){return new Vo(e,t)}const Jo=Number.NEGATIVE_INFINITY,Ho=Number.POSITIVE_INFINITY,Ko=Number.EPSILON,Yo={sign:1,data:[2146435072,0]},Zo={sign:-1,data:[2146435072,1]},Qo=new Float64Array(1),Xo=new Uint32Array(Qo.buffer,Qo.byteOffset);function ec(e){const{0:t,1:n}=(r=e,Qo[0]=r,[Xo[1],Xo[0]]);var r;const i=t>>>20&2047;let a=0===i?0:1;return a+=(4294967296*(1048575&t)+n)/2**52,a*=0===t>>>31?1:-1,{exponent:0===i?-1022:i-1023,significand:a}}function tc(e){return[~~(e/4294967296),e>>>0]}function nc(e,t){if(-1022===e){return tc(t*2**52)}const n=(e+1023)*2**20,r=tc((t-1)*2**52);return r[0]+=n,r}function rc(e){if(e===Ho)return Uo(Yo);if(e===Jo)return Uo(Zo);const t=ec(e),n=t.exponent,r=t.significand;if(e>0||0===e&&1/e===Ho)return{sign:1,data:nc(n,r)};{const e=nc(n,-r);return 4294967295===e[1]?(e[0]+=1,e[1]=0):e[1]+=1,{sign:-1,data:e}}}function ic(e){if(-1===e.sign){const t={sign:1,data:[e.data[0],e.data[1]]};return 0===t.data[1]?(t.data[0]-=1,t.data[1]=4294967295):t.data[1]-=1,-ic(t)}if(Lo(e,Yo))return Ho;if(e.data[0]<2097152)return 5e-324*(4294967296*e.data[0]+e.data[1]);const t=e.data[0]-2097152,n=(t>>20)-1021;return(1+((1048575&t)*2**32+e.data[1])*Ko)*2**n}const ac=Number.isInteger,sc=Object.is,oc=Number.NEGATIVE_INFINITY,cc=Number.POSITIVE_INFINITY;function lc(e,t,n,r){const{noDefaultInfinity:i=!1,minExcluded:a=!1,maxExcluded:s=!1,min:o=(i?-t:oc),max:c=(i?t:cc)}=e,l=a?o<-n?-r:Math.max(o,-n):o===oc?Math.max(o,-r):Math.max(o,-n),u=s?c>n?r:Math.min(c,n):c===cc?Math.min(c,r):Math.min(c,n);return{noDefaultInfinity:!1,minExcluded:a||(o!==oc||a)&&ac(l),maxExcluded:s||(c!==cc||s)&&ac(u),min:sc(l,-0)?0:l,max:sc(u,0)?-0:u,noNaN:e.noNaN||!1}}const uc=Number.NEGATIVE_INFINITY,fc=Number.POSITIVE_INFINITY,dc=Number.MAX_VALUE,pc=4503599627370495.5,hc=4503599627370496;function mc(e){return e===hc?fc:e===-hc?uc:e}function gc(e){if("number"!==typeof e)throw new Error("Unsupported type");return e===fc?hc:e===uc?-hc:e}const yc=Number.isInteger,bc=Number.isNaN,Sc=Number.NEGATIVE_INFINITY,vc=Number.POSITIVE_INFINITY,wc=Number.MAX_VALUE,Ec=Number.NaN;function _c(e,t){if(bc(e))throw new Error("fc.double constraints."+t+" must be a 64-bit float");return rc(e)}function kc(e){if("number"!==typeof e)throw new Error("Unsupported type");return rc(e)}function xc(e){return!yc(e)}function Ic(e){const{noDefaultInfinity:t=!1,noNaN:n=!1,minExcluded:r=!1,maxExcluded:i=!1,min:a=(t?-wc:Sc),max:s=(t?wc:vc)}=e,o=_c(a,"min"),c=r?Bo(o,Mo):o,l=_c(s,"max"),u=i?Wo(l,Mo):l;if(Do(u,c))throw new Error("fc.double constraints.min must be smaller or equal to constraints.max");if(n)return Go(c,u).map(ic,kc);const f=Fo(u),d=f?c:Wo(c,Mo),p=f?Bo(u,Mo):u;return Go(d,p).map((e=>Do(u,e)||Do(e,c)?Ec:ic(e)),(e=>{if("number"!==typeof e)throw new Error("Unsupported type");return bc(e)?Lo(u,p)?d:p:rc(e)}))}function Tc(e={}){return e.noInteger?Ic(function(e){return lc(e,dc,pc,hc)}(e)).map(mc,gc).filter(xc):Ic(e)}const Oc=Number.NEGATIVE_INFINITY,Ac=Number.POSITIVE_INFINITY,Nc=2**127*(1+8388607/2**23),Mc=2139095040,Cc=-2139095041,Rc=new Float32Array(1),Fc=new Uint32Array(Rc.buffer,Rc.byteOffset);function Lc(e){const t=function(e){return Rc[0]=e,Fc[0]}(e),n=t>>>23&255;let r=0===n?0:1;return r+=(8388607&t)/2**23,r*=0===t>>>31?1:-1,{exponent:0===n?-126:n-127,significand:r}}function Pc(e,t){return-126===e?8388608*t:8388608*(e+127)+8388608*(t-1)}function Dc(e){if(e===Ac)return Mc;if(e===Oc)return Cc;const t=Lc(e),n=t.exponent,r=t.significand;return e>0||0===e&&1/e===Ac?Pc(n,r):-Pc(n,-r)-1}function Uc(e){if(e<0)return-Uc(-e-1);if(e===Mc)return Ac;if(e<16777216)return e*2**-149;const t=e-16777216;return(1+(8388607&t)/8388608)*2**((t>>23)-125)}const jc=Number.NEGATIVE_INFINITY,qc=Number.POSITIVE_INFINITY,Wc=Nc,Bc=8388607.5,zc=8388608;function $c(e){return e===zc?qc:e===-zc?jc:e}function Vc(e){if("number"!==typeof e)throw new Error("Unsupported type");return e===qc?zc:e===jc?-zc:e}const Gc=Number.isInteger,Jc=Number.isNaN,Hc=Math.fround,Kc=Number.NEGATIVE_INFINITY,Yc=Number.POSITIVE_INFINITY,Zc=Number.NaN;function Qc(e,t){const n="fc.float constraints."+t+" must be a 32-bit float - you can convert any double to a 32-bit float by using `Math.fround(myDouble)`";if(Jc(e)||Hc(e)!==e)throw new Error(n);return Dc(e)}function Xc(e){if("number"!==typeof e)throw new Error("Unsupported type");return Dc(e)}function el(e){return!Gc(e)}function tl(e){const{noDefaultInfinity:t=!1,noNaN:n=!1,minExcluded:r=!1,maxExcluded:i=!1,min:a=(t?-Nc:Kc),max:s=(t?Nc:Yc)}=e,o=Qc(a,"min"),c=r?o+1:o,l=Qc(s,"max"),u=i?l-1:l;if(c>u)throw new Error("fc.float constraints.min must be smaller or equal to constraints.max");if(n)return Zi({min:c,max:u}).map(Uc,Xc);const f=u>0?c:c-1,d=u>0?u+1:u;return Zi({min:f,max:d}).map((e=>e>u||e<c?Zc:Uc(e)),(e=>{if("number"!==typeof e)throw new Error("Unsupported type");return Jc(e)?u!==d?d:f:Dc(e)}))}function nl(e={}){return e.noInteger?tl(function(e){return lc(e,Wc,Bc,zc)}(e)).map($c,Vc).filter(el):tl(e)}function rl(e){return e.replace(/\*\//g,"*\\/")}const il=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function al(e){let t=4294967295;for(let n=0;n<e.length;++n){const r=pn(e,n);if(r<128)t=il[255&t^r]^t>>8;else if(r<2048)t=il[255&t^(192|r>>6&31)]^t>>8,t=il[255&t^(128|63&r)]^t>>8;else if(r>=55296&&r<57344){const i=pn(e,++n);if(r>=56320||i<56320||i>57343||Number.isNaN(i))n-=1,t=il[255&t^239]^t>>8,t=il[255&t^191]^t>>8,t=il[255&t^189]^t>>8;else{const e=64+(1023&r),n=1023&i;t=il[255&t^(240|e>>8&7)]^t>>8,t=il[255&t^(128|e>>2&63)]^t>>8,t=il[255&t^(128|n>>6&15|(3&e)<<4)]^t>>8,t=il[255&t^(128|63&n)]^t>>8}}else t=il[255&t^(224|r>>12&15)]^t>>8,t=il[255&t^(128|r>>6&63)]^t>>8,t=il[255&t^(128|63&r)]^t>>8}return 2147483648+(0|t)}function sl(e){return e.noShrink()}const ol=Object.assign,cl=Object.keys;function ll(e){return On(sl(Zi()),sl(Zi({min:1,max:4294967295}))).map((([t,n])=>{const r=()=>{const i={};return ol(((r,a)=>{const s=Zr(r),o=Zr(a),c=al(`${t}${s}`)%n,l=al(`${t}${o}`)%n,u=e(c,l);return i[`[${s},${o}]`]=u,u}),{toString:()=>{const r=cl(i).sort().map((e=>`${e} => ${Zr(i[e])}`)).map((e=>`/* ${rl(e)} */`));return`function(a, b) {\n  // With hash and stringify coming from fast-check${0!==r.length?`\n  ${qt(r,"\n  ")}`:""}\n  const cmp = ${e};\n  const hA = hash('${t}' + stringify(a)) % ${n};\n  const hB = hash('${t}' + stringify(b)) % ${n};\n  return cmp(hA, hB);\n}`},[$e]:r})};return r()}))}const ul=Object.assign;function fl(){return ll(ul(((e,t)=>e<t),{toString:()=>"(hA, hB) => hA < hB"}))}const dl=Object.assign;function pl(){return ll(dl(((e,t)=>e-t),{toString:()=>"(hA, hB) => hA - hB"}))}const hl=Object.defineProperties,ml=Object.keys;function gl(e){return On(Ea(e,{minLength:1}),sl(Zi())).map((([e,t])=>{const n=()=>{const r={};function i(e){const n=Wt(Wt(Gt(ml(r)),(e=>`${e} => ${Zr(r[e])}`)),(e=>`/* ${rl(e)} */`));return`function(...args) {\n  // With hash and stringify coming from fast-check${0!==n.length?`\n  ${n.join("\n  ")}`:""}\n  const outs = ${e};\n  return outs[hash('${t}' + stringify(args)) % outs.length];\n}`}return hl(((...n)=>{const i=Zr(n),a=e[al(`${t}${i}`)%e.length];return r[i]=a,Ve(a)?a[$e]():a}),{toString:{value:()=>i(Zr(e))},[$r]:{value:()=>i(Zr(e))},[Gr]:{value:async()=>i(await Xr(e))},[$e]:{value:n,configurable:!0}})};return n()}))}const yl=Number.MIN_SAFE_INTEGER,bl=Number.MAX_SAFE_INTEGER;function Sl(){return new Ki(yl,bl)}const vl=Number.MAX_SAFE_INTEGER;function wl(){return new Ki(0,vl)}const El=Number.parseInt;function _l(e){const[t,n]=e;switch(t){case"oct":return`0${mn(n,8)}`;case"hex":return`0x${mn(n,16)}`;default:return`${n}`}}function kl(e,t){const n=El(e,t);if(mn(n,t)!==e)throw new Error("Invalid value");return n}function xl(e){if("string"!==typeof e)throw new Error("Invalid type");return e.length>=2&&"0"===e[0]?"x"===e[1]?["hex",kl(un(e,2),16)]:["oct",kl(un(e,1),8)]:["dec",kl(e,10)]}function Il(e){return qt(e,".")}function Tl(e){if("string"!==typeof e)throw new Error("Invalid type");return Wt(ln(e,"."),(e=>kl(e,10)))}function Ol(){return On(Hs(255),Hs(255),Hs(255),Hs(255)).map(Il,Tl)}function Al(e){return On(Pa("dec","oct","hex"),Hs(e)).map(_l,xl)}function Nl(e){return qt(e,".")}function Ml(e){if("string"!==typeof e)throw new Error("Invalid type");return ln(e,".")}function Cl(){return Gs(On(Al(255),Al(255),Al(255),Al(255)).map(Nl,Ml),On(Al(255),Al(255),Al(65535)).map(Nl,Ml),On(Al(255),Al(16777215)).map(Nl,Ml),Al(4294967295))}function Rl(e){return qt(e,"")}function Fl(e){if("string"!==typeof e)throw new Error("Cannot unmap the passed value");return[...e]}const Ll=Object.assign;function Pl(e={}){const t=ts(),n=uo(t,Fl);return Ea(t,Ll(Ll({},e),{experimentalCustomSlices:n})).map(Rl,Fl)}function Dl(e){return 0===e.length?[]:ln(e,":")}function Ul(e){const t=ln(e,":");return t.length>=2&&t[t.length-1].length<=4?[Vt(t,0,t.length-2),`${t[t.length-2]}:${t[t.length-1]}`]:[Vt(t,0,t.length-1),t[t.length-1]]}function jl(e){return`${qt(e[0],":")}:${e[1]}`}function ql(e){if("string"!==typeof e)throw new Error("Invalid type");return Ul(e)}function Wl(e){return`::${qt(e[0],":")}:${e[1]}`}function Bl(e){if("string"!==typeof e)throw new Error("Invalid type");if(!function(e,...t){return function(e){try{return e.startsWith}catch(t){return}}(e)===en?e.startsWith(...t):st(en,e,t)}(e,"::"))throw new Error("Invalid value");return Ul(un(e,2))}function zl(e){return`${qt(e[0],":")}::${qt(e[1],":")}:${e[2]}`}function $l(e){if("string"!==typeof e)throw new Error("Invalid type");const[t,n]=ln(e,"::",2),[r,i]=Ul(n);return[Dl(t),r,i]}function Vl(e){return zl([e[0],[e[1]],e[2]])}function Gl(e){const t=$l(e);return[t[0],qt(t[1],":"),t[2]]}function Jl(e){return`${qt(e[0],":")}::${e[1]}`}function Hl(e){if("string"!==typeof e)throw new Error("Invalid type");const[t,n]=ln(e,"::",2);return[Dl(t),n]}function Kl(e){return`${qt(e[0],":")}::`}function Yl(e){if("string"!==typeof e)throw new Error("Invalid type");if(!function(e,...t){return function(e){try{return e.endsWith}catch(t){return}}(e)===tn?e.endsWith(...t):st(tn,e,t)}(e,"::"))throw new Error("Invalid value");return[Dl(un(e,0,e.length-2))]}function Zl([e,t]){return`${e}:${t}`}function Ql(e){if("string"!==typeof e)throw new Error("Invalid type");if(!e.includes(":"))throw new Error("Invalid value");return e.split(":",2)}function Xl(){const e=Pl({minLength:1,maxLength:4,size:"max"}),t=Gs(On(e,e).map(Zl,Ql),Ol());return Gs(On(Ea(e,{minLength:6,maxLength:6,size:"max"}),t).map(jl,ql),On(Ea(e,{minLength:5,maxLength:5,size:"max"}),t).map(Wl,Bl),On(Ea(e,{minLength:0,maxLength:1,size:"max"}),Ea(e,{minLength:4,maxLength:4,size:"max"}),t).map(zl,$l),On(Ea(e,{minLength:0,maxLength:2,size:"max"}),Ea(e,{minLength:3,maxLength:3,size:"max"}),t).map(zl,$l),On(Ea(e,{minLength:0,maxLength:3,size:"max"}),Ea(e,{minLength:2,maxLength:2,size:"max"}),t).map(zl,$l),On(Ea(e,{minLength:0,maxLength:4,size:"max"}),e,t).map(Vl,Gl),On(Ea(e,{minLength:0,maxLength:5,size:"max"}),t).map(Jl,Hl),On(Ea(e,{minLength:0,maxLength:6,size:"max"}),e).map(Jl,Hl),On(Ea(e,{minLength:0,maxLength:7,size:"max"})).map(Kl,Yl))}class eu extends Ye{constructor(e){super(),this.name=e,this.underlying=null}generate(e,t){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.generate(e,t)}canShrinkWithoutContext(e){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.canShrinkWithoutContext(e)}shrink(e,t){if(!this.underlying)throw new Error(`Lazy arbitrary ${JSON.stringify(this.name)} not correctly initialized`);return this.underlying.shrink(e,t)}}const tu=Object.create;function nu(e){const t=tu(null),n=e((e=>(bn(t,e)||(t[e]=new eu(String(e))),t[e])));for(const r in n){if(!bn(n,r))continue;const e=t[r],i=void 0!==e?e:new eu(r);i.underlying=n[r],t[r]=i}return n}function ru(e){return qt(Wt(e,(e=>","===e[e.length-1]?un(e,0,e.length-1):e))," ")}function iu(e){let t=qt(e," ");return","===t[t.length-1]&&(t=un(t,0,t.length-1)),dn(t[0])+un(t,1)+"."}function au(e){return qt(e," ")}function su(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=ln(e,". ");for(let n=0;n<t.length-1;++n)t[n]+=".";return t}const ou=(e,t)=>({arbitrary:ss(e),weight:t});function cu(e={}){const{maxCount:t,mode:n="words",size:r}=e;if(void 0!==t&&t<1)throw new Error("lorem has to produce at least one word/sentence");const i=Gs(ou("non",6),ou("adipiscing",5),ou("ligula",5),ou("enim",5),ou("pellentesque",5),ou("in",5),ou("augue",5),ou("et",5),ou("nulla",5),ou("lorem",4),ou("sit",4),ou("sed",4),ou("diam",4),ou("fermentum",4),ou("ut",4),ou("eu",4),ou("aliquam",4),ou("mauris",4),ou("vitae",4),ou("felis",4),ou("ipsum",3),ou("dolor",3),ou("amet,",3),ou("elit",3),ou("euismod",3),ou("mi",3),ou("orci",3),ou("erat",3),ou("praesent",3),ou("egestas",3),ou("leo",3),ou("vel",3),ou("sapien",3),ou("integer",3),ou("curabitur",3),ou("convallis",3),ou("purus",3),ou("risus",2),ou("suspendisse",2),ou("lectus",2),ou("nec,",2),ou("ultricies",2),ou("sed,",2),ou("cras",2),ou("elementum",2),ou("ultrices",2),ou("maecenas",2),ou("massa,",2),ou("varius",2),ou("a,",2),ou("semper",2),ou("proin",2),ou("nec",2),ou("nisl",2),ou("amet",2),ou("duis",2),ou("congue",2),ou("libero",2),ou("vestibulum",2),ou("pede",2),ou("blandit",2),ou("sodales",2),ou("ante",2),ou("nibh",2),ou("ac",2),ou("aenean",2),ou("massa",2),ou("suscipit",2),ou("sollicitudin",2),ou("fusce",2),ou("tempus",2),ou("aliquam,",2),ou("nunc",2),ou("ullamcorper",2),ou("rhoncus",2),ou("metus",2),ou("faucibus,",2),ou("justo",2),ou("magna",2),ou("at",2),ou("tincidunt",2),ou("consectetur",1),ou("tortor,",1),ou("dignissim",1),ou("congue,",1),ou("non,",1),ou("porttitor,",1),ou("nonummy",1),ou("molestie,",1),ou("est",1),ou("eleifend",1),ou("mi,",1),ou("arcu",1),ou("scelerisque",1),ou("vitae,",1),ou("consequat",1),ou("in,",1),ou("pretium",1),ou("volutpat",1),ou("pharetra",1),ou("tempor",1),ou("bibendum",1),ou("odio",1),ou("dui",1),ou("primis",1),ou("faucibus",1),ou("luctus",1),ou("posuere",1),ou("cubilia",1),ou("curae,",1),ou("hendrerit",1),ou("velit",1),ou("mauris,",1),ou("gravida",1),ou("ornare",1),ou("ut,",1),ou("pulvinar",1),ou("varius,",1),ou("turpis",1),ou("nibh,",1),ou("eros",1),ou("id",1),ou("aliquet",1),ou("quis",1),ou("lobortis",1),ou("consectetuer",1),ou("morbi",1),ou("vehicula",1),ou("tortor",1),ou("tellus,",1),ou("id,",1),ou("eu,",1),ou("quam",1),ou("feugiat,",1),ou("posuere,",1),ou("iaculis",1),ou("lectus,",1),ou("tristique",1),ou("mollis,",1),ou("nisl,",1),ou("vulputate",1),ou("sem",1),ou("vivamus",1),ou("placerat",1),ou("imperdiet",1),ou("cursus",1),ou("rutrum",1),ou("iaculis,",1),ou("augue,",1),ou("lacus",1));if("sentences"===n){const e=Ea(i,{minLength:1,size:"small"}).map(iu,(a=i,function(e){if("string"!==typeof e)throw new Error("Unsupported type");if(e.length<2||"."!==e[e.length-1]||","===e[e.length-2]||dn(fn(e[0]))!==e[0])throw new Error("Unsupported value");const t=[],n=ln(fn(e[0])+un(e,1,e.length-1)," ");for(let r=0;r!==n.length;++r){const e=n[r];if(a.canShrinkWithoutContext(e))zt(t,e);else{if(r!==n.length-1||!a.canShrinkWithoutContext(e+","))throw new Error("Unsupported word");zt(t,e+",")}}return t}));return Ea(e,{minLength:1,maxLength:t,size:r}).map(au,su)}return Ea(i,{minLength:1,maxLength:t,size:r}).map(ru,function(e){return function(t){if("string"!==typeof t)throw new Error("Unsupported type");const n=[];for(const r of ln(t," "))if(e.canShrinkWithoutContext(r))zt(n,r);else{if(!e.canShrinkWithoutContext(r+","))throw new Error("Unsupported word");zt(n,r+",")}return n}}(i));var a}let lu=10;function uu(e){const t={};return n=>{const r=void 0!==n?n:lu;if(!bn(t,r)){const n=lu;lu=r-1,t[r]=e(r),lu=n}return t[r]}}function fu(e,t){const n=(ct(1)<<ct(t))-ct(1),r=e&n;let i=function(e){let t=0;for(;e>ct(0);)e&ct(1)&&++t,e>>=ct(1);return t}(e-r),a=r;for(let s=ct(1);s<=n&&0!==i;s<<=ct(1))a&s||(a|=s,--i);return a}function du(e,t){const n=[];for(let r=e.length-1;-1!==r;--r)t(e[r])!==e[r]&&zt(n,r);return n}function pu(e,t,n){let r=ct(0);for(let i=0,a=ct(1);i!==n.length;++i,a<<=ct(1))e[n[i]]!==t[n[i]]&&(r|=a);return r}function hu(e,t,n,r){for(let i=0,a=ct(1);i!==n.length;++i,a<<=ct(1))t&a&&(e[n[i]]=r(e[n[i]]))}class mu extends Ye{constructor(e,t,n){super(),this.stringArb=e,this.toggleCase=t,this.untoggleAll=n}buildContextFor(e,t){return{rawString:e.value,rawStringContext:e.context,flags:t.value,flagsContext:t.context}}generate(e,t){const n=this.stringArb.generate(e,t),r=[...n.value],i=du(r,this.toggleCase),a=Aa(i.length).generate(e,void 0);return hu(r,a.value,i,this.toggleCase),new He(qt(r,""),this.buildContextFor(n,a))}canShrinkWithoutContext(e){return"string"===typeof e&&(void 0!==this.untoggleAll?this.stringArb.canShrinkWithoutContext(this.untoggleAll(e)):this.stringArb.canShrinkWithoutContext(e))}shrink(e,t){let n;if(void 0!==t)n=t;else if(void 0!==this.untoggleAll){const t=this.untoggleAll(e),r=[...e],i=[...t],a=du(i,this.toggleCase);n={rawString:t,rawStringContext:void 0,flags:pu(i,r,a),flagsContext:void 0}}else n={rawString:e,rawStringContext:void 0,flags:ct(0),flagsContext:void 0};const r=n.rawString,i=n.flags;return this.stringArb.shrink(r,n.rawStringContext).map((e=>{const t=[...e.value],n=du(t,this.toggleCase),r=fu(i,n.length);return hu(t,r,n,this.toggleCase),new He(qt(t,""),this.buildContextFor(e,new He(r,void 0)))})).join(wn((()=>{const e=[...r],t=du(e,this.toggleCase);return Aa(t.length).shrink(i,n.flagsContext).map((i=>{const a=Vt(e);return hu(a,i.value,t,this.toggleCase),new He(qt(a,""),this.buildContextFor(new He(r,n.rawStringContext),i))}))})))}}function gu(e){const t=dn(e);return t!==e?t:fn(e)}function yu(e,t){if("undefined"===typeof ct)throw new pt("mixedCase requires BigInt support");const n=t&&t.toggleCase||gu,r=t&&t.untoggleAll;return new mu(e,n,r)}function bu(e){return ht.from(e)}function Su(e){if(!(e instanceof ht))throw new Error("Unexpected type");return[...e]}function vu(e={}){return Ea(nl(e),e).map(bu,Su)}function wu(e){return mt.from(e)}function Eu(e){if(!(e instanceof mt))throw new Error("Unexpected type");return[...e]}function _u(e={}){return Ea(Tc(e),e).map(wu,Eu)}var ku=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function xu(e,t,n,r,i){const a=r.name,{min:s=t,max:o=n}=e,c=ku(e,["min","max"]);if(s>o)throw new Error(`Invalid range passed to ${a}: min must be lower than or equal to max`);if(s<t)throw new Error(`Invalid min value passed to ${a}: min must be greater than or equal to ${t}`);if(o>n)throw new Error(`Invalid max value passed to ${a}: max must be lower than or equal to ${n}`);return Ea(i({min:s,max:o}),c).map((e=>r.from(e)),(e=>{if(!(e instanceof r))throw new Error("Invalid type");return[...e]}))}function Iu(e={}){return xu(e,-32768,32767,yt,Zi)}function Tu(e={}){return xu(e,-2147483648,2147483647,bt,Zi)}function Ou(e={}){return xu(e,-128,127,gt,Zi)}function Au(e={}){return xu(e,0,65535,kt,Zi)}function Nu(e={}){return xu(e,0,4294967295,xt,Zi)}function Mu(e={}){return xu(e,0,255,Et,Zi)}function Cu(e={}){return xu(e,0,255,_t,Zi)}function Ru(e){return e.hasToBeCloned?new He(e.value_,{generatorContext:e.context},(()=>e.value)):new He(e.value_,{generatorContext:e.context})}function Fu(e){return e.hasToBeCloned?new He(e.value_,{shrinkerContext:e.context},(()=>e.value)):new He(e.value_,{shrinkerContext:e.context})}class Lu extends Ye{constructor(e,t){super(),this.generatorArbitrary=e,this.shrinkerArbitrary=t}generate(e,t){return Ru(this.generatorArbitrary.generate(e,t))}canShrinkWithoutContext(e){return this.shrinkerArbitrary.canShrinkWithoutContext(e)}shrink(e,t){return function(e){return void 0!==e}(t)?"generatorContext"in t?this.generatorArbitrary.shrink(e,t.generatorContext).map(Ru):this.shrinkerArbitrary.shrink(e,t.shrinkerContext).map(Fu):this.shrinkerArbitrary.shrink(e,void 0).map(Fu)}}function Pu(e,t,n){const r=Zi({min:e,max:t});if(t===n)return r;const i=Zi({min:e,max:n});return new Lu(r,i)}const Du=Math.min,Uu=Math.max,ju=ot.isArray,qu=Object.entries;function Wu(e,t={}){const{size:n,minNumElements:r=0,maxLength:i=ha,maxNumElements:a=i,noTrailingHole:s,depthIdentifier:o}=t,c=Sa(n,r,a,void 0!==t.maxNumElements),l=Sa(n,c,i,void 0!==t.maxLength);if(r>i)throw new Error("The minimal number of non-hole elements cannot be higher than the maximal length of the array");if(r>a)throw new Error("The minimal number of non-hole elements cannot be higher than the maximal number of non-holes");const u=Du(a,i),f=void 0!==t.maxNumElements||void 0!==n?n:"=",d=Is(On(Pu(0,Uu(l-1,0),Uu(i-1,0)),e),{size:f,minLength:r,maxLength:u,selector:e=>e[0],depthIdentifier:o}).map((e=>function(e,t){const n=ot(e);for(let r=0;r!==t.length;++r){const i=t[r];i[0]<e&&(n[i[0]]=i[1])}return n}(function(e){let t=-1;for(let n=0;n!==e.length;++n)t=Uu(t,e[n][0]);return t}(e)+1,e)),(e=>{if(!ju(e))throw new Error("Not supported entry type");if(s&&0!==e.length&&!(e.length-1 in e))throw new Error("No trailing hole");return Wt(qu(e),(e=>[Number(e[0]),e[1]]))}));return s||i===r?d:On(d,Pu(r,l,i)).map((e=>{const t=e[0],n=e[1];if(t.length>=n)return t;const r=Vt(t);return r.length=n,r}),(e=>{if(!ju(e))throw new Error("Not supported entry type");return[e,e.length]}))}function Bu(e){return new Map(e)}function zu(e){if("object"!==typeof e||null===e)throw new Error("Incompatible instance received: should be a non-null object");if(!("constructor"in e)||e.constructor!==Map)throw new Error("Incompatible instance received: should be of exact type Map");return Array.from(e)}function $u(e){return new Set(e)}function Vu(e){if("object"!==typeof e||null===e)throw new Error("Incompatible instance received: should be a non-null object");if(!("constructor"in e)||e.constructor!==Set)throw new Error("Incompatible instance received: should be of exact type Set");return Array.from(e)}function Gu(e,t,n,r,i){return Is(On(e,t),{maxLength:n,size:r,comparator:"SameValueZero",selector:e=>e[0],depthIdentifier:i}).map(Bu,zu)}function Ju(e,t,n,r,i,a){return Ds(e,t,{maxKeys:n,noNullPrototype:!a,size:r,depthIdentifier:i})}function Hu(e,t,n,r){return Is(e,{maxLength:t,size:n,comparator:"SameValueZero",depthIdentifier:r}).map($u,Vu)}function Ku(e){return Gs(Ou(e),Mu(e),Cu(e),Iu(e),Au(e),Tu(e),Nu(e),vu(e),_u(e))}function Yu(e){const t=e.values,n=e.depthSize,r={depth:0},i=e.maxDepth,a=e.maxKeys,s=e.size,o=Gs(...t,...e.withBigInt?[Ia()]:[],...e.withDate?[hs()]:[]);return nu((t=>({anything:Gs({maxDepth:i,depthSize:n,depthIdentifier:r},o,t("array"),t("object"),...e.withMap?[t("map")]:[],...e.withSet?[t("set")]:[],...e.withObjectString?[t("anything").map((e=>Zr(e)))]:[],...e.withTypedArray?[Ku({maxLength:a,size:s})]:[],...e.withSparseArray?[Wu(t("anything"),{maxNumElements:a,size:s,depthIdentifier:r})]:[]),keys:e.withObjectString?Gs({arbitrary:e.key,weight:10},{arbitrary:t("anything").map((e=>Zr(e))),weight:1}):e.key,array:Ea(t("anything"),{maxLength:a,size:s,depthIdentifier:r}),set:Hu(t("anything"),a,s,r),map:Gs(Gu(t("keys"),t("anything"),a,s,r),Gu(t("anything"),t("anything"),a,s,r)),object:Ju(t("keys"),t("anything"),a,s,r,e.withNullPrototype)}))).anything}const Zu=Object.assign;function Qu(e={}){const t=Qa(),n=uo(t,Fl);return Ea(t,Zu(Zu({},e),{experimentalCustomSlices:n})).map(Rl,Fl)}const Xu=Object.assign;function ef(e={}){const t=Ja(),n=uo(t,Fl);return Ea(t,Xu(Xu({},e),{experimentalCustomSlices:n})).map(Rl,Fl)}function tf(e){switch(typeof e){case"boolean":return new ft(e);case"number":return new St(e);case"string":return new vt(e);default:return e}}function nf(e){return"object"===typeof e&&null!==e&&"constructor"in e&&(e.constructor===ft||e.constructor===St||e.constructor===vt)?e.valueOf():e}function rf(e,t){return[Ra(),Sl(),Tc(),t(e),Gs(t(e),ss(null),ss(void 0))]}function af(e){return e.map((e=>function(e){return e.map(tf,nf)}(e)))}function sf(e={}){function t(e,t){return void 0!==e?e:t}const n=e.withUnicodeString?Qu:ef,r={size:e.size};return{key:t(e.key,n(r)),values:(i=t(e.values,rf(r,n)),a=t(e.withBoxedValues,!1),a?af(i).concat(i):i),depthSize:e.depthSize,maxDepth:e.maxDepth,maxKeys:e.maxKeys,size:e.size,withSet:t(e.withSet,!1),withMap:t(e.withMap,!1),withObjectString:t(e.withObjectString,!1),withNullPrototype:t(e.withNullPrototype,!1),withBigInt:t(e.withBigInt,!1),withDate:t(e.withDate,!1),withTypedArray:t(e.withTypedArray,!1),withSparseArray:t(e.withSparseArray,!1)};var i,a}function of(e){return function(e){return Ds(e.key,Yu(e),{maxKeys:e.maxKeys,noNullPrototype:!e.withNullPrototype,size:e.size})}(sf(e))}function cf(e,t){const{depthSize:n,maxDepth:r}=t;return{key:e,values:[Ra(),Tc({noDefaultInfinity:!0,noNaN:!0}),e,ss(null)],depthSize:n,maxDepth:r}}function lf(e){return Yu(sf(e))}function uf(e={}){return lf(cf(void 0===e.noUnicodeString||!0===e.noUnicodeString?ef():Qu(),e))}function ff(e={}){return uf(e).map(JSON.stringify)}const df=Object.assign;function pf(e={}){const t=as(),n=uo(t,Fl);return Ea(t,df(df({},e),{experimentalCustomSlices:n})).map(Rl,Fl)}function hf(e={}){return lf(cf(pf(),e))}function mf(e={}){return hf(e).map(JSON.stringify)}const gf=Object.keys,yf=Object.getOwnPropertySymbols,bf=Object.getOwnPropertyDescriptor;const Sf=Object.create,vf=Object.defineProperty,wf=Object.getOwnPropertyDescriptor,Ef=Object.getOwnPropertyNames,_f=Object.getOwnPropertySymbols;const kf=Symbol("no-key");function xf(e,t,n){const r=function(e){const t=gf(e),n=yf(e);for(let r=0;r!==n.length;++r){const i=n[r],a=bf(e,i);a&&a.enumerable&&t.push(i)}return t}(e),i=[];for(let a=0;a!==r.length;++a){const n=r[a],s=e[n];void 0===t||-1!==jt(t,n)?zt(i,s):zt(i,so(s,{nil:kf}))}return On(On(...i),n?ss(!1):Ra()).map(function(e,t){return function(n){const r=n[1]?Sf(null):{};for(let i=0;i!==e.length;++i){const a=n[0][i];a!==t&&vf(r,e[i],{value:a,configurable:!0,enumerable:!0,writable:!0})}return r}}(r,kf),function(e,t){return function(n){if("object"!==typeof n||null===n)throw new Error("Incompatible instance received: should be a non-null object");const r=null===Object.getPrototypeOf(n),i="constructor"in n&&n.constructor===Object;if(!r&&!i)throw new Error("Incompatible instance received: should be of exact type Object");let a=0;const s=[];for(let o=0;o!==e.length;++o){const r=wf(n,e[o]);if(void 0!==r){if(!r.configurable||!r.enumerable||!r.writable)throw new Error("Incompatible instance received: should contain only c/e/w properties");if(void 0!==r.get||void 0!==r.set)throw new Error("Incompatible instance received: should contain only no get/set properties");++a,zt(s,r.value)}else zt(s,t)}if(a!==Ef(n).length+_f(n).length)throw new Error("Incompatible instance received: should not contain extra properties");return[s,r]}}(r,kf))}function If(e,t){const n=void 0===t||void 0===t.noNullPrototype||t.noNullPrototype;if(null==t)return xf(e,void 0,n);if("withDeletedKeys"in t&&"requiredKeys"in t)throw new Error("requiredKeys and withDeletedKeys cannot be used together in fc.record");if(!("requiredKeys"in t&&void 0!==t.requiredKeys||"withDeletedKeys"in t&&!!t.withDeletedKeys))return xf(e,void 0,n);const r=("requiredKeys"in t?t.requiredKeys:void 0)||[];for(let i=0;i!==r.length;++i){const t=Object.getOwnPropertyDescriptor(e,r[i]);if(void 0===t)throw new Error("requiredKeys cannot reference keys that have not been defined in recordModel");if(!t.enumerable)throw new Error("requiredKeys cannot reference keys that have are enumerable in recordModel")}return xf(e,r,n)}const Tf=Object.defineProperties;function Of(e){return`Stream(${qt(e,",")}\u2026)`}class Af extends Ye{constructor(e){super(),this.arb=e}generate(e,t){const n=void 0!==t&&1===e.nextInt(1,t)?t:void 0,r=()=>{const t=[],i=new Be(function*(e,r){for(;;){const i=e.generate(r,n).value;zt(t,i),yield i}}(this.arb,e.clone()));return Tf(i,{toString:{value:()=>Of(t.map(Zr))},[$r]:{value:()=>Of(t.map(Zr))},[Gr]:{value:async()=>Of(await Promise.all(t.map(Xr)))},[$e]:{value:r,enumerable:!0}})};return new He(r(),void 0)}canShrinkWithoutContext(e){return!1}shrink(e,t){return Be.nil()}}function Nf(e){return new Af(e)}const Mf=Object.assign;function Cf(e={}){const t=Ba(),n=uo(t,Fl);return Ea(t,Mf(Mf({},e),{experimentalCustomSlices:n})).map(Rl,Fl)}function Rf(e){switch(e.length%4){case 0:return e;case 3:return`${e}=`;case 2:return`${e}==`;default:return un(e,1)}}function Ff(e){if("string"!==typeof e||e.length%4!==0)throw new Error("Invalid string received");const t=e.indexOf("=");if(-1===t)return e;if(e.length-t>2)throw new Error("Cannot unmap the passed value");return un(e,0,t)}function Lf(e={}){const{minLength:t=0,maxLength:n=ha,size:r}=e,i=t+3-(t+3)%4,a=n-n%4,s=void 0===e.maxLength&&void 0===r?"=":r;if(i>a)throw new Error("Minimal length should be inferior or equal to maximal length");if(i%4!==0)throw new Error("Minimal length of base64 strings must be a multiple of 4");if(a%4!==0)throw new Error("Maximal length of base64 strings must be a multiple of 4");const o=Va();return Ea(o,{minLength:i,maxLength:a,size:s,experimentalCustomSlices:uo(o,Fl)}).map(Rl,Fl).map(Rf,Ff)}function Pf(e){return qt(e,"")}function Df(e){if("string"!==typeof e)throw new Error("Cannot unmap the passed value");return ln(e,"")}const Uf=Object.assign;function jf(e={}){const t=Ha(),n=uo(t,Df);return Ea(t,Uf(Uf({},e),{experimentalCustomSlices:n})).map(Pf,Df)}const qf=Math.floor,Wf=Math.log,Bf=Array.isArray;class zf extends Ye{constructor(e,t,n,r){if(super(),this.originalArray=e,this.isOrdered=t,this.minLength=n,this.maxLength=r,n<0||n>e.length)throw new Error("fc.*{s|S}ubarrayOf expects the minimal length to be between 0 and the size of the original array");if(r<0||r>e.length)throw new Error("fc.*{s|S}ubarrayOf expects the maximal length to be between 0 and the size of the original array");if(n>r)throw new Error("fc.*{s|S}ubarrayOf expects the minimal length to be inferior or equal to the maximal length");this.lengthArb=new Ki(n,r),this.biasedLengthArb=n!==r?new Ki(n,n+qf(Wf(r-n)/Wf(2))):this.lengthArb}generate(e,t){const n=(void 0!==t&&1===e.nextInt(1,t)?this.biasedLengthArb:this.lengthArb).generate(e,void 0),r=n.value,i=Wt(this.originalArray,((e,t)=>t)),a=[];for(let s=0;s!==r;++s){const t=e.nextInt(0,i.length-1);zt(a,i[t]),$t(i,t,1)}return this.isOrdered&&Gt(a,((e,t)=>e-t)),new He(Wt(a,(e=>this.originalArray[e])),n.context)}canShrinkWithoutContext(e){return!!Bf(e)&&(!!this.lengthArb.canShrinkWithoutContext(e.length)&&function(e,t){const n=new Map;let r=0;for(const i of e)if(Object.is(i,-0))++r;else{const e=n.get(i)||0;n.set(i,e+1)}for(let i=0;i!==t.length;++i){if(!(i in t))return!1;const e=t[i];if(Object.is(e,-0)){if(0===r)return!1;--r}else{const t=n.get(e)||0;if(0===t)return!1;n.set(e,t-1)}}return!0}(this.originalArray,e))}shrink(e,t){return 0===e.length?Be.nil():this.lengthArb.shrink(e.length,t).map((t=>new He(Vt(e,e.length-t.value),t.context))).join(e.length>this.minLength?wn((()=>this.shrink(Vt(e,1),void 0).filter((e=>this.minLength<=e.value.length+1)).map((t=>new He([e[0],...t.value],void 0))))):Be.nil())}}function $f(e,t={}){const{minLength:n=0,maxLength:r=e.length}=t;return new zf(e,!0,n,r)}function Vf(e,t={}){const{minLength:n=0,maxLength:r=e.length}=t;return new zf(e,!1,n,r)}const Gf={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F",16:"G",17:"H",18:"J",19:"K",20:"M",21:"N",22:"P",23:"Q",24:"R",25:"S",26:"T",27:"V",28:"W",29:"X",30:"Y",31:"Z"},Jf={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,J:18,K:19,M:20,N:21,P:22,Q:23,R:24,S:25,T:26,V:27,W:28,X:29,Y:30,Z:31};function Hf(e){return e<10?vt(e):Gf[e]}function Kf(e,t){let n="";for(;e.length+n.length<t;)n+="0";return n+e}function Yf(e){let t="";for(let n=e;0!==n;){const e=n>>5;t=Hf(n-(e<<5))+t,n=e}return t}function Zf(e){return function(t){return function(e,t){const n=1073741823&e;return Kf(Yf(~~(e/1073741824)),t-6)+Kf(Yf(n),6)}(t,e)}}function Qf(e){if("string"!==typeof e)throw new pt("Unsupported type");let t=0,n=1;for(let r=e.length-1;r>=0;--r){const i=e[r],a=Jf[i];if(void 0===a)throw new pt("Unsupported type");t+=a*n,n*=32}return t}const Xf=Zf(10),ed=Zf(8);function td(e){return Xf(e[0])+ed(e[1])+ed(e[2])}function nd(e){if("string"!==typeof e||26!==e.length)throw new Error("Unsupported type");return[Qf(e.slice(0,10)),Qf(e.slice(10,18)),Qf(e.slice(18))]}function rd(){return On(Zi({min:0,max:0xffffffffffff}),Zi({min:0,max:0xffffffffff}),Zi({min:0,max:0xffffffffff})).map(td,nd)}function id(e){return function(e,...t){return function(e){try{return e.padStart}catch(t){return}}(e)===sn?e.padStart(...t):st(sn,e,t)}(mn(e,16),8,"0")}function ad(e){if("string"!==typeof e)throw new Error("Unsupported type");if(8!==e.length)throw new Error("Unsupported value: invalid length");const t=parseInt(e,16);if(e!==id(t))throw new Error("Unsupported value: invalid content");return t}function sd(e,t){return Zi({min:e,max:t}).map(id,ad)}function od(e){return`${e[0]}-${un(e[1],4)}-${un(e[1],0,4)}-${un(e[2],0,4)}-${un(e[2],4)}${e[3]}`}const cd=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/;function ld(e){if("string"!==typeof e)throw new Error("Unsupported type");const t=cd.exec(e);if(null===t)throw new Error("Unsupported type");return[t[1],t[3]+t[2],t[4]+un(t[5],0,4),un(t[5],4)]}function ud(){const e=sd(0,4294967295);return On(e,sd(268435456,1610612735),sd(2147483648,3221225471),e).map(od,ld)}function fd(e){const t=sd(0,4294967295),n=268435456*e;return On(t,sd(n,n+268435455),sd(2147483648,3221225471),t).map(od,ld)}function dd([e,t,n]){return(null===e?"":`${e}@`)+t+(null===n?"":`:${n}`)}function pd(e){if("string"!==typeof e)throw new Error("Unsupported");const t=e.indexOf("@"),n=-1!==t?e.substring(0,t):null,r=/:(\d+)$/.exec(e),i=null!==r?Number(r[1]):null;return[n,null!==r?e.substring(t+1,e.length-r[1].length-1):e.substring(t+1),i]}function hd(e){return`[${e}]`}function md(e){if("string"!==typeof e||"["!==e[0]||"]"!==e[e.length-1])throw new Error("Unsupported");return e.substring(1,e.length-1)}function gd(e){const t=e||{},n=t.size,r=[_o({size:n}),...!0===t.withIPv4?[Ol()]:[],...!0===t.withIPv6?[Xl().map(hd,md)]:[],...!0===t.withIPv4Extended?[Cl()]:[]];return On(!0===t.withUserInfo?so(function(e){return po(ao(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":"]),{size:e})}(n)):ss(null),Gs(...r),!0===t.withPort?so(Hs(65535)):ss(null)).map(dd,pd)}function yd(e){return po(ao(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":","@","/","?"]),{size:e})}function bd(e={}){return yd(e.size)}function Sd(e={}){return po(ao(["-",".","_","~","!","$","&","'","(",")","*","+",",",";","=",":","@"]),{size:e.size})}function vd(e){return qt(Wt(e,(e=>`/${e}`)),"")}function wd(e){if("string"!==typeof e)throw new Error("Incompatible value received: type");if(0!==e.length&&"/"!==e[0])throw new Error("Incompatible value received: start");return $t(ln(e,"/"),1)}function Ed(e,t){return Ea(Sd({size:e}),{size:t}).map(vd,wd)}function _d(e){return function(e){const[t,n]=function(e){switch(e){case"xsmall":return["xsmall","xsmall"];case"small":return["small","xsmall"];case"medium":return["small","small"];case"large":return["medium","small"];case"xlarge":return["medium","medium"]}}(e);return t===n?Ed(t,n):Gs(Ed(t,n),Ed(n,t))}(wa((e||{}).size))}function kd(e={}){return yd(e.size)}function xd(e){const[t,n,r]=e;return`${t}://${n}${r}${null===e[3]?"":`?${e[3]}`}${null===e[4]?"":`#${e[4]}`}`}const Id=/^([[A-Za-z][A-Za-z0-9+.-]*):\/\/([^/?#]*)([^?#]*)(\?[A-Za-z0-9\-._~!$&'()*+,;=:@/?%]*)?(#[A-Za-z0-9\-._~!$&'()*+,;=:@/?%]*)?$/;function Td(e){if("string"!==typeof e)throw new Error("Incompatible value received: type");const t=Id.exec(e);if(null===t)throw new Error("Incompatible value received");const n=t[1],r=t[2],i=t[3],a=t[4],s=t[5];return[n,r,i,void 0!==a?a.substring(1):null,void 0!==s?s.substring(1):null]}const Od=Object.assign;function Ad(e){const t=e||{},n=wa(t.size),r=void 0!==t.authoritySettings&&void 0!==t.authoritySettings.size?ba(t.authoritySettings.size,n):n,i=Od(Od({},t.authoritySettings),{size:r});return On(Pa(...t.validSchemes||["http","https"]),gd(i),_d({size:n}),!0===t.withQueryParameters?so(kd({size:n})):ss(null),!0===t.withFragments?so(bd({size:n})):ss(null)).map(xd,Td)}class Nd{constructor(e,t){this.commands=e,this.metadataForReplay=t}[Symbol.iterator](){return this.commands[Symbol.iterator]()}[$e](){return new Nd(this.commands.map((e=>e.clone())),this.metadataForReplay)}toString(){const e=this.commands.filter((e=>e.hasRan)).map((e=>e.toString())).join(","),t=this.metadataForReplay();return 0!==t.length?`${e} /*${t}*/`:e}}class Md{constructor(e){if(this.cmd=e,this.hasRan=!1,Vr(e)){const t=e[$r];this[$r]=function(){return t.call(e)}}if(Jr(e)){const t=e[Gr];this[Gr]=function(){return t.call(e)}}}check(e){return this.cmd.check(e)}run(e,t){return this.hasRan=!0,this.cmd.run(e,t)}clone(){return Ve(this.cmd)?new Md(this.cmd[$e]()):new Md(this.cmd)}toString(){return this.cmd.toString()}}class Cd{static parse(e){const[t,n]=e.split(":"),r=this.parseCounts(t),i=this.parseChanges(n);return this.parseOccurences(r,i)}static stringify(e){const t=this.countOccurences(e);return`${this.stringifyCounts(t)}:${this.stringifyChanges(t)}`}static intToB64(e){return e<26?String.fromCharCode(e+65):e<52?String.fromCharCode(e+97-26):e<62?String.fromCharCode(e+48-52):String.fromCharCode(62===e?43:47)}static b64ToInt(e){return e>="a"?e.charCodeAt(0)-97+26:e>="A"?e.charCodeAt(0)-65:e>="0"?e.charCodeAt(0)-48+52:"+"===e?62:63}static countOccurences(e){return e.reduce(((e,t)=>(0===e.length||64===e[e.length-1].count||e[e.length-1].value!==t?e.push({value:t,count:1}):e[e.length-1].count+=1,e)),[])}static parseOccurences(e,t){const n=[];for(let r=0;r!==e.length;++r){const i=e[r],a=t[r];for(let e=0;e!==i;++e)n.push(a)}return n}static stringifyChanges(e){let t="";for(let n=0;n<e.length;n+=6){const r=e.slice(n,n+6).reduceRight(((e,t)=>2*e+(t.value?1:0)),0);t+=this.intToB64(r)}return t}static parseChanges(e){const t=e.split("").map((e=>this.b64ToInt(e))),n=[];for(let r=0;r!==t.length;++r){let e=t[r];for(let t=0;6!==t;++t,e>>=1)n.push(e%2===1)}return n}static stringifyCounts(e){return e.map((({count:e})=>this.intToB64(e-1))).join("")}static parseCounts(e){return e.split("").map((e=>this.b64ToInt(e)+1))}}class Rd extends Ye{constructor(e,t,n,r,i){super(),this.sourceReplayPath=r,this.disableReplayLog=i,this.oneCommandArb=Gs(...e).map((e=>new Md(e))),this.lengthArb=Pu(0,t,n),this.replayPath=[],this.replayPathPosition=0}metadataForReplay(){return this.disableReplayLog?"":`replayPath=${JSON.stringify(Cd.stringify(this.replayPath))}`}buildValueFor(e,t){const n=e.map((e=>e.value_)),r={shrunkOnce:t,items:e};return new He(new Nd(n,(()=>this.metadataForReplay())),r)}generate(e){const t=this.lengthArb.generate(e,void 0).value,n=Array(t);for(let r=0;r!==t;++r){const t=this.oneCommandArb.generate(e,void 0);n[r]=t}return this.replayPathPosition=0,this.buildValueFor(n,!1)}canShrinkWithoutContext(e){return!1}filterOnExecution(e){const t=[];for(const n of e)n.value_.hasRan?(this.replayPath.push(!0),t.push(n)):this.replayPath.push(!1);return t}filterOnReplay(e){return e.filter(((e,t)=>{const n=this.replayPath[this.replayPathPosition+t];if(void 0===n)throw new Error("Too short replayPath");if(!n&&e.value_.hasRan)throw new Error("Mismatch between replayPath and real execution");return n}))}filterForShrinkImpl(e){0===this.replayPathPosition&&(this.replayPath=null!==this.sourceReplayPath?Cd.parse(this.sourceReplayPath):[]);const t=this.replayPathPosition<this.replayPath.length?this.filterOnReplay(e):this.filterOnExecution(e);return this.replayPathPosition+=e.length,t}shrink(e,t){if(void 0===t)return Be.nil();const n=t,r=n.shrunkOnce,i=n.items,a=this.filterForShrinkImpl(i);if(0===a.length)return Be.nil();const s=r?Be.nil():new Be([[]][Symbol.iterator]()),o=[];for(let c=0;c!==a.length;++c)o.push(wn((()=>{const e=a.slice(0,c);return this.lengthArb.shrink(a.length-1-c,void 0).map((t=>e.concat(a.slice(a.length-(t.value+1)))))})));for(let c=0;c!==a.length;++c)o.push(wn((()=>this.oneCommandArb.shrink(a[c].value_,a[c].context).map((e=>a.slice(0,c).concat([e],a.slice(c+1)))))));return s.join(...o).map((e=>this.buildValueFor(e.map((e=>new He(e.value_.clone(),e.context))),!0)))}}function Fd(e,t={}){const{size:n,maxCommands:r=ha,disableReplayLog:i=!1,replayPath:a=null}=t,s=Sa(n,0,r,void 0!==t.maxCommands);return new Rd(e,s,r,a,i)}class Ld{constructor(e,t){this.s=e,this.cmd=t}async check(e){let t=null,n=!1;if((await this.s.scheduleSequence([{label:`check@${this.cmd.toString()}`,builder:async()=>{try{n=await Promise.resolve(this.cmd.check(e))}catch(r){throw t=r,r}}}]).task).faulty)throw t;return n}async run(e,t){let n=null;if((await this.s.scheduleSequence([{label:`run@${this.cmd.toString()}`,builder:async()=>{try{await this.cmd.run(e,t)}catch(r){throw n=r,r}}}]).task).faulty)throw n}}const Pd=function*(e,t){for(const n of t)yield new Ld(e,n)},Dd=(e,t,n,r,i)=>e.then((e=>{const{model:a,real:s}=e;let o=n;for(const n of t)o=i(o,(()=>r(n,a,s)));return o})),Ud=(e,t)=>Dd({then:t=>{t(e())}},t,void 0,((e,t,n)=>{e.check(t)&&e.run(t,n)}),((e,t)=>t())),jd=async(e,t,n=Promise.resolve())=>{const r={then:t=>{const n=e();return(e=>"function"===typeof e.then)(n)?n.then(t):t(n)}};return await Dd(r,t,n,(async(e,t,n)=>{await e.check(t)&&await e.run(t,n)}),((e,t)=>e.then(t)))};function qd(e,t){Ud(e,t)}async function Wd(e,t){await jd(e,t)}async function Bd(e,t,n){const r=Pd(e,n),i=jd(t,r,e.schedule(Promise.resolve(),"startModel"));await e.waitFor(i),await e.waitAll()}const zd=e=>e();class $d{constructor(e,t){this.act=e,this.taskSelector=t,this.lastTaskId=0,this.sourceTaskSelector=t.clone(),this.scheduledTasks=[],this.triggeredTasks=[],this.scheduledWatchers=[]}static buildLog(e){return`[task\${${e.taskId}}] ${0!==e.label.length?`${e.schedulingType}::${e.label}`:e.schedulingType} ${e.status}${void 0!==e.outputValue?` with value ${t=e.outputValue,t.replace(/([$`\\])/g,"\\$1").replace(/\r/g,"\\r")}`:""}`;var t}log(e,t,n,r,i,a){this.triggeredTasks.push({status:i,schedulingType:e,taskId:t,label:n,metadata:r,outputValue:void 0!==a?Zr(a):void 0})}scheduleInternal(e,t,n,r,i,a){let s=null;const o=++this.lastTaskId,c=new Promise(((i,c)=>{s=()=>{(a?n.then((()=>a())):n).then((n=>(this.log(e,o,t,r,"resolved",n),i(n))),(n=>(this.log(e,o,t,r,"rejected",n),c(n))))}}));return this.scheduledTasks.push({original:n,scheduled:c,trigger:s,schedulingType:e,taskId:o,label:t,metadata:r,customAct:i}),0!==this.scheduledWatchers.length&&this.scheduledWatchers[0](),c}schedule(e,t,n,r){return this.scheduleInternal("promise",t||"",e,n,r||zd)}scheduleFunction(e,t){return(...n)=>this.scheduleInternal("function",`${e.name}(${n.map(Zr).join(",")})`,e(...n),void 0,t||zd)}scheduleSequence(e,t){const n={done:!1,faulty:!1},r={then:e=>e()};let i=()=>{};const a=new Promise((e=>i=e));return e.reduce(((e,a)=>{const[s,o,c]="function"===typeof a?[a,a.name,void 0]:[a.builder,a.label,a.metadata];return e.then((()=>{const e=this.scheduleInternal("sequence",o,r,c,t||zd,(()=>s()));return e.catch((()=>{n.faulty=!0,i()})),e}))}),r).then((()=>{n.done=!0,i()}),(()=>{})),Object.assign(n,{task:Promise.resolve(a).then((()=>({done:n.done,faulty:n.faulty})))})}count(){return this.scheduledTasks.length}internalWaitOne(){if(0===this.scheduledTasks.length)throw new Error("No task scheduled");const e=this.taskSelector.nextTaskIndex(this.scheduledTasks),[t]=this.scheduledTasks.splice(e,1);return t.customAct((async()=>{t.trigger();try{await t.scheduled}catch(e){}}))}async waitOne(e){const t=e||zd;await this.act((()=>t((async()=>await this.internalWaitOne()))))}async waitAll(e){for(;this.scheduledTasks.length>0;)await this.waitOne(e)}async waitFor(e,t){let n=!1,r=null;const i=async()=>{for(;!n&&this.scheduledTasks.length>0;)await this.waitOne(t);r=null},a=()=>{null===r&&(r=Promise.resolve().then(i))},s=()=>{const e=this.scheduledWatchers.indexOf(a);-1!==e&&this.scheduledWatchers.splice(e,1),0===e&&0!==this.scheduledWatchers.length&&this.scheduledWatchers[0]()},o=e.then((e=>(n=!0,null===r?(s(),e):r.then((()=>(s(),e))))),(e=>{if(n=!0,null===r)throw s(),e;return r.then((()=>{throw s(),e}))}));return this.scheduledTasks.length>0&&0===this.scheduledWatchers.length&&a(),this.scheduledWatchers.push(a),o}report(){return[...this.triggeredTasks,...this.scheduledTasks.map((e=>({status:"pending",schedulingType:e.schedulingType,taskId:e.taskId,label:e.label,metadata:e.metadata})))]}toString(){return"schedulerFor()`\n"+this.report().map($d.buildLog).map((e=>`-> ${e}`)).join("\n")+"`"}[$e](){return new $d(this.act,this.sourceTaskSelector)}}function Vd(e){let t=0;return{clone:()=>Vd(e),nextTaskIndex:n=>{if(e.length<=t)throw new Error("Invalid schedulerFor defined: too many tasks have been scheduled");const r=n.findIndex((n=>n.taskId===e[t]));if(-1===r)throw new Error("Invalid schedulerFor defined: unable to find next task");return++t,r}}}function Gd(e,t){return new $d(e,Vd(t))}function Jd(e){const t=e.clone();return{clone:()=>Jd(t),nextTaskIndex:t=>e.nextInt(0,t.length-1)}}class Hd extends Ye{constructor(e){super(),this.act=e}generate(e,t){return new He(new $d(this.act,Jd(e.clone())),void 0)}canShrinkWithoutContext(e){return!1}shrink(e,t){return Be.nil()}}function Kd(e){const{act:t=(e=>e())}=e||{};return new Hd(t)}function Yd(e,t){const{act:n=(e=>e())}=Array.isArray(e)?t||{}:e||{};return Array.isArray(e)?Gd(n,e):function(e,...t){return Gd(n,t)}}function Zd(e={}){return xu(e,ct("-9223372036854775808"),ct("9223372036854775807"),lt,Ia)}function Qd(e={}){return xu(e,ct(0),ct("18446744073709551615"),ut,Ia)}function Xd(e,t,n){if(!t&&!n)return e;const r={hasStart:!1,hasEnd:!1},i=ep(e,t,n,r),a=t&&!r.hasStart,s=n&&!r.hasEnd;if(!a&&!s)return i;const o=[];return a&&(o.push({type:"Assertion",kind:"^"}),o.push({type:"Repetition",quantifier:{type:"Quantifier",kind:"*",greedy:!0},expression:{type:"Char",kind:"meta",symbol:".",value:".",codePoint:Number.NaN}})),o.push(i),s&&(o.push({type:"Repetition",quantifier:{type:"Quantifier",kind:"*",greedy:!0},expression:{type:"Char",kind:"meta",symbol:".",value:".",codePoint:Number.NaN}}),o.push({type:"Assertion",kind:"$"})),{type:"Group",capturing:!1,expression:{type:"Alternative",expressions:o}}}function ep(e,t,n,r){switch(e.type){case"Char":case"Repetition":case"CharacterClass":case"ClassRange":case"Backreference":return e;case"Quantifier":throw new Error("Wrongly defined AST tree, Quantifier nodes not supposed to be scanned!");case"Alternative":return r.hasStart=!0,r.hasEnd=!0,Object.assign(Object.assign({},e),{expressions:e.expressions.map(((r,i)=>Xd(r,t&&0===i,n&&i===e.expressions.length-1)))});case"Group":return Object.assign(Object.assign({},e),{expression:ep(e.expression,t,n,r)});case"Disjunction":return r.hasStart=!0,r.hasEnd=!0,Object.assign(Object.assign({},e),{left:null!==e.left?Xd(e.left,t,n):null,right:null!==e.right?Xd(e.right,t,n):null});case"Assertion":if("^"===e.kind||"Lookahead"===e.kind)return r.hasStart=!0,e;if("$"===e.kind||"Lookbehind"===e.kind)return r.hasEnd=!0,e;throw new Error(`Assertions of kind ${e.kind} not implemented yet!`);default:throw function(e){return new Error(`Unsupported AST node! Received: ${Zr(e)}`)}(e)}}function tp(e,t){return e[t]>="\ud800"&&e[t]<="\udbff"&&e[t+1]>="\udc00"&&e[t+1]<="\udfff"?2:1}function np(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"}function rp(e){return e>="0"&&e<="9"}function ip(e,t){for(let n=t;n!==e.length;++n){const t=e[n];if("\\"===t)n+=1;else if("]"===t)return n}throw new Error("Missing closing ']'")}var ap;function sp(e,t,n,r){switch(e[t]){case"[":return r===ap.Character?t+1:ip(e,t+1)+1;case"{":{if(r===ap.Character)return t+1;const n=function(e,t){let n=!1;for(let r=t;r!==e.length;++r){const i=e[r];if(rp(i));else{if(t===r)return-1;if(","!==i)return"}"===i?r:-1;if(n)return-1;n=!0}}return-1}(e,t+1);return-1===n?t+1:n+1}case"(":return r===ap.Character?t+1:function(e,t){let n=0;for(let r=t;r!==e.length;++r){const t=e[r];if("\\"===t)r+=1;else if(")"===t){if(0===n)return r;n-=1}else"["===t?r=ip(e,r):"("===t&&(n+=1)}throw new Error("Missing closing ')'")}(e,t+1)+1;case"]":case"}":case")":return t+1;case"\\":{const r=e[t+1];switch(r){case"x":if(np(e[t+2])&&np(e[t+3]))return t+4;throw new Error(`Unexpected token '${e.substring(t,t+4)}' found`);case"u":if("{"===e[t+2]){if(!n)return t+2;if("}"===e[t+4]){if(np(e[t+3]))return t+5;throw new Error(`Unexpected token '${e.substring(t,t+5)}' found`)}if("}"===e[t+5]){if(np(e[t+3])&&np(e[t+4]))return t+6;throw new Error(`Unexpected token '${e.substring(t,t+6)}' found`)}if("}"===e[t+6]){if(np(e[t+3])&&np(e[t+4])&&np(e[t+5]))return t+7;throw new Error(`Unexpected token '${e.substring(t,t+7)}' found`)}if("}"===e[t+7]){if(np(e[t+3])&&np(e[t+4])&&np(e[t+5])&&np(e[t+6]))return t+8;throw new Error(`Unexpected token '${e.substring(t,t+8)}' found`)}if("}"===e[t+8]&&np(e[t+3])&&np(e[t+4])&&np(e[t+5])&&np(e[t+6])&&np(e[t+7]))return t+9;throw new Error(`Unexpected token '${e.substring(t,t+9)}' found`)}if(np(e[t+2])&&np(e[t+3])&&np(e[t+4])&&np(e[t+5]))return t+6;throw new Error(`Unexpected token '${e.substring(t,t+6)}' found`);case"p":case"P":{if(!n)return t+2;let r=t+2;for(;r<e.length&&"}"!==e[r];r+="\\"===e[r]?2:1);if("}"!==e[r])throw new Error("Invalid \\P definition");return r+1}case"k":{let r=t+2;for(;r<e.length&&">"!==e[r];++r);if(">"!==e[r]){if(!n)return t+2;throw new Error("Invalid \\k definition")}return r+1}default:if(rp(r)){const r=n?e.length:Math.min(t+4,e.length);let i=t+2;for(;i<r&&rp(e[i]);++i);return i}return t+(n?tp(e,t+1):1)+1}}default:return t+(n?tp(e,t):1)}}function op(e,t,n,r){const i=sp(e,t,n,r);return e.substring(t,i)}!function(e){e[e.Full=0]="Full",e[e.Character=1]="Character"}(ap||(ap={}));const cp=String.fromCodePoint;function lp(e){const t=e.pop();if(void 0===t)throw new Error("Unable to extract token preceeding the currently parsed one");return t}function up(e){return e>="0"&&e<="9"}function fp(e,t){return{type:"Char",kind:"simple",symbol:e,value:e,codePoint:e.codePointAt(0)||-1,escaped:t}}function dp(e,t){return{type:"Char",kind:"meta",symbol:t,value:e,codePoint:t.codePointAt(0)||-1}}function pp(e,t){if(e.length>1)return{type:"Alternative",expressions:e};if(!t&&0===e.length)throw new Error("Unsupported no token");return e[0]}function hp(e){if("\\"===e[0]){const t=e[1];switch(t){case"x":{const t=e.substring(2),n=Number.parseInt(t,16);return{type:"Char",kind:"hex",symbol:cp(n),value:e,codePoint:n}}case"u":{if("\\u"===e)return fp("u",!0);const t="{"===e[2]?e.substring(3,e.length-1):e.substring(2),n=Number.parseInt(t,16);return{type:"Char",kind:"unicode",symbol:cp(n),value:e,codePoint:n}}case"0":return dp(e,"\0");case"n":return dp(e,"\n");case"f":return dp(e,"\f");case"r":return dp(e,"\r");case"t":return dp(e,"\t");case"v":return dp(e,"\v");case"w":case"W":case"d":case"D":case"s":case"S":case"b":case"B":return{type:"Char",kind:"meta",symbol:void 0,value:e,codePoint:Number.NaN};default:if(up(t)){const t=e.substring(1),n=Number(t);return{type:"Char",kind:"decimal",symbol:cp(n),value:e,codePoint:n}}if(e.length>2&&("p"===t||"P"===t))throw new Error("UnicodeProperty not implemented yet!");return fp(e.substring(1),!0)}}return fp(e)}function mp(e,t,n,r){let i=null;for(let a=0,s=op(t,a,n,ap.Full);a!==t.length;a+=s.length,s=op(t,a,n,ap.Full)){const t=s[0];switch(t){case"|":null===i&&(i=[]),i.push(pp(e.splice(0),!0)||null);break;case".":e.push({type:"Char",kind:"meta",symbol:s,value:s,codePoint:Number.NaN});break;case"*":case"+":{const n=lp(e);e.push({type:"Repetition",expression:n,quantifier:{type:"Quantifier",kind:t,greedy:!0}});break}case"?":{const n=lp(e);"Repetition"===n.type?(n.quantifier.greedy=!1,e.push(n)):e.push({type:"Repetition",expression:n,quantifier:{type:"Quantifier",kind:t,greedy:!0}});break}case"{":{if("{"===s){e.push(fp(s));break}const t=lp(e),n=s.substring(1,s.length-1).split(","),r=Number(n[0]),i=1===n.length?r:0!==n[1].length?Number(n[1]):void 0;e.push({type:"Repetition",expression:t,quantifier:{type:"Quantifier",kind:"Range",greedy:!0,from:r,to:i}});break}case"[":{const t=s.substring(1,s.length-1),r=[];let i,a=!1;for(let e=0,s=op(t,e,n,ap.Character);e!==t.length;e+=s.length,s=op(t,e,n,ap.Character)){if(0===e&&"^"===s){i=!0;continue}const t=hp(s);if("-"===s)r.push(t),a=!0;else{const e=r.length>=2?r[r.length-2]:void 0;a&&void 0!==e&&"Char"===e.type?(r.pop(),r.pop(),r.push({type:"ClassRange",from:e,to:t})):r.push(t),a=!1}}e.push({type:"CharacterClass",expressions:r,negative:i});break}case"(":{const t=s.substring(1,s.length-1),i=[];if("?"===t[0])if(":"===t[1])mp(i,t.substring(2),n,r),e.push({type:"Group",capturing:!1,expression:pp(i)});else if("="===t[1]||"!"===t[1])mp(i,t.substring(2),n,r),e.push({type:"Assertion",kind:"Lookahead",negative:"!"===t[1]||void 0,assertion:pp(i)});else if("<"!==t[1]||"="!==t[2]&&"!"!==t[2]){const a=t.split(">");if(a.length<2||"<"!==a[0][1])throw new Error(`Unsupported regex content found at ${JSON.stringify(s)}`);const o=++r.lastIndex,c=a[0].substring(2);r.named.set(c,o),mp(i,a.slice(1).join(">"),n,r),e.push({type:"Group",capturing:!0,nameRaw:c,name:c,number:o,expression:pp(i)})}else mp(i,t.substring(3),n,r),e.push({type:"Assertion",kind:"Lookbehind",negative:"!"===t[2]||void 0,assertion:pp(i)});else{const a=++r.lastIndex;mp(i,t,n,r),e.push({type:"Group",capturing:!0,number:a,expression:pp(i)})}break}default:if("^"===s)e.push({type:"Assertion",kind:s});else if("$"===s)e.push({type:"Assertion",kind:s});else if("\\"===s[0]&&up(s[1])){const t=Number(s.substring(1));n||t<=r.lastIndex?e.push({type:"Backreference",kind:"number",number:t,reference:t}):e.push(hp(s))}else if("\\"===s[0]&&"k"===s[1]&&2!==s.length){const t=s.substring(3,s.length-1);e.push({type:"Backreference",kind:"name",number:r.named.get(t)||0,referenceRaw:t,reference:t})}else e.push(hp(s))}}if(null!==i){i.push(pp(e.splice(0),!0)||null);let t={type:"Disjunction",left:i[0],right:i[1]};for(let e=2;e<i.length;++e)t={type:"Disjunction",left:t,right:i[e]};e.push(t)}}function gp(e){const t=-1!==jt([...e.flags],"u"),n=[];return mp(n,e.source,t,{lastIndex:0,named:new Map}),pp(n)}const yp=String.fromCodePoint,bp=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_"],Sp=[..."0123456789"],vp=[..." \t\r\n\v\f"],wp=[..."\r\n"],Ep=[..."\x1e\x15"],_p=[...wp,...Ep],kp=Ja();function xp(e){return new pt(`Unsupported AST node! Received: ${Zr(e)}`)}function Ip(e,t,n){switch(e.type){case"Char":if("meta"===e.kind)switch(e.value){case"\\w":return Pa(...bp);case"\\W":return kp.filter((e=>-1===jt(bp,e)));case"\\d":return Pa(...Sp);case"\\D":return kp.filter((e=>-1===jt(Sp,e)));case"\\s":return Pa(...vp);case"\\S":return kp.filter((e=>-1===jt(vp,e)));case"\\b":case"\\B":throw new pt(`Meta character ${e.value} not implemented yet!`);case".":{const e=n.dotAll?Ep:_p;return kp.filter((t=>-1===jt(e,t)))}}if(void 0===e.symbol)throw new pt(`Unexpected undefined symbol received for non-meta Char! Received: ${Zr(e)}`);return ss(e.symbol);case"Repetition":{const r=Ip(e.expression,t,n);switch(e.quantifier.kind){case"*":return po(r,t);case"+":return po(r,Object.assign(Object.assign({},t),{minLength:1}));case"?":return po(r,Object.assign(Object.assign({},t),{minLength:0,maxLength:1}));case"Range":return po(r,Object.assign(Object.assign({},t),{minLength:e.quantifier.from,maxLength:e.quantifier.to}));default:throw xp(e.quantifier)}}case"Quantifier":throw new pt("Wrongly defined AST tree, Quantifier nodes not supposed to be scanned!");case"Alternative":return On(...Wt(e.expressions,(e=>Ip(e,t,n)))).map((e=>qt(e,"")));case"CharacterClass":if(e.negative){const r=Wt(e.expressions,(e=>Ip(e,t,n)));return kp.filter((e=>Jt(r,(t=>!t.canShrinkWithoutContext(e)))))}return Gs(...Wt(e.expressions,(e=>Ip(e,t,n))));case"ClassRange":return Zi({min:e.from.codePoint,max:e.to.codePoint}).map((e=>yp(e)),(e=>{if("string"!==typeof e)throw new pt("Invalid type");if(1!==[...e].length)throw new pt("Invalid length");return e.codePointAt(0)}));case"Group":return Ip(e.expression,t,n);case"Disjunction":return Gs(null!==e.left?Ip(e.left,t,n):ss(""),null!==e.right?Ip(e.right,t,n):ss(""));case"Assertion":if("^"===e.kind||"$"===e.kind)return n.multiline?"^"===e.kind?Gs(ss(""),On(po(kp),Pa(...wp)).map((e=>`${e[0]}${e[1]}`),(e=>{if("string"!==typeof e||0===e.length)throw new pt("Invalid type");return[e.substring(0,e.length-1),e[e.length-1]]}))):Gs(ss(""),On(Pa(...wp),po(kp)).map((e=>`${e[0]}${e[1]}`),(e=>{if("string"!==typeof e||0===e.length)throw new pt("Invalid type");return[e[0],e.substring(1)]}))):ss("");throw new pt(`Assertions of kind ${e.kind} not implemented yet!`);case"Backreference":throw new pt("Backreference nodes not implemented yet!");default:throw xp(e)}}function Tp(e,t={}){for(const i of e.flags)if("d"!==i&&"g"!==i&&"m"!==i&&"s"!==i&&"u"!==i)throw new pt(`Unable to use "stringMatching" against a regex using the flag ${i}`);const n={size:t.size},r={multiline:e.multiline,dotAll:e.dotAll};return Ip(Xd(gp(e),!0,!0),n,r)}function Op(e,t){for(let n=0;n!==e.length;++n)t[n]=e[n].next()}function Ap(e){for(let t=0;t!==e.length;++t)if(e[t].done)return!0;return!1}class Np extends Ye{constructor(e,t){super(),this.arb=e,this.maxShrinks=t}generate(e,t){const n=this.arb.generate(e,t);return this.valueMapper(n,0)}canShrinkWithoutContext(e){return this.arb.canShrinkWithoutContext(e)}shrink(e,t){return this.isSafeContext(t)?this.safeShrink(e,t.originalContext,t.length):this.safeShrink(e,void 0,0)}safeShrink(e,t,n){const r=this.maxShrinks-n;return r<=0?Be.nil():new Be(function*(...e){const t=function(e){const t=[];for(let n=0;n!==e.length;++n)t.push(e[n].next());return t}(e);for(;!Ap(t);)yield t.map((e=>e.value)),Op(e,t)}(this.arb.shrink(e,t),function*(e){let t=e;for(;;)yield t,++t}(n+1))).take(r).map((e=>this.valueMapper(e[0],e[1])))}valueMapper(e,t){const n={originalContext:e.context,length:t};return new He(e.value,n)}isSafeContext(e){return null!=e&&"object"===typeof e&&"originalContext"in e&&"length"in e}}function Mp(e,t){return new Np(e,t)}const Cp="module",Rp="3.20.0",Fp="6a2ca8b33028c8d3ef13380c79516f6aa071acf2";var Lp=n(758729);const Pp=Symbol.for("@effect/schema/TypeId/GreaterThan"),Dp=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),Up=Symbol.for("@effect/schema/TypeId/LessThan"),jp=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),qp=Symbol.for("@effect/schema/TypeId/Int"),Wp=Symbol.for("@effect/schema/TypeId/Between"),Bp=Symbol.for("@effect/schema/TypeId/GreaterThanBigint"),zp=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToBigint"),$p=Symbol.for("@effect/schema/TypeId/LessThanBigint"),Vp=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToBigint"),Gp=Symbol.for("@effect/schema/TypeId/BetweenBigint"),Jp=Symbol.for("@effect/schema/TypeId/MinLength"),Hp=Symbol.for("@effect/schema/TypeId/MaxLength"),Kp=Symbol.for("@effect/schema/TypeId/Length"),Yp=Symbol.for("@effect/schema/TypeId/MinItems"),Zp=Symbol.for("@effect/schema/TypeId/MaxItems"),Qp=Symbol.for("@effect/schema/TypeId/ItemsCount"),Xp=Symbol.for("@effect/schema/TypeId/ParseJson");var eh=n(464178);const th=Symbol.for("@effect/schema/ArbitraryHookId");var nh=n(919662);const rh=Symbol.for("@effect/schema/EquivalenceHookId"),ih=Symbol.for("@effect/schema/Serializable/symbol"),ah=Symbol.for("@effect/schema/Serializable/symbolResult"),sh=Symbol.for("@effect/schema/PrettyHookId"),oh=De.getAnnotation(sh),ch=e=>t=>d.match(oh(t),{onNone:()=>e,onSome:e=>e()});eh.formatUnknown;var lh=n(660926);const uh=Symbol.for("@effect/schema/Schema"),fh=e=>class{[uh]=dh;static Type;static Encoded;static[uh]=dh;static ast=e;static annotations(e){return fh(hh(this.ast,e))}static pipe(){return(0,h.pipeArguments)(this,arguments)}static toString(){return String(e)}},dh={_A:e=>e,_I:e=>e,_R:e=>e},ph=e=>{if(!e)return{};const t={},n=Object.getOwnPropertySymbols(e);for(const i of n)t[i]=e[i];if(void 0!==e.typeId){const n=e.typeId;"object"===typeof n?(t[De.TypeAnnotationId]=n.id,t[n.id]=n.annotation):t[De.TypeAnnotationId]=n}const r=(n,r)=>{void 0!==e[n]&&(t[r]=e[n])};return r("message",De.MessageAnnotationId),r("missingMessage",De.MissingMessageAnnotationId),r("identifier",De.IdentifierAnnotationId),r("title",De.TitleAnnotationId),r("description",De.DescriptionAnnotationId),r("examples",De.ExamplesAnnotationId),r("default",De.DefaultAnnotationId),r("documentation",De.DocumentationAnnotationId),r("jsonSchema",De.JSONSchemaAnnotationId),r("arbitrary",th),r("pretty",sh),r("equivalence",rh),r("concurrency",De.ConcurrencyAnnotationId),r("batching",De.BatchingAnnotationId),r("parseIssueTitle",De.ParseIssueTitleAnnotationId),r("parseOptions",De.ParseOptionsAnnotationId),t},hh=(e,t)=>De.annotations(e,ph(t)),mh=e=>e,gh=e=>String(e.ast),yh=e=>fh(De.encodedAST(e.ast)),bh=e=>fh(De.encodedBoundAST(e.ast)),Sh=e=>fh(De.typeAST(e.ast)),vh=(e,t)=>{const n=nh.encodeUnknown(e,t);return(e,t)=>nh.mapError(n(e,t),nh.parseError)},wh=(e,t)=>{const n=nh.encodeUnknownEither(e,t);return(e,t)=>G.mapLeft(n(e,t),nh.parseError)},Eh=(e,t)=>{const n=vh(e,t);return(e,t)=>se.runPromise(n(e,t))},_h=vh,kh=wh,xh=Eh,Ih=(e,t)=>{const n=nh.decodeUnknown(e,t);return(e,t)=>nh.mapError(n(e,t),nh.parseError)},Th=(e,t)=>{const n=nh.decodeUnknownEither(e,t);return(e,t)=>G.mapLeft(n(e,t),nh.parseError)},Oh=(e,t)=>{const n=Ih(e,t);return(e,t)=>se.runPromise(n(e,t))},Ah=Ih,Nh=Th,Mh=Oh,Ch=(e,t)=>{const n=nh.validate(e,t);return(e,t)=>nh.mapError(n(e,t),nh.parseError)},Rh=(e,t)=>{const n=nh.validateEither(e,t);return(e,t)=>G.mapLeft(n(e,t),nh.parseError)},Fh=(e,t)=>{const n=Ch(e,t);return(e,t)=>se.runPromise(n(e,t))},Lh=e=>m.hasProperty(e,uh)&&m.isObject(e[uh]),Ph=(e,t=(e=>De.isMembers(e)?De.Union.make(De.mapMembers(e,(e=>new De.Literal(e)))):new De.Literal(e[0]))(e))=>class extends(fh(t)){static annotations(e){return Ph(this.literals,hh(this.ast,e))}static literals=[...e]};function Dh(...e){return s.isNonEmptyReadonlyArray(e)?Ph(e):em}const Uh=(...e)=>t=>Dh(...e),jh=e=>fh(new De.UniqueSymbol(e)),qh=(e,t=(e=>new De.Enums(Object.keys(e).filter((t=>"number"!==typeof e[e[t]])).map((t=>[t,e[t]]))))(e))=>class extends(fh(t)){static annotations(e){return qh(this.enums,hh(this.ast,e))}static enums={...e}},Wh=e=>qh(e),Bh=(...[e,...t])=>{let n=Vh(zh(e));for(const r of t)n=s.flatMap(n,(e=>Vh(zh(r)).map((t=>$h(e,t)))));return fh(De.Union.make(n.map((e=>m.isString(e)?new De.Literal(e):e))))},zh=e=>Lh(e)?e.ast:new De.Literal(String(e)),$h=(e,t)=>m.isString(e)?m.isString(t)?e+t:new De.TemplateLiteral(e+t.head,t.spans):m.isString(t)?new De.TemplateLiteral(e.head,s.modifyNonEmptyLast(e.spans,(e=>new De.TemplateLiteralSpan(e.type,e.literal+t)))):new De.TemplateLiteral(e.head,s.appendAll(s.modifyNonEmptyLast(e.spans,(e=>new De.TemplateLiteralSpan(e.type,e.literal+String(t.head)))),t.spans)),Vh=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new De.TemplateLiteral("",[new De.TemplateLiteralSpan(e,"")])];case"Union":return s.flatMap(e.types,Vh)}throw new Error(Lp.getSchemaUnsupportedLiteralSpanErrorMessage(e))},Gh=function(){if(Array.isArray(arguments[0])){return((e,t,n)=>fh(new De.Declaration(e.map((e=>e.ast)),((...e)=>t.decode(...e.map(fh))),((...e)=>t.encode(...e.map(fh))),ph(n))))(arguments[0],arguments[1],arguments[2])}return((e,t)=>{const n=()=>(t,n,r)=>e(t)?nh.succeed(t):nh.fail(new nh.Type(r,t)),r=n;return fh(new De.Declaration([],n,r,ph(t)))})(arguments[0],arguments[1])},Jh=Symbol.for("@effect/schema/TypeId/Brand"),Hh=(e,t)=>n=>tg(new De.Refinement(n.ast,(function(t,n,r){const i=e.either(t);return G.isLeft(i)?d.some(new nh.Type(r,t,i.left.map((e=>e.message)).join(", "))):d.none()}),ph({typeId:{id:Jh,annotation:{constructor:e}},...t}))),Kh=Symbol.for("@effect/schema/TypeId/InstanceOf"),Yh=(e,t)=>Gh((t=>t instanceof e),{title:e.name,description:`an instance of ${e.name}`,pretty:()=>String,typeId:{id:Kh,annotation:{constructor:e}},...t});class Zh extends(fh(De.undefinedKeyword)){static annotations=super.annotations}class Qh extends(fh(De.voidKeyword)){static annotations=super.annotations}class Xh extends(fh(De.null)){static annotations=super.annotations}class em extends(fh(De.neverKeyword)){static annotations=super.annotations}class tm extends(fh(De.unknownKeyword)){static annotations=super.annotations}class nm extends(fh(De.anyKeyword)){static annotations=super.annotations}class rm extends(fh(De.bigIntKeyword)){static annotations=super.annotations}class im extends(fh(De.symbolKeyword)){static annotations=super.annotations}class am extends(fh(De.stringKeyword)){static annotations=super.annotations}class sm extends(fh(De.numberKeyword)){static annotations=super.annotations}class om extends(fh(De.booleanKeyword)){static annotations=super.annotations}class cm extends(fh(De.objectKeyword)){static annotations=super.annotations}const lm=(e,t=(e=>De.Union.members(e.map((e=>e.ast))))(e))=>class extends(fh(t)){static annotations(e){return lm(this.members,hh(this.ast,e))}static members=[...e]};function um(...e){return De.isMembers(e)?lm(e):s.isNonEmptyReadonlyArray(e)?e[0]:em}const fm=e=>um(e,Xh),dm=e=>um(e,Zh),pm=e=>um(e,Xh,Zh),hm=e=>fh(De.keyof(e.ast)),mm=e=>new ym(new De.OptionalType(e.ast,!1),e),gm=e=>new ym(new De.OptionalType(e.ast,!0),e);class ym{ast;from;[uh];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new ym(new De.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...ph(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}const bm=(e,t,n=((e,t)=>new De.TupleType(e.map((e=>Lh(e)?new De.OptionalType(e.ast,!1):e.ast)),t.map((e=>Lh(e)?new De.Type(e.ast):e.ast)),!0))(e,t))=>class extends(fh(n)){static annotations(e){return bm(this.elements,this.rest,hh(this.ast,e))}static elements=[...e];static rest=[...t]};function Sm(...e){return Array.isArray(e[0])?bm(e[0],e.slice(1)):bm(e,[])}const vm=(e,t)=>class extends(bm([],[e],t)){static annotations(e){return vm(this.value,hh(this.ast,e))}static value=e},wm=e=>vm(e),Em=(e,t)=>class extends(bm([e],[e],t)){static annotations(e){return Em(this.value,hh(this.ast,e))}static value=e},_m=e=>Em(e),km=e=>e?'"?:"':'":"';class xm extends De.OptionalType{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.defaultValue=i}toString(){const e=km(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Im extends De.OptionalType{isReadonly;fromKey;constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.fromKey=i}}class Tm extends De.OptionalType{isReadonly;defaultValue;constructor(e,t,n,r,i){super(e,t,r),this.isReadonly=n,this.defaultValue=i}}class Om{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,n,r){this.from=e,this.to=t,this.decode=n,this.encode=r}toString(){return`PropertySignature<${km(this.to.isOptional)}, ${this.to.type}, ${e=this.from.fromKey,void 0===e?"never":m.isString(e)?JSON.stringify(e):String(e)}, ${km(this.from.isOptional)}, ${this.from.type}>`;var e}}const Am=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new xm(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Om(new Im(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Tm(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Nm=Symbol.for("@effect/schema/PropertySignature");class Mm{ast;[uh];[Nm]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return(0,h.pipeArguments)(this,arguments)}annotations(e){return new Mm(Am(this.ast,ph(e)))}toString(){return String(this.ast)}}const Cm=e=>new Mm(e);class Rm extends Mm{from;constructor(e,t){super(e),this.from=t}annotations(e){return new Rm(Am(this.ast,ph(e)),this.from)}}const Fm=e=>new Rm(new xm(e.ast,!1,!0,{},void 0),e),Lm=(0,l.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Cm(new xm(n.type,n.isOptional,n.isReadonly,n.annotations,t));case"PropertySignatureTransformation":return Cm(new Om(n.from,new Tm(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,t),n.decode,n.encode))}})),Pm=(e,t)=>d.match(e,{onNone:()=>d.some(t()),onSome:e=>d.some(void 0===e?t():e)}),Dm=(0,l.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Cm(new Om(n,new Tm(De.typeAST(n.type),!1,!0,{},void 0),(e=>Pm(e,t)),l.identity));case"PropertySignatureTransformation":return Cm(new Om(n.from,new Tm(n.to.type,!1,n.to.isReadonly,n.to.annotations,n.to.defaultValue),(e=>Pm(n.decode(e),t)),n.encode))}})),Um=(0,l.dual)(2,((e,t)=>e.pipe(Dm(t.decoding),Lm(t.constructor)))),jm=(0,l.dual)(2,((e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Cm(new Om(new Im(n.type,n.isOptional,n.isReadonly,n.annotations,t),new Tm(De.typeAST(n.type),n.isOptional,n.isReadonly,{},n.defaultValue),l.identity,l.identity));case"PropertySignatureTransformation":return Cm(new Om(new Im(n.from.type,n.from.isOptional,n.from.isReadonly,n.from.annotations,t),n.to,n.decode,n.encode))}})),qm=(e,t,n)=>Cm(new Om(new Im(e.ast,!0,!0,{},void 0),new Tm(t.ast,!1,!0,{},void 0),(e=>d.some(n.decode(e))),d.flatMap(n.encode))),Wm=(e,t,n)=>Cm(new Om(new Im(e.ast,!1,!0,{},void 0),new Tm(t.ast,!0,!0,{},void 0),d.flatMap(n.decode),(e=>d.some(n.encode(e))))),Bm=(e,t,n)=>Cm(new Om(new Im(e.ast,!0,!0,{},void 0),new Tm(t.ast,!0,!0,{},void 0),n.decode,n.encode)),zm=(0,l.dual)((e=>Lh(e[0])),((e,t)=>new Rm(((e,t)=>{const n=t?.exact,r=t?.default,i=t?.nullable,a="Option"==t?.as,s=t?.onNoneEncoding?d.orElse(t.onNoneEncoding):l.identity;return n?r?i?Lm(qm(fm(e),Sh(e),{decode:d.match({onNone:r,onSome:e=>null===e?r():e}),encode:d.some}),r).ast:Lm(qm(e,Sh(e),{decode:d.match({onNone:r,onSome:l.identity}),encode:d.some}),r).ast:a?i?qm(fm(e),_S(Sh(e)),{decode:d.filter(m.isNotNull),encode:s}).ast:qm(e,_S(Sh(e)),{decode:l.identity,encode:l.identity}).ast:i?Bm(fm(e),Sh(e),{decode:d.filter(m.isNotNull),encode:l.identity}).ast:new xm(e.ast,!0,!0,{},void 0):r?i?Lm(qm(pm(e),Sh(e),{decode:d.match({onNone:r,onSome:e=>null==e?r():e}),encode:d.some}),r).ast:Lm(qm(dm(e),Sh(e),{decode:d.match({onNone:r,onSome:e=>void 0===e?r():e}),encode:d.some}),r).ast:a?i?qm(pm(e),_S(Sh(e)),{decode:d.filter((e=>null!=e)),encode:s}).ast:qm(dm(e),_S(Sh(e)),{decode:d.filter(m.isNotUndefined),encode:s}).ast:i?Bm(pm(e),dm(Sh(e)),{decode:d.filter(m.isNotNull),encode:l.identity}).ast:new xm(dm(e).ast,!0,!0,{},void 0)})(e,t),e))),$m=e=>m.hasProperty(e,Nm),Vm=(e,t)=>{const n=eh.ownKeys(e);for(const r of n){const n=e[r];if(void 0===t[r]&&$m(n)){const e=n.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[r]=i())}}return t},Gm=(e,t,n=((e,t)=>{const n=eh.ownKeys(e),r=[];if(n.length>0){const i=[],a=[],o=[];for(let t=0;t<n.length;t++){const s=n[t],c=e[s];if($m(c)){const e=c.ast;switch(e._tag){case"PropertySignatureDeclaration":{const t=e.type,n=e.isOptional,o=e.annotations;i.push(new De.PropertySignature(s,t,n,!0)),a.push(new De.PropertySignature(s,De.typeAST(t),n,!0,o)),r.push(new De.PropertySignature(s,t,n,!0,o));break}case"PropertySignatureTransformation":{const t=e.from.fromKey??s;i.push(new De.PropertySignature(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),a.push(new De.PropertySignature(s,e.to.type,e.to.isOptional,!0,e.to.annotations)),o.push(new De.PropertySignatureTransformation(t,s,e.decode,e.encode));break}}}else i.push(new De.PropertySignature(s,c.ast,!1,!0)),a.push(new De.PropertySignature(s,De.typeAST(c.ast),!1,!0)),r.push(new De.PropertySignature(s,c.ast,!1,!0))}if(s.isNonEmptyReadonlyArray(o)){const e=[],n=[];for(const r of t){const{indexSignatures:t,propertySignatures:s}=De.record(r.key.ast,r.value.ast);s.forEach((e=>{i.push(e),a.push(new De.PropertySignature(e.name,De.typeAST(e.type),e.isOptional,e.isReadonly,e.annotations))})),t.forEach((t=>{e.push(t),n.push(new De.IndexSignature(t.parameter,De.typeAST(t.type),t.isReadonly))}))}return new De.Transformation(new De.TypeLiteral(i,e,{[De.TitleAnnotationId]:"Struct (Encoded side)"}),new De.TypeLiteral(a,n,{[De.TitleAnnotationId]:"Struct (Type side)"}),new De.TypeLiteralTransformation(o))}}const i=[];for(const a of t){const{indexSignatures:e,propertySignatures:t}=De.record(a.key.ast,a.value.ast);t.forEach((e=>r.push(e))),e.forEach((e=>i.push(e)))}return new De.TypeLiteral(r,i)})(e,t))=>class extends(fh(n)){static annotations(e){return Gm(this.fields,this.records,hh(this.ast,e))}static fields={...e};static records=[...t];static make=(t,n)=>{const r=Vm(e,{...t});return cw(n)?r:nh.validateSync(this)(r)};static pick(...t){return Jm(Le(e,...t))}static omit(...t){return Jm(Pe(e,...t))}};function Jm(e,...t){return Gm(e,t)}const Hm=e=>Dh(e).pipe(Fm,Lm((()=>e))),Km=(e,t)=>Jm({_tag:Hm(e),...t}),Ym=(e,t,n)=>class extends(Gm({},[{key:e,value:t}],n)){static annotations(n){return Ym(e,t,hh(this.ast,n))}static key=e;static value=t},Zm=(e,t)=>Ym(e,t),Qm=(...e)=>t=>fh(De.pick(t.ast,e)),Xm=(...e)=>t=>fh(De.omit(t.ast,e)),eg=(0,l.dual)(2,((e,t)=>{const n=De.getPropertyKeyIndexedAccess(De.typeAST(e.ast),t),r=fh(n.isOptional?De.orUndefined(n.type):n.type);return _g(e.pipe(Qm(t)),r,{strict:!0,decode:e=>e[t],encode:e=>n.isOptional&&void 0===e?{}:{[t]:e}})})),tg=e=>class extends(fh(e)){static annotations(e){return tg(hh(this.ast,e))}static make=(e,t)=>cw(t)?e:nh.validateSync(this)(e)},ng=(e,t)=>n=>{const r=d.match(De.getBrandAnnotation(n.ast),{onNone:()=>[e],onSome:t=>[...t,e]}),i=De.annotations(n.ast,ph({title:String(n.ast)+` & Brand<${eh.formatUnknown(e)}>`,...t,[De.BrandAnnotationId]:r}));return tg(i)},rg=(0,l.dual)((e=>Lh(e[0])),((e,t)=>fh(De.partial(e.ast,t)))),ig=e=>fh(De.required(e.ast)),ag=e=>fh(De.mutable(e.ast)),sg=(e,t,n)=>{if(De.isTypeLiteral(e)&&De.isTypeLiteral(t)){const r=[...e.propertySignatures];for(const e of t.propertySignatures){const t=e.name,i=r.findIndex((e=>e.name===t));if(-1===i)r.push(e);else{const{isOptional:a,type:s}=r[i];r[i]=new De.PropertySignature(t,lg(s,e.type,n.concat(t)),a,!0)}}return new De.TypeLiteral(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Lp.getSchemaExtendErrorMessage(e,t,n))},og=De.preserveAnnotations([De.MessageAnnotationId,De.JSONSchemaAnnotationId]),cg=(e,t)=>t.map((t=>new De.Refinement(t,e.filter,og(e)))),lg=(e,t,n)=>De.Union.make(fg([e],[t],n)),ug=e=>De.isUnion(e)?e.types:[e],fg=(e,t,n)=>s.flatMap(e,(e=>s.flatMap(t,(t=>{switch(e._tag){case"Union":return fg(e.types,ug(t),n);case"Suspend":return[new De.Suspend((()=>lg(e.f(),t,n)))];case"Refinement":return cg(e,fg(ug(e.from),ug(t),n));case"TypeLiteral":switch(t._tag){case"Union":return fg([e],t.types,n);case"Suspend":return[new De.Suspend((()=>lg(e,t.f(),n)))];case"Refinement":return cg(t,fg([e],ug(t.from),n));case"TypeLiteral":return[sg(e,t,n)];case"Transformation":if(De.isTypeLiteralTransformation(t.transformation))return[new De.Transformation(sg(e,t.from,n),sg(De.typeAST(e),t.to,n),new De.TypeLiteralTransformation(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(De.isTypeLiteralTransformation(e.transformation))switch(t._tag){case"Union":return fg([e],t.types,n);case"Suspend":return[new De.Suspend((()=>lg(e,t.f(),n)))];case"Refinement":return cg(t,fg([e],ug(t.from),n));case"TypeLiteral":return[new De.Transformation(sg(e.from,t,n),sg(e.to,De.typeAST(t),n),new De.TypeLiteralTransformation(e.transformation.propertySignatureTransformations))];case"Transformation":if(De.isTypeLiteralTransformation(t.transformation))return[new De.Transformation(sg(e.from,t.from,n),sg(e.to,t.to,n),new De.TypeLiteralTransformation(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw new Error(Lp.getSchemaExtendErrorMessage(e,t,n))})))),dg=(0,l.dual)(2,((e,t)=>fh(lg(e.ast,t.ast,[])))),pg=(0,l.dual)((e=>Lh(e[1])),((e,t)=>fh(De.compose(e.ast,t.ast)))),hg=e=>fh(new De.Suspend((()=>e().ast))),mg=Symbol.for("@effect/schema/refine"),gg=(e,t,n)=>class extends(fh(n)){static annotations(e){return gg(this.from,this.filter,hh(this.ast,e))}static[mg]=e;static from=e;static filter=t;static make=(e,t)=>cw(t)?e:nh.validateSync(this)(e)},yg=(e,t,n)=>{if(m.isBoolean(e))return e?d.none():d.some(new nh.Type(t,n));if(m.isString(e))return d.some(new nh.Type(t,n,e));if(void 0!==e){if("_tag"in e)return d.some(e);const r=new nh.Type(t,n,e.message);return d.some(s.isNonEmptyReadonlyArray(e.path)?new nh.Pointer(e.path,n,r):r)}return d.none()},bg=(e,t,n)=>{if(eh.isSingle(e))return yg(e,t,n);if(s.isNonEmptyReadonlyArray(e)){const r=s.filterMap(e,(e=>yg(e,t,n)));if(s.isNonEmptyReadonlyArray(r))return d.some(1===r.length?r[0]:new nh.Composite(t,n,r))}return d.none()};function Sg(e,t){return n=>{function r(t,n,r){return bg(e(t,n,r),r,t)}const i=new De.Refinement(n.ast,r,ph(t));return gg(n,r,i)}}const vg=(0,l.dual)(2,((e,t)=>Eg(e,Sh(e),{strict:!0,decode:(e,n,r)=>nh.flatMap(t(e,n,r),(t=>d.match(bg(t,r,e),{onNone:()=>nh.succeed(e),onSome:nh.fail}))),encode:nh.succeed}))),wg=(e,t,n)=>class extends(fh(n)){static annotations(e){return wg(this.from,this.to,hh(this.ast,e))}static from=e;static to=t},Eg=(0,l.dual)((e=>Lh(e[0])&&Lh(e[1])),((e,t,n)=>wg(e,t,new De.Transformation(e.ast,t.ast,new De.FinalTransformation(n.decode,n.encode))))),_g=(0,l.dual)((e=>Lh(e[0])&&Lh(e[1])),((e,t,n)=>Eg(e,t,{strict:!0,decode:e=>nh.succeed(n.decode(e)),encode:e=>nh.succeed(n.encode(e))}))),kg=(e,t)=>_g(Dh(e),Dh(t),{strict:!0,decode:()=>t,encode:()=>e});function xg(...e){return um(...e.map((([e,t])=>kg(e,t))))}const Ig=(0,l.dual)((e=>Lh(e[0])),((e,t,n,r)=>{const i=dg(Sh(e),Jm({[t]:m.isSymbol(n)?jh(n):Dh(n)})).ast;return fh(new De.Transformation(e.ast,r?hh(i,r):i,new De.TypeLiteralTransformation([new De.PropertySignatureTransformation(t,t,(()=>d.some(n)),(()=>d.none()))])))})),Tg=(0,l.dual)(2,((e,t)=>e.annotations(t))),Og=(0,l.dual)(2,((e,t)=>fh(De.rename(e.ast,t)))),Ag=Symbol.for("@effect/schema/TypeId/Trimmed"),Ng=e=>t=>t.pipe(Sg((e=>e===e.trim()),{typeId:Ag,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),Mg=Hp,Cg=(e,t)=>n=>n.pipe(Sg((t=>t.length<=e),{typeId:Mg,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),Rg=Jp,Fg=(e,t)=>n=>n.pipe(Sg((t=>t.length>=e),{typeId:Rg,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),Lg=Symbol.for("@effect/schema/TypeId/Pattern"),Pg=(e,t)=>n=>{const r=e.source;return n.pipe(Sg((t=>(e.lastIndex=0,e.test(t))),{typeId:{id:Lg,annotation:{regex:e}},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},arbitrary:()=>t=>t.stringMatching(e),...t}))},Dg=Symbol.for("@effect/schema/TypeId/StartsWith"),Ug=(e,t)=>n=>n.pipe(Sg((t=>t.startsWith(e)),{typeId:{id:Dg,annotation:{startsWith:e}},description:`a string starting with ${JSON.stringify(e)}`,jsonSchema:{pattern:`^${e}`},...t})),jg=Symbol.for("@effect/schema/TypeId/EndsWith"),qg=(e,t)=>n=>n.pipe(Sg((t=>t.endsWith(e)),{typeId:{id:jg,annotation:{endsWith:e}},description:`a string ending with ${JSON.stringify(e)}`,jsonSchema:{pattern:`^.*${e}$`},...t})),Wg=Symbol.for("@effect/schema/TypeId/Includes"),Bg=(e,t)=>n=>n.pipe(Sg((t=>t.includes(e)),{typeId:{id:Wg,annotation:{includes:e}},description:`a string including ${JSON.stringify(e)}`,jsonSchema:{pattern:`.*${e}.*`},...t})),zg=Symbol.for("@effect/schema/TypeId/Lowercased"),$g=e=>t=>t.pipe(Sg((e=>e===e.toLowerCase()),{typeId:zg,description:"a lowercase string",...e}));class Vg extends(am.pipe($g({identifier:"Lowercased",title:"Lowercased"}))){static annotations=super.annotations}const Gg=Symbol.for("@effect/schema/TypeId/Capitalized"),Jg=e=>t=>t.pipe(Sg((e=>e[0]?.toUpperCase()===e[0]),{typeId:Gg,description:"a capitalized string",...e}));class Hg extends(am.pipe(Jg({identifier:"Capitalized",title:"Capitalized"}))){static annotations=super.annotations}const Kg=Symbol.for("@effect/schema/TypeId/Uncapitalized"),Yg=e=>t=>t.pipe(Sg((e=>e[0]?.toLowerCase()===e[0]),{typeId:Kg,description:"a uncapitalized string",...e}));class Zg extends(am.pipe(Yg({identifier:"Uncapitalized",title:"Uncapitalized"}))){static annotations=super.annotations}const Qg=Symbol.for("@effect/schema/TypeId/Uppercased"),Xg=e=>t=>t.pipe(Sg((e=>e===e.toUpperCase()),{typeId:Qg,description:"an uppercase string",...e}));class ey extends(am.pipe(Xg({identifier:"Uppercased",title:"Uppercased"}))){static annotations=super.annotations}const ty=Kp,ny=(e,t)=>n=>{const r=m.isObject(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=m.isObject(e)?Math.max(r,Math.floor(e.max)):r;return r!==i?n.pipe(Sg((e=>e.length>=r&&e.length<=i),{typeId:ty,description:`a string at least ${r} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:r,maxLength:i},...t})):n.pipe(Sg((e=>e.length===r),{typeId:ty,description:1===r?"a single character":`a string ${r} character(s) long`,jsonSchema:{minLength:r,maxLength:r},...t}))};class ry extends(am.pipe(ny(1,{identifier:"Char"}))){static annotations=super.annotations}const iy=e=>Fg(1,{description:"a non empty string",...e});class ay extends(_g(am,Vg,{strict:!0,decode:e=>e.toLowerCase(),encode:l.identity}).annotations({identifier:"Lowercase"})){static annotations=super.annotations}class sy extends(_g(am,ey,{strict:!0,decode:e=>e.toUpperCase(),encode:l.identity}).annotations({identifier:"Uppercase"})){static annotations=super.annotations}class oy extends(_g(am,Hg,{strict:!0,decode:e=>Fe.capitalize(e),encode:l.identity}).annotations({identifier:"Capitalize"})){static annotations=super.annotations}class cy extends(_g(am,Zg,{strict:!0,decode:e=>Fe.uncapitalize(e),encode:l.identity}).annotations({identifier:"Uncapitalize"})){static annotations=super.annotations}class ly extends(am.pipe(Ng({identifier:"Trimmed",title:"Trimmed"}))){static annotations=super.annotations}class uy extends(_g(am,ly,{strict:!0,decode:e=>e.trim(),encode:l.identity}).annotations({identifier:"Trim"})){static annotations=super.annotations}const fy=e=>_g(am,wm(am),{strict:!0,decode:Fe.split(e),encode:s.join(e)}),dy=am.annotations({[De.IdentifierAnnotationId]:"JsonString",[De.TitleAnnotationId]:"JsonString",[De.DescriptionAnnotationId]:"a JSON string"}),py=(e,t)=>{return Lh(e)?pg(py(t),e):(n=e,Eg(dy,tm,{strict:!0,decode:(e,t,r)=>nh.try({try:()=>JSON.parse(e,n?.reviver),catch:t=>new nh.Type(r,e,t.message)}),encode:(e,t,r)=>nh.try({try:()=>JSON.stringify(e,n?.replacer,n?.space),catch:t=>new nh.Type(r,e,t.message)})}).annotations({typeId:Xp}));var n};class hy extends(am.pipe(iy({identifier:"NonEmpty",title:"NonEmpty"}))){static annotations=super.annotations}const my=Symbol.for("@effect/schema/TypeId/UUID"),gy=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class yy extends(am.pipe(Pg(gy,{typeId:my,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()}))){static annotations=super.annotations}const by=Symbol.for("@effect/schema/TypeId/ULID"),Sy=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class vy extends(am.pipe(Pg(Sy,{typeId:by,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()}))){static annotations=super.annotations}const wy=Symbol.for("@effect/schema/TypeId/Finite"),Ey=e=>t=>t.pipe(Sg((e=>Number.isFinite(e)),{typeId:wy,description:"a finite number",...e})),_y=Pp,ky=(e,t)=>n=>n.pipe(Sg((t=>t>e),{typeId:_y,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),xy=Dp,Iy=(e,t)=>n=>n.pipe(Sg((t=>t>=e),{typeId:xy,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),Ty=Symbol.for("@effect/schema/TypeId/MultipleOf"),Oy=(e,t)=>n=>n.pipe(Sg((t=>0===Ae.remainder(t,e)),{typeId:Ty,description:`a number divisible by ${e}`,jsonSchema:{multipleOf:Math.abs(e)},...t})),Ay=qp,Ny=e=>t=>t.pipe(Sg((e=>Number.isSafeInteger(e)),{typeId:Ay,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),My=Up,Cy=(e,t)=>n=>n.pipe(Sg((t=>t<e),{typeId:My,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),Ry=jp,Fy=(e,t)=>n=>n.pipe(Sg((t=>t<=e),{typeId:Ry,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),Ly=Wp,Py=(e,t,n)=>r=>r.pipe(Sg((n=>n>=e&&n<=t),{typeId:Ly,description:`a number between ${e} and ${t}`,jsonSchema:{maximum:t,minimum:e},...n})),Dy=Symbol.for("@effect/schema/TypeId/NonNaN"),Uy=e=>t=>t.pipe(Sg((e=>!Number.isNaN(e)),{typeId:Dy,description:"a number excluding NaN",...e})),jy=e=>ky(0,e),qy=e=>Cy(0,e),Wy=e=>Fy(0,e),By=e=>Iy(0,e),zy=(e,t)=>n=>_g(n,n.pipe(Sh,Py(e,t)),{strict:!1,decode:n=>Ae.clamp(n,{minimum:e,maximum:t}),encode:l.identity}),$y=e=>Eg(e,sm,{strict:!1,decode:(e,t,n)=>nh.fromOption(Ae.parse(e),(()=>new nh.Type(n,e))),encode:e=>nh.succeed(String(e))});class Vy extends($y(am).annotations({identifier:"NumberFromString"})){static annotations=super.annotations}class Gy extends(sm.pipe(Ey({identifier:"Finite",title:"Finite"}))){static annotations=super.annotations}class Jy extends(sm.pipe(Ny({identifier:"Int",title:"Int"}))){static annotations=super.annotations}class Hy extends(sm.pipe(Uy({identifier:"NonNaN",title:"NonNaN"}))){static annotations=super.annotations}class Ky extends(sm.pipe(jy({identifier:"Positive",title:"Positive"}))){static annotations=super.annotations}class Yy extends(sm.pipe(qy({identifier:"Negative",title:"Negative"}))){static annotations=super.annotations}class Zy extends(sm.pipe(Wy({identifier:"NonPositive",title:"NonPositive"}))){static annotations=super.annotations}class Qy extends(sm.pipe(By({identifier:"NonNegative",title:"NonNegative"}))){static annotations=super.annotations}const Xy=Symbol.for("@effect/schema/TypeId/JsonNumber");class eb extends(sm.pipe(Sg((e=>!Number.isNaN(e)&&Number.isFinite(e)),{typeId:Xy,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}}))){static annotations=super.annotations}class tb extends(_g(om,om,{strict:!0,decode:q.not,encode:q.not})){static annotations=super.annotations}class nb extends(_g(am,im,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"})){static annotations=super.annotations}const rb=Bp,ib=(e,t)=>n=>n.pipe(Sg((t=>t>e),{typeId:{id:rb,annotation:{min:e}},description:0n===e?"a positive bigint":`a bigint greater than ${e}n`,...t})),ab=zp,sb=(e,t)=>n=>n.pipe(Sg((t=>t>=e),{typeId:{id:ab,annotation:{min:e}},description:0n===e?"a non-negative bigint":`a bigint greater than or equal to ${e}n`,...t})),ob=$p,cb=(e,t)=>n=>n.pipe(Sg((t=>t<e),{typeId:{id:ob,annotation:{max:e}},description:0n===e?"a negative bigint":`a bigint less than ${e}n`,...t})),lb=Vp,ub=(e,t)=>n=>n.pipe(Sg((t=>t<=e),{typeId:{id:lb,annotation:{max:e}},description:0n===e?"a non-positive bigint":`a bigint less than or equal to ${e}n`,...t})),fb=Gp,db=(e,t,n)=>r=>r.pipe(Sg((n=>n>=e&&n<=t),{typeId:{id:fb,annotation:{max:t,min:e}},description:`a bigint between ${e}n and ${t}n`,...n})),pb=e=>ib(0n,e),hb=e=>cb(0n,e),mb=e=>sb(0n,e),gb=e=>ub(0n,e),yb=(e,t)=>n=>_g(n,n.pipe(Sh,db(e,t)),{strict:!1,decode:n=>j(n,{minimum:e,maximum:t}),encode:l.identity});class bb extends(Eg(am,rm,{strict:!0,decode:(e,t,n)=>nh.fromOption((e=>{try{return""===e.trim()?d.none():d.some(BigInt(e))}catch(t){return d.none()}})(e),(()=>new nh.Type(n,e))),encode:e=>nh.succeed(String(e))}).annotations({identifier:"bigint"})){static annotations=super.annotations}const Sb=rm.pipe(pb({identifier:"PositiveBigintFromSelf",title:"PositiveBigintFromSelf"})),vb=bb.pipe(pb({identifier:"PositiveBigint",title:"PositiveBigint"})),wb=rm.pipe(hb({identifier:"NegativeBigintFromSelf",title:"NegativeBigintFromSelf"})),Eb=bb.pipe(hb({identifier:"NegativeBigint",title:"NegativeBigint"})),_b=rm.pipe(gb({identifier:"NonPositiveBigintFromSelf",title:"NonPositiveBigintFromSelf"})),kb=bb.pipe(gb({identifier:"NonPositiveBigint",title:"NonPositiveBigint"})),xb=rm.pipe(mb({identifier:"NonNegativeBigintFromSelf",title:"NonNegativeBigintFromSelf"})),Ib=bb.pipe(mb({identifier:"NonNegativeBigint",title:"NonNegativeBigint"}));class Tb extends(Eg(sm,rm,{strict:!0,decode:(e,t,n)=>nh.fromOption((e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return d.none();try{return d.some(BigInt(e))}catch(t){return d.none()}})(e),(()=>new nh.Type(n,e))),encode:(e,t,n)=>nh.fromOption((e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?d.none():d.some(Number(e)))(e),(()=>new nh.Type(n,e)))}).annotations({identifier:"BigintFromNumber"})){static annotations=super.annotations}const Ob=e=>t=>e(t).map((e=>Me.make(e))),Ab=(e,t,n,r)=>nh.mapBoth(e,{onFailure:e=>new nh.Composite(n,r,e),onSuccess:t}),Nb=e=>(t,n,r)=>Me.isRedacted(t)?Ab(e(Me.value(t),n),Me.make,r,t):nh.fail(new nh.Type(r,t)),Mb=e=>Gh([e],{decode:e=>Nb(nh.decodeUnknown(e)),encode:e=>Nb(nh.encodeUnknown(e))},{description:"Redacted(<redacted>)",pretty:()=>()=>"Redacted(<redacted>)",arbitrary:Ob,equivalence:Me.getEquivalence}),Cb=e=>_g(e,Mb(Sh(e)),{strict:!0,decode:e=>Me.make(e),encode:e=>Me.value(e)});class Rb extends(Gh(V.isDuration,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(V.infinity),e.bigUint().map((e=>V.nanos(e))),e.bigUint().map((e=>V.micros(e))),e.maxSafeNat().map((e=>V.millis(e))),e.maxSafeNat().map((e=>V.seconds(e))),e.maxSafeNat().map((e=>V.minutes(e))),e.maxSafeNat().map((e=>V.hours(e))),e.maxSafeNat().map((e=>V.days(e))),e.maxSafeNat().map((e=>V.weeks(e)))),equivalence:()=>V.Equivalence})){static annotations=super.annotations}class Fb extends(Eg(rm,Rb,{strict:!0,decode:e=>nh.succeed(V.nanos(e)),encode:(e,t,n)=>d.match(V.toNanos(e),{onNone:()=>nh.fail(new nh.Type(n,e)),onSome:e=>nh.succeed(e)})}).annotations({identifier:"DurationFromNanos"})){static annotations=super.annotations}class Lb extends(_g(sm,Rb,{strict:!0,decode:e=>V.millis(e),encode:e=>V.toMillis(e)}).annotations({identifier:"DurationFromMillis"})){static annotations=super.annotations}const Pb=Sm(Qy.pipe(Ey({[De.TitleAnnotationId]:"seconds",[De.DescriptionAnnotationId]:"seconds"})),Qy.pipe(Ey({[De.TitleAnnotationId]:"nanos",[De.DescriptionAnnotationId]:"nanos"})));class Db extends(_g(Pb,Rb,{strict:!0,decode:([e,t])=>V.nanos(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>V.toHrTime(e)}).annotations({identifier:"Duration"})){static annotations=super.annotations}const Ub=(e,t)=>n=>_g(n,n.pipe(Sh,Hb(e,t)),{strict:!1,decode:n=>V.clamp(n,{minimum:e,maximum:t}),encode:l.identity}),jb=Symbol.for("@effect/schema/TypeId/LessThanDuration"),qb=(e,t)=>n=>n.pipe(Sg((t=>V.lessThan(t,e)),{typeId:{id:jb,annotation:{max:e}},description:`a Duration less than ${V.decode(e)}`,...t})),Wb=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToDuration"),Bb=(e,t)=>n=>n.pipe(Sg((t=>V.lessThanOrEqualTo(t,e)),{typeId:{id:jb,annotation:{max:e}},description:`a Duration less than or equal to ${V.decode(e)}`,...t})),zb=Symbol.for("@effect/schema/TypeId/GreaterThanDuration"),$b=(e,t)=>n=>n.pipe(Sg((t=>V.greaterThan(t,e)),{typeId:{id:zb,annotation:{min:e}},description:`a Duration greater than ${V.decode(e)}`,...t})),Vb=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToDuration"),Gb=(e,t)=>n=>n.pipe(Sg((t=>V.greaterThanOrEqualTo(t,e)),{typeId:{id:Vb,annotation:{min:e}},description:`a Duration greater than or equal to ${V.decode(e)}`,...t})),Jb=Symbol.for("@effect/schema/TypeId/BetweenDuration"),Hb=(e,t,n)=>r=>r.pipe(Sg((n=>V.between(n,{minimum:e,maximum:t})),{typeId:{id:Jb,annotation:{maximum:t,minimum:e}},description:`a Duration between ${V.decode(e)} and ${V.decode(t)}`,...n})),Kb=Gh(m.isUint8Array,{identifier:"Uint8ArrayFromSelf",pretty:()=>e=>`new Uint8Array(${JSON.stringify(Array.from(e))})`,arbitrary:()=>e=>e.uint8Array(),equivalence:()=>s.getEquivalence(o.equals)}),Yb=_g(wm(sm.pipe(Py(0,255,{title:"8-bit unsigned integer",description:"a 8-bit unsigned integer"}))).annotations({description:"an array of 8-bit unsigned integers"}),Kb,{strict:!0,decode:e=>Uint8Array.from(e),encode:e=>Array.from(e)}).annotations({identifier:"Uint8Array"}),Zb=(e,t,n)=>Eg(am,Kb,{strict:!0,decode:(e,n,r)=>G.mapLeft(t(e),(t=>new nh.Type(r,e,t.message))),encode:e=>nh.succeed(n(e))}).annotations({identifier:e}),Qb=Zb("Base64",ve,Se),Xb=Zb("Base64Url",Ee,we),eS=Zb("Hex",ke,_e),tS=Yp,nS=(e,t)=>n=>{const r=Math.floor(e);if(r<1)throw new Error(Lp.getInvalidArgumentErrorMessage(`Expected an integer greater than or equal to 1, actual ${e}`));return n.pipe(Sg((e=>e.length>=r),{typeId:tS,description:`an array of at least ${r} items`,jsonSchema:{minItems:r},[De.StableFilterAnnotationId]:!0,...t}))},rS=Zp,iS=(e,t)=>n=>n.pipe(Sg((t=>t.length<=e),{typeId:rS,description:`an array of at most ${e} items`,jsonSchema:{maxItems:e},[De.StableFilterAnnotationId]:!0,...t})),aS=Qp,sS=(e,t)=>n=>n.pipe(Sg((t=>t.length===e),{typeId:aS,description:`an array of exactly ${e} item(s)`,jsonSchema:{minItems:e,maxItems:e},[De.StableFilterAnnotationId]:!0,...t})),oS=e=>fh(De.getNumberIndexedAccess(e.ast)),cS=e=>_g(e,_S(oS(Sh(e))),{strict:!0,decode:s.head,encode:d.match({onNone:()=>[],onSome:s.of})}),lS=(0,l.dual)((e=>Lh(e[0])),((e,t)=>Eg(e,oS(Sh(e)),{strict:!0,decode:(e,n,r)=>e.length>0?nh.succeed(e[0]):t?nh.succeed(t()):nh.fail(new nh.Type(r,e)),encode:e=>nh.succeed(s.of(e))}))),uS=Symbol.for("@effect/schema/TypeId/ValidDate"),fS=e=>t=>t.pipe(Sg((e=>!Number.isNaN(e.getTime())),{typeId:uS,description:"a valid Date",...e}));class dS extends(Gh(m.isDate,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>c.Date})){static annotations=super.annotations}class pS extends(dS.pipe(fS({identifier:"ValidDateFromSelf",description:"a valid Date instance"}))){static annotations=super.annotations}class hS extends(_g(am,dS,{strict:!0,decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"})){static annotations=super.annotations}class mS extends(hS.pipe(fS({identifier:"Date"}))){static annotations=super.annotations}class gS extends(_g(sm,dS,{strict:!0,decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"})){static annotations=super.annotations}const yS=Jm({_tag:Dh("None")}).annotations({description:"NoneEncoded"}),bS=e=>um(yS,(e=>Jm({_tag:Dh("Some"),value:e}).annotations({description:`SomeEncoded<${gh(e)}>`}))(e)).annotations({description:`OptionEncoded<${gh(e)}>`}),SS=e=>"None"===e._tag?d.none():d.some(e.value),vS=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(SS),wS=e=>d.match({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),ES=e=>(t,n,r)=>d.isOption(t)?d.isNone(t)?nh.succeed(d.none()):Ab(e(t.value,n),d.some,r,t):nh.fail(new nh.Type(r,t)),_S=e=>Gh([e],{decode:e=>ES(nh.decodeUnknown(e)),encode:e=>ES(nh.encodeUnknown(e))},{description:`Option<${gh(e)}>`,pretty:wS,arbitrary:vS,equivalence:d.getEquivalence}),kS={_tag:"None"},xS=e=>({_tag:"Some",value:e}),IS=e=>{const t=mh(e);return _g(bS(t),_S(Sh(t)),{strict:!0,decode:SS,encode:d.match({onNone:()=>kS,onSome:xS})})},TS=e=>{const t=mh(e);return _g(fm(t),_S(Sh(t)),{strict:!0,decode:d.fromNullable,encode:d.getOrNull})},OS=(e,t)=>{const n=mh(e);return _g(pm(n),_S(Sh(n)),{strict:!0,decode:d.fromNullable,encode:null===t?d.getOrNull:d.getOrUndefined})},AS=e=>{const t=mh(e);return _g(dm(t),_S(Sh(t)),{strict:!0,decode:d.fromNullable,encode:d.getOrUndefined})},NS=e=>Jm({_tag:Dh("Right"),right:e}).annotations({description:`RightEncoded<${gh(e)}>`}),MS=e=>Jm({_tag:Dh("Left"),left:e}).annotations({description:`LeftEncoded<${gh(e)}>`}),CS=e=>"Left"===e._tag?G.left(e.left):G.right(e.right),RS=(e,t)=>n=>n.oneof(n.record({_tag:n.constant("Left"),left:t(n)}),n.record({_tag:n.constant("Right"),right:e(n)})).map(CS),FS=(e,t)=>G.match({onLeft:e=>`left(${t(e)})`,onRight:t=>`right(${e(t)})`}),LS=(e,t)=>(n,r,i)=>G.isEither(n)?G.match(n,{onLeft:e=>Ab(t(e,r),G.left,i,n),onRight:t=>Ab(e(t,r),G.right,i,n)}):nh.fail(new nh.Type(i,n)),PS=({left:e,right:t})=>Gh([t,e],{decode:(e,t)=>LS(nh.decodeUnknown(e),nh.decodeUnknown(t)),encode:(e,t)=>LS(nh.encodeUnknown(e),nh.encodeUnknown(t))},{description:`Either<${gh(t)}, ${gh(e)}>`,pretty:FS,arbitrary:RS,equivalence:(e,t)=>G.getEquivalence({left:t,right:e})}),DS=e=>({_tag:"Left",left:e}),US=e=>({_tag:"Right",right:e}),jS=({left:e,right:t})=>{const n=mh(t),r=mh(e);return _g(((e,t)=>um(NS(e),MS(t)).annotations({description:`EitherEncoded<${gh(t)}, ${gh(e)}>`}))(n,r),PS({left:Sh(r),right:Sh(n)}),{strict:!0,decode:CS,encode:G.match({onLeft:DS,onRight:US})})},qS=({left:e,right:t})=>{const n=mh(t),r=mh(e),i=Sh(n),a=Sh(r),s=_g(n,NS(i),{strict:!0,decode:US,encode:e=>e.right}),o=_g(r,MS(a),{strict:!0,decode:DS,encode:e=>e.left});return _g(um(s,o),PS({left:a,right:i}),{strict:!0,decode:e=>"Left"===e._tag?G.left(e.left):G.right(e.right),encode:G.match({onLeft:DS,onRight:US})})},WS=(e,t)=>n=>n.array(n.tuple(e(n),t(n))).map((e=>new Map(e))),BS=(e,t)=>n=>`new Map([${Array.from(n.entries()).map((([n,r])=>`[${e(n)}, ${t(r)}]`)).join(", ")}])`,zS=(e,t)=>{const n=s.getEquivalence(c.make((([n,r],[i,a])=>e(n,i)&&t(r,a))));return c.make(((e,t)=>n(Array.from(e.entries()),Array.from(t.entries()))))},$S=e=>(t,n,r)=>m.isMap(t)?Ab(e(Array.from(t.entries()),n),(e=>new Map(e)),r,t):nh.fail(new nh.Type(r,t)),VS=(e,t,n)=>Gh([e,t],{decode:(e,t)=>$S(nh.decodeUnknown(wm(Sm(e,t)))),encode:(e,t)=>$S(nh.encodeUnknown(wm(Sm(e,t))))},{description:n,pretty:BS,arbitrary:WS,equivalence:zS}),GS=({key:e,value:t})=>VS(e,t,`ReadonlyMap<${gh(e)}, ${gh(t)}>`),JS=({key:e,value:t})=>VS(e,t,`Map<${gh(e)}, ${gh(t)}>`),HS=({key:e,value:t})=>{const n=mh(e),r=mh(t);return _g(wm(Sm(n,r)),GS({key:Sh(n),value:Sh(r)}),{strict:!0,decode:e=>new Map(e),encode:e=>Array.from(e.entries())})},KS=({key:e,value:t})=>{const n=mh(e),r=mh(t);return _g(wm(Sm(n,r)),JS({key:Sh(n),value:Sh(r)}),{strict:!0,decode:e=>new Map(e),encode:e=>Array.from(e.entries())})},YS=({key:e,value:t})=>_g(Zm(bh(e),t),GS({key:e,value:Sh(t)}),{strict:!0,decode:e=>new Map(Object.entries(e)),encode:Ne.fromEntries}),ZS=({key:e,value:t})=>_g(Zm(bh(e),t),JS({key:e,value:Sh(t)}),{strict:!0,decode:e=>new Map(Object.entries(e)),encode:Ne.fromEntries}),QS=e=>t=>t.array(e(t)).map((e=>new Set(e))),XS=e=>t=>`new Set([${Array.from(t.values()).map((t=>e(t))).join(", ")}])`,ev=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e.values()),Array.from(n.values()))))},tv=e=>(t,n,r)=>m.isSet(t)?Ab(e(Array.from(t.values()),n),(e=>new Set(e)),r,t):nh.fail(new nh.Type(r,t)),nv=(e,t)=>Gh([e],{decode:e=>tv(nh.decodeUnknown(wm(e))),encode:e=>tv(nh.encodeUnknown(wm(e)))},{description:t,pretty:XS,arbitrary:QS,equivalence:ev}),rv=e=>nv(e,`ReadonlySet<${gh(e)}>`),iv=e=>nv(e,`Set<${gh(e)}>`),av=e=>{const t=mh(e);return _g(wm(t),rv(Sh(t)),{strict:!0,decode:e=>new Set(e),encode:e=>Array.from(e)})},sv=e=>{const t=mh(e);return _g(wm(t),iv(Sh(t)),{strict:!0,decode:e=>new Set(e),encode:e=>Array.from(e)})},ov=()=>e=>`BigDecimal(${D(k(e))})`,cv=()=>e=>e.tuple(e.bigInt(),e.integer()).map((([e,t])=>S(e,t)));class lv extends(Gh(b,{identifier:"BigDecimalFromSelf",pretty:ov,arbitrary:cv,equivalence:()=>F})){static annotations=super.annotations}class uv extends(Eg(am,lv,{strict:!0,decode:(e,t,n)=>P(e).pipe(d.match({onNone:()=>nh.fail(new nh.Type(n,e)),onSome:e=>nh.succeed(k(e))})),encode:e=>nh.succeed(D(k(e)))}).annotations({identifier:"BigDecimal"})){static annotations=super.annotations}class fv extends(Eg(sm,lv,{strict:!0,decode:e=>nh.succeed((e=>{const[t,n=""]=`${e}`.split(".");return S(BigInt(`${t}${n}`),n.length)})(e)),encode:e=>nh.succeed(Number(D(e)))}).annotations({identifier:"BigDecimalFromNumber"})){static annotations=super.annotations}const dv=Symbol.for("@effect/schema/TypeId/GreaterThanBigDecimal"),pv=(e,t)=>n=>n.pipe(Sg((t=>A(t,e)),{typeId:{id:dv,annotation:{min:e}},description:`a BigDecimal greater than ${D(e)}`,...t})),hv=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToBigDecimal"),mv=(e,t)=>n=>n.pipe(Sg((t=>N(t,e)),{typeId:{id:hv,annotation:{min:e}},description:`a BigDecimal greater than or equal to ${D(e)}`,...t})),gv=Symbol.for("@effect/schema/TypeId/LessThanBigDecimal"),yv=(e,t)=>n=>n.pipe(Sg((t=>T(t,e)),{typeId:{id:gv,annotation:{max:e}},description:`a BigDecimal less than ${D(e)}`,...t})),bv=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToBigDecimal"),Sv=(e,t)=>n=>n.pipe(Sg((t=>O(t,e)),{typeId:{id:bv,annotation:{max:e}},description:`a BigDecimal less than or equal to ${D(e)}`,...t})),vv=Symbol.for("@effect/schema/TypeId/PositiveBigDecimal"),wv=e=>t=>t.pipe(Sg((e=>e.value>w),{typeId:{id:vv,annotation:{}},description:"a positive BigDecimal",...e})),Ev=lv.pipe(wv({identifier:"PositiveBigDecimalFromSelf",title:"PositiveBigDecimalFromSelf"})),_v=Symbol.for("@effect/schema/TypeId/NonNegativeBigDecimal"),kv=e=>t=>t.pipe(Sg((e=>e.value>=0n),{typeId:{id:_v,annotation:{}},description:"a non-negative BigDecimal",...e})),xv=lv.pipe(kv({identifier:"NonNegativeBigDecimalFromSelf",title:"NonNegativeBigDecimalFromSelf"})),Iv=Symbol.for("@effect/schema/TypeId/NegativeBigDecimal"),Tv=e=>t=>t.pipe(Sg((e=>e.value<w),{typeId:{id:Iv,annotation:{}},description:"a negative BigDecimal",...e})),Ov=lv.pipe(Tv({identifier:"NegativeBigDecimalFromSelf",title:"NegativeBigDecimalFromSelf"})),Av=Symbol.for("@effect/schema/TypeId/NonPositiveBigDecimal"),Nv=e=>t=>t.pipe(Sg((e=>e.value<=0n),{typeId:{id:Av,annotation:{}},description:"a non-positive BigDecimal",...e})),Mv=lv.pipe(Nv({identifier:"NonPositiveBigDecimalFromSelf",title:"NonPositiveBigDecimalFromSelf"})),Cv=Symbol.for("@effect/schema/TypeId/BetweenBigDecimal"),Rv=(e,t,n)=>r=>r.pipe(Sg((n=>M(n,{minimum:e,maximum:t})),{typeId:{id:Cv,annotation:{maximum:t,minimum:e}},description:`a BigDecimal between ${D(e)} and ${D(t)}`,...n})),Fv=(e,t)=>n=>_g(n,n.pipe(Sh,Rv(e,t)),{strict:!1,decode:n=>C(n,{minimum:e,maximum:t}),encode:l.identity}),Lv=e=>t=>t.array(e(t)).map(B.fromIterable),Pv=e=>t=>`Chunk(${B.toReadonlyArray(t).map(e).join(", ")})`,Dv=e=>(t,n,r)=>B.isChunk(t)?B.isEmpty(t)?nh.succeed(B.empty()):Ab(e(B.toReadonlyArray(t),n),B.fromIterable,r,t):nh.fail(new nh.Type(r,t)),Uv=e=>Gh([e],{decode:e=>Dv(nh.decodeUnknown(wm(e))),encode:e=>Dv(nh.encodeUnknown(wm(e)))},{description:`Chunk<${gh(e)}>`,pretty:Pv,arbitrary:Lv,equivalence:B.getEquivalence}),jv=e=>{const t=mh(e);return _g(wm(t),Uv(Sh(t)),{strict:!0,decode:e=>0===e.length?B.empty():B.fromIterable(e),encode:B.toReadonlyArray})},qv=e=>t=>Ea(e(t),{minLength:1}).map((e=>B.unsafeFromNonEmptyArray(e))),Wv=e=>t=>`NonEmptyChunk(${B.toReadonlyArray(t).map(e).join(", ")})`,Bv=e=>(t,n,r)=>B.isChunk(t)&&B.isNonEmpty(t)?Ab(e(B.toReadonlyArray(t),n),B.unsafeFromNonEmptyArray,r,t):nh.fail(new nh.Type(r,t)),zv=e=>Gh([e],{decode:e=>Bv(nh.decodeUnknown(_m(e))),encode:e=>Bv(nh.encodeUnknown(_m(e)))},{description:`NonEmptyChunk<${gh(e)}>`,pretty:Wv,arbitrary:qv,equivalence:B.getEquivalence}),$v=e=>{const t=mh(e);return _g(_m(t),zv(Sh(t)),{strict:!0,decode:B.unsafeFromNonEmptyArray,encode:B.toReadonlyArray})},Vv=e=>Array.isArray(e)?ae.array(e):ae.struct(e),Gv=e=>t=>e(t).map(Vv),Jv=e=>t=>`Data(${e(t)})`,Hv=e=>(t,n,r)=>o.isEqual(t)?Ab(e(t,n),Vv,r,t):nh.fail(new nh.Type(r,t)),Kv=e=>Gh([e],{decode:e=>Hv(nh.decodeUnknown(e)),encode:e=>Hv(nh.encodeUnknown(e))},{description:`Data<${gh(e)}>`,pretty:Jv,arbitrary:Gv}),Yv=e=>_g(e,Kv(Sh(e)),{strict:!1,decode:Vv,encode:e=>Array.isArray(e)?Array.from(e):Object.assign({},e)}),Zv=e=>eh.ownKeys(e).every((t=>{return n=e[t],Lh(n)||$m(n);var n})),Qv=e=>"fields"in e?e.fields:Qv(e[mg]),Xv=e=>Zv(e)?Jm(e):Lh(e)?e:Jm(Qv(e)),ew=e=>Zv(e)?e:Qv(e),tw=e=>(t,n)=>lw({kind:"Class",identifier:e,schema:Xv(t),fields:ew(t),Base:ae.Class,annotations:n}),nw=e=>Lm(Fm(Dh(e)),(()=>e)),rw=e=>(t,n,r)=>{const i=ew(n),a=Xv(n),s={_tag:nw(t)},o=sw(s,i);return class extends(lw({kind:"TaggedClass",identifier:e??t,schema:dg(a,Jm(s)),fields:o,Base:ae.Class,annotations:r})){static _tag=t}},iw=e=>(t,n,r)=>{class i extends ae.Error{}i.prototype.name=t;const a=ew(n),s=Xv(n),o={_tag:nw(t)},c=sw(o,a);return class extends(lw({kind:"TaggedError",identifier:e??t,schema:dg(s,Jm(o)),fields:c,Base:i,annotations:r,disableToString:!0})){static _tag=t;get message(){return`{ ${eh.ownKeys(a).map((e=>`${eh.formatPropertyKey(e)}: ${eh.formatUnknown(this[e])}`)).join(", ")} }`}}},aw=e=>(t,n,r,i,a)=>{const s=sw({_tag:nw(t)},i);return class extends(lw({kind:"TaggedRequest",identifier:e??t,schema:Jm(s),fields:s,Base:Ce.Class,annotations:a})){static _tag=t;get[ih](){return this.constructor}get[ah](){return{Failure:n,Success:r}}}},sw=(e,t)=>{const n={...e};for(const r of eh.ownKeys(t)){if(r in e)throw new Error(Lp.getASTDuplicatePropertySignatureErrorMessage(r));n[r]=t[r]}return n},ow=(e,t)=>{const n=De.getTitleAnnotation(e.ast);return d.isNone(n)?e.annotations({title:t}):e},cw=e=>m.isBoolean(e)?e:e?.disableValidation??!1,lw=({Base:e,annotations:t,disableToString:n,fields:r,identifier:i,kind:a,schema:s})=>{const o=Symbol.for(`@effect/schema/${a}/${i}`),c=ow(s,`${i} (Constructor)`),u=ow(s,`${i} (Encoded side)`),f=ow(Sh(s),`${i} (Type side)`),d=class extends e{constructor(e={},t=!1){e={...e},"Class"!==a&&delete e._tag,e=Vm(r,e),cw(t)||(e=nh.validateSync(c)(e)),super(e,!0)}static[uh]=dh;static get ast(){const e=Gh([f],{decode:()=>(e,t,n)=>{return e instanceof this||(r=e,m.hasProperty(r,o)&&nh.is(f)(r))?nh.succeed(e):nh.fail(new nh.Type(n,e));var r},encode:()=>(e,t)=>e instanceof this?nh.succeed(e):nh.map(nh.encodeUnknown(f)(e,t),(e=>new this(e,!0)))},{identifier:i,title:i,description:`an instance of ${i}`,pretty:e=>t=>`${i}(${e(t)})`,arbitrary:e=>t=>e(t).map((e=>new this(e))),equivalence:l.identity,[De.SurrogateAnnotationId]:f.ast,...t});return _g(u,e,{strict:!0,decode:e=>new this(e,!0),encode:l.identity}).annotations({[De.SurrogateAnnotationId]:s.ast}).ast}static pipe(){return(0,h.pipeArguments)(this,arguments)}static annotations(e){return fh(this.ast).annotations(e)}static toString(){return`(${String(u)} <-> ${i})`}static make(...e){return new this(...e)}static fields={...r};static identifier=i;static extend(e){return(t,n)=>{const i=ew(t),o=Xv(t),c=sw(r,i);return lw({kind:a,identifier:e,schema:dg(s,o),fields:c,Base:this,annotations:n})}}static transformOrFail(e){return(t,n,i)=>{const o=sw(r,t);return lw({kind:a,identifier:e,schema:Eg(s,Sh(Jm(o)),n),fields:o,Base:this,annotations:i})}}static transformOrFailFrom(e){return(t,n,i)=>{const o=sw(r,t);return lw({kind:a,identifier:e,schema:Eg(yh(s),Jm(o),n),fields:o,Base:this,annotations:i})}}get[o](){return o}};return!0!==n&&Object.defineProperty(d.prototype,"toString",{value(){return`${i}({ ${eh.ownKeys(r).map((e=>`${eh.formatPropertyKey(e)}: ${eh.formatUnknown(this[e])}`)).join(", ")} })`},configurable:!0}),d},uw=um(Jm({_tag:Dh("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Jm({_tag:Dh("Runtime"),id:Jy.annotations({title:"id",description:"id"}),startTimeMillis:Jy.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Jm({_tag:Dh("Composite"),left:hg((()=>uw)),right:hg((()=>uw))}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),fw=e=>e.letrec((t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))}))).FiberId.map(hw),dw=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${dw(e.right)}, ${dw(e.left)})`}};class pw extends(Gh(Ie.isFiberId,{identifier:"FiberIdFromSelf",pretty:()=>dw,arbitrary:()=>fw})){static annotations=super.annotations}const hw=e=>{switch(e._tag){case"None":return Ie.none;case"Runtime":return Ie.runtime(e.id,e.startTimeMillis);case"Composite":return Ie.composite(hw(e.left),hw(e.right))}},mw=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:mw(e.left),right:mw(e.right)}}};class gw extends(_g(uw,pw,{strict:!0,decode:hw,encode:mw}).annotations({identifier:"FiberId"})){static annotations=super.annotations}const yw=Jm({_tag:Dh("Empty")}),bw=Jm({_tag:Dh("Interrupt"),fiberId:uw}),Sw=(e,t)=>{const n=hg((()=>r)),r=um(yw,(e=>Jm({_tag:Dh("Fail"),error:e}))(e),(e=>Jm({_tag:Dh("Die"),defect:e}))(t),bw,(e=>Jm({_tag:Dh("Sequential"),left:e,right:e}))(n),(e=>Jm({_tag:Dh("Parallel"),left:e,right:e}))(n)).annotations({description:`CauseEncoded<${gh(e)}>`});return r},vw=(e,t)=>n=>n.letrec((r=>({Empty:n.record({_tag:n.constant("Empty")}),Fail:n.record({_tag:n.constant("Fail"),error:e(n)}),Die:n.record({_tag:n.constant("Die"),defect:t(n)}),Interrupt:n.record({_tag:n.constant("Interrupt"),fiberId:fw(n)}),Sequential:n.record({_tag:n.constant("Sequential"),left:r("Cause"),right:r("Cause")}),Parallel:n.record({_tag:n.constant("Parallel"),left:r("Cause"),right:r("Cause")}),Cause:n.oneof(r("Empty"),r("Fail"),r("Die"),r("Interrupt"),r("Sequential"),r("Parallel"))}))).Cause.map(kw),ww=e=>t=>{const n=t=>{switch(t._tag){case"Empty":return"Cause.empty";case"Fail":return`Cause.fail(${e(t.error)})`;case"Die":return`Cause.die(${W.pretty(t)})`;case"Interrupt":return`Cause.interrupt(${dw(t.fiberId)})`;case"Sequential":return`Cause.sequential(${n(t.left)}, ${n(t.right)})`;case"Parallel":return`Cause.parallel(${n(t.left)}, ${n(t.right)})`}};return n(t)},Ew=e=>(t,n,r)=>W.isCause(t)?Ab(e(xw(t),n),kw,r,t):nh.fail(new nh.Type(r,t)),_w=({defect:e=tm,error:t})=>Gh([t,e],{decode:(e,t)=>Ew(nh.decodeUnknown(Sw(e,t))),encode:(e,t)=>Ew(nh.encodeUnknown(Sw(e,t)))},{description:`Cause<${gh(t)}>`,pretty:ww,arbitrary:vw});function kw(e){switch(e._tag){case"Empty":return W.empty;case"Fail":return W.fail(e.error);case"Die":return W.die(e.defect);case"Interrupt":return W.interrupt(hw(e.fiberId));case"Sequential":return W.sequential(kw(e.left),kw(e.right));case"Parallel":return W.parallel(kw(e.left),kw(e.right))}}function xw(e){switch(e._tag){case"Empty":return{_tag:"Empty"};case"Fail":return{_tag:"Fail",error:e.error};case"Die":return{_tag:"Die",defect:e.defect};case"Interrupt":return{_tag:"Interrupt",fiberId:e.fiberId};case"Sequential":return{_tag:"Sequential",left:xw(e.left),right:xw(e.right)};case"Parallel":return{_tag:"Parallel",left:xw(e.left),right:xw(e.right)}}}const Iw=_g(tm,tm,{strict:!0,decode:e=>{if(m.isObject(e)&&"message"in e&&"string"===typeof e.message){const t=new Error(e.message,{cause:e});return"name"in e&&"string"===typeof e.name&&(t.name=e.name),t.stack="stack"in e&&"string"===typeof e.stack?e.stack:"",t}return String(e)},encode:e=>e instanceof Error?{name:e.name,message:e.message}:String(e)}),Tw=({defect:e=Iw,error:t})=>{const n=mh(t);return _g(Sw(n,e),_w({error:Sh(n),defect:Sh(e)}),{strict:!0,decode:kw,encode:xw})},Ow=(e,t,n)=>um(((e,t)=>Jm({_tag:Dh("Failure"),cause:Sw(e,t)}).annotations({description:`FailureEncoded<${gh(e)}>`}))(t,n),(e=>Jm({_tag:Dh("Success"),value:e}).annotations({description:`SuccessEncoded<${gh(e)}>`}))(e)).annotations({description:`ExitEncoded<${gh(e)}, ${gh(t)}>`}),Aw=e=>{switch(e._tag){case"Failure":return xe.failCause(kw(e.cause));case"Success":return xe.succeed(e.value)}},Nw=(e,t,n)=>r=>r.oneof(r.record({_tag:r.constant("Failure"),cause:vw(t,n)(r)}),r.record({_tag:r.constant("Success"),value:e(r)})).map(Aw),Mw=(e,t)=>n=>"Failure"===n._tag?`Exit.failCause(${ww(t)(n.cause)})`:`Exit.succeed(${e(n.value)})`,Cw=(e,t)=>(n,r,i)=>xe.isExit(n)?xe.match(n,{onFailure:e=>Ab(t(e,r),xe.failCause,i,n),onSuccess:t=>Ab(e(t,r),xe.succeed,i,n)}):nh.fail(new nh.Type(i,n)),Rw=({defect:e=tm,failure:t,success:n})=>Gh([n,t,e],{decode:(e,t,n)=>Cw(nh.decodeUnknown(e),nh.decodeUnknown(_w({error:t,defect:n}))),encode:(e,t,n)=>Cw(nh.encodeUnknown(e),nh.encodeUnknown(_w({error:t,defect:n})))},{description:`Exit<${gh(n)}, ${gh(t)}>`,pretty:Mw,arbitrary:Nw}),Fw=({defect:e=Iw,failure:t,success:n})=>{const r=mh(n),i=mh(t);return _g(Ow(r,i,e),Rw({failure:Sh(i),success:Sh(r),defect:Sh(e)}),{strict:!0,decode:Aw,encode:e=>"Failure"===e._tag?{_tag:"Failure",cause:e.cause}:{_tag:"Success",value:e.value}})},Lw=e=>t=>t.array(e(t)).map((e=>J.fromIterable(e))),Pw=e=>t=>`HashSet(${Array.from(t).map((t=>e(t))).join(", ")})`,Dw=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e),Array.from(n))))},Uw=e=>(t,n,r)=>J.isHashSet(t)?Ab(e(Array.from(t),n),J.fromIterable,r,t):nh.fail(new nh.Type(r,t)),jw=e=>Gh([e],{decode:e=>Uw(nh.decodeUnknown(wm(e))),encode:e=>Uw(nh.encodeUnknown(wm(e)))},{description:`HashSet<${gh(e)}>`,pretty:Pw,arbitrary:Lw,equivalence:Dw}),qw=e=>{const t=mh(e);return _g(wm(t),jw(Sh(t)),{strict:!0,decode:e=>J.fromIterable(e),encode:e=>Array.from(e)})},Ww=(e,t)=>n=>n.array(n.tuple(e(n),t(n))).map((e=>Te.fromIterable(e))),Bw=(e,t)=>n=>`HashMap([${Array.from(n).map((([n,r])=>`[${e(n)}, ${t(r)}]`)).join(", ")}])`,zw=(e,t)=>{const n=s.getEquivalence(c.make((([n,r],[i,a])=>e(n,i)&&t(r,a))));return c.make(((e,t)=>n(Array.from(e),Array.from(t))))},$w=e=>(t,n,r)=>Te.isHashMap(t)?Ab(e(Array.from(t),n),Te.fromIterable,r,t):nh.fail(new nh.Type(r,t)),Vw=({key:e,value:t})=>Gh([e,t],{decode:(e,t)=>$w(nh.decodeUnknown(wm(Sm(e,t)))),encode:(e,t)=>$w(nh.encodeUnknown(wm(Sm(e,t))))},{description:`HashMap<${gh(e)}, ${gh(t)}>`,pretty:Bw,arbitrary:Ww,equivalence:zw}),Gw=({key:e,value:t})=>{const n=mh(e),r=mh(t);return _g(wm(Sm(n,r)),Vw({key:Sh(n),value:Sh(r)}),{strict:!0,decode:e=>Te.fromIterable(e),encode:e=>Array.from(e)})},Jw=e=>t=>t.array(e(t)).map((e=>Oe.fromIterable(e))),Hw=e=>t=>`List(${Array.from(t).map((t=>e(t))).join(", ")})`,Kw=e=>{const t=s.getEquivalence(e);return c.make(((e,n)=>t(Array.from(e),Array.from(n))))},Yw=e=>(t,n,r)=>Oe.isList(t)?Ab(e(Array.from(t),n),Oe.fromIterable,r,t):nh.fail(new nh.Type(r,t)),Zw=e=>Gh([e],{decode:e=>Yw(nh.decodeUnknown(wm(e))),encode:e=>Yw(nh.encodeUnknown(wm(e)))},{description:`List<${gh(e)}>`,pretty:Hw,arbitrary:Jw,equivalence:Kw}),Qw=e=>{const t=mh(e);return _g(wm(t),Zw(Sh(t)),{strict:!0,decode:e=>Oe.fromIterable(e),encode:e=>Array.from(e)})},Xw=e=>t=>`new SortedSet([${Array.from(Re.values(t)).map((t=>e(t))).join(", ")}])`,eE=(e,t)=>(n,r,i)=>Re.isSortedSet(n)?Ab(e(Array.from(Re.values(n)),r),(e=>Re.fromIterable(e,t)),i,n):nh.fail(new nh.Type(i,n)),tE=(e,t,n)=>Gh([e],{decode:e=>eE(nh.decodeUnknown(wm(e)),t),encode:e=>eE(nh.encodeUnknown(wm(e)),n)},{description:`SortedSet<${gh(e)}>`,pretty:Xw,arbitrary:e=>{return n=e,r=t,e=>e.array(n(e)).map((e=>Re.fromIterable(e,r)));var n,r},equivalence:()=>Re.getEquivalence()}),nE=(e,t)=>{const n=mh(e),r=Sh(n);return _g(wm(n),tE(r,t,t),{strict:!0,decode:e=>Re.fromIterable(e,t),encode:e=>Array.from(Re.values(e))})};class rE extends(_g(tm,om,{strict:!0,decode:m.isTruthy,encode:l.identity}).annotations({identifier:"BooleanFromUnknown"})){static annotations=super.annotations}const iE=(e,t)=>{const n=Nh(t);return ie(e).pipe(re((e=>n(e).pipe(G.mapLeft((e=>$([],lh.formatErrorSync(e))))))))}},660926:(e,t,n)=>{n.r(t),n.d(t,{formatError:()=>f,formatErrorSync:()=>d,formatForbiddenMessage:()=>I,formatIssue:()=>l,formatIssueSync:()=>u,formatMissingMessage:()=>O,formatTypeMessage:()=>k,formatUnexpectedMessage:()=>T,getMessage:()=>E});var r=n(837875),i=n(504491),a=n(125105),s=n(674232),o=n(464178);const c=(e,t=[])=>({value:e,forest:t}),l=e=>r.map(N(e),(e=>p(e))),u=e=>r.runSync(l(e)),f=e=>l(e.issue),d=e=>u(e.issue),p=e=>e.value+h("\n",e.forest),h=(e,t)=>{let n="";const r=t.length;let i;for(let a=0;a<r;a++){i=t[a];const s=a===r-1;n+=e+(s?"\u2514":"\u251c")+"\u2500 "+i.value,n+=h(e+(r>1&&!s?"\u2502  ":"   "),i.forest)}return n},m=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},g=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},y=e=>"ast"in e?i.some(e.ast):i.none(),b=e=>t=>t._tag===e,S=b("Composite"),v=b("Refinement"),w=b("Transformation"),E=e=>(e=>y(e).pipe(i.flatMap(s.getMessageAnnotation),r.flatMap((t=>{const n=t(e);return a.isString(n)?r.succeed({message:n,override:!1}):r.isEffect(n)?r.map(n,(e=>({message:e,override:!1}))):a.isString(n.message)?r.succeed({message:n.message,override:n.override}):r.map(n.message,(e=>({message:e,override:n.override})))}))))(e).pipe(r.flatMap((t=>!t.override&&(S(e)||v(e)&&"From"===e.kind||w(e)&&"Transformation"!==e.kind)?w(e)||v(e)?E(e.issue):i.none():r.succeed(t.message)))),_=e=>y(e).pipe(i.flatMap(s.getParseIssueTitleAnnotation),i.filterMap((t=>i.fromNullable(t(e))))),k=e=>E(e).pipe(r.orElse((()=>_(e))),r.catchAll((()=>r.succeed(e.message??`Expected ${String(e.ast)}, actual ${o.formatUnknown(e.actual)}`)))),x=e=>i.getOrElse(_(e),(()=>String(e.ast))),I=e=>e.message??"is forbidden",T=e=>e.message??"is unexpected",O=e=>s.getMissingMessageAnnotation(e.ast).pipe(r.flatMap((e=>{const t=e();return a.isString(t)?r.succeed(t):t})),r.catchAll((()=>r.succeed(e.message??"is missing")))),A=(e,t)=>r.matchEffect(E(e),{onFailure:t,onSuccess:e=>r.succeed(c(e))}),N=e=>{switch(e._tag){case"Type":return r.map(k(e),c);case"Forbidden":return r.succeed(c(x(e),[c(I(e))]));case"Unexpected":return r.succeed(c(T(e)));case"Missing":return r.map(O(e),c);case"Transformation":return A(e,(()=>r.map(N(e.issue),(t=>c(x(e),[c(m(e.kind),[t])])))));case"Refinement":return A(e,(()=>r.map(N(e.issue),(t=>c(x(e),[c(g(e.kind),[t])])))));case"Pointer":return r.map(N(e.issue),(t=>c(o.formatPath(e.path),[t])));case"Composite":{const t=x(e);return A(e,(()=>o.isNonEmpty(e.issues)?r.map(r.forEach(e.issues,N),(e=>c(t,e))):r.map(N(e.issues),(e=>c(t,[e])))))}}}},758729:(e,t,n)=>{n.r(t),n.d(t,{getASTDuplicateIndexSignatureErrorMessage:()=>I,getASTDuplicatePropertySignatureErrorMessage:()=>M,getASTDuplicatePropertySignatureTransformationErrorMessage:()=>A,getASTIndexSignatureParameterErrorMessage:()=>T,getASTRequiredElementFollowinAnOptionalElementErrorMessage:()=>O,getASTUnsupportedKeySchema:()=>k,getASTUnsupportedLiteral:()=>x,getASTUnsupportedRenameSchema:()=>N,getASTUnsupportedSchema:()=>_,getArbitraryEmptyEnumErrorMessage:()=>f,getArbitraryMissingAnnotationErrorMessage:()=>u,getArbitraryUnsupportedErrorMessage:()=>l,getEquivalenceUnsupportedErrorMessage:()=>d,getInvalidArgumentErrorMessage:()=>s,getJSONSchemaMissingAnnotationErrorMessage:()=>p,getJSONSchemaMissingIdentifierAnnotationErrorMessage:()=>h,getJSONSchemaUnsupportedKeyErrorMessage:()=>y,getJSONSchemaUnsupportedParameterErrorMessage:()=>m,getJSONSchemaUnsupportedPostRestElementsErrorMessage:()=>g,getPrettyMissingAnnotationErrorMessage:()=>b,getPrettyNeverErrorMessage:()=>S,getPrettyNoMatchingSchemaErrorMessage:()=>v,getSchemaExtendErrorMessage:()=>w,getSchemaUnsupportedLiteralSpanErrorMessage:()=>E});var r=n(342072),i=n(464178);const a=(e,t,n,a)=>{let s=e;return n&&r.isNonEmptyReadonlyArray(n)&&(s+=`\nat path: ${i.formatPath(n)}`),void 0!==t&&(s+=`\ndetails: ${t}`),a&&(s+=`\nschema (${a._tag}): ${a}`),s},s=e=>a("Invalid Argument",e),o=(e,t,n)=>a("Unsupported schema",e,t,n),c=(e,t,n)=>a("Missing annotation",e,t,n),l=(e,t)=>o("Cannot build an Arbitrary for this schema",e,t),u=(e,t)=>c('Generating an Arbitrary for this schema requires an "arbitrary" annotation',e,t),f=e=>a("Empty Enums schema","Generating an Arbitrary for this schema requires at least one enum",e),d=(e,t)=>o("Cannot build an Equivalence",t,e),p=(e,t)=>c('Generating a JSON Schema for this schema requires a "jsonSchema" annotation',e,t),h=(e,t)=>c('Generating a JSON Schema for this schema requires an "identifier" annotation',e,t),m=(e,t)=>a("Unsupported index signature parameter",void 0,e,t),g=e=>a("Generating a JSON Schema for post-rest elements is not currently supported. You're welcome to contribute by submitting a Pull Request",void 0,e),y=(e,t)=>a("Unsupported key",`Cannot encode ${i.formatPropertyKey(e)} key to JSON Schema`,t),b=(e,t)=>c('Generating a Pretty for this schema requires a "pretty" annotation',e,t),S="Cannot pretty print a `never` value",v=(e,t,n)=>a("Unexpected Error",`Cannot find a matching schema for ${i.formatUnknown(e)}`,t,n),w=(e,t,n)=>a("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),E=e=>a("Unsupported template literal span",void 0,void 0,e),_=e=>o(void 0,void 0,e),k=e=>a("Unsupported key schema",void 0,void 0,e),x=e=>a("Unsupported literal",`literal value: ${i.formatUnknown(e)}`),I=e=>a("Duplicate index signature",`${e} index signature`),T=a("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),O=a("Invalid element","A required element cannot follow an optional element. ts(1257)"),A=e=>a("Duplicate property signature transformation",`Duplicate key ${i.formatUnknown(e)}`),N=e=>o(void 0,void 0,e),M=e=>a("Duplicate property signature",`Duplicate key ${i.formatUnknown(e)}`)},464178:(e,t,n)=>{n.r(t),n.d(t,{formatPath:()=>p,formatPathKey:()=>d,formatPropertyKey:()=>l,formatUnknown:()=>c,getKeysForIndexSignature:()=>a,isNonEmpty:()=>u,isSingle:()=>f,memoizeThunk:()=>o,ownKeys:()=>s});var r=n(342072),i=n(125105);const a=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return a(e,t.from)}},s=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),o=e=>{let t,n=!1;return()=>(n||(t=e(),n=!0),t)},c=e=>{if(i.isString(e))return JSON.stringify(e);if(i.isNumber(e)||null==e||i.isBoolean(e)||i.isSymbol(e)||i.isDate(e))return String(e);if(i.isBigInt(e))return String(e)+"n";if(!r.isArray(e)&&i.hasProperty(e,"toString")&&i.isFunction(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),r.isArray(e)?`[${e.map(c).join(",")}]`:`{${s(e).map((t=>`${i.isString(t)?JSON.stringify(t):String(t)}:${c(e[t])}`)).join(",")}}`}catch(t){return String(e)}},l=e=>"string"===typeof e?JSON.stringify(e):String(e),u=e=>Array.isArray(e),f=e=>!Array.isArray(e),d=e=>`[${l(e)}]`,p=e=>u(e)?e.map(d).join(""):d(e)},643566:(e,t,n)=>{function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function i(e){if("boolean"!==typeof e)throw new Error(`boolean expected, not ${e}`)}function a(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!a(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function l(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}n.r(t),n.d(t,{bool:()=>i,bytes:()=>s,default:()=>u,exists:()=>c,hash:()=>o,isBytes:()=>a,number:()=>r,output:()=>l});const u={number:r,bool:i,bytes:s,hash:o,exists:c,output:l}},643528:(e,t,n)=>{n.r(t),n.d(t,{Hash:()=>x,asyncLoop:()=>b,bytesToHex:()=>u,bytesToNumberBE:()=>m,bytesToUtf8:()=>v,checkOpts:()=>_,concatBytes:()=>E,createView:()=>o,equalBytes:()=>k,hexToBytes:()=>p,hexToNumber:()=>h,isLE:()=>c,nextTick:()=>y,numberToBytesBE:()=>g,setBigUint64:()=>T,toBytes:()=>w,u16:()=>a,u32:()=>s,u64Lengths:()=>O,u8:()=>i,utf8ToBytes:()=>S,wrapCipher:()=>I});var r=n(643566);const i=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),s=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),c=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!c)throw new Error("Non little-endian hardware is not supported");const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){(0,r.bytes)(e);let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t}const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function d(e){return e>=f._0&&e<=f._9?e-f._0:e>=f._A&&e<=f._F?e-(f._A-10):e>=f._a&&e<=f._f?e-(f._a-10):void 0}function p(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const t=d(e.charCodeAt(a)),n=d(e.charCodeAt(a+1));if(void 0===t||void 0===n){const t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}r[i]=16*t+n}return r}function h(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function m(e){return h(u(e))}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}const y=async()=>{};async function b(e,t,n){let r=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-r;e>=0&&e<t||(await y(),r+=e)}}function S(e){if("string"!==typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function v(e){return(new TextDecoder).decode(e)}function w(e){if("string"===typeof e)e=S(e);else{if(!(0,r.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}function E(...e){let t=0;for(let i=0;i<e.length;i++){const n=e[i];(0,r.bytes)(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.length}return n}function _(e,t){if(null==t||"object"!==typeof t)throw new Error("options must be defined");return Object.assign(e,t)}function k(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}class x{}const I=(e,t)=>(Object.assign(t,e),t);function T(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),s=Number(n>>i&a),o=Number(n&a),c=r?4:0,l=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+l,o,r)}function O(e,t){const n=new Uint8Array(16),r=o(n);return T(r,0,BigInt(t?t.length:0),!0),T(r,8,BigInt(e.length),!0),n}},342072:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>Pt,allocate:()=>b,append:()=>M,appendAll:()=>C,bind:()=>Dt,bindTo:()=>Ut,cartesian:()=>Lt,cartesianWith:()=>Ft,chop:()=>Le,chunksOf:()=>We,contains:()=>Fe,containsWith:()=>Ce,copy:()=>qe,dedupe:()=>At,dedupeAdjacent:()=>Mt,dedupeAdjacentWith:()=>Nt,dedupeWith:()=>Ot,difference:()=>Ye,differenceWith:()=>Ke,drop:()=>se,dropRight:()=>oe,dropWhile:()=>ce,empty:()=>Ze,ensure:()=>_,every:()=>St,extend:()=>wt,filter:()=>ct,filterMap:()=>nt,filterMapWhile:()=>rt,findFirst:()=>fe,findFirstIndex:()=>le,findLast:()=>de,findLastIndex:()=>ue,flatMap:()=>et,flatMapNullable:()=>yt,flatten:()=>tt,forEach:()=>Tt,fromIterable:()=>E,fromNullable:()=>mt,fromOption:()=>x,fromRecord:()=>k,get:()=>z,getEquivalence:()=>It,getLefts:()=>st,getOrder:()=>xt,getRights:()=>ot,getSomes:()=>at,group:()=>ze,groupBy:()=>$e,groupWith:()=>Be,head:()=>J,headNonEmpty:()=>H,init:()=>X,initNonEmpty:()=>ee,insertAt:()=>pe,intersection:()=>He,intersectionWith:()=>Je,intersperse:()=>Ie,isArray:()=>L,isEmptyArray:()=>P,isEmptyReadonlyArray:()=>D,isNonEmptyArray:()=>U,isNonEmptyReadonlyArray:()=>j,join:()=>Ct,last:()=>K,lastNonEmpty:()=>Y,length:()=>q,let:()=>jt,liftEither:()=>bt,liftNullable:()=>gt,liftOption:()=>ht,liftPredicate:()=>pt,make:()=>y,makeBy:()=>S,map:()=>Xe,mapAccum:()=>Rt,match:()=>I,matchLeft:()=>T,matchRight:()=>O,max:()=>_t,min:()=>Et,modify:()=>ge,modifyNonEmptyHead:()=>Te,modifyNonEmptyLast:()=>Ae,modifyOption:()=>ye,of:()=>Qe,partition:()=>lt,partitionMap:()=>it,prepend:()=>A,prependAll:()=>N,range:()=>v,reduce:()=>ft,reduceRight:()=>dt,remove:()=>be,replace:()=>he,replaceOption:()=>me,replicate:()=>w,reverse:()=>Se,rotate:()=>Me,scan:()=>R,scanRight:()=>F,separate:()=>ut,setNonEmptyHead:()=>Oe,setNonEmptyLast:()=>Ne,some:()=>vt,sort:()=>ve,sortBy:()=>Ee,sortWith:()=>we,span:()=>ae,split:()=>Ue,splitAt:()=>Pe,splitNonEmptyAt:()=>De,splitWhere:()=>je,tail:()=>Z,tailNonEmpty:()=>Q,take:()=>te,takeRight:()=>ne,takeWhile:()=>re,unappend:()=>G,unfold:()=>kt,union:()=>Ge,unionWith:()=>Ve,unprepend:()=>V,unsafeGet:()=>$,unzip:()=>xe,zip:()=>_e,zipWith:()=>ke});var r=n(411123),i=n(382300),a=n(84108),s=n(154258),o=n(409161),c=n(997385),l=n(504491),u=n(125105),f=n(194514);const d=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){const e=t(r,n);if((0,u.isBoolean)(e)){if(e)return l.some(r)}else if(l.isSome(e))return e;n++}return l.none()})),p=(Symbol.iterator,{next:()=>({done:!0,value:void 0})}),h=(0,s.dual)(2,((e,t)=>({[Symbol.iterator](){const n=e[Symbol.iterator]();let r=0;return{next(){let e=n.next();for(;!e.done;){const i=t(e.value,r++);if(l.isSome(i))return{done:!1,value:i.value};e=n.next()}return{done:!0,value:void 0}}}}})));s.identity;var m=n(880308),g=n(939739);const y=(...e)=>e,b=e=>new Array(e),S=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let i=0;i<n;i++)r[i]=t(i);return r},v=(e,t)=>e<=t?S(t-e+1,(t=>e+t)):[e],w=(0,s.dual)(2,((e,t)=>S(t,(()=>e)))),E=e=>Array.isArray(e)?e:Array.from(e),_=e=>Array.isArray(e)?e:[e],k=g.toEntries,x=l.toArray,I=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(e):t())),T=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(H(e),Q(e)):t())),O=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>j(e)?n(ee(e),Y(e)):t())),A=(0,s.dual)(2,((e,t)=>[t,...e])),N=(0,s.dual)(2,((e,t)=>E(t).concat(E(e)))),M=(0,s.dual)(2,((e,t)=>[...e,t])),C=(0,s.dual)(2,((e,t)=>E(e).concat(E(t)))),R=(0,s.dual)(3,((e,t,n)=>{const r=[t];let i=0;for(const a of e)r[i+1]=n(r[i],a),i++;return r})),F=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=new Array(r.length+1);i[r.length]=t;for(let a=r.length-1;a>=0;a--)i[a]=n(i[a+1],r[a]);return i})),L=Array.isArray,P=e=>0===e.length,D=P,U=o.isNonEmptyArray,j=o.isNonEmptyArray,q=e=>e.length,W=(e,t)=>e<0||e>=t.length,B=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),z=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);return W(n,e)?l.none():l.some(e[n])})),$=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);if(W(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]})),V=e=>[H(e),Q(e)],G=e=>[ee(e),Y(e)],J=z(0),H=$(0),K=e=>j(e)?l.some(Y(e)):l.none(),Y=e=>e[e.length-1],Z=e=>{const t=E(e);return j(t)?l.some(Q(t)):l.none()},Q=e=>e.slice(1),X=e=>{const t=E(e);return j(t)?l.some(ee(t)):l.none()},ee=e=>e.slice(0,-1),te=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice(0,B(t,n))})),ne=(0,s.dual)(2,((e,t)=>{const n=E(e),r=B(t,n);return 0===r?[]:n.slice(-r)})),re=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){if(!t(i,n))break;r.push(i),n++}return r})),ie=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},ae=(0,s.dual)(2,((e,t)=>Pe(e,ie(e,t)))),se=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice(B(t,n),n.length)})),oe=(0,s.dual)(2,((e,t)=>{const n=E(e);return n.slice(0,n.length-B(t,n))})),ce=(0,s.dual)(2,((e,t)=>E(e).slice(ie(e,t)))),le=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){if(t(r,n))return l.some(n);n++}return l.none()})),ue=(0,s.dual)(2,((e,t)=>{const n=E(e);for(let r=n.length-1;r>=0;r--)if(t(n[r],r))return l.some(r);return l.none()})),fe=d,de=(0,s.dual)(2,((e,t)=>{const n=E(e);for(let r=n.length-1;r>=0;r--){const e=n[r],i=t(e,r);if((0,u.isBoolean)(i)){if(i)return l.some(e)}else if(l.isSome(i))return i}return l.none()})),pe=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);return t<0||t>r.length?l.none():(r.splice(t,0,n),l.some(r))})),he=(0,s.dual)(3,((e,t,n)=>ge(e,t,(()=>n)))),me=(0,s.dual)(3,((e,t,n)=>ye(e,t,(()=>n)))),ge=(0,s.dual)(3,((e,t,n)=>l.getOrElse(ye(e,t,n),(()=>Array.from(e))))),ye=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);if(W(t,r))return l.none();const i=n(r[t]);return r[t]=i,l.some(r)})),be=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return W(t,n)||n.splice(t,1),n})),Se=e=>Array.from(e).reverse(),ve=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return n.sort(t),n})),we=(0,s.dual)(3,((e,t,n)=>ve(e,m.mapInput(n,t)))),Ee=(...e)=>{const t=ve(m.combineAll(e));return e=>{const n=E(e);return j(n)?t(n):[]}},_e=(0,s.dual)(2,((e,t)=>ke(e,t,f.make))),ke=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=E(t);if(j(r)&&j(i)){const e=[n(H(r),H(i))],t=Math.min(r.length,i.length);for(let a=1;a<t;a++)e[a]=n(r[a],i[a]);return e}return[]})),xe=e=>{const t=E(e);if(j(t)){const e=[t[0][0]],n=[t[0][1]];for(let r=1;r<t.length;r++)e[r]=t[r][0],n[r]=t[r][1];return[e,n]}return[[],[]]},Ie=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const e=[H(n)],r=Q(n);for(let n=0;n<r.length;n++)n<r.length&&e.push(t),e.push(r[n]);return e}return[]})),Te=(0,s.dual)(2,((e,t)=>[t(H(e)),...Q(e)])),Oe=(0,s.dual)(2,((e,t)=>Te(e,(()=>t)))),Ae=(0,s.dual)(2,((e,t)=>M(ee(e),t(Y(e))))),Ne=(0,s.dual)(2,((e,t)=>Ae(e,(()=>t)))),Me=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const r=n.length,i=Math.round(t)%r;if(W(Math.abs(i),n)||0===i)return qe(n);if(i<0){const[e,t]=De(n,-i);return C(t,e)}return Me(e,i-r)}return[]})),Ce=e=>(0,s.dual)(2,((t,n)=>{for(const r of t)if(e(n,r))return!0;return!1})),Re=i.equivalence(),Fe=Ce(Re),Le=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const[e,r]=t(n),i=[e];let a=r;for(;o.isNonEmptyArray(a);){const[e,n]=t(a);i.push(e),a=n}return i}return[]})),Pe=(0,s.dual)(2,((e,t)=>{const n=Array.from(e),r=Math.floor(t);return j(n)?r>=1?De(n,r):[[],n]:[n,[]]})),De=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[qe(e),[]]:[A(e.slice(1,n),H(e)),e.slice(n)]})),Ue=(0,s.dual)(2,((e,t)=>{const n=E(e);return We(n,Math.ceil(n.length/Math.floor(t)))})),je=(0,s.dual)(2,((e,t)=>ae(e,((e,n)=>!t(e,n))))),qe=e=>e.slice(),We=(0,s.dual)(2,((e,t)=>{const n=E(e);return j(n)?Le(n,De(t)):[]})),Be=(0,s.dual)(2,((e,t)=>Le(e,(e=>{const n=H(e),r=[n];let i=1;for(;i<e.length;i++){const a=e[i];if(!t(a,n))break;r.push(a)}return[r,e.slice(i)]})))),ze=Be(i.equivalence()),$e=(0,s.dual)(2,((e,t)=>{const n={};for(const r of e){const e=t(r);Object.prototype.hasOwnProperty.call(n,e)?n[e].push(r):n[e]=[r]}return n})),Ve=(0,s.dual)(3,((e,t,n)=>{const r=E(e),i=E(t);if(j(r)){if(j(i)){return Ot(n)(C(r,i))}return r}return i})),Ge=(0,s.dual)(2,((e,t)=>Ve(e,t,Re))),Je=e=>{const t=Ce(e);return(0,s.dual)(2,((e,n)=>E(e).filter((e=>t(n,e)))))},He=Je(Re),Ke=e=>{const t=Ce(e);return(0,s.dual)(2,((e,n)=>E(e).filter((e=>!t(n,e)))))},Ye=Ke(Re),Ze=()=>[],Qe=e=>[e],Xe=(0,s.dual)(2,((e,t)=>e.map(t))),et=(0,s.dual)(2,((e,t)=>{if(D(e))return[];const n=[];for(let r=0;r<e.length;r++){const i=t(e[r],r);for(let e=0;e<i.length;e++)n.push(i[e])}return n})),tt=et(s.identity),nt=(0,s.dual)(2,((e,t)=>{const n=E(e),r=[];for(let i=0;i<n.length;i++){const e=t(n[i],i);l.isSome(e)&&r.push(e.value)}return r})),rt=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){const e=t(i,n);if(!l.isSome(e))break;r.push(e.value),n++}return r})),it=(0,s.dual)(2,((e,t)=>{const n=[],i=[],a=E(e);for(let s=0;s<a.length;s++){const e=t(a[s],s);r.isLeft(e)?n.push(e.left):i.push(e.right)}return[n,i]})),at=nt(s.identity),st=e=>{const t=[];for(const n of e)r.isLeft(n)&&t.push(n.left);return t},ot=e=>{const t=[];for(const n of e)r.isRight(n)&&t.push(n.right);return t},ct=(0,s.dual)(2,((e,t)=>{const n=E(e),r=[];for(let i=0;i<n.length;i++)t(n[i],i)&&r.push(n[i]);return r})),lt=(0,s.dual)(2,((e,t)=>{const n=[],r=[],i=E(e);for(let a=0;a<i.length;a++)t(i[a],a)?r.push(i[a]):n.push(i[a]);return[n,r]})),ut=it(s.identity),ft=(0,s.dual)(3,((e,t,n)=>E(e).reduce(((e,t,r)=>n(e,t,r)),t))),dt=(0,s.dual)(3,((e,t,n)=>E(e).reduceRight(((e,t,r)=>n(e,t,r)),t))),pt=e=>t=>e(t)?[t]:[],ht=e=>(...t)=>x(e(...t)),mt=e=>null==e?Ze():[e],gt=e=>(...t)=>mt(e(...t)),yt=(0,s.dual)(2,((e,t)=>et(e,(e=>mt(t(e)))))),bt=e=>(...t)=>{const n=e(...t);return r.isLeft(n)?[]:[n.right]},St=(0,s.dual)(2,((e,t)=>e.every(t))),vt=(0,s.dual)(2,((e,t)=>e.some(t))),wt=(0,s.dual)(2,((e,t)=>e.map(((e,n,r)=>t(r.slice(n)))))),Et=(0,s.dual)(2,((e,t)=>e.reduce(m.min(t)))),_t=(0,s.dual)(2,((e,t)=>e.reduce(m.max(t)))),kt=(e,t)=>{const n=[];let r,i=e;for(;l.isSome(r=t(i));){const[e,t]=r.value;n.push(e),i=t}return n},xt=m.array,It=a.array,Tt=(0,s.dual)(2,((e,t)=>E(e).forEach(((e,n)=>t(e,n))))),Ot=(0,s.dual)(2,((e,t)=>{const n=E(e);if(j(n)){const e=[H(n)],r=Q(n);for(const n of r)e.every((e=>!t(n,e)))&&e.push(n);return e}return[]})),At=e=>Ot(e,i.equivalence()),Nt=(0,s.dual)(2,((e,t)=>{const n=[];let r=l.none();for(const i of e)!l.isNone(r)&&t(i,r.value)||(n.push(i),r=l.some(i));return n})),Mt=Nt(i.equivalence()),Ct=(0,s.dual)(2,((e,t)=>E(e).join(t))),Rt=(0,s.dual)(3,((e,t,n)=>{let r=0,i=t;const a=[];for(const s of e){const e=n(i,s,r);i=e[0],a.push(e[1]),r++}return[i,a]})),Ft=(0,s.dual)(3,((e,t,n)=>et(e,(e=>Xe(t,(t=>n(e,t))))))),Lt=(0,s.dual)(2,((e,t)=>Ft(e,t,((e,t)=>[e,t])))),Pt=Qe({}),Dt=c.bind(Xe,et),Ut=c.bindTo(Xe),jt=c.let_(Xe)},893212:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>c,Order:()=>l,and:()=>f,eqv:()=>g,every:()=>b,implies:()=>y,isBoolean:()=>s,match:()=>o,nand:()=>d,nor:()=>h,not:()=>u,or:()=>p,some:()=>S,xor:()=>m});var r=n(84108),i=n(154258),a=n(880308);const s=n(125105).isBoolean,o=(0,i.dual)(2,((e,t)=>e?t.onTrue():t.onFalse())),c=r.boolean,l=a.boolean,u=e=>!e,f=(0,i.dual)(2,((e,t)=>e&&t)),d=(0,i.dual)(2,((e,t)=>!(e&&t))),p=(0,i.dual)(2,((e,t)=>e||t)),h=(0,i.dual)(2,((e,t)=>!(e||t))),m=(0,i.dual)(2,((e,t)=>!e&&t||e&&!t)),g=(0,i.dual)(2,((e,t)=>!m(e,t))),y=(0,i.dual)(2,((e,t)=>!e||t)),b=e=>{for(const t of e)if(!t)return!1;return!0},S=e=>{for(const t of e)if(t)return!0;return!1}},114471:(e,t,n)=>{n.r(t),n.d(t,{CauseTypeId:()=>a,ExceededCapacityException:()=>ge,ExceededCapacityExceptionTypeId:()=>f,IllegalArgumentException:()=>oe,IllegalArgumentExceptionTypeId:()=>c,InterruptedException:()=>ae,InterruptedExceptionTypeId:()=>o,InvalidPubSubCapacityExceptionTypeId:()=>u,NoSuchElementException:()=>le,NoSuchElementExceptionTypeId:()=>l,RuntimeException:()=>fe,RuntimeExceptionTypeId:()=>s,TimeoutException:()=>pe,TimeoutExceptionTypeId:()=>d,UnknownException:()=>he,UnknownExceptionTypeId:()=>p,YieldableError:()=>h,andThen:()=>K,as:()=>G,contains:()=>Z,defects:()=>L,die:()=>y,dieOption:()=>q,empty:()=>m,fail:()=>g,failureOption:()=>D,failureOrCause:()=>U,failures:()=>F,filter:()=>te,find:()=>ee,flatMap:()=>H,flatten:()=>Y,flipCauseOption:()=>j,interrupt:()=>b,interruptOption:()=>W,interruptors:()=>P,isCause:()=>w,isDie:()=>M,isDieType:()=>k,isEmpty:()=>A,isEmptyType:()=>E,isExceededCapacityException:()=>ye,isFailType:()=>_,isFailure:()=>N,isIllegalArgumentException:()=>ce,isInterruptType:()=>x,isInterrupted:()=>C,isInterruptedException:()=>se,isInterruptedOnly:()=>R,isNoSuchElementException:()=>ue,isParallelType:()=>T,isRuntimeException:()=>de,isSequentialType:()=>I,isUnknownException:()=>me,keepDefects:()=>B,linearize:()=>z,map:()=>J,match:()=>ne,originalError:()=>ve,parallel:()=>S,pretty:()=>be,prettyErrors:()=>Se,reduce:()=>re,reduceWithContext:()=>ie,sequential:()=>v,size:()=>O,squash:()=>Q,squashWith:()=>X,stripFailures:()=>$,stripSomeDefects:()=>V});var r=n(240834),i=n(597081);const a=r.CauseTypeId,s=i.RuntimeExceptionTypeId,o=i.InterruptedExceptionTypeId,c=i.IllegalArgumentExceptionTypeId,l=i.NoSuchElementExceptionTypeId,u=i.InvalidPubSubCapacityExceptionTypeId,f=i.ExceededCapacityExceptionTypeId,d=i.TimeoutExceptionTypeId,p=i.UnknownExceptionTypeId,h=i.YieldableError,m=r.empty,g=r.fail,y=r.die,b=r.interrupt,S=r.parallel,v=r.sequential,w=r.isCause,E=r.isEmptyType,_=r.isFailType,k=r.isDieType,x=r.isInterruptType,I=r.isSequentialType,T=r.isParallelType,O=r.size,A=r.isEmpty,N=r.isFailure,M=r.isDie,C=r.isInterrupted,R=r.isInterruptedOnly,F=r.failures,L=r.defects,P=r.interruptors,D=r.failureOption,U=r.failureOrCause,j=r.flipCauseOption,q=r.dieOption,W=r.interruptOption,B=r.keepDefects,z=r.linearize,$=r.stripFailures,V=r.stripSomeDefects,G=r.as,J=r.map,H=r.flatMap,K=r.andThen,Y=r.flatten,Z=r.contains,Q=i.causeSquash,X=i.causeSquashWith,ee=r.find,te=r.filter,ne=r.match,re=r.reduce,ie=r.reduceWithContext,ae=i.InterruptedException,se=i.isInterruptedException,oe=i.IllegalArgumentException,ce=i.isIllegalArgumentException,le=i.NoSuchElementException,ue=i.isNoSuchElementException,fe=i.RuntimeException,de=i.isRuntimeException,pe=i.TimeoutException,he=i.UnknownException,me=i.isUnknownException,ge=i.ExceededCapacityException,ye=i.isExceededCapacityException,be=r.pretty,Se=r.prettyErrors,ve=i.originalInstance},889133:(e,t,n)=>{n.r(t),n.d(t,{append:()=>R,appendAll:()=>q,chunksOf:()=>H,compact:()=>$,contains:()=>Re,containsWith:()=>Fe,dedupe:()=>we,dedupeAdjacent:()=>Ee,difference:()=>Ve,differenceWith:()=>$e,drop:()=>P,dropRight:()=>D,dropWhile:()=>U,empty:()=>w,every:()=>je,filter:()=>B,filterMap:()=>W,filterMapWhile:()=>z,findFirst:()=>Le,findFirstIndex:()=>Pe,findLast:()=>De,findLastIndex:()=>Ue,flatMap:()=>V,flatten:()=>J,forEach:()=>G,fromIterable:()=>k,get:()=>A,getEquivalence:()=>m,head:()=>Q,headNonEmpty:()=>ee,intersection:()=>K,isChunk:()=>S,isEmpty:()=>Y,isNonEmpty:()=>Z,join:()=>We,last:()=>te,lastNonEmpty:()=>re,make:()=>E,makeBy:()=>Me,map:()=>ie,mapAccum:()=>ae,modify:()=>Oe,modifyOption:()=>Te,of:()=>_,partition:()=>se,partitionMap:()=>oe,prepend:()=>F,prependAll:()=>j,range:()=>Ce,reduce:()=>Be,reduceRight:()=>ze,remove:()=>Ie,replace:()=>Ae,replaceOption:()=>Ne,reverse:()=>O,separate:()=>ce,size:()=>le,some:()=>qe,sort:()=>ue,sortWith:()=>fe,split:()=>he,splitAt:()=>de,splitNonEmptyAt:()=>pe,splitWhere:()=>me,tail:()=>ge,tailNonEmpty:()=>ye,take:()=>L,takeRight:()=>be,takeWhile:()=>Se,toArray:()=>I,toReadonlyArray:()=>T,union:()=>ve,unsafeFromArray:()=>N,unsafeFromNonEmptyArray:()=>M,unsafeGet:()=>C,unsafeHead:()=>X,unsafeLast:()=>ne,unzip:()=>_e,zip:()=>xe,zipWith:()=>ke});var r=n(342072),i=n(382300),a=n(84108),s=n(154258),o=n(353370),c=n(58536),l=n(504491),u=n(880308),f=n(709322),d=n(125105);const p=Symbol.for("effect/Chunk");const h=[],m=e=>a.make(((t,n)=>t.length===n.length&&T(t).every(((t,r)=>e(t,C(n,r)))))),g=m(i.equals),y={[p]:{_A:e=>e},toString(){return(0,c.format)(this.toJSON())},toJSON(){return{_id:"Chunk",values:T(this).map(c.toJSON)}},[c.NodeInspectSymbol](){return this.toJSON()},[i.symbol](e){return S(e)&&g(this,e)},[o.symbol](){return o.cached(this,o.array(T(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return h[Symbol.iterator]();default:return T(this)[Symbol.iterator]()}},pipe(){return(0,f.pipeArguments)(this,arguments)}},b=e=>{const t=Object.create(y);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=v,t.right=v;break;case"ISingleton":t.length=1,t.depth=0,t.left=v,t.right=v;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=v,t.right=v}return t},S=e=>(0,d.hasProperty)(e,p),v=b({_tag:"IEmpty"}),w=()=>v,E=(...e)=>1===e.length?_(e[0]):M(e),_=e=>b({_tag:"ISingleton",a:e}),k=e=>S(e)?e:b({_tag:"IArray",array:r.fromIterable(e)}),x=(e,t,n)=>{switch(e.backing._tag){case"IArray":!function(e,t,n,r,i){for(let a=t;a<Math.min(e.length,t+i);a++)n[r+a-t]=e[a]}(e.backing.array,0,t,n,e.length);break;case"IConcat":x(e.left,t,n),x(e.right,t,n+e.left.length);break;case"ISingleton":t[n]=e.backing.a;break;case"ISlice":{let r=0,i=n;for(;r<e.length;)t[i]=C(e,r),r+=1,i+=1;break}}},I=e=>T(e).slice(),T=e=>{switch(e.backing._tag){case"IEmpty":return h;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return x(e,t,0),e.backing={_tag:"IArray",array:t},e.left=v,e.right=v,e.depth=0,t}}},O=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return b({_tag:"IArray",array:r.reverse(e.backing.array)});case"IConcat":return b({_tag:"IConcat",left:O(e.backing.right),right:O(e.backing.left)});case"ISlice":return N(r.reverse(T(e)))}},A=(0,s.dual)(2,((e,t)=>t<0||t>=e.length?l.none():l.some(C(e,t)))),N=e=>b({_tag:"IArray",array:e}),M=e=>N(e),C=(0,s.dual)(2,((e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==t)throw new Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?C(e.left,t):C(e.right,t-e.left.length);case"ISlice":return C(e.backing.chunk,t+e.backing.offset)}})),R=(0,s.dual)(2,((e,t)=>q(e,_(t)))),F=(0,s.dual)(2,((e,t)=>q(_(t),e))),L=(0,s.dual)(2,((e,t)=>{if(t<=0)return v;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?b({_tag:"IConcat",left:e.left,right:L(e.right,t-e.left.length)}):L(e.left,t);default:return b({_tag:"ISlice",chunk:e,offset:0,length:t})}})),P=(0,s.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=e.length)return v;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?P(e.right,t-e.left.length):b({_tag:"IConcat",left:P(e.left,t),right:e.right});default:return b({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}})),D=(0,s.dual)(2,((e,t)=>L(e,Math.max(0,e.length-t)))),U=(0,s.dual)(2,((e,t)=>{const n=T(e),r=n.length;let i=0;for(;i<r&&t(n[i]);)i++;return P(e,i)})),j=(0,s.dual)(2,((e,t)=>q(t,e))),q=(0,s.dual)(2,((e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return b({_tag:"IConcat",left:e,right:t});if(n<-1){if(e.left.depth>=e.right.depth){const n=q(e.right,t);return b({_tag:"IConcat",left:e.left,right:n})}{const n=q(e.right.right,t);if(n.depth===e.depth-3){const t=b({_tag:"IConcat",left:e.right.left,right:n});return b({_tag:"IConcat",left:e.left,right:t})}{const t=b({_tag:"IConcat",left:e.left,right:e.right.left});return b({_tag:"IConcat",left:t,right:n})}}}if(t.right.depth>=t.left.depth){const n=q(e,t.left);return b({_tag:"IConcat",left:n,right:t.right})}{const n=q(e,t.left.left);if(n.depth===t.depth-3){const e=b({_tag:"IConcat",left:n,right:t.left.right});return b({_tag:"IConcat",left:e,right:t.right})}{const e=b({_tag:"IConcat",left:t.left.right,right:t.right});return b({_tag:"IConcat",left:n,right:e})}}})),W=(0,s.dual)(2,((e,t)=>N(r.filterMap(e,t)))),B=(0,s.dual)(2,((e,t)=>N(r.filter(e,t)))),z=(0,s.dual)(2,((e,t)=>N(r.filterMapWhile(e,t)))),$=e=>W(e,s.identity),V=(0,s.dual)(2,((e,t)=>{if("ISingleton"===e.backing._tag)return t(e.backing.a,0);let n=v,r=0;for(const i of e)n=q(n,t(i,r++));return n})),G=(0,s.dual)(2,((e,t)=>T(e).forEach(t))),J=V(s.identity),H=(0,s.dual)(2,((e,t)=>{const n=[];let r=[];return T(e).forEach((e=>{r.push(e),r.length>=t&&(n.push(N(r)),r=[])})),r.length>0&&n.push(N(r)),N(n)})),K=(0,s.dual)(2,((e,t)=>N(r.intersection(T(e),T(t))))),Y=e=>0===e.length,Z=e=>e.length>0,Q=A(0),X=e=>C(e,0),ee=X,te=e=>A(e,e.length-1),ne=e=>C(e,e.length-1),re=ne,ie=(0,s.dual)(2,((e,t)=>"ISingleton"===e.backing._tag?_(t(e.backing.a,0)):N((0,s.pipe)(T(e),r.map(((e,n)=>t(e,n))))))),ae=(0,s.dual)(3,((e,t,n)=>{const[i,a]=r.mapAccum(e,t,n);return[i,N(a)]})),se=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partition(T(e),t),(([e,t])=>[N(e),N(t)])))),oe=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partitionMap(T(e),t),(([e,t])=>[N(e),N(t)])))),ce=e=>(0,s.pipe)(r.separate(T(e)),(([e,t])=>[N(e),N(t)])),le=e=>e.length,ue=(0,s.dual)(2,((e,t)=>N(r.sort(T(e),t)))),fe=(0,s.dual)(3,((e,t,n)=>ue(e,u.mapInput(n,t)))),de=(0,s.dual)(2,((e,t)=>[L(e,t),P(e,t)])),pe=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[e,w()]:[L(e,n),P(e,n)]})),he=(0,s.dual)(2,((e,t)=>H(e,Math.ceil(e.length/Math.floor(t))))),me=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of T(e)){if(t(r))break;n++}return de(e,n)})),ge=e=>e.length>0?l.some(P(e,1)):l.none(),ye=e=>P(e,1),be=(0,s.dual)(2,((e,t)=>P(e,e.length-t))),Se=(0,s.dual)(2,((e,t)=>{const n=[];for(const r of T(e)){if(!t(r))break;n.push(r)}return N(n)})),ve=(0,s.dual)(2,((e,t)=>N(r.union(T(e),T(t))))),we=e=>N(r.dedupe(T(e))),Ee=e=>N(r.dedupeAdjacent(e)),_e=e=>{const[t,n]=r.unzip(e);return[N(t),N(n)]},ke=(0,s.dual)(3,((e,t,n)=>N(r.zipWith(e,t,n)))),xe=(0,s.dual)(2,((e,t)=>ke(e,t,((e,t)=>[e,t])))),Ie=(0,s.dual)(2,((e,t)=>N(r.remove(T(e),t)))),Te=(0,s.dual)(3,((e,t,n)=>l.map(r.modifyOption(T(e),t,n),N))),Oe=(0,s.dual)(3,((e,t,n)=>l.getOrElse(Te(e,t,n),(()=>e)))),Ae=(0,s.dual)(3,((e,t,n)=>Oe(e,t,(()=>n)))),Ne=(0,s.dual)(3,((e,t,n)=>Te(e,t,(()=>n)))),Me=(0,s.dual)(2,((e,t)=>k(r.makeBy(e,t)))),Ce=(e,t)=>e<=t?Me(t-e+1,(t=>e+t)):_(e),Re=r.contains,Fe=r.containsWith,Le=r.findFirst,Pe=r.findFirstIndex,De=r.findLast,Ue=r.findLastIndex,je=(0,s.dual)(2,((e,t)=>r.fromIterable(e).every(t))),qe=(0,s.dual)(2,((e,t)=>r.fromIterable(e).some(t))),We=r.join,Be=r.reduce,ze=r.reduceRight,$e=e=>(0,s.dual)(2,((t,n)=>N(r.differenceWith(e)(n,t)))),Ve=(0,s.dual)(2,((e,t)=>N(r.difference(t,e))))},823478:(e,t,n)=>{n.r(t),n.d(t,{Clock:()=>f,ClockTypeId:()=>a,clockWith:()=>u,currentTimeMillis:()=>c,currentTimeNanos:()=>l,make:()=>s,sleep:()=>o});var r=n(477926),i=n(130949);const a=r.ClockTypeId,s=r.make,o=i.sleep,c=i.currentTimeMillis,l=i.currentTimeNanos,u=i.clockWith,f=r.clockTag},499779:(e,t,n)=>{n.r(t),n.d(t,{GenericTag:()=>i,Tag:()=>y,add:()=>u,empty:()=>c,get:()=>f,getOption:()=>p,isContext:()=>s,isTag:()=>o,make:()=>l,merge:()=>h,omit:()=>g,pick:()=>m,unsafeGet:()=>d,unsafeMake:()=>a});var r=n(312723);r.TagTypeId;const i=r.makeGenericTag,a=(r.TypeId,r.makeContext),s=r.isContext,o=r.isTag,c=r.empty,l=r.make,u=r.add,f=r.get,d=r.unsafeGet,p=r.getOption,h=r.merge,m=r.pick,g=r.omit,y=r.Tag},338358:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>h,Error:()=>S,Structural:()=>g,TaggedClass:()=>m,TaggedError:()=>v,array:()=>u,case:()=>d,struct:()=>o,tagged:()=>p,taggedEnum:()=>y,tuple:()=>l,unsafeArray:()=>f,unsafeStruct:()=>c});var r=n(597081),i=n(305190),a=n(995515),s=n(125105);const o=i.struct,c=e=>Object.setPrototypeOf(e,a.StructuralPrototype),l=(...e)=>f(e),u=e=>f(e.slice(0)),f=e=>Object.setPrototypeOf(e,i.ArrayProto),d=()=>e=>void 0===e?Object.create(a.StructuralPrototype):o(e),p=e=>t=>{const n=void 0===t?Object.create(a.StructuralPrototype):o(t);return n._tag=e,n},h=i.Structural,m=e=>class extends h{_tag=e},g=i.Structural,y=()=>new Proxy({},{get:(e,t,n)=>"$is"===t?s.isTagged:"$match"===t?b:p(t)});function b(){if(1===arguments.length){const e=arguments[0];return function(t){return e[t._tag](t)}}const e=arguments[0];return arguments[1][e._tag](e)}const S=function(){return class extends r.YieldableError{constructor(e){super(e?.message,e?.cause?{cause:e.cause}:void 0),e&&Object.assign(this,e)}}}(),v=e=>{class t extends S{_tag=e}return t.prototype.name=e,t}},38429:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,await:()=>o,complete:()=>c,completeWith:()=>l,die:()=>m,dieSync:()=>g,done:()=>u,fail:()=>f,failCause:()=>p,failCauseSync:()=>h,failSync:()=>d,interrupt:()=>y,interruptWith:()=>b,isDone:()=>S,make:()=>a,makeAs:()=>s,poll:()=>v,succeed:()=>w,sync:()=>E,unsafeDone:()=>k,unsafeMake:()=>_});var r=n(597081);const i=n(815469).DeferredTypeId,a=r.deferredMake,s=r.deferredMakeAs,o=r.deferredAwait,c=r.deferredComplete,l=r.deferredCompleteWith,u=r.deferredDone,f=r.deferredFail,d=r.deferredFailSync,p=r.deferredFailCause,h=r.deferredFailCauseSync,m=r.deferredDie,g=r.deferredDieSync,y=r.deferredInterrupt,b=r.deferredInterruptWith,S=r.deferredIsDone,v=r.deferredPoll,w=r.deferredSucceed,E=r.deferredSync,_=r.deferredUnsafeMake,k=r.deferredUnsafeDone},860118:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>J,Order:()=>V,between:()=>G,clamp:()=>X,days:()=>P,decode:()=>S,decodeUnknown:()=>v,divide:()=>ee,equals:()=>le,format:()=>ue,greaterThan:()=>oe,greaterThanOrEqualTo:()=>ce,hours:()=>L,infinity:()=>A,isDuration:()=>x,isFinite:()=>I,isZero:()=>T,lessThan:()=>ae,lessThanOrEqualTo:()=>se,match:()=>z,matchWith:()=>$,max:()=>Z,micros:()=>M,millis:()=>C,min:()=>K,minutes:()=>F,nanos:()=>N,seconds:()=>R,subtract:()=>re,sum:()=>ie,times:()=>ne,toHrTime:()=>B,toMillis:()=>U,toNanos:()=>q,toSeconds:()=>j,unsafeDivide:()=>te,unsafeToNanos:()=>W,weeks:()=>D,zero:()=>O});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(504491),c=n(880308),l=n(709322),u=n(125105);const f=Symbol.for("effect/Duration"),d=BigInt(0),p=BigInt(24),h=BigInt(60),m=BigInt(1e3),g=BigInt(1e6),y=BigInt(1e9),b=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,S=e=>{if(x(e))return e;if((0,u.isNumber)(e))return C(e);if((0,u.isBigInt)(e))return N(e);if(Array.isArray(e)){if(2===e.length&&(0,u.isNumber)(e[0])&&(0,u.isNumber)(e[1]))return N(BigInt(e[0])*y+BigInt(e[1]))}else if((0,u.isString)(e)){b.lastIndex=0;const t=b.exec(e);if(t){const[e,n,r]=t,i=Number(n);switch(r){case"nano":case"nanos":return N(BigInt(n));case"micro":case"micros":return M(BigInt(n));case"milli":case"millis":return C(i);case"second":case"seconds":return R(i);case"minute":case"minutes":return F(i);case"hour":case"hours":return L(i);case"day":case"days":return P(i);case"week":case"weeks":return D(i)}}}throw new Error("Invalid DurationInput")},v=o.liftThrowable(S),w={_tag:"Millis",millis:0},E={_tag:"Infinity"},_={[f]:f,[a.symbol](){return a.cached(this,a.structure(this.value))},[r.symbol](e){return x(e)&&le(this,e)},toString(){return`Duration(${ue(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:B(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,l.pipeArguments)(this,arguments)}},k=e=>{const t=Object.create(_);return(0,u.isNumber)(e)?isNaN(e)||e<=0?t.value=w:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=E:t.value=e<=d?w:{_tag:"Nanos",nanos:e},t},x=e=>(0,u.hasProperty)(e,f),I=e=>"Infinity"!==e.value._tag,T=e=>{switch(e.value._tag){case"Millis":return 0===e.value.millis;case"Nanos":return e.value.nanos===d;case"Infinity":return!1}},O=k(0),A=k(1/0),N=e=>k(e),M=e=>k(e*m),C=e=>k(e),R=e=>k(1e3*e),F=e=>k(6e4*e),L=e=>k(36e5*e),P=e=>k(864e5*e),D=e=>k(6048e5*e),U=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},j=e=>U(e)/1e3,q=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return o.none();case"Nanos":return o.some(t.value.nanos);case"Millis":return o.some(BigInt(Math.round(1e6*t.value.millis)))}},W=e=>{const t=S(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},B=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/y),Number(t.value.nanos%y)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},z=(0,i.dual)(2,((e,t)=>{const n=S(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}})),$=(0,i.dual)(3,((e,t,n)=>{const r=S(e),i=S(t);if("Infinity"===r.value._tag||"Infinity"===i.value._tag)return n.onMillis(U(r),U(i));if("Nanos"===r.value._tag||"Nanos"===i.value._tag){const e="Nanos"===r.value._tag?r.value.nanos:BigInt(Math.round(1e6*r.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return n.onNanos(e,t)}return n.onMillis(r.value.millis,i.value.millis)})),V=c.make(((e,t)=>$(e,t,{onMillis:(e,t)=>e<t?-1:e>t?1:0,onNanos:(e,t)=>e<t?-1:e>t?1:0}))),G=c.between(c.mapInput(V,S)),J=(e,t)=>$(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),H=c.min(V),K=(0,i.dual)(2,((e,t)=>H(S(e),S(t)))),Y=c.max(V),Z=(0,i.dual)(2,((e,t)=>Y(S(e),S(t)))),Q=c.clamp(V),X=(0,i.dual)(2,((e,t)=>Q(S(e),{minimum:S(t.minimum),maximum:S(t.maximum)}))),ee=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>0===t||isNaN(t)||!Number.isFinite(t)?o.none():o.some(k(e/t)),onNanos:e=>{if(isNaN(t)||t<=0||!Number.isFinite(t))return o.none();try{return o.some(k(e/BigInt(t)))}catch(n){return o.none()}}}))),te=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>k(e/t),onNanos:e=>isNaN(t)||t<0||Object.is(t,-0)?O:Object.is(t,0)||!Number.isFinite(t)?A:k(e/BigInt(t))}))),ne=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>k(e*t),onNanos:e=>k(e*BigInt(t))}))),re=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>k(e-t),onNanos:(e,t)=>k(e-t)}))),ie=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>k(e+t),onNanos:(e,t)=>k(e+t)}))),ae=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}))),se=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),oe=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e>t,onNanos:(e,t)=>e>t}))),ce=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t}))),le=(0,i.dual)(2,((e,t)=>J(S(e),S(t)))),ue=e=>{const t=S(e),n=[];if("Infinity"===t.value._tag)return"Infinity";const r=W(t);r%g&&n.push(r%g+"ns");const i=r/g;i%m!==d&&n.push(i%m+"ms");const a=i/m;a%h!==d&&n.push(a%h+"s");const s=a/h;s%h!==d&&n.push(s%h+"m");const o=s/h;o%p!==d&&n.push(o%p+"h");const c=o/p;return c!==d&&n.push(`${c}d`),n.reverse().join(" ")}},837875:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>Nn,EffectTypeId:()=>y,Tag:()=>ia,acquireRelease:()=>ut,acquireReleaseInterruptible:()=>ft,acquireUseRelease:()=>dt,addFinalizer:()=>pt,all:()=>k,allSuccesses:()=>I,allWith:()=>x,allowInterrupt:()=>qe,andThen:()=>Yn,annotateCurrentSpan:()=>zi,annotateLogs:()=>zr,annotateLogsScoped:()=>$r,annotateSpans:()=>Bi,ap:()=>Ti,as:()=>Ze,asSome:()=>Qe,asSomeError:()=>Xe,asVoid:()=>et,async:()=>K,asyncEffect:()=>Y,awaitAllChildren:()=>xt,bind:()=>Mn,bindTo:()=>Cn,blocked:()=>Oi,cacheRequestResult:()=>Ci,cached:()=>w,cachedFunction:()=>E,cachedInvalidateWithTTL:()=>v,cachedWithTTL:()=>S,catch:()=>ye,catchAll:()=>be,catchAllCause:()=>Se,catchAllDefect:()=>ve,catchIf:()=>we,catchSome:()=>Ee,catchSomeCause:()=>_e,catchSomeDefect:()=>ke,catchTag:()=>xe,catchTags:()=>Ie,cause:()=>Te,checkInterruptible:()=>We,clock:()=>Ht,clockWith:()=>Kt,configProviderWith:()=>dn,console:()=>Qt,consoleWith:()=>Xt,context:()=>mn,contextWith:()=>gn,contextWithEffect:()=>yn,currentParentSpan:()=>Vi,currentSpan:()=>$i,custom:()=>Z,daemonChildren:()=>It,delay:()=>nn,descriptor:()=>Tt,descriptorWith:()=>Ot,die:()=>re,dieMessage:()=>ie,dieSync:()=>ae,diffFiberRefs:()=>At,disconnect:()=>Be,dropUntil:()=>T,dropWhile:()=>O,either:()=>Fn,ensuring:()=>ht,ensuringChild:()=>Nt,ensuringChildren:()=>Mt,eventually:()=>Oe,every:()=>A,exists:()=>N,exit:()=>Ln,fail:()=>X,failCause:()=>te,failCauseSync:()=>ne,failSync:()=>ee,fiberId:()=>Ct,fiberIdWith:()=>Rt,filter:()=>M,filterMap:()=>C,filterOrDie:()=>jn,filterOrDieMessage:()=>qn,filterOrElse:()=>Wn,filterOrFail:()=>Bn,finalizersMask:()=>bt,findFirst:()=>R,firstSuccessOf:()=>F,flatMap:()=>Kn,flatten:()=>Zn,flip:()=>tt,flipWith:()=>nt,forEach:()=>L,forever:()=>lr,fork:()=>Ft,forkAll:()=>Pt,forkDaemon:()=>Lt,forkIn:()=>Dt,forkScoped:()=>Ut,forkWithErrorHandler:()=>jt,fromFiber:()=>qt,fromFiberEffect:()=>Wt,fromNullable:()=>na,functionWithSpan:()=>Xi,gen:()=>se,getFiberRefs:()=>Sr,getRuntimeFlags:()=>ri,head:()=>P,if:()=>Un,ignore:()=>Ae,ignoreLogged:()=>Ne,inheritFiberRefs:()=>vr,interrupt:()=>ze,interruptWith:()=>$e,interruptible:()=>Ve,interruptibleMask:()=>Ge,intoDeferred:()=>Pn,isEffect:()=>b,isFailure:()=>Or,isSuccess:()=>Ar,iterate:()=>ur,labelMetrics:()=>ci,labelMetricsScoped:()=>ui,let:()=>Rn,liftPredicate:()=>Ye,linkSpans:()=>Hi,locally:()=>wr,locallyScoped:()=>_r,locallyScopedWith:()=>kr,locallyWith:()=>Er,log:()=>Fr,logAnnotations:()=>Vr,logDebug:()=>Dr,logError:()=>qr,logFatal:()=>Wr,logInfo:()=>Ur,logTrace:()=>Pr,logWarning:()=>jr,logWithLevel:()=>Lr,loop:()=>fr,makeSemaphore:()=>hi,makeSpan:()=>Ki,makeSpanScoped:()=>Yi,map:()=>rt,mapAccum:()=>it,mapBoth:()=>at,mapError:()=>st,mapErrorCause:()=>ot,mapInputContext:()=>bn,match:()=>Nr,matchCause:()=>Mr,matchCauseEffect:()=>Cr,matchEffect:()=>Rr,merge:()=>ct,mergeAll:()=>D,metricLabels:()=>fi,negate:()=>lt,never:()=>oe,none:()=>ce,onError:()=>mt,onExit:()=>gt,onInterrupt:()=>Je,once:()=>_,option:()=>Dn,optionFromOptional:()=>ra,orDie:()=>Jr,orDieWith:()=>Hr,orElse:()=>Kr,orElseFail:()=>Yr,orElseSucceed:()=>Zr,parallelErrors:()=>Me,parallelFinalizers:()=>yt,partition:()=>U,patchFiberRefs:()=>xr,patchRuntimeFlags:()=>ii,promise:()=>le,provide:()=>Sn,provideService:()=>vn,provideServiceEffect:()=>wn,race:()=>Xn,raceAll:()=>Qn,raceFirst:()=>er,raceWith:()=>tr,random:()=>Qr,randomWith:()=>Xr,reduce:()=>j,reduceEffect:()=>q,reduceRight:()=>W,reduceWhile:()=>B,repeat:()=>dr,repeatN:()=>pr,repeatOrElse:()=>hr,replicate:()=>z,replicateEffect:()=>$,request:()=>Mi,retry:()=>Re,retryOrElse:()=>Fe,runCallback:()=>gi,runFork:()=>mi,runPromise:()=>yi,runPromiseExit:()=>bi,runRequestBlock:()=>Ai,runSync:()=>Si,runSyncExit:()=>vi,runtime:()=>ni,sandbox:()=>Ce,schedule:()=>mr,scheduleForked:()=>gr,scheduleFrom:()=>yr,scope:()=>vt,scopeWith:()=>wt,scoped:()=>Et,sequentialFinalizers:()=>St,serviceConstants:()=>xn,serviceFunction:()=>En,serviceFunctionEffect:()=>_n,serviceFunctions:()=>kn,serviceMembers:()=>In,serviceOption:()=>Tn,serviceOptional:()=>On,setFiberRefs:()=>Ir,sleep:()=>rn,spanAnnotations:()=>Gi,spanLinks:()=>Ji,step:()=>Ni,succeed:()=>ue,succeedNone:()=>fe,succeedSome:()=>de,summarized:()=>nr,supervised:()=>Bt,suspend:()=>pe,sync:()=>he,tagMetrics:()=>oi,tagMetricsScoped:()=>li,takeUntil:()=>V,takeWhile:()=>G,tap:()=>rr,tapBoth:()=>ir,tapDefect:()=>ar,tapError:()=>sr,tapErrorCause:()=>cr,tapErrorTag:()=>or,timed:()=>an,timedWith:()=>sn,timeout:()=>on,timeoutFail:()=>ln,timeoutFailCause:()=>un,timeoutOption:()=>cn,timeoutTo:()=>fn,tracer:()=>Pi,tracerWith:()=>Di,transplant:()=>zt,try:()=>Le,tryMap:()=>Pe,tryMapPromise:()=>De,tryPromise:()=>Ue,uninterruptible:()=>He,uninterruptibleMask:()=>Ke,unless:()=>zn,unlessEffect:()=>$n,unsafeMakeSemaphore:()=>pi,unsandbox:()=>je,updateFiberRefs:()=>Tr,updateService:()=>An,useSpan:()=>Zi,using:()=>_t,validate:()=>wi,validateAll:()=>J,validateFirst:()=>H,validateWith:()=>Ei,void:()=>me,when:()=>Vn,whenEffect:()=>Gn,whenFiberRef:()=>Jn,whenRef:()=>Hn,whileLoop:()=>br,withClock:()=>Zt,withClockScoped:()=>Yt,withConcurrency:()=>$t,withConfigProvider:()=>pn,withConfigProviderScoped:()=>hn,withConsole:()=>tn,withConsoleScoped:()=>en,withEarlyRelease:()=>kt,withFiberRuntime:()=>Q,withLogSpan:()=>Br,withMaxOpsBeforeYield:()=>Jt,withMetric:()=>di,withParentSpan:()=>ta,withRandom:()=>ei,withRandomScoped:()=>ti,withRequestBatching:()=>Ri,withRequestCache:()=>Li,withRequestCaching:()=>Fi,withRuntimeFlagsPatch:()=>ai,withRuntimeFlagsPatchScoped:()=>si,withScheduler:()=>Vt,withSchedulingPriority:()=>Gt,withSpan:()=>Qi,withSpanScoped:()=>ea,withTracer:()=>Ui,withTracerEnabled:()=>qi,withTracerScoped:()=>ji,withTracerTiming:()=>Wi,withUnhandledErrorLogLevel:()=>Gr,yieldNow:()=>ge,zip:()=>_i,zipLeft:()=>ki,zipRight:()=>xi,zipWith:()=>Ii});var r=n(154258),i=n(636109),a=n(312723),s=n(694375),o=n(597081),c=n(130949),l=n(861819),u=n(365519),f=n(232376),d=n(808816),p=n(595296),h=n(457685),m=n(33389),g=n(84221);const y=o.EffectTypeId,b=o.isEffect,S=l.cached,v=l.cachedInvalidateWithTTL,w=s.memoize,E=l.cachedFunction,_=s.once,k=u.all,x=u.allWith,I=u.allSuccesses,T=s.dropUntil,O=s.dropWhile,A=s.every,N=u.exists,M=u.filter,C=s.filterMap,R=s.findFirst,F=s.firstSuccessOf,L=u.forEach,P=s.head,D=u.mergeAll,U=u.partition,j=s.reduce,q=u.reduceEffect,W=s.reduceRight,B=s.reduceWhile,z=u.replicate,$=u.replicateEffect,V=s.takeUntil,G=s.takeWhile,J=u.validateAll,H=u.validateFirst,K=o.async,Y=p.asyncEffect,Z=o.custom,Q=o.withFiberRuntime,X=o.fail,ee=o.failSync,te=o.failCause,ne=o.failCauseSync,re=o.die,ie=o.dieMessage,ae=o.dieSync,se=s.gen,oe=o.never,ce=s.none,le=s.promise,ue=o.succeed,fe=s.succeedNone,de=s.succeedSome,pe=o.suspend,he=o.sync,me=o.void,ge=o.yieldNow,ye=s._catch,be=o.catchAll,Se=o.catchAllCause,ve=s.catchAllDefect,we=o.catchIf,Ee=o.catchSome,_e=s.catchSomeCause,ke=s.catchSomeDefect,xe=s.catchTag,Ie=s.catchTags,Te=s.cause,Oe=s.eventually,Ae=s.ignore,Ne=s.ignoreLogged,Me=s.parallelErrors,Ce=s.sandbox,Re=h.retry_combined,Fe=h.retryOrElse_Effect,Le=s.try_,Pe=s.tryMap,De=s.tryMapPromise,Ue=s.tryPromise,je=s.unsandbox,qe=s.allowInterrupt,We=o.checkInterruptible,Be=u.disconnect,ze=o.interrupt,$e=o.interruptWith,Ve=o.interruptible,Ge=o.interruptibleMask,Je=o.onInterrupt,He=o.uninterruptible,Ke=o.uninterruptibleMask,Ye=s.liftPredicate,Ze=o.as,Qe=s.asSome,Xe=s.asSomeError,et=o.asVoid,tt=o.flip,nt=s.flipWith,rt=o.map,it=s.mapAccum,at=o.mapBoth,st=o.mapError,ot=s.mapErrorCause,ct=s.merge,lt=s.negate,ut=u.acquireRelease,ft=u.acquireReleaseInterruptible,dt=o.acquireUseRelease,pt=u.addFinalizer,ht=u.ensuring,mt=o.onError,gt=o.onExit,yt=u.parallelFinalizers,bt=u.finalizersMask,St=u.sequentialFinalizers,vt=u.scope,wt=u.scopeWith,Et=u.scopedEffect,_t=u.using,kt=u.withEarlyRelease,xt=l.awaitAllChildren,It=u.daemonChildren,Tt=s.descriptor,Ot=s.descriptorWith,At=s.diffFiberRefs,Nt=l.ensuringChild,Mt=l.ensuringChildren,Ct=o.fiberId,Rt=o.fiberIdWith,Ft=u.fork,Lt=u.forkDaemon,Pt=l.forkAll,Dt=l.forkIn,Ut=l.forkScoped,jt=u.forkWithErrorHandler,qt=l.fromFiber,Wt=l.fromFiberEffect,Bt=l.supervised,zt=o.transplant,$t=o.withConcurrency,Vt=g.withScheduler,Gt=o.withSchedulingPriority,Jt=o.withMaxOpsBeforeYield,Ht=s.clock,Kt=s.clockWith,Yt=u.withClockScoped,Zt=c.withClock,Qt=i.console,Xt=i.consoleWith,en=i.withConsoleScoped,tn=i.withConsole,nn=s.delay,rn=s.sleep,an=s.timed,sn=s.timedWith,on=l.timeout,cn=l.timeoutOption,ln=l.timeoutFail,un=l.timeoutFailCause,fn=l.timeoutTo,dn=c.configProviderWith,pn=c.withConfigProvider,hn=u.withConfigProviderScoped,mn=o.context,gn=s.contextWith,yn=o.contextWithEffect,bn=o.mapInputContext,Sn=f.effect_provide,vn=s.provideService,wn=s.provideServiceEffect,En=s.serviceFunction,_n=s.serviceFunctionEffect,kn=s.serviceFunctions,xn=s.serviceConstants,In=s.serviceMembers,Tn=s.serviceOption,On=s.serviceOptional,An=s.updateService,Nn=s.Do,Mn=s.bind,Cn=s.bindTo,Rn=s.let_,Fn=o.either,Ln=o.exit,Pn=o.intoDeferred,Dn=s.option,Un=o.if_,jn=s.filterOrDie,qn=s.filterOrDieMessage,Wn=s.filterOrElse,Bn=s.filterOrFail,zn=s.unless,$n=s.unlessEffect,Vn=s.when,Gn=o.whenEffect,Jn=s.whenFiberRef,Hn=s.whenRef,Kn=o.flatMap,Yn=o.andThen,Zn=o.flatten,Qn=u.raceAll,Xn=u.race,er=l.raceFirst,tr=u.raceWith,nr=s.summarized,rr=o.tap,ir=s.tapBoth,ar=s.tapDefect,sr=s.tapError,or=s.tapErrorTag,cr=s.tapErrorCause,lr=s.forever,ur=s.iterate,fr=s.loop,dr=h.repeat_combined,pr=s.repeatN,hr=h.repeatOrElse_Effect,mr=h.schedule_Effect,gr=l.scheduleForked,yr=h.scheduleFrom_Effect,br=o.whileLoop,Sr=s.fiberRefs,vr=s.inheritFiberRefs,wr=o.fiberRefLocally,Er=o.fiberRefLocallyWith,_r=u.fiberRefLocallyScoped,kr=u.fiberRefLocallyScopedWith,xr=s.patchFiberRefs,Ir=s.setFiberRefs,Tr=s.updateFiberRefs,Or=s.isFailure,Ar=s.isSuccess,Nr=s.match,Mr=o.matchCause,Cr=o.matchCauseEffect,Rr=o.matchEffect,Fr=s.log,Lr=(e,...t)=>s.logWithLevel(e)(...t),Pr=s.logTrace,Dr=s.logDebug,Ur=s.logInfo,jr=s.logWarning,qr=s.logError,Wr=s.logFatal,Br=s.withLogSpan,zr=s.annotateLogs,$r=u.annotateLogsScoped,Vr=s.logAnnotations,Gr=o.withUnhandledErrorLogLevel,Jr=o.orDie,Hr=o.orDieWith,Kr=o.orElse,Yr=s.orElseFail,Zr=s.orElseSucceed,Qr=s.random,Xr=c.randomWith,ei=c.withRandom,ti=u.withRandomScoped,ni=p.runtime,ri=o.runtimeFlags,ii=o.updateRuntimeFlags,ai=o.withRuntimeFlags,si=u.withRuntimeFlagsScoped,oi=s.tagMetrics,ci=s.labelMetrics,li=u.tagMetricsScoped,ui=u.labelMetricsScoped,fi=o.metricLabels,di=s.withMetric,pi=l.unsafeMakeSemaphore,hi=l.makeSemaphore,mi=p.unsafeForkEffect,gi=p.unsafeRunEffect,yi=p.unsafeRunPromiseEffect,bi=p.unsafeRunPromiseExitEffect,Si=p.unsafeRunSyncEffect,vi=p.unsafeRunSyncExitEffect,wi=u.validate,Ei=u.validateWith,_i=u.zipOptions,ki=u.zipLeftOptions,xi=u.zipRightOptions,Ii=u.zipWithOptions,Ti=(0,r.dual)(2,((e,t)=>Ii(e,t,((e,t)=>e(t))))),Oi=o.blocked,Ai=o.runRequestBlock,Ni=o.step,Mi=(0,r.dual)((e=>m.isRequest(e[0])),d.fromRequest),Ci=d.cacheRequest,Ri=o.withRequestBatching,Fi=d.withRequestCaching,Li=d.withRequestCache,Pi=s.tracer,Di=c.tracerWith,Ui=c.withTracer,ji=u.withTracerScoped,qi=o.withTracerEnabled,Wi=o.withTracerTiming,Bi=s.annotateSpans,zi=s.annotateCurrentSpan,$i=s.currentSpan,Vi=s.currentParentSpan,Gi=s.spanAnnotations,Ji=s.spanLinks,Hi=s.linkSpans,Ki=s.makeSpan,Yi=u.makeSpanScoped,Zi=s.useSpan,Qi=s.withSpan,Xi=s.functionWithSpan,ea=u.withSpanScoped,ta=s.withParentSpan,na=s.fromNullable,ra=s.optionFromOptional,ia=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}Error.stackTraceLimit=t,Object.setPrototypeOf(r,a.TagProto),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack});const i=new Map;return new Proxy(r,{get(e,t,n){if("use"===t)return e=>o.andThen(r,e);if(t in r)return r[t];if(i.has(t))return i.get(t);const a=(...e)=>o.andThen(r,(n=>"function"===typeof n[t]?(i.set(t,((...e)=>o.andThen(r,(n=>n[t](...e))))),n[t](...e)):(i.set(t,o.andThen(r,(e=>e[t]))),n[t]))),s=o.andThen(r,(e=>e[t]));return Object.assign(a,s),Object.setPrototypeOf(a,Object.getPrototypeOf(s)),i.set(t,a),a}})}},938507:(e,t,n)=>{n.r(t),n.d(t,{ChannelTypeId:()=>o,Class:()=>p,CommitPrototype:()=>l,EffectPrototype:()=>c,EffectTypeId:()=>i,SinkTypeId:()=>s,StreamTypeId:()=>a,StructuralClass:()=>h,StructuralCommitPrototype:()=>u});var r=n(995515);const i=r.EffectTypeId,a=r.StreamTypeId,s=r.SinkTypeId,o=r.ChannelTypeId,c=r.EffectPrototype,l=r.CommitPrototype,u=r.StructuralCommitPrototype,f=r.Base,d=r.StructuralBase;class p extends f{}class h extends d{}},411123:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>B,TypeId:()=>l,all:()=>U,andThen:()=>L,ap:()=>D,bind:()=>z,bindTo:()=>$,filterOrLeft:()=>I,flatMap:()=>F,flip:()=>j,fromNullable:()=>d,fromOption:()=>p,gen:()=>W,getEquivalence:()=>v,getLeft:()=>S,getOrElse:()=>O,getOrNull:()=>A,getOrThrow:()=>C,getOrThrowWith:()=>M,getOrUndefined:()=>N,getRight:()=>b,isEither:()=>m,isLeft:()=>g,isRight:()=>y,left:()=>f,let:()=>V,liftPredicate:()=>x,map:()=>_,mapBoth:()=>w,mapLeft:()=>E,match:()=>k,merge:()=>T,orElse:()=>R,right:()=>u,try:()=>h,zipWith:()=>P});var r=n(84108),i=n(154258),a=n(997385),s=n(384771),o=n(125105),c=n(977721);const l=s.TypeId,u=s.right,f=s.left,d=(0,i.dual)(2,((e,t)=>null==e?f(t(e)):u(e))),p=s.fromOption,h=e=>{if((0,o.isFunction)(e))try{return u(e())}catch(t){return f(t)}else try{return u(e.try())}catch(t){return f(e.catch(t))}},m=s.isEither,g=s.isLeft,y=s.isRight,b=s.getRight,S=s.getLeft,v=({left:e,right:t})=>r.make(((n,r)=>g(n)?g(r)&&e(n.left,r.left):y(r)&&t(n.right,r.right))),w=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?f(t(e.left)):u(n(e.right)))),E=(0,i.dual)(2,((e,t)=>g(e)?f(t(e.left)):u(e.right))),_=(0,i.dual)(2,((e,t)=>y(e)?u(t(e.right)):f(e.left))),k=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?t(e.left):n(e.right))),x=(0,i.dual)(3,((e,t,n)=>t(e)?u(e):f(n(e)))),I=(0,i.dual)(3,((e,t,n)=>F(e,(e=>t(e)?u(e):f(n(e)))))),T=k({onLeft:i.identity,onRight:i.identity}),O=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):e.right)),A=O(i.constNull),N=O(i.constUndefined),M=(0,i.dual)(2,((e,t)=>{if(y(e))return e.right;throw t(e.left)})),C=M((()=>new Error("getOrThrow called on a Left"))),R=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):u(e.right))),F=(0,i.dual)(2,((e,t)=>g(e)?f(e.left):t(e.right))),L=(0,i.dual)(2,((e,t)=>F(e,(e=>{const n=(0,o.isFunction)(t)?t(e):t;return m(n)?n:u(n)})))),P=(0,i.dual)(3,((e,t,n)=>F(e,(e=>_(t,(t=>n(e,t))))))),D=(0,i.dual)(2,((e,t)=>P(e,t,((e,t)=>e(t))))),U=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(g(n))return n;t.push(n.right)}return u(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(g(r))return r;t[n]=r.right}return u(t)},j=e=>g(e)?u(e.left):f(e.right),q=c.adapter(),W=(...e)=>{const t=(1===e.length?e[0]:e[1].bind(e[0]))(q);let n=t.next();if(n.done)return u(n.value);{let e=n.value;if(e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e))return e;for(;!n.done;)if(n=t.next(e.right),!n.done&&(e=n.value,e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e)))return e;return u(n.value)}},B=u({}),z=a.bind(_,F),$=a.bindTo(_),V=a.let_(_)},382300:(e,t,n)=>{n.r(t),n.d(t,{equals:()=>o,equivalence:()=>u,isEqual:()=>l,symbol:()=>s});var r=n(353370),i=n(125105),a=n(977721);const s=Symbol.for("effect/Equal");function o(){return 1===arguments.length?e=>c(e,arguments[0]):c(arguments[0],arguments[1])}function c(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(l(e)&&l(t))return!(r.hash(e)!==r.hash(t)||!e[s](t))||!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(a.structuralRegionState.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>c(e,t[n])));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(const r of n)if(!(r in t)||!c(e[r],t[r]))return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t);return!0}}return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t)}}return!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t)}const l=e=>(0,i.hasProperty)(e,s),u=()=>o},84108:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>y,all:()=>S,array:()=>E,bigint:()=>u,boolean:()=>l,combine:()=>d,combineAll:()=>m,combineMany:()=>p,make:()=>i,mapInput:()=>g,number:()=>c,product:()=>b,productMany:()=>v,strict:()=>s,string:()=>o,struct:()=>_,symbol:()=>f,tuple:()=>w});var r=n(154258);const i=e=>(t,n)=>t===n||e(t,n),a=(e,t)=>e===t,s=()=>a,o=s(),c=s(),l=s(),u=s(),f=s(),d=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(n,r)&&t(n,r))))),p=(0,r.dual)(2,((e,t)=>i(((n,r)=>{if(!e(n,r))return!1;for(const e of t)if(!e(n,r))return!1;return!0})))),h=(e,t)=>!0,m=e=>p(h,e),g=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),y=g(c,(e=>e.getTime())),b=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>e(n,i)&&t(r,a))))),S=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;if(!a(t[i],n[i]))return!1;i++}return!0})),v=(e,t)=>{const n=S(t);return i(((t,r)=>!!e(t[0],r[0])&&n(t.slice(1),r.slice(1))))},w=(...e)=>S(e),E=e=>i(((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){if(!e(t[r],n[r]))return!1}return!0})),_=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t)if(!e[i](n[i],r[i]))return!1;return!0}))}},83859:(e,t,n)=>{n.r(t),n.d(t,{isParallel:()=>c,isParallelN:()=>l,isSequential:()=>o,match:()=>u,parallel:()=>a,parallelN:()=>s,sequential:()=>i});var r=n(49859);const i=r.sequential,a=r.parallel,s=r.parallelN,o=r.isSequential,c=r.isParallel,l=r.isParallelN,u=r.match},676966:(e,t,n)=>{n.r(t),n.d(t,{all:()=>f,as:()=>c,asVoid:()=>l,causeOption:()=>u,die:()=>d,exists:()=>p,fail:()=>h,failCause:()=>m,flatMap:()=>g,flatMapEffect:()=>y,flatten:()=>b,forEachEffect:()=>S,fromEither:()=>v,fromOption:()=>w,getOrElse:()=>E,interrupt:()=>_,isExit:()=>i,isFailure:()=>a,isInterrupted:()=>o,isSuccess:()=>s,map:()=>k,mapBoth:()=>x,mapError:()=>I,mapErrorCause:()=>T,match:()=>O,matchEffect:()=>A,succeed:()=>N,void:()=>M,zip:()=>C,zipLeft:()=>R,zipPar:()=>L,zipParLeft:()=>P,zipParRight:()=>D,zipRight:()=>F,zipWith:()=>U});var r=n(597081);const i=r.exitIsExit,a=r.exitIsFailure,s=r.exitIsSuccess,o=r.exitIsInterrupted,c=r.exitAs,l=r.exitAsVoid,u=r.exitCauseOption,f=r.exitCollectAll,d=r.exitDie,p=r.exitExists,h=r.exitFail,m=r.exitFailCause,g=r.exitFlatMap,y=r.exitFlatMapEffect,b=r.exitFlatten,S=r.exitForEachEffect,v=r.exitFromEither,w=r.exitFromOption,E=r.exitGetOrElse,_=r.exitInterrupt,k=r.exitMap,x=r.exitMapBoth,I=r.exitMapError,T=r.exitMapErrorCause,O=r.exitMatch,A=r.exitMatchEffect,N=r.exitSucceed,M=r.exitVoid,C=r.exitZip,R=r.exitZipLeft,F=r.exitZipRight,L=r.exitZipPar,P=r.exitZipParLeft,D=r.exitZipParRight,U=r.exitZipWith},911122:(e,t,n)=>{n.r(t),n.d(t,{FiberTypeId:()=>o,Order:()=>l,RuntimeFiberTypeId:()=>c,all:()=>g,await:()=>p,awaitAll:()=>h,children:()=>m,done:()=>y,dump:()=>b,dumpAll:()=>S,fail:()=>v,failCause:()=>w,fromEffect:()=>E,getCurrentFiber:()=>_,id:()=>d,inheritAll:()=>k,interrupt:()=>x,interruptAll:()=>A,interruptAllAs:()=>N,interruptAs:()=>T,interruptAsFork:()=>O,interruptFork:()=>M,interrupted:()=>I,isFiber:()=>u,isRuntimeFiber:()=>f,join:()=>C,joinAll:()=>R,map:()=>F,mapEffect:()=>L,mapFiber:()=>P,match:()=>D,never:()=>U,orElse:()=>j,orElseEither:()=>q,poll:()=>W,pretty:()=>B,roots:()=>z,scoped:()=>V,status:()=>G,succeed:()=>J,unsafeRoots:()=>$,void:()=>H,zip:()=>K,zipLeft:()=>Y,zipRight:()=>Z,zipWith:()=>Q});var r=n(597081),i=n(861819),a=n(874338),s=n(365519);const o=a.FiberTypeId,c=a.RuntimeFiberTypeId,l=a.Order,u=a.isFiber,f=a.isRuntimeFiber,d=a.id,p=a._await,h=s.fiberAwaitAll,m=a.children,g=s.fiberAll,y=a.done,b=a.dump,S=a.dumpAll,v=a.fail,w=a.failCause,E=a.fromEffect,_=a.getCurrentFiber,k=a.inheritAll,x=r.interruptFiber,I=a.interrupted,T=r.interruptAsFiber,O=a.interruptAsFork,A=a.interruptAll,N=a.interruptAllAs,M=s.fiberInterruptFork,C=a.join,R=s.fiberJoinAll,F=a.map,L=a.mapEffect,P=a.mapFiber,D=a.match,U=a.never,j=a.orElse,q=a.orElseEither,W=a.poll,B=a.pretty,z=a.roots,$=a.unsafeRoots,V=s.fiberScoped,G=a.status,J=a.succeed,H=a.void,K=i.zipFiber,Y=i.zipLeftFiber,Z=i.zipRightFiber,Q=i.zipWithFiber},61915:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>i,combine:()=>d,combineAll:()=>p,composite:()=>o,getOrElse:()=>h,ids:()=>m,isComposite:()=>f,isFiberId:()=>c,isNone:()=>l,isRuntime:()=>u,make:()=>g,none:()=>a,runtime:()=>s,threadName:()=>y,toOption:()=>b,toSet:()=>S,unsafeMake:()=>v});var r=n(646699);const i=r.FiberIdTypeId,a=r.none,s=r.runtime,o=r.composite,c=r.isFiberId,l=r.isNone,u=r.isRuntime,f=r.isComposite,d=r.combine,p=r.combineAll,h=r.getOrElse,m=r.ids,g=r.make,y=r.threadName,b=r.toOption,S=r.toSet,v=r.unsafeMake},406820:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsSym:()=>i,delete:()=>a,empty:()=>m,fiberRefs:()=>s,forkAs:()=>o,get:()=>c,getOrDefault:()=>l,joinAs:()=>u,setAll:()=>f,unsafeMake:()=>h,updateAs:()=>d,updateManyAs:()=>p});var r=n(334196);const i=r.FiberRefsSym,a=r.delete_,s=r.fiberRefs,o=r.forkAs,c=r.get,l=r.getOrDefault,u=r.joinAs,f=r.setAll,d=r.updateAs,p=r.updateManyAs,h=r.unsafeMake,m=r.empty},685344:(e,t,n)=>{n.r(t),n.d(t,{combine:()=>s,diff:()=>a,empty:()=>i,patch:()=>o});var r=n(62177);const i=r.empty,a=r.diff,s=r.combine,o=r.patch},396304:(e,t,n)=>{n.r(t),n.d(t,{FiberStatusTypeId:()=>y,done:()=>b,isDone:()=>E,isFiberStatus:()=>w,isRunning:()=>_,isSuspended:()=>k,running:()=>S,suspended:()=>v});var r=n(382300),i=n(154258),a=n(353370),s=n(125105);const o="effect/FiberStatus",c=Symbol.for(o),l="Done",u="Running",f="Suspended",d=a.string(`${o}-${l}`);class p{[c]=c;_tag=l;[a.symbol](){return d}[r.symbol](e){return g(e)&&e._tag===l}}class h{runtimeFlags;[c]=c;_tag=u;constructor(e){this.runtimeFlags=e}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===u&&this.runtimeFlags===e.runtimeFlags}}class m{runtimeFlags;blockingOn;[c]=c;_tag=f;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.combine(a.hash(this.blockingOn)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===f&&this.runtimeFlags===e.runtimeFlags&&r.equals(this.blockingOn,e.blockingOn)}}const g=e=>(0,s.hasProperty)(e,c),y=c,b=new p,S=e=>new h(e),v=(e,t)=>new m(e,t),w=g,E=e=>e._tag===l,_=e=>e._tag===u,k=e=>e._tag===f},154258:(e,t,n)=>{n.r(t),n.d(t,{SK:()=>_,absurd:()=>y,apply:()=>a,compose:()=>g,constFalse:()=>f,constNull:()=>d,constTrue:()=>u,constUndefined:()=>p,constVoid:()=>h,constant:()=>l,dual:()=>i,flip:()=>m,flow:()=>w,hole:()=>E,identity:()=>s,isFunction:()=>r,pipe:()=>v,satisfies:()=>o,tupled:()=>b,unsafeCoerce:()=>c,untupled:()=>S});const r=e=>"function"===typeof e,i=function(e,t){if("function"===typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,i){return arguments.length>=4?t(e,n,r,i):function(i){return t(i,e,n,r)}};case 5:return function(e,n,r,i,a){return arguments.length>=5?t(e,n,r,i,a):function(a){return t(a,e,n,r,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(e){return t(e,...n)}}}},a=e=>t=>t(e),s=e=>e,o=()=>e=>e,c=s,l=e=>()=>e,u=l(!0),f=l(!1),d=l(null),p=l(void 0),h=p,m=e=>(...t)=>(...n)=>e(...n)(...t),g=i(2,((e,t)=>n=>t(e(n)))),y=e=>{throw new Error("Called `absurd` function which should be uncallable")},b=e=>t=>e(...t),S=e=>(...t)=>e(t);function v(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return s(a(i(r(n(t(e))))));case 8:return o(s(a(i(r(n(t(e)))))));case 9:return c(o(s(a(i(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}function w(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(a(i(r(n(t(e.apply(this,arguments)))))))))}}}const E=c(y),_=(e,t)=>t},744628:(e,t,n)=>{n.r(t),n.d(t,{globalValue:()=>s});var r=n(635420);const i=Symbol.for(`effect/GlobalValue/globalStoreId/${r.getCurrentVersion()}`);i in globalThis||(globalThis[i]=new Map);const a=globalThis[i],s=(e,t)=>(a.has(e)||a.set(e,t()),a.get(e))},353370:(e,t,n)=>{n.r(t),n.d(t,{array:()=>b,cached:()=>S,combine:()=>f,hash:()=>l,isHash:()=>p,number:()=>h,optimize:()=>d,random:()=>u,string:()=>m,structure:()=>y,structureKeys:()=>g,symbol:()=>c});var r=n(154258),i=n(744628),a=n(125105),s=n(977721);const o=(0,i.globalValue)(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),c=Symbol.for("effect/Hash"),l=e=>{if(!0===s.structuralRegionState.enabled)return 0;switch(typeof e){case"number":return h(e);case"bigint":return m(e.toString(10));case"boolean":case"symbol":return m(String(e));case"string":return m(e);case"undefined":return m("undefined");case"function":case"object":return null===e?m("null"):e instanceof Date?l(e.toISOString()):p(e)?e[c]():u(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},u=e=>(o.has(e)||o.set(e,h(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),o.get(e)),f=e=>t=>53*t^e,d=e=>3221225471&e|e>>>1&1073741824,p=e=>(0,a.hasProperty)(e,c),h=e=>{if(e!==e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return d(e)},m=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return d(t)},g=(e,t)=>{let n=12289;for(let i=0;i<t.length;i++)n^=(0,r.pipe)(m(t[i]),f(l(e[t[i]])));return d(n)},y=e=>g(e,Object.keys(e)),b=e=>{let t=6151;for(let n=0;n<e.length;n++)t=(0,r.pipe)(t,f(l(e[n])));return d(t)},S=function(){if(1===arguments.length){const e=arguments[0];return function(t){return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}},398826:(e,t,n)=>{n.r(t),n.d(t,{beginMutation:()=>E,compact:()=>P,empty:()=>s,endMutation:()=>_,entries:()=>S,filter:()=>L,filterMap:()=>D,findFirst:()=>U,flatMap:()=>C,forEach:()=>R,fromIterable:()=>c,get:()=>u,getHash:()=>f,has:()=>p,hasHash:()=>h,isEmpty:()=>l,isHashMap:()=>a,keySet:()=>y,keys:()=>g,make:()=>o,map:()=>M,modify:()=>T,modifyAt:()=>x,modifyHash:()=>I,mutate:()=>k,reduce:()=>F,remove:()=>A,removeMany:()=>N,set:()=>m,size:()=>w,toEntries:()=>v,union:()=>O,unsafeGet:()=>d,values:()=>b});var r=n(143798),i=n(99532);r.HashMapTypeId;const a=r.isHashMap,s=r.empty,o=r.make,c=r.fromIterable,l=r.isEmpty,u=r.get,f=r.getHash,d=r.unsafeGet,p=r.has,h=r.hasHash,m=r.set,g=r.keys,y=function(e){return(0,i.makeImpl)(e)},b=r.values,S=r.entries,v=e=>Array.from(S(e)),w=r.size,E=r.beginMutation,_=r.endMutation,k=r.mutate,x=r.modifyAt,I=r.modifyHash,T=r.modify,O=r.union,A=r.remove,N=r.removeMany,M=r.map,C=r.flatMap,R=r.forEach,F=r.reduce,L=r.filter,P=r.compact,D=r.filterMap,U=r.findFirst},895868:(e,t,n)=>{n.r(t),n.d(t,{add:()=>y,beginMutation:()=>h,difference:()=>S,empty:()=>a,endMutation:()=>m,every:()=>u,filter:()=>T,flatMap:()=>k,forEach:()=>x,fromIterable:()=>s,has:()=>c,intersection:()=>v,isHashSet:()=>i,isSubset:()=>f,make:()=>o,map:()=>_,mutate:()=>g,partition:()=>O,reduce:()=>I,remove:()=>b,size:()=>p,some:()=>l,toggle:()=>E,union:()=>w,values:()=>d});var r=n(99532);r.HashSetTypeId;const i=r.isHashSet,a=r.empty,s=r.fromIterable,o=r.make,c=r.has,l=r.some,u=r.every,f=r.isSubset,d=r.values,p=r.size,h=r.beginMutation,m=r.endMutation,g=r.mutate,y=r.add,b=r.remove,S=r.difference,v=r.intersection,w=r.union,E=r.toggle,_=r.map,k=r.flatMap,x=r.forEach,I=r.reduce,T=r.filter,O=r.partition},58536:(e,t,n)=>{n.r(t),n.d(t,{BaseProto:()=>o,Class:()=>c,NodeInspectSymbol:()=>i,format:()=>s,stringifyCircular:()=>u,toJSON:()=>a,toStringUnknown:()=>l});var r=n(125105);const i=Symbol.for("nodejs.util.inspect.custom"),a=e=>(0,r.hasProperty)(e,"toJSON")&&(0,r.isFunction)(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(a):e,s=e=>JSON.stringify(e,null,2),o={toJSON(){return a(this)},[i](){return this.toJSON()},toString(){return s(this.toJSON())}};class c{[i](){return this.toJSON()}toString(){return s(this.toJSON())}}const l=(e,t=2)=>{try{return"object"===typeof e?u(e,t):String(e)}catch(n){return String(e)}},u=(e,t)=>{let n=[];const r=JSON.stringify(e,((e,t)=>"object"===typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t),t);return n=void 0,r}},350025:(e,t,n)=>{n.r(t),n.d(t,{LayerTypeId:()=>d,MemoMapTypeId:()=>p,annotateLogs:()=>g,annotateSpans:()=>y,build:()=>b,buildWithMemoMap:()=>Ue,buildWithScope:()=>S,catchAll:()=>v,catchAllCause:()=>w,context:()=>E,die:()=>_,dieSync:()=>k,discard:()=>x,effect:()=>I,effectContext:()=>O,effectDiscard:()=>T,empty:()=>A,extendScope:()=>N,fail:()=>M,failCause:()=>R,failCauseSync:()=>F,failSync:()=>C,fiberRefLocallyScopedWith:()=>te,flatMap:()=>L,flatten:()=>P,fresh:()=>D,function:()=>U,isFresh:()=>m,isLayer:()=>h,launch:()=>j,locally:()=>Q,locallyEffect:()=>Z,locallyScoped:()=>ee,locallyWith:()=>X,makeMemoMap:()=>De,map:()=>q,mapError:()=>W,match:()=>B,matchCause:()=>z,memoize:()=>$,merge:()=>V,mergeAll:()=>G,orDie:()=>J,orElse:()=>H,parentSpan:()=>xe,passthrough:()=>K,project:()=>Y,provide:()=>be,provideMerge:()=>Se,retry:()=>ne,scope:()=>re,scoped:()=>ie,scopedContext:()=>se,scopedDiscard:()=>ae,service:()=>oe,setClock:()=>_e,setConfigProvider:()=>ke,setRequestBatching:()=>Ie,setRequestCache:()=>Oe,setRequestCaching:()=>Te,setScheduler:()=>Ae,setTracer:()=>Me,setTracerEnabled:()=>Ce,setTracerTiming:()=>Re,setUnhandledErrorLogLevel:()=>Fe,span:()=>Ne,succeed:()=>ce,succeedContext:()=>le,suspend:()=>ue,sync:()=>fe,syncContext:()=>de,tap:()=>pe,tapError:()=>he,tapErrorCause:()=>me,toRuntime:()=>ge,toRuntimeWithMemoMap:()=>ye,unwrapEffect:()=>we,unwrapScoped:()=>Ee,withParentSpan:()=>Pe,withSpan:()=>Le,zipWith:()=>ve});var r=n(499779),i=n(477926),a=n(597081),s=n(130949),o=n(365519),c=n(232376),l=n(797281),u=n(808816),f=n(84221);const d=c.LayerTypeId,p=c.MemoMapTypeId,h=c.isLayer,m=c.isFresh,g=c.annotateLogs,y=c.annotateSpans,b=c.build,S=c.buildWithScope,v=c.catchAll,w=c.catchAllCause,E=c.context,_=c.die,k=c.dieSync,x=c.discard,I=c.fromEffect,T=c.fromEffectDiscard,O=c.fromEffectContext,A=c.empty,N=c.extendScope,M=c.fail,C=c.failSync,R=c.failCause,F=c.failCauseSync,L=c.flatMap,P=c.flatten,D=c.fresh,U=c.fromFunction,j=c.launch,q=c.map,W=c.mapError,B=c.match,z=c.matchCause,$=c.memoize,V=c.merge,G=c.mergeAll,J=c.orDie,H=c.orElse,K=c.passthrough,Y=c.project,Z=c.locallyEffect,Q=c.fiberRefLocally,X=c.fiberRefLocallyWith,ee=c.fiberRefLocallyScoped,te=c.fiberRefLocallyScopedWith,ne=c.retry,re=c.scope,ie=c.scoped,ae=c.scopedDiscard,se=c.scopedContext,oe=c.service,ce=c.succeed,le=c.succeedContext,ue=c.suspend,fe=c.sync,de=c.syncContext,pe=c.tap,he=c.tapError,me=c.tapErrorCause,ge=c.toRuntime,ye=c.toRuntimeWithMemoMap,be=c.provide,Se=c.provideMerge,ve=c.zipWith,we=c.unwrapEffect,Ee=c.unwrapScoped,_e=e=>ae(o.fiberRefLocallyScopedWith(s.currentServices,r.add(i.clockTag,e))),ke=l.setConfigProvider,xe=l.parentSpan,Ie=e=>ae(o.fiberRefLocallyScoped(a.currentRequestBatching,e)),Te=e=>ae(o.fiberRefLocallyScoped(u.currentCacheEnabled,e)),Oe=e=>ae(a.isEffect(e)?a.flatMap(e,(e=>o.fiberRefLocallyScoped(u.currentCache,e))):o.fiberRefLocallyScoped(u.currentCache,e)),Ae=e=>ae(o.fiberRefLocallyScoped(f.currentScheduler,e)),Ne=l.span,Me=l.setTracer,Ce=e=>ae(o.fiberRefLocallyScoped(a.currentTracerEnabled,e)),Re=e=>ae(o.fiberRefLocallyScoped(a.currentTracerTimingEnabled,e)),Fe=e=>ae(o.fiberRefLocallyScoped(a.currentUnhandledErrorLogLevel,e)),Le=c.withSpan,Pe=c.withParentSpan,De=c.makeMemoMap,Ue=c.buildWithMemoMap},287258:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>h,append:()=>R,appendAll:()=>F,compact:()=>G,cons:()=>O,drop:()=>U,empty:()=>A,every:()=>j,filter:()=>W,filterMap:()=>V,findFirst:()=>J,flatMap:()=>H,forEach:()=>K,fromIterable:()=>M,getEquivalence:()=>g,head:()=>Y,isCons:()=>x,isList:()=>_,isNil:()=>k,last:()=>Z,make:()=>C,map:()=>Q,nil:()=>T,of:()=>N,partition:()=>X,partitionMap:()=>ee,prepend:()=>L,prependAll:()=>P,prependAllReversed:()=>D,reduce:()=>te,reduceRight:()=>ne,reverse:()=>re,size:()=>I,some:()=>q,splitAt:()=>ie,tail:()=>ae,take:()=>se,toArray:()=>m,toChunk:()=>oe,unsafeHead:()=>le,unsafeLast:()=>ue,unsafeTail:()=>fe});var r=n(342072),i=n(889133),a=n(411123),s=n(382300),o=n(84108),c=n(154258),l=n(353370),u=n(58536),f=n(504491),d=n(709322),p=n(125105);const h=Symbol.for("effect/List"),m=e=>r.fromIterable(e),g=e=>o.mapInput(r.getEquivalence(e),m),y=g(s.equals),b={[h]:h,_tag:"Cons",toString(){return(0,u.format)(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:m(this).map(u.toJSON)}},[u.NodeInspectSymbol](){return this.toJSON()},[s.symbol](e){return _(e)&&this._tag===e._tag&&y(this,e)},[l.symbol](){return l.cached(this,l.array(m(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return(0,d.pipeArguments)(this,arguments)}},S=(e,t)=>{const n=Object.create(b);return n.head=e,n.tail=t,n},v=l.string("Nil"),w={[h]:h,_tag:"Nil",toString(){return(0,u.format)(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[u.NodeInspectSymbol](){return this.toJSON()},[l.symbol]:()=>v,[s.symbol](e){return _(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return(0,d.pipeArguments)(this,arguments)}},E=Object.create(w),_=e=>(0,p.hasProperty)(e,h),k=e=>"Nil"===e._tag,x=e=>"Cons"===e._tag,I=e=>{let t=e,n=0;for(;!k(t);)n+=1,t=t.tail;return n},T=()=>E,O=(e,t)=>S(e,t),A=T,N=e=>S(e,E),M=e=>{const t=e[Symbol.iterator]();let n;if((n=t.next())&&!n.done){const e=S(n.value,E);let r=e;for(;(n=t.next())&&!n.done;){const e=S(n.value,E);r.tail=e,r=e}return e}return E},C=(...e)=>M(e),R=(0,c.dual)(2,((e,t)=>F(e,N(t)))),F=(0,c.dual)(2,((e,t)=>P(t,e))),L=(0,c.dual)(2,((e,t)=>O(t,e))),P=(0,c.dual)(2,((e,t)=>{if(k(e))return t;if(k(t))return e;{const n=S(t.head,e);let r=n,i=t.tail;for(;!k(i);){const t=S(i.head,e);r.tail=t,r=t,i=i.tail}return n}})),D=(0,c.dual)(2,((e,t)=>{let n=e,r=t;for(;x(r);)n=S(r.head,n),r=r.tail;return n})),U=(0,c.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=I(e))return E;let n=e,r=0;for(;!k(n)&&r<t;)n=n.tail,r+=1;return n})),j=(0,c.dual)(2,((e,t)=>{for(const n of e)if(!t(n))return!1;return!0})),q=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);){if(t(n.head))return!0;n=n.tail}return!1})),W=(0,c.dual)(2,((e,t)=>B(e,t,!1))),B=(e,t,n)=>{for(;;){if(k(e))return E;if(t(e.head)!==n)return z(e,e.tail,t,n);e=e.tail}},z=(e,t,n,r)=>{for(;;){if(k(t))return e;if(n(t.head)===r)return $(e,t,n,r);t=t.tail}},$=(e,t,n,r)=>{const i=S(le(e),E);let a=fe(e),s=i;for(;a!==t;){const e=S(le(a),E);s.tail=e,s=(0,c.unsafeCoerce)(e),a=(0,c.unsafeCoerce)(a.tail)}let o=t.tail,l=(0,c.unsafeCoerce)(o);for(;!k(o);){if(n(le(o))!==r)o=o.tail;else{for(;l!==o;){const e=S(le(l),E);s.tail=e,s=e,l=(0,c.unsafeCoerce)(l.tail)}l=(0,c.unsafeCoerce)(o.tail),o=o.tail}}return k(l)||(s.tail=l),i},V=(0,c.dual)(2,((e,t)=>{const n=[];for(const r of e){const e=t(r);f.isSome(e)&&n.push(e.value)}return M(n)})),G=e=>V(e,c.identity),J=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);){if(t(n.head))return f.some(n.head);n=n.tail}return f.none()})),H=(0,c.dual)(2,((e,t)=>{let n,r,i=e;for(;!k(i);){let e=t(i.head);for(;!k(e);){const t=S(e.head,E);void 0===r?n=t:r.tail=t,r=t,e=e.tail}i=i.tail}return void 0===n?E:n})),K=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);)t(n.head),n=n.tail})),Y=e=>k(e)?f.none():f.some(e.head),Z=e=>k(e)?f.none():f.some(ue(e)),Q=(0,c.dual)(2,((e,t)=>{if(k(e))return e;{let n=0;const r=S(t(e.head,n++),E);let i=r,a=e.tail;for(;!k(a);){const e=S(t(a.head,n++),E);i.tail=e,i=e,a=a.tail}return r}})),X=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e)t(i)?r.push(i):n.push(i);return[M(n),M(r)]})),ee=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e){const e=t(i);a.isLeft(e)?n.push(e.left):r.push(e.right)}return[M(n),M(r)]})),te=(0,c.dual)(3,((e,t,n)=>{let r=t,i=e;for(;!k(i);)r=n(r,i.head),i=i.tail;return r})),ne=(0,c.dual)(3,((e,t,n)=>{let r=t,i=re(e);for(;!k(i);)r=n(r,i.head),i=i.tail;return r})),re=e=>{let t=A(),n=e;for(;!k(n);)t=L(t,n.head),n=n.tail;return t},ie=(0,c.dual)(2,((e,t)=>[se(e,t),U(e,t)])),ae=e=>k(e)?f.none():f.some(e.tail),se=(0,c.dual)(2,((e,t)=>{if(t<=0)return E;if(t>=I(e))return e;let n=C(le(e)),r=fe(e);for(let i=1;i<t;i++)n=S(le(r),n),r=fe(r);return re(n)})),oe=e=>i.fromIterable(e),ce="Expected List to be non-empty",le=e=>{if(k(e))throw new Error(ce);return e.head},ue=e=>{if(k(e))throw new Error(ce);let t=e,n=e.tail;for(;!k(n);)t=n,n=n.tail;return t.head},fe=e=>{if(k(e))throw new Error(ce);return e.tail}},161938:(e,t,n)=>{n.r(t),n.d(t,{All:()=>o,Debug:()=>d,Error:()=>l,Fatal:()=>c,Info:()=>f,None:()=>h,Order:()=>y,Trace:()=>p,Warning:()=>u,allLevels:()=>m,fromLiteral:()=>E,greaterThan:()=>v,greaterThanEqual:()=>w,lessThan:()=>b,lessThanEqual:()=>S,locally:()=>g});var r=n(154258),i=n(597081),a=n(962047),s=n(880308);const o=i.logLevelAll,c=i.logLevelFatal,l=i.logLevelError,u=i.logLevelWarning,f=i.logLevelInfo,d=i.logLevelDebug,p=i.logLevelTrace,h=i.logLevelNone,m=i.allLogLevels,g=(0,r.dual)(2,((e,t)=>i.fiberRefLocally(e,i.currentLogLevel,t))),y=(0,r.pipe)(a.Order,s.mapInput((e=>e.ordinal))),b=s.lessThan(y),S=s.lessThanOrEqualTo(y),v=s.greaterThan(y),w=s.greaterThanOrEqualTo(y),E=e=>{switch(e){case"All":return o;case"Debug":return d;case"Error":return l;case"Fatal":return c;case"Info":return f;case"Trace":return p;case"None":return h;case"Warning":return u}}},327e3:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r,render:()=>i});const r=(e,t)=>({label:e,startTime:t}),i=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`},806874:(e,t,n)=>{n.r(t),n.d(t,{clear:()=>k,empty:()=>p,fromIterable:()=>m,get:()=>g,has:()=>b,make:()=>h,modify:()=>w,modifyAt:()=>E,remove:()=>_,set:()=>S,size:()=>x});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(504491),c=n(709322);const l=Symbol.for("effect/MutableHashMap"),u={[l]:l,[Symbol.iterator](){return new f(this)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}};class f{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new d(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new f(this.self)}}class d{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){const e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const p=()=>{const e=Object.create(u);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},h=(...e)=>m(e),m=e=>{const t=p();for(const[n,r]of e)S(t,n,r);return t},g=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.has(t)?o.some(e.referential.get(t)):o.none();const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i?o.none():y(e,i,t)})),y=(e,t,n,i=!1)=>{for(let a=0,s=t.length;a<s;a++)if(n[r.symbol](t[a][0])){const n=t[a][1];return i&&(t.splice(a,1),e.bucketsSize--),o.some(n)}return o.none()},b=(0,i.dual)(2,((e,t)=>o.isSome(g(e,t)))),S=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.set(t,n),e;const i=t[a.symbol](),s=e.buckets.get(i);return void 0===s?(e.buckets.set(i,[[t,n]]),e.bucketsSize++,e):(v(e,s,t),s.push([t,n]),e.bucketsSize++,e)})),v=(e,t,n)=>{for(let i=0,a=t.length;i<a;i++)if(n[r.symbol](t[i][0]))return t.splice(i,1),void e.bucketsSize--},w=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.has(t)&&e.referential.set(t,n(e.referential.get(t))),e;const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s)return e;const c=y(e,s,t,!0);return o.isNone(c)||(s.push([t,n(c.value)]),e.bucketsSize++),e})),E=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t)){const r=n(g(e,t));return o.isSome(r)?S(e,t,r.value):_(e,t),e}const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s){const r=n(o.none());return o.isSome(r)?S(e,t,r.value):e}const c=n(y(e,s,t,!0));return o.isNone(c)?(0===s.length&&e.buckets.delete(i),e):(s.push([t,c.value]),e.bucketsSize++,e)})),_=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.delete(t),e;const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i||(v(e,i,t),0===i.length&&e.buckets.delete(n)),e})),k=e=>(e.referential.clear(),e.buckets.clear(),e.bucketsSize=0,e),x=e=>e.referential.size+e.bucketsSize},350043:(e,t,n)=>{n.r(t),n.d(t,{EmptyMutableQueue:()=>g,bounded:()=>S,capacity:()=>k,isEmpty:()=>E,isFull:()=>_,length:()=>w,offer:()=>x,offerAll:()=>I,poll:()=>T,pollUpTo:()=>O,unbounded:()=>v});var r=n(889133),i=n(154258),a=n(58536),s=n(709322);const o=Symbol.for("effect/MutableList"),c={[o]:o,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();const n=t.value;return t=t.next,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(a.toJSON)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},l=e=>({value:e,removed:!1,prev:void 0,next:void 0}),u=()=>{const e=Object.create(c);return e.head=void 0,e.tail=void 0,e._length=0,e},f=e=>0===d(e),d=e=>e._length,p=i.dual(2,((e,t)=>{const n=l(t);return void 0===e.head&&(e.head=n),void 0===e.tail||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e})),h=(e,t)=>{t.removed||(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},m=Symbol.for("effect/MutableQueue"),g=Symbol.for("effect/mutable/MutableQueue/Empty"),y={[m]:m,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(a.toJSON)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},b=e=>{const t=Object.create(y);return t.queue=u(),t.capacity=e,t},S=e=>b(e),v=()=>b(void 0),w=e=>d(e.queue),E=e=>f(e.queue),_=e=>void 0!==e.capacity&&d(e.queue)===e.capacity,k=e=>void 0===e.capacity?1/0:e.capacity,x=i.dual(2,((e,t)=>{const n=d(e.queue);return(void 0===e.capacity||n!==e.capacity)&&(p(t)(e.queue),!0)})),I=i.dual(2,((e,t)=>{const n=t[Symbol.iterator]();let i,a=r.empty(),s=!0;for(;s&&(i=n.next())&&!i.done;)s=x(i.value)(e);for(;null!=i&&!i.done;)a=r.prepend(i.value)(a),i=n.next();return r.reverse(a)})),T=i.dual(2,((e,t)=>f(e.queue)?t:(e=>{const t=e.head;if(void 0!==t)return h(e,t),t.value})(e.queue))),O=i.dual(2,((e,t)=>{let n=r.empty(),i=0;for(;i<t;){const t=T(g)(e);if(t===g)break;n=r.prepend(t)(n),i+=1}return r.reverse(n)}))},847857:(e,t,n)=>{n.r(t),n.d(t,{compareAndSet:()=>u,decrement:()=>f,decrementAndGet:()=>d,get:()=>p,getAndDecrement:()=>h,getAndIncrement:()=>m,getAndSet:()=>g,getAndUpdate:()=>y,increment:()=>b,incrementAndGet:()=>S,make:()=>l,set:()=>v,setAndGet:()=>w,toggle:()=>k,update:()=>E,updateAndGet:()=>_});var r=n(382300),i=n(154258),a=n(58536),s=n(709322);const o=Symbol.for("effect/MutableRef"),c={[o]:o,toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableRef",current:(0,a.toJSON)(this.current)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},l=e=>{const t=Object.create(c);return t.current=e,t},u=i.dual(3,((e,t,n)=>!!r.equals(t,e.current)&&(e.current=n,!0))),f=e=>E(e,(e=>e-1)),d=e=>_(e,(e=>e-1)),p=e=>e.current,h=e=>y(e,(e=>e-1)),m=e=>y(e,(e=>e+1)),g=i.dual(2,((e,t)=>{const n=e.current;return e.current=t,n})),y=i.dual(2,((e,t)=>g(e,t(p(e))))),b=e=>E(e,(e=>e+1)),S=e=>_(e,(e=>e+1)),v=i.dual(2,((e,t)=>(e.current=t,e))),w=i.dual(2,((e,t)=>(e.current=t,e.current))),E=i.dual(2,((e,t)=>v(e,t(p(e))))),_=i.dual(2,((e,t)=>w(e,t(p(e))))),k=e=>E(e,(e=>!e))},962047:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>m,Order:()=>g,between:()=>w,clamp:()=>E,decrement:()=>h,divide:()=>f,greaterThan:()=>S,greaterThanOrEqualTo:()=>v,increment:()=>p,isNumber:()=>o,lessThan:()=>y,lessThanOrEqualTo:()=>b,max:()=>k,min:()=>_,multiply:()=>l,multiplyAll:()=>T,nextPow2:()=>A,parse:()=>N,remainder:()=>O,sign:()=>x,subtract:()=>u,sum:()=>c,sumAll:()=>I,unsafeDivide:()=>d});var r=n(84108),i=n(154258),a=n(769275),s=n(880308);const o=n(125105).isNumber,c=(0,i.dual)(2,((e,t)=>e+t)),l=(0,i.dual)(2,((e,t)=>e*t)),u=(0,i.dual)(2,((e,t)=>e-t)),f=(0,i.dual)(2,((e,t)=>0===t?a.none:a.some(e/t))),d=(0,i.dual)(2,((e,t)=>e/t)),p=e=>e+1,h=e=>e-1,m=r.number,g=s.number,y=s.lessThan(g),b=s.lessThanOrEqualTo(g),S=s.greaterThan(g),v=s.greaterThanOrEqualTo(g),w=s.between(g),E=s.clamp(g),_=s.min(g),k=s.max(g),x=e=>g(e,0),I=e=>{let t=0;for(const n of e)t+=n;return t},T=e=>{let t=1;for(const n of e){if(0===n)return 0;t*=n}return t},O=(0,i.dual)(2,((e,t)=>{const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)})),A=e=>{const t=Math.ceil(Math.log(e)/Math.log(2));return Math.max(Math.pow(2,t),2)},N=e=>{if("NaN"===e)return a.some(NaN);if("Infinity"===e)return a.some(1/0);if("-Infinity"===e)return a.some(-1/0);if(""===e.trim())return a.none;const t=Number(e);return Number.isNaN(t)?a.none:a.some(t)}},504491:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>de,TypeId:()=>f,all:()=>H,andThen:()=>j,ap:()=>Y,as:()=>L,asVoid:()=>P,bind:()=>fe,bindTo:()=>le,composeK:()=>z,contains:()=>oe,containsWith:()=>se,exists:()=>ce,filter:()=>te,filterMap:()=>ee,firstSomeOf:()=>I,flatMap:()=>U,flatMapNullable:()=>q,flatten:()=>W,fromIterable:()=>S,fromNullable:()=>T,gen:()=>he,getEquivalence:()=>ne,getLeft:()=>w,getOrElse:()=>E,getOrNull:()=>A,getOrThrow:()=>R,getOrThrowWith:()=>C,getOrUndefined:()=>N,getOrder:()=>re,getRight:()=>v,isNone:()=>m,isOption:()=>h,isSome:()=>g,let:()=>ue,lift2:()=>ie,liftNullable:()=>O,liftPredicate:()=>ae,liftThrowable:()=>M,map:()=>F,match:()=>y,none:()=>d,orElse:()=>_,orElseEither:()=>x,orElseSome:()=>k,partitionMap:()=>X,product:()=>G,productMany:()=>J,reduceCompact:()=>Z,some:()=>p,tap:()=>V,toArray:()=>Q,toRefinement:()=>b,void:()=>D,zipLeft:()=>$,zipRight:()=>B,zipWith:()=>K});var r=n(382300),i=n(84108),a=n(154258),s=n(997385),o=n(384771),c=n(769275),l=n(880308),u=n(977721);const f=Symbol.for("effect/Option"),d=()=>c.none,p=c.some,h=c.isOption,m=c.isNone,g=c.isSome,y=(0,a.dual)(2,((e,{onNone:t,onSome:n})=>m(e)?t():n(e.value))),b=e=>t=>g(e(t)),S=e=>{for(const t of e)return p(t);return d()},v=o.getRight,w=o.getLeft,E=(0,a.dual)(2,((e,t)=>m(e)?t():e.value)),_=(0,a.dual)(2,((e,t)=>m(e)?t():e)),k=(0,a.dual)(2,((e,t)=>m(e)?p(t()):e)),x=(0,a.dual)(2,((e,t)=>m(e)?F(t(),o.right):F(e,o.left))),I=e=>{let t=d();for(t of e)if(g(t))return t;return t},T=e=>null==e?d():p(e),O=e=>(...t)=>T(e(...t)),A=E(a.constNull),N=E(a.constUndefined),M=e=>(...t)=>{try{return p(e(...t))}catch(n){return d()}},C=(0,a.dual)(2,((e,t)=>{if(g(e))return e.value;throw t()})),R=C((()=>new Error("getOrThrow called on a None"))),F=(0,a.dual)(2,((e,t)=>m(e)?d():p(t(e.value)))),L=(0,a.dual)(2,((e,t)=>F(e,(()=>t)))),P=L(void 0),D=p(void 0),U=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),j=(0,a.dual)(2,((e,t)=>U(e,(e=>{const n=(0,a.isFunction)(t)?t(e):t;return h(n)?n:p(n)})))),q=(0,a.dual)(2,((e,t)=>m(e)?d():T(t(e.value)))),W=U(a.identity),B=(0,a.dual)(2,((e,t)=>U(e,(()=>t)))),z=(0,a.dual)(2,((e,t)=>n=>U(e(n),t))),$=(0,a.dual)(2,((e,t)=>V(e,(()=>t)))),V=(0,a.dual)(2,((e,t)=>U(e,(e=>F(t(e),(()=>e)))))),G=(e,t)=>g(e)&&g(t)?p([e.value,t.value]):d(),J=(e,t)=>{if(m(e))return d();const n=[e.value];for(const r of t){if(m(r))return d();n.push(r.value)}return p(n)},H=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(m(n))return d();t.push(n.value)}return p(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(m(r))return d();t[n]=r.value}return p(t)},K=(0,a.dual)(3,((e,t,n)=>F(G(e,t),(([e,t])=>n(e,t))))),Y=(0,a.dual)(2,((e,t)=>K(e,t,((e,t)=>e(t))))),Z=(0,a.dual)(3,((e,t,n)=>{let r=t;for(const i of e)g(i)&&(r=n(r,i.value));return r})),Q=e=>m(e)?[]:[e.value],X=(0,a.dual)(2,((e,t)=>{if(m(e))return[d(),d()];const n=t(e.value);return o.isLeft(n)?[p(n.left),d()]:[d(),p(n.right)]})),ee=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),te=(0,a.dual)(2,((e,t)=>ee(e,(e=>t(e)?c.some(e):c.none)))),ne=e=>i.make(((t,n)=>m(t)?m(n):!m(n)&&e(t.value,n.value))),re=e=>l.make(((t,n)=>g(t)?g(n)?e(t.value,n.value):1:-1)),ie=e=>(0,a.dual)(2,((t,n)=>K(t,n,e))),ae=(0,a.dual)(2,((e,t)=>t(e)?p(e):d())),se=e=>(0,a.dual)(2,((t,n)=>!m(t)&&e(t.value,n))),oe=se(r.equivalence()),ce=(0,a.dual)(2,((e,t)=>!m(e)&&t(e.value))),le=s.bindTo(F),ue=s.let_(F),fe=s.bind(F,U),de=p({}),pe=u.adapter(),he=(...e)=>{let t;t=1===e.length?e[0]:e[1].bind(e[0]);const n=t(pe);let r=n.next();if(r.done)return p(r.value);{let e=r.value;if(e=u.isGenKind(e)?e.value:u.yieldWrapGet(e),m(e))return e;for(;!r.done;)if(r=n.next(e.value),!r.done&&(e=r.value,e=u.isGenKind(e)?e.value:u.yieldWrapGet(e),m(e)))return e;return p(r.value)}}},880308:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>m,all:()=>y,array:()=>v,between:()=>A,bigint:()=>c,boolean:()=>o,clamp:()=>O,combine:()=>u,combineAll:()=>p,combineMany:()=>f,empty:()=>d,greaterThan:()=>_,greaterThanOrEqualTo:()=>x,lessThan:()=>E,lessThanOrEqualTo:()=>k,make:()=>i,mapInput:()=>h,max:()=>T,min:()=>I,number:()=>s,product:()=>g,productMany:()=>b,reverse:()=>l,string:()=>a,struct:()=>w,tuple:()=>S});var r=n(154258);const i=e=>(t,n)=>t===n?0:e(t,n),a=i(((e,t)=>e<t?-1:1)),s=i(((e,t)=>e<t?-1:1)),o=i(((e,t)=>e<t?-1:1)),c=i(((e,t)=>e<t?-1:1)),l=e=>i(((t,n)=>e(n,t))),u=(0,r.dual)(2,((e,t)=>i(((n,r)=>{const i=e(n,r);return 0!==i?i:t(n,r)})))),f=(0,r.dual)(2,((e,t)=>i(((n,r)=>{let i=e(n,r);if(0!==i)return i;for(const e of t)if(i=e(n,r),0!==i)return i;return i})))),d=()=>i((()=>0)),p=e=>f(d(),e),h=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),m=h(s,(e=>e.getTime())),g=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>{const s=e(n,i);return 0!==s?s:t(r,a)})))),y=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;const e=a(t[i],n[i]);if(0!==e)return e;i++}return 0})),b=(0,r.dual)(2,((e,t)=>{const n=y(t);return i(((t,r)=>{const i=e(t[0],r[0]);return 0!==i?i:n(t.slice(1),r.slice(1))}))})),S=(...e)=>y(e),v=e=>i(((t,n)=>{const r=t.length,i=n.length,a=Math.min(r,i);for(let s=0;s<a;s++){const r=e(t[s],n[s]);if(0!==r)return r}return s(r,i)})),w=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t){const t=e[i](n[i],r[i]);if(0!==t)return t}return 0}))},E=e=>(0,r.dual)(2,((t,n)=>-1===e(t,n))),_=e=>(0,r.dual)(2,((t,n)=>1===e(t,n))),k=e=>(0,r.dual)(2,((t,n)=>1!==e(t,n))),x=e=>(0,r.dual)(2,((t,n)=>-1!==e(t,n))),I=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)<1?t:n)),T=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)>-1?t:n)),O=e=>(0,r.dual)(2,((t,n)=>I(e)(n.maximum,T(e)(n.minimum,t)))),A=e=>(0,r.dual)(2,((t,n)=>!E(e)(t,n.minimum)&&!_(e)(t,n.maximum)))},709322:(e,t,n)=>{n.r(t),n.d(t,{pipeArguments:()=>r});const r=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}}},125105:(e,t,n)=>{n.r(t),n.d(t,{all:()=>U,and:()=>$,compose:()=>P,eqv:()=>G,every:()=>Y,hasProperty:()=>k,implies:()=>J,isBigInt:()=>p,isBoolean:()=>d,isDate:()=>N,isError:()=>O,isFunction:()=>m,isIterable:()=>M,isMap:()=>l,isNever:()=>v,isNotNull:()=>S,isNotNullable:()=>T,isNotUndefined:()=>y,isNull:()=>b,isNullable:()=>I,isNumber:()=>f,isObject:()=>_,isPromise:()=>F,isPromiseLike:()=>L,isReadonlyRecord:()=>R,isRecord:()=>C,isSet:()=>c,isString:()=>u,isSymbol:()=>h,isTagged:()=>x,isTruthy:()=>o,isTupleOf:()=>a,isTupleOfAtLeast:()=>s,isUint8Array:()=>A,isUndefined:()=>g,isUnknown:()=>w,mapInput:()=>i,nand:()=>K,nor:()=>H,not:()=>B,or:()=>z,product:()=>D,productMany:()=>j,some:()=>Z,struct:()=>W,tuple:()=>q,xor:()=>V});var r=n(154258);const i=(0,r.dual)(2,((e,t)=>n=>e(t(n)))),a=(0,r.dual)(2,((e,t)=>e.length===t)),s=(0,r.dual)(2,((e,t)=>e.length>=t)),o=e=>!!e,c=e=>e instanceof Set,l=e=>e instanceof Map,u=e=>"string"===typeof e,f=e=>"number"===typeof e,d=e=>"boolean"===typeof e,p=e=>"bigint"===typeof e,h=e=>"symbol"===typeof e,m=r.isFunction,g=e=>void 0===e,y=e=>void 0!==e,b=e=>null===e,S=e=>null!==e,v=e=>!1,w=e=>!0,E=e=>"object"===typeof e&&null!==e,_=e=>E(e)||m(e),k=(0,r.dual)(2,((e,t)=>_(e)&&t in e)),x=(0,r.dual)(2,((e,t)=>k(e,"_tag")&&e._tag===t)),I=e=>null===e||void 0===e,T=e=>null!==e&&void 0!==e,O=e=>e instanceof Error,A=e=>e instanceof Uint8Array,N=e=>e instanceof Date,M=e=>k(e,Symbol.iterator),C=e=>E(e)&&!Array.isArray(e),R=C,F=e=>k(e,"then")&&"catch"in e&&m(e.then)&&m(e.catch),L=e=>k(e,"then")&&m(e.then),P=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),D=(e,t)=>([n,r])=>e(n)&&t(r),U=e=>t=>{let n=0;for(const r of e){if(n>=t.length)break;if(!1===r(t[n]))return!1;n++}return!0},j=(e,t)=>{const n=U(t);return([t,...r])=>!1!==e(t)&&n(r)},q=(...e)=>U(e),W=e=>{const t=Object.keys(e);return n=>{for(const r of t)if(!e[r](n[r]))return!1;return!0}},B=e=>t=>!e(t),z=(0,r.dual)(2,((e,t)=>n=>e(n)||t(n))),$=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),V=(0,r.dual)(2,((e,t)=>n=>e(n)!==t(n))),G=(0,r.dual)(2,((e,t)=>n=>e(n)===t(n))),J=(0,r.dual)(2,((e,t)=>n=>!e(n)||t(n))),H=(0,r.dual)(2,((e,t)=>n=>!(e(n)||t(n)))),K=(0,r.dual)(2,((e,t)=>n=>!(e(n)&&t(n)))),Y=e=>t=>{for(const n of e)if(!n(t))return!1;return!0},Z=e=>t=>{for(const n of e)if(n(t))return!0;return!1}},168454:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>o,isReadable:()=>c,make:()=>u,map:()=>f,mapEffect:()=>d,unwrap:()=>p});var r=n(154258),i=n(597081),a=n(709322),s=n(125105);const o=Symbol.for("effect/Readable"),c=e=>(0,s.hasProperty)(e,o),l={[o]:o,pipe(){return(0,a.pipeArguments)(this,arguments)}},u=e=>{const t=Object.create(l);return t.get=e,t},f=(0,r.dual)(2,((e,t)=>u(i.map(e.get,t)))),d=(0,r.dual)(2,((e,t)=>u(i.flatMap(e.get,t)))),p=e=>u(i.flatMap(e,(e=>e.get)))},939739:(e,t,n)=>{n.r(t),n.d(t,{collect:()=>p,difference:()=>V,empty:()=>o,every:()=>W,filter:()=>T,filterMap:()=>I,fromEntries:()=>d,fromIterableBy:()=>f,fromIterableWith:()=>u,get:()=>y,getEquivalence:()=>G,getLefts:()=>A,getRights:()=>N,getSomes:()=>O,has:()=>g,intersection:()=>$,isEmptyReadonlyRecord:()=>l,isEmptyRecord:()=>c,isSubrecord:()=>j,isSubrecordBy:()=>U,keys:()=>F,map:()=>_,mapEntries:()=>x,mapKeys:()=>k,modify:()=>b,modifyOption:()=>S,partition:()=>R,partitionMap:()=>M,pop:()=>E,reduce:()=>q,remove:()=>w,replace:()=>D,replaceOption:()=>v,separate:()=>C,set:()=>P,singleton:()=>J,size:()=>m,some:()=>B,toEntries:()=>h,union:()=>z,values:()=>L});var r=n(411123),i=n(382300),a=n(154258),s=n(504491);const o=()=>({}),c=e=>0===F(e).length,l=c,u=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of e){const[e,i]=t(r);n[e]=i}return n})),f=(e,t)=>u(e,(e=>[t(e),e])),d=Object.fromEntries,p=(0,a.dual)(2,((e,t)=>{const n=[];for(const r of F(e))n.push(t(r,e[r]));return n})),h=p(((e,t)=>[e,t])),m=e=>F(e).length,g=(0,a.dual)(2,((e,t)=>Object.prototype.hasOwnProperty.call(e,t))),y=(0,a.dual)(2,((e,t)=>g(e,t)?s.some(e[t]):s.none())),b=(0,a.dual)(3,((e,t,n)=>g(e,t)?{...e,[t]:n(e[t])}:{...e})),S=(0,a.dual)(3,((e,t,n)=>g(e,t)?s.some({...e,[t]:n(e[t])}):s.none())),v=(0,a.dual)(3,((e,t,n)=>S(e,t,(()=>n)))),w=(0,a.dual)(2,((e,t)=>{if(!g(e,t))return{...e};const n={...e};return delete n[t],n})),E=(0,a.dual)(2,((e,t)=>g(e,t)?s.some([e[t],w(e,t)]):s.none())),_=(0,a.dual)(2,((e,t)=>{const n={...e};for(const r of F(e))n[r]=t(e[r],r);return n})),k=(0,a.dual)(2,((e,t)=>{const n={};for(const r of F(e)){const i=e[r];n[t(r,i)]=i}return n})),x=(0,a.dual)(2,((e,t)=>{const n={};for(const r of F(e)){const[i,a]=t(e[r],r);n[i]=a}return n})),I=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of F(e)){const i=t(e[r],r);s.isSome(i)&&(n[r]=i.value)}return n})),T=(0,a.dual)(2,((e,t)=>{const n=o();for(const r of F(e))t(e[r],r)&&(n[r]=e[r]);return n})),O=I(a.identity),A=e=>{const t=o();for(const n of F(e)){const i=e[n];r.isLeft(i)&&(t[n]=i.left)}return t},N=e=>{const t=o();for(const n of F(e)){const i=e[n];r.isRight(i)&&(t[n]=i.right)}return t},M=(0,a.dual)(2,((e,t)=>{const n=o(),i=o();for(const a of F(e)){const s=t(e[a],a);r.isLeft(s)?n[a]=s.left:i[a]=s.right}return[n,i]})),C=M(a.identity),R=(0,a.dual)(2,((e,t)=>{const n=o(),r=o();for(const i of F(e))t(e[i],i)?r[i]=e[i]:n[i]=e[i];return[n,r]})),F=e=>Object.keys(e),L=e=>p(e,((e,t)=>t)),P=(0,a.dual)(3,((e,t,n)=>({...e,[t]:n}))),D=(0,a.dual)(3,((e,t,n)=>g(e,t)?{...e,[t]:n}:{...e})),U=e=>(0,a.dual)(2,((t,n)=>{for(const r of F(t))if(!g(n,r)||!e(t[r],n[r]))return!1;return!0})),j=U(i.equivalence()),q=(0,a.dual)(3,((e,t,n)=>{let r=t;for(const i of F(e))r=n(r,e[i],i);return r})),W=(0,a.dual)(2,((e,t)=>{for(const n of F(e))if(!t(e[n],n))return!1;return!0})),B=(0,a.dual)(2,((e,t)=>{for(const n of F(e))if(t(e[n],n))return!0;return!1})),z=(0,a.dual)(3,((e,t,n)=>{if(c(e))return{...t};if(c(t))return{...e};const r=o();for(const i of F(e))g(t,i)?r[i]=n(e[i],t[i]):r[i]=e[i];for(const i of F(t))g(r,i)||(r[i]=t[i]);return r})),$=(0,a.dual)(3,((e,t,n)=>{const r=o();if(c(e)||c(t))return r;for(const i of F(e))g(t,i)&&(r[i]=n(e[i],t[i]));return r})),V=(0,a.dual)(2,((e,t)=>{if(c(e))return{...t};if(c(t))return{...e};const n={};for(const r of F(e))g(t,r)||(n[r]=e[r]);for(const r of F(t))g(e,r)||(n[r]=t[r]);return n})),G=e=>{const t=U(e);return(e,n)=>t(e,n)&&t(n,e)},J=(e,t)=>({[e]:t})},766922:(e,t,n)=>{n.r(t),n.d(t,{RedactedTypeId:()=>a,getEquivalence:()=>u,isRedacted:()=>s,make:()=>o,unsafeWipe:()=>l,value:()=>c});var r=n(84108),i=n(332570);const a=i.RedactedTypeId,s=i.isRedacted,o=i.make,c=i.value,l=i.unsafeWipe,u=e=>r.make(((t,n)=>e(c(t),c(n))))},581757:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>i,get:()=>s,getAndSet:()=>o,getAndUpdate:()=>c,getAndUpdateSome:()=>l,make:()=>a,modify:()=>u,modifySome:()=>f,set:()=>d,setAndGet:()=>p,unsafeMake:()=>b,update:()=>h,updateAndGet:()=>m,updateSome:()=>g,updateSomeAndGet:()=>y});var r=n(858061);const i=r.RefTypeId,a=r.make,s=r.get,o=r.getAndSet,c=r.getAndUpdate,l=r.getAndUpdateSome,u=r.modify,f=r.modifySome,d=r.set,p=r.setAndGet,h=r.update,m=r.updateAndGet,g=r.updateSome,y=r.updateSomeAndGet,b=r.unsafeMake},951791:(e,t,n)=>{n.r(t),n.d(t,{escape:()=>r});const r=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&")},33389:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>d,EntryTypeId:()=>w,RequestTypeId:()=>c,TaggedClass:()=>p,complete:()=>h,completeEffect:()=>g,fail:()=>y,failCause:()=>b,interruptWhenPossible:()=>m,isEntry:()=>E,isRequest:()=>l,makeCache:()=>v,makeEntry:()=>_,of:()=>u,succeed:()=>S,tagged:()=>f});var r=n(100726),i=n(515718),a=n(597081),s=n(365519),o=n(796605);const c=o.RequestTypeId,l=o.isRequest,u=o.of,f=o.tagged,d=o.Class,p=o.TaggedClass,h=o.complete,m=s.interruptWhenPossible,g=o.completeEffect,y=o.fail,b=o.failCause,S=o.succeed,v=e=>i.make({...e,lookup:()=>a.map(a.deferredMake(),(e=>({listeners:new o.Listeners,handle:e})))}),w=Symbol.for("effect/RequestBlock.Entry"),E=r.isEntry,_=r.makeEntry},364647:(e,t,n)=>{n.r(t),n.d(t,{andThen:()=>h,both:()=>m,disable:()=>c,disabledSet:()=>v,either:()=>g,empty:()=>a,enable:()=>o,enabledSet:()=>S,exclude:()=>y,includes:()=>p,inverse:()=>b,isActive:()=>u,isDisabled:()=>d,isEmpty:()=>l,isEnabled:()=>f,make:()=>s,render:()=>w});var r=n(939909),i=n(850519);const a=i.empty,s=i.make,o=i.enable,c=i.disable,l=i.isEmpty,u=i.isActive,f=i.isEnabled,d=i.isDisabled,p=i.isActive,h=i.andThen,m=i.both,g=i.either,y=i.exclude,b=i.inverse,S=r.enabledSet,v=r.disabledSet,w=r.renderPatch},292075:(e,t,n)=>{n.r(t),n.d(t,{ScheduleDriverTypeId:()=>a,ScheduleTypeId:()=>i,addDelay:()=>o,addDelayEffect:()=>c,andThen:()=>l,andThenEither:()=>u,as:()=>f,asVoid:()=>d,bothInOut:()=>p,check:()=>h,checkEffect:()=>m,collectAllInputs:()=>g,collectAllOutputs:()=>y,collectUntil:()=>b,collectUntilEffect:()=>S,collectWhile:()=>v,collectWhileEffect:()=>w,compose:()=>E,count:()=>I,cron:()=>T,dayOfMonth:()=>O,dayOfWeek:()=>A,delayed:()=>N,delayedEffect:()=>M,delayedSchedule:()=>C,delays:()=>R,driver:()=>P,duration:()=>D,either:()=>U,eitherWith:()=>j,elapsed:()=>q,ensuring:()=>W,exponential:()=>B,fibonacci:()=>z,fixed:()=>$,forever:()=>V,fromDelay:()=>G,fromDelays:()=>J,fromFunction:()=>H,hourOfDay:()=>K,identity:()=>Y,intersect:()=>Z,intersectWith:()=>Q,jittered:()=>X,jitteredWith:()=>ee,linear:()=>te,makeWithState:()=>s,map:()=>ne,mapBoth:()=>F,mapBothEffect:()=>L,mapEffect:()=>re,mapInput:()=>_,mapInputContext:()=>k,mapInputEffect:()=>x,minuteOfHour:()=>ie,modifyDelay:()=>ae,modifyDelayEffect:()=>se,onDecision:()=>oe,once:()=>ce,passthrough:()=>le,provideContext:()=>ue,provideService:()=>fe,recurUntil:()=>de,recurUntilEffect:()=>pe,recurUntilOption:()=>he,recurUpTo:()=>me,recurWhile:()=>ge,recurWhileEffect:()=>ye,recurs:()=>be,reduce:()=>Se,reduceEffect:()=>ve,repeatForever:()=>we,repetitions:()=>Ee,resetAfter:()=>_e,resetWhen:()=>ke,run:()=>xe,secondOfMinute:()=>Ie,spaced:()=>Te,stop:()=>Oe,succeed:()=>Ae,sync:()=>Ne,tapInput:()=>Me,tapOutput:()=>Ce,unfold:()=>Re,union:()=>Fe,unionWith:()=>Le,untilInput:()=>Pe,untilInputEffect:()=>De,untilOutput:()=>Ue,untilOutputEffect:()=>je,upTo:()=>qe,whileInput:()=>We,whileInputEffect:()=>Be,whileOutput:()=>ze,whileOutputEffect:()=>$e,windowed:()=>Ve,zipLeft:()=>Ge,zipRight:()=>Je,zipWith:()=>He});var r=n(457685);const i=r.ScheduleTypeId,a=r.ScheduleDriverTypeId,s=r.makeWithState,o=r.addDelay,c=r.addDelayEffect,l=r.andThen,u=r.andThenEither,f=r.as,d=r.asVoid,p=r.bothInOut,h=r.check,m=r.checkEffect,g=r.collectAllInputs,y=r.collectAllOutputs,b=r.collectUntil,S=r.collectUntilEffect,v=r.collectWhile,w=r.collectWhileEffect,E=r.compose,_=r.mapInput,k=r.mapInputContext,x=r.mapInputEffect,I=r.count,T=r.cron,O=r.dayOfMonth,A=r.dayOfWeek,N=r.delayed,M=r.delayedEffect,C=r.delayedSchedule,R=r.delays,F=r.mapBoth,L=r.mapBothEffect,P=r.driver,D=r.duration,U=r.either,j=r.eitherWith,q=r.elapsed,W=r.ensuring,B=r.exponential,z=r.fibonacci,$=r.fixed,V=r.forever,G=r.fromDelay,J=r.fromDelays,H=r.fromFunction,K=r.hourOfDay,Y=r.identity,Z=r.intersect,Q=r.intersectWith,X=r.jittered,ee=r.jitteredWith,te=r.linear,ne=r.map,re=r.mapEffect,ie=r.minuteOfHour,ae=r.modifyDelay,se=r.modifyDelayEffect,oe=r.onDecision,ce=r.once,le=r.passthrough,ue=r.provideContext,fe=r.provideService,de=r.recurUntil,pe=r.recurUntilEffect,he=r.recurUntilOption,me=r.recurUpTo,ge=r.recurWhile,ye=r.recurWhileEffect,be=r.recurs,Se=r.reduce,ve=r.reduceEffect,we=r.forever,Ee=r.repetitions,_e=r.resetAfter,ke=r.resetWhen,xe=r.run,Ie=r.secondOfMinute,Te=r.spaced,Oe=r.stop,Ae=r.succeed,Ne=r.sync,Me=r.tapInput,Ce=r.tapOutput,Re=r.unfold,Fe=r.union,Le=r.unionWith,Pe=r.untilInput,De=r.untilInputEffect,Ue=r.untilOutput,je=r.untilOutputEffect,qe=r.upTo,We=r.whileInput,Be=r.whileInputEffect,ze=r.whileOutput,$e=r.whileOutputEffect,Ve=r.windowed,Ge=r.zipLeft,Je=r.zipRight,He=r.zipWith},131173:(e,t,n)=>{n.r(t),n.d(t,{continue:()=>o,continueWith:()=>c,done:()=>l,isContinue:()=>u,isDone:()=>f});var r=n(889133),i=n(358659);const a="Continue",s="Done",o=e=>({_tag:a,intervals:e}),c=e=>({_tag:a,intervals:i.make(r.of(e))}),l={_tag:s},u=e=>e._tag===a,f=e=>e._tag===s},295818:(e,t,n)=>{n.r(t),n.d(t,{IntervalTypeId:()=>m,after:()=>I,before:()=>T,empty:()=>y,intersect:()=>_,isEmpty:()=>w,isNonEmpty:()=>E,lessThan:()=>b,make:()=>g,max:()=>v,min:()=>S,size:()=>k,union:()=>x});var r=n(860118),i=n(154258),a=n(504491);const s=Symbol.for("effect/ScheduleInterval"),o={[s]:s,startMillis:0,endMillis:0},c=(e,t)=>e>t?o:{[s]:s,startMillis:e,endMillis:t},l=(0,i.dual)(2,((e,t)=>u(e,t)===e)),u=(0,i.dual)(2,((e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t)),f=(0,i.dual)(2,((e,t)=>u(e,t)===e?t:e)),d=e=>e.startMillis>=e.endMillis,p=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return c(n,r)})),h=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return n<r?a.none():a.some(c(n,r))})),m=s,g=c,y=o,b=l,S=u,v=f,w=d,E=e=>!d(e),_=p,k=e=>r.millis(e.endMillis-e.startMillis),x=h,I=e=>c(e,Number.POSITIVE_INFINITY),T=e=>c(Number.NEGATIVE_INFINITY,e)},358659:(e,t,n)=>{n.r(t),n.d(t,{IntervalsTypeId:()=>b,empty:()=>v,end:()=>x,fromIterable:()=>w,intersect:()=>_,isNonEmpty:()=>T,lessThan:()=>I,make:()=>S,max:()=>O,start:()=>k,union:()=>E});var r=n(889133),i=n(154258),a=n(504491),s=n(295818),o=n(870529);const c=Symbol.for("effect/ScheduleIntervals"),l=e=>({[c]:c,intervals:e}),u=l(r.empty()),f=(0,i.dual)(2,((e,t)=>r.isNonEmpty(t.intervals)?r.isNonEmpty(e.intervals)?r.headNonEmpty(e.intervals).startMillis<r.headNonEmpty(t.intervals).startMillis?d(r.tailNonEmpty(e.intervals),t.intervals,r.headNonEmpty(e.intervals),r.empty()):d(e.intervals,r.tailNonEmpty(t.intervals),r.headNonEmpty(t.intervals),r.empty()):t:e)),d=(e,t,n,a)=>{let c=e,u=t,f=n,d=a;for(;r.isNonEmpty(c)||r.isNonEmpty(u);)if(!r.isNonEmpty(c)&&r.isNonEmpty(u))f.endMillis<r.headNonEmpty(u).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(u),u=r.tailNonEmpty(u),c=r.empty()):(f=s.make(f.startMillis,r.headNonEmpty(u).endMillis),u=r.tailNonEmpty(u),c=r.empty());else if(r.isNonEmpty(c)&&r.isEmpty(u))f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),u=r.empty(),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),u=r.empty(),c=r.tailNonEmpty(c));else{if(!r.isNonEmpty(c)||!r.isNonEmpty(u))throw new Error((0,o.getBugErrorMessage)("Intervals.unionLoop"));r.headNonEmpty(c).startMillis<r.headNonEmpty(u).startMillis?f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),c=r.tailNonEmpty(c)):f.endMillis<r.headNonEmpty(u).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(u),u=r.tailNonEmpty(u)):(f=s.make(f.startMillis,r.headNonEmpty(u).endMillis),u=r.tailNonEmpty(u))}return l((0,i.pipe)(d,r.prepend(f),r.reverse))},p=(0,i.dual)(2,((e,t)=>h(e.intervals,t.intervals,r.empty()))),h=(e,t,n)=>{let a=e,o=t,c=n;for(;r.isNonEmpty(a)&&r.isNonEmpty(o);){const e=(0,i.pipe)(r.headNonEmpty(a),s.intersect(r.headNonEmpty(o))),t=s.isEmpty(e)?c:(0,i.pipe)(c,r.prepend(e));(0,i.pipe)(r.headNonEmpty(a),s.lessThan(r.headNonEmpty(o)))?a=r.tailNonEmpty(a):o=r.tailNonEmpty(o),c=t}return l(r.reverse(c))},m=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).startMillis,g=(0,i.dual)(2,((e,t)=>m(e)<m(t))),y=(0,i.dual)(2,((e,t)=>g(e,t)?t:e)),b=c,S=l,v=u,w=e=>Array.from(e).reduce(((e,t)=>(0,i.pipe)(e,f(l(r.of(t))))),u),E=f,_=p,k=m,x=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).endMillis,I=g,T=e=>r.isNonEmpty(e.intervals),O=y},84221:(e,t,n)=>{n.r(t),n.d(t,{ControlledScheduler:()=>u,MixedScheduler:()=>o,PriorityBuckets:()=>s,SyncScheduler:()=>l,currentScheduler:()=>y,defaultScheduler:()=>c,defaultShouldYield:()=>d,make:()=>p,makeBatched:()=>h,makeMatrix:()=>f,timer:()=>m,timerBatched:()=>g,withScheduler:()=>b});var r=n(154258),i=n(744628),a=n(597081);class s{buckets=[];scheduleTask(e,t){let n,r;for(r=0;r<this.buckets.length&&this.buckets[r][0]<=t;r++)n=this.buckets[r];if(n)n[1].push(e);else{const n=[];for(let e=0;e<r;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=r;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class o{maxNextTickBeforeTimer;running=!1;tasks=new s;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let e=0;e<r.length;e++)r[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout((()=>this.starveInternal(0)),0):Promise.resolve(void 0).then((()=>this.starveInternal(e+1)))}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}const c=(0,i.globalValue)(Symbol.for("effect/Scheduler/defaultScheduler"),(()=>new o(2048)));class l{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}this.deferred=!0}}class u{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}step(){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}}const f=(...e)=>{const t=e.sort((([e],[t])=>e<t?-1:e>t?1:0));return{shouldYield(t){for(const n of e){const e=n[1].shouldYield(t);if(!1!==e)return e}return!1},scheduleTask(e,n){let r;for(const i of t){if(!(n>=i[0]))return(r??c).scheduleTask(e,n);r=i[1]}return(r??c).scheduleTask(e,n)}}},d=e=>e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority),p=(e,t=d)=>({scheduleTask:e,shouldYield:t}),h=(e,t=d)=>{let n=!1;const r=new s,i=()=>{const e=r.buckets;r.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]();0===r.buckets.length?n=!1:a()},a=()=>e(i);return p(((e,t)=>{r.scheduleTask(e,t),n||(n=!0,a())}),t)},m=(e,t=d)=>p((t=>setTimeout(t,e)),t),g=(e,t=d)=>h((t=>setTimeout(t,e)),t),y=(0,i.globalValue)(Symbol.for("effect/FiberRef/currentScheduler"),(()=>a.fiberRefUnsafeMake(c))),b=(0,r.dual)(2,((e,t)=>a.fiberRefLocally(e,y,t)))},823864:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>s,Scope:()=>o,ScopeTypeId:()=>a,addFinalizer:()=>c,addFinalizerExit:()=>l,close:()=>u,extend:()=>f,fork:()=>d,make:()=>h,use:()=>p});var r=n(597081),i=n(365519);const a=r.ScopeTypeId,s=r.CloseableScopeTypeId,o=i.scopeTag,c=r.scopeAddFinalizer,l=r.scopeAddFinalizerExit,u=r.scopeClose,f=i.scopeExtend,d=r.scopeFork,p=i.scopeUse,h=i.scopeMake},769512:(e,t,n)=>{n.r(t),n.d(t,{add:()=>Z,difference:()=>Q,empty:()=>H,every:()=>X,filter:()=>ee,flatMap:()=>te,forEach:()=>ne,fromIterable:()=>K,getEquivalence:()=>he,has:()=>re,intersection:()=>ie,isSortedSet:()=>J,isSubset:()=>ae,make:()=>Y,map:()=>se,partition:()=>oe,remove:()=>ce,size:()=>le,some:()=>ue,toggle:()=>fe,union:()=>de,values:()=>pe});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(709322),c=n(125105),l=(n(889133),n(504491)),u=n(342072);const f={Forward:0,Backward:1};class d{self;stack;direction;count=0;constructor(e,t,n){this.self=e,this.stack=t,this.direction=n}clone(){return new d(this.self,this.stack.slice(),this.direction)}reversed(){return new d(this.self,this.stack.slice(),this.direction===f.Forward?f.Backward:f.Forward)}next(){const e=this.entry;switch(this.count++,this.direction===f.Forward?this.moveNext():this.movePrev(),e._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:e.value}}}get key(){return this.stack.length>0?l.some(this.stack[this.stack.length-1].key):l.none()}get value(){return this.stack.length>0?l.some(this.stack[this.stack.length-1].value):l.none()}get entry(){return l.map(u.last(this.stack),(e=>[e.key,e.value]))}get index(){let e=0;const t=this.stack;if(0===t.length){const e=this.self._root;return null!=e?e.count:0}null!=t[t.length-1].left&&(e=t[t.length-1].left.count);for(let n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,null!=t[n].left&&(e+=t[n].left.count));return e}moveNext(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t.right)for(t=t.right;null!=t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}get hasNext(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].right)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}movePrev(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t&&null!=t.left)for(t=t.left;null!=t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}get hasPrev(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].left)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}}const p=0,h=1,m=({color:e,count:t,key:n,left:r,right:i,value:a})=>({color:e,key:n,value:a,left:r,right:i,count:t});function g(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}const y=({count:e,key:t,left:n,right:r,value:i},a)=>({color:a,key:t,value:i,left:n,right:r,count:e}),b=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};var S=n(614028);const v="effect/RedBlackTree",w=Symbol.for(v),E={[w]:{_Key:e=>e,_Value:e=>e},[a.symbol](){let e=a.hash(v);for(const t of this)e^=(0,i.pipe)(a.hash(t[0]),a.combine(a.hash(t[1])));return a.cached(this,e)},[r.symbol](e){if(k(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;const t=Array.from(e);return Array.from(this).every(((e,n)=>{const i=t[n];return r.equals(e[0],i[0])&&r.equals(e[1],i[1])}))}return!1},[Symbol.iterator](){const e=[];let t=this._root;for(;null!=t;)e.push(t),t=t.left;return new d(this,e,f.Forward)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},_=(e,t)=>{const n=Object.create(E);return n._ord=e,n._root=t,n},k=e=>(0,c.hasProperty)(e,w),x=e=>_(e,void 0),I=(0,i.dual)(2,((e,t)=>{let n=x(t);for(const[r,i]of e)n=A(n,r,i);return n})),T=(0,i.dual)(2,((e,t)=>{const n=e._ord;let i=e._root;for(;void 0!==i;){const e=n(t,i.key);if(r.equals(t,i.key))return l.some(i.value);i=e<=0?i.left:i.right}return l.none()})),O=(0,i.dual)(2,((e,t)=>l.isSome(T(e,t)))),A=(0,i.dual)(3,((e,t,n)=>{const r=e._ord;let i=e._root;const a=[],s=[];for(;null!=i;){const e=r(t,i.key);a.push(i),s.push(e),i=e<=0?i.left:i.right}a.push({color:p,key:t,value:n,left:void 0,right:void 0,count:1});for(let o=a.length-2;o>=0;--o){const e=a[o];s[o]<=0?a[o]={color:e.color,key:e.key,value:e.value,left:a[o+1],right:e.right,count:e.count+1}:a[o]={color:e.color,key:e.key,value:e.value,left:e.left,right:a[o+1],count:e.count+1}}for(let o=a.length-1;o>1;--o){const e=a[o-1],t=a[o];if(e.color===h||t.color===h)break;const n=a[o-2];if(n.left===e)if(e.left===t){const r=n.right;if(!r||r.color!==p){if(n.color=p,n.left=e.right,e.color=h,e.right=n,a[o-2]=e,a[o-1]=t,b(n),b(e),o>=3){const t=a[o-3];t.left===n?t.left=e:t.right=e}break}e.color=h,n.right=y(r,h),n.color=p,o-=1}else{const r=n.right;if(!r||r.color!==p){if(e.right=t.left,n.color=p,n.left=t.right,t.color=h,t.left=e,t.right=n,a[o-2]=t,a[o-1]=e,b(n),b(e),b(t),o>=3){const e=a[o-3];e.left===n?e.left=t:e.right=t}break}e.color=h,n.right=y(r,h),n.color=p,o-=1}else if(e.right===t){const r=n.left;if(!r||r.color!==p){if(n.color=p,n.right=e.left,e.color=h,e.left=n,a[o-2]=e,a[o-1]=t,b(n),b(e),o>=3){const t=a[o-3];t.right===n?t.right=e:t.left=e}break}e.color=h,n.left=y(r,h),n.color=p,o-=1}else{const r=n.left;if(!r||r.color!==p){if(e.left=t.right,n.color=p,n.right=t.left,t.color=h,t.right=e,t.left=n,a[o-2]=t,a[o-1]=e,b(n),b(e),b(t),o>=3){const e=a[o-3];e.right===n?e.right=t:e.left=t}break}e.color=h,n.left=y(r,h),n.color=p,o-=1}}return a[0].color=h,_(e._ord,a[0])})),N=(e,t)=>{const n=e[Symbol.iterator]();let r=0;return{[Symbol.iterator]:()=>N(e,t),next:()=>{r++;const e=n.key;switch(t===f.Forward?n.moveNext():n.movePrev(),e._tag){case"None":return{done:!0,value:r};case"Some":return{done:!1,value:e.value}}}}},M=(0,i.dual)(2,((e,t)=>{const n=e._root;void 0!==n&&R(n,((e,n)=>(t(e,n),l.none())))})),C=(0,i.dual)(2,((e,t)=>{if(!O(e,t))return e;const n=e._ord,i=n;let a=e._root;const s=[];for(;void 0!==a;){const e=i(t,a.key);s.push(a),a=r.equals(t,a.key)?void 0:e<=0?a.left:a.right}if(0===s.length)return e;const o=new Array(s.length);let c=s[s.length-1];o[o.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let r=s.length-2;r>=0;--r)c=s[r],c.left===s[r+1]?o[r]={color:c.color,key:c.key,value:c.value,left:o[r+1],right:c.right,count:c.count}:o[r]={color:c.color,key:c.key,value:c.value,left:c.left,right:o[r+1],count:c.count};if(c=o[o.length-1],void 0!==c.left&&void 0!==c.right){const e=o.length;for(c=c.left;null!=c.right;)o.push(c),c=c.right;const t=o[e-1];o.push({color:c.color,key:t.key,value:t.value,left:c.left,right:c.right,count:c.count}),o[e-1].key=c.key,o[e-1].value=c.value;for(let n=o.length-2;n>=e;--n)c=o[n],o[n]={color:c.color,key:c.key,value:c.value,left:c.left,right:o[n+1],count:c.count};o[e-1].left=o[e]}if(c=o[o.length-1],c.color===p){const e=o[o.length-2];e.left===c?e.left=void 0:e.right===c&&(e.right=void 0),o.pop();for(let t=0;t<o.length;++t)o[t].count--;return _(n,o[0])}if(void 0!==c.left||void 0!==c.right){void 0!==c.left?g(c,c.left):void 0!==c.right&&g(c,c.right),c.color=h;for(let e=0;e<o.length-1;++e)o[e].count--;return _(n,o[0])}if(1===o.length)return _(n,void 0);{for(let t=0;t<o.length;++t)o[t].count--;const e=o[o.length-2];F(o),e.left===c?e.left=void 0:e.right=void 0}return _(n,o[0])})),R=(e,t)=>{let n,r=e,i=!1;for(;!i;)if(null!=r)n=S.make(r,n),r=r.left;else if(null!=n){const e=t(n.value.key,n.value.value);if(l.isSome(e))return e;r=n.value.right,n=n.previous}else i=!0;return l.none()},F=e=>{let t,n,r,i;for(let a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void(t.color=h);if(n=e[a-1],n.left===t){if(r=n.right,void 0!==r&&void 0!==r.right&&r.right.color===p){if(r=n.right=m(r),i=r.right=m(r.right),n.right=r.left,r.left=n,r.right=i,r.color=n.color,t.color=h,n.color=h,i.color=h,b(n),b(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.left&&r.left.color===p){if(r=n.right=m(r),i=r.left=m(r.left),n.right=i.left,r.left=i.right,i.left=n,i.right=r,i.color=n.color,n.color=h,r.color=h,t.color=h,b(n),b(r),b(i),a>1){const t=e[a-2];t.left===n?t.left=i:t.right=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===h){if(n.color===p)return n.color=h,void(n.right=y(r,p));n.right=y(r,p);continue}if(void 0!==r){if(r=m(r),n.right=r.left,r.left=n,r.color=n.color,n.color=p,b(n),b(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}else{if(r=n.left,void 0!==r&&void 0!==r.left&&r.left.color===p){if(r=n.left=m(r),i=r.left=m(r.left),n.left=r.right,r.right=n,r.left=i,r.color=n.color,t.color=h,n.color=h,i.color=h,b(n),b(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.right&&r.right.color===p){if(r=n.left=m(r),i=r.right=m(r.right),n.left=i.right,r.right=i.left,i.right=n,i.left=r,i.color=n.color,n.color=h,r.color=h,t.color=h,b(n),b(r),b(i),a>1){const t=e[a-2];t.right===n?t.right=i:t.left=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===h){if(n.color===p)return n.color=h,void(n.left=y(r,p));n.left=y(r,p);continue}if(void 0!==r){if(r=m(r),n.left=r.right,r.right=n,r.color=n.color,n.color=p,b(n),b(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}},L=x,P=I,D=e=>e._ord,U=O,j=A,q=e=>N(e,f.Forward),W=M,B=C,z=e=>e._root?.count??0,$=Symbol.for("effect/SortedSet"),V={[$]:{_A:e=>e},[a.symbol](){return(0,i.pipe)(a.hash(this.keyTree),a.combine(a.hash($)),a.cached(this))},[r.symbol](e){return J(e)&&r.equals(this.keyTree,e.keyTree)},[Symbol.iterator](){return q(this.keyTree)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},G=e=>{const t=Object.create(V);return t.keyTree=e,t},J=e=>(0,c.hasProperty)(e,$),H=e=>G(L(e)),K=i.dual(2,((e,t)=>G(P(Array.from(e).map((e=>[e,!0])),t)))),Y=e=>(...t)=>K(t,e),Z=i.dual(2,((e,t)=>U(e.keyTree,t)?e:G(j(e.keyTree,t,!0)))),Q=i.dual(2,((e,t)=>{let n=e;for(const r of t)n=ce(n,r);return n})),X=i.dual(2,((e,t)=>{for(const n of e)if(!t(n))return!1;return!0})),ee=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=H(n);for(const i of e)t(i)&&(r=Z(r,i));return r})),te=i.dual(3,((e,t,n)=>{let r=H(t);return ne(e,(e=>{for(const t of n(e))r=Z(r,t)})),r})),ne=i.dual(2,((e,t)=>W(e.keyTree,t))),re=i.dual(2,((e,t)=>U(e.keyTree,t))),ie=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=H(n);for(const i of t)re(e,i)&&(r=Z(r,i));return r})),ae=i.dual(2,((e,t)=>X(e,(e=>re(t,e))))),se=i.dual(3,((e,t,n)=>{let r=H(t);return ne(e,(e=>{const t=n(e);re(r,t)||(r=Z(r,t))})),r})),oe=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=H(n),i=H(n);for(const a of e)t(a)?r=Z(r,a):i=Z(i,a);return[i,r]})),ce=i.dual(2,((e,t)=>G(B(e.keyTree,t)))),le=e=>z(e.keyTree),ue=i.dual(2,((e,t)=>{for(const n of e)if(t(n))return!0;return!1})),fe=i.dual(2,((e,t)=>re(e,t)?ce(e,t):Z(e,t))),de=i.dual(2,((e,t)=>{const n=D(e.keyTree);let r=H(n);for(const i of e)r=Z(i)(r);for(const i of t)r=Z(i)(r);return r})),pe=e=>q(e.keyTree),he=()=>(e,t)=>ae(e,t)&&ae(t,e)},263247:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>u,Order:()=>f,at:()=>C,camelToSnake:()=>re,capitalize:()=>g,charAt:()=>R,charCodeAt:()=>N,codePointAt:()=>F,concat:()=>p,empty:()=>d,endsWith:()=>A,includes:()=>T,indexOf:()=>L,isEmpty:()=>_,isNonEmpty:()=>k,isString:()=>l,kebabToSnake:()=>ae,lastIndexOf:()=>P,length:()=>x,linesIterator:()=>Y,linesWithSeparators:()=>Z,localeCompare:()=>D,match:()=>U,matchAll:()=>j,normalize:()=>q,padEnd:()=>W,padStart:()=>B,pascalToSnake:()=>ie,repeat:()=>z,replace:()=>b,replaceAll:()=>$,search:()=>V,slice:()=>E,snakeToCamel:()=>ee,snakeToKebab:()=>ne,snakeToPascal:()=>te,split:()=>I,startsWith:()=>O,stripMargin:()=>X,stripMarginWith:()=>Q,substring:()=>M,takeLeft:()=>H,takeRight:()=>K,toLocaleLowerCase:()=>G,toLocaleUpperCase:()=>J,toLowerCase:()=>m,toUpperCase:()=>h,trim:()=>S,trimEnd:()=>w,trimStart:()=>v,uncapitalize:()=>y});var r=n(84108),i=n(154258),a=n(409161),s=n(962047),o=n(504491),c=n(880308);const l=n(125105).isString,u=r.string,f=c.string,d="",p=(0,i.dual)(2,((e,t)=>e+t)),h=e=>e.toUpperCase(),m=e=>e.toLowerCase(),g=e=>0===e.length?e:h(e[0])+e.slice(1),y=e=>0===e.length?e:m(e[0])+e.slice(1),b=(e,t)=>n=>n.replace(e,t),S=e=>e.trim(),v=e=>e.trimStart(),w=e=>e.trimEnd(),E=(e,t)=>n=>n.slice(e,t),_=e=>0===e.length,k=e=>e.length>0,x=e=>e.length,I=(0,i.dual)(2,((e,t)=>{const n=e.split(t);return a.isNonEmptyArray(n)?n:[e]})),T=(e,t)=>n=>n.includes(e,t),O=(e,t)=>n=>n.startsWith(e,t),A=(e,t)=>n=>n.endsWith(e,t),N=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.charCodeAt(t)),(e=>!isNaN(e))))),M=(e,t)=>n=>n.substring(e,t),C=(0,i.dual)(2,((e,t)=>o.fromNullable(e.at(t)))),R=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.charAt(t)),k))),F=(0,i.dual)(2,((e,t)=>o.fromNullable(e.codePointAt(t)))),L=e=>t=>o.filter(o.some(t.indexOf(e)),s.greaterThanOrEqualTo(0)),P=e=>t=>o.filter(o.some(t.lastIndexOf(e)),s.greaterThanOrEqualTo(0)),D=(e,t,n)=>r=>s.sign(r.localeCompare(e,t,n)),U=e=>t=>o.fromNullable(t.match(e)),j=e=>t=>t.matchAll(e),q=e=>t=>t.normalize(e),W=(e,t)=>n=>n.padEnd(e,t),B=(e,t)=>n=>n.padStart(e,t),z=e=>t=>t.repeat(e),$=(e,t)=>n=>n.replaceAll(e,t),V=(0,i.dual)(2,((e,t)=>o.filter(o.some(e.search(t)),s.greaterThanOrEqualTo(0)))),G=e=>t=>t.toLocaleLowerCase(e),J=e=>t=>t.toLocaleUpperCase(e),H=(0,i.dual)(2,((e,t)=>e.slice(0,Math.max(t,0)))),K=(0,i.dual)(2,((e,t)=>e.slice(Math.max(0,e.length-Math.floor(t)),1/0))),Y=e=>le(e,!0),Z=e=>le(e,!1),Q=(0,i.dual)(2,((e,t)=>{let n="";for(const r of Z(e)){let e=0;for(;e<r.length&&r.charAt(e)<=" ";)e+=1;n+=e<r.length&&r.charAt(e)===t?r.substring(e+1):r}return n})),X=e=>Q(e,"|"),ee=e=>{let t=e[0];for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},te=e=>{let t=e[0].toUpperCase();for(let n=1;n<e.length;n++)t+="_"===e[n]?e[++n].toUpperCase():e[n];return t},ne=e=>e.replace(/_/g,"-"),re=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),ie=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),ae=e=>e.replace(/-/g,"_");class se{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};const e=this.index;for(;!this.done&&!oe(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){const e=this.s[this.index];this.index=this.index+1,!this.done&&ce(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new se(this.s,this.stripped)}get done(){return this.index>=this.length}}const oe=e=>{const t=e.charCodeAt(0);return 13===t||10===t},ce=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),le=(e,t)=>new se(e,t)},494011:(e,t,n)=>{n.r(t),n.d(t,{ParentSpan:()=>s,Tracer:()=>o,TracerTypeId:()=>a,externalSpan:()=>l,make:()=>c,tracerWith:()=>u});var r=n(130949),i=n(460011);const a=i.TracerTypeId,s=i.spanTag,o=i.tracerTag,c=i.make,l=i.externalSpan,u=r.tracerWith},194514:(e,t,n)=>{n.r(t),n.d(t,{appendElement:()=>g,at:()=>y,getEquivalence:()=>h,getFirst:()=>c,getOrder:()=>m,getSecond:()=>l,isTupleOf:()=>s.isTupleOf,isTupleOfAtLeast:()=>s.isTupleOfAtLeast,make:()=>o,mapBoth:()=>u,mapFirst:()=>f,mapSecond:()=>d,swap:()=>p});var r=n(84108),i=n(154258),a=n(880308),s=n(125105);const o=(...e)=>e,c=e=>e[0],l=e=>e[1],u=(0,i.dual)(2,((e,{onFirst:t,onSecond:n})=>[t(e[0]),n(e[1])])),f=(0,i.dual)(2,((e,t)=>[t(e[0]),e[1]])),d=(0,i.dual)(2,((e,t)=>[e[0],t(e[1])])),p=e=>[e[1],e[0]],h=r.tuple,m=a.tuple,g=(0,i.dual)(2,((e,t)=>[...e,t])),y=(0,i.dual)(2,((e,t)=>e[t]))},977721:(e,t,n)=>{n.r(t),n.d(t,{GenKindImpl:()=>l,GenKindTypeId:()=>o,PCGRandom:()=>p,SingleShotGen:()=>u,YieldWrap:()=>g,YieldWrapTypeId:()=>m,adapter:()=>d,internalCall:()=>v,isGenKind:()=>c,makeGenKind:()=>f,structuralRegion:()=>S,structuralRegionState:()=>b,yieldWrapGet:()=>y});var r=n(154258),i=n(744628),a=n(870529),s=n(125105);const o=Symbol.for("effect/Gen/GenKind"),c=e=>(0,s.isObject)(e)&&o in e;class l{value;constructor(e){this.value=e}get _F(){return r.identity}get _R(){return e=>e}get _O(){return e=>e}get _E(){return e=>e}[o]=o;[Symbol.iterator](){return new u(this)}}class u{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new u(this.self)}}const f=e=>new l(e),d=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new l(e)};class p{_state;constructor(e,t,n,r){return(0,s.isNullable)(t)&&(0,s.isNullable)(e)?(t=4294967295*Math.random()>>>0,e=0):(0,s.isNullable)(t)&&(t=e,e=0),(0,s.isNullable)(r)&&(0,s.isNullable)(n)?(r=this._state?this._state[3]:4150755663,n=this._state?this._state[2]:335903614):(0,s.isNullable)(r)&&(r=n,n=0),this._state=new Int32Array([0,0,n>>>0,(1|(r||0))>>>0]),this._next(),h(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(0===((e>>>=0)&e-1))return this._next()&e-1;let t=0;const n=(-e>>>0)%e>>>0;for(t=this._next();t<n;t=this._next());return t%e}number(){return(134217728*(1*(67108863&this._next()))+1*(134217727&this._next()))/9007199254740992}_next(){const e=this._state[0]>>>0,t=this._state[1]>>>0;!function(e,t,n,r,i){let a=(n>>>16)*(65535&i)>>>0,s=(65535&n)*(i>>>16)>>>0,o=(65535&n)*(65535&i)>>>0,c=(n>>>16)*(i>>>16)+((s>>>16)+(a>>>16))>>>0;s=s<<16>>>0,o=o+s>>>0,o>>>0<s>>>0&&(c=c+1>>>0);a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(c=c+1>>>0);c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,i)>>>0,e[0]=c,e[1]=o}(this._state,e,t,1481765933,1284865837),h(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=e>>>18,r=(t>>>18|e<<14)>>>0;n=(n^e)>>>0,r=(r^t)>>>0;const i=(r>>>27|n<<5)>>>0,a=e>>>27;return(i>>>a|i<<((-a>>>0&31)>>>0))>>>0}}function h(e,t,n,r,i){let a=t+r>>>0;const s=n+i>>>0;s>>>0<n>>>0&&(a=a+1|0),e[0]=a,e[1]=s}const m=Symbol.for("effect/Utils/YieldWrap");class g{#e;constructor(e){this.#e=e}[m](){return this.#e}}function y(e){if("object"===typeof e&&null!==e&&m in e)return e[m]();throw new Error((0,a.getBugErrorMessage)("yieldWrapGet"))}const b=(0,i.globalValue)("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),S=(e,t)=>{const n=b.enabled,r=b.tester;b.enabled=!0,t&&(b.tester=t);try{return e()}finally{b.enabled=n,b.tester=r}},v=(e=>{const t={[e]:e=>e()};return function(n){return t[e](n)}})("effect_internal_function")},409161:(e,t,n)=>{n.r(t),n.d(t,{isNonEmptyArray:()=>r});const r=e=>e.length>0},100726:(e,t,n)=>{n.r(t),n.d(t,{EntryTypeId:()=>v,MapRequestResolversReducer:()=>h,RequestBlockParallelTypeId:()=>x,SequentialCollectionTypeId:()=>L,empty:()=>u,flatten:()=>y,isEntry:()=>_,makeEntry:()=>k,mapRequestResolvers:()=>m,par:()=>f,parallelCollectionAdd:()=>N,parallelCollectionCombine:()=>M,parallelCollectionEmpty:()=>O,parallelCollectionIsEmpty:()=>C,parallelCollectionKeys:()=>R,parallelCollectionMake:()=>A,parallelCollectionToSequentialCollection:()=>F,reduce:()=>g,seq:()=>d,sequentialCollectionCombine:()=>j,sequentialCollectionIsEmpty:()=>q,sequentialCollectionKeys:()=>W,sequentialCollectionMake:()=>U,sequentialCollectionToChunk:()=>B,single:()=>p});var r=n(889133),i=n(411123),a=n(382300),s=n(398826),o=n(287258),c=n(504491),l=n(125105);const u={_tag:"Empty"},f=(e,t)=>({_tag:"Par",left:e,right:t}),d=(e,t)=>({_tag:"Seq",left:e,right:t}),p=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t}),h=e=>({emptyCase:()=>u,parCase:(e,t)=>f(e,t),seqCase:(e,t)=>d(e,t),singleCase:(t,n)=>p(e(t),n)}),m=(e,t)=>g(e,h(t)),g=(e,t)=>{let n=o.of(e),r=o.empty();for(;o.isCons(n);){const e=n.head;switch(e._tag){case"Empty":r=o.cons(i.right(t.emptyCase()),r),n=n.tail;break;case"Par":r=o.cons(i.left({_tag:"ParCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Seq":r=o.cons(i.left({_tag:"SeqCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Single":{const a=t.singleCase(e.dataSource,e.blockedRequest);r=o.cons(i.right(a),r),n=n.tail;break}}}const a=o.reduce(r,o.empty(),((e,n)=>{switch(n._tag){case"Left":{const r=o.unsafeHead(e),i=o.unsafeHead(o.unsafeTail(e)),a=o.unsafeTail(o.unsafeTail(e));switch(n.left._tag){case"ParCase":return o.cons(t.parCase(r,i),a);case"SeqCase":return o.cons(t.seqCase(r,i),a)}}case"Right":return o.cons(n.right,e)}}));if(o.isNil(a))throw new Error("BUG: BlockedRequests.reduce - please report an issue at https://github.com/Effect-TS/effect/issues");return a.head},y=e=>{let t=o.of(e),n=o.empty();for(;;){const[e,r]=o.reduce(t,[O(),o.empty()],(([e,t],n)=>{const[r,i]=b(n);return[M(e,r),o.appendAll(t,i)]}));if(n=S(n,e),o.isNil(r))return o.reverse(n);t=r}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},b=e=>{let t=e,n=O(),r=o.empty(),i=o.empty();for(;;)switch(t._tag){case"Empty":if(o.isNil(r))return[n,i];t=r.head,r=r.tail;break;case"Par":r=o.cons(t.right,r),t=t.left;break;case"Seq":{const e=t.left,n=t.right;switch(e._tag){case"Empty":t=n;break;case"Par":{const r=e.left,i=e.right;t=f(d(r,n),d(i,n));break}case"Seq":{const r=e.left,i=e.right;t=d(r,d(i,n));break}case"Single":t=e,i=o.cons(n,i)}break}case"Single":if(n=N(n,t),o.isNil(r))return[n,i];t=r.head,r=r.tail}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},S=(e,t)=>{if(o.isNil(e))return o.of(F(t));if(C(t))return e;const n=W(e.head),r=R(t);return 1===n.length&&1===r.length&&a.equals(n[0],r[0])?o.cons(j(e.head,F(t)),e.tail):o.cons(F(t),e)},v=Symbol.for("effect/RequestBlock/Entry");class w{request;result;listeners;ownerId;state;[v]=E;constructor(e,t,n,r,i){this.request=e,this.result=t,this.listeners=n,this.ownerId=r,this.state=i}}const E={_R:e=>e},_=e=>(0,l.hasProperty)(e,v),k=e=>new w(e.request,e.result,e.listeners,e.ownerId,e.state),x=Symbol.for("effect/RequestBlock/RequestBlockParallel"),I={_R:e=>e};class T{map;[x]=I;constructor(e){this.map=e}}const O=()=>new T(s.empty()),A=(e,t)=>new T(s.make([e,r.of(t)])),N=(e,t)=>new T(s.modifyAt(e.map,t.dataSource,(e=>c.orElseSome(c.map(e,r.append(t.blockedRequest)),(()=>r.of(t.blockedRequest)))))),M=(e,t)=>new T(s.reduce(e.map,t.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>t,onSome:e=>r.appendAll(t,e)}))))),C=e=>s.isEmpty(e.map),R=e=>Array.from(s.keys(e.map)),F=e=>U(s.map(e.map,(e=>r.of(e)))),L=Symbol.for("effect/RequestBlock/RequestBlockSequential"),P={_R:e=>e};class D{map;[L]=P;constructor(e){this.map=e}}const U=e=>new D(e),j=(e,t)=>new D(s.reduce(t.map,e.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>r.empty(),onSome:e=>r.appendAll(e,t)}))))),q=e=>s.isEmpty(e.map),W=e=>Array.from(s.keys(e.map)),B=e=>Array.from(e.map)},515718:(e,t,n)=>{n.r(t),n.d(t,{CacheTypeId:()=>C,MapKeyTypeId:()=>k,complete:()=>w,initialCacheState:()=>M,isMapKey:()=>T,make:()=>D,makeCacheState:()=>N,makeCacheStats:()=>F,makeEntryStats:()=>L,makeKeySet:()=>A,makeMapKey:()=>I,makeWith:()=>U,pending:()=>E,refreshing:()=>_,unsafeMakeWith:()=>j});var r=n(499779),i=n(38429),a=n(860118),s=n(411123),o=n(382300),c=n(676966),l=n(154258),u=n(353370),f=n(806874),d=n(350043),p=n(847857),h=n(504491),m=n(125105),g=n(694375),y=n(597081),b=n(305190),S=n(646699),v=n(365519);const w=(e,t,n,r)=>b.struct({_tag:"Complete",key:e,exit:t,entryStats:n,timeToLiveMillis:r}),E=(e,t)=>b.struct({_tag:"Pending",key:e,deferred:t}),_=(e,t)=>b.struct({_tag:"Refreshing",deferred:e,complete:t}),k=Symbol.for("effect/Cache/MapKey");class x{current;[k]=k;previous=void 0;next=void 0;constructor(e){this.current=e}[u.symbol](){return(0,l.pipe)(u.hash(this.current),u.combine(u.hash(this.previous)),u.combine(u.hash(this.next)),u.cached(this))}[o.symbol](e){return this===e||T(e)&&o.equals(this.current,e.current)&&o.equals(this.previous,e.previous)&&o.equals(this.next,e.next)}}const I=e=>new x(e),T=e=>(0,m.hasProperty)(e,k);class O{head=void 0;tail=void 0;add(e){if(e!==this.tail)if(void 0===this.tail)this.head=e,this.tail=e;else{const t=e.previous,n=e.next;void 0!==n&&(e.next=void 0,void 0!==t?(t.next=n,n.previous=t):(this.head=n,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}remove(){const e=this.head;if(void 0!==e){const t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}const A=()=>new O,N=(e,t,n,r,i,a)=>({map:e,keys:t,accesses:n,updating:r,hits:i,misses:a}),M=()=>N(f.empty(),A(),d.unbounded(),p.make(!1),0,0),C=Symbol.for("effect/Cache"),R={_Key:e=>e,_Error:e=>e,_Value:e=>e},F=e=>e,L=e=>({loadedMillis:e});class P{capacity;context;fiberId;lookup;timeToLive;[C]=R;cacheState;constructor(e,t,n,r,i){this.capacity=e,this.context=t,this.fiberId=n,this.lookup=r,this.timeToLive=i,this.cacheState=M()}get(e){return y.map(this.getEither(e),s.merge)}get cacheStats(){return y.sync((()=>F({hits:this.cacheState.hits,misses:this.cacheState.misses,size:f.size(this.cacheState.map)})))}getOption(e){return y.suspend((()=>h.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=I(e);return this.trackAccess(t),this.trackMiss(),y.succeed(h.none())},onSome:e=>this.resolveMapValue(e)})))}getOptionComplete(e){return y.suspend((()=>h.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=I(e);return this.trackAccess(t),this.trackMiss(),y.succeed(h.none())},onSome:e=>this.resolveMapValue(e,!0)})))}contains(e){return y.sync((()=>f.has(this.cacheState.map,e)))}entryStats(e){return y.sync((()=>{const t=f.get(this.cacheState.map,e);if(h.isSome(t))switch(t.value._tag){case"Complete":{const e=t.value.entryStats.loadedMillis;return h.some(L(e))}case"Pending":return h.none();case"Refreshing":{const e=t.value.complete.entryStats.loadedMillis;return h.some(L(e))}}return h.none()}))}getEither(e){return y.suspend((()=>{const t=e;let n,r,a=h.getOrUndefined(f.get(this.cacheState.map,t));return void 0===a&&(r=i.unsafeMake(this.fiberId),n=I(t),f.has(this.cacheState.map,t)?a=h.getOrUndefined(f.get(this.cacheState.map,t)):f.set(this.cacheState.map,t,E(n,r))),void 0===a?(this.trackAccess(n),this.trackMiss(),y.map(this.lookupValueOf(e,r),s.right)):y.flatMap(this.resolveMapValue(a),h.match({onNone:()=>this.getEither(e),onSome:e=>y.succeed(s.left(e))}))}))}invalidate(e){return y.sync((()=>{f.remove(this.cacheState.map,e)}))}invalidateWhen(e,t){return y.sync((()=>{const n=f.get(this.cacheState.map,e);h.isSome(n)&&"Complete"===n.value._tag&&"Success"===n.value.exit._tag&&t(n.value.exit.value)&&f.remove(this.cacheState.map,e)}))}get invalidateAll(){return y.sync((()=>{this.cacheState.map=f.empty()}))}refresh(e){return g.clockWith((t=>y.suspend((()=>{const n=e,r=i.unsafeMake(this.fiberId);let a=h.getOrUndefined(f.get(this.cacheState.map,n));if(void 0===a&&(f.has(this.cacheState.map,n)?a=h.getOrUndefined(f.get(this.cacheState.map,n)):f.set(this.cacheState.map,n,E(I(n),r))),void 0===a)return y.asVoid(this.lookupValueOf(e,r));switch(a._tag){case"Complete":if(this.hasExpired(t,a.timeToLiveMillis)){const t=h.getOrUndefined(f.get(this.cacheState.map,n));return o.equals(t,a)&&f.remove(this.cacheState.map,n),y.asVoid(this.get(e))}return(0,l.pipe)(this.lookupValueOf(e,r),g.when((()=>{const e=h.getOrUndefined(f.get(this.cacheState.map,n));if(o.equals(e,a)){const e=_(r,a);return f.set(this.cacheState.map,n,e),!0}return!1})),y.asVoid);case"Pending":case"Refreshing":return i.await(a.deferred)}}))))}set(e,t){return g.clockWith((n=>y.sync((()=>{const r=n.unsafeCurrentTimeMillis(),i=e,s=c.succeed(t),o=w(I(i),s,L(r),r+a.toMillis(a.decode(this.timeToLive(s))));f.set(this.cacheState.map,i,o)}))))}get size(){return y.sync((()=>f.size(this.cacheState.map)))}get values(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e}))}get entries(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e}))}get keys(){return y.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e}))}resolveMapValue(e,t=!1){return g.clockWith((n=>{switch(e._tag){case"Complete":return this.trackAccess(e.key),this.hasExpired(n,e.timeToLiveMillis)?(f.remove(this.cacheState.map,e.key.current),y.succeed(h.none())):(this.trackHit(),y.map(e.exit,h.some));case"Pending":return this.trackAccess(e.key),this.trackHit(),t?y.succeed(h.none()):y.map(i.await(e.deferred),h.some);case"Refreshing":return this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(n,e.complete.timeToLiveMillis)?t?y.succeed(h.none()):y.map(i.await(e.deferred),h.some):y.map(e.complete.exit,h.some)}}))}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(d.offer(this.cacheState.accesses,e),p.compareAndSet(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){const t=d.poll(this.cacheState.accesses,d.EmptyMutableQueue);t===d.EmptyMutableQueue?e=!1:this.cacheState.keys.add(t)}let t=f.size(this.cacheState.map);for(e=t>this.capacity;e;){const n=this.cacheState.keys.remove();void 0!==n?f.has(this.cacheState.map,n.current)&&(f.remove(this.cacheState.map,n.current),t-=1,e=t>this.capacity):e=!1}p.set(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return g.clockWith((n=>y.suspend((()=>{const r=e;return(0,l.pipe)(this.lookup(e),y.provideContext(this.context),y.exit,y.flatMap((e=>{const s=n.unsafeCurrentTimeMillis(),o=L(s),c=w(I(r),e,o,s+a.toMillis(a.decode(this.timeToLive(e))));return f.set(this.cacheState.map,r,c),y.zipRight(i.done(t,e),e)})),y.onInterrupt((()=>y.zipRight(i.interrupt(t),y.sync((()=>{f.remove(this.cacheState.map,r)}))))))}))))}}const D=e=>{const t=a.decode(e.timeToLive);return U({capacity:e.capacity,lookup:e.lookup,timeToLive:()=>t})},U=e=>y.map(v.all([y.context(),y.fiberId]),(([t,n])=>new P(e.capacity,t,n,e.lookup,(t=>a.decode(e.timeToLive(t)))))),j=(e,t,n)=>new P(e,r.empty(),S.none,t,(e=>a.decode(n(e))))},240834:(e,t,n)=>{n.r(t),n.d(t,{CauseTypeId:()=>_,andThen:()=>ce,as:()=>ie,contains:()=>le,defects:()=>V,die:()=>T,dieOption:()=>K,electFailures:()=>ne,empty:()=>x,fail:()=>I,failureOption:()=>J,failureOrCause:()=>H,failures:()=>$,filter:()=>he,find:()=>pe,flatMap:()=>se,flatten:()=>oe,flipCauseOption:()=>Y,interrupt:()=>O,interruptOption:()=>Z,interruptors:()=>G,isCause:()=>M,isDie:()=>W,isDieType:()=>F,isEmpty:()=>j,isEmptyType:()=>C,isFailType:()=>R,isFailure:()=>q,isInterruptType:()=>L,isInterrupted:()=>B,isInterruptedOnly:()=>z,isParallelType:()=>D,isSequentialType:()=>P,keepDefects:()=>Q,keepDefectsAndElectFailures:()=>X,linearize:()=>ee,map:()=>ae,match:()=>we,parallel:()=>A,pretty:()=>ke,prettyErrorMessage:()=>Te,prettyErrors:()=>Ce,reduce:()=>Ee,reduceWithContext:()=>_e,sequential:()=>N,size:()=>U,spanToTrace:()=>Ae,stripFailures:()=>te,stripSomeDefects:()=>re});var r=n(342072),i=n(889133),a=n(411123),s=n(382300),o=n(154258),c=n(744628),l=n(353370),u=n(895868),f=n(58536),d=n(504491),p=n(709322),h=n(125105),m=n(870529);const g="Die",y="Empty",b="Fail",S="Interrupt",v="Parallel",w="Sequential",E="effect/Cause",_=Symbol.for(E),k={[_]:{_E:e=>e},[l.symbol](){return(0,o.pipe)(l.hash(E),l.combine(l.hash(fe(this))),l.cached(this))},[s.symbol](e){return M(e)&&ue(this,e)},pipe(){return(0,p.pipeArguments)(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:(0,f.toJSON)(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:(0,f.toJSON)(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:(0,f.toJSON)(this.left),right:(0,f.toJSON)(this.right)}}},toString(){return ke(this)},[f.NodeInspectSymbol](){return this.toJSON()}},x=(()=>{const e=Object.create(k);return e._tag=y,e})(),I=e=>{const t=Object.create(k);return t._tag=b,t.error=e,t},T=e=>{const t=Object.create(k);return t._tag=g,t.defect=e,t},O=e=>{const t=Object.create(k);return t._tag=S,t.fiberId=e,t},A=(e,t)=>{const n=Object.create(k);return n._tag=v,n.left=e,n.right=t,n},N=(e,t)=>{const n=Object.create(k);return n._tag=w,n.left=e,n.right=t,n},M=e=>(0,h.hasProperty)(e,_),C=e=>e._tag===y,R=e=>e._tag===b,F=e=>e._tag===g,L=e=>e._tag===S,P=e=>e._tag===w,D=e=>e._tag===v,U=e=>_e(e,void 0,ge),j=e=>e._tag===y||Ee(e,!0,((e,t)=>{switch(t._tag){case y:return d.some(e);case g:case b:case S:return d.some(!1);default:return d.none()}})),q=e=>d.isSome(J(e)),W=e=>d.isSome(K(e)),B=e=>d.isSome(Z(e)),z=e=>_e(void 0,ye)(e),$=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===b?d.some((0,o.pipe)(e,i.prepend(t.error))):d.none()))),V=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===g?d.some((0,o.pipe)(e,i.prepend(t.defect))):d.none()))),G=e=>Ee(e,u.empty(),((e,t)=>t._tag===S?d.some((0,o.pipe)(e,u.add(t.fiberId))):d.none())),J=e=>pe(e,(e=>e._tag===b?d.some(e.error):d.none())),H=e=>{const t=J(e);switch(t._tag){case"None":return a.right(e);case"Some":return a.left(t.value)}},K=e=>pe(e,(e=>e._tag===g?d.some(e.defect):d.none())),Y=e=>we(e,{onEmpty:d.some(x),onFail:e=>(0,o.pipe)(e,d.map(I)),onDie:e=>d.some(T(e)),onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none()}),Z=e=>pe(e,(e=>e._tag===S?d.some(e.fiberId):d.none())),Q=e=>we(e,{onEmpty:d.none(),onFail:()=>d.none(),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),X=e=>we(e,{onEmpty:d.none(),onFail:e=>d.some(T(e)),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),ee=e=>we(e,{onEmpty:u.empty(),onFail:e=>u.make(I(e)),onDie:e=>u.make(T(e)),onInterrupt:e=>u.make(O(e)),onSequential:(e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>N(e,t))))))),onParallel:(e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>A(e,t)))))))}),te=e=>we(e,{onEmpty:x,onFail:()=>x,onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:N,onParallel:A}),ne=e=>we(e,{onEmpty:x,onFail:e=>T(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}),re=(0,o.dual)(2,((e,t)=>we(e,{onEmpty:d.some(x),onFail:e=>d.some(I(e)),onDie:e=>{const n=t(e);return d.isSome(n)?d.none():d.some(T(e))},onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}))),ie=(0,o.dual)(2,((e,t)=>ae(e,(()=>t)))),ae=(0,o.dual)(2,((e,t)=>se(e,(e=>I(t(e)))))),se=(0,o.dual)(2,((e,t)=>we(e,{onEmpty:x,onFail:e=>t(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}))),oe=e=>se(e,o.identity),ce=(0,o.dual)(2,((e,t)=>(0,h.isFunction)(t)?se(e,t):se(e,(()=>t)))),le=(0,o.dual)(2,((e,t)=>t._tag===y||e===t||Ee(e,!1,((e,n)=>d.some(e||ue(n,t)))))),ue=(e,t)=>{let n=i.of(e),r=i.of(t);for(;i.isNonEmpty(n)&&i.isNonEmpty(r);){const[e,t]=(0,o.pipe)(i.headNonEmpty(n),Ee([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))])}))),[a,c]=(0,o.pipe)(i.headNonEmpty(r),Ee([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))])})));if(!s.equals(e,a))return!1;n=t,r=c}return!0},fe=e=>de(i.of(e),i.empty()),de=(e,t)=>{for(;;){const[n,a]=(0,o.pipe)(e,r.reduce([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return[(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))]}))),s=u.size(n)>0?(0,o.pipe)(t,i.prepend(n)):t;if(i.isEmpty(a))return i.reverse(s);e=a,t=s}throw new Error((0,m.getBugErrorMessage)("Cause.flattenCauseLoop"))},pe=(0,o.dual)(2,((e,t)=>{const n=[e];for(;n.length>0;){const e=n.pop(),r=t(e);switch(r._tag){case"None":switch(e._tag){case w:case v:n.push(e.right),n.push(e.left)}break;case"Some":return r}}return d.none()})),he=(0,o.dual)(2,((e,t)=>_e(e,void 0,be(t)))),me=e=>{let t=e;const n=[];let r=u.empty(),a=i.empty();for(;void 0!==t;)switch(t._tag){case y:if(0===n.length)return[r,a];t=n.pop();break;case b:if(r=u.add(r,i.make(t._tag,t.error)),0===n.length)return[r,a];t=n.pop();break;case g:if(r=u.add(r,i.make(t._tag,t.defect)),0===n.length)return[r,a];t=n.pop();break;case S:if(r=u.add(r,i.make(t._tag,t.fiberId)),0===n.length)return[r,a];t=n.pop();break;case w:switch(t.left._tag){case y:t=t.right;break;case w:t=N(t.left.left,N(t.left.right,t.right));break;case v:t=A(N(t.left.left,t.right),N(t.left.right,t.right));break;default:a=i.prepend(a,t.right),t=t.left}break;case v:n.push(t.right),t=t.left}throw new Error((0,m.getBugErrorMessage)("Cause.evaluateCauseLoop"))},ge={emptyCase:()=>0,failCase:()=>1,dieCase:()=>1,interruptCase:()=>1,sequentialCase:(e,t,n)=>t+n,parallelCase:(e,t,n)=>t+n},ye={emptyCase:o.constTrue,failCase:o.constFalse,dieCase:o.constFalse,interruptCase:o.constTrue,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},be=e=>({emptyCase:()=>x,failCase:(e,t)=>I(t),dieCase:(e,t)=>T(t),interruptCase:(e,t)=>O(t),sequentialCase:(t,n,r)=>e(n)?e(r)?N(n,r):n:e(r)?r:x,parallelCase:(t,n,r)=>e(n)?e(r)?A(n,r):n:e(r)?r:x}),Se="SequentialCase",ve="ParallelCase",we=(0,o.dual)(2,((e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:i,onParallel:a,onSequential:s})=>_e(e,void 0,{emptyCase:()=>n,failCase:(e,t)=>r(t),dieCase:(e,n)=>t(n),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,n)=>s(t,n),parallelCase:(e,t,n)=>a(t,n)}))),Ee=(0,o.dual)(3,((e,t,n)=>{let r=t,i=e;const a=[];for(;void 0!==i;){const e=n(r,i);switch(r=d.isSome(e)?e.value:r,i._tag){case w:case v:a.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&a.length>0&&(i=a.pop())}return r})),_e=(0,o.dual)(3,((e,t,n)=>{const r=[e],i=[];for(;r.length>0;){const e=r.pop();switch(e._tag){case y:i.push(a.right(n.emptyCase(t)));break;case b:i.push(a.right(n.failCase(t,e.error)));break;case g:i.push(a.right(n.dieCase(t,e.defect)));break;case S:i.push(a.right(n.interruptCase(t,e.fiberId)));break;case w:r.push(e.right),r.push(e.left),i.push(a.left({_tag:Se}));break;case v:r.push(e.right),r.push(e.left),i.push(a.left({_tag:ve}))}}const s=[];for(;i.length>0;){const e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case Se:{const e=s.pop(),r=s.pop(),i=n.sequentialCase(t,e,r);s.push(i);break}case ve:{const e=s.pop(),r=s.pop(),i=n.parallelCase(t,e,r);s.push(i);break}}break;case"Right":s.push(e.right)}}if(0===s.length)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),ke=(e,t)=>z(e)?"All fibers interrupted without errors.":Ce(e).map((function(e){return!0!==t?.renderErrorCause||void 0===e.cause?e.stack:`${e.stack} {\n${xe(e.cause,"  ")}\n}`})).join("\n"),xe=(e,t)=>{const n=e.stack.split("\n");let r=`${t}[cause]: ${n[0]}`;for(let i=1,a=n.length;i<a;i++)r+=`\n${t}${n[i]}`;return r};class Ie extends globalThis.Error{span=void 0;constructor(e){const t="object"===typeof e&&null!==e,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Te(e),t&&"cause"in e&&"undefined"!==typeof e.cause?{cause:new Ie(e.cause)}:void 0),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=e instanceof Error?e.name:"Error",t&&(Me in e&&(this.span=e[Me]),Object.keys(e).forEach((t=>{t in this||(this[t]=e[t])}))),this.stack=Ne(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const Te=e=>{if("string"===typeof e)return e;if("object"===typeof e&&null!==e&&e instanceof Error)return e.message;try{if((0,h.hasProperty)(e,"toString")&&(0,h.isFunction)(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},Oe=/\((.*)\)/,Ae=(0,c.globalValue)("effect/Tracer/spanToTrace",(()=>new WeakMap)),Ne=(e,t,n)=>{const r=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let a=1;a<i.length&&!i[a].includes("Generator.next");a++){if(i[a].includes("effect_internal_function")){r.pop();break}r.push(i[a].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let e=n,t=0;for(;e&&"Span"===e._tag&&t<10;){const n=Ae.get(e);if("function"===typeof n){const t=n();if("string"===typeof t){const n=t.match(Oe),i=n?n[1]:t.replace(/^at /,"");r.push(`    at ${e.name} (${i})`)}else r.push(`    at ${e.name}`)}else r.push(`    at ${e.name}`);e=d.getOrUndefined(e.parent),t++}}return r.join("\n")},Me=Symbol.for("effect/SpanAnnotation"),Ce=e=>_e(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new Ie(t)],failCase:(e,t)=>[new Ie(t)],interruptCase:()=>[],parallelCase:(e,t,n)=>[...t,...n],sequentialCase:(e,t,n)=>[...t,...n]})},477926:(e,t,n)=>{n.r(t),n.d(t,{ClockTypeId:()=>o,MAX_TIMER_MILLIS:()=>l,clockTag:()=>c,globalClockScheduler:()=>u,make:()=>h});var r=n(499779),i=n(860118),a=n(154258),s=n(597081);const o=Symbol.for("effect/Clock"),c=r.GenericTag("effect/Clock"),l=2**31-1,u={unsafeSchedule(e,t){const n=i.toMillis(t);if(n>l)return a.constFalse;let r=!1;const s=setTimeout((()=>{r=!0,e()}),n);return()=>(clearTimeout(s),!r)}},f=function(){const e=BigInt(1e6);if("undefined"===typeof performance)return()=>BigInt(Date.now())*e;const t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),d=function(){const e="hrtime"in{env:{NODE_ENV:"production"}}&&"function"===typeof{env:{NODE_ENV:"production"}}.hrtime.bigint?{env:{NODE_ENV:"production"}}.hrtime:void 0;if(!e)return f;const t=f()-e.bigint();return()=>t+e.bigint()}();class p{[o]=o;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return d()}currentTimeMillis=s.sync((()=>this.unsafeCurrentTimeMillis()));currentTimeNanos=s.sync((()=>this.unsafeCurrentTimeNanos()));scheduler(){return s.succeed(u)}sleep(e){return s.async((t=>{const n=u.unsafeSchedule((()=>t(s.void)),e);return s.asVoid(s.sync(n))}))}}const h=()=>new p},612996:(e,t,n)=>{n.r(t),n.d(t,{currentRequestMap:()=>a});var r=n(744628),i=n(597081);const a=(0,r.globalValue)(Symbol.for("effect/FiberRef/currentRequestMap"),(()=>(0,i.fiberRefUnsafeMake)(new Map)))},849063:(e,t,n)=>{n.r(t),n.d(t,{And:()=>m,ConfigErrorTypeId:()=>p,InvalidData:()=>y,MissingData:()=>b,Or:()=>g,SourceUnavailable:()=>S,Unsupported:()=>v,isAnd:()=>E,isConfigError:()=>w,isInvalidData:()=>k,isMissingData:()=>x,isMissingDataOnly:()=>M,isOr:()=>_,isSourceUnavailable:()=>I,isUnsupported:()=>T,prefixed:()=>O,proto:()=>h,reduceWithContext:()=>N});var r=n(342072),i=n(411123),a=n(154258),s=n(125105);const o="And",c="Or",l="InvalidData",u="MissingData",f="SourceUnavailable",d="Unsupported",p=Symbol.for("effect/ConfigError"),h={_tag:"ConfigError",[p]:p},m=(e,t)=>{const n=Object.create(h);return n._op=o,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},g=(e,t)=>{const n=Object.create(h);return n._op=c,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},y=(e,t,n={pathDelim:"."})=>{const i=Object.create(h);return i._op=l,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Invalid data at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},b=(e,t,n={pathDelim:"."})=>{const i=Object.create(h);return i._op=u,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Missing data at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},S=(e,t,n,i={pathDelim:"."})=>{const s=Object.create(h);return s._op=f,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${(0,a.pipe)(this.path,r.join(i.pathDelim))}: "${this.message}")`}}),s},v=(e,t,n={pathDelim:"."})=>{const i=Object.create(h);return i._op=d,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${(0,a.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},w=e=>(0,s.hasProperty)(e,p),E=e=>e._op===o,_=e=>e._op===c,k=e=>e._op===l,x=e=>e._op===u,I=e=>e._op===f,T=e=>e._op===d,O=(0,a.dual)(2,((e,t)=>{switch(e._op){case o:return m(O(e.left,t),O(e.right,t));case c:return g(O(e.left,t),O(e.right,t));case l:return y([...t,...e.path],e.message);case u:return b([...t,...e.path],e.message);case f:return S([...t,...e.path],e.message,e.cause);case d:return v([...t,...e.path],e.message)}})),A={andCase:(e,t,n)=>t&&n,orCase:(e,t,n)=>t&&n,invalidDataCase:a.constFalse,missingDataCase:a.constTrue,sourceUnavailableCase:a.constFalse,unsupportedCase:a.constFalse},N=(0,a.dual)(3,((e,t,n)=>{const r=[e],a=[];for(;r.length>0;){const e=r.pop();switch(e._op){case o:r.push(e.right),r.push(e.left),a.push(i.left({_op:"AndCase"}));break;case c:r.push(e.right),r.push(e.left),a.push(i.left({_op:"OrCase"}));break;case l:a.push(i.right(n.invalidDataCase(t,e.path,e.message)));break;case u:a.push(i.right(n.missingDataCase(t,e.path,e.message)));break;case f:a.push(i.right(n.sourceUnavailableCase(t,e.path,e.message,e.cause)));break;case d:a.push(i.right(n.unsupportedCase(t,e.path,e.message)))}}const s=[];for(;a.length>0;){const e=a.pop();switch(e._op){case"Left":switch(e.left._op){case"AndCase":{const e=s.pop(),r=s.pop(),i=n.andCase(t,e,r);s.push(i);break}case"OrCase":{const e=s.pop(),r=s.pop(),i=n.orCase(t,e,r);s.push(i);break}}break;case"Right":s.push(e.right)}}if(0===s.length)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),M=e=>N(e,void 0,A)},974627:(e,t,n)=>{n.r(t),n.d(t,{ConfigProviderTypeId:()=>R,FlatConfigProviderTypeId:()=>L,configProviderTag:()=>F,constantCase:()=>K,fromEnv:()=>j,fromFlat:()=>U,fromJson:()=>ue,fromMap:()=>q,kebabCase:()=>Y,lowerCase:()=>Z,make:()=>P,makeFlat:()=>D,mapInputPath:()=>z,nested:()=>V,orElse:()=>J,snakeCase:()=>Q,unnested:()=>G,upperCase:()=>X,within:()=>ee});var r=n(342072),i=n(499779),a=n(411123),s=n(154258),o=n(398826),c=n(895868),l=n(962047),u=n(504491),f=n(709322),d=n(951791),p=n(849063),h=n(287258);const m={_tag:"Empty"},g=(0,s.dual)(2,((e,t)=>({_tag:"AndThen",first:e,second:t}))),y=(0,s.dual)(2,((e,t)=>g(e,{_tag:"MapName",f:t}))),b=(0,s.dual)(2,((e,t)=>g(e,{_tag:"Nested",name:t}))),S=(0,s.dual)(2,((e,t)=>g(e,{_tag:"Unnested",name:t}))),v=(0,s.dual)(2,((e,t)=>{let n=h.of(t),i=e;for(;h.isCons(n);){const e=n.head;switch(e._tag){case"Empty":n=n.tail;break;case"AndThen":n=h.cons(e.first,h.cons(e.second,n.tail));break;case"MapName":i=r.map(i,e.f),n=n.tail;break;case"Nested":i=r.prepend(i,e.name),n=n.tail;break;case"Unnested":if(!(0,s.pipe)(r.head(i),u.contains(e.name)))return a.left(p.MissingData(i,`Expected ${e.name} to be in path in ConfigProvider#unnested`));i=r.tailNonEmpty(i),n=n.tail;break}}return a.right(i)}));var w=n(597081),E=n(502600);const _=e=>e.toLowerCase(),k=e=>e.toUpperCase(),x=(e,t,n)=>t instanceof RegExp?e.replace(t,n):t.reduce(((e,t)=>e.replace(t,n)),e),I=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],T=/[^A-Z0-9]+/gi,O=(e,t={})=>{const{delimiter:n=" ",splitRegexp:r=I,stripRegexp:i=T,transform:a=_}=t,s=x(x(e,r,"$1\0$2"),i,"\0");let o=0,c=s.length;for(;"\0"===s.charAt(o);)o++;for(;"\0"===s.charAt(c-1);)c--;return s.slice(o,c).split("\0").map(a).join(n)},A=(e,t)=>O(e,{delimiter:"_",transform:k,...t}),N=(e,t)=>O(e,{delimiter:"-",...t}),M=(e,t)=>O(e,{delimiter:"_",...t}),C=(e,t)=>[...e,...t],R=Symbol.for("effect/ConfigProvider"),F=i.GenericTag("effect/ConfigProvider"),L=Symbol.for("effect/ConfigProviderFlat"),P=e=>({[R]:R,pipe(){return(0,f.pipeArguments)(this,arguments)},...e}),D=e=>({[L]:L,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),U=e=>P({load:t=>w.flatMap(W(e,r.empty(),t,!1),(e=>u.match(r.head(e),{onNone:()=>w.fail(p.MissingData(r.empty(),`Expected a single value having structure: ${t}`)),onSome:w.succeed}))),flattened:e}),j=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),i=()=>"env"in{env:{NODE_ENV:"production"}}?{NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"starpy",slug:"starpy",version:"2.1.0",orientation:"portrait",icon:"./assets/icon.png",platforms:["ios","android","web"],scheme:"starpy",env:{DEBUG:"webtorrent"},userInterfaceStyle:"dark",web:{},extra:{eas:{projectId:"96050f57-642d-4f18-8222-de9f9ccb9e21"}},sdkVersion:"51.0.0"},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}:{};return U(D({load:(e,a,o=!0)=>{const c=(e=>(0,s.pipe)(e,r.join(t)))(e),l=i(),f=c in l?u.some(l[c]):u.none();return(0,s.pipe)(f,w.mapError((()=>p.MissingData(e,`Expected ${c} to exist in the process context`))),w.flatMap((t=>te(t,e,a,n,o))))},enumerateChildren:e=>w.sync((()=>{const n=i(),a=Object.keys(n).map((e=>e.toUpperCase().split(t))).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(a)})),patch:m}))},q=(e,t)=>{const{pathDelim:n,seqDelim:i}=Object.assign({seqDelim:",",pathDelim:"."},t),a=e=>(0,s.pipe)(e,r.join(n)),o=e=>e.split(n),l=oe(e,(e=>o(e)),a);return U(D({load:(e,t,n=!0)=>{const r=a(e),o=l.has(r)?u.some(l.get(r)):u.none();return(0,s.pipe)(o,w.mapError((()=>p.MissingData(e,`Expected ${r} to exist in the provided map`))),w.flatMap((r=>te(r,e,t,i,n))))},enumerateChildren:e=>w.sync((()=>{const t=r.fromIterable(l.keys()).map(o).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(t)})),patch:m}))},W=(e,t,n,i)=>{const c=n;switch(c._tag){case E.OP_CONSTANT:return w.succeed(r.of(c.value));case E.OP_DESCRIBED:return w.suspend((()=>W(e,t,c.config,i)));case E.OP_FAIL:return w.fail(p.MissingData(t,c.message));case E.OP_FALLBACK:return(0,s.pipe)(w.suspend((()=>W(e,t,c.first,i))),w.catchAll((n=>c.condition(n)?(0,s.pipe)(W(e,t,c.second,i),w.catchAll((e=>w.fail(p.Or(n,e))))):w.fail(n))));case E.OP_LAZY:return w.suspend((()=>W(e,t,c.config(),i)));case E.OP_MAP_OR_FAIL:return w.suspend((()=>(0,s.pipe)(W(e,t,c.original,i),w.flatMap(w.forEachSequential((e=>(0,s.pipe)(c.mapOrFail(e),w.mapError(p.prefixed(((e,t)=>{let n=t;if("Nested"===n._tag){const t=e.slice();for(;"Nested"===n._tag;)t.push(n.name),n=n.config;return t}return e})(t,c.original))))))))));case E.OP_NESTED:return w.suspend((()=>W(e,C(t,r.of(c.name)),c.config,i)));case E.OP_PRIMITIVE:return(0,s.pipe)(v(t,e.patch),w.flatMap((t=>(0,s.pipe)(e.load(t,c,i),w.flatMap((e=>{if(0===e.length){const e=(0,s.pipe)(r.last(t),u.getOrElse((()=>"<n/a>")));return w.fail(p.MissingData([],`Expected ${c.description} with name ${e}`))}return w.succeed(e)}))))));case E.OP_SEQUENCE:return(0,s.pipe)(v(t,e.patch),w.flatMap((n=>(0,s.pipe)(e.enumerateChildren(n),w.flatMap(re),w.flatMap((i=>0===i.length?w.suspend((()=>w.map(W(e,n,c.config,!0),r.of))):(0,s.pipe)(w.forEachSequential(i,(n=>W(e,r.append(t,`[${n}]`),c.config,!0))),w.map((e=>{const t=r.flatten(e);return 0===t.length?r.of(r.empty()):r.of(t)})))))))));case E.OP_HASHMAP:return w.suspend((()=>(0,s.pipe)(v(t,e.patch),w.flatMap((t=>(0,s.pipe)(e.enumerateChildren(t),w.flatMap((n=>(0,s.pipe)(n,w.forEachSequential((n=>W(e,C(t,r.of(n)),c.valueConfig,i))),w.map((e=>0===e.length?r.of(o.empty()):(0,s.pipe)(ne(e),r.map((e=>o.fromIterable(r.zip(r.fromIterable(n),e))))))))))))))));case E.OP_ZIP_WITH:return w.suspend((()=>(0,s.pipe)(W(e,t,c.left,i),w.either,w.flatMap((n=>(0,s.pipe)(W(e,t,c.right,i),w.either,w.flatMap((e=>{if(a.isLeft(n)&&a.isLeft(e))return w.fail(p.And(n.left,e.left));if(a.isLeft(n)&&a.isRight(e))return w.fail(n.left);if(a.isRight(n)&&a.isLeft(e))return w.fail(e.left);if(a.isRight(n)&&a.isRight(e)){const i=(0,s.pipe)(t,r.join(".")),o=B(t,i),[l,f]=((e,t,n,i)=>{const a=r.unfold(n.length,(t=>t>=i.length?u.none():u.some([e(t),t+1]))),s=r.unfold(i.length,(e=>e>=n.length?u.none():u.some([t(e),e+1])));return[C(n,a),C(i,s)]})(o,o,(0,s.pipe)(n.right,r.map(a.right)),(0,s.pipe)(e.right,r.map(a.right)));return(0,s.pipe)(l,r.zip(f),w.forEachSequential((([e,t])=>(0,s.pipe)(w.zip(e,t),w.map((([e,t])=>c.zip(e,t)))))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))}},B=(e,t)=>n=>a.left(p.MissingData(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),z=(0,s.dual)(2,((e,t)=>U($(e.flattened,t)))),$=(e,t)=>D({load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:t=>e.enumerateChildren(t),patch:y(e.patch,t)}),V=(0,s.dual)(2,((e,t)=>U(D({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:b(e.flattened.patch,t)})))),G=(0,s.dual)(2,((e,t)=>U(D({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:S(e.flattened.patch,t)})))),J=(0,s.dual)(2,((e,t)=>U(H(e.flattened,(()=>t().flattened))))),H=(e,t)=>D({load:(n,r,i)=>(0,s.pipe)(v(n,e.patch),w.flatMap((t=>e.load(t,r,i))),w.catchAll((e=>(0,s.pipe)(w.sync(t),w.flatMap((t=>(0,s.pipe)(v(n,t.patch),w.flatMap((e=>t.load(e,r,i))),w.catchAll((t=>w.fail(p.Or(e,t))))))))))),enumerateChildren:n=>(0,s.pipe)(v(n,e.patch),w.flatMap((t=>e.enumerateChildren(t))),w.either,w.flatMap((e=>(0,s.pipe)(w.sync(t),w.flatMap((t=>(0,s.pipe)(v(n,t.patch),w.flatMap((e=>t.enumerateChildren(e))),w.either,w.flatMap((t=>{if(a.isLeft(e)&&a.isLeft(t))return w.fail(p.And(e.left,t.left));if(a.isLeft(e)&&a.isRight(t))return w.succeed(t.right);if(a.isRight(e)&&a.isLeft(t))return w.succeed(e.right);if(a.isRight(e)&&a.isRight(t))return w.succeed((0,s.pipe)(e.right,c.union(t.right)));throw new Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))),patch:m}),K=e=>z(e,A),Y=e=>z(e,N),Z=e=>z(e,_),Q=e=>z(e,M),X=e=>z(e,k),ee=(0,s.dual)(3,((e,t,n)=>{const i=r.reduce(t,e,((e,t)=>G(e,t))),a=r.reduceRight(t,n(i),((e,t)=>V(e,t)));return J(a,(()=>e))})),te=(e,t,n,i,a)=>a?(0,s.pipe)(((e,t)=>e.split(new RegExp(`\\s*${d.escape(t)}\\s*`)))(e,i),w.forEachSequential((e=>n.parse(e.trim()))),w.mapError(p.prefixed(t))):(0,s.pipe)(n.parse(e),w.mapBoth({onFailure:p.prefixed(t),onSuccess:r.of})),ne=e=>Object.keys(e[0]).map((t=>e.map((e=>e[t])))),re=e=>(0,s.pipe)(w.forEachSequential(e,se),w.mapBoth({onFailure:()=>r.empty(),onSuccess:r.sort(l.Order)}),w.either,w.map(a.merge)),ie=/(^.+)(\[(\d+)\])$/,ae=/^(\[(\d+)\])$/,se=e=>{const t=e.match(ae);if(null!==t){const e=t[2];return(0,s.pipe)(void 0!==e&&e.length>0?u.some(e):u.none(),u.flatMap(le))}return u.none()},oe=(e,t,n)=>{const i=new Map;for(const[a,o]of e){const e=(0,s.pipe)(t(a),r.flatMap((e=>u.match(ce(e),{onNone:()=>r.of(e),onSome:([e,t])=>r.make(e,`[${t}]`)}))));i.set(n(e),o)}return i},ce=e=>{const t=e.match(ie);if(null!==t){const e=t[1],n=t[3],r=void 0!==e&&e.length>0?u.some(e):u.none(),i=(0,s.pipe)(void 0!==n&&n.length>0?u.some(n):u.none(),u.flatMap(le));return u.all([r,i])}return u.none()},le=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?u.none():u.some(t)},ue=e=>{const t=r.map(de(e),(([e,t])=>[fe(e).join("\ufeff"),t]));return q(new Map(t),{pathDelim:"\ufeff",seqDelim:"\ufeff"})},fe=e=>{const t=[];let n=0;for(;n<e.length;){const r=e[n];if("KeyName"===r._tag)if(n+1<e.length){const i=e[n+1];"KeyIndex"===i._tag?(t.push(`${r.name}[${i.index}]`),n+=2):(t.push(r.name),n+=1)}else t.push(r.name),n+=1}return t},de=e=>{const t=(e,t)=>"string"===typeof t?r.make([e,t]):"number"===typeof t||"boolean"===typeof t?r.make([e,String(t)]):r.isArray(t)?n(e,t):"object"===typeof t&&null!==t?i(e,t):r.empty(),n=(e,n)=>r.match(n,{onEmpty:()=>r.make([e,"<nil>"]),onNonEmpty:r.flatMap(((n,i)=>t(r.append(e,(e=>({_tag:"KeyIndex",index:e}))(i)),n)))}),i=(e,n)=>Object.entries(n).flatMap((([n,i])=>{const a=r.append(e,{_tag:"KeyName",name:n});const s=t(a,i);return r.isEmptyReadonlyArray(s)?r.make([a,""]):s}));return i(r.empty(),e)}},636109:(e,t,n)=>{n.r(t),n.d(t,{assert:()=>m,clear:()=>g,console:()=>u,consoleWith:()=>f,count:()=>y,countReset:()=>b,debug:()=>S,dir:()=>v,dirxml:()=>w,error:()=>E,group:()=>_,info:()=>k,log:()=>x,setConsole:()=>h,table:()=>I,time:()=>T,timeLog:()=>O,trace:()=>A,warn:()=>N,withConsole:()=>d,withConsoleScoped:()=>p,withGroup:()=>M,withTime:()=>C});var r=n(499779),i=n(154258),a=n(597081),s=n(130949),o=n(893443),c=n(365519),l=n(232376);const u=a.map(a.fiberRefGet(s.currentServices),r.get(o.consoleTag)),f=e=>a.fiberRefGetWith(s.currentServices,(t=>e(r.get(t,o.consoleTag)))),d=(0,i.dual)(2,((e,t)=>a.fiberRefLocallyWith(e,s.currentServices,r.add(o.consoleTag,t)))),p=e=>c.fiberRefLocallyScopedWith(s.currentServices,r.add(o.consoleTag,e)),h=e=>l.scopedDiscard(c.fiberRefLocallyScopedWith(s.currentServices,r.add(o.consoleTag,e))),m=(e,...t)=>f((n=>n.assert(e,...t))),g=f((e=>e.clear)),y=e=>f((t=>t.count(e))),b=e=>f((t=>t.countReset(e))),S=(...e)=>f((t=>t.debug(...e))),v=(e,t)=>f((n=>n.dir(e,t))),w=(...e)=>f((t=>t.dirxml(...e))),E=(...e)=>f((t=>t.error(...e))),_=e=>f((t=>c.acquireRelease(t.group(e),(()=>t.groupEnd)))),k=(...e)=>f((t=>t.info(...e))),x=(...e)=>f((t=>t.log(...e))),I=(e,t)=>f((n=>n.table(e,t))),T=e=>f((t=>c.acquireRelease(t.time(e),(()=>t.timeEnd(e))))),O=(e,...t)=>f((n=>n.timeLog(e,...t))),A=(...e)=>f((t=>t.trace(...e))),N=(...e)=>f((t=>t.warn(...e))),M=(0,i.dual)((e=>a.isEffect(e[0])),((e,t)=>f((n=>a.acquireUseRelease(n.group(t),(()=>e),(()=>n.groupEnd)))))),C=(0,i.dual)((e=>a.isEffect(e[0])),((e,t)=>f((n=>a.acquireUseRelease(n.time(t),(()=>e),(()=>n.timeEnd(t)))))))},312723:(e,t,n)=>{n.r(t),n.d(t,{ContextProto:()=>y,STMTypeId:()=>d,Tag:()=>m,TagProto:()=>p,TagTypeId:()=>f,TypeId:()=>g,add:()=>k,empty:()=>E,get:()=>I,getOption:()=>T,isContext:()=>S,isTag:()=>v,make:()=>_,makeContext:()=>b,makeGenericTag:()=>h,merge:()=>O,omit:()=>N,pick:()=>A,unsafeGet:()=>x});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(709322),c=n(125105),l=n(995515),u=n(769275);const f=Symbol.for("effect/Context/Tag"),d=Symbol.for("effect/STM"),p={...l.EffectPrototype,_tag:"Tag",_op:"Tag",[d]:l.effectVariance,[f]:{_Service:e=>e,_Identifier:e=>e},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[s.NodeInspectSymbol](){return this.toJSON()},of:e=>e,context(e){return _(this,e)}},h=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(p);return Object.defineProperty(r,"stack",{get:()=>n.stack}),r.key=e,r},m=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,p),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},g=Symbol.for("effect/Context"),y={[g]:{_Services:e=>e},[r.symbol](e){if(S(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!r.equals(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[a.symbol](){return a.cached(this,a.number(this.unsafeMap.size))},pipe(){return(0,o.pipeArguments)(this,arguments)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()}},b=e=>{const t=Object.create(y);return t.unsafeMap=e,t},S=e=>(0,c.hasProperty)(e,g),v=e=>(0,c.hasProperty)(e,f),w=b(new Map),E=()=>w,_=(e,t)=>b(new Map([[e.key,t]])),k=(0,i.dual)(3,((e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),b(r)})),x=(0,i.dual)(2,((e,t)=>{if(!e.unsafeMap.has(t.key))throw(e=>{const t=new Error("Service not found"+(e.key?`: ${String(e.key)}`:""));if(e.stack){const n=e.stack.split("\n");if(n.length>2){const e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){const e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t})(t);return e.unsafeMap.get(t.key)})),I=x,T=(0,i.dual)(2,((e,t)=>e.unsafeMap.has(t.key)?u.some(e.unsafeMap.get(t.key)):u.none)),O=(0,i.dual)(2,((e,t)=>{const n=new Map(e.unsafeMap);for(const[r,i]of t.unsafeMap)n.set(r,i);return b(n)})),A=(...e)=>t=>{const n=new Set(e.map((e=>e.key))),r=new Map;for(const[e,i]of t.unsafeMap.entries())n.has(e)&&r.set(e,i);return b(r)},N=(...e)=>t=>{const n=new Map(t.unsafeMap);for(const r of e)n.delete(r.key);return b(n)}},694375:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>H,_catch:()=>R,allowInterrupt:()=>$,annotateCurrentSpan:()=>$t,annotateLogs:()=>A,annotateSpans:()=>Vt,asSome:()=>N,asSomeError:()=>M,bind:()=>K,bindTo:()=>Y,catchAllDefect:()=>F,catchSomeCause:()=>L,catchSomeDefect:()=>P,catchTag:()=>D,catchTags:()=>U,cause:()=>j,clock:()=>W,clockWith:()=>q,contextWith:()=>ee,currentParentSpan:()=>Gt,currentSpan:()=>Jt,delay:()=>B,descriptor:()=>V,descriptorWith:()=>z,diffFiberRefs:()=>G,diffFiberRefsAndRuntimeFlags:()=>J,dropUntil:()=>Q,dropWhile:()=>X,endSpan:()=>en,eventually:()=>te,every:()=>pe,fiberRefs:()=>ye,filterMap:()=>ne,filterOrDie:()=>re,filterOrDieMessage:()=>ie,filterOrElse:()=>ae,filterOrFail:()=>oe,findFirst:()=>ce,firstSuccessOf:()=>ue,flipWith:()=>fe,forever:()=>me,fromNullable:()=>sn,functionWithSpan:()=>an,gen:()=>ge,head:()=>be,ignore:()=>Se,ignoreLogged:()=>ve,inheritFiberRefs:()=>we,isFailure:()=>Ee,isSuccess:()=>_e,iterate:()=>ke,labelMetrics:()=>pt,let_:()=>Z,liftPredicate:()=>se,linkSpans:()=>Ht,log:()=>Ie,logAnnotations:()=>Fe,logDebug:()=>Oe,logError:()=>Me,logFatal:()=>Ce,logInfo:()=>Ae,logTrace:()=>Te,logWarning:()=>Ne,logWithLevel:()=>xe,loop:()=>Le,makeSpan:()=>Zt,mapAccum:()=>Ue,mapErrorCause:()=>je,match:()=>de,memoize:()=>qe,merge:()=>We,negate:()=>Be,none:()=>ze,once:()=>$e,option:()=>Ve,optionFromOptional:()=>on,orElseFail:()=>Ge,orElseSucceed:()=>Je,parallelErrors:()=>He,patchFiberRefs:()=>Ke,promise:()=>Ye,provideService:()=>Ze,provideServiceEffect:()=>Qe,random:()=>Xe,reduce:()=>et,reduceRight:()=>tt,reduceWhile:()=>nt,repeatN:()=>it,sandbox:()=>st,serviceConstants:()=>qt,serviceFunction:()=>Ut,serviceFunctionEffect:()=>Dt,serviceFunctions:()=>jt,serviceMembers:()=>Wt,serviceOption:()=>Bt,serviceOptional:()=>zt,setFiberRefs:()=>ot,sleep:()=>ct,spanAnnotations:()=>Qt,spanLinks:()=>Xt,succeedNone:()=>lt,succeedSome:()=>ut,summarized:()=>ft,tagMetrics:()=>dt,takeUntil:()=>ht,takeWhile:()=>mt,tapBoth:()=>gt,tapDefect:()=>yt,tapError:()=>bt,tapErrorCause:()=>vt,tapErrorTag:()=>St,timed:()=>wt,timedWith:()=>Et,tracer:()=>kt,tracerWith:()=>_t,tryMap:()=>It,tryMapPromise:()=>Tt,tryPromise:()=>xt,try_:()=>C,unless:()=>Ot,unlessEffect:()=>At,unsafeMakeSpan:()=>Yt,unsandbox:()=>Nt,updateFiberRefs:()=>Mt,updateService:()=>Ct,useSpan:()=>tn,when:()=>Rt,whenFiberRef:()=>Ft,whenRef:()=>Lt,withLogSpan:()=>Re,withMetric:()=>Pt,withParentSpan:()=>nn,withSpan:()=>rn});var r=n(977721),i=n(342072),a=n(889133),s=n(823478),o=n(499779),c=n(860118),l=n(406820),u=n(154258),f=n(398826),d=n(895868),p=n(287258),h=n(161938),m=n(327e3),g=n(504491),y=n(125105),b=n(581757),S=n(494011),v=n(240834),w=n(477926),E=n(597081),_=n(130949),k=n(997385),x=n(62177),I=n(945959),T=n(939909),O=n(460011);const A=(0,u.dual)((e=>E.isEffect(e[0])),(function(){const e=arguments;return E.fiberRefLocallyWith(e[0],E.currentLogAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),N=e=>E.map(e,g.some),M=e=>E.mapError(e,g.some),C=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),E.sync((()=>{try{return t()}catch(e){throw E.makeEffectError(v.fail(n?n(e):new E.UnknownException(e)))}}))},R=(0,u.dual)(3,((e,t,n)=>E.catchAll(e,(e=>y.hasProperty(e,t)&&e[t]===n.failure?n.onFailure(e):E.fail(e))))),F=(0,u.dual)(2,((e,t)=>E.catchAllCause(e,(e=>{const n=v.find(e,(e=>v.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return E.failCause(e);case"Some":return t(n.value.defect)}})))),L=(0,u.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>{const n=t(e);switch(n._tag){case"None":return E.failCause(e);case"Some":return n.value}},onSuccess:E.succeed}))),P=(0,u.dual)(2,((e,t)=>E.catchAllCause(e,(e=>{const n=v.find(e,(e=>v.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return E.failCause(e);case"Some":{const r=t(n.value.defect);return"Some"===r._tag?r.value:E.failCause(e)}}})))),D=(0,u.dual)(3,((e,t,n)=>E.catchIf(e,y.isTagged(t),n))),U=(0,u.dual)(2,((e,t)=>{let n;return E.catchIf(e,(e=>(n??=Object.keys(t),y.hasProperty(e,"_tag")&&y.isString(e._tag)&&n.includes(e._tag))),(e=>t[e._tag](e)))})),j=e=>E.matchCause(e,{onFailure:u.identity,onSuccess:()=>v.empty}),q=s.clockWith,W=q(E.succeed),B=(0,u.dual)(2,((e,t)=>E.zipRight(s.sleep(t),e))),z=e=>E.withFiberRuntime(((t,n)=>e({id:t.id(),status:n,interruptors:v.interruptors(t.getFiberRef(E.currentInterruptedCause))}))),$=z((e=>d.size(e.interruptors)>0?E.interrupt:E.void)),V=z(E.succeed),G=e=>ft(e,ye,x.diff),J=e=>ft(e,E.zip(ye,E.runtimeFlags),(([e,t],[n,r])=>[x.diff(e,n),T.diff(t,r)])),H=E.succeed({}),K=k.bind(E.map,E.flatMap),Y=k.bindTo(E.map),Z=k.let_(E.map),Q=(0,u.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>i?(r.push(e),E.succeed(!0)):t(e,n)))}return E.map(a,(()=>r))})))),X=(0,u.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>E.map(i?t(e,n):E.succeed(!1),(t=>(t||r.push(e),t)))))}return E.map(a,(()=>r))})))),ee=e=>E.map(E.context(),e),te=e=>E.orElse(e,(()=>E.flatMap(E.yieldNow(),(()=>te(e))))),ne=(0,u.dual)(2,((e,t)=>E.map(E.forEachSequential(e,u.identity),i.filterMap(t)))),re=(0,u.dual)(3,((e,t,n)=>ae(e,t,(e=>E.dieSync((()=>n(e))))))),ie=(0,u.dual)(3,((e,t,n)=>ae(e,t,(()=>E.dieMessage(n))))),ae=(0,u.dual)(3,((e,t,n)=>E.flatMap(e,(e=>t(e)?E.succeed(e):n(e))))),se=(0,u.dual)(3,((e,t,n)=>E.suspend((()=>t(e)?E.succeed(e):E.fail(n(e)))))),oe=(0,u.dual)((e=>E.isEffect(e[0])),((e,t,n)=>ae(e,t,(e=>void 0===n?E.fail(new E.NoSuchElementException):E.failSync((()=>n(e))))))),ce=(0,u.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=n.next();return r.done?E.succeed(g.none()):le(n,0,t,r.value)})))),le=(e,t,n,r)=>E.flatMap(n(r,t),(i=>{if(i)return E.succeed(g.some(r));const a=e.next();return a.done?E.succeed(g.none()):le(e,t+1,n,a.value)})),ue=e=>E.suspend((()=>{const t=a.fromIterable(e);return a.isNonEmpty(t)?(0,u.pipe)(a.tailNonEmpty(t),i.reduce(a.headNonEmpty(t),((e,t)=>E.orElse(e,(()=>t))))):E.dieSync((()=>new E.IllegalArgumentException("Received an empty collection of effects")))})),fe=(0,u.dual)(2,((e,t)=>E.flip(t(E.flip(e))))),de=(0,u.dual)(2,((e,t)=>E.matchEffect(e,{onFailure:e=>E.succeed(t.onFailure(e)),onSuccess:e=>E.succeed(t.onSuccess(e))}))),pe=(0,u.dual)(2,((e,t)=>E.suspend((()=>he(e[Symbol.iterator](),0,t))))),he=(e,t,n)=>{const r=e.next();return r.done?E.succeed(!0):E.flatMap(n(r.value,t),(r=>r?he(e,t+1,n):E.succeed(r)))},me=e=>{const t=E.flatMap(E.flatMap(e,(()=>E.yieldNow())),(()=>t));return t},ge=function(){let e;return e=1===arguments.length?arguments[0]:arguments[1].bind(arguments[0]),E.suspend((()=>{const t=e(u.pipe),n=(0,r.internalCall)((()=>t.next())),i=e=>e.done?E.succeed(e.value):E.flatMap((0,r.yieldWrapGet)(e.value),(e=>i((0,r.internalCall)((()=>t.next(e))))));return i(n)}))},ye=E.withFiberRuntime((e=>E.succeed(e.getFiberRefs()))),be=e=>E.flatMap(e,(e=>{const t=e[Symbol.iterator]().next();return t.done?E.fail(new E.NoSuchElementException):E.succeed(t.value)})),Se=e=>de(e,{onFailure:u.constVoid,onSuccess:u.constVoid}),ve=e=>E.matchCauseEffect(e,{onFailure:e=>Oe(e,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>E.void}),we=e=>Mt(((t,n)=>l.joinAs(n,t,e))),Ee=e=>de(e,{onFailure:u.constTrue,onSuccess:u.constFalse}),_e=e=>de(e,{onFailure:u.constFalse,onSuccess:u.constTrue}),ke=(e,t)=>E.suspend((()=>t.while(e)?E.flatMap(t.body(e),(e=>ke(e,t))):E.succeed(e))),xe=e=>(...t)=>{const n=g.fromNullable(e);let r;for(let e=0,i=t.length;e<i;e++){const n=t[e];v.isCause(n)&&(r=void 0!==r?v.sequential(r,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return void 0===r&&(r=v.empty),E.withFiberRuntime((e=>(e.log(t,r,n),E.void)))},Ie=xe(),Te=xe(h.Trace),Oe=xe(h.Debug),Ae=xe(h.Info),Ne=xe(h.Warning),Me=xe(h.Error),Ce=xe(h.Fatal),Re=(0,u.dual)(2,((e,t)=>E.flatMap(s.currentTimeMillis,(n=>E.fiberRefLocallyWith(e,E.currentLogSpan,p.prepend(m.make(t,n))))))),Fe=E.fiberRefGet(E.currentLogAnnotations),Le=(e,t)=>t.discard?De(e,t.while,t.step,t.body):E.map(Pe(e,t.while,t.step,t.body),i.fromIterable),Pe=(e,t,n,r)=>E.suspend((()=>t(e)?E.flatMap(r(e),(i=>E.map(Pe(n(e),t,n,r),p.prepend(i)))):E.sync((()=>p.empty())))),De=(e,t,n,r)=>E.suspend((()=>t(e)?E.flatMap(r(e),(()=>De(n(e),t,n,r))):E.void)),Ue=(0,u.dual)(3,((e,t,n)=>E.suspend((()=>{const r=e[Symbol.iterator](),i=[];let a,s=E.succeed(t),o=0;for(;!(a=r.next()).done;){const e=o++,t=a.value;s=E.flatMap(s,(r=>E.map(n(r,t,e),(([e,t])=>(i.push(t),e)))))}return E.map(s,(e=>[e,i]))})))),je=(0,u.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>E.failCauseSync((()=>t(e))),onSuccess:E.succeed}))),qe=e=>(0,u.pipe)(E.deferredMake(),E.flatMap((t=>(0,u.pipe)(J(e),E.intoDeferred(t),$e,E.map((e=>E.zipRight(e,(0,u.pipe)(E.deferredAwait(t),E.flatMap((([e,t])=>E.as(E.zip(Ke(e[0]),E.updateRuntimeFlags(e[1])),t))))))))))),We=e=>E.matchEffect(e,{onFailure:e=>E.succeed(e),onSuccess:E.succeed}),Be=e=>E.map(e,(e=>!e)),ze=e=>E.flatMap(e,(e=>{switch(e._tag){case"None":return E.void;case"Some":return E.fail(new E.NoSuchElementException)}})),$e=e=>E.map(b.make(!0),(t=>E.asVoid(E.whenEffect(e,b.getAndSet(t,!1))))),Ve=e=>E.matchEffect(e,{onFailure:()=>E.succeed(g.none()),onSuccess:e=>E.succeed(g.some(e))}),Ge=(0,u.dual)(2,((e,t)=>E.orElse(e,(()=>E.failSync(t))))),Je=(0,u.dual)(2,((e,t)=>E.orElse(e,(()=>E.sync(t))))),He=e=>E.matchCauseEffect(e,{onFailure:e=>{const t=i.fromIterable(v.failures(e));return 0===t.length?E.failCause(e):E.fail(t)},onSuccess:E.succeed}),Ke=e=>Mt(((t,n)=>(0,u.pipe)(e,x.patch(t,n)))),Ye=e=>e.length>=1?E.async(((t,n)=>{e(n).then((e=>t(E.exitSucceed(e))),(e=>t(E.exitDie(e))))})):E.async((t=>{e().then((e=>t(E.exitSucceed(e))),(e=>t(E.exitDie(e))))})),Ze=(0,u.dual)(3,((e,t,n)=>E.contextWithEffect((r=>E.provideContext(e,o.add(r,t,n)))))),Qe=(0,u.dual)(3,((e,t,n)=>E.contextWithEffect((r=>E.flatMap(n,(n=>E.provideContext(e,(0,u.pipe)(r,o.add(t,n))))))))),Xe=_.randomWith(E.succeed),et=(0,u.dual)(3,((e,t,n)=>i.fromIterable(e).reduce(((e,t,r)=>E.flatMap(e,(e=>n(e,t,r)))),E.succeed(t)))),tt=(0,u.dual)(3,((e,t,n)=>i.fromIterable(e).reduceRight(((e,t,r)=>E.flatMap(e,(e=>n(t,e,r)))),E.succeed(t)))),nt=(0,u.dual)(3,((e,t,n)=>E.flatMap(E.sync((()=>e[Symbol.iterator]())),(e=>rt(e,0,t,n.while,n.body))))),rt=(e,t,n,r,i)=>{const a=e.next();return!a.done&&r(n)?E.flatMap(i(n,a.value,t),(n=>rt(e,t+1,n,r,i))):E.succeed(n)},it=(0,u.dual)(2,((e,t)=>E.suspend((()=>at(e,t))))),at=(e,t)=>E.flatMap(e,(n=>t<=0?E.succeed(n):E.zipRight(E.yieldNow(),at(e,t-1)))),st=e=>E.matchCauseEffect(e,{onFailure:E.fail,onSuccess:E.succeed}),ot=e=>E.suspend((()=>l.setAll(e))),ct=s.sleep,lt=E.succeed(g.none()),ut=e=>E.succeed(g.some(e)),ft=(0,u.dual)(3,((e,t,n)=>E.flatMap(t,(r=>E.flatMap(e,(e=>E.map(t,(t=>[n(r,t),e])))))))),dt=(0,u.dual)((e=>E.isEffect(e[0])),(function(){return pt(arguments[0],"string"===typeof arguments[1]?[I.make(arguments[1],arguments[2])]:Object.entries(arguments[1]).map((([e,t])=>I.make(e,t))))})),pt=(0,u.dual)(2,((e,t)=>E.fiberRefLocallyWith(e,E.currentMetricLabels,(e=>i.union(e,t))))),ht=(0,u.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>i?E.succeed(!0):(r.push(e),t(e,n))))}return E.map(a,(()=>r))})))),mt=(0,u.dual)(2,((e,t)=>E.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=E.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=E.flatMap(a,(i=>(0,u.pipe)(i?t(e,n):E.succeed(!1),E.map((t=>(t&&r.push(e),t))))))}return E.map(a,(()=>r))})))),gt=(0,u.dual)(2,((e,{onFailure:t,onSuccess:n})=>E.matchCauseEffect(e,{onFailure:e=>{const n=v.failureOrCause(e);switch(n._tag){case"Left":return E.zipRight(t(n.left),E.failCause(e));case"Right":return E.failCause(e)}},onSuccess:e=>E.as(n(e),e)}))),yt=(0,u.dual)(2,((e,t)=>E.catchAllCause(e,(e=>g.match(v.keepDefects(e),{onNone:()=>E.failCause(e),onSome:n=>E.zipRight(t(n),E.failCause(e))}))))),bt=(0,u.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>{const n=v.failureOrCause(e);switch(n._tag){case"Left":return E.zipRight(t(n.left),E.failCause(e));case"Right":return E.failCause(e)}},onSuccess:E.succeed}))),St=(0,u.dual)(3,((e,t,n)=>bt(e,(e=>y.isTagged(e,t)?n(e):E.void)))),vt=(0,u.dual)(2,((e,t)=>E.matchCauseEffect(e,{onFailure:e=>E.zipRight(t(e),E.failCause(e)),onSuccess:E.succeed}))),wt=e=>Et(e,s.currentTimeNanos),Et=(0,u.dual)(2,((e,t)=>ft(e,t,((e,t)=>c.nanos(t-e))))),_t=S.tracerWith,kt=_t(E.succeed),xt=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),t.length>=1?E.async(((e,r)=>{try{t(r).then((t=>e(E.exitSucceed(t))),(t=>e(E.fail(n?n(t):new E.UnknownException(t)))))}catch(i){e(E.fail(n?n(i):new E.UnknownException(i)))}})):E.async((e=>{try{t().then((t=>e(E.exitSucceed(t))),(t=>e(E.fail(n?n(t):new E.UnknownException(t)))))}catch(r){e(E.fail(n?n(r):new E.UnknownException(r)))}}))},It=(0,u.dual)(2,((e,t)=>E.flatMap(e,(e=>C({try:()=>t.try(e),catch:t.catch}))))),Tt=(0,u.dual)(2,((e,t)=>E.flatMap(e,(e=>xt({try:t.try.length>=1?n=>t.try(e,n):()=>t.try(e),catch:t.catch}))))),Ot=(0,u.dual)(2,((e,t)=>E.suspend((()=>t()?lt:N(e))))),At=(0,u.dual)(2,((e,t)=>E.flatMap(t,(t=>t?lt:N(e))))),Nt=e=>je(e,v.flatten),Mt=e=>E.withFiberRuntime((t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),E.void))),Ct=(0,u.dual)(3,((e,t,n)=>E.mapInputContext(e,(e=>o.add(e,t,n(o.unsafeGet(e,t))))))),Rt=(0,u.dual)(2,((e,t)=>E.suspend((()=>t()?E.map(e,g.some):E.succeed(g.none()))))),Ft=(0,u.dual)(3,((e,t,n)=>E.flatMap(E.fiberRefGet(t),(t=>n(t)?E.map(e,(e=>[t,g.some(e)])):E.succeed([t,g.none()]))))),Lt=(0,u.dual)(3,((e,t,n)=>E.flatMap(b.get(t),(t=>n(t)?E.map(e,(e=>[t,g.some(e)])):E.succeed([t,g.none()]))))),Pt=(0,u.dual)(2,((e,t)=>t(e))),Dt=(e,t)=>(...n)=>E.flatMap(e,(e=>t(e)(...n))),Ut=(e,t)=>(...n)=>E.map(e,(e=>t(e)(...n))),jt=e=>new Proxy({},{get:(t,n,r)=>(...t)=>E.flatMap(e,(e=>e[n](...t)))}),qt=e=>new Proxy({},{get:(t,n,r)=>E.flatMap(e,(e=>E.isEffect(e[n])?e[n]:E.succeed(e[n])))}),Wt=e=>({functions:jt(e),constants:qt(e)}),Bt=e=>E.map(E.context(),o.getOption(e)),zt=e=>E.flatMap(E.context(),o.getOption(e)),$t=function(){const e=arguments;return Se(E.flatMap(Jt,(t=>E.sync((()=>{if("string"===typeof e[0])t.attribute(e[0],e[1]);else for(const n in e[0])t.attribute(n,e[0][n])})))))},Vt=(0,u.dual)((e=>E.isEffect(e[0])),(function(){const e=arguments;return E.fiberRefLocallyWith(e[0],E.currentTracerSpanAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),Gt=zt(O.spanTag),Jt=E.flatMap(E.context(),(e=>{const t=e.unsafeMap.get(O.spanTag.key);return void 0!==t&&"Span"===t._tag?E.succeed(t):E.fail(new E.NoSuchElementException)})),Ht=(0,u.dual)((e=>E.isEffect(e[0])),((e,t,n)=>E.fiberRefLocallyWith(e,E.currentTracerSpanLinks,a.append({_tag:"SpanLink",span:t,attributes:n??{}})))),Kt=BigInt(0),Yt=(e,t,n)=>{if(!1===e.getFiberRef(E.currentTracerEnabled))return E.noopSpan(t);const r=e.getFiberRef(E.currentContext),c=e.getFiberRef(_.currentServices),u=o.get(c,O.tracerTag),d=o.get(c,s.Clock),p=e.getFiberRef(E.currentTracerTimingEnabled),h=e.getFiberRefs(),m=l.get(h,E.currentTracerSpanAnnotations),y=l.get(h,E.currentTracerSpanLinks),b=n.parent?g.some(n.parent):n.root?g.none():o.getOption(r,O.spanTag),S="Some"===y._tag?void 0!==n.links?[...a.toReadonlyArray(y.value),...n.links??[]]:a.toReadonlyArray(y.value):n.links??i.empty(),w=u.span(t,b,n.context??o.empty(),S,p?d.unsafeCurrentTimeNanos():Kt,n.kind??"internal");return"function"===typeof n.captureStackTrace&&v.spanToTrace.set(w,n.captureStackTrace),"Some"===m._tag&&f.forEach(m.value,((e,t)=>w.attribute(t,e))),void 0!==n.attributes&&Object.entries(n.attributes).forEach((([e,t])=>w.attribute(e,t))),w},Zt=(e,t)=>(t=O.addSpanStackTrace(t),E.withFiberRuntime((n=>E.succeed(Yt(n,e,t))))),Qt=E.fiberRefGet(E.currentTracerSpanAnnotations),Xt=E.fiberRefGet(E.currentTracerSpanLinks),en=(e,t,n,r)=>E.sync((()=>{"Ended"!==e.status._tag&&(E.exitIsFailure(t)&&v.spanToTrace.has(e)&&e.attribute("code.stacktrace",v.spanToTrace.get(e)()),e.end(r?n.unsafeCurrentTimeNanos():Kt,t))})),tn=(e,...t)=>{const n=O.addSpanStackTrace(1===t.length?void 0:t[0]),r=t[t.length-1];return E.withFiberRuntime((t=>{const i=Yt(t,e,n),a=t.getFiberRef(E.currentTracerTimingEnabled),s=o.get(t.getFiberRef(_.currentServices),w.clockTag);return E.onExit(r(i),(e=>en(i,e,s,a)))}))},nn=(0,u.dual)(2,((e,t)=>Ze(e,O.spanTag,t))),rn=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=O.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return tn(t,n,(t=>nn(e,t)))}return e=>tn(t,n,(t=>nn(e,t)))},an=e=>function(){let t=e.captureStackTrace??!1;if(!1!==e.captureStackTrace){const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;let r=!1;t=()=>{if(!1!==r)return r;if(n.stack){const e=n.stack.trim().split("\n");return r=e.slice(2).join("\n").trim(),r}}}return E.suspend((()=>{const n="function"===typeof e.options?e.options.apply(null,arguments):e.options;return rn(E.suspend((()=>(0,r.internalCall)((()=>e.body.apply(this,arguments))))),n.name,{...n,captureStackTrace:t})}))},sn=e=>null==e?E.fail(new E.NoSuchElementException):E.succeed(e),on=e=>E.catchAll(E.map(e,g.some),(e=>E.isNoSuchElementException(e)?lt:E.fail(e)))},597081:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>kn,EffectErrorTypeId:()=>R,EffectTypeId:()=>U,ExceededCapacityException:()=>Hn,ExceededCapacityExceptionTypeId:()=>Jn,FiberRefTypeId:()=>xt,IllegalArgumentException:()=>qn,IllegalArgumentExceptionTypeId:()=>jn,InterruptedException:()=>Dn,InterruptedExceptionTypeId:()=>Pn,InvalidPubSubCapacityException:()=>Gn,InvalidPubSubCapacityExceptionTypeId:()=>Vn,NoSuchElementException:()=>zn,NoSuchElementExceptionTypeId:()=>Bn,RequestResolverImpl:()=>zt,RequestResolverTypeId:()=>Wt,RevertFlags:()=>j,RuntimeException:()=>Fn,RuntimeExceptionTypeId:()=>Rn,ScopeTypeId:()=>_n,TimeoutException:()=>Qn,TimeoutExceptionTypeId:()=>Zn,UnknownException:()=>nr,UnknownExceptionTypeId:()=>tr,YieldableError:()=>Mn,acquireUseRelease:()=>V,allLogLevels:()=>kt,andThen:()=>be,as:()=>G,asVoid:()=>J,async:()=>Y,attemptOrElse:()=>Ke,blocked:()=>P,catchAll:()=>Q,catchAllCause:()=>Z,catchIf:()=>X,catchSome:()=>ee,causeSquash:()=>An,causeSquashWith:()=>Nn,checkInterruptible:()=>te,context:()=>ci,contextWith:()=>li,contextWithEffect:()=>ui,currentConcurrency:()=>fn,currentContext:()=>nn,currentForkScopeOverride:()=>yn,currentInterruptedCause:()=>bn,currentLogAnnotations:()=>sn,currentLogLevel:()=>on,currentLogSpan:()=>cn,currentMaxOpsBeforeYield:()=>an,currentMetricLabels:()=>mn,currentRequestBatching:()=>dn,currentSchedulingPriority:()=>rn,currentSpanFromFiber:()=>hi,currentTracerEnabled:()=>Sn,currentTracerSpanAnnotations:()=>wn,currentTracerSpanLinks:()=>En,currentTracerTimingEnabled:()=>vn,currentUnhandledErrorLogLevel:()=>pn,custom:()=>H,deferredAwait:()=>zr,deferredComplete:()=>$r,deferredCompleteWith:()=>Vr,deferredDie:()=>Zr,deferredDieSync:()=>Qr,deferredDone:()=>Gr,deferredFail:()=>Jr,deferredFailCause:()=>Kr,deferredFailCauseSync:()=>Yr,deferredFailSync:()=>Hr,deferredInterrupt:()=>Xr,deferredInterruptWith:()=>ei,deferredIsDone:()=>ti,deferredMake:()=>Wr,deferredMakeAs:()=>Br,deferredPoll:()=>ni,deferredSucceed:()=>ri,deferredSync:()=>ii,deferredUnsafeDone:()=>ai,deferredUnsafeMake:()=>qr,die:()=>se,dieMessage:()=>oe,dieSync:()=>ce,either:()=>le,exit:()=>ue,exitAs:()=>cr,exitAsVoid:()=>lr,exitCauseOption:()=>ur,exitCollectAll:()=>fr,exitDie:()=>dr,exitExists:()=>pr,exitFail:()=>hr,exitFailCause:()=>mr,exitFlatMap:()=>gr,exitFlatMapEffect:()=>yr,exitFlatten:()=>br,exitForEachEffect:()=>Sr,exitFromEither:()=>vr,exitFromOption:()=>wr,exitGetOrElse:()=>Er,exitInterrupt:()=>_r,exitIsExit:()=>ir,exitIsFailure:()=>ar,exitIsInterrupted:()=>or,exitIsSuccess:()=>sr,exitMap:()=>kr,exitMapBoth:()=>xr,exitMapError:()=>Ir,exitMapErrorCause:()=>Tr,exitMatch:()=>Or,exitMatchEffect:()=>Ar,exitSucceed:()=>Nr,exitVoid:()=>Mr,exitZip:()=>Cr,exitZipLeft:()=>Rr,exitZipPar:()=>Lr,exitZipParLeft:()=>Pr,exitZipParRight:()=>Dr,exitZipRight:()=>Fr,exitZipWith:()=>Ur,fail:()=>fe,failCause:()=>pe,failCauseSync:()=>he,failSync:()=>de,fiberId:()=>me,fiberIdWith:()=>ge,fiberRefDelete:()=>Rt,fiberRefGet:()=>Tt,fiberRefGetAndSet:()=>Ot,fiberRefGetAndUpdate:()=>At,fiberRefGetAndUpdateSome:()=>Nt,fiberRefGetWith:()=>Mt,fiberRefLocally:()=>Ht,fiberRefLocallyWith:()=>Kt,fiberRefModify:()=>Lt,fiberRefModifySome:()=>Pt,fiberRefReset:()=>Ft,fiberRefSet:()=>Ct,fiberRefUnsafeMake:()=>Yt,fiberRefUnsafeMakeContext:()=>Xt,fiberRefUnsafeMakeHashSet:()=>Zt,fiberRefUnsafeMakePatch:()=>en,fiberRefUnsafeMakeReadonlyArray:()=>Qt,fiberRefUnsafeMakeRuntimeFlags:()=>tn,fiberRefUpdate:()=>Dt,fiberRefUpdateAndGet:()=>jt,fiberRefUpdateSome:()=>Ut,fiberRefUpdateSomeAndGet:()=>qt,flatMap:()=>ye,flatten:()=>ve,flip:()=>we,forEachSequential:()=>xe,forEachSequentialDiscard:()=>Ie,if_:()=>Te,interrupt:()=>Oe,interruptAsFiber:()=>mt,interruptFiber:()=>ht,interruptWith:()=>Ae,interruptible:()=>Ne,interruptibleMask:()=>Me,intoDeferred:()=>Ce,isEffect:()=>z,isEffectError:()=>F,isExceededCapacityException:()=>Kn,isIllegalArgumentException:()=>Wn,isInterruptedException:()=>Un,isInvalidCapacityError:()=>Yn,isNoSuchElementException:()=>$n,isRequestResolver:()=>$t,isRuntimeException:()=>Ln,isTimeoutException:()=>er,isUnknownException:()=>rr,logLevelAll:()=>gt,logLevelDebug:()=>wt,logLevelError:()=>bt,logLevelFatal:()=>yt,logLevelInfo:()=>vt,logLevelNone:()=>_t,logLevelTrace:()=>Et,logLevelWarning:()=>St,makeEffectError:()=>L,map:()=>Re,mapBoth:()=>Fe,mapError:()=>Le,mapInputContext:()=>pi,matchCause:()=>Ee,matchCauseEffect:()=>_e,matchEffect:()=>ke,metricLabels:()=>gn,never:()=>pt,noopSpan:()=>gi,onError:()=>Pe,onExit:()=>De,onInterrupt:()=>Ue,orDie:()=>qe,orDieWith:()=>We,orElse:()=>je,originalInstance:()=>ie,partitionMap:()=>Be,provideContext:()=>fi,provideSomeContext:()=>di,requestBlockLocally:()=>Gt,resolverLocally:()=>Vt,runRequestBlock:()=>D,runtimeFlags:()=>ze,scopeAddFinalizer:()=>xn,scopeAddFinalizerExit:()=>In,scopeClose:()=>Tn,scopeFork:()=>On,step:()=>Se,succeed:()=>$e,suspend:()=>Ve,sync:()=>Ge,tap:()=>Je,timeoutExceptionFromDuration:()=>Xn,transplant:()=>He,uninterruptible:()=>Ye,uninterruptibleMask:()=>Ze,unsafeAsync:()=>K,updateRuntimeFlags:()=>Xe,void:()=>Qe,whenEffect:()=>et,whileLoop:()=>tt,withConcurrency:()=>nt,withFiberRuntime:()=>$,withMaxOpsBeforeYield:()=>un,withRequestBatching:()=>rt,withRuntimeFlags:()=>it,withSchedulingPriority:()=>ln,withTracerEnabled:()=>at,withTracerTiming:()=>st,withUnhandledErrorLogLevel:()=>hn,yieldNow:()=>ot,zip:()=>ct,zipFlatten:()=>lt,zipLeft:()=>ut,zipRight:()=>ft,zipWith:()=>dt});var r=n(977721),i=n(342072),a=n(889133),s=n(499779),o=n(860118),c=n(411123),l=n(382300),u=n(61915),f=n(154258),d=n(744628),p=n(353370),h=n(398826),m=n(58536),g=n(287258),y=n(847857),b=n(504491),S=n(709322),v=n(125105),w=n(364647),E=n(100726),_=n(240834),k=n(815469),x=n(668446),I=n(995515),T=n(870529),O=n(408897),A=n(168527),N=n(939909),M=n(735458),C=n(460011);const R=Symbol.for("effect/EffectError"),F=e=>(0,v.hasProperty)(e,R),L=e=>({[R]:R,_tag:"EffectError",cause:e}),P=(e,t)=>{const n=new q("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},D=e=>{const t=new q("RunBlocked");return t.effect_instruction_i0=e,t},U=Symbol.for("effect/Effect");class j{patch;op;_op=A.OP_REVERT_FLAGS;constructor(e,t){this.patch=e,this.op=t}}class q{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e}[l.symbol](e){return this===e}[p.symbol](){return p.cached(this,p.random(this))}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:(0,m.toJSON)(this.effect_instruction_i0),effect_instruction_i1:(0,m.toJSON)(this.effect_instruction_i1),effect_instruction_i2:(0,m.toJSON)(this.effect_instruction_i2)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}class W{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[l.symbol](e){return ir(e)&&"Failure"===e._op&&l.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[p.symbol](){return(0,f.pipe)(p.string(this._tag),p.combine(p.hash(this.effect_instruction_i0)),p.cached(this))}get cause(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}class B{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[l.symbol](e){return ir(e)&&"Success"===e._op&&l.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[p.symbol](){return(0,f.pipe)(p.string(this._tag),p.combine(p.hash(this.effect_instruction_i0)),p.cached(this))}get value(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:(0,m.toJSON)(this.value)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}const z=e=>(0,v.hasProperty)(e,U),$=e=>{const t=new q(A.OP_WITH_RUNTIME);return t.effect_instruction_i0=e,t},V=(0,f.dual)(3,((e,t,n)=>Ze((r=>ye(e,(e=>ye(ue(Ve((()=>r(t(e))))),(t=>Ve((()=>n(e,t))).pipe(_e({onFailure:e=>{switch(t._tag){case A.OP_FAILURE:return pe(_.parallel(t.effect_instruction_i0,e));case A.OP_SUCCESS:return pe(e)}},onSuccess:()=>t})))))))))),G=(0,f.dual)(2,((e,t)=>ye(e,(()=>$e(t))))),J=e=>G(e,void 0),H=function(){const e=new q(A.OP_COMMIT);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw new Error((0,T.getBugErrorMessage)("you're not supposed to end up here"))}return e},K=(e,t=u.none)=>{const n=new q(A.OP_ASYNC);let r;return n.effect_instruction_i0=t=>{r=e(t)},n.effect_instruction_i1=t,void 0!==r?Ue(n,(e=>r)):n},Y=(e,t=u.none)=>H(e,(function(){let e,n;function i(t){e?e(t):void 0===n&&(n=t)}const a=new q(A.OP_ASYNC);let s,o;return a.effect_instruction_i0=t=>{e=t,n&&t(n)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(o=new AbortController,s=(0,r.internalCall)((()=>this.effect_instruction_i0(i,o.signal)))):s=(0,r.internalCall)((()=>this.effect_instruction_i0(i))),s||o?Ue(a,(e=>(o&&o.abort(),s??Qe))):a})),Z=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),Q=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:t,onSuccess:$e}))),X=(0,f.dual)(3,((e,t,n)=>Z(e,(e=>{const r=_.failureOrCause(e);switch(r._tag){case"Left":return t(r.left)?n(r.left):pe(e);case"Right":return pe(r.right)}})))),ee=(0,f.dual)(2,((e,t)=>Z(e,(e=>{const n=_.failureOrCause(e);switch(n._tag){case"Left":return(0,f.pipe)(t(n.left),b.getOrElse((()=>pe(e))));case"Right":return pe(n.right)}})))),te=e=>$(((t,n)=>e(N.interruption(n.runtimeFlags)))),ne=Symbol.for("effect/SpanAnnotation"),re=Symbol.for("effect/OriginalAnnotation"),ie=e=>(0,v.hasProperty)(e,re)?e[re]:e,ae=(e,t)=>b.isSome(t)?new Proxy(e,{has:(e,t)=>t===ne||t===re||t in e,get:(n,r)=>r===ne?t.value:r===re?e:n[r]}):e,se=e=>(0,v.isObject)(e)&&!(ne in e)?$((t=>pe(_.die(ae(e,hi(t)))))):pe(_.die(e)),oe=e=>he((()=>_.die(new Fn(e)))),ce=e=>ye(Ge(e),se),le=e=>ke(e,{onFailure:e=>$e(c.left(e)),onSuccess:e=>$e(c.right(e))}),ue=e=>Ee(e,{onFailure:mr,onSuccess:Nr}),fe=e=>(0,v.isObject)(e)&&!(ne in e)?$((t=>pe(_.fail(ae(e,hi(t)))))):pe(_.fail(e)),de=e=>ye(Ge(e),fe),pe=e=>{const t=new W(A.OP_FAILURE);return t.effect_instruction_i0=e,t},he=e=>ye(Ge(e),pe),me=$((e=>$e(e.id()))),ge=e=>$((t=>e(t.id()))),ye=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_SUCCESS);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),be=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return z(n)?n:(0,v.isPromiseLike)(n)?Y((e=>{n.then((t=>e($e(t))),(t=>e(fe(new nr(t)))))})):$e(n)})))),Se=e=>{const t=new q("OnStep");return t.effect_instruction_i0=e,t},ve=e=>ye(e,f.identity),we=e=>ke(e,{onFailure:$e,onSuccess:fe}),Ee=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>$e(t.onFailure(e)),onSuccess:e=>$e(t.onSuccess(e))}))),_e=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_SUCCESS_AND_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n})),ke=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>{if(_.defects(e).length>0)return pe(_.electFailures(e));const n=_.failures(e);return n.length>0?t.onFailure(a.unsafeHead(n)):pe(e)},onSuccess:t.onSuccess}))),xe=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e),r=i.allocate(n.length);let a=0;return G(tt({while:()=>a<n.length,body:()=>t(n[a],a),step:e=>{r[a++]=e}}),r)})))),Ie=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e);let r=0;return tt({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})))),Te=(0,f.dual)((e=>"boolean"===typeof e[0]||z(e[0])),((e,t)=>z(e)?ye(e,(e=>e?t.onTrue():t.onFalse())):e?t.onTrue():t.onFalse())),Oe=ye(me,(e=>Ae(e))),Ae=e=>pe(_.interrupt(e)),Ne=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=w.enable(N.Interruption),t.effect_instruction_i1=()=>e,t},Me=e=>H(e,(function(){const e=new q(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=w.enable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Ce=(0,f.dual)(2,((e,t)=>Ze((n=>ye(ue(n(e)),(e=>Gr(t,e))))))),Re=(0,f.dual)(2,((e,t)=>ye(e,(e=>Ge((()=>t(e))))))),Fe=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>de((()=>t.onFailure(e))),onSuccess:e=>Ge((()=>t.onSuccess(e)))}))),Le=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>{const n=_.failureOrCause(e);switch(n._tag){case"Left":return de((()=>t(n.left)));case"Right":return pe(n.right)}},onSuccess:$e}))),Pe=(0,f.dual)(2,((e,t)=>De(e,(e=>sr(e)?Qe:t(e.effect_instruction_i0))))),De=(0,f.dual)(2,((e,t)=>Ze((n=>_e(n(e),{onFailure:e=>{const n=mr(e);return _e(t(n),{onFailure:t=>mr(_.sequential(e,t)),onSuccess:()=>n})},onSuccess:e=>{const n=Nr(e);return ft(t(n),n)}}))))),Ue=(0,f.dual)(2,((e,t)=>De(e,Or({onFailure:e=>_.isInterruptedOnly(e)?J(t(_.interruptors(e))):Qe,onSuccess:()=>Qe})))),je=(0,f.dual)(2,((e,t)=>Ke(e,t,$e))),qe=e=>We(e,f.identity),We=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>se(t(e)),onSuccess:$e}))),Be=(e,t)=>i.fromIterable(e).reduceRight((([e,n],r)=>{const i=t(r);switch(i._tag){case"Left":return[[i.left,...e],n];case"Right":return[e,[i.right,...n]]}}),[i.empty(),i.empty()]),ze=$(((e,t)=>$e(t.runtimeFlags))),$e=e=>{const t=new B(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Ve=e=>ye(Ge(e),f.identity),Ge=e=>{const t=new q(A.OP_SYNC);return t.effect_instruction_i0=e,t},Je=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return z(n)?G(n,e):(0,v.isPromiseLike)(n)?Y((t=>{n.then((n=>t($e(e))),(e=>t(fe(new nr(e)))))})):$e(e)})))),He=e=>$((t=>{const n=t.getFiberRef(yn),r=(0,f.pipe)(n,b.getOrElse((()=>t.scope())));return e(Ht(yn,b.some(r)))})),Ke=(0,f.dual)(3,((e,t,n)=>_e(e,{onFailure:e=>_.defects(e).length>0?pe(b.getOrThrow(_.keepDefectsAndElectFailures(e))):t(),onSuccess:n}))),Ye=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=w.disable(N.Interruption),t.effect_instruction_i1=()=>e,t},Ze=e=>H(e,(function(){const e=new q(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=w.disable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Qe=$e(void 0),Xe=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},et=(0,f.dual)(2,((e,t)=>ye(t,(t=>t?(0,f.pipe)(e,Re(b.some)):$e(b.none()))))),tt=e=>{const t=new q(A.OP_WHILE);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},nt=(0,f.dual)(2,((e,t)=>Ht(e,fn,t))),rt=(0,f.dual)(2,((e,t)=>Ht(e,dn,t))),it=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_UPDATE_RUNTIME_FLAGS);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n})),at=(0,f.dual)(2,((e,t)=>Ht(e,Sn,t))),st=(0,f.dual)(2,((e,t)=>Ht(e,vn,t))),ot=e=>{const t=new q(A.OP_YIELD);return"undefined"!==typeof e?.priority?ln(t,e.priority):t},ct=(0,f.dual)(2,((e,t)=>ye(e,(e=>Re(t,(t=>[e,t])))))),lt=(0,f.dual)(2,((e,t)=>ye(e,(e=>Re(t,(t=>[...e,t])))))),ut=(0,f.dual)(2,((e,t)=>ye(e,(e=>G(t,e))))),ft=(0,f.dual)(2,((e,t)=>ye(e,(()=>t)))),dt=(0,f.dual)(3,((e,t,n)=>ye(e,(e=>Re(t,(t=>n(e,t))))))),pt=Y((()=>{const e=setInterval((()=>{}),2**31-1);return Ge((()=>clearInterval(e)))})),ht=e=>ye(me,(t=>(0,f.pipe)(e,mt(t)))),mt=(0,f.dual)(2,((e,t)=>ye(e.interruptAsFork(t),(()=>e.await)))),gt={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},yt={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},bt={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},St={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},vt={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},wt={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},Et={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return(0,S.pipeArguments)(this,arguments)}},_t={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},kt=[gt,Et,wt,vt,St,bt,yt,_t],xt=Symbol.for("effect/FiberRef"),It={_A:e=>e},Tt=e=>Lt(e,(e=>[e,e])),Ot=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t])))),At=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t(e)])))),Nt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,b.getOrElse(t(e),(()=>e))])))),Mt=(0,f.dual)(2,((e,t)=>ye(Tt(e),t))),Ct=(0,f.dual)(2,((e,t)=>Lt(e,(()=>[void 0,t])))),Rt=e=>$((t=>(t.unsafeDeleteFiberRef(e),Qe))),Ft=e=>Ct(e,e.initial),Lt=(0,f.dual)(2,((e,t)=>$((n=>{const[r,i]=t(n.getFiberRef(e));return n.setFiberRef(e,i),$e(r)})))),Pt=(e,t,n)=>Lt(e,(e=>b.getOrElse(n(e),(()=>[t,e])))),Dt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,t(e)])))),Ut=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,b.getOrElse(t(e),(()=>e))])))),jt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=t(e);return[n,n]})))),qt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=b.getOrElse(t(e),(()=>e));return[n,n]})))),Wt=Symbol.for("effect/RequestResolver"),Bt={_A:e=>e,_R:e=>e};class zt{runAll;target;[Wt]=Bt;constructor(e,t){this.runAll=e,this.target=t}[p.symbol](){return p.cached(this,this.target?p.hash(this.target):p.random(this))}[l.symbol](e){return this.target?$t(e)&&l.equals(this.target,e.target):this===e}identified(...e){return new zt(this.runAll,a.fromIterable(e))}pipe(){return(0,S.pipeArguments)(this,arguments)}}const $t=e=>(0,v.hasProperty)(e,Wt),Vt=(0,f.dual)(3,((e,t,n)=>new zt((r=>Ht(e.runAll(r),t,n)),a.make("Locally",e,t,n)))),Gt=(e,t,n)=>E.reduce(e,Jt(t,n)),Jt=(e,t)=>({emptyCase:()=>E.empty,parCase:(e,t)=>E.par(e,t),seqCase:(e,t)=>E.seq(e,t),singleCase:(n,r)=>E.single(Vt(n,e,t),r)}),Ht=(0,f.dual)(3,((e,t,n)=>V(ut(Tt(t),Ct(t,n)),(()=>e),(e=>Ct(t,e))))),Kt=(0,f.dual)(3,((e,t,n)=>Mt(t,(r=>Ht(e,t,n(r)))))),Yt=(e,t)=>en(e,{differ:x.update(),fork:t?.fork??f.identity,join:t?.join}),Zt=e=>{const t=x.hashSet();return en(e,{differ:t,fork:t.empty})},Qt=e=>{const t=x.readonlyArray(x.update());return en(e,{differ:t,fork:t.empty})},Xt=e=>{const t=x.environment();return en(e,{differ:t,fork:t.empty})},en=(e,t)=>({[xt]:It,initial:e,diff:(e,n)=>t.differ.diff(e,n),combine:(e,n)=>t.differ.combine(e,n),patch:e=>n=>t.differ.patch(e,n),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return(0,S.pipeArguments)(this,arguments)}}),tn=e=>en(e,{differ:N.differ,fork:N.differ.empty}),nn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentContext"),(()=>Xt(s.empty()))),rn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentSchedulingPriority"),(()=>Yt(0))),an=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),(()=>Yt(2048))),sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogAnnotation"),(()=>Yt(h.empty()))),on=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogLevel"),(()=>Yt(vt))),cn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogSpan"),(()=>Yt(g.empty()))),ln=(0,f.dual)(2,((e,t)=>Ht(e,rn,t))),un=(0,f.dual)(2,((e,t)=>Ht(e,an,t))),fn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentConcurrency"),(()=>Yt("unbounded"))),dn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentRequestBatching"),(()=>Yt(!0))),pn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),(()=>Yt(b.some(wt)))),hn=(0,f.dual)(2,((e,t)=>Ht(e,pn,t))),mn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMetricLabels"),(()=>Qt(i.empty()))),gn=Tt(mn),yn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentForkScopeOverride"),(()=>Yt(b.none(),{fork:()=>b.none(),join:(e,t)=>e}))),bn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentInterruptedCause"),(()=>Yt(_.empty,{fork:()=>_.empty,join:(e,t)=>e}))),Sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerEnabled"),(()=>Yt(!0))),vn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerTiming"),(()=>Yt(!0))),wn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),(()=>Yt(h.empty()))),En=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),(()=>Yt(a.empty()))),_n=Symbol.for("effect/Scope"),kn=Symbol.for("effect/CloseableScope"),xn=(e,t)=>e.addFinalizer((()=>J(t))),In=(e,t)=>e.addFinalizer(t),Tn=(e,t)=>e.close(t),On=(e,t)=>e.fork(t),An=e=>Nn(f.identity)(e),Nn=(0,f.dual)(2,((e,t)=>{const n=(0,f.pipe)(e,_.failureOption,b.map(t));switch(n._tag){case"None":return(0,f.pipe)(_.defects(e),a.head,b.match({onNone:()=>{const t=i.fromIterable(_.interruptors(e)).flatMap((e=>i.fromIterable(u.ids(e)).map((e=>`#${e}`))));return new Dn(t?`Interrupted by fibers: ${t.join(", ")}`:void 0)},onSome:f.identity}));case"Some":return n.value}})),Mn=function(){class e extends globalThis.Error{commit(){return fe(this)}toJSON(){return{...this}}[m.NodeInspectSymbol](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}\n${this.stack.split("\n").slice(1).join("\n")}`:this.toString():this}}return Object.assign(e.prototype,I.StructuralCommitPrototype),e}(),Cn=(e,t)=>{class n extends Mn{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},Rn=Symbol.for("effect/Cause/errors/RuntimeException"),Fn=Cn({[Rn]:Rn},"RuntimeException"),Ln=e=>(0,v.hasProperty)(e,Rn),Pn=Symbol.for("effect/Cause/errors/InterruptedException"),Dn=Cn({[Pn]:Pn},"InterruptedException"),Un=e=>(0,v.hasProperty)(e,Pn),jn=Symbol.for("effect/Cause/errors/IllegalArgument"),qn=Cn({[jn]:jn},"IllegalArgumentException"),Wn=e=>(0,v.hasProperty)(e,jn),Bn=Symbol.for("effect/Cause/errors/NoSuchElement"),zn=Cn({[Bn]:Bn},"NoSuchElementException"),$n=e=>(0,v.hasProperty)(e,Bn),Vn=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),Gn=Cn({[Vn]:Vn},"InvalidPubSubCapacityException"),Jn=Symbol.for("effect/Cause/errors/ExceededCapacityException"),Hn=Cn({[Jn]:Jn},"ExceededCapacityException"),Kn=e=>(0,v.hasProperty)(e,Jn),Yn=e=>(0,v.hasProperty)(e,Vn),Zn=Symbol.for("effect/Cause/errors/Timeout"),Qn=Cn({[Zn]:Zn},"TimeoutException"),Xn=e=>new Qn(`Operation timed out before the specified duration of '${o.format(e)}' elapsed`),er=e=>(0,v.hasProperty)(e,Zn),tr=Symbol.for("effect/Cause/errors/UnknownException"),nr=function(){class e extends Mn{error;_tag="UnknownException";constructor(e,t){super(t??((0,v.hasProperty)(e,"message")&&(0,v.isString)(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[tr]:tr,name:"UnknownException"}),e}(),rr=e=>(0,v.hasProperty)(e,tr),ir=e=>z(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),ar=e=>"Failure"===e._tag,sr=e=>"Success"===e._tag,or=e=>{switch(e._tag){case A.OP_FAILURE:return _.isInterrupted(e.effect_instruction_i0);case A.OP_SUCCESS:return!1}},cr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t)}})),lr=e=>cr(e,void 0),ur=e=>{switch(e._tag){case A.OP_FAILURE:return b.some(e.effect_instruction_i0);case A.OP_SUCCESS:return b.none()}},fr=(e,t)=>jr(e,t?.parallel?_.parallel:_.sequential),dr=e=>mr(_.die(e)),pr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return!1;case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),hr=e=>mr(_.fail(e)),mr=e=>{const t=new W(A.OP_FAILURE);return t.effect_instruction_i0=e,t},gr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),yr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return $e(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),br=e=>(0,f.pipe)(e,gr(f.identity)),Sr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return $e(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return ue(t(e.effect_instruction_i0))}})),vr=e=>{switch(e._tag){case"Left":return hr(e.left);case"Right":return Nr(e.right)}},wr=e=>{switch(e._tag){case"None":return hr(void 0);case"Some":return Nr(e.value)}},Er=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return e.effect_instruction_i0}})),_r=e=>mr(_.interrupt(e)),kr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t(e.effect_instruction_i0))}})),xr=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,_.map(t)));case A.OP_SUCCESS:return Nr(n(e.effect_instruction_i0))}})),Ir=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,_.map(t)));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Tr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(t(e.effect_instruction_i0));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Or=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Ar=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Nr=e=>{const t=new B(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Mr=Nr(void 0),Cr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:_.sequential}))),Rr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:_.sequential}))),Fr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:_.sequential}))),Lr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:_.parallel}))),Pr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:_.parallel}))),Dr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:_.parallel}))),Ur=(0,f.dual)(3,((e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case A.OP_FAILURE:switch(t._tag){case A.OP_SUCCESS:return mr(e.effect_instruction_i0);case A.OP_FAILURE:return mr(n(e.effect_instruction_i0,t.effect_instruction_i0))}case A.OP_SUCCESS:switch(t._tag){case A.OP_SUCCESS:return Nr(r(e.effect_instruction_i0,t.effect_instruction_i0));case A.OP_FAILURE:return mr(t.effect_instruction_i0)}}})),jr=(e,t)=>{const n=a.fromIterable(e);return a.isNonEmpty(n)?(0,f.pipe)(a.tailNonEmpty(n),i.reduce((0,f.pipe)(a.headNonEmpty(n),kr(a.of)),((e,n)=>(0,f.pipe)(e,Ur(n,{onSuccess:(e,t)=>(0,f.pipe)(e,a.prepend(t)),onFailure:t})))),kr(a.reverse),kr((e=>a.toReadonlyArray(e))),b.some):b.none()},qr=e=>({[k.DeferredTypeId]:k.deferredVariance,state:y.make(k.pending([])),blockingOn:e,pipe(){return(0,S.pipeArguments)(this,arguments)}}),Wr=()=>ye(me,(e=>Br(e))),Br=e=>Ge((()=>qr(e))),zr=e=>Y((t=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return t(n.effect);case O.OP_STATE_PENDING:return n.joiners.push(t),si(e,t)}}),e.blockingOn),$r=(0,f.dual)(2,((e,t)=>Ce(t,e))),Vr=(0,f.dual)(2,((e,t)=>Ge((()=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return!1;case O.OP_STATE_PENDING:y.set(e.state,k.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t);return!0}})))),Gr=(0,f.dual)(2,((e,t)=>Vr(e,t))),Jr=(0,f.dual)(2,((e,t)=>Vr(e,fe(t)))),Hr=(0,f.dual)(2,((e,t)=>Vr(e,de(t)))),Kr=(0,f.dual)(2,((e,t)=>Vr(e,pe(t)))),Yr=(0,f.dual)(2,((e,t)=>Vr(e,he(t)))),Zr=(0,f.dual)(2,((e,t)=>Vr(e,se(t)))),Qr=(0,f.dual)(2,((e,t)=>Vr(e,ce(t)))),Xr=e=>ye(me,(t=>Vr(e,Ae(t)))),ei=(0,f.dual)(2,((e,t)=>Vr(e,Ae(t)))),ti=e=>Ge((()=>y.get(e.state)._tag===O.OP_STATE_DONE)),ni=e=>Ge((()=>{const t=y.get(e.state);switch(t._tag){case O.OP_STATE_DONE:return b.some(t.effect);case O.OP_STATE_PENDING:return b.none()}})),ri=(0,f.dual)(2,((e,t)=>Vr(e,$e(t)))),ii=(0,f.dual)(2,((e,t)=>Vr(e,Ge(t)))),ai=(e,t)=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){y.set(e.state,k.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t)}},si=(e,t)=>Ge((()=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){const e=n.joiners.indexOf(t);e>=0&&n.joiners.splice(e,1)}})),oi=Tt(nn),ci=()=>oi,li=e=>Re(ci(),e),ui=e=>ye(ci(),e),fi=(0,f.dual)(2,((e,t)=>Ht(nn,t)(e))),di=(0,f.dual)(2,((e,t)=>Kt(nn,(e=>s.merge(e,t)))(e))),pi=(0,f.dual)(2,((e,t)=>ui((n=>fi(e,t(n)))))),hi=e=>{const t=e.getFiberRef(nn).unsafeMap.get(C.spanTag.key);return void 0!==t&&"Span"===t._tag?b.some(t):b.none()},mi={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:b.none(),context:s.empty(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Mr},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},gi=e=>{const t=Object.create(mi);return t.name=e,t}},305190:(e,t,n)=>{n.r(t),n.d(t,{ArrayProto:()=>s,Structural:()=>o,struct:()=>c});var r=n(382300),i=n(353370),a=n(995515);const s=Object.assign(Object.create(Array.prototype),{[i.symbol](){return i.cached(this,i.array(this))},[r.symbol](e){return!(!Array.isArray(e)||this.length!==e.length)&&this.every(((t,n)=>r.equals(t,e[n])))}}),o=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=a.StructuralPrototype,e}(),c=e=>Object.assign(Object.create(a.StructuralPrototype),e)},130949:(e,t,n)=>{n.r(t),n.d(t,{clockWith:()=>g,config:()=>E,configOrDie:()=>_,configProviderWith:()=>w,currentServices:()=>h,currentTimeMillis:()=>y,currentTimeNanos:()=>b,liveServices:()=>p,next:()=>I,nextBoolean:()=>O,nextInt:()=>T,nextIntBetween:()=>N,nextRange:()=>A,randomWith:()=>k,shuffle:()=>M,sleep:()=>m,tracerWith:()=>C,withClock:()=>S,withConfigProvider:()=>v,withRandom:()=>x,withTracer:()=>R});var r=n(499779),i=n(860118),a=n(154258),s=n(744628),o=n(477926),c=n(974627),l=n(597081),u=n(893443),f=n(934981),d=n(460011);const p=(0,a.pipe)(r.empty(),r.add(o.clockTag,o.make()),r.add(u.consoleTag,u.defaultConsole),r.add(f.randomTag,f.make(Math.random())),r.add(c.configProviderTag,c.fromEnv()),r.add(d.tracerTag,d.nativeTracer)),h=(0,s.globalValue)(Symbol.for("effect/DefaultServices/currentServices"),(()=>l.fiberRefUnsafeMakeContext(p))),m=e=>{const t=i.decode(e);return g((e=>e.sleep(t)))},g=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,o.clockTag)))),y=g((e=>e.currentTimeMillis)),b=g((e=>e.currentTimeNanos)),S=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(o.clockTag,t))(e))),v=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(c.configProviderTag,t))(e))),w=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,c.configProviderTag)))),E=e=>w((t=>t.load(e))),_=e=>l.orDie(w((t=>t.load(e)))),k=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,f.randomTag)))),x=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(f.randomTag,t))(e))),I=k((e=>e.next)),T=k((e=>e.nextInt)),O=k((e=>e.nextBoolean)),A=(e,t)=>k((n=>n.nextRange(e,t))),N=(e,t)=>k((n=>n.nextIntBetween(e,t))),M=e=>k((t=>t.shuffle(e))),C=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,d.tracerTag)))),R=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(d.tracerTag,t))(e)))},893443:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>a,consoleTag:()=>s,defaultConsole:()=>o});var r=n(499779),i=n(597081);const a=Symbol.for("effect/Console"),s=r.GenericTag("effect/Console"),o={[a]:a,assert:(e,...t)=>i.sync((()=>{console.assert(e,...t)})),clear:i.sync((()=>{console.clear()})),count:e=>i.sync((()=>{console.count(e)})),countReset:e=>i.sync((()=>{console.countReset(e)})),debug:(...e)=>i.sync((()=>{console.debug(...e)})),dir:(e,t)=>i.sync((()=>{console.dir(e,t)})),dirxml:(...e)=>i.sync((()=>{console.dirxml(...e)})),error:(...e)=>i.sync((()=>{console.error(...e)})),group:e=>e?.collapsed?i.sync((()=>console.groupCollapsed(e?.label))):i.sync((()=>console.group(e?.label))),groupEnd:i.sync((()=>{console.groupEnd()})),info:(...e)=>i.sync((()=>{console.info(...e)})),log:(...e)=>i.sync((()=>{console.log(...e)})),table:(e,t)=>i.sync((()=>{console.table(e,t)})),time:e=>i.sync((()=>console.time(e))),timeEnd:e=>i.sync((()=>console.timeEnd(e))),timeLog:(e,...t)=>i.sync((()=>{console.timeLog(e,...t)})),trace:(...e)=>i.sync((()=>{console.trace(...e)})),warn:(...e)=>i.sync((()=>{console.warn(...e)})),unsafe:console}},815469:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,deferredVariance:()=>a,done:()=>o,pending:()=>s});var r=n(408897);const i=Symbol.for("effect/Deferred"),a={_E:e=>e,_A:e=>e},s=e=>({_tag:r.OP_STATE_PENDING,joiners:e}),o=e=>({_tag:r.OP_STATE_DONE,effect:e})},668446:(e,t,n)=>{n.r(t),n.d(t,{DifferProto:()=>d,DifferTypeId:()=>f,chunk:()=>m,environment:()=>h,hashMap:()=>g,hashSet:()=>y,make:()=>p,orElseEither:()=>b,readonlyArray:()=>S,transform:()=>v,update:()=>w,updateWith:()=>E,zip:()=>_});var r=n(382300),i=n(154258),a=n(812460),s=n(812470),o=n(218821),c=n(417335),l=n(595940),u=n(222770);const f=Symbol.for("effect/Differ"),d={[f]:{_P:i.identity,_V:i.identity}},p=e=>{const t=Object.create(d);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},h=()=>p({empty:s.empty(),combine:(e,t)=>s.combine(t)(e),diff:(e,t)=>s.diff(e,t),patch:(e,t)=>s.patch(t)(e)}),m=e=>p({empty:a.empty(),combine:(e,t)=>a.combine(t)(e),diff:(t,n)=>a.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>a.patch(n,e)(t)}),g=e=>p({empty:o.empty(),combine:(e,t)=>o.combine(t)(e),diff:(t,n)=>o.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>o.patch(n,e)(t)}),y=()=>p({empty:c.empty(),combine:(e,t)=>c.combine(t)(e),diff:(e,t)=>c.diff(e,t),patch:(e,t)=>c.patch(t)(e)}),b=i.dual(2,((e,t)=>p({empty:l.empty(),combine:(e,t)=>l.combine(e,t),diff:(n,r)=>l.diff({oldValue:n,newValue:r,left:e,right:t}),patch:(n,r)=>l.patch(n,{oldValue:r,left:e,right:t})}))),S=e=>p({empty:u.empty(),combine:(e,t)=>u.combine(e,t),diff:(t,n)=>u.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>u.patch(t,n,e)}),v=i.dual(2,((e,{toNew:t,toOld:n})=>p({empty:e.empty,combine:(t,n)=>e.combine(t,n),diff:(t,r)=>e.diff(n(t),n(r)),patch:(r,i)=>t(e.patch(r,n(i)))}))),w=()=>E(((e,t)=>t)),E=e=>p({empty:i.identity,combine:(e,t)=>e===i.identity?t:t===i.identity?e:n=>t(e(n)),diff:(e,t)=>r.equals(e,t)?i.identity:(0,i.constant)(t),patch:(t,n)=>e(n,t(n))}),_=i.dual(2,((e,t)=>p({empty:[e.empty,t.empty],combine:(n,r)=>[e.combine(n[0],r[0]),t.combine(n[1],r[1])],diff:(n,r)=>[e.diff(n[0],r[0]),t.diff(n[1],r[1])],patch:(n,r)=>[e.patch(n[0],r[0]),t.patch(n[1],r[1])]})))},812460:(e,t,n)=>{n.r(t),n.d(t,{ChunkPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>v});var r=n(889133),i=n(382300),a=n(154258),s=n(305190);const o=Symbol.for("effect/DifferChunkPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=Object.assign(Object.create(l),{_tag:"Append"}),m=Object.assign(Object.create(l),{_tag:"Slice"}),g=Object.assign(Object.create(l),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=r.unsafeGet(t)(e.oldValue),o=r.unsafeGet(t)(e.newValue),c=e.differ.diff(s,o);i.equals(c,e.differ.empty)||(n=(0,a.pipe)(n,S(y(t,c)))),t+=1}return t<e.oldValue.length&&(n=(0,a.pipe)(n,S(((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t)))),t<e.newValue.length&&(n=(0,a.pipe)(n,S((e=>{const t=Object.create(h);return t.values=e,t})(r.drop(t)(e.newValue))))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),v=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Append":i=r.appendAll(e.values)(i),a=t;break;case"Slice":{const n=r.toReadonlyArray(i);i=r.unsafeFromArray(n.slice(e.from,e.until)),a=t;break}case"Update":{const s=r.toReadonlyArray(i);s[e.index]=n.patch(e.patch,s[e.index]),i=r.unsafeFromArray(s),a=t;break}}}return i}))},812470:(e,t,n)=>{n.r(t),n.d(t,{ContextPatchTypeId:()=>c,combine:()=>E,diff:()=>w,empty:()=>p,patch:()=>_});var r=n(889133),i=n(382300),a=n(154258),s=n(312723),o=n(305190);const c=Symbol.for("effect/DifferContextPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=Object.assign(Object.create(u),{_tag:"AddService"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.service=t,n},y=Object.assign(Object.create(u),{_tag:"RemoveService"}),b=e=>{const t=Object.create(y);return t.key=e,t},S=Object.assign(Object.create(u),{_tag:"UpdateService"}),v=(e,t)=>{const n=Object.create(S);return n.key=e,n.update=t,n},w=(e,t)=>{const n=new Map(e.unsafeMap);let r=p();for(const[a,s]of t.unsafeMap.entries())if(n.has(a)){const e=n.get(a);n.delete(a),i.equals(e,s)||(r=E(v(a,(()=>s)))(r))}else n.delete(a),r=E(g(a,s))(r);for(const[i]of n.entries())r=E(b(i))(r);return r},E=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),_=a.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=!1,i=r.of(e);const a=new Map(t.unsafeMap);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AddService":a.set(e.key,e.service),i=t;break;case"AndThen":i=r.prepend(r.prepend(t,e.second),e.first);break;case"RemoveService":a.delete(e.key),i=t;break;case"UpdateService":a.set(e.key,e.update(a.get(e.key))),n=!0,i=t}}if(!n)return(0,s.makeContext)(a);const o=new Map;for(const[r]of t.unsafeMap)a.has(r)&&(o.set(r,a.get(r)),a.delete(r));for(const[r,s]of a)o.set(r,s);return(0,s.makeContext)(o)}))},218821:(e,t,n)=>{n.r(t),n.d(t,{HashMapPatchTypeId:()=>c,combine:()=>w,diff:()=>v,empty:()=>p,patch:()=>E});var r=n(889133),i=n(382300),a=n(154258),s=n(398826),o=n(305190);const c=Symbol.for("effect/DifferHashMapPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Key:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=Object.assign(Object.create(u),{_tag:"Add"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.value=t,n},y=Object.assign(Object.create(u),{_tag:"Remove"}),b=Object.assign(Object.create(u),{_tag:"Update"}),S=(e,t)=>{const n=Object.create(b);return n.key=e,n.patch=t,n},v=e=>{const[t,n]=s.reduce([e.oldValue,p()],(([t,n],r,a)=>{const o=s.get(a)(t);switch(o._tag){case"Some":{const c=e.differ.diff(o.value,r);return i.equals(c,e.differ.empty)?[s.remove(a)(t),n]:[s.remove(a)(t),w(S(a,c))(n)]}case"None":return[t,w(g(a,r))(n)]}}))(e.newValue);return s.reduce(n,((e,t,n)=>w((e=>{const t=Object.create(y);return t.key=e,t})(n))(e)))(t)},w=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),E=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":i=s.set(e.key,e.value)(i),a=t;break;case"Remove":i=s.remove(e.key)(i),a=t;break;case"Update":{const r=s.get(e.key)(i);"Some"===r._tag&&(i=s.set(e.key,n.patch(e.patch,r.value))(i)),a=t;break}}}return i}))},417335:(e,t,n)=>{n.r(t),n.d(t,{HashSetPatchTypeId:()=>o,combine:()=>v,diff:()=>S,empty:()=>d,makeAdd:()=>g,makeAndThen:()=>h,makeRemove:()=>b,patch:()=>w});var r=n(889133),i=n(154258),a=n(895868),s=n(305190);const o=Symbol.for("effect/DifferHashSetPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Key:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=(e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n},m=Object.assign(Object.create(l),{_tag:"Add"}),g=e=>{const t=Object.create(m);return t.value=e,t},y=Object.assign(Object.create(l),{_tag:"Remove"}),b=e=>{const t=Object.create(y);return t.value=e,t},S=(e,t)=>{const[n,r]=a.reduce([e,d()],(([e,t],n)=>a.has(n)(e)?[a.remove(n)(e),t]:[e,v(g(n))(t)]))(t);return a.reduce(r,((e,t)=>v(b(t))(e)))(n)},v=i.dual(2,((e,t)=>h(e,t))),w=i.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=t,i=r.of(e);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":i=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":n=a.add(e.value)(n),i=t;break;case"Remove":n=a.remove(e.value)(n),i=t}}return n}))},595940:(e,t,n)=>{n.r(t),n.d(t,{OrPatchTypeId:()=>c,combine:()=>x,diff:()=>k,empty:()=>p,makeAndThen:()=>m,makeSetLeft:()=>y,makeSetRight:()=>S,makeUpdateLeft:()=>w,makeUpdateRight:()=>_,patch:()=>I});var r=n(889133),i=n(411123),a=n(382300),s=n(154258),o=n(305190);const c=Symbol.for("effect/DifferOrPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Key:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=(e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n},g=Object.assign(Object.create(u),{_tag:"SetLeft"}),y=e=>{const t=Object.create(g);return t.value=e,t},b=Object.assign(Object.create(u),{_tag:"SetRight"}),S=e=>{const t=Object.create(b);return t.value=e,t},v=Object.assign(Object.create(u),{_tag:"UpdateLeft"}),w=e=>{const t=Object.create(v);return t.patch=e,t},E=Object.assign(Object.create(u),{_tag:"UpdateRight"}),_=e=>{const t=Object.create(E);return t.patch=e,t},k=e=>{switch(e.oldValue._tag){case"Left":switch(e.newValue._tag){case"Left":{const t=e.left.diff(e.oldValue.left,e.newValue.left);return a.equals(t,e.left.empty)?p():w(t)}case"Right":return S(e.newValue.right)}case"Right":switch(e.newValue._tag){case"Left":return y(e.newValue.left);case"Right":{const t=e.right.diff(e.oldValue.right,e.newValue.right);return a.equals(t,e.right.empty)?p():_(t)}}}},x=s.dual(2,((e,t)=>m(e,t))),I=s.dual(2,((e,{left:t,oldValue:n,right:a})=>{if("Empty"===e._tag)return n;let s=r.of(e),o=n;for(;r.isNonEmpty(s);){const e=r.headNonEmpty(s),n=r.tailNonEmpty(s);switch(e._tag){case"Empty":s=n;break;case"AndThen":s=r.prepend(e.first)(r.prepend(e.second)(n));break;case"UpdateLeft":"Left"===o._tag&&(o=i.left(t.patch(e.patch,o.left))),s=n;break;case"UpdateRight":"Right"===o._tag&&(o=i.right(a.patch(e.patch,o.right))),s=n;break;case"SetLeft":o=i.left(e.value),s=n;break;case"SetRight":o=i.right(e.value),s=n}}return o}))},222770:(e,t,n)=>{n.r(t),n.d(t,{ReadonlyArrayPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>v});var r=n(342072),i=n(382300),a=n(154258),s=n(305190);const o=Symbol.for("effect/DifferReadonlyArrayPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=Object.assign(Object.create(l),{_tag:"Append"}),m=Object.assign(Object.create(l),{_tag:"Slice"}),g=Object.assign(Object.create(l),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],a=e.newValue[t],s=e.differ.diff(r,a);i.equals(s,e.differ.empty)||(n=S(n,y(t,s))),t+=1}return t<e.oldValue.length&&(n=S(n,((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t))),t<e.newValue.length&&(n=S(n,(e=>{const t=Object.create(h);return t.values=e,t})(r.drop(t)(e.newValue)))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),v=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t.slice(),a=r.of(e);for(;r.isNonEmptyArray(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":t.unshift(e.first,e.second),a=t;break;case"Append":for(const t of e.values)i.push(t);a=t;break;case"Slice":i=i.slice(e.from,e.until),a=t;break;case"Update":i[e.index]=n.patch(e.patch,i[e.index]),a=t}}return i}))},997385:(e,t,n)=>{n.r(t),n.d(t,{bind:()=>s,bindTo:()=>a,let_:()=>i});var r=n(154258);const i=e=>(0,r.dual)(3,((t,n,r)=>e(t,(e=>Object.assign({},e,{[n]:r(e)}))))),a=e=>(0,r.dual)(2,((t,n)=>e(t,(e=>({[n]:e}))))),s=(e,t)=>(0,r.dual)(3,((n,r,i)=>t(n,(t=>e(i(t),(e=>Object.assign({},t,{[r]:e})))))))},861819:(e,t,n)=>{n.r(t),n.d(t,{SynchronizedTypeId:()=>Q,awaitAllChildren:()=>O,cached:()=>A,cachedFunction:()=>z,cachedInvalidateWithTTL:()=>N,ensuringChild:()=>F,ensuringChildren:()=>L,forkAll:()=>P,forkIn:()=>D,forkScoped:()=>U,fromFiber:()=>j,fromFiberEffect:()=>q,makeSemaphore:()=>T,makeSynchronized:()=>te,raceFirst:()=>$,scheduleForked:()=>V,supervised:()=>G,synchronizedVariance:()=>X,timeout:()=>J,timeoutFail:()=>H,timeoutFailCause:()=>K,timeoutOption:()=>Y,timeoutTo:()=>Z,unsafeMakeSemaphore:()=>I,unsafeMakeSynchronized:()=>ne,updateSomeAndGetEffectSynchronized:()=>re,zipFiber:()=>ie,zipLeftFiber:()=>ae,zipRightFiber:()=>se,zipWithFiber:()=>oe});var r=n(860118),i=n(382300),a=n(676966),s=n(61915),o=n(154258),c=n(353370),l=n(806874),u=n(504491),f=n(709322),d=n(125105),p=n(168454),h=n(84221),m=n(240834),g=n(694375),y=n(597081),b=n(49859),S=n(874338),v=n(365519),w=n(738460),E=n(858061),_=n(457685),k=n(125572);class x{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>y.async((t=>{if(this.free<e){const n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,t(y.succeed(e)))};return this.waiters.add(n),y.sync((()=>{this.waiters.delete(n)}))}return this.taken+=e,t(y.succeed(e))}));updateTaken=e=>y.withFiberRuntime((t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(h.currentScheduler).scheduleTask((()=>{const e=this.waiters.values();let t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()}),t.getFiberRef(y.currentSchedulingPriority)),y.succeed(this.free))));release=e=>this.updateTaken((t=>t-e));releaseAll=this.updateTaken((e=>0));withPermits=e=>t=>y.uninterruptibleMask((n=>y.flatMap(n(this.take(e)),(e=>v.ensuring(n(t),this.release(e))))))}const I=e=>new x(e),T=e=>y.sync((()=>I(e))),O=e=>L(e,v.fiberAwaitAll),A=(0,o.dual)(2,((e,t)=>y.map(N(e,t),(e=>e[0])))),N=(0,o.dual)(2,((e,t)=>{const n=r.decode(t);return y.flatMap(y.context(),(t=>y.map(te(u.none()),(r=>[y.provideContext(C(e,n,r),t),R(r)]))))})),M=(e,t,n)=>{const i=r.toMillis(r.decode(t));return(0,o.pipe)(y.deferredMake(),y.tap((t=>y.intoDeferred(e,t))),y.map((e=>u.some([n+i,e]))))},C=(e,t,n)=>y.uninterruptibleMask((r=>(0,o.pipe)(g.clockWith((e=>e.currentTimeMillis)),y.flatMap((r=>re(n,(n=>{switch(n._tag){case"None":return u.some(M(e,t,r));case"Some":{const[i]=n.value;return i-r<=0?u.some(M(e,t,r)):u.none()}}})))),y.flatMap((e=>u.isNone(e)?y.dieMessage("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):r(y.deferredAwait(e.value[1]))))))),R=e=>E.set(e,u.none()),F=(0,o.dual)(2,((e,t)=>L(e,(e=>t(v.fiberAll(e)))))),L=(0,o.dual)(2,((e,t)=>y.flatMap(k.track,(n=>(0,o.pipe)(G(e,n),v.ensuring(y.flatMap(n.value,t))))))),P=(0,o.dual)((e=>d.isIterable(e[0])),((e,t)=>t?.discard?y.forEachSequentialDiscard(e,v.fork):y.map(y.forEachSequential(e,v.fork),v.fiberAll))),D=(0,o.dual)(2,((e,t)=>y.uninterruptibleMask((n=>y.flatMap(t.fork(b.sequential),(t=>(0,o.pipe)(n(e),y.onExit((e=>t.close(e))),v.forkDaemon,y.tap((e=>t.addFinalizer((()=>y.fiberIdWith((t=>i.equals(t,e.id())?y.void:y.asVoid(y.interruptFiber(e))))))))))))))),U=e=>v.scopeWith((t=>D(e,t))),j=e=>S.join(e),q=e=>y.suspend((()=>y.flatMap(e,S.join))),W=Symbol.for("effect/Effect/memoizeFunction.key");class B{a;eq;[W]=W;constructor(e,t){this.a=e,this.eq=t}[i.symbol](e){return!!d.hasProperty(e,W)&&(this.eq?this.eq(this.a,e.a):i.equals(this.a,e.a))}[c.symbol](){return this.eq?0:c.cached(this,c.hash(this.a))}}const z=(e,t)=>(0,o.pipe)(y.sync((()=>l.empty())),y.flatMap(te),y.map((n=>r=>(0,o.pipe)(n.modifyEffect((n=>{const i=(0,o.pipe)(n,l.get(new B(r,t)));return u.isNone(i)?(0,o.pipe)(y.deferredMake(),y.tap((t=>(0,o.pipe)(g.diffFiberRefs(e(r)),y.intoDeferred(t),v.fork))),y.map((e=>[e,(0,o.pipe)(n,l.set(new B(r,t),e))]))):y.succeed([i.value,n])})),y.flatMap(y.deferredAwait),y.flatMap((([e,t])=>(0,o.pipe)(g.patchFiberRefs(e),y.as(t)))))))),$=(0,o.dual)(2,((e,t)=>(0,o.pipe)(y.exit(e),v.race(y.exit(t)),(e=>y.flatten(e))))),V=(0,o.dual)(2,((e,t)=>(0,o.pipe)(e,_.schedule_Effect(t),U))),G=(0,o.dual)(2,((e,t)=>y.fiberRefLocallyWith(v.currentSupervisor,(e=>e.zip(t)))(e))),J=(0,o.dual)(2,((e,t)=>H(e,{onTimeout:()=>y.timeoutExceptionFromDuration(t),duration:t}))),H=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failSync(n),onSuccess:y.succeed,duration:t})))),K=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failCauseSync(n),onSuccess:y.succeed,duration:t})))),Y=(0,o.dual)(2,((e,t)=>Z(e,{duration:t,onSuccess:u.some,onTimeout:u.none}))),Z=(0,o.dual)(2,((e,{duration:t,onSuccess:n,onTimeout:r})=>y.fiberIdWith((i=>v.raceFibersWith(e,y.interruptible(g.sleep(t)),{onSelfWin:(e,t)=>y.flatMap(e.await,(r=>"Success"===r._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),n(r.value)))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(r.cause))))),onOtherWin:(e,t)=>y.flatMap(e.await,(n=>"Success"===n._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),r()))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(n.cause))))),otherScope:w.globalScope}))))),Q=Symbol.for("effect/Ref/SynchronizedRef"),X={_A:e=>e};class ee{ref;withLock;[Q]=X;[E.RefTypeId]=E.refVariance;[p.TypeId];constructor(e,t){this.ref=e,this.withLock=t,this[p.TypeId]=p.TypeId,this.get=E.get(this.ref)}get;modify(e){return this.modifyEffect((t=>y.succeed(e(t))))}modifyEffect(e){return this.withLock((0,o.pipe)(y.flatMap(E.get(this.ref),e),y.flatMap((([e,t])=>y.as(E.set(this.ref,t),e)))))}pipe(){return(0,f.pipeArguments)(this,arguments)}}const te=e=>y.sync((()=>ne(e))),ne=e=>{const t=E.unsafeMake(e),n=I(1);return new ee(t,n.withPermits(1))},re=(0,o.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return y.succeed([e,e]);case"Some":return y.map(n.value,(e=>[e,e]))}})))),ie=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>[e,t])))),ae=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>e)))),se=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>t)))),oe=(0,o.dual)(3,((e,t,n)=>({[S.FiberTypeId]:S.fiberVariance,id:()=>(0,o.pipe)(e.id(),s.getOrElse(t.id())),await:(0,o.pipe)(e.await,y.flatten,v.zipWithOptions(y.flatten(t.await),n,{concurrent:!0}),y.exit),children:e.children,inheritAll:y.zipRight(t.inheritAll,e.inheritAll),poll:y.zipWith(e.poll,t.poll,((e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>a.zipWith(e,t,{onSuccess:n,onFailure:m.parallel}))))))))),interruptAsFork:n=>y.zipRight(e.interruptAsFork(n),t.interruptAsFork(n)),pipe(){return(0,f.pipeArguments)(this,arguments)}})))},995515:(e,t,n)=>{n.r(t),n.d(t,{Base:()=>b,ChannelTypeId:()=>d,CommitPrototype:()=>g,EffectPrototype:()=>h,EffectTypeId:()=>l,SinkTypeId:()=>f,StreamTypeId:()=>u,StructuralBase:()=>S,StructuralCommitPrototype:()=>y,StructuralPrototype:()=>m,effectVariance:()=>p});var r=n(382300),i=n(353370),a=n(709322),s=n(977721),o=n(168527),c=n(635420);const l=Symbol.for("effect/Effect"),u=Symbol.for("effect/Stream"),f=Symbol.for("effect/Sink"),d=Symbol.for("effect/Channel"),p={_R:e=>e,_E:e=>e,_A:e=>e,_V:c.getCurrentVersion()},h={[l]:p,[u]:p,[f]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[d]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[r.symbol](e){return this===e},[i.symbol](){return i.cached(this,i.random(this))},[Symbol.iterator](){return new s.SingleShotGen(new s.YieldWrap(this))},pipe(){return(0,a.pipeArguments)(this,arguments)}},m={[i.symbol](){return i.cached(this,i.structure(this))},[r.symbol](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const i of t)if(!(i in e)||!r.equals(this[i],e[i]))return!1;return!0}},g={...h,_op:o.OP_COMMIT},y={...g,...m},b=function(){function e(){}return e.prototype=g,e}(),S=function(){function e(){}return e.prototype=y,e}()},384771:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>u,fromOption:()=>w,getLeft:()=>S,getRight:()=>v,isEither:()=>h,isLeft:()=>m,isRight:()=>g,left:()=>y,right:()=>b});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(125105),c=n(995515),l=n(769275);const u=Symbol.for("effect/Either"),f={...c.EffectPrototype,[u]:{_R:e=>e},[s.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,s.format)(this.toJSON())}},d=Object.assign(Object.create(f),{_tag:"Right",_op:"Right",[r.symbol](e){return h(e)&&g(e)&&r.equals(this.right,e.right)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:(0,s.toJSON)(this.right)}}}),p=Object.assign(Object.create(f),{_tag:"Left",_op:"Left",[r.symbol](e){return h(e)&&m(e)&&r.equals(this.left,e.left)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:(0,s.toJSON)(this.left)}}}),h=e=>(0,o.hasProperty)(e,u),m=e=>"Left"===e._tag,g=e=>"Right"===e._tag,y=e=>{const t=Object.create(p);return t.left=e,t},b=e=>{const t=Object.create(d);return t.right=e,t},S=e=>g(e)?l.none:l.some(e.left),v=e=>m(e)?l.none:l.some(e.right),w=(0,i.dual)(2,((e,t)=>l.isNone(e)?y(t()):b(e.value)))},870529:(e,t,n)=>{n.r(t),n.d(t,{getBugErrorMessage:()=>r});const r=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`},49859:(e,t,n)=>{n.r(t),n.d(t,{OP_PARALLEL:()=>a,OP_PARALLEL_N:()=>s,OP_SEQUENTIAL:()=>i,isParallel:()=>f,isParallelN:()=>d,isSequential:()=>u,match:()=>p,parallel:()=>c,parallelN:()=>l,sequential:()=>o});var r=n(154258);const i="Sequential",a="Parallel",s="ParallelN",o={_tag:i},c={_tag:a},l=e=>({_tag:s,parallelism:e}),u=e=>e._tag===i,f=e=>e._tag===a,d=e=>e._tag===s,p=(0,r.dual)(2,((e,t)=>{switch(e._tag){case i:return t.onSequential();case a:return t.onParallel();case s:return t.onParallelN(e.parallelism)}}))},874338:(e,t,n)=>{n.r(t),n.d(t,{FiberTypeId:()=>b,Order:()=>E,RuntimeFiberTypeId:()=>w,_await:()=>x,children:()=>I,currentFiberURI:()=>ee,done:()=>T,dump:()=>O,dumpAll:()=>A,fail:()=>N,failCause:()=>M,fiberVariance:()=>S,fromEffect:()=>C,getCurrentFiber:()=>te,id:()=>R,inheritAll:()=>F,interruptAll:()=>P,interruptAllAs:()=>D,interruptAsFork:()=>U,interrupted:()=>L,isFiber:()=>_,isRuntimeFiber:()=>k,join:()=>j,map:()=>q,mapEffect:()=>W,mapFiber:()=>B,match:()=>z,never:()=>$,orElse:()=>V,orElseEither:()=>G,poll:()=>J,pretty:()=>H,roots:()=>Y,status:()=>Z,succeed:()=>Q,unsafeRoots:()=>K,void:()=>X});var r=n(823478),i=n(411123),a=n(676966),s=n(61915),o=n(396304),c=n(154258),l=n(895868),u=n(962047),f=n(504491),d=n(880308),p=n(709322),h=n(125105),m=n(597081),g=n(738460),y=n(939909);const b=Symbol.for("effect/Fiber"),S={_E:e=>e,_A:e=>e},v={[b]:S,pipe(){return(0,p.pipeArguments)(this,arguments)}},w=Symbol.for("effect/Fiber"),E=(0,c.pipe)(d.tuple(u.Order,u.Order),d.mapInput((e=>[e.id().startTimeMillis,e.id().id]))),_=e=>(0,h.hasProperty)(e,b),k=e=>w in e,x=e=>e.await,I=e=>e.children,T=e=>({...v,id:()=>s.none,await:m.succeed(e),children:m.succeed([]),inheritAll:m.void,poll:m.succeed(f.some(e)),interruptAsFork:()=>m.void}),O=e=>m.map(e.status,(t=>({id:e.id(),status:t}))),A=e=>m.forEachSequential(e,O),N=e=>T(a.fail(e)),M=e=>T(a.failCause(e)),C=e=>m.map(m.exit(e),T),R=e=>e.id(),F=e=>e.inheritAll,L=e=>T(a.interrupt(e)),P=e=>m.flatMap(m.fiberId,(t=>(0,c.pipe)(e,D(t)))),D=(0,c.dual)(2,((e,t)=>(0,c.pipe)(m.forEachSequentialDiscard(e,U(t)),m.zipRight((0,c.pipe)(e,m.forEachSequentialDiscard(x)))))),U=(0,c.dual)(2,((e,t)=>e.interruptAsFork(t))),j=e=>m.zipLeft(m.flatten(e.await),e.inheritAll),q=(0,c.dual)(2,((e,t)=>W(e,(e=>m.sync((()=>t(e))))))),W=(0,c.dual)(2,((e,t)=>({...v,id:()=>e.id(),await:m.flatMap(e.await,a.forEachEffect(t)),children:e.children,inheritAll:e.inheritAll,poll:m.flatMap(e.poll,(e=>{switch(e._tag){case"None":return m.succeed(f.none());case"Some":return(0,c.pipe)(a.forEachEffect(e.value,t),m.map(f.some))}})),interruptAsFork:t=>e.interruptAsFork(t)}))),B=(0,c.dual)(2,((e,t)=>m.map(e.await,a.match({onFailure:e=>M(e),onSuccess:e=>t(e)})))),z=(0,c.dual)(2,((e,{onFiber:t,onRuntimeFiber:n})=>k(e)?n(e):t(e))),$={...v,id:()=>s.none,await:m.never,children:m.succeed([]),inheritAll:m.never,poll:m.succeed(f.none()),interruptAsFork:()=>m.never},V=(0,c.dual)(2,((e,t)=>({...v,id:()=>s.getOrElse(e.id(),t.id()),await:m.zipWith(e.await,t.await,((e,t)=>a.isSuccess(e)?e:t)),children:e.children,inheritAll:m.zipRight(t.inheritAll,e.inheritAll),poll:m.zipWith(e.poll,t.poll,((e,t)=>{switch(e._tag){case"None":return f.none();case"Some":return a.isSuccess(e.value)?e:t}})),interruptAsFork:n=>(0,c.pipe)(m.interruptAsFiber(e,n),m.zipRight((0,c.pipe)(t,m.interruptAsFiber(n))),m.asVoid)}))),G=(0,c.dual)(2,((e,t)=>V(q(e,i.left),q(t,i.right)))),J=e=>e.poll,H=e=>m.flatMap(r.currentTimeMillis,(t=>m.map(O(e),(e=>{const n=t-e.id.startTimeMillis,{days:r,hours:i,milliseconds:a,minutes:c,seconds:u}=(e=>{const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}})(n),f=(0===r?"":`${r}d`)+(0===r&&0===i?"":`${i}h`)+(0===r&&0===i&&0===c?"":`${c}m`)+(0===r&&0===i&&0===c&&0===u?"":`${u}s`)+`${a}ms`,d=o.isSuspended(e.status)?(()=>{const t=s.ids(e.status.blockingOn);return l.size(t)>0?"waiting on "+Array.from(t).map((e=>`${e}`)).join(", "):""})():"",p=(e=>o.isDone(e)?"Done":o.isRunning(e)?"Running":`Suspended(${y.interruptible(e.runtimeFlags)?"interruptible":"uninterruptible"})`)(e.status);return`[Fiber](#${e.id.id}) (${f}) ${d}\n   Status: ${p}`})))),K=()=>Array.from(g.globalScope.roots),Y=m.sync(K),Z=e=>e.status,Q=e=>T(a.succeed(e)),X=Q(void 0),ee="effect/FiberCurrent",te=()=>f.fromNullable(globalThis[ee])},646699:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>p,combine:()=>O,combineAll:()=>A,composite:()=>_,getOrElse:()=>N,ids:()=>M,isComposite:()=>T,isFiberId:()=>k,isNone:()=>x,isRuntime:()=>I,make:()=>R,none:()=>w,runtime:()=>E,threadName:()=>F,toOption:()=>L,toSet:()=>P,unsafeMake:()=>D});var r=n(382300),i=n(154258),a=n(744628),s=n(353370),o=n(895868),c=n(58536),l=n(847857),u=n(504491),f=n(125105);const d="effect/FiberId",p=Symbol.for(d),h="None",m="Runtime",g="Composite",y=s.string(`${d}-${h}`);class b{[p]=p;_tag=h;id=-1;startTimeMillis=-1;[s.symbol](){return y}[r.symbol](e){return k(e)&&e._tag===h}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[c.NodeInspectSymbol](){return this.toJSON()}}class S{id;startTimeMillis;[p]=p;_tag=m;constructor(e,t){this.id=e,this.startTimeMillis=t}[s.symbol](){return s.cached(this,s.string(`${d}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[r.symbol](e){return k(e)&&e._tag===m&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[c.NodeInspectSymbol](){return this.toJSON()}}class v{left;right;[p]=p;_tag=g;constructor(e,t){this.left=e,this.right=t}_hash;[s.symbol](){return(0,i.pipe)(s.string(`${d}-${this._tag}`),s.combine(s.hash(this.left)),s.combine(s.hash(this.right)),s.cached(this))}[r.symbol](e){return k(e)&&e._tag===g&&r.equals(this.left,e.left)&&r.equals(this.right,e.right)}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:(0,c.toJSON)(this.left),right:(0,c.toJSON)(this.right)}}[c.NodeInspectSymbol](){return this.toJSON()}}const w=new b,E=(e,t)=>new S(e,t),_=(e,t)=>new v(e,t),k=e=>(0,f.hasProperty)(e,p),x=e=>e._tag===h||(0,i.pipe)(P(e),o.every((e=>x(e)))),I=e=>e._tag===m,T=e=>e._tag===g,O=(0,i.dual)(2,((e,t)=>e._tag===h?t:t._tag===h?e:new v(e,t))),A=e=>(0,i.pipe)(e,o.reduce(w,((e,t)=>O(t)(e)))),N=(0,i.dual)(2,((e,t)=>x(e)?t:e)),M=e=>{switch(e._tag){case h:return o.empty();case m:return o.make(e.id);case g:return(0,i.pipe)(M(e.left),o.union(M(e.right)))}},C=(0,a.globalValue)(Symbol.for("effect/Fiber/Id/_fiberCounter"),(()=>l.make(0))),R=(e,t)=>new S(e,t),F=e=>Array.from(M(e)).map((e=>`#${e}`)).join(","),L=e=>{const t=P(e);if(0===o.size(t))return u.none();let n,r=!0;for(const a of t)r?(n=a,r=!1):n=(0,i.pipe)(n,O(a));return u.some(n)},P=e=>{switch(e._tag){case h:return o.empty();case m:return o.make(e);case g:return(0,i.pipe)(P(e.left),o.union(P(e.right)))}},D=()=>{const e=l.get(C);return(0,i.pipe)(C,l.set(e+1)),new S(e,Date.now())}},746375:(e,t,n)=>{n.r(t),n.d(t,{OP_INTERRUPT_SIGNAL:()=>r,OP_RESUME:()=>a,OP_STATEFUL:()=>i,OP_YIELD_NOW:()=>s,interruptSignal:()=>o,resume:()=>l,stateful:()=>c,yieldNow:()=>u});const r="InterruptSignal",i="Stateful",a="Resume",s="YieldNow",o=e=>({_tag:r,cause:e}),c=e=>({_tag:i,onFiber:e}),l=e=>({_tag:a,effect:e}),u=()=>({_tag:s})},334196:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsImpl:()=>p,FiberRefsSym:()=>d,delete_:()=>S,empty:()=>f,fiberRefs:()=>y,forkAs:()=>m,get:()=>v,getOrDefault:()=>w,joinAs:()=>h,setAll:()=>b,unsafeMake:()=>u,updateAs:()=>E,updateManyAs:()=>k});var r=n(342072),i=n(382300),a=n(154258),s=n(895868),o=n(504491),c=n(709322),l=n(597081);function u(e){return new p(e)}function f(){return u(new Map)}const d=Symbol.for("effect/FiberRefs");class p{locals;[d]=d;constructor(e){this.locals=e}pipe(){return(0,c.pipeArguments)(this,arguments)}}const h=(0,a.dual)(3,((e,t,n)=>{const a=new Map(e.locals);return n.locals.forEach(((e,n)=>{const s=e[0][1];if(!e[0][0][i.symbol](t)){if(!a.has(n)){if(i.equals(s,n.initial))return;return void a.set(n,[[t,n.join(n.initial,s)]])}const o=a.get(n),[c,l]=((e,t,n,i=!1)=>{const a=e;let s,o=t,c=n,l=i;for(;void 0===s;)if(r.isNonEmptyReadonlyArray(o)&&r.isNonEmptyReadonlyArray(c)){const e=r.headNonEmpty(o)[0],t=r.tailNonEmpty(o),n=r.headNonEmpty(c)[0],i=r.headNonEmpty(c)[1],a=r.tailNonEmpty(c);e.startTimeMillis<n.startTimeMillis?(c=a,l=!0):e.startTimeMillis>n.startTimeMillis?o=t:e.id<n.id?(c=a,l=!0):e.id>n.id?o=t:s=[i,l]}else s=[a.initial,!0];return s})(n,o,e);if(l){const e=n.diff(c,s),r=o[0][1],l=n.join(r,n.patch(e)(r));if(!i.equals(r,l)){let e;const r=o[0][0];e=r[i.symbol](t)?[[r,l],...o.slice(1)]:[[t,l],...o],a.set(n,e)}}}})),new p(a)})),m=(0,a.dual)(2,((e,t)=>{const n=new Map;return g(e,n,t),new p(n)})),g=(e,t,n)=>{e.locals.forEach(((e,r)=>{const a=e[0][1],s=r.patch(r.fork)(a);i.equals(a,s)?t.set(r,e):t.set(r,[[n,s],...e])}))},y=e=>s.fromIterable(e.locals.keys()),b=e=>l.forEachSequentialDiscard(y(e),(t=>l.fiberRefSet(t,w(e,t)))),S=(0,a.dual)(2,((e,t)=>{const n=new Map(e.locals);return n.delete(t),new p(n)})),v=(0,a.dual)(2,((e,t)=>e.locals.has(t)?o.some(r.headNonEmpty(e.locals.get(t))[1]):o.none())),w=(0,a.dual)(2,((e,t)=>(0,a.pipe)(v(e,t),o.getOrElse((()=>t.initial))))),E=(0,a.dual)(2,((e,{fiberId:t,fiberRef:n,value:r})=>{if(0===e.locals.size)return new p(new Map([[n,[[t,r]]]]));const i=new Map(e.locals);return _(i,t,n,r),new p(i)})),_=(e,t,n,a)=>{const s=e.get(n)??[];let o;if(r.isNonEmptyReadonlyArray(s)){const[e,n]=r.headNonEmpty(s);if(e[i.symbol](t)){if(i.equals(n,a))return;o=[[t,a],...s.slice(1)]}else o=[[t,a],...s]}else o=[[t,a]];e.set(n,o)},k=(0,a.dual)(2,((e,{entries:t,forkAs:n})=>{if(0===e.locals.size)return new p(new Map(t));const r=new Map(e.locals);return void 0!==n&&g(e,r,n),t.forEach((([e,t])=>{1===t.length?_(r,t[0][0],e,t[0][1]):t.forEach((([t,n])=>{_(r,t,e,n)}))})),new p(r)}))},62177:(e,t,n)=>{n.r(t),n.d(t,{OP_ADD:()=>c,OP_AND_THEN:()=>f,OP_EMPTY:()=>o,OP_REMOVE:()=>l,OP_UPDATE:()=>u,combine:()=>h,diff:()=>p,empty:()=>d,patch:()=>m});var r=n(342072),i=n(382300),a=n(154258),s=n(334196);const o="Empty",c="Add",l="Remove",u="Update",f="AndThen",d={_tag:o},p=(e,t)=>{const n=new Map(e.locals);let a=d;for(const[s,o]of t.locals.entries()){const e=r.headNonEmpty(o)[1],t=n.get(s);if(void 0!==t){const n=r.headNonEmpty(t)[1];(0,i.equals)(n,e)||(a=h({_tag:u,fiberRef:s,patch:s.diff(n,e)})(a))}else a=h({_tag:c,fiberRef:s,value:e})(a);n.delete(s)}for(const[r]of n.entries())a=h({_tag:l,fiberRef:r})(a);return a},h=(0,a.dual)(2,((e,t)=>({_tag:f,first:e,second:t}))),m=(0,a.dual)(3,((e,t,n)=>{let i=n,a=r.of(e);for(;r.isNonEmptyReadonlyArray(a);){const e=r.headNonEmpty(a),n=r.tailNonEmpty(a);switch(e._tag){case o:a=n;break;case c:i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),a=n;break;case l:i=s.delete_(i,e.fiberRef),a=n;break;case u:{const r=s.getOrDefault(i,e.fiberRef);i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),a=n;break}case f:a=r.prepend(e.first)(r.prepend(e.second)(n))}}return i}))},365519:(e,t,n)=>{n.r(t),n.d(t,{FiberRuntime:()=>Pn,acquireRelease:()=>Yn,acquireReleaseInterruptible:()=>Zn,addFinalizer:()=>Qn,all:()=>ir,allSuccesses:()=>sr,allWith:()=>ar,annotateLogsScoped:()=>Kn,batchedLogger:()=>Hn,currentLoggers:()=>Jn,currentMinimumLogLevel:()=>Dn,currentRuntimeFlags:()=>li,currentSupervisor:()=>ui,daemonChildren:()=>Xn,defaultLogger:()=>qn,disconnect:()=>yi,ensuring:()=>wi,exists:()=>tr,fiberActive:()=>kn,fiberAll:()=>di,fiberAwaitAll:()=>fi,fiberFailures:()=>In,fiberInterruptFork:()=>pi,fiberJoinAll:()=>hi,fiberLifetimes:()=>Tn,fiberRefLocallyScoped:()=>ri,fiberRefLocallyScopedWith:()=>ii,fiberRefMake:()=>ai,fiberRefMakeContext:()=>oi,fiberRefMakeRuntimeFlags:()=>ci,fiberRefMakeWith:()=>si,fiberRefUnsafeMakeSupervisor:()=>ni,fiberScoped:()=>mi,fiberStarted:()=>_n,fiberSuccesses:()=>xn,filter:()=>rr,finalizersMask:()=>Or,forEach:()=>lr,forEachConcurrentDiscard:()=>fr,forEachParN:()=>dr,forEachParUnbounded:()=>ur,fork:()=>pr,forkDaemon:()=>hr,forkWithErrorHandler:()=>mr,interruptWhenPossible:()=>_i,invokeWithInterrupt:()=>Ei,jsonLogger:()=>Wn,labelMetricsScoped:()=>Rr,logFmtLogger:()=>Bn,loggerWithConsoleError:()=>jn,loggerWithConsoleLog:()=>Un,loggerWithSpanAnnotations:()=>Gn,makeSpanScoped:()=>ki,mergeAll:()=>vr,parallelFinalizers:()=>Ir,parallelNFinalizers:()=>Tr,partition:()=>wr,prettyLogger:()=>zn,race:()=>bi,raceAll:()=>_r,raceFibersWith:()=>Si,raceWith:()=>gi,reduceEffect:()=>xr,replicate:()=>or,replicateEffect:()=>cr,scope:()=>Yr,scopeExtend:()=>ei,scopeMake:()=>Xr,scopeTag:()=>Kr,scopeUse:()=>ti,scopeWith:()=>Ar,scopedEffect:()=>Nr,sequentialFinalizers:()=>Mr,structuredLogger:()=>$n,tagMetricsScoped:()=>Cr,tracerLogger:()=>Vn,unsafeFork:()=>gr,unsafeForkUnstarted:()=>yr,unsafeMakeChildFiber:()=>br,using:()=>Fr,validate:()=>Lr,validateAll:()=>Er,validateAllPar:()=>Dr,validateAllParDiscard:()=>Ur,validateFirst:()=>jr,validateWith:()=>Pr,withClockScoped:()=>qr,withConfigProviderScoped:()=>Br,withEarlyRelease:()=>zr,withRandomScoped:()=>Wr,withRuntimeFlagsScoped:()=>Hr,withSpanScoped:()=>Ii,withTracerScoped:()=>xi,zipLeftOptions:()=>Vr,zipOptions:()=>$r,zipRightOptions:()=>Gr,zipWithOptions:()=>Jr});var r=n(977721),i=n(342072),a=n(893212),s=n(889133),o=n(499779),c=n(38429),l=n(938507),u=n(83859),f=n(61915),d=n(406820),p=n(685344),h=n(396304),m=n(154258),g=n(744628),y=n(398826),b=n(895868),S=n(58536),v=n(161938),w=n(411123),E=(n(997385),n(995515)),_=n(735458),k=n(504491),x=n(709322),I=n(125105);const T=Symbol.for("effect/Micro"),O=Symbol.for("effect/Micro/runSymbol"),A=Symbol.for("effect/Micro/MicroCause"),N={_E:m.identity};class M extends globalThis.Error{_tag;traces;[A];constructor(e,t,n){const r=`MicroCause.${e}`;let i,a,s;if(t instanceof globalThis.Error){i=`(${r}) ${t.name}`,a=t.message;const e=a.split("\n").length;s=t.stack?`(${r}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${i}: ${a}`}else i=r,a=(0,S.toStringUnknown)(t,0),s=`${i}: ${a}`;n.length>0&&(s+=`\n    ${n.join("\n    ")}`),super(a),this._tag=e,this.traces=n,this[A]=N,this.name=i,this.stack=s}pipe(){return(0,x.pipeArguments)(this,arguments)}toString(){return this.stack}[S.NodeInspectSymbol](){return this.stack}}class C extends M{error;constructor(e,t=[]){super("Fail",e,t),this.error=e}}const R=(e,t=[])=>new C(e,t);w.right;const F=e=>w.left(R(e)),L=(w.left,w.isRight,w.isLeft,Symbol.for("effect/Micro/Env")),P=Symbol.for("effect/Micro/EnvRef"),D={[L]:{_R:m.identity},pipe(){return(0,x.pipeArguments)(this,arguments)}},U=e=>{const t=Object.create(D);return t.refs=e,t},j=(0,m.dual)(2,((e,t)=>t.key in e.refs?e.refs[t.key]:t.initial)),q=(0,m.dual)(3,((e,t,n)=>{const r=Object.assign(Object.create(null),e.refs);return r[t.key]=n,U(r)})),W={[P]:P},B=(e,t)=>(0,g.globalValue)(e,(()=>{const n=Object.create(W);return n.key=e,n.initial=t(),n})),z=B("effect/Micro/currentAbortController",(()=>{})),$=B("effect/Micro/currentAbortSignal",(()=>{})),V=B("effect/Micro/currentContext",(()=>o.empty())),G={...l.EffectPrototype,_op:"Micro",[T]:{_A:m.identity,_E:m.identity,_R:m.identity},[Symbol.iterator](){return new _.SingleShotGen(new r.YieldWrap(this))}};"setImmediate"in globalThis&&globalThis.setImmediate;const J=function(){class e extends globalThis.Error{[O](e,t){t(F(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[S.NodeInspectSymbol](){const e=this.stack;return e?`${this.toString()}\n${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,G,E.StructuralPrototype),e}(),H=function(){return class extends J{constructor(e){super(),e&&Object.assign(this,e)}}}(),K=e=>{class t extends H{_tag=e}return t.prototype.name=e,t};K("NoSuchElementException");K("TimeoutException");var Y=n(847857),Z=n(581757),Q=n(364647),X=n(84221),ee=n(100726),te=n(240834),ne=n(477926),re=n(612996),ie=n(597081);const ae=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ie.fiberRefGetWith(ie.currentConcurrency,(e=>"unbounded"===e?n():e>1?r(e):t()));default:return e>1?r(e):t()}},se=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ie.fiberRefGetWith(ie.currentConcurrency,(e=>"unbounded"===e||e>1?n():t()));default:return e>1?n():t()}};var oe=n(974627),ce=n(694375),le=n(130949),ue=n(893443),fe=n(49859),de=n(874338),pe=n(746375),he=n(334196),me=n(738460),ge=n(60526),ye=(n(823478),n(860118)),be=n(382300),Se=n(353370);const ve="effect/MetricBoundaries",we=Symbol.for(ve);class Ee{values;[we]=we;constructor(e){this.values=e,this._hash=(0,m.pipe)(Se.string(ve),Se.combine(Se.array(this.values)))}_hash;[Se.symbol](){return this._hash}[be.symbol](e){return _e(e)&&be.equals(this.values,e.values)}pipe(){return(0,x.pipeArguments)(this,arguments)}}const _e=e=>(0,I.hasProperty)(e,we),ke=e=>{const t=(0,m.pipe)(e,i.appendAll(s.of(Number.POSITIVE_INFINITY)),i.dedupe);return new Ee(t)},xe=e=>(0,m.pipe)(i.makeBy(e.count-1,(t=>e.start*Math.pow(e.factor,t))),s.unsafeFromArray,ke),Ie=Symbol.for("effect/MetricKeyType"),Te="effect/MetricKeyType/Counter",Oe=Symbol.for(Te),Ae="effect/MetricKeyType/Frequency",Ne=Symbol.for(Ae),Me="effect/MetricKeyType/Gauge",Ce=Symbol.for(Me),Re="effect/MetricKeyType/Histogram",Fe=Symbol.for(Re),Le="effect/MetricKeyType/Summary",Pe=Symbol.for(Le),De={_In:e=>e,_Out:e=>e};class Ue{incremental;bigint;[Ie]=De;[Oe]=Oe;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=Se.string(Te)}_hash;[Se.symbol](){return this._hash}[be.symbol](e){return qe(e)}pipe(){return(0,x.pipeArguments)(this,arguments)}}Se.symbol,be.symbol;Se.symbol,be.symbol;class je{boundaries;[Ie]=De;[Fe]=Fe;constructor(e){this.boundaries=e,this._hash=(0,m.pipe)(Se.string(Re),Se.combine(Se.hash(this.boundaries)))}_hash;[Se.symbol](){return this._hash}[be.symbol](e){return ze(e)&&be.equals(this.boundaries,e.boundaries)}pipe(){return(0,x.pipeArguments)(this,arguments)}}Se.symbol,be.symbol;const qe=e=>(0,I.hasProperty)(e,Oe),We=e=>(0,I.hasProperty)(e,Ne),Be=e=>(0,I.hasProperty)(e,Ce),ze=e=>(0,I.hasProperty)(e,Fe),$e=e=>(0,I.hasProperty)(e,Pe);var Ve=n(945959);const Ge=Symbol.for("effect/MetricKey"),Je={_Type:e=>e},He=i.getEquivalence(be.equals);class Ke{name;keyType;description;tags;[Ge]=Je;constructor(e,t,n,r=[]){this.name=e,this.keyType=t,this.description=n,this.tags=r,this._hash=(0,m.pipe)(Se.string(this.name+this.description),Se.combine(Se.hash(this.keyType)),Se.combine(Se.array(this.tags)))}_hash;[Se.symbol](){return this._hash}[be.symbol](e){return Ye(e)&&this.name===e.name&&be.equals(this.keyType,e.keyType)&&be.equals(this.description,e.description)&&He(this.tags,e.tags)}pipe(){return(0,x.pipeArguments)(this,arguments)}}const Ye=e=>(0,I.hasProperty)(e,Ge),Ze=(e,t)=>new Ke(e,(e=>new Ue(e?.incremental??!1,e?.bigint??!1))(t),k.fromNullable(t?.description)),Qe=(e,t,n)=>new Ke(e,(e=>new je(e))(t),k.fromNullable(n)),Xe=(0,m.dual)(2,((e,t)=>0===t.length?e:new Ke(e.name,e.keyType,e.description,i.union(e.tags,t))));var et=n(806874),tt=n(962047);const nt=Symbol.for("effect/MetricState"),rt="effect/MetricState/Counter",it=Symbol.for(rt),at="effect/MetricState/Frequency",st=Symbol.for(at),ot="effect/MetricState/Gauge",ct=Symbol.for(ot),lt="effect/MetricState/Histogram",ut=Symbol.for(lt),ft="effect/MetricState/Summary",dt=Symbol.for(ft),pt={_A:e=>e};class ht{count;[nt]=pt;[it]=it;constructor(e){this.count=e}[Se.symbol](){return(0,m.pipe)(Se.hash(rt),Se.combine(Se.hash(this.count)),Se.cached(this))}[be.symbol](e){return vt(e)&&this.count===e.count}pipe(){return(0,x.pipeArguments)(this,arguments)}}const mt=i.getEquivalence(be.equals);class gt{occurrences;[nt]=pt;[st]=st;constructor(e){this.occurrences=e}_hash;[Se.symbol](){return(0,m.pipe)(Se.string(at),Se.combine(Se.array(i.fromIterable(this.occurrences.entries()))),Se.cached(this))}[be.symbol](e){return wt(e)&&mt(i.fromIterable(this.occurrences.entries()),i.fromIterable(e.occurrences.entries()))}pipe(){return(0,x.pipeArguments)(this,arguments)}}class yt{value;[nt]=pt;[ct]=ct;constructor(e){this.value=e}[Se.symbol](){return(0,m.pipe)(Se.hash(ot),Se.combine(Se.hash(this.value)),Se.cached(this))}[be.symbol](e){return Et(e)&&this.value===e.value}pipe(){return(0,x.pipeArguments)(this,arguments)}}class bt{buckets;count;min;max;sum;[nt]=pt;[ut]=ut;constructor(e,t,n,r,i){this.buckets=e,this.count=t,this.min=n,this.max=r,this.sum=i}[Se.symbol](){return(0,m.pipe)(Se.hash(lt),Se.combine(Se.hash(this.buckets)),Se.combine(Se.hash(this.count)),Se.combine(Se.hash(this.min)),Se.combine(Se.hash(this.max)),Se.combine(Se.hash(this.sum)),Se.cached(this))}[be.symbol](e){return _t(e)&&be.equals(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,x.pipeArguments)(this,arguments)}}class St{error;quantiles;count;min;max;sum;[nt]=pt;[dt]=dt;constructor(e,t,n,r,i,a){this.error=e,this.quantiles=t,this.count=n,this.min=r,this.max=i,this.sum=a}[Se.symbol](){return(0,m.pipe)(Se.hash(ft),Se.combine(Se.hash(this.error)),Se.combine(Se.hash(this.quantiles)),Se.combine(Se.hash(this.count)),Se.combine(Se.hash(this.min)),Se.combine(Se.hash(this.max)),Se.combine(Se.hash(this.sum)),Se.cached(this))}[be.symbol](e){return kt(e)&&this.error===e.error&&be.equals(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,x.pipeArguments)(this,arguments)}}const vt=e=>(0,I.hasProperty)(e,it),wt=e=>(0,I.hasProperty)(e,st),Et=e=>(0,I.hasProperty)(e,ct),_t=e=>(0,I.hasProperty)(e,ut),kt=e=>(0,I.hasProperty)(e,dt),xt=Symbol.for("effect/MetricHook"),It={_In:e=>e,_Out:e=>e},Tt=e=>({[xt]:It,pipe(){return(0,x.pipeArguments)(this,arguments)},...e}),Ot=BigInt(0),At=e=>{let t=e.keyType.bigint?Ot:0;const n=e.keyType.incremental?e.keyType.bigint?e=>e>=Ot:e=>e>=0:e=>!0;return Tt({get:()=>new ht(t),update:e=>{n(e)&&(t+=e)}})},Nt=e=>{const t=new Map;for(const n of e.keyType.preregisteredWords)t.set(n,0);return Tt({get:()=>new gt(t),update:e=>{const n=t.get(e)??0;t.set(e,n+1)}})},Mt=(e,t)=>{let n=t;return Tt({get:()=>new yt(n),update:e=>{n=e}})},Ct=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),a=new Float32Array(n);let s=0,o=0,c=Number.MAX_VALUE,l=Number.MIN_VALUE;(0,m.pipe)(t,i.sort(tt.Order),i.map(((e,t)=>{a[t]=e})));const u=()=>{const e=i.allocate(n);let t=0;for(let i=0;i<n;i++){const n=a[i];t+=r[i],e[i]=[n,t]}return e};return Tt({get:()=>{return e={buckets:u(),count:s,min:c,max:l,sum:o},new bt(e.buckets,e.count,e.min,e.max,e.sum);var e},update:e=>{let t=0,i=n;for(;t!==i;){const n=Math.floor(t+(i-t)/2);e<=a[n]?i=n:t=n,i===t+1&&(e<=a[t]?i=t:t=i)}r[t]=r[t]+1,s+=1,o+=e,e<c&&(c=e),e>l&&(l=e)}})},Rt=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:a}=e.keyType,s=(0,m.pipe)(a,i.sort(tt.Order)),o=i.allocate(r);let c=0,l=0,u=0,f=Number.MAX_VALUE,d=Number.MIN_VALUE;const p=e=>{const a=[];let c=0;for(;c!==r-1;){const t=o[c];if(null!=t){const[r,i]=t,s=ye.millis(e-r);ye.greaterThanOrEqualTo(s,ye.zero)&&s<=n&&a.push(i)}c+=1}return Ft(t,s,i.sort(a,tt.Order))};return Tt({get:()=>{return e={error:t,quantiles:p(Date.now()),count:l,min:f,max:d,sum:u},new St(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var e},update:([e,t])=>((e,t)=>{r>0&&(c+=1,o[c%r]=[t,e]);l+=1,u+=e,e<f&&(f=e),e>d&&(d=e)})(e,t)})},Ft=(e,t,n)=>{const r=n.length;if(!i.isNonEmptyReadonlyArray(t))return i.empty();const a=t[0],s=t.slice(1),o=Lt(e,r,k.none(),0,a,n),c=i.of(o);return s.forEach((t=>{c.push(Lt(e,r,o.value,o.consumed,t,o.rest))})),i.map(c,(e=>[e.quantile,e.value]))},Lt=(e,t,n,r,a,s)=>{let o=e,c=t,l=n,u=r,f=a,d=s,p=e,h=t,m=n,g=r,y=a,b=s;for(;;){if(!i.isNonEmptyReadonlyArray(d))return{quantile:f,value:k.none(),consumed:u,rest:[]};if(1===f)return{quantile:f,value:k.some(i.lastNonEmpty(d)),consumed:u+d.length,rest:[]};const e=i.span(d,(e=>e<=d[0])),t=f*c,n=o/2*t,r=u+e[0].length,a=Math.abs(r-t);if(r<t-n)p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;else{if(r>t+n)return{quantile:f,value:l,consumed:u,rest:d};switch(l._tag){case"None":p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;continue;case"Some":if(a<Math.abs(t-l.value)){p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;continue}return{quantile:f,value:k.some(l.value),consumed:u,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},Pt=Symbol.for("effect/MetricPair"),Dt={_Type:e=>e},Ut=(e,t)=>({[Pt]:Dt,metricKey:e,metricState:t,pipe(){return(0,x.pipeArguments)(this,arguments)}}),jt=Symbol.for("effect/MetricRegistry");class qt{[jt]=jt;map=et.empty();snapshot(){const e=[];for(const[t,n]of this.map)e.push(Ut(t,n.get()));return e}get(e){const t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){if(qe(e.keyType))return this.getCounter(e);if(Be(e.keyType))return this.getGauge(e);if(We(e.keyType))return this.getFrequency(e);if(ze(e.keyType))return this.getHistogram(e);if($e(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}return t}getCounter(e){let t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){const n=At(e);(0,m.pipe)(this.map,et.has(e))||(0,m.pipe)(this.map,et.set(e,n)),t=n}return t}getFrequency(e){let t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){const n=Nt(e);(0,m.pipe)(this.map,et.has(e))||(0,m.pipe)(this.map,et.set(e,n)),t=n}return t}getGauge(e){let t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){const n=Mt(0,e.keyType.bigint?BigInt(0):0);(0,m.pipe)(this.map,et.has(e))||(0,m.pipe)(this.map,et.set(e,n)),t=n}return t}getHistogram(e){let t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){const n=Ct(e);(0,m.pipe)(this.map,et.has(e))||(0,m.pipe)(this.map,et.set(e,n)),t=n}return t}getSummary(e){let t=(0,m.pipe)(this.map,et.get(e),k.getOrUndefined);if(null==t){const n=Rt(e);(0,m.pipe)(this.map,et.has(e))||(0,m.pipe)(this.map,et.set(e,n)),t=n}return t}}const Wt=Symbol.for("effect/Metric"),Bt={_Type:e=>e,_In:e=>e,_Out:e=>e},zt=(0,g.globalValue)(Symbol.for("effect/Metric/globalMetricRegistry"),(()=>new qt)),$t=function(e,t,n){const r=Object.assign((e=>ie.tap(e,(e=>Yt(r,e)))),{[Wt]:Bt,keyType:e,unsafeUpdate:t,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return(0,x.pipeArguments)(this,arguments)}});return r},Vt=(e,t)=>Gt(Ze(e,t)),Gt=e=>{let t;const n=new WeakMap,r=r=>{if(0===r.length)return void 0!==t||(t=zt.get(e)),t;let i=n.get(r);return void 0!==i||(i=zt.get(Xe(e,r)),n.set(r,i)),i};return $t(e.keyType,((e,t)=>r(t).update(e)),(e=>r(e).get()))},Jt=(e,t,n)=>Gt(Qe(e,t,n)),Ht=(0,m.dual)(3,((e,t,n)=>Kt(e,[Ve.make(t,n)]))),Kt=(0,m.dual)(2,((e,t)=>$t(e.keyType,((n,r)=>e.unsafeUpdate(n,i.union(t,r))),(n=>e.unsafeValue(i.union(t,n)))))),Yt=(0,m.dual)(2,((e,t)=>ie.fiberRefGetWith(ie.currentMetricLabels,(n=>ie.sync((()=>e.unsafeUpdate(t,n)))))));var Zt=n(168527),Qt=n(934981),Xt=n(796605),en=n(939909),tn=n(125572),nn=n(668446),rn=n(812460),an=n(812470),sn=n(218821),on=n(417335),cn=n(595940),ln=n(222770);nn.DifferTypeId,rn.ChunkPatchTypeId,an.ContextPatchTypeId,sn.HashMapPatchTypeId,on.HashSetPatchTypeId,cn.OrPatchTypeId,ln.ReadonlyArrayPatchTypeId;const un=nn.make,fn=(nn.environment,nn.chunk,nn.hashMap,nn.hashSet,nn.orElseEither,nn.readonlyArray,nn.transform,nn.update,nn.updateWith,nn.zip,"Empty"),dn="AddSupervisor",pn="RemoveSupervisor",hn="AndThen",mn={_tag:fn},gn=(e,t)=>({_tag:hn,first:e,second:t}),yn=(e,t)=>{let n=e,r=t;for(;s.isNonEmpty(r);){const e=s.headNonEmpty(r);switch(e._tag){case fn:r=s.tailNonEmpty(r);break;case dn:n=n.zip(e.supervisor),r=s.tailNonEmpty(r);break;case pn:n=bn(n,e.supervisor),r=s.tailNonEmpty(r);break;case hn:r=s.prepend(e.first)(s.prepend(e.second)(s.tailNonEmpty(r)))}}return n},bn=(e,t)=>be.equals(e,t)?tn.none:tn.isZip(e)?bn(e.left,t).zip(bn(e.right,t)):e,Sn=e=>be.equals(e,tn.none)?b.empty():tn.isZip(e)?(0,m.pipe)(Sn(e.left),b.union(Sn(e.right))):b.make(e),vn=un({empty:mn,patch:(e,t)=>yn(t,s.of(e)),combine:gn,diff:(e,t)=>{if(be.equals(e,t))return mn;const n=Sn(e),r=Sn(t),i=(0,m.pipe)(r,b.difference(n),b.reduce(mn,((e,t)=>gn(e,{_tag:dn,supervisor:t})))),a=(0,m.pipe)(n,b.difference(r),b.reduce(mn,((e,t)=>gn(e,{_tag:pn,supervisor:t}))));return gn(i,a)}});var wn=n(460011),En=n(635420);const _n=Vt("effect_fiber_started",{incremental:!0}),kn=Vt("effect_fiber_active"),xn=Vt("effect_fiber_successes",{incremental:!0}),In=Vt("effect_fiber_failures",{incremental:!0}),Tn=Ht(Jt("effect_fiber_lifetimes",xe({start:.5,factor:2,count:35})),"time_unit","milliseconds"),On="Continue",An="Yield",Nn={_E:e=>e,_A:e=>e},Mn=e=>{throw new Error(`BUG: FiberRuntime - ${S.toStringUnknown(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Cn=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Rn=(0,g.globalValue)("effect/internal/fiberRuntime/yieldedOpChannel",(()=>({currentOp:null}))),Fn={[Zt.OP_ON_SUCCESS]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i1(n))),OnStep:(e,t,n)=>ie.exitSucceed(ie.exitSucceed(n)),[Zt.OP_ON_SUCCESS_AND_FAILURE]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i2(n))),[Zt.OP_REVERT_FLAGS]:(e,t,n)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),en.interruptible(e._runtimeFlags)&&e.isInterrupted()?ie.exitFailCause(e.getInterruptedCause()):ie.exitSucceed(n)),[Zt.OP_WHILE]:(e,t,n)=>((0,r.internalCall)((()=>t.effect_instruction_i2(n))),(0,r.internalCall)((()=>t.effect_instruction_i0()))?(e.pushStack(t),(0,r.internalCall)((()=>t.effect_instruction_i1()))):ie.void)},Ln={[pe.OP_INTERRUPT_SIGNAL]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),en.interruptible(t)?ie.exitFailCause(r.cause):n),[pe.OP_RESUME]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[pe.OP_STATEFUL]:(e,t,n,r)=>(r.onFiber(e,h.running(t)),n),[pe.OP_YIELD_NOW]:(e,t,n,r)=>ie.flatMap(ie.yieldNow(),(()=>n))};class Pn{[de.FiberTypeId]=de.fiberVariance;[de.RuntimeFiberTypeId]=Nn;pipe(){return(0,x.pipeArguments)(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,n){if(this._runtimeFlags=n,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(ui),this._scheduler=this.getFiberRef(X.currentScheduler),en.runtimeMetrics(n)){const e=this.getFiberRef(ie.currentMetricLabels);_n.unsafeUpdate(1,e),kn.unsafeUpdate(1,e)}this._tracer=o.get(this.getFiberRef(le.currentServices),wn.tracerTag)}id(){return this._fiberId}resume(e){this.tell(pe.resume(e))}get status(){return this.ask(((e,t)=>t))}get runtimeFlags(){return this.ask(((e,t)=>h.isDone(t)?e._runtimeFlags:t.runtimeFlags))}scope(){return me.unsafeMake(this)}get children(){return this.ask((e=>Array.from(e.getChildren())))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ie.currentInterruptedCause)}fiberRefs(){return this.ask((e=>e.getFiberRefs()))}ask(e){return ie.suspend((()=>{const t=ie.deferredUnsafeMake(this._fiberId);return this.tell(pe.stateful(((n,r)=>{ie.deferredUnsafeDone(t,ie.sync((()=>e(n,r))))}))),ie.deferredAwait(t)}))}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ie.async((e=>{const t=t=>e(ie.succeed(t));return this.tell(pe.stateful(((e,n)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)}))),ie.sync((()=>this.tell(pe.stateful(((e,n)=>{e.removeObserver(t)})))))}),this.id())}get inheritAll(){return ie.withFiberRuntime(((e,t)=>{const n=e.id(),r=e.getFiberRefs(),i=t.runtimeFlags,a=this.getFiberRefs(),s=he.joinAs(r,n,a);e.setFiberRefs(s);const o=e.getFiberRef(li),c=(0,m.pipe)(en.diff(i,o),Q.exclude(en.Interruption),Q.exclude(en.WindDown));return ie.updateRuntimeFlags(c)}))}get poll(){return ie.sync((()=>k.fromNullable(this._exitValue)))}unsafePoll(){return this._exitValue}interruptAsFork(e){return ie.sync((()=>this.tell(pe.interruptSignal(te.interrupt(e)))))}unsafeInterruptAsFork(e){this.tell(pe.interruptSignal(te.interrupt(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter((t=>t!==e))}getFiberRefs(){return this.setFiberRef(li,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=he.delete_(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=he.updateAs(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=o.get(this.getFiberRef(le.currentServices),wn.tracerTag),this._supervisor=this.getFiberRef(ui),this._scheduler=this.getFiberRef(X.currentScheduler)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=On;const n=globalThis[de.currentFiberURI];globalThis[de.currentFiberURI]=this;try{for(;t===On;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[de.currentFiberURI]=n}this._queue.length>0&&!this._running?(this._running=!0,t===An?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(ie.currentSchedulingPriority))}drainQueueWhileRunning(e,t){let n=t;for(;this._queue.length>0;){const t=this._queue.splice(0,1)[0];n=Ln[t._tag](this,e,n,t)}return n}isInterrupted(){return!te.isEmpty(this.getFiberRef(ie.currentInterruptedCause))}addInterruptedCause(e){const t=this.getFiberRef(ie.currentInterruptedCause);this.setFiberRef(ie.currentInterruptedCause,te.sequential(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(const t of this._children)t.tell(pe.interruptSignal(te.interrupt(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let t=!1;const n=()=>{const n=e.next();return n.done?ie.sync((()=>{t=!0})):ie.asVoid(n.value.await)};return ie.whileLoop({while:()=>!t,body:n,step:()=>{}})}return null}reportExitValue(e){if(en.runtimeMetrics(this._runtimeFlags)){const t=this.getFiberRef(ie.currentMetricLabels),n=this.id().startTimeMillis,r=Date.now();switch(Tn.unsafeUpdate(r-n,t),kn.unsafeUpdate(-1,t),e._tag){case Zt.OP_SUCCESS:xn.unsafeUpdate(1,t);break;case Zt.OP_FAILURE:In.unsafeUpdate(1,t)}}if("Failure"===e._tag){const t=this.getFiberRef(ie.currentUnhandledErrorLogLevel);te.isInterruptedOnly(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(Jn)}log(e,t,n){const r=k.isSome(n)?n.value:this.getFiberRef(ie.currentLogLevel),i=this.getFiberRef(Dn);if(v.greaterThan(i,r))return;const a=this.getFiberRef(ie.currentLogSpan),s=this.getFiberRef(ie.currentLogAnnotations),c=this.getLoggers(),l=this.getFiberRefs();if(b.size(c)>0){const n=o.get(this.getFiberRef(le.currentServices),ne.clockTag),i=new Date(n.unsafeCurrentTimeMillis());for(const o of c)o.log({fiberId:this.id(),logLevel:r,message:e,cause:t,context:l,spans:a,annotations:s,date:i})}}evaluateMessageWhileSuspended(e){switch(e._tag){case pe.OP_YIELD_NOW:return An;case pe.OP_INTERRUPT_SIGNAL:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(ie.exitFailCause(e.cause)),this._asyncInterruptor=null),On;case pe.OP_RESUME:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),On;case pe.OP_STATEFUL:return e.onFiber(this,null!==this._exitValue?h.done:h.suspended(this._runtimeFlags,this._asyncBlockingOn)),On;default:return Mn(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=en.interruptible(this._runtimeFlags)&&this.isInterrupted()?ie.exitFailCause(this.getInterruptedCause()):e;for(;null!==t;){const e=t,n=this.runLoop(e);if(n===Cn){const e=Rn.currentOp;Rn.currentOp=null,e._op===Zt.OP_YIELD?en.cooperativeYielding(this._runtimeFlags)?(this.tell(pe.yieldNow()),this.tell(pe.resume(ie.exitVoid)),t=null):t=ie.exitVoid:e._op===Zt.OP_ASYNC&&(t=null)}else{this._runtimeFlags=(0,m.pipe)(this._runtimeFlags,en.enable(en.WindDown));const e=this.interruptAllChildren();null!==e?t=ie.flatMap(e,(()=>n)):(0===this._queue.length?this.setExitValue(n):this.tell(pe.resume(n)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(pe.resume(e));else{this._running=!0;const t=globalThis[de.currentFiberURI];globalThis[de.currentFiberURI]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[de.currentFiberURI]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(pe.resume(e))}patchRuntimeFlags(e,t){const n=en.patch(e,t);return globalThis[de.currentFiberURI]=this,this._runtimeFlags=n,n}initiateAsync(e,t){let n=!1;const r=e=>{n||(n=!0,this.tell(pe.resume(e)))};en.interruptible(e)&&(this._asyncInterruptor=r);try{t(r)}catch(i){r(ie.failCause(te.die(i)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==Zt.OP_ON_FAILURE)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Zt.OP_ON_SUCCESS&&e._op!==Zt.OP_WHILE)return e;e=this.popStack()}}[Zt.OP_TAG](e){return ie.map(ie.fiberRefGet(ie.currentContext),(t=>o.unsafeGet(t,e)))}Left(e){return ie.fail(e.left)}None(e){return ie.fail(new ie.NoSuchElementException)}Right(e){return ie.exitSucceed(e.right)}Some(e){return ie.exitSucceed(e.value)}Micro(e){return ie.unsafeAsync((t=>{const n=(()=>{const e=new AbortController,t=Object.create(null);return t[z.key]=e,t[$.key]=e.signal,U(t)})().pipe(q(V,this.getFiberRef(ie.currentContext)));let r=t;return e[O](n,(e=>{if("Right"===e._tag)return r(ie.exitSucceed(e.right));switch(e.left._tag){case"Interrupt":return r(ie.exitFailCause(te.interrupt(f.none)));case"Fail":return r(ie.fail(e.left.error));case"Die":return r(ie.die(e.left.defect))}})),ie.async((e=>{r=t=>{e(ie.void)},j(n,z).abort()}))}))}[Zt.OP_SYNC](e){const t=(0,r.internalCall)((()=>e.effect_instruction_i0())),n=this.getNextSuccessCont();return void 0!==n?(n._op in Fn||Mn(n),Fn[n._op](this,n,t)):(Rn.currentOp=ie.exitSucceed(t),Cn)}[Zt.OP_SUCCESS](e){const t=e,n=this.getNextSuccessCont();return void 0!==n?(n._op in Fn||Mn(n),Fn[n._op](this,n,t.effect_instruction_i0)):(Rn.currentOp=t,Cn)}[Zt.OP_FAILURE](e){const t=e.effect_instruction_i0,n=this.getNextFailCont();if(void 0===n)return Rn.currentOp=ie.exitFailCause(t),Cn;switch(n._op){case Zt.OP_ON_FAILURE:case Zt.OP_ON_SUCCESS_AND_FAILURE:return en.interruptible(this._runtimeFlags)&&this.isInterrupted()?ie.exitFailCause(te.stripFailures(t)):(0,r.internalCall)((()=>n.effect_instruction_i1(t)));case"OnStep":return en.interruptible(this._runtimeFlags)&&this.isInterrupted()?ie.exitFailCause(te.stripFailures(t)):ie.exitSucceed(ie.exitFailCause(t));case Zt.OP_REVERT_FLAGS:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),en.interruptible(this._runtimeFlags)&&this.isInterrupted()?ie.exitFailCause(te.sequential(t,this.getInterruptedCause())):ie.exitFailCause(t);default:Mn(n)}}[Zt.OP_WITH_RUNTIME](e){return(0,r.internalCall)((()=>e.effect_instruction_i0(this,h.running(this._runtimeFlags))))}Blocked(e){const t=this.getFiberRefs(),n=this._runtimeFlags;if(this._steps.length>0){const r=[],i=this._steps[this._steps.length-1];let a=this.popStack();for(;a&&"OnStep"!==a._op;)r.push(a),a=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;const s=p.diff(i.refs,t),o=en.diff(i.flags,n);return ie.exitSucceed(ie.blocked(e.effect_instruction_i0,ie.withFiberRuntime((t=>{for(;r.length>0;)t.pushStack(r.pop());return t.setFiberRefs(p.patch(t.id(),t.getFiberRefs())(s)),t._runtimeFlags=en.patch(o)(t._runtimeFlags),e.effect_instruction_i1}))))}return ie.uninterruptibleMask((t=>ie.flatMap(hr(ie.runRequestBlock(e.effect_instruction_i0)),(()=>t(e.effect_instruction_i1)))))}RunBlocked(e){return(e=>ie.forEachSequentialDiscard(ee.flatten(e),(e=>fr(ee.sequentialCollectionToChunk(e),(([e,t])=>{const n=new Map,r=[];for(const a of t){r.push(s.toReadonlyArray(a));for(const e of a)n.set(e.request,e)}const i=r.flat();return ie.fiberRefLocally(Ei(e.runAll(r),i,(()=>i.forEach((e=>{e.listeners.interrupted=!0})))),re.currentRequestMap,n)}),!1,!1))))(e.effect_instruction_i0)}[Zt.OP_UPDATE_RUNTIME_FLAGS](e){const t=e.effect_instruction_i0,n=this._runtimeFlags,i=en.patch(n,t);if(en.interruptible(i)&&this.isInterrupted())return ie.exitFailCause(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),e.effect_instruction_i1){const t=en.diff(i,n);return this.pushStack(new ie.RevertFlags(t,e)),(0,r.internalCall)((()=>e.effect_instruction_i1(n)))}return ie.exitVoid}[Zt.OP_ON_SUCCESS](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[Zt.OP_ON_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[Zt.OP_ON_SUCCESS_AND_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[Zt.OP_ASYNC](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),Rn.currentOp=e,Cn}[Zt.OP_YIELD](e){return this.isYielding=!1,Rn.currentOp=e,Cn}[Zt.OP_WHILE](e){const t=e.effect_instruction_i0,n=e.effect_instruction_i1;return t()?(this.pushStack(e),n()):ie.exitVoid}[Zt.OP_COMMIT](e){return(0,r.internalCall)((()=>e.commit()))}runLoop(e){let t=e;for(this.currentOpCount=0;;){if(0!==(this._runtimeFlags&en.OpSupervision)&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;const e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;const n=t;t=ie.flatMap(ie.yieldNow({priority:e}),(()=>n))}}try{if("_op"in t&&t._op in this||Mn(t),t=this._tracer.context((()=>En.getCurrentVersion()!==t[l.EffectTypeId]._V?ie.dieMessage(`Cannot execute an Effect versioned ${t[l.EffectTypeId]._V} with a Runtime of version ${En.getCurrentVersion()}`):this[t._op](t)),this),t===Cn){const e=Rn.currentOp;return e._op===Zt.OP_YIELD||e._op===Zt.OP_ASYNC?Cn:(Rn.currentOp=null,e._op===Zt.OP_SUCCESS||e._op===Zt.OP_FAILURE?e:ie.exitFailCause(te.die(e)))}}catch(n){t=ie.isEffectError(n)?ie.exitFailCause(n.cause):ie.isInterruptedException(n)?ie.exitFailCause(te.sequential(te.die(n),te.interrupt(f.none))):ie.die(n)}}}run=()=>{this.drainQueueOnCurrentThread()}}const Dn=(0,g.globalValue)("effect/FiberRef/currentMinimumLogLevel",(()=>ie.fiberRefUnsafeMake(v.fromLiteral("Info")))),Un=e=>ge.makeLogger((t=>{const n=d.getOrDefault(t.context,le.currentServices);o.get(n,ue.consoleTag).unsafe.log(e.log(t))})),jn=e=>ge.makeLogger((t=>{const n=d.getOrDefault(t.context,le.currentServices);o.get(n,ue.consoleTag).unsafe.error(e.log(t))})),qn=(0,g.globalValue)(Symbol.for("effect/Logger/defaultLogger"),(()=>Un(ge.stringLogger))),Wn=(0,g.globalValue)(Symbol.for("effect/Logger/jsonLogger"),(()=>Un(ge.jsonLogger))),Bn=(0,g.globalValue)(Symbol.for("effect/Logger/logFmtLogger"),(()=>Un(ge.logfmtLogger))),zn=(0,g.globalValue)(Symbol.for("effect/Logger/prettyLogger"),(()=>ge.prettyLogger())),$n=(0,g.globalValue)(Symbol.for("effect/Logger/structuredLogger"),(()=>Un(ge.structuredLogger))),Vn=(0,g.globalValue)(Symbol.for("effect/Logger/tracerLogger"),(()=>ge.makeLogger((({annotations:e,cause:t,context:n,fiberId:r,logLevel:i,message:a})=>{const s=k.flatMap(he.get(n,ie.currentContext),o.getOption(wn.spanTag)),c=k.map(he.get(n,le.currentServices),(e=>o.get(e,ne.clockTag)));if("None"===s._tag||"ExternalSpan"===s.value._tag||"None"===c._tag)return;const l=Object.fromEntries(y.map(e,S.toStringUnknown));l["effect.fiberId"]=f.threadName(r),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=te.pretty(t)),s.value.event(String(a),c.value.unsafeCurrentTimeNanos(),l)})))),Gn=e=>ge.mapInputOptions(e,(e=>{const t=k.flatMap(he.get(e.context,ie.currentContext),o.getOption(wn.spanTag));return"None"===t._tag?e:{...e,annotations:(0,m.pipe)(e.annotations,y.set("effect.traceId",t.value.traceId),y.set("effect.spanId",t.value.spanId),"Span"===t.value._tag?y.set("effect.spanName",t.value.name):m.identity)}})),Jn=(0,g.globalValue)(Symbol.for("effect/FiberRef/currentLoggers"),(()=>ie.fiberRefUnsafeMakeHashSet(b.make(qn,Vn)))),Hn=(0,m.dual)(3,((e,t,n)=>ie.flatMap(Yr,(r=>{let i=[];const a=ie.suspend((()=>{if(0===i.length)return ie.void;const e=i;return i=[],n(e)}));return ie.uninterruptibleMask((n=>(0,m.pipe)(ce.sleep(t),ie.zipRight(a),ce.forever,n,hr,ie.flatMap((e=>ie.scopeAddFinalizer(r,ie.interruptFiber(e)))),ie.zipRight(Qn((()=>a))),ie.as(ge.makeLogger((t=>{i.push(e.log(t))}))))))})))),Kn=function(){if("string"===typeof arguments[0])return ii(ie.currentLogAnnotations,y.set(arguments[0],arguments[1]));const e=Object.entries(arguments[0]);return ii(ie.currentLogAnnotations,y.mutate((t=>{for(let n=0;n<e.length;n++){const[r,i]=e[n];y.set(t,r,i)}return t})))},Yn=(0,m.dual)((e=>ie.isEffect(e[0])),((e,t)=>ie.uninterruptible(ie.tap(e,(e=>Qn((n=>t(e,n)))))))),Zn=(0,m.dual)((e=>ie.isEffect(e[0])),((e,t)=>wi(e,Qn((e=>t(e)))))),Qn=e=>ie.withFiberRuntime((t=>{const n=t.getFiberRefs(),r=t._runtimeFlags;return ie.flatMap(Yr,(t=>ie.scopeAddFinalizerExit(t,(t=>ie.withFiberRuntime((i=>{const a=i.getFiberRefs(),s=i._runtimeFlags,o=p.diff(a,n),c=en.diff(s,r),l=p.diff(n,a);return i.setFiberRefs(p.patch(o,i.id(),n)),wi(ie.withRuntimeFlags(e(t),c),ie.sync((()=>{i.setFiberRefs(p.patch(l,i.id(),i.getFiberRefs()))})))}))))))})),Xn=e=>ie.fiberRefLocally(ie.currentForkScopeOverride,k.some(me.globalScope))(e),er=Symbol.for("effect/Effect/existsPar/found"),tr=(0,m.dual)((e=>I.isIterable(e[0])&&!ie.isEffect(e[0])),((e,t,n)=>se(n?.concurrency,(()=>ie.suspend((()=>nr(e[Symbol.iterator](),0,t)))),(()=>ie.matchEffect(lr(e,((e,n)=>ie.if_(t(e,n),{onTrue:()=>ie.fail(er),onFalse:()=>ie.void})),n),{onFailure:e=>e===er?ie.succeed(!0):ie.fail(e),onSuccess:()=>ie.succeed(!1)}))))),nr=(e,t,n)=>{const r=e.next();return r.done?ie.succeed(!1):(0,m.pipe)(ie.flatMap(n(r.value,t),(r=>r?ie.succeed(r):nr(e,t+1,n))))},rr=(0,m.dual)((e=>I.isIterable(e[0])&&!ie.isEffect(e[0])),((e,t,n)=>{const r=n?.negate?(e,n)=>ie.map(t(e,n),a.not):t;return se(n?.concurrency,(()=>ie.suspend((()=>i.fromIterable(e).reduceRight(((e,t,n)=>ie.zipWith(e,ie.suspend((()=>r(t,n))),((e,n)=>n?[t,...e]:e))),ie.sync((()=>new Array)))))),(()=>ie.map(lr(e,((e,t)=>ie.map(r(e,t),(t=>t?k.some(e):k.none()))),n),i.getSomes)))})),ir=(e,t)=>{const[n,r]=(e=>{if(Array.isArray(e)||I.isIterable(e))return[e,k.none()];const t=Object.keys(e),n=t.length;return[t.map((t=>e[t])),k.some((e=>{const r={};for(let i=0;i<n;i++)r[t[i]]=e[i];return r}))]})(e);return"validate"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(ie.either(i));return ie.flatMap(lr(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>{const r=k.none(),i=e.length,a=new Array(i),s=new Array(i);let o=!1;for(let t=0;t<i;t++){const n=e[t];"Left"===n._tag?(a[t]=k.some(n.left),o=!0):(s[t]=n.right,a[t]=r)}return o?"Some"===t._tag?ie.fail(t.value(a)):ie.fail(a):n?.discard?ie.void:"Some"===t._tag?ie.succeed(t.value(s)):ie.succeed(s)}))})(n,r,t):"either"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(ie.either(i));return n?.discard?lr(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):ie.map(lr(r,m.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>"Some"===t._tag?t.value(e):e))})(n,r,t):!0!==t?.discard&&"Some"===r._tag?ie.map(lr(n,m.identity,t),r.value):lr(n,m.identity,t)},ar=e=>t=>ir(t,e),sr=(e,t)=>ie.map(ir(i.fromIterable(e).map(ie.exit),t),i.filterMap((e=>ie.exitIsSuccess(e)?k.some(e.effect_instruction_i0):k.none()))),or=(0,m.dual)(2,((e,t)=>Array.from({length:t},(()=>e)))),cr=(0,m.dual)((e=>ie.isEffect(e[0])),((e,t,n)=>ir(or(e,t),n))),lr=(0,m.dual)((e=>I.isIterable(e[0])),((e,t,n)=>ie.withFiberRuntime((r=>{const i=!0===n?.batching||"inherit"===n?.batching&&r.getFiberRef(ie.currentRequestBatching);return n?.discard?ae(n.concurrency,(()=>Or(u.sequential)((n=>i?fr(e,((e,r)=>n(t(e,r))),!0,!1,1):ie.forEachSequentialDiscard(e,((e,r)=>n(t(e,r))))))),(()=>Or(u.parallel)((n=>fr(e,((e,r)=>n(t(e,r))),i,!1)))),(n=>Or(u.parallelN(n))((r=>fr(e,((e,n)=>r(t(e,n))),i,!1,n))))):ae(n?.concurrency,(()=>Or(u.sequential)((n=>i?dr(e,1,((e,r)=>n(t(e,r))),!0):ie.forEachSequential(e,((e,r)=>n(t(e,r))))))),(()=>Or(u.parallel)((n=>ur(e,((e,r)=>n(t(e,r))),i)))),(n=>Or(u.parallelN(n))((r=>dr(e,n,((e,n)=>r(t(e,n))),i)))))})))),ur=(e,t,n)=>ie.suspend((()=>{const r=i.fromIterable(e),a=new Array(r.length);return ie.zipRight(fr(r,((e,n)=>ie.flatMap(t(e,n),(e=>ie.sync((()=>a[n]=e))))),n,!1),ie.succeed(a))})),fr=(e,t,n,r,i)=>ie.uninterruptibleMask((a=>ie.transplant((s=>ie.withFiberRuntime((o=>{let c=Array.from(e).reverse(),l=c.length;if(0===l)return ie.void;let u=0,f=!1;const d=i?Math.min(c.length,i):c.length,p=new Set,h=new Array,m=new Array,g=new Array,y=new Array,b=()=>{const e=h.filter((({exit:e})=>"Failure"===e._tag)).sort(((e,t)=>e.index<t.index?-1:e.index===t.index?0:1)).map((({exit:e})=>e));return 0===e.length&&e.push(ie.exitVoid),e},S=(e,t=!1)=>{const n=ie.uninterruptible(s(e)),r=yr(n,o,o._runtimeFlags,me.globalScope);return o._scheduler.scheduleTask((()=>{t&&r.unsafeInterruptAsFork(o.id()),r.resume(n)}),0),r},v=()=>{r||(l-=c.length,c=[]),f=!0,p.forEach((e=>{e._scheduler.scheduleTask((()=>{e.unsafeInterruptAsFork(o.id())}),0)}))},w=n?ie.step:ie.exit,E=S(ie.async((e=>{const r=(e,t)=>{"Blocked"===e._op?y.push(e):(h.push({index:t,exit:e}),"Failure"!==e._op||f||v())},s=()=>{if(c.length>0){const d=c.pop();let v=u++;const E=()=>{const e=c.pop();return v=u++,ie.flatMap(ie.yieldNow(),(()=>ie.flatMap(w(a(t(e,v))),_)))},_=e=>c.length>0&&(r(e,v),c.length>0)?E():ie.succeed(e),x=ie.flatMap(w(a(t(d,v))),_),I=S(x);m.push(I),p.add(I),f&&I._scheduler.scheduleTask((()=>{I.unsafeInterruptAsFork(o.id())}),0),I.addObserver((t=>{let a;if(a="Failure"===t._op?t:t.effect_instruction_i0,g.push(I),p.delete(I),r(a,v),h.length===l)e(ie.succeed(k.getOrElse(ie.exitCollectAll(b(),{parallel:!0}),(()=>ie.exitVoid))));else if(y.length+h.length===l){const t=y.map((e=>e.effect_instruction_i0)).reduce(ee.par);e(ie.succeed(ie.blocked(t,fr([k.getOrElse(ie.exitCollectAll(b(),{parallel:!0}),(()=>ie.exitVoid)),...y.map((e=>e.effect_instruction_i1))],(e=>e),n,!0,i))))}else s()}))}};for(let t=0;t<d;t++)s()})));return ie.asVoid(ie.onExit(ie.flatten(a(de.join(E))),ie.exitMatch({onFailure:()=>{v();const e=y.length+1,t=Math.min("number"===typeof i?i:y.length,y.length),n=Array.from(y);return ie.async((r=>{const i=[];let a=0,s=0;const o=(t,s)=>o=>{i[t]=o,a++,a===e&&r(k.getOrThrow(ie.exitCollectAll(i,{parallel:!0}))),n.length>0&&s&&c()},c=()=>{S(n.pop(),!0).addObserver(o(s,!0)),s++};E.addObserver(o(s,!1)),s++;for(let e=0;e<t;e++)c()}))},onSuccess:()=>ie.forEachSequential(g,(e=>e.inheritAll))})))})))))),dr=(e,t,n,r)=>ie.suspend((()=>{const a=i.fromIterable(e),s=new Array(a.length);return ie.zipRight(fr(a,((e,t)=>ie.map(n(e,t),(e=>s[t]=e))),r,!1,t),ie.succeed(s))})),pr=e=>ie.withFiberRuntime(((t,n)=>ie.succeed(gr(e,t,n.runtimeFlags)))),hr=e=>Sr(e,me.globalScope),mr=(0,m.dual)(2,((e,t)=>pr(ie.onError(e,(e=>{const n=te.failureOrCause(e);switch(n._tag){case"Left":return t(n.left);case"Right":return ie.failCause(n.right)}}))))),gr=(e,t,n,r=null)=>{const i=br(e,t,n,r);return i.resume(e),i},yr=(e,t,n,r=null)=>br(e,t,n,r),br=(e,t,n,r=null)=>{const i=f.unsafeMake(),a=t.getFiberRefs(),s=he.forkAs(a,i),o=new Pn(i,s,n),c=he.getOrDefault(s,ie.currentContext),l=o._supervisor;l.onStart(c,e,k.some(t),o),o.addObserver((e=>l.onEnd(e,o)));return(null!==r?r:(0,m.pipe)(t.getFiberRef(ie.currentForkScopeOverride),k.getOrElse((()=>t.scope())))).add(n,o),o},Sr=(e,t)=>ie.withFiberRuntime(((n,r)=>ie.succeed(gr(e,n,r.runtimeFlags,t)))),vr=(0,m.dual)((e=>I.isFunction(e[2])),((e,t,n,r)=>se(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>ie.zipWith(e,t,((e,t)=>n(e,t,r)))),ie.succeed(t))),(()=>ie.flatMap(Z.make(t),(t=>ie.flatMap(lr(e,((e,r)=>ie.flatMap(e,(e=>Z.update(t,(t=>n(t,e,r)))))),r),(()=>Z.get(t))))))))),wr=(0,m.dual)((e=>I.isIterable(e[0])),((e,t,n)=>(0,m.pipe)(lr(e,((e,n)=>ie.either(t(e,n))),n),ie.map((e=>ie.partitionMap(e,m.identity)))))),Er=(0,m.dual)((e=>I.isIterable(e[0])),((e,t,n)=>ie.flatMap(wr(e,t,{concurrency:n?.concurrency,batching:n?.batching}),(([e,t])=>0===e.length?n?.discard?ie.void:ie.succeed(t):ie.fail(e))))),_r=e=>{const t=s.fromIterable(e);if(!s.isNonEmpty(t))return ie.dieSync((()=>new ie.IllegalArgumentException("Received an empty collection of effects")));const n=s.headNonEmpty(t),r=s.tailNonEmpty(t),a=e=>(0,m.pipe)(de.inheritAll(e[1]),ie.as(e[0]));return(0,m.pipe)(ie.deferredMake(),ie.flatMap((e=>(0,m.pipe)(Z.make(r.length),ie.flatMap((t=>ie.uninterruptibleMask((o=>(0,m.pipe)(pr(ie.interruptible(n)),ie.flatMap((n=>(0,m.pipe)(r,ie.forEachSequential((e=>pr(ie.interruptible(e)))),ie.map((e=>s.unsafeFromArray(e))),ie.map((e=>(0,m.pipe)(e,s.prepend(n)))),ie.tap((n=>(0,m.pipe)(n,i.reduce(ie.void,((r,i)=>(0,m.pipe)(r,ie.zipRight((0,m.pipe)(de._await(i),ie.flatMap(kr(n,i,e,t)),pr,ie.asVoid)))))))),ie.flatMap((t=>(0,m.pipe)(o((0,m.pipe)(c.await(e),ie.flatMap(a))),ie.onInterrupt((()=>(0,m.pipe)(t,i.reduce(ie.void,((e,t)=>(0,m.pipe)(e,ie.zipLeft(ie.interruptFiber(t)))))))))))))))))))))))},kr=(e,t,n,r)=>a=>ie.exitMatchEffect(a,{onFailure:e=>(0,m.pipe)(Z.modify(r,(t=>[0===t?(0,m.pipe)(ie.deferredFailCause(n,e),ie.asVoid):ie.void,t-1])),ie.flatten),onSuccess:r=>(0,m.pipe)(ie.deferredSucceed(n,[r,t]),ie.flatMap((n=>n?(0,m.pipe)(s.fromIterable(e),i.reduce(ie.void,((e,n)=>n===t?e:(0,m.pipe)(e,ie.zipLeft(ie.interruptFiber(n)))))):ie.void)))}),xr=(0,m.dual)((e=>I.isIterable(e[0])&&!ie.isEffect(e[0])),((e,t,n,r)=>se(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>ie.zipWith(e,t,((e,t)=>n(e,t,r)))),t)),(()=>ie.suspend((()=>(0,m.pipe)(vr([t,...e],k.none(),((e,t,r)=>{switch(e._tag){case"None":return k.some(t);case"Some":return k.some(n(e.value,t,r))}}),r),ie.map((e=>{switch(e._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return e.value}}))))))))),Ir=e=>ie.contextWithEffect((t=>k.match(o.getOption(t,Kr),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return ie.flatMap(ie.scopeFork(t,u.parallel),(t=>ei(e,t)))}}}))),Tr=e=>t=>ie.contextWithEffect((n=>k.match(o.getOption(n,Kr),{onNone:()=>t,onSome:n=>"ParallelN"===n.strategy._tag&&n.strategy.parallelism===e?t:ie.flatMap(ie.scopeFork(n,u.parallelN(e)),(e=>ei(t,e)))}))),Or=e=>t=>ie.contextWithEffect((n=>k.match(o.getOption(n,Kr),{onNone:()=>t(m.identity),onSome:n=>{const r="Parallel"===e._tag?Ir:"Sequential"===e._tag?Mr:Tr(e.parallelism);switch(n.strategy._tag){case"Parallel":return r(t(Ir));case"Sequential":return r(t(Mr));case"ParallelN":return r(t(Tr(n.strategy.parallelism)))}}}))),Ar=e=>ie.flatMap(Kr,e),Nr=e=>ie.flatMap(Xr(),(t=>ti(e,t))),Mr=e=>ie.contextWithEffect((t=>k.match(o.getOption(t,Kr),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return ie.flatMap(ie.scopeFork(t,u.sequential),(t=>ei(e,t)))}}}))),Cr=(e,t)=>Rr([Ve.make(e,t)]),Rr=e=>ii(ie.currentMetricLabels,(t=>i.union(t,e))),Fr=(0,m.dual)(2,((e,t)=>ie.acquireUseRelease(Xr(),(n=>ie.flatMap(ei(e,n),t)),((e,t)=>ie.scopeClose(e,t))))),Lr=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n)=>Pr(e,t,((e,t)=>[e,t]),n))),Pr=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n,r)=>ie.flatten(Jr(ie.exit(e),ie.exit(t),((e,t)=>ie.exitZipWith(e,t,{onSuccess:n,onFailure:(e,t)=>r?.concurrent?te.parallel(e,t):te.sequential(e,t)})),r)))),Dr=(0,m.dual)(2,((e,t)=>ie.flatMap(wr(e,t),(([e,t])=>0===e.length?ie.succeed(t):ie.fail(e))))),Ur=(0,m.dual)(2,((e,t)=>ie.flatMap(wr(e,t),(([e,t])=>0===e.length?ie.void:ie.fail(e))))),jr=(0,m.dual)((e=>I.isIterable(e[0])),((e,t,n)=>ie.flip(lr(e,((e,n)=>ie.flip(t(e,n))),n)))),qr=e=>ii(le.currentServices,o.add(ne.clockTag,e)),Wr=e=>ii(le.currentServices,o.add(Qt.randomTag,e)),Br=e=>ii(le.currentServices,o.add(oe.configProviderTag,e)),zr=e=>Ar((t=>ie.flatMap(ie.scopeFork(t,fe.sequential),(t=>(0,m.pipe)(e,ei(t),ie.map((e=>[ie.fiberIdWith((e=>ie.scopeClose(t,ie.exitInterrupt(e)))),e]))))))),$r=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n)=>Jr(e,t,((e,t)=>[e,t]),n))),Vr=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Jr(e,t,((e,t)=>e),n):ie.zipLeft(e,t))),Gr=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Jr(e,t,((e,t)=>t),n):ie.zipRight(e,t))),Jr=(0,m.dual)((e=>ie.isEffect(e[1])),((e,t,n,r)=>ie.map(ir([e,t],{concurrency:r?.concurrent?2:1,batching:r?.batching}),(([e,t])=>n(e,t))))),Hr=e=>e===Q.empty?ie.void:(0,m.pipe)(ie.runtimeFlags,ie.flatMap((t=>{const n=en.patch(t,e),r=en.diff(n,t);return(0,m.pipe)(ie.updateRuntimeFlags(e),ie.zipRight(Qn((()=>ie.updateRuntimeFlags(r)))),ie.asVoid)})),ie.uninterruptible),Kr=o.GenericTag("effect/Scope"),Yr=Kr,Zr={[ie.ScopeTypeId]:ie.ScopeTypeId,[ie.CloseableScopeTypeId]:ie.CloseableScopeTypeId,pipe(){return(0,x.pipeArguments)(this,arguments)},fork(e){return ie.sync((()=>{const t=Qr(e);if("Closed"===this.state._tag)return t.state=this.state,t;const n=e=>t.close(e);return this.state.finalizers.add(n),((e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)})(t,(e=>ie.sync((()=>{"Open"===this.state._tag&&this.state.finalizers.delete(n)})))),t}))},close(e){return ie.suspend((()=>{if("Closed"===this.state._tag)return ie.void;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},0===t.length?ie.void:fe.isSequential(this.strategy)?(0,m.pipe)(ie.forEachSequential(t,(t=>ie.exit(t(e)))),ie.flatMap((e=>(0,m.pipe)(ie.exitCollectAll(e),k.map(ie.exitAsVoid),k.getOrElse((()=>ie.exitVoid)))))):fe.isParallel(this.strategy)?(0,m.pipe)(ur(t,(t=>ie.exit(t(e))),!1),ie.flatMap((e=>(0,m.pipe)(ie.exitCollectAll(e,{parallel:!0}),k.map(ie.exitAsVoid),k.getOrElse((()=>ie.exitVoid)))))):(0,m.pipe)(dr(t,this.strategy.parallelism,(t=>ie.exit(t(e))),!1),ie.flatMap((e=>(0,m.pipe)(ie.exitCollectAll(e,{parallel:!0}),k.map(ie.exitAsVoid),k.getOrElse((()=>ie.exitVoid))))))}))},addFinalizer(e){return ie.suspend((()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),ie.void)))}},Qr=(e=fe.sequential)=>{const t=Object.create(Zr);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Xr=(e=fe.sequential)=>ie.sync((()=>Qr(e))),ei=(0,m.dual)(2,((e,t)=>ie.mapInputContext(e,o.merge(o.make(Kr,t))))),ti=(0,m.dual)(2,((e,t)=>(0,m.pipe)(e,ei(t),ie.onExit((e=>t.close(e)))))),ni=e=>ie.fiberRefUnsafeMakePatch(e,{differ:vn,fork:mn}),ri=(0,m.dual)(2,((e,t)=>ie.asVoid(Yn(ie.flatMap(ie.fiberRefGet(e),(n=>ie.as(ie.fiberRefSet(e,t),n))),(t=>ie.fiberRefSet(e,t)))))),ii=(0,m.dual)(2,((e,t)=>ie.fiberRefGetWith(e,(n=>ri(e,t(n)))))),ai=(e,t)=>si((()=>ie.fiberRefUnsafeMake(e,t))),si=e=>Yn(ie.tap(ie.sync(e),(e=>ie.fiberRefUpdate(e,m.identity))),(e=>ie.fiberRefDelete(e))),oi=e=>si((()=>ie.fiberRefUnsafeMakeContext(e))),ci=e=>si((()=>ie.fiberRefUnsafeMakeRuntimeFlags(e))),li=ie.fiberRefUnsafeMakeRuntimeFlags(en.none),ui=ni(tn.none),fi=e=>ie.asVoid(de._await(di(e))),di=e=>({[de.FiberTypeId]:de.fiberVariance,id:()=>i.fromIterable(e).reduce(((e,t)=>f.combine(e,t.id())),f.none),await:ie.exit(ur(e,(e=>ie.flatten(e.await)),!1)),children:ie.map(ur(e,(e=>e.children),!1),i.flatten),inheritAll:ie.forEachSequentialDiscard(e,(e=>e.inheritAll)),poll:ie.map(ie.forEachSequential(e,(e=>e.poll)),i.reduceRight(k.some(ie.exitSucceed(new Array)),((e,t)=>{switch(t._tag){case"None":return k.none();case"Some":switch(e._tag){case"None":return k.none();case"Some":return k.some(ie.exitZipWith(t.value,e.value,{onSuccess:(e,t)=>[e,...t],onFailure:te.parallel}))}}}))),interruptAsFork:t=>ie.forEachSequentialDiscard(e,(e=>e.interruptAsFork(t))),pipe(){return(0,x.pipeArguments)(this,arguments)}}),pi=e=>ie.asVoid(hr(ie.interruptFiber(e))),hi=e=>de.join(di(e)),mi=e=>Yn(ie.succeed(e),ie.interruptFiber),gi=(0,m.dual)(3,((e,t,n)=>Si(e,t,{onSelfWin:(e,t)=>ie.flatMap(e.await,(r=>{switch(r._tag){case Zt.OP_SUCCESS:return ie.flatMap(e.inheritAll,(()=>n.onSelfDone(r,t)));case Zt.OP_FAILURE:return n.onSelfDone(r,t)}})),onOtherWin:(e,t)=>ie.flatMap(e.await,(r=>{switch(r._tag){case Zt.OP_SUCCESS:return ie.flatMap(e.inheritAll,(()=>n.onOtherDone(r,t)));case Zt.OP_FAILURE:return n.onOtherDone(r,t)}}))}))),yi=e=>ie.uninterruptibleMask((t=>ie.fiberIdWith((n=>ie.flatMap(hr(t(e)),(e=>(0,m.pipe)(t(de.join(e)),ie.onInterrupt((()=>(0,m.pipe)(e,de.interruptAsFork(n))))))))))),bi=(0,m.dual)(2,((e,t)=>ie.fiberIdWith((n=>gi(e,t,{onSelfDone:(e,t)=>ie.exitMatchEffect(e,{onFailure:e=>(0,m.pipe)(de.join(t),ce.mapErrorCause((t=>te.parallel(e,t)))),onSuccess:e=>(0,m.pipe)(t,ie.interruptAsFiber(n),ie.as(e))}),onOtherDone:(e,t)=>ie.exitMatchEffect(e,{onFailure:e=>(0,m.pipe)(de.join(t),ce.mapErrorCause((t=>te.parallel(t,e)))),onSuccess:e=>(0,m.pipe)(t,ie.interruptAsFiber(n),ie.as(e))})}))))),Si=(0,m.dual)(3,((e,t,n)=>ie.withFiberRuntime(((r,i)=>{const a=i.runtimeFlags,s=Y.make(!0),o=br(e,r,a,n.selfScope),c=br(t,r,a,n.otherScope);return ie.async((r=>{o.addObserver((()=>vi(o,c,n.onSelfWin,s,r))),c.addObserver((()=>vi(c,o,n.onOtherWin,s,r))),o.startFork(e),c.startFork(t)}),f.combine(o.id(),c.id()))})))),vi=(e,t,n,r,i)=>{Y.compareAndSet(!0,!1)(r)&&i(n(e,t))},wi=(0,m.dual)(2,((e,t)=>ie.uninterruptibleMask((n=>ie.matchCauseEffect(n(e),{onFailure:e=>ie.matchCauseEffect(t,{onFailure:t=>ie.failCause(te.sequential(e,t)),onSuccess:()=>ie.failCause(e)}),onSuccess:e=>ie.as(t,e)}))))),Ei=(e,t,n)=>ie.fiberIdWith((r=>ie.flatMap(ie.flatMap(hr(ie.interruptible(e)),(e=>ie.async((r=>{const i=t.map((e=>e.listeners.count)),a=()=>{i.every((e=>0===e))&&t.every((e=>"Pending"===e.result.state.current._tag||!("Done"!==e.result.state.current._tag||!ie.exitIsExit(e.result.state.current.effect)||"Failure"!==e.result.state.current.effect._tag||!te.isInterrupted(e.result.state.current.effect.cause))))&&(s.forEach((e=>e())),n?.(),r(ie.interruptFiber(e)))};e.addObserver((e=>{s.forEach((e=>e())),r(e)}));const s=t.map(((e,t)=>{const n=e=>{i[t]=e,a()};return e.listeners.addObserver(n),()=>e.listeners.removeObserver(n)}));return a(),ie.sync((()=>{s.forEach((e=>e()))}))})))),(()=>ie.suspend((()=>{const e=t.flatMap((e=>e.state.completed?[]:[e]));return ie.forEachSequentialDiscard(e,(e=>(0,Xt.complete)(e.request,ie.exitInterrupt(r))))})))))),_i=(0,m.dual)(2,((e,t)=>ie.fiberRefGetWith(re.currentRequestMap,(n=>ie.suspend((()=>{const r=i.fromIterable(t).flatMap((e=>n.has(e)?[n.get(e)]:[]));return Ei(e,r)})))))),ki=(e,t)=>(t=wn.addSpanStackTrace(t),ie.uninterruptible(ie.withFiberRuntime((n=>{const r=o.unsafeGet(n.getFiberRef(ie.currentContext),Kr),i=ce.unsafeMakeSpan(n,e,t),a=n.getFiberRef(ie.currentTracerTimingEnabled),s=o.get(n.getFiberRef(le.currentServices),ne.clockTag);return ie.as(ie.scopeAddFinalizerExit(r,(e=>ce.endSpan(i,e,s,a))),i)})))),xi=e=>ii(le.currentServices,o.add(wn.tracerTag,e)),Ii=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=wn.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return ie.flatMap(ki(t,wn.addSpanStackTrace(n)),(t=>ce.provideService(e,wn.spanTag,t)))}return e=>ie.flatMap(ki(t,wn.addSpanStackTrace(n)),(t=>ce.provideService(e,wn.spanTag,t)))}},738460:(e,t,n)=>{n.r(t),n.d(t,{FiberScopeTypeId:()=>s,globalScope:()=>u,unsafeMake:()=>l});var r=n(61915),i=n(744628),a=n(746375);const s=Symbol.for("effect/FiberScope");class o{[s]=s;fiberId=r.none;roots=new Set;add(e,t){this.roots.add(t),t.addObserver((()=>{this.roots.delete(t)}))}}class c{fiberId;parent;[s]=s;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(a.stateful((e=>{e.addChild(t),t.addObserver((()=>{e.removeChild(t)}))})))}}const l=e=>new c(e.id(),e),u=(0,i.globalValue)(Symbol.for("effect/FiberScope/Global"),(()=>new o))},143798:(e,t,n)=>{n.r(t),n.d(t,{HashMapTypeId:()=>N,beginMutation:()=>ee,compact:()=>he,empty:()=>U,endMutation:()=>te,entries:()=>Q,filter:()=>pe,filterMap:()=>me,findFirst:()=>ge,flatMap:()=>ue,forEach:()=>fe,fromIterable:()=>q,get:()=>z,getHash:()=>$,has:()=>G,hasHash:()=>J,isEmpty:()=>B,isHashMap:()=>W,keys:()=>Y,make:()=>j,map:()=>le,modify:()=>ae,modifyAt:()=>re,modifyHash:()=>ie,mutate:()=>ne,reduce:()=>de,remove:()=>oe,removeMany:()=>ce,set:()=>H,setTree:()=>K,size:()=>X,union:()=>se,unsafeGet:()=>V,values:()=>Z});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(504491),c=n(709322),l=n(125105);const u=Math.pow(2,5),f=u-1,d=u/2,p=u/4;function h(e,t){return t>>>e&f}function m(e){return 1<<e}function g(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n}var y=n(614028);function b(e,t,n,r){let i=r;if(!e){const e=r.length;i=new Array(e);for(let t=0;t<e;++t)i[t]=r[t]}return i[t]=n,i}function S(e,t,n){const r=n.length-1;let i=0,a=0,s=n;if(e)i=a=t;else for(s=new Array(r);i<t;)s[a++]=n[i++];for(++i;i<=r;)s[a++]=n[i++];return e&&(s.length=r),s}class v{_tag="EmptyNode";modify(e,t,n,r,i,a){const s=n(o.none());return o.isNone(s)?new v:(++a.value,new _(e,r,i,s))}}function w(e){return(0,l.isTagged)(e,"EmptyNode")}function E(e,t){return!w(e)&&t===e.edit}class _{edit;hash;key;value;_tag="LeafNode";constructor(e,t,n,r){this.edit=e,this.hash=t,this.key=n,this.value=r}modify(e,t,n,i,a,s){if((0,r.equals)(a,this.key)){const t=n(this.value);return t===this.value?this:o.isNone(t)?(--s.value,new v):E(this,e)?(this.value=t,this):new _(e,i,a,t)}const c=n(o.none());return o.isNone(c)?this:(++s.value,O(e,t,this.hash,this,i,new _(e,i,a,c)))}}class k{edit;hash;children;_tag="CollisionNode";constructor(e,t,n){this.edit=e,this.hash=t,this.children=n}modify(e,t,n,r,i,a){if(r===this.hash){const t=E(this,e),r=this.updateCollisionList(t,e,this.hash,this.children,n,i,a);return r===this.children?this:r.length>1?new k(e,this.hash,r):r[0]}const s=n(o.none());return o.isNone(s)?this:(++a.value,O(e,t,this.hash,this,r,new _(e,r,i,s)))}updateCollisionList(e,t,n,i,a,s,c){const l=i.length;for(let f=0;f<l;++f){const l=i[f];if("key"in l&&(0,r.equals)(s,l.key)){const r=l.value,u=a(r);return u===r?i:o.isNone(u)?(--c.value,S(e,f,i)):b(e,f,new _(t,n,s,u),i)}}const u=a(o.none());return o.isNone(u)?i:(++c.value,b(e,l,new _(t,n,s,u),i))}}class x{edit;mask;children;_tag="IndexedNode";constructor(e,t,n){this.edit=e,this.mask=t,this.children=n}modify(e,t,n,r,i,a){const s=this.mask,o=this.children,c=h(t,r),l=m(c),u=g(s,l),f=s&l,p=E(this,e);if(!f){const f=(new v).modify(e,t+5,n,r,i,a);return f?o.length>=d?function(e,t,n,r,i){const a=[];let s=r,o=0;for(let c=0;s;++c)1&s&&(a[c]=i[o++]),s>>>=1;return a[t]=n,new I(e,o+1,a)}(e,c,f,s,o):new x(e,s|l,function(e,t,n,r){const i=r.length;if(e){let e=i;for(;e>=t;)r[e--]=r[e];return r[t]=n,r}let a=0,s=0;const o=new Array(i+1);for(;a<t;)o[s++]=r[a++];for(o[t]=n;a<i;)o[++s]=r[a++];return o}(p,u,f,o)):this}const y=o[u],_=y.modify(e,t+5,n,r,i,a);if(y===_)return this;let k,T=s;if(w(_)){if(T&=~l,!T)return new v;if(o.length<=2&&(w(O=o[1^u])||"LeafNode"===O._tag||"CollisionNode"===O._tag))return o[1^u];k=S(p,u,o)}else k=b(p,u,_,o);var O;return p?(this.mask=T,this.children=k,this):new x(e,T,k)}}class I{edit;size;children;_tag="ArrayNode";constructor(e,t,n){this.edit=e,this.size=t,this.children=n}modify(e,t,n,r,i,a){let s=this.size;const o=this.children,c=h(t,r),l=o[c],u=(l||new v).modify(e,t+5,n,r,i,a);if(l===u)return this;const f=E(this,e);let d;if(w(l)&&!w(u))++s,d=b(f,c,u,o);else if(!w(l)&&w(u)){if(--s,s<=p)return function(e,t,n,r){const i=new Array(t-1);let a=0,s=0;for(let o=0,c=r.length;o<c;++o)if(o!==n){const e=r[o];e&&!w(e)&&(i[a++]=e,s|=1<<o)}return new x(e,s,i)}(e,s,c,o);d=b(f,c,new v,o)}else d=b(f,c,u,o);return f?(this.size=s,this.children=d,this):new I(e,s,d)}}function T(e,t,n,r,i,a){if(n===i)return new k(e,n,[a,r]);const s=h(t,n),o=h(t,i);if(s===o)return t=>new x(e,m(s)|m(o),[t]);{const t=s<o?[r,a]:[a,r];return new x(e,m(s)|m(o),t)}}function O(e,t,n,r,i,a){let s,o=t;for(;;){const t=T(e,o,n,r,i,a);if("function"!==typeof t){let e=t;for(;null!=s;)e=s.value(e),s=s.previous;return e}s=y.make(t,s),o+=5}}const A="effect/HashMap",N=Symbol.for(A),M={[N]:N,[Symbol.iterator](){return new R(this,((e,t)=>[e,t]))},[a.symbol](){let e=a.hash(A);for(const t of this)e^=(0,i.pipe)(a.hash(t[0]),a.combine(a.hash(t[1])));return a.cached(this,e)},[r.symbol](e){if(W(e)){if(e._size!==this._size)return!1;for(const t of this){const n=(0,i.pipe)(e,$(t[0],a.hash(t[0])));if(o.isNone(n))return!1;if(!r.equals(t[1],n.value))return!1}return!0}return!1},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}},C=(e,t,n,r)=>{const i=Object.create(M);return i._editable=e,i._edit=t,i._root=n,i._size=r,i};class R{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=L(this.map._root,this.f,void 0)}next(){if(o.isNone(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=F(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new R(this.map,this.f)}}const F=e=>e?P(e[0],e[1],e[2],e[3],e[4]):o.none(),L=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return o.isSome(e.value)?o.some({value:t(e.key,e.value.value),cont:n}):F(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return P(r.length,r,0,t,n)}default:return F(n)}},P=(e,t,n,r,i)=>{for(;n<e;){const a=t[n++];if(a&&!w(a))return L(a,r,[e,t,n,r,i])}return F(i)},D=C(!1,0,new v,0),U=()=>D,j=(...e)=>q(e),q=e=>{const t=ee(U());for(const n of e)H(t,n[0],n[1]);return te(t)},W=e=>(0,l.hasProperty)(e,N),B=e=>e&&w(e._root),z=i.dual(2,((e,t)=>$(e,t,a.hash(t)))),$=i.dual(3,((e,t,n)=>{let i=e._root,a=0;for(;;)switch(i._tag){case"LeafNode":return r.equals(t,i.key)?i.value:o.none();case"CollisionNode":if(n===i.hash){const e=i.children;for(let n=0,i=e.length;n<i;++n){const i=e[n];if("key"in i&&r.equals(t,i.key))return i.value}}return o.none();case"IndexedNode":{const e=m(h(a,n));if(i.mask&e){i=i.children[g(i.mask,e)],a+=5;break}return o.none()}case"ArrayNode":if(i=i.children[h(a,n)],i){a+=5;break}return o.none();default:return o.none()}})),V=i.dual(2,((e,t)=>{const n=$(e,t,a.hash(t));if(o.isNone(n))throw new Error("Expected map to contain key");return n.value})),G=i.dual(2,((e,t)=>o.isSome($(e,t,a.hash(t))))),J=i.dual(3,((e,t,n)=>o.isSome($(e,t,n)))),H=i.dual(3,((e,t,n)=>re(e,t,(()=>o.some(n))))),K=i.dual(3,((e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:C(e._editable,e._edit,t,n))),Y=e=>new R(e,(e=>e)),Z=e=>new R(e,((e,t)=>t)),Q=e=>new R(e,((e,t)=>[e,t])),X=e=>e._size,ee=e=>C(!0,e._edit+1,e._root,e._size),te=e=>(e._editable=!1,e),ne=i.dual(2,((e,t)=>{const n=ee(e);return t(n),te(n)})),re=i.dual(3,((e,t,n)=>ie(e,t,a.hash(t),n))),ie=i.dual(4,((e,t,n,r)=>{const a={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,a);return(0,i.pipe)(e,K(s,a.value))})),ae=i.dual(3,((e,t,n)=>re(e,t,o.map(n)))),se=i.dual(2,((e,t)=>{const n=ee(e);return fe(t,((e,t)=>H(n,t,e))),te(n)})),oe=i.dual(2,((e,t)=>re(e,t,o.none))),ce=i.dual(2,((e,t)=>ne(e,(e=>{for(const n of t)oe(n)(e)})))),le=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>H(e,r,t(n,r)))))),ue=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>ne(e,(e=>fe(t(n,r),((t,n)=>H(e,n,t))))))))),fe=i.dual(2,((e,t)=>de(e,void 0,((e,n,r)=>t(n,r))))),de=i.dual(3,((e,t,n)=>{const r=e._root;if("LeafNode"===r._tag)return o.isSome(r.value)?n(t,r.value.value,r.key):t;if("EmptyNode"===r._tag)return t;const i=[r.children];let a;for(;a=i.pop();)for(let e=0,r=a.length;e<r;){const r=a[e++];r&&!w(r)&&("LeafNode"===r._tag?o.isSome(r.value)&&(t=n(t,r.value.value,r.key)):i.push(r.children))}return t})),pe=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e)t(i,r)&&H(n,r,i)})))),he=e=>me(e,i.identity),me=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e){const e=t(i,r);o.isSome(e)&&H(n,r,e.value)}})))),ge=i.dual(2,((e,t)=>{for(const n of e)if(t(n[1],n[0]))return o.some(n);return o.none()}))},99532:(e,t,n)=>{n.r(t),n.d(t,{HashSetTypeId:()=>f,add:()=>O,beginMutation:()=>x,difference:()=>N,empty:()=>g,endMutation:()=>I,every:()=>w,filter:()=>U,flatMap:()=>L,forEach:()=>P,fromIterable:()=>y,has:()=>S,intersection:()=>M,isHashSet:()=>h,isSubset:()=>E,make:()=>b,makeImpl:()=>p,map:()=>F,mutate:()=>T,partition:()=>j,reduce:()=>D,remove:()=>A,size:()=>k,some:()=>v,toggle:()=>R,union:()=>C,values:()=>_});var r=n(382300),i=n(154258),a=n(353370),s=n(58536),o=n(709322),c=n(125105),l=n(143798);const u="effect/HashSet",f=Symbol.for(u),d={[f]:f,[Symbol.iterator](){return l.keys(this._keyMap)},[a.symbol](){return a.cached(this,a.combine(a.hash(this._keyMap))(a.hash(u)))},[r.symbol](e){return!!h(e)&&(l.size(this._keyMap)===l.size(e._keyMap)&&r.equals(this._keyMap,e._keyMap))},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},p=e=>{const t=Object.create(d);return t._keyMap=e,t},h=e=>(0,c.hasProperty)(e,f),m=p(l.empty()),g=()=>m,y=e=>{const t=x(g());for(const n of e)O(t,n);return I(t)},b=(...e)=>{const t=x(g());for(const n of e)O(t,n);return I(t)},S=(0,i.dual)(2,((e,t)=>l.has(e._keyMap,t))),v=(0,i.dual)(2,((e,t)=>{let n=!1;for(const r of e)if(n=t(r),n)break;return n})),w=(0,i.dual)(2,((e,t)=>!v(e,(e=>!t(e))))),E=(0,i.dual)(2,((e,t)=>w(e,(e=>S(t,e))))),_=e=>l.keys(e._keyMap),k=e=>l.size(e._keyMap),x=e=>p(l.beginMutation(e._keyMap)),I=e=>(e._keyMap._editable=!1,e),T=(0,i.dual)(2,((e,t)=>{const n=x(e);return t(n),I(n)})),O=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(l.set(t,!0)(e._keyMap),e):p(l.set(t,!0)(e._keyMap)))),A=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(l.remove(t)(e._keyMap),e):p(l.remove(t)(e._keyMap)))),N=(0,i.dual)(2,((e,t)=>T(e,(e=>{for(const n of t)A(e,n)})))),M=(0,i.dual)(2,((e,t)=>T(g(),(n=>{for(const r of t)S(r)(e)&&O(r)(n)})))),C=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>O(n,e)));for(const e of t)O(n,e)})))),R=(0,i.dual)(2,((e,t)=>S(e,t)?A(e,t):O(e,t))),F=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{const r=t(e);S(n,r)||O(n,r)}))})))),L=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{for(const r of t(e))S(n,r)||O(n,r)}))})))),P=(0,i.dual)(2,((e,t)=>l.forEach(e._keyMap,((e,n)=>t(n))))),D=(0,i.dual)(3,((e,t,n)=>l.reduce(e._keyMap,t,((e,t,r)=>n(e,r))))),U=(0,i.dual)(2,((e,t)=>T(g(),(n=>{const r=_(e);let i;for(;!(i=r.next()).done;){const e=i.value;t(e)&&O(n,e)}})))),j=(0,i.dual)(2,((e,t)=>{const n=_(e);let r;const i=x(g()),a=x(g());for(;!(r=n.next()).done;){const e=r.value;t(e)?O(i,e):O(a,e)}return[I(a),I(i)]}))},232376:(e,t,n)=>{n.r(t),n.d(t,{LayerTypeId:()=>O,MemoMapTypeId:()=>N,annotateLogs:()=>Ve,annotateSpans:()=>Ge,build:()=>P,buildWithMemoMap:()=>U,buildWithScope:()=>D,catchAll:()=>q,catchAllCause:()=>W,context:()=>V,die:()=>B,dieSync:()=>z,discard:()=>$,effect_provide:()=>Ze,empty:()=>Me,extendScope:()=>G,fail:()=>J,failCause:()=>K,failCauseSync:()=>Y,failSync:()=>H,fiberRefLocally:()=>re,fiberRefLocallyScoped:()=>se,fiberRefLocallyScopedWith:()=>oe,fiberRefLocallyWith:()=>ae,flatMap:()=>Z,flatten:()=>Q,fresh:()=>X,fromEffect:()=>ee,fromEffectContext:()=>ne,fromEffectDiscard:()=>te,fromFunction:()=>ce,isFresh:()=>C,isLayer:()=>M,launch:()=>le,locallyEffect:()=>ie,makeMemoMap:()=>F,map:()=>ue,mapError:()=>fe,match:()=>pe,matchCause:()=>de,memoize:()=>he,merge:()=>me,mergeAll:()=>ge,orDie:()=>ye,orElse:()=>be,passthrough:()=>Se,project:()=>ve,provide:()=>qe,provideMerge:()=>We,retry:()=>we,scope:()=>Te,scoped:()=>ke,scopedContext:()=>Ie,scopedDiscard:()=>xe,service:()=>Oe,succeed:()=>Ae,succeedContext:()=>Ne,suspend:()=>Ce,sync:()=>Re,syncContext:()=>Fe,tap:()=>Le,tapError:()=>Pe,tapErrorCause:()=>De,toRuntime:()=>Ue,toRuntimeWithMemoMap:()=>je,unsafeMakeMemoMap:()=>L,unwrapEffect:()=>ze,unwrapScoped:()=>$e,withParentSpan:()=>He,withSpan:()=>Je,zipWith:()=>Be});var r=n(114471),i=n(823478),a=n(499779),s=n(860118),o=n(685344),c=n(154258),l=n(398826),u=n(709322),f=n(125105),d=n(131173),p=n(358659),h=n(823864),m=n(694375),g=n(597081),y=n(861819),b=n(365519),S=n(168527);const v="Fresh",w="FromEffect",E="ProvideMerge";var _=n(858061),k=n(595296),x=n(939909),I=n(660571),T=n(460011);const O=Symbol.for("effect/Layer"),A={[O]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return(0,u.pipeArguments)(this,arguments)}},N=Symbol.for("effect/Layer/MemoMap"),M=e=>(0,f.hasProperty)(e,O),C=e=>e._tag===v;class R{ref;[N];constructor(e){this.ref=e,this[N]=N}getOrElseMemoize(e,t){return(0,c.pipe)(I.modifyEffect(this.ref,(n=>{const r=n.get(e);if(void 0!==r){const[e,i]=r,a=(0,c.pipe)(e,g.flatMap((([e,t])=>(0,c.pipe)(m.patchFiberRefs(e),g.as(t)))),g.onExit(g.exitMatch({onFailure:()=>g.void,onSuccess:()=>g.scopeAddFinalizerExit(t,i)})));return g.succeed([a,n])}return(0,c.pipe)(_.make(0),g.flatMap((r=>(0,c.pipe)(g.deferredMake(),g.flatMap((i=>(0,c.pipe)(_.make((()=>g.void)),g.map((a=>{const s=g.uninterruptibleMask((s=>(0,c.pipe)(b.scopeMake(),g.flatMap((o=>(0,c.pipe)(s(g.flatMap(j(e,o,!0),(e=>m.diffFiberRefs(e(this))))),g.exit,g.flatMap((s=>{switch(s._tag){case S.OP_FAILURE:return(0,c.pipe)(g.deferredFailCause(i,s.effect_instruction_i0),g.zipRight(g.scopeClose(o,s)),g.zipRight(g.failCause(s.effect_instruction_i0)));case S.OP_SUCCESS:return(0,c.pipe)(_.set(a,(e=>(0,c.pipe)(g.scopeClose(o,e),g.whenEffect(_.modify(r,(e=>[1===e,e-1]))),g.asVoid))),g.zipRight(_.update(r,(e=>e+1))),g.zipRight(g.scopeAddFinalizerExit(t,(t=>(0,c.pipe)(g.sync((()=>n.delete(e))),g.zipRight(_.get(a)),g.flatMap((e=>e(t))))))),g.zipRight(g.deferredSucceed(i,s.effect_instruction_i0)),g.as(s.effect_instruction_i0[1]))}})))))))),o=[(0,c.pipe)(g.deferredAwait(i),g.onExit(g.exitMatchEffect({onFailure:()=>g.void,onSuccess:()=>_.update(r,(e=>e+1))}))),e=>(0,c.pipe)(_.get(a),g.flatMap((t=>t(e))))];return[s,C(e)?n:n.set(e,o)]})))))))))})),g.flatten)}}const F=g.suspend((()=>g.map(y.makeSynchronized(new Map),(e=>new R(e))))),L=()=>new R(y.unsafeMakeSynchronized(new Map)),P=e=>b.scopeWith((t=>D(e,t))),D=(0,c.dual)(2,((e,t)=>g.flatMap(F,(n=>g.flatMap(j(e,t),(e=>e(n))))))),U=(0,c.dual)(3,((e,t,n)=>g.flatMap(j(e,n),(e=>e(t))))),j=(e,t,n=!1)=>{const r=e;switch(r._tag){case"Locally":return g.sync((()=>e=>r.f(e.getOrElseMemoize(r.self,t))));case"ExtendScope":return g.sync((()=>e=>b.scopeWith((t=>e.getOrElseMemoize(r.layer,t)))));case"Fold":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.layer,t),g.matchCauseEffect({onFailure:n=>e.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>e.getOrElseMemoize(r.successK(n),t)}))));case"Fresh":return g.sync((()=>e=>(0,c.pipe)(r.layer,D(t))));case"FromEffect":return n?g.sync((()=>e=>r.effect)):g.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Provide":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),g.flatMap((n=>(0,c.pipe)(e.getOrElseMemoize(r.second,t),g.provideContext(n)))))));case"Scoped":return n?g.sync((()=>e=>b.scopeExtend(r.effect,t))):g.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Suspend":return g.sync((()=>e=>e.getOrElseMemoize(r.evaluate(),t)));case"ProvideMerge":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),g.zipWith(e.getOrElseMemoize(r.second,t),r.zipK))));case"ZipWith":return g.sync((()=>e=>(0,c.pipe)(e.getOrElseMemoize(r.first,t),b.zipWithOptions(e.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0}))))}},q=(0,c.dual)(2,((e,t)=>pe(e,{onFailure:t,onSuccess:Ne}))),W=(0,c.dual)(2,((e,t)=>de(e,{onFailure:t,onSuccess:Ne}))),B=e=>K(r.die(e)),z=e=>Y((()=>r.die(e()))),$=e=>ue(e,(()=>a.empty())),V=()=>ne(g.context()),G=e=>{const t=Object.create(A);return t._tag="ExtendScope",t.layer=e,t},J=e=>K(r.fail(e)),H=e=>Y((()=>r.fail(e()))),K=e=>ne(g.failCause(e)),Y=e=>ne(g.failCauseSync(e)),Z=(0,c.dual)(2,((e,t)=>pe(e,{onFailure:J,onSuccess:t}))),Q=(0,c.dual)(2,((e,t)=>Z(e,a.get(t)))),X=e=>{const t=Object.create(A);return t._tag=v,t.layer=e,t},ee=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.map(i,(e=>a.make(r,e))))})),te=e=>ne(g.map(e,(()=>a.empty())));function ne(e){const t=Object.create(A);return t._tag=w,t.effect=e,t}const re=(0,c.dual)(3,((e,t,n)=>ie(e,g.fiberRefLocally(t,n)))),ie=(0,c.dual)(2,((e,t)=>{const n=Object.create(A);return n._tag="Locally",n.self=e,n.f=t,n})),ae=(0,c.dual)(3,((e,t,n)=>ie(e,g.fiberRefLocallyWith(t,n)))),se=(e,t)=>xe(b.fiberRefLocallyScoped(e,t)),oe=(e,t)=>xe(b.fiberRefLocallyScopedWith(e,t)),ce=(e,t,n)=>ne(g.map(e,(e=>a.make(t,n(e))))),le=e=>b.scopedEffect(g.zipRight(b.scopeWith((t=>(0,c.pipe)(e,D(t)))),g.never)),ue=(0,c.dual)(2,((e,t)=>Z(e,(e=>Ne(t(e)))))),fe=(0,c.dual)(2,((e,t)=>q(e,(e=>H((()=>t(e))))))),de=(0,c.dual)(2,((e,{onFailure:t,onSuccess:n})=>{const r=Object.create(A);return r._tag="Fold",r.layer=e,r.failureK=t,r.successK=n,r})),pe=(0,c.dual)(2,((e,{onFailure:t,onSuccess:n})=>de(e,{onFailure:e=>{const n=r.failureOrCause(e);switch(n._tag){case"Left":return t(n.left);case"Right":return K(n.right)}},onSuccess:n}))),he=e=>b.scopeWith((t=>g.map(m.memoize(D(e,t)),ne))),me=(0,c.dual)(2,((e,t)=>Be(e,t,((e,t)=>a.merge(e,t))))),ge=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t=me(t,e[n]);return t},ye=e=>q(e,(e=>B(e))),be=(0,c.dual)(2,((e,t)=>q(e,t))),Se=e=>me(V(),e),ve=(0,c.dual)(4,((e,t,n,r)=>ue(e,(e=>a.make(n,r(a.unsafeGet(e,t))))))),we=(0,c.dual)(2,((e,t)=>Ce((()=>{const n=a.GenericTag("effect/Layer/retry/{ state: unknown }");return(0,c.pipe)(Ae(n,{state:t.initial}),Z((r=>Ee(e,t,n,(0,c.pipe)(r,a.get(n)).state))))})))),Ee=(e,t,n,r)=>(0,c.pipe)(e,q((i=>(0,c.pipe)(_e(t,n,i,r),Z((r=>X(Ee(e,t,n,(0,c.pipe)(r,a.get(n)).state)))))))),_e=(e,t,n,r)=>ee(t,(0,c.pipe)(i.currentTimeMillis,g.flatMap((t=>(0,c.pipe)(e.step(t,n,r),g.flatMap((([e,r,a])=>d.isDone(a)?g.fail(n):(0,c.pipe)(i.sleep(s.millis(p.start(a.intervals)-t)),g.as({state:e}))))))))),ke=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return Ie(g.map(i,(e=>a.make(r,e))))})),xe=e=>Ie((0,c.pipe)(e,g.as(a.empty()))),Ie=e=>{const t=Object.create(A);return t._tag="Scoped",t.effect=e,t},Te=Ie(g.map(b.acquireRelease(b.scopeMake(),((e,t)=>e.close(t))),(e=>a.make(h.Scope,e)))),Oe=e=>ee(e,e),Ae=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.succeed(a.make(r,i)))})),Ne=e=>ne(g.succeed(e)),Me=Ne(a.empty()),Ce=e=>{const t=Object.create(A);return t._tag="Suspend",t.evaluate=e,t},Re=(0,c.dual)(2,((e,t)=>{const n=a.isTag(e),r=n?e:t,i=n?t:e;return ne(g.sync((()=>a.make(r,i()))))})),Fe=e=>ne(g.sync(e)),Le=(0,c.dual)(2,((e,t)=>Z(e,(e=>ne(g.as(t(e),e)))))),Pe=(0,c.dual)(2,((e,t)=>q(e,(e=>ne(g.flatMap(t(e),(()=>g.fail(e)))))))),De=(0,c.dual)(2,((e,t)=>W(e,(e=>ne(g.flatMap(t(e),(()=>g.failCause(e)))))))),Ue=e=>(0,c.pipe)(b.scopeWith((t=>D(e,t))),g.flatMap((e=>(0,c.pipe)(k.runtime(),g.provideContext(e))))),je=(0,c.dual)(2,((e,t)=>g.flatMap(b.scopeWith((n=>U(e,t,n))),(e=>(0,c.pipe)(k.runtime(),g.provideContext(e)))))),qe=(0,c.dual)(2,((e,t)=>Ce((()=>{const n=Object.create(A);return n._tag="Provide",n.first=Object.create(A,{_tag:{value:E,enumerable:!0},first:{value:V(),enumerable:!0},second:{value:t},zipK:{value:(e,t)=>(0,c.pipe)(e,a.merge(t))}}),n.second=e,n})))),We=(0,c.dual)(2,((e,t)=>{const n=Object.create(A);return n._tag=E,n.first=t,n.second=qe(e,t),n.zipK=(e,t)=>(0,c.pipe)(e,a.merge(t)),n})),Be=(0,c.dual)(3,((e,t,n)=>Ce((()=>{const r=Object.create(A);return r._tag="ZipWith",r.first=e,r.second=t,r.zipK=n,r})))),ze=e=>{const t=a.GenericTag("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return Z(ee(t,e),(e=>a.get(e,t)))},$e=e=>{const t=a.GenericTag("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return Z(ke(t,e),(e=>a.get(e,t)))},Ve=(0,c.dual)((e=>M(e[0])),(function(){const e=arguments;return ae(e[0],g.currentLogAnnotations,"string"===typeof e[1]?l.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>l.set(e,t,n)),t))})),Ge=(0,c.dual)((e=>M(e[0])),(function(){const e=arguments;return ae(e[0],g.currentTracerSpanAnnotations,"string"===typeof e[1]?l.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>l.set(e,t,n)),t))})),Je=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=T.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return $e(g.map(n?.onEnd?g.tap(b.makeSpanScoped(t,n),(e=>b.addFinalizer((t=>n.onEnd(e,t))))):b.makeSpanScoped(t,n),(t=>He(e,t))))}return e=>$e(g.map(n?.onEnd?g.tap(b.makeSpanScoped(t,n),(e=>b.addFinalizer((t=>n.onEnd(e,t))))):b.makeSpanScoped(t,n),(t=>He(e,t))))},He=(0,c.dual)(2,((e,t)=>qe(e,Ne(a.make(T.spanTag,t))))),Ke=(0,c.dual)(2,((e,t)=>g.acquireUseRelease(b.scopeMake(),(n=>g.flatMap(D(t,n),(t=>g.provideSomeContext(e,t)))),((e,t)=>g.scopeClose(e,t))))),Ye=(0,c.dual)(2,((e,t)=>{const n=o.diff(k.defaultRuntime.fiberRefs,t.fiberRefs),r=x.diff(k.defaultRuntime.runtimeFlags,t.runtimeFlags);return g.uninterruptibleMask((i=>g.withFiberRuntime((s=>{const c=s.getFiberRef(g.currentContext),l=s.getFiberRefs(),u=o.patch(s.id(),l)(n),f=s._runtimeFlags,d=x.patch(r)(f),p=o.diff(u,l),h=x.diff(d,f);return s.setFiberRefs(u),s._runtimeFlags=d,b.ensuring(g.provideSomeContext(i(e),a.merge(c,t.context)),g.withFiberRuntime((e=>(e.setFiberRefs(o.patch(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=x.patch(h)(e._runtimeFlags),g.void))))}))))})),Ze=(0,c.dual)(2,((e,t)=>M(t)?Ke(e,t):a.isContext(t)?g.provideSomeContext(e,t):Ye(e,t)))},797281:(e,t,n)=>{n.r(t),n.d(t,{addLogger:()=>m,addLoggerEffect:()=>g,addLoggerScoped:()=>y,addSupervisor:()=>E,disableCooperativeYielding:()=>O,disableInterruption:()=>A,disableOpSupervision:()=>N,disableRuntimeMetrics:()=>M,disableWindDown:()=>C,enableCooperativeYielding:()=>_,enableInterruption:()=>k,enableOpSupervision:()=>x,enableRuntimeMetrics:()=>I,enableWindDown:()=>T,minimumLogLevel:()=>p,parentSpan:()=>F,removeLogger:()=>b,replaceLogger:()=>S,replaceLoggerEffect:()=>v,replaceLoggerScoped:()=>w,setConfigProvider:()=>R,setTracer:()=>P,span:()=>L,withMinimumLogLevel:()=>h});var r=n(499779),i=n(154258),a=n(895868),s=n(597081),o=n(365519),c=n(232376),l=n(939909),u=n(850519),f=n(125572),d=n(460011);const p=e=>c.scopedDiscard(o.fiberRefLocallyScoped(o.currentMinimumLogLevel,e)),h=(0,i.dual)(2,((e,t)=>s.fiberRefLocally(o.currentMinimumLogLevel,t)(e))),m=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentLoggers,a.add(e))),g=e=>c.unwrapEffect(s.map(e,m)),y=e=>c.unwrapScoped(s.map(e,m)),b=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentLoggers,a.remove(e))),S=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>m(t))))),v=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>g(t))))),w=(0,i.dual)(2,((e,t)=>c.flatMap(b(e),(()=>y(t))))),E=e=>c.scopedDiscard(o.fiberRefLocallyScopedWith(o.currentSupervisor,(t=>new f.Zip(t,e)))),_=c.scopedDiscard(o.withRuntimeFlagsScoped(u.enable(l.CooperativeYielding))),k=c.scopedDiscard(o.withRuntimeFlagsScoped(u.enable(l.Interruption))),x=c.scopedDiscard(o.withRuntimeFlagsScoped(u.enable(l.OpSupervision))),I=c.scopedDiscard(o.withRuntimeFlagsScoped(u.enable(l.RuntimeMetrics))),T=c.scopedDiscard(o.withRuntimeFlagsScoped(u.enable(l.WindDown))),O=c.scopedDiscard(o.withRuntimeFlagsScoped(u.disable(l.CooperativeYielding))),A=c.scopedDiscard(o.withRuntimeFlagsScoped(u.disable(l.Interruption))),N=c.scopedDiscard(o.withRuntimeFlagsScoped(u.disable(l.OpSupervision))),M=c.scopedDiscard(o.withRuntimeFlagsScoped(u.disable(l.RuntimeMetrics))),C=c.scopedDiscard(o.withRuntimeFlagsScoped(u.disable(l.WindDown))),R=e=>c.scopedDiscard(o.withConfigProviderScoped(e)),F=e=>c.succeedContext(r.make(d.spanTag,e)),L=(e,t)=>(t=d.addSpanStackTrace(t),c.scoped(d.spanTag,t?.onEnd?s.tap(o.makeSpanScoped(e,t),(e=>o.addFinalizer((n=>t.onEnd(e,n))))):o.makeSpanScoped(e,t))),P=e=>c.scopedDiscard(o.withTracerScoped(e))},60526:(e,t,n)=>{n.r(t),n.d(t,{LoggerTypeId:()=>y,filterLogLevel:()=>E,isLogger:()=>W,jsonLogger:()=>D,logfmtLogger:()=>F,makeLogger:()=>S,map:()=>_,mapInput:()=>v,mapInputOptions:()=>w,none:()=>k,prettyLogger:()=>X,simple:()=>x,stringLogger:()=>M,structuredLogger:()=>L,structuredMessage:()=>P,succeed:()=>I,sync:()=>T,zip:()=>O,zipLeft:()=>A,zipRight:()=>N});var r=n(342072),i=n(499779),a=n(406820),s=n(154258),o=n(398826),c=n(58536),l=n(287258),u=n(327e3),f=n(504491),d=n(709322),p=n(240834),h=n(130949),m=n(893443),g=n(646699);const y=Symbol.for("effect/Logger"),b={_Message:e=>e,_Output:e=>e},S=e=>({[y]:b,log:e,pipe(){return(0,d.pipeArguments)(this,arguments)}}),v=(0,s.dual)(2,((e,t)=>S((n=>e.log({...n,message:t(n.message)}))))),w=(0,s.dual)(2,((e,t)=>S((n=>e.log(t(n)))))),E=(0,s.dual)(2,((e,t)=>S((n=>t(n.logLevel)?f.some(e.log(n)):f.none())))),_=(0,s.dual)(2,((e,t)=>S((n=>t(e.log(n)))))),k={[y]:b,log:s.constVoid,pipe(){return(0,d.pipeArguments)(this,arguments)}},x=e=>({[y]:b,log:({message:t})=>e(t),pipe(){return(0,d.pipeArguments)(this,arguments)}}),I=e=>x((()=>e)),T=e=>x(e),O=(0,s.dual)(2,((e,t)=>S((n=>[e.log(n),t.log(n)])))),A=(0,s.dual)(2,((e,t)=>_(O(e,t),(e=>e[0])))),N=(0,s.dual)(2,((e,t)=>_(O(e,t),(e=>e[1])))),M=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:f,spans:d})=>{const h=n.getTime();let m=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${g.threadName(i)}`].join(" ");const y=r.ensure(f);for(let r=0;r<y.length;r++){const e=c.toStringUnknown(y[r]);e.length>0&&(m+=" message=",m=R(e,m))}if(null!=t&&"Empty"!==t._tag&&(m+=" cause=",m=R(p.pretty(t,{renderErrorCause:!0}),m)),l.isCons(d)){m+=" ";let e=!0;for(const t of d)e?e=!1:m+=" ",m+=(0,s.pipe)(t,u.render(h))}if(o.size(e)>0){m+=" ";let t=!0;for(const[n,r]of e)t?t=!1:m+=" ",m+=U(n),m+="=",m=R(c.toStringUnknown(r),m)}return m})),C=/^[^\s"=]+$/,R=(e,t)=>t+(e.match(C)?e:`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`),F=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:u,spans:f})=>{const d=n.getTime();let h=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${g.threadName(i)}`].join(" ");const m=r.ensure(u);for(let r=0;r<m.length;r++){const e=c.toStringUnknown(m[r],0);e.length>0&&(h+=" message=",h=j(e,h))}if(null!=t&&"Empty"!==t._tag&&(h+=" cause=",h=j(p.pretty(t,{renderErrorCause:!0}),h)),l.isCons(f)){h+=" ";let e=!0;for(const t of f)e?e=!1:h+=" ",h+=(0,s.pipe)(t,q(d))}if(o.size(e)>0){h+=" ";let t=!0;for(const[n,r]of e)t?t=!1:h+=" ",h+=U(n),h+="=",h=j(c.toStringUnknown(r,0),h)}return h})),L=S((({annotations:e,cause:t,date:n,fiberId:i,logLevel:a,message:s,spans:c})=>{const u=n.getTime(),f={},d={};if(o.size(e)>0)for(const[r,o]of e)f[r]=P(o);if(l.isCons(c))for(const r of c)d[r.label]=u-r.startTime;const h=r.ensure(s);return{message:1===h.length?P(h[0]):h.map(P),logLevel:a.label,timestamp:n.toISOString(),cause:p.isEmpty(t)?void 0:p.pretty(t,{renderErrorCause:!0}),annotations:f,spans:d,fiberId:g.threadName(i)}})),P=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},D=_(L,c.stringifyCircular),U=e=>e.replace(/[\s="]/g,"_"),j=(e,t)=>{return t+(e.match(C)?e:(n=e,JSON.stringify(n)));var n},q=e=>t=>`${U(t.label)}=${e-t.startTime}ms`,W=e=>"object"===typeof e&&null!=e&&y in e,B=(e,...t)=>{let n="";for(let r=0;r<t.length;r++)n+=`\x1b[${t[r]}m`;return n+e+"\x1b[0m"},z=(e,...t)=>e,$="1",V="36",G="37",J={None:[],All:[],Trace:["90"],Debug:["34"],Info:["32"],Warning:["33"],Error:["31"],Fatal:["101","30"]},H={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},K=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,Y="object"===typeof{env:{NODE_ENV:"production"}}.stdout&&null!=={env:{NODE_ENV:"production"}}.stdout&&!0==={env:{NODE_ENV:"production"}}.stdout.isTTY,Z="object"===typeof window,Q="object"===typeof self&&null!==self&&"function"===typeof self.constructor&&self.constructor.name.includes("Worker"),X=e=>{const t=e?.mode??"auto",n="browser"===("auto"===t?Z||Q?"browser":"tty":t),r="boolean"===typeof e?.colors?e.colors:Y||n,i=e?.formatDate??K;return n?te({colors:r,formatDate:i}):ee({colors:r,formatDate:i,stderr:!0===e?.stderr})},ee=e=>{const t="isBun"in{env:{NODE_ENV:"production"}}&&!0==={env:{NODE_ENV:"production"}}.isBun,n=e.colors&&Y?B:z;return S((({annotations:s,cause:c,context:u,date:f,fiberId:d,logLevel:y,message:b,spans:S})=>{const v=a.getOrDefault(u,h.currentServices),w=i.get(v,m.consoleTag).unsafe,E=!0===e.stderr?w.error:w.log,_=r.ensure(b);let k=n(`[${e.formatDate(f)}]`,G)+` ${n(y.label,...J[y._tag])}`+` (${g.threadName(d)})`;if(l.isCons(S)){const e=f.getTime(),t=q(e);for(const n of S)k+=" "+t(n)}k+=":";let x=0;if(_.length>0){const e=P(_[0]);"string"===typeof e&&(k+=" "+n(e,$,V),x++)}if(E(k),t||w.group(),p.isEmpty(c)||E(p.pretty(c,{renderErrorCause:!0})),x<_.length)for(;x<_.length;x++)E(_[x]);if(o.size(s)>0)for(const[e,t]of s)E(n(`${e}:`,$,G),t);t||w.groupEnd()}))},te=e=>{const t=e.colors?"%c":"";return S((({annotations:n,cause:s,context:c,date:u,fiberId:f,logLevel:d,message:y,spans:b})=>{const S=a.getOrDefault(c,h.currentServices),v=i.get(S,m.consoleTag).unsafe,w=r.ensure(y);let E=`${t}[${e.formatDate(u)}]`;const _=[];if(e.colors&&_.push("color:gray"),E+=` ${t}${d.label}${t} (${g.threadName(f)})`,e.colors&&_.push(H[d._tag],""),l.isCons(b)){const e=u.getTime(),t=q(e);for(const n of b)E+=" "+t(n)}E+=":";let k=0;if(w.length>0){const n=P(w[0]);"string"===typeof n&&(E+=` ${t}${n}`,e.colors&&_.push("color:deepskyblue"),k++)}if(v.groupCollapsed(E,..._),p.isEmpty(s)||v.error(p.pretty(s,{renderErrorCause:!0})),k<w.length)for(;k<w.length;k++)v.log(w[k]);if(o.size(n)>0)for(const[t,r]of n)e.colors?v.log(`%c${t}:`,"color:gray",r):v.log(`${t}:`,r);v.groupEnd()}))}},945959:(e,t,n)=>{n.r(t),n.d(t,{MetricLabelTypeId:()=>c,isMetricLabel:()=>f,make:()=>u});var r=n(382300),i=n(353370),a=n(709322),s=n(125105);const o="effect/MetricLabel",c=Symbol.for(o);class l{key;value;[c]=c;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=i.string(o+this.key+this.value)}[i.symbol](){return this._hash}[r.symbol](e){return f(e)&&this.key===e.key&&this.value===e.value}pipe(){return(0,a.pipeArguments)(this,arguments)}}const u=(e,t)=>new l(e,t),f=e=>(0,s.hasProperty)(e,c)},502600:(e,t,n)=>{n.r(t),n.d(t,{OP_CONSTANT:()=>r,OP_DESCRIBED:()=>s,OP_FAIL:()=>i,OP_FALLBACK:()=>a,OP_HASHMAP:()=>d,OP_LAZY:()=>o,OP_MAP_OR_FAIL:()=>c,OP_NESTED:()=>l,OP_PRIMITIVE:()=>u,OP_SEQUENCE:()=>f,OP_ZIP_WITH:()=>p});const r="Constant",i="Fail",a="Fallback",s="Described",o="Lazy",c="MapOrFail",l="Nested",u="Primitive",f="Sequence",d="HashMap",p="ZipWith"},408897:(e,t,n)=>{n.r(t),n.d(t,{OP_STATE_DONE:()=>i,OP_STATE_PENDING:()=>r});const r="Pending",i="Done"},168527:(e,t,n)=>{n.r(t),n.d(t,{OP_ASYNC:()=>r,OP_COMMIT:()=>i,OP_FAILURE:()=>a,OP_ON_FAILURE:()=>s,OP_ON_SUCCESS:()=>o,OP_ON_SUCCESS_AND_FAILURE:()=>c,OP_REVERT_FLAGS:()=>g,OP_SUCCESS:()=>l,OP_SYNC:()=>u,OP_TAG:()=>f,OP_UPDATE_RUNTIME_FLAGS:()=>d,OP_WHILE:()=>p,OP_WITH_RUNTIME:()=>h,OP_YIELD:()=>m});const r="Async",i="Commit",a="Failure",s="OnFailure",o="OnSuccess",c="OnSuccessAndFailure",l="Success",u="Sync",f="Tag",d="UpdateRuntimeFlags",p="While",h="WithRuntime",m="Yield",g="RevertFlags"},769275:(e,t,n)=>{n.r(t),n.d(t,{isNone:()=>h,isOption:()=>p,isSome:()=>m,none:()=>g,some:()=>y});var r=n(382300),i=n(353370),a=n(58536),s=n(125105),o=n(995515);const c=Symbol.for("effect/Option"),l={...o.EffectPrototype,[c]:{_A:e=>e},[a.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,a.format)(this.toJSON())}},u=Object.assign(Object.create(l),{_tag:"Some",_op:"Some",[r.symbol](e){return p(e)&&m(e)&&r.equals(this.value,e.value)},[i.symbol](){return i.cached(this,i.combine(i.hash(this._tag))(i.hash(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:(0,a.toJSON)(this.value)}}}),f=i.hash("None"),d=Object.assign(Object.create(l),{_tag:"None",_op:"None",[r.symbol]:e=>p(e)&&h(e),[i.symbol]:()=>f,toJSON(){return{_id:"Option",_tag:this._tag}}}),p=e=>(0,s.hasProperty)(e,c),h=e=>"None"===e._tag,m=e=>"Some"===e._tag,g=Object.create(d),y=e=>{const t=Object.create(u);return t.value=e,t}},808816:(e,t,n)=>{n.r(t),n.d(t,{cacheRequest:()=>h,currentCache:()=>f,currentCacheEnabled:()=>d,fromRequest:()=>p,withRequestCache:()=>g,withRequestCaching:()=>m});var r=n(860118),i=n(154258),a=n(744628),s=n(100726),o=n(515718),c=n(597081),l=n(365519),u=n(796605);const f=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCache"),(()=>c.fiberRefUnsafeMake((0,o.unsafeMakeWith)(65536,(()=>c.map(c.deferredMake(),(e=>({listeners:new u.Listeners,handle:e})))),(()=>(0,r.seconds)(60)))))),d=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCacheEnabled"),(()=>c.fiberRefUnsafeMake(!1))),p=(e,t)=>c.flatMap(c.isEffect(t)?t:c.succeed(t),(t=>c.fiberIdWith((n=>{const r=new Proxy(e,{});return c.fiberRefGetWith(d,(e=>{if(e){const e=c.fiberRefGetWith(f,(i=>c.flatMap(i.getEither(r),(a=>{switch(a._tag){case"Left":return a.left.listeners.interrupted?c.flatMap(i.invalidateWhen(r,(e=>e.handle===a.left.handle)),(()=>e)):(a.left.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.empty,e(c.deferredAwait(a.left.handle)))),(e=>(a.left.listeners.decrement(),e))))));case"Right":return a.right.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.single(t,s.makeEntry({request:r,result:a.right.handle,listeners:a.right.listeners,ownerId:n,state:{completed:!1}})),e(c.deferredAwait(a.right.handle)))),(()=>(a.right.listeners.decrement(),c.deferredAwait(a.right.handle))))))}}))));return e}const i=new u.Listeners;return i.increment(),c.flatMap(c.deferredMake(),(e=>(0,l.ensuring)(c.blocked(s.single(t,s.makeEntry({request:r,result:e,listeners:i,ownerId:n,state:{completed:!1}})),c.deferredAwait(e)),c.sync((()=>i.decrement())))))}))})))),h=(e,t)=>c.fiberRefGetWith(d,(n=>n?c.fiberRefGetWith(f,(n=>c.flatMap(n.getEither(e),(e=>{switch(e._tag){case"Left":return c.void;case"Right":return c.deferredComplete(e.right.handle,t)}})))):c.void)),m=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,d,t))),g=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,f,t)))},934981:(e,t,n)=>{n.r(t),n.d(t,{RandomTypeId:()=>l,make:()=>h,randomTag:()=>u});var r=n(889133),i=n(499779),a=n(154258),s=n(353370),o=n(977721),c=n(597081);const l=Symbol.for("effect/Random"),u=i.GenericTag("effect/Random");class f{seed;[l]=l;PRNG;constructor(e){this.seed=e,this.PRNG=new o.PCGRandom(e)}get next(){return c.sync((()=>this.PRNG.number()))}get nextBoolean(){return c.map(this.next,(e=>e>.5))}get nextInt(){return c.sync((()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER)))}nextRange(e,t){return c.map(this.next,(n=>(t-e)*n+e))}nextIntBetween(e,t){return c.sync((()=>this.PRNG.integer(t-e)+e))}shuffle(e){return d(e,(e=>this.nextIntBetween(0,e)))}}const d=(e,t)=>c.suspend((()=>(0,a.pipe)(c.sync((()=>Array.from(e))),c.flatMap((e=>{const n=[];for(let t=e.length;t>=2;t-=1)n.push(t);return(0,a.pipe)(n,c.forEachSequentialDiscard((n=>(0,a.pipe)(t(n),c.map((t=>p(e,n-1,t)))))),c.as(r.fromIterable(e)))}))))),p=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},h=e=>new f(s.hash(e))},332570:(e,t,n)=>{n.r(t),n.d(t,{RedactedTypeId:()=>f,isRedacted:()=>p,make:()=>h,proto:()=>d,redactedRegistry:()=>u,unsafeWipe:()=>g,value:()=>m});var r=n(382300),i=n(154258),a=n(744628),s=n(353370),o=n(709322),c=n(125105);const l="effect/Redacted",u=(0,a.globalValue)("effect/Redacted/redactedRegistry",(()=>new WeakMap)),f=Symbol.for(l),d={[f]:{_A:e=>e},pipe(){return(0,o.pipeArguments)(this,arguments)},toString:()=>"<redacted>",toJSON:()=>"<redacted>",[s.symbol](){return(0,i.pipe)(s.hash(l),s.combine(s.hash(u.get(this))),s.cached(this))},[r.symbol](e){return p(e)&&r.equals(u.get(this),u.get(e))}},p=e=>(0,c.hasProperty)(e,f),h=e=>{const t=Object.create(d);return u.set(t,e),t},m=e=>{if(u.has(e))return u.get(e);throw new Error("Unable to get redacted value")},g=e=>u.delete(e)},858061:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>l,get:()=>h,getAndSet:()=>g,getAndUpdate:()=>y,getAndUpdateSome:()=>b,make:()=>p,modify:()=>v,modifySome:()=>w,refVariance:()=>u,set:()=>m,setAndGet:()=>S,unsafeGet:()=>I,unsafeMake:()=>d,update:()=>E,updateAndGet:()=>_,updateSome:()=>k,updateSomeAndGet:()=>x});var r=n(154258),i=n(847857),a=n(504491),s=n(709322),o=n(168454),c=n(597081);const l=Symbol.for("effect/Ref"),u={_A:e=>e};class f{ref;[l]=u;[o.TypeId];constructor(e){this.ref=e,this[o.TypeId]=o.TypeId,this.get=c.sync((()=>i.get(this.ref)))}get;modify(e){return c.sync((()=>{const t=i.get(this.ref),[n,r]=e(t);return t!==r&&i.set(r)(this.ref),n}))}pipe(){return(0,s.pipeArguments)(this,arguments)}}const d=e=>new f(i.make(e)),p=e=>c.sync((()=>d(e))),h=e=>e.get,m=(0,r.dual)(2,((e,t)=>e.modify((()=>[void 0,t])))),g=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t])))),y=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t(e)])))),b=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[e,n.value]}})))),S=(0,r.dual)(2,((e,t)=>e.modify((()=>[t,t])))),v=(0,r.dual)(2,((e,t)=>e.modify(t))),w=(0,r.dual)(3,((e,t,n)=>e.modify((e=>{const r=n(e);switch(r._tag){case"None":return[t,e];case"Some":return r.value}})))),E=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,t(e)])))),_=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);return[n,n]})))),k=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,a.match(t(e),{onNone:()=>e,onSome:e=>e})])))),x=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[n.value,n.value]}})))),I=e=>i.get(e.ref)},796605:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>p,Listeners:()=>v,RequestTypeId:()=>c,TaggedClass:()=>h,complete:()=>m,completeEffect:()=>g,fail:()=>y,failCause:()=>b,filterOutCompleted:()=>w,isRequest:()=>u,of:()=>f,succeed:()=>S,tagged:()=>d});var r=n(154258),i=n(125105),a=n(612996),s=n(597081),o=n(995515);const c=Symbol.for("effect/Request"),l={...o.StructuralPrototype,[c]:{_E:e=>e,_A:e=>e}},u=e=>(0,i.hasProperty)(e,c),f=()=>e=>Object.assign(Object.create(l),e),d=e=>t=>{const n=Object.assign(Object.create(l),t);return n._tag=e,n},p=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=l,e}(),h=e=>class extends p{_tag=e},m=(0,r.dual)(2,((e,t)=>s.fiberRefGetWith(a.currentRequestMap,(n=>s.sync((()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,s.deferredUnsafeDone(r.result,t))}})))))),g=(0,r.dual)(2,((e,t)=>s.matchEffect(t,{onFailure:t=>m(e,s.exitFail(t)),onSuccess:t=>m(e,s.exitSucceed(t))}))),y=(0,r.dual)(2,((e,t)=>m(e,s.exitFail(t)))),b=(0,r.dual)(2,((e,t)=>m(e,s.exitFailCause(t)))),S=(0,r.dual)(2,((e,t)=>m(e,s.exitSucceed(t))));class v{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach((e=>e(this.count)))}decrement(){this.count--,this.observers.forEach((e=>e(this.count)))}}const w=e=>s.fiberRefGetWith(a.currentRequestMap,(t=>s.succeed(e.filter((e=>!(!0===t.get(e)?.state.completed))))))},595296:(e,t,n)=>{n.r(t),n.d(t,{FiberFailureCauseId:()=>N,FiberFailureId:()=>A,RuntimeImpl:()=>U,asyncEffect:()=>re,defaultRuntime:()=>B,defaultRuntimeFlags:()=>W,deleteFiberRef:()=>Y,disableRuntimeFlag:()=>$,enableRuntimeFlag:()=>V,fiberFailure:()=>C,isAsyncFiberException:()=>O,isFiberFailure:()=>R,make:()=>j,provideService:()=>J,runtime:()=>q,setFiberRef:()=>K,unsafeFork:()=>k,unsafeForkEffect:()=>Q,unsafeRunCallback:()=>x,unsafeRunEffect:()=>Z,unsafeRunPromise:()=>P,unsafeRunPromiseEffect:()=>X,unsafeRunPromiseExit:()=>D,unsafeRunPromiseExitEffect:()=>ee,unsafeRunSync:()=>I,unsafeRunSyncEffect:()=>te,unsafeRunSyncExit:()=>L,unsafeRunSyncExitEffect:()=>ne,updateContext:()=>G,updateFiberRefs:()=>H,updateRuntimeFlags:()=>z});var r=n(382300),i=n(499779),a=n(676966),s=n(911122),o=n(61915),c=n(406820),l=n(154258),u=n(58536),f=n(504491),d=n(709322),p=n(125105),h=n(84221),m=n(823864),g=n(240834),y=n(597081),b=n(49859),S=n(365519),v=n(738460),w=n(168527),E=n(939909),_=n(125572);const k=e=>(t,n)=>{const i=o.unsafeMake(),a=[[y.currentContext,[[i,e.context]]]];n?.scheduler&&a.push([h.currentScheduler,[[i,n.scheduler]]]);let s=c.updateManyAs(e.fiberRefs,{entries:a,forkAs:i});n?.updateRefs&&(s=n.updateRefs(s,i));const l=new S.FiberRuntime(i,s,e.runtimeFlags);let u=t;n?.scope&&(u=y.flatMap(m.fork(n.scope,b.sequential),(e=>y.zipRight(y.scopeAddFinalizer(e,y.fiberIdWith((e=>(0,r.equals)(e,l.id())?y.void:y.interruptAsFiber(l,e)))),y.onExit(t,(t=>m.close(e,t)))))));const d=l._supervisor;return d!==_.none&&(d.onStart(e.context,u,f.none(),l),l.addObserver((e=>d.onEnd(e,l)))),v.globalScope.add(e.runtimeFlags,l),!1===n?.immediate?l.resume(u):l.start(u),l},x=e=>(t,n={})=>{const r=k(e)(t,n);return n.onExit&&r.addObserver((e=>{n.onExit(e)})),(t,n)=>x(e)((0,l.pipe)(r,s.interruptAs(t??o.none)),{...n,onExit:n?.onExit?e=>n.onExit(a.flatten(e)):void 0})},I=e=>t=>{const n=L(e)(t);if("Failure"===n._tag)throw C(n.effect_instruction_i0);return n.effect_instruction_i0};class T extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const O=e=>p.isTagged(e,"AsyncFiberException")&&"fiber"in e,A=Symbol.for("effect/Runtime/FiberFailure"),N=Symbol.for("effect/Runtime/FiberFailure/Cause");class M extends Error{[A];[N];constructor(e){super(),this[A]=A,this[N]=e;const t=g.prettyErrors(e);if(t.length>0){const e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,void 0!==this.message&&0!==this.message.length||(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[N].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[u.NodeInspectSymbol](){return this.toString()}}const C=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new M(e);return Error.stackTraceLimit=t,n},R=e=>p.hasProperty(e,A),F=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return y.exitFail(t.left);case"Right":return y.exitSucceed(t.right);case"Some":return y.exitSucceed(t.value);case"None":return y.exitFail(y.NoSuchElementException())}},L=e=>t=>{const n=F(t);if(n)return n;const r=new h.SyncScheduler,i=k(e)(t,{scheduler:r});r.flush();const a=i.unsafePoll();if(a)return a;throw(e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new T(e);return Error.stackTraceLimit=t,n})(i)},P=e=>(t,n)=>D(e)(t,n).then((e=>{switch(e._tag){case w.OP_SUCCESS:return e.effect_instruction_i0;case w.OP_FAILURE:throw C(e.effect_instruction_i0)}})),D=e=>(t,n)=>new Promise((r=>{const i=F(t);i&&r(i);const a=k(e)(t);a.addObserver((e=>{r(e)})),void 0!==n?.signal&&(n.signal.aborted?a.unsafeInterruptAsFork(a.id()):n.signal.addEventListener("abort",(()=>{a.unsafeInterruptAsFork(a.id())}),{once:!0}))}));class U{context;runtimeFlags;fiberRefs;constructor(e,t,n){this.context=e,this.runtimeFlags=t,this.fiberRefs=n}pipe(){return(0,d.pipeArguments)(this,arguments)}}const j=e=>new U(e.context,e.runtimeFlags,e.fiberRefs),q=()=>y.withFiberRuntime(((e,t)=>y.succeed(new U(e.getFiberRef(y.currentContext),t.runtimeFlags,e.getFiberRefs())))),W=E.make(E.Interruption,E.CooperativeYielding,E.RuntimeMetrics),B=j({context:i.empty(),runtimeFlags:W,fiberRefs:c.empty()}),z=(0,l.dual)(2,((e,t)=>j({context:e.context,runtimeFlags:t(e.runtimeFlags),fiberRefs:e.fiberRefs}))),$=(0,l.dual)(2,((e,t)=>z(e,E.disable(t)))),V=(0,l.dual)(2,((e,t)=>z(e,E.enable(t)))),G=(0,l.dual)(2,((e,t)=>j({context:t(e.context),runtimeFlags:e.runtimeFlags,fiberRefs:e.fiberRefs}))),J=(0,l.dual)(3,((e,t,n)=>G(e,i.add(t,n)))),H=(0,l.dual)(2,((e,t)=>j({context:e.context,runtimeFlags:e.runtimeFlags,fiberRefs:t(e.fiberRefs)}))),K=(0,l.dual)(3,((e,t,n)=>H(e,c.updateAs({fiberId:o.none,fiberRef:t,value:n})))),Y=(0,l.dual)(2,((e,t)=>H(e,c.delete(t)))),Z=x(B),Q=k(B),X=P(B),ee=D(B),te=I(B),ne=L(B),re=e=>y.suspend((()=>{let t;return y.flatMap(y.deferredMake(),(n=>y.flatMap(q(),(r=>y.uninterruptibleMask((i=>y.zipRight(S.fork(i(y.matchCauseEffect(e((e=>x(r)(y.intoDeferred(e,n)))),{onFailure:e=>y.deferredFailCause(n,e),onSuccess:e=>(t=e,y.void)}))),i(y.onInterrupt(y.deferredAwait(n),(()=>t??y.void))))))))))}))},939909:(e,t,n)=>{n.r(t),n.d(t,{CooperativeYielding:()=>f,Interruption:()=>o,None:()=>s,OpSupervision:()=>c,RuntimeMetrics:()=>l,WindDown:()=>u,allFlags:()=>d,cooperativeYielding:()=>h,diff:()=>C,differ:()=>L,disable:()=>m,disableAll:()=>g,disabledSet:()=>M,enable:()=>y,enableAll:()=>b,enabledSet:()=>N,interruptible:()=>S,interruption:()=>v,isDisabled:()=>w,isEnabled:()=>E,make:()=>_,none:()=>k,opSupervision:()=>x,patch:()=>R,render:()=>I,renderPatch:()=>F,runtimeMetrics:()=>T,toSet:()=>O,windDown:()=>A});var r=n(154258),i=n(668446),a=n(850519);const s=0,o=1,c=2,l=4,u=16,f=32,d=[s,o,c,l,u,f],p=e=>{switch(e){case f:return"CooperativeYielding";case u:return"WindDown";case l:return"RuntimeMetrics";case c:return"OpSupervision";case o:return"Interruption";case s:return"None"}},h=e=>E(e,f),m=(0,r.dual)(2,((e,t)=>e&~t)),g=(0,r.dual)(2,((e,t)=>e&~t)),y=(0,r.dual)(2,((e,t)=>e|t)),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>v(e)&&!A(e),v=e=>E(e,o),w=(0,r.dual)(2,((e,t)=>!E(e,t))),E=(0,r.dual)(2,((e,t)=>0!==(e&t))),_=(...e)=>e.reduce(((e,t)=>e|t),0),k=_(s),x=e=>E(e,c),I=e=>{const t=[];return d.forEach((n=>{E(e,n)&&t.push(`${p(n)}`)})),`RuntimeFlags(${t.join(", ")})`},T=e=>E(e,l),O=e=>new Set(d.filter((t=>E(e,t)))),A=e=>E(e,u),N=e=>O(a.active(e)&a.enabled(e)),M=e=>O(a.active(e)&~a.enabled(e)),C=(0,r.dual)(2,((e,t)=>a.make(e^t,t))),R=(0,r.dual)(2,((e,t)=>e&(a.invert(a.active(t))|a.enabled(t))|a.active(t)&a.enabled(t))),F=e=>`RuntimeFlagsPatch(enabled = (${Array.from(N(e)).map((e=>p(e))).join(", ")}), disabled = (${Array.from(M(e)).map((e=>p(e))).join(", ")}))`,L=i.make({empty:a.empty,diff:(e,t)=>C(e,t),combine:(e,t)=>a.andThen(t)(e),patch:(e,t)=>R(t,e)})},850519:(e,t,n)=>{n.r(t),n.d(t,{active:()=>a,andThen:()=>b,both:()=>g,disable:()=>u,either:()=>y,empty:()=>c,enable:()=>l,enabled:()=>s,exclude:()=>m,inverse:()=>S,invert:()=>v,isActive:()=>d,isDisabled:()=>h,isEmpty:()=>f,isEnabled:()=>p,make:()=>o});var r=n(154258);const i=255,a=e=>e&i,s=e=>e>>8&i,o=(e,t)=>(e&i)+((t&e&i)<<8),c=o(0,0),l=e=>o(e,e),u=e=>o(e,0),f=e=>0===e,d=(0,r.dual)(2,((e,t)=>0!==(a(e)&t))),p=(0,r.dual)(2,((e,t)=>0!==(s(e)&t))),h=(0,r.dual)(2,((e,t)=>0!==(a(e)&t)&&0===(s(e)&t))),m=(0,r.dual)(2,((e,t)=>o(a(e)&~t,s(e)))),g=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)&s(t)))),y=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)|s(t)))),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>o(s(e),v(a(e))),v=e=>~e>>>0&i},457685:(e,t,n)=>{n.r(t),n.d(t,{ScheduleDriverTypeId:()=>Q,ScheduleTypeId:()=>Y,addDelay:()=>ie,addDelayEffect:()=>ae,andThen:()=>se,andThenEither:()=>oe,as:()=>ce,asVoid:()=>le,beginningOfDay:()=>Qt,beginningOfHour:()=>Kt,beginningOfMinute:()=>Gt,beginningOfSecond:()=>zt,bothInOut:()=>ue,check:()=>fe,checkEffect:()=>de,collectAllInputs:()=>pe,collectAllOutputs:()=>he,collectUntil:()=>me,collectUntilEffect:()=>ge,collectWhile:()=>ye,collectWhileEffect:()=>be,compose:()=>Se,count:()=>Sn,cron:()=>_e,dayOfMonth:()=>ke,dayOfWeek:()=>xe,delayed:()=>Ie,delayedEffect:()=>Te,delayedSchedule:()=>Oe,delays:()=>Ae,driver:()=>Ce,duration:()=>Re,either:()=>Fe,eitherWith:()=>Le,elapsed:()=>vn,endOfDay:()=>Xt,endOfHour:()=>Yt,endOfMinute:()=>Jt,endOfSecond:()=>$t,ensuring:()=>Pe,exponential:()=>De,fibonacci:()=>Ue,findNextMonth:()=>nn,fixed:()=>je,forever:()=>wn,fromDelay:()=>qe,fromDelays:()=>We,fromFunction:()=>Be,hourOfDay:()=>ze,identity:()=>$e,intersect:()=>Ve,intersectWith:()=>Ge,isSchedule:()=>Z,jittered:()=>He,jitteredWith:()=>Ke,linear:()=>Ye,makeWithState:()=>re,map:()=>Ze,mapBoth:()=>Ne,mapBothEffect:()=>Me,mapEffect:()=>Qe,mapInput:()=>ve,mapInputContext:()=>we,mapInputEffect:()=>Ee,minuteOfHour:()=>Xe,modifyDelay:()=>et,modifyDelayEffect:()=>tt,nextDay:()=>en,nextDayOfMonth:()=>tn,nextHour:()=>Zt,nextMinute:()=>Ht,nextSecond:()=>Vt,onDecision:()=>nt,once:()=>En,passthrough:()=>rt,provideContext:()=>it,provideService:()=>at,recurUntil:()=>st,recurUntilEffect:()=>ot,recurUntilOption:()=>ct,recurUpTo:()=>lt,recurWhile:()=>ut,recurWhileEffect:()=>ft,recurs:()=>dt,reduce:()=>pt,reduceEffect:()=>ht,repeatForever:()=>mt,repeatOrElse_Effect:()=>un,repeat_Effect:()=>cn,repeat_combined:()=>ln,repetitions:()=>gt,resetAfter:()=>yt,resetWhen:()=>bt,retryOrElse_Effect:()=>hn,retry_Effect:()=>dn,retry_combined:()=>pn,run:()=>St,scheduleFrom_Effect:()=>yn,schedule_Effect:()=>gn,secondOfMinute:()=>wt,spaced:()=>Et,stop:()=>_n,succeed:()=>_t,sync:()=>kt,tapInput:()=>xt,tapOutput:()=>It,unfold:()=>Tt,union:()=>Ot,unionWith:()=>At,untilInput:()=>Nt,untilInputEffect:()=>Mt,untilOutput:()=>Ct,untilOutputEffect:()=>Rt,upTo:()=>Ft,whileInput:()=>Lt,whileInputEffect:()=>Pt,whileOutput:()=>Dt,whileOutputEffect:()=>Ut,windowed:()=>jt,zipLeft:()=>qt,zipRight:()=>Wt,zipWith:()=>Bt});var r=n(889133),i=n(823478),a=n(499779),s=n(342072),o=n(411123),c=n(382300),l=n(84108),u=n(154258),f=n(353370),d=n(58536),p=n(962047),h=n(709322),m=n(125105),g=n(263247);const y=Symbol.for("effect/Cron"),b={[y]:y,[c.symbol](e){return S(e)&&O(this,e)},[f.symbol](){return(0,u.pipe)(f.array(s.fromIterable(this.minutes)),f.combine(f.array(s.fromIterable(this.hours))),f.combine(f.array(s.fromIterable(this.days))),f.combine(f.array(s.fromIterable(this.months))),f.combine(f.array(s.fromIterable(this.weekdays))),f.cached(this))},toString(){return(0,d.format)(this.toJSON())},toJSON(){return{_id:"Cron",minutes:s.fromIterable(this.minutes),hours:s.fromIterable(this.hours),days:s.fromIterable(this.days),months:s.fromIterable(this.months),weekdays:s.fromIterable(this.weekdays)}},[d.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,h.pipeArguments)(this,arguments)}},S=e=>(0,m.hasProperty)(e,y),v=Symbol.for("effect/Cron/errors/ParseError"),w={_tag:"ParseError",[v]:v},E=(e,t)=>{const n=Object.create(w);return n.message=e,void 0!==t&&(n.input=t),n},_=e=>{const t=e.split(" ").filter(g.isNonEmpty);if(5!==t.length)return o.left(E("Invalid number of segments in cron expression",e));const[n,r,i,a,c]=t;return o.all({minutes:F(n,A),hours:F(r,N),days:F(i,M),months:F(a,C),weekdays:F(c,R)}).pipe(o.map((e=>(({days:e,hours:t,minutes:n,months:r,weekdays:i})=>{const a=Object.create(b);return a.minutes=new Set(s.sort(n,p.Order)),a.hours=new Set(s.sort(t,p.Order)),a.days=new Set(s.sort(e,p.Order)),a.months=new Set(s.sort(r,p.Order)),a.weekdays=new Set(s.sort(i,p.Order)),a})(e))))},k=(e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=0!==i.size,c=0!==r.size,l=0!==n.size,u=0!==a.size,f=0!==s.size,d=t?new Date(t.getTime()):new Date;d.setMinutes(d.getMinutes()+1),d.setSeconds(0),d.setMilliseconds(0);const p=new Date(d).setFullYear(d.getFullYear()+8);for(;d.getTime()<=p;)if(!u||a.has(d.getMonth()+1)){if(l&&f){if(!n.has(d.getDate())&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(l){if(!n.has(d.getDate())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(f&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}if(!c||r.has(d.getHours())){if(!o||i.has(d.getMinutes()))return d;d.setMinutes(d.getMinutes()+1)}else d.setHours(d.getHours()+1),d.setMinutes(0)}else d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0),d.setMinutes(0);throw new Error("Unable to find next cron date")},x=l.make(((e,t)=>T(e.minutes,t.minutes)&&T(e.hours,t.hours)&&T(e.days,t.days)&&T(e.months,t.months)&&T(e.weekdays,t.weekdays))),I=l.array(l.number),T=(e,t)=>I(s.fromIterable(e),s.fromIterable(t)),O=(0,u.dual)(2,((e,t)=>x(e,t))),A={segment:"minute",min:0,max:59},N={segment:"hour",min:0,max:23},M={segment:"day",min:1,max:31},C={segment:"month",min:1,max:12,aliases:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}},R={segment:"weekday",min:0,max:6,aliases:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},F=(e,t)=>{const n=t.max-t.min+1,r=new Set,i=e.split(",");for(const a of i){const[i,s]=L(a);if("*"===i&&void 0===s)return o.right(new Set);if(void 0!==s){if(!Number.isInteger(s))return o.left(E("Expected step value to be a positive integer",e));if(s<1)return o.left(E("Expected step value to be greater than 0",e));if(s>t.max)return o.left(E(`Expected step value to be less than ${t.max}`,e))}if("*"===i)for(let e=t.min;e<=t.max;e+=s??1)r.add(e);else{const[n,a]=P(i,t.aliases);if(!Number.isInteger(n))return o.left(E("Expected a positive integer",e));if(n<t.min||n>t.max)return o.left(E(`Expected a value between ${t.min} and ${t.max}`,e));if(void 0===a)r.add(n);else{if(!Number.isInteger(a))return o.left(E("Expected a positive integer",e));if(a<t.min||a>t.max)return o.left(E(`Expected a value between ${t.min} and ${t.max}`,e));if(n>a)return o.left(E("Invalid value range",e));for(let e=n;e<=a;e+=s??1)r.add(e)}}if(r.size>=n)return o.right(new Set)}return o.right(r)},L=e=>{const t=e.indexOf("/");return-1!==t?[e.slice(0,t),Number(e.slice(t+1))]:[e,void 0]},P=(e,t)=>{const n=e.indexOf("-");return-1!==n?[D(e.slice(0,n),t),D(e.slice(n+1),t)]:[D(e,t),void 0]};function D(e,t){return t?.[e.toLocaleLowerCase()]??Number(e)}var U=n(860118),j=n(504491),q=n(130949),W=n(934981);W.RandomTypeId;const B=q.next;q.nextInt,q.nextBoolean,q.nextRange,q.nextIntBetween,q.shuffle,q.randomWith,W.randomTag,W.make;var z=n(131173),$=n(295818),V=n(358659),G=n(240834),J=n(694375),H=n(597081),K=n(858061);const Y=Symbol.for("effect/Schedule"),Z=e=>(0,m.hasProperty)(e,Y),Q=Symbol.for("effect/ScheduleDriver"),X={_Out:e=>e,_In:e=>e,_R:e=>e},ee={_Out:e=>e,_In:e=>e,_R:e=>e};class te{initial;step;[Y]=X;constructor(e,t){this.initial=e,this.step=t}pipe(){return(0,h.pipeArguments)(this,arguments)}}class ne{schedule;ref;[Q]=ee;constructor(e,t){this.schedule=e,this.ref=t}get state(){return H.map(K.get(this.ref),(e=>e[1]))}get last(){return H.flatMap(K.get(this.ref),(([e,t])=>{switch(e._tag){case"None":return H.failSync((()=>new H.NoSuchElementException));case"Some":return H.succeed(e.value)}}))}get reset(){return K.set(this.ref,[j.none(),this.schedule.initial])}next(e){return(0,u.pipe)(H.map(K.get(this.ref),(e=>e[1])),H.flatMap((t=>(0,u.pipe)(i.currentTimeMillis,H.flatMap((n=>(0,u.pipe)(H.suspend((()=>this.schedule.step(n,e,t))),H.flatMap((([e,t,r])=>{const i=K.set(this.ref,[j.some(t),e]);if(z.isDone(r))return H.zipRight(i,H.fail(j.none()));const a=V.start(r.intervals)-n;return a<=0?H.as(i,t):(0,u.pipe)(i,H.zipRight(J.sleep(U.millis(a))),H.as(t))})))))))))}}const re=(e,t)=>new te(e,t),ie=(0,u.dual)(2,((e,t)=>ae(e,(e=>H.sync((()=>t(e))))))),ae=(0,u.dual)(2,((e,t)=>tt(e,((e,n)=>H.map(t(e),(e=>U.sum(n,U.decode(e)))))))),se=(0,u.dual)(2,((e,t)=>Ze(oe(e,t),o.merge))),oe=(0,u.dual)(2,((e,t)=>re([e.initial,t.initial,!0],((n,r,i)=>i[2]?H.flatMap(e.step(n,r,i[0]),(([e,a,s])=>z.isDone(s)?H.map(t.step(n,r,i[1]),(([t,n,r])=>[[e,t,!1],o.right(n),r])):H.succeed([[e,i[1],!0],o.left(a),s]))):H.map(t.step(n,r,i[1]),(([e,t,n])=>[[i[0],e,!1],o.right(t),n])))))),ce=(0,u.dual)(2,((e,t)=>Ze(e,(()=>t)))),le=e=>Ze(e,u.constVoid),ue=(0,u.dual)(2,((e,t)=>re([e.initial,t.initial],((n,[r,i],a)=>H.zipWith(e.step(n,r,a[0]),t.step(n,i,a[1]),(([e,t,n],[r,i,a])=>{if(z.isContinue(n)&&z.isContinue(a)){const s=(0,u.pipe)(n.intervals,V.union(a.intervals));return[[e,r],[t,i],z.continue(s)]}return[[e,r],[t,i],z.done]})))))),fe=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>H.sync((()=>t(e,n))))))),de=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([e,n,i])=>z.isDone(i)?H.succeed([e,n,z.done]):H.map(t(r,n),(t=>t?[e,n,i]:[e,n,z.done])))))))),pe=()=>he($e()),he=e=>pt(e,r.empty(),((e,t)=>(0,u.pipe)(e,r.append(t)))),me=e=>he(st(e)),ge=e=>he(ot(e)),ye=e=>he(ut(e)),be=e=>he(ft(e)),Se=(0,u.dual)(2,((e,t)=>re([e.initial,t.initial],((n,r,i)=>H.flatMap(e.step(n,r,i[0]),(([e,r,a])=>H.map(t.step(n,r,i[1]),(([t,n,r])=>z.isDone(a)||z.isDone(r)?[[e,t],n,z.done]:[[e,t],n,z.continue((0,u.pipe)(a.intervals,V.max(r.intervals)))])))))))),ve=(0,u.dual)(2,((e,t)=>Ee(e,(e=>H.sync((()=>t(e))))))),we=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.mapInputContext(e.step(n,r,i),t))))),Ee=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(t(r),(t=>e.step(n,t,i))))))),_e=e=>{const t=S(e)?o.right(e):_(e);return re([!0,[Number.MIN_SAFE_INTEGER,0,0]],((e,n,[r,i])=>{if(e<i[0])return H.succeed([[!1,i],[i[1],i[2]],z.continueWith($.make(i[1],i[2]))]);if(o.isLeft(t))return H.die(t.left);const a=t.right,s=new Date(e);let c;if(r&&((e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=t.getMinutes();if(0!==i.size&&!i.has(o))return!1;const c=t.getHours();if(0!==r.size&&!r.has(c))return!1;const l=t.getMonth()+1;if(0!==a.size&&!a.has(l))return!1;if(0===n.size&&0===s.size)return!0;const u=t.getDate();if(0===s.size)return n.has(u);const f=t.getDay();return 0===n.size?s.has(f):n.has(u)||s.has(f)})(a,s))c=e;else{c=k(a,s).getTime()}const l=Gt(c),u=Jt(c),f=$.make(l,u);return H.succeed([[!1,[c,l,u]],[l,u],z.continueWith(f)])}))},ke=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||31<e)return H.dieSync((()=>new H.IllegalArgumentException(`Invalid argument in: dayOfMonth(${e}). Must be in range 1...31`)));const i=r[1],a=tn(t,e,0===i),s=Qt(a),o=Xt(a),c=$.make(s,o);return H.succeed([[o,i+1],i,z.continueWith(c)])})),xe=e=>re([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||7<e)return H.dieSync((()=>new H.IllegalArgumentException(`Invalid argument in: dayOfWeek(${e}). Must be in range 1 (Monday)...7 (Sunday)`)));const i=r[1],a=en(t,e,0===i),s=Qt(a),o=Xt(a),c=$.make(s,o);return H.succeed([[o,i+1],i,z.continueWith(c)])})),Ie=(0,u.dual)(2,((e,t)=>Te(e,(e=>H.sync((()=>t(e))))))),Te=(0,u.dual)(2,((e,t)=>tt(e,((e,n)=>t(n))))),Oe=e=>ie(e,(e=>e)),Ae=e=>re(e.initial,((t,n,r)=>(0,u.pipe)(e.step(t,n,r),H.flatMap((([e,n,r])=>z.isDone(r)?H.succeed([e,U.zero,r]):H.succeed([e,U.millis(V.start(r.intervals)-t),r])))))),Ne=(0,u.dual)(2,((e,{onInput:t,onOutput:n})=>Ze(ve(e,t),n))),Me=(0,u.dual)(2,((e,{onInput:t,onOutput:n})=>Qe(Ee(e,t),n))),Ce=e=>(0,u.pipe)(K.make([j.none(),e.initial]),H.map((t=>new ne(e,t)))),Re=e=>{const t=U.decode(e),n=U.toMillis(t);return re(!0,((e,r,i)=>H.succeed(i?[!1,t,z.continueWith($.after(e+n))]:[!1,U.zero,z.done])))},Fe=(0,u.dual)(2,((e,t)=>Ot(e,t))),Le=(0,u.dual)(3,((e,t,n)=>At(e,t,n))),Pe=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([e,n,r])=>z.isDone(r)?H.as(t,[e,n,r]):H.succeed([e,n,r]))))))),De=(e,t=2)=>{const n=U.decode(e);return Oe(Ze(wn,(e=>U.times(n,Math.pow(t,e)))))},Ue=e=>{const t=U.decode(e);return Oe((0,u.pipe)(Tt([t,t],(([e,t])=>[t,U.sum(e,t)])),Ze((e=>e[0]))))},je=e=>{const t=U.decode(e),n=U.toMillis(t);return re([j.none(),0],((e,r,[i,a])=>H.sync((()=>{switch(i._tag){case"None":return[[j.some([e,e+n]),a+1],a,z.continueWith($.after(e+n))];case"Some":{const[r,s]=i.value,o=e>s+n,l=c.equals(t,U.zero)?t:U.millis(n-(e-r)%n),u=c.equals(l,U.zero)?t:l,f=o?e:e+U.toMillis(u);return[[j.some([r,f]),a+1],a,z.continueWith($.after(f))]}}}))))},qe=e=>Re(e),We=(e,...t)=>re([[e,...t].map((e=>U.decode(e))),!0],((e,t,[n,r])=>H.sync((()=>{if(r){const t=n[0],r=$.after(e+U.toMillis(t));if(n.length>=2)return[[n.slice(1),!0],t,z.continueWith(r)];return[[[t,...n.slice(1)],!1],t,z.continueWith(r)]}return[[n,!1],U.zero,z.done]})))),Be=e=>Ze($e(),e),ze=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||23<e)return H.dieSync((()=>new H.IllegalArgumentException(`Invalid argument in: hourOfDay(${e}). Must be in range 0...23`)));const i=r[1],a=Zt(t,e,0===i),s=Kt(a),o=Yt(a),c=$.make(s,o);return H.succeed([[o,i+1],i,z.continueWith(c)])})),$e=()=>re(void 0,((e,t,n)=>H.succeed([n,t,z.continueWith($.after(e))]))),Ve=(0,u.dual)(2,((e,t)=>Ge(e,t,V.intersect))),Ge=(0,u.dual)(3,((e,t,n)=>re([e.initial,t.initial],((r,i,a)=>(0,u.pipe)(H.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),((e,t)=>[e,t])),H.flatMap((([[r,a,s],[o,c,l]])=>z.isContinue(s)&&z.isContinue(l)?Je(e,t,i,r,a,s.intervals,o,c,l.intervals,n):H.succeed([[r,o],[a,c],z.done])))))))),Je=(e,t,n,r,i,a,s,o,c,l)=>{const f=l(a,c);return V.isNonEmpty(f)?H.succeed([[r,s],[i,o],z.continue(f)]):(0,u.pipe)(a,V.lessThan(c))?H.flatMap(e.step(V.end(a),n,r),(([r,i,a])=>z.isDone(a)?H.succeed([[r,s],[i,o],z.done]):Je(e,t,n,r,i,a.intervals,s,o,c,l))):H.flatMap(t.step(V.end(c),n,s),(([s,o,c])=>z.isDone(c)?H.succeed([[r,s],[i,o],z.done]):Je(e,t,n,r,i,a,s,o,c.intervals,l)))},He=e=>Ke(e,{min:.8,max:1.2}),Ke=(0,u.dual)(2,((e,t)=>{const{max:n,min:r}=Object.assign({min:.8,max:1.2},t);return Te(e,(e=>H.map(B,(t=>{const i=U.toMillis(e),a=i*r*(1-t)+i*n*t;return U.millis(a)}))))})),Ye=e=>{const t=U.decode(e);return Oe(Ze(wn,(e=>U.times(t,e+1))))},Ze=(0,u.dual)(2,((e,t)=>Qe(e,(e=>H.sync((()=>t(e))))))),Qe=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([e,n,r])=>H.map(t(n),(t=>[e,t,r])))))))),Xe=e=>re([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return H.dieSync((()=>new H.IllegalArgumentException(`Invalid argument in: minuteOfHour(${e}). Must be in range 0...59`)));const i=r[1],a=Ht(t,e,0===i),s=Gt(a),o=Jt(a),c=$.make(s,o);return H.succeed([[o,i+1],i,z.continueWith(c)])})),et=(0,u.dual)(2,((e,t)=>tt(e,((e,n)=>H.sync((()=>t(e,n))))))),tt=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([e,r,i])=>{if(z.isDone(i))return H.succeed([e,r,i]);const a=i.intervals,s=$.size($.make(n,V.start(a)));return H.map(t(r,s),(t=>{const i=U.decode(t),s=V.start(a),o=n+U.toMillis(i),c=o-s,l=Math.max(0,V.end(a)+c),u=$.make(o,l);return[e,r,z.continueWith(u)]}))})))))),nt=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([e,n,r])=>H.as(t(n,r),[e,n,r]))))))),rt=e=>re(e.initial,((t,n,r)=>(0,u.pipe)(e.step(t,n,r),H.map((([e,t,r])=>[e,n,r]))))),it=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.provideContext(e.step(n,r,i),t))))),at=(0,u.dual)(3,((e,t,n)=>re(e.initial,((r,i,s)=>H.contextWithEffect((o=>H.provideContext(e.step(r,i,s),a.add(o,t,n)))))))),st=e=>Nt($e(),e),ot=e=>Mt($e(),e),ct=e=>Ct(Ze($e(),e),j.isSome),lt=e=>{const t=U.decode(e);return Dt(vn,(e=>U.lessThan(e,t)))},ut=e=>Lt($e(),e),ft=e=>Pt($e(),e),dt=e=>Dt(wn,(t=>t<e)),pt=(0,u.dual)(3,((e,t,n)=>ht(e,t,((e,t)=>H.sync((()=>n(e,t))))))),ht=(0,u.dual)(3,((e,t,n)=>re([e.initial,t],((t,r,[i,a])=>H.flatMap(e.step(t,r,i),(([e,t,r])=>z.isDone(r)?H.succeed([[e,a],a,r]):H.map(n(a,t),(t=>[[e,t],a,r])))))))),mt=e=>re(e.initial,((t,n,r)=>{const i=(t,n,r)=>H.flatMap(e.step(t,n,r),(([r,a,s])=>z.isDone(s)?i(t,n,e.initial):H.succeed([r,a,s])));return i(t,n,r)})),gt=e=>pt(e,0,((e,t)=>e+1)),yt=(0,u.dual)(2,((e,t)=>{const n=U.decode(t);return(0,u.pipe)(e,Ve(vn),bt((([,e])=>U.greaterThanOrEqualTo(e,n))),Ze((e=>e[0])))})),bt=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.flatMap(e.step(n,r,i),(([i,a,s])=>t(a)?e.step(n,r,e.initial):H.succeed([i,a,s]))))))),St=(0,u.dual)(3,((e,t,n)=>(0,u.pipe)(vt(e,t,r.fromIterable(n),e.initial,r.empty()),H.map((e=>r.reverse(e)))))),vt=(e,t,n,i,a)=>{if(!r.isNonEmpty(n))return H.succeed(a);const s=r.headNonEmpty(n),o=r.tailNonEmpty(n);return H.flatMap(e.step(t,s,i),(([t,n,i])=>z.isDone(i)?H.sync((()=>(0,u.pipe)(a,r.prepend(n)))):vt(e,V.start(i.intervals),o,t,r.prepend(a,n))))},wt=e=>re([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return H.dieSync((()=>new H.IllegalArgumentException(`Invalid argument in: secondOfMinute(${e}). Must be in range 0...59`)));const i=r[1],a=Vt(t,e,0===i),s=zt(a),o=$t(a),c=$.make(s,o);return H.succeed([[o,i+1],i,z.continueWith(c)])})),Et=e=>ie(wn,(()=>e)),_t=e=>Ze(wn,(()=>e)),kt=e=>Ze(wn,e),xt=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.zipRight(t(r),e.step(n,r,i)))))),It=(0,u.dual)(2,((e,t)=>re(e.initial,((n,r,i)=>H.tap(e.step(n,r,i),(([,e])=>t(e))))))),Tt=(e,t)=>re(e,((e,n,r)=>H.sync((()=>[t(r),r,z.continueWith($.after(e))])))),Ot=(0,u.dual)(2,((e,t)=>At(e,t,V.union))),At=(0,u.dual)(3,((e,t,n)=>re([e.initial,t.initial],((r,i,a)=>H.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),(([e,t,r],[i,a,s])=>{if(z.isDone(r)&&z.isDone(s))return[[e,i],[t,a],z.done];if(z.isDone(r)&&z.isContinue(s))return[[e,i],[t,a],z.continue(s.intervals)];if(z.isContinue(r)&&z.isDone(s))return[[e,i],[t,a],z.continue(r.intervals)];if(z.isContinue(r)&&z.isContinue(s)){const o=n(r.intervals,s.intervals);return[[e,i],[t,a],z.continue(o)]}throw new Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),Nt=(0,u.dual)(2,((e,t)=>fe(e,((e,n)=>!t(e))))),Mt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>J.negate(t(e)))))),Ct=(0,u.dual)(2,((e,t)=>fe(e,((e,n)=>!t(n))))),Rt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>J.negate(t(n)))))),Ft=(0,u.dual)(2,((e,t)=>qt(e,lt(t)))),Lt=(0,u.dual)(2,((e,t)=>fe(e,((e,n)=>t(e))))),Pt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>t(e))))),Dt=(0,u.dual)(2,((e,t)=>fe(e,((e,n)=>t(n))))),Ut=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>t(n))))),jt=e=>{const t=U.decode(e),n=U.toMillis(t);return re([j.none(),0],((e,t,[r,i])=>{switch(r._tag){case"None":return H.succeed([[j.some(e),i+1],i,z.continueWith($.after(e+n))]);case"Some":return H.succeed([[j.some(r.value),i+1],i,z.continueWith($.after(e+(n-(e-r.value)%n)))])}}))},qt=(0,u.dual)(2,((e,t)=>Ze(Ve(e,t),(e=>e[0])))),Wt=(0,u.dual)(2,((e,t)=>Ze(Ve(e,t),(e=>e[1])))),Bt=(0,u.dual)(3,((e,t,n)=>Ze(Ve(e,t),(([e,t])=>n(e,t))))),zt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0).getTime()},$t=e=>{const t=new Date(zt(e));return t.setSeconds(t.getSeconds()+1)},Vt=(e,t,n)=>{const r=new Date(e);if(r.getSeconds()===t&&n)return e;if(r.getSeconds()<t)return r.setSeconds(t);const i=new Date(r.setSeconds(t));return i.setTime(i.getTime()+6e4)},Gt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0).getTime()},Jt=e=>{const t=new Date(Gt(e));return t.setMinutes(t.getMinutes()+1)},Ht=(e,t,n)=>{const r=new Date(e);if(r.getMinutes()===t&&n)return e;if(r.getMinutes()<t)return r.setMinutes(t);const i=new Date(r.setMinutes(t));return i.setTime(i.getTime()+36e5)},Kt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime()},Yt=e=>{const t=new Date(Kt(e));return t.setHours(t.getHours()+1)},Zt=(e,t,n)=>{const r=new Date(e);if(r.getHours()===t&&n)return e;if(r.getHours()<t)return r.setHours(t);const i=new Date(r.setHours(t));return i.setTime(i.getTime()+864e5)},Qt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime()},Xt=e=>{const t=new Date(Qt(e));return t.setDate(t.getDate()+1)},en=(e,t,n)=>{const r=new Date(e);if(r.getDay()===t&&n)return e;const i=(7+t-r.getDay())%7;return r.setDate(r.getDate()+(0===i?7:i))},tn=(e,t,n)=>{const r=new Date(e);return r.getDate()===t&&n?e:r.getDate()<t?r.setDate(t):nn(e,t,1)},nn=(e,t,n)=>{const r=new Date(e),i=new Date(r.setDate(t));if(new Date(i.setMonth(i.getMonth()+n)).getDate()===t){const r=new Date(e),i=new Date(r.setDate(t));return i.setMonth(i.getMonth()+n)}return nn(e,t,n+1)},rn=Symbol.for("effect/Schedule/ScheduleDefect");class an{error;[rn];constructor(e){this.error=e,this[rn]=rn}}const sn=e=>H.catchAll(e,(e=>H.die(new an(e)))),on=e=>H.catchAllCause(e,(e=>j.match(G.find(e,(e=>{return G.isDieType(e)&&(t=e.defect,(0,m.hasProperty)(t,rn))?j.some(e.defect):j.none();var t})),{onNone:()=>H.failCause(e),onSome:e=>H.fail(e.error)}))),cn=(0,u.dual)(2,((e,t)=>un(e,t,((e,t)=>H.fail(e))))),ln=(0,u.dual)(2,((e,t)=>{if(Z(t))return cn(e,t);const n=t.schedule??rt(wn),r=t.while?Pt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?H.succeed(n):sn(n)})):n,i=t.until?Mt(r,(e=>{const n=t.until(e);return"boolean"===typeof n?H.succeed(n):sn(n)})):r,a=t.times?Ve(i,dt(t.times)):i;return on(cn(e,a))})),un=(0,u.dual)(3,((e,t,n)=>H.flatMap(Ce(t),(t=>H.matchEffect(e,{onFailure:e=>n(e,j.none()),onSuccess:r=>fn(e,t,n,r)}))))),fn=(e,t,n,r)=>H.matchEffect(t.next(r),{onFailure:()=>H.orDie(t.last),onSuccess:r=>H.matchEffect(e,{onFailure:e=>n(e,j.some(r)),onSuccess:r=>fn(e,t,n,r)})}),dn=(0,u.dual)(2,((e,t)=>hn(e,t,((e,t)=>H.fail(e))))),pn=(0,u.dual)(2,((e,t)=>{if(Z(t))return dn(e,t);const n=t.schedule??wn,r=t.while?Pt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?H.succeed(n):sn(n)})):n,i=t.until?Mt(r,(e=>{const n=t.until(e);return"boolean"===typeof n?H.succeed(n):sn(n)})):r,a=t.times?Ve(i,dt(t.times)):i;return on(dn(e,a))})),hn=(0,u.dual)(3,((e,t,n)=>H.flatMap(Ce(t),(t=>mn(e,t,n))))),mn=(e,t,n)=>H.catchAll(e,(r=>H.matchEffect(t.next(r),{onFailure:()=>(0,u.pipe)(t.last,H.orDie,H.flatMap((e=>n(r,e)))),onSuccess:()=>mn(e,t,n)}))),gn=(0,u.dual)(2,((e,t)=>yn(e,void 0,t))),yn=(0,u.dual)(3,((e,t,n)=>H.flatMap(Ce(n),(n=>bn(e,t,n))))),bn=(e,t,n)=>H.matchEffect(n.next(t),{onFailure:()=>H.orDie(n.last),onSuccess:()=>H.flatMap(e,(t=>bn(e,t,n)))}),Sn=Tt(0,(e=>e+1)),vn=re(j.none(),((e,t,n)=>{switch(n._tag){case"None":return H.succeed([j.some(e),U.zero,z.continueWith($.after(e))]);case"Some":return H.succeed([j.some(n.value),U.millis(e-n.value),z.continueWith($.after(e))])}})),wn=Tt(0,(e=>e+1)),En=le(dt(1)),_n=le(dt(0))},735458:(e,t,n)=>{n.r(t),n.d(t,{SingleShotGen:()=>r});class r{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new r(this.self)}}},614028:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r});const r=(e,t)=>({value:e,previous:t})},125572:(e,t,n)=>{n.r(t),n.d(t,{Const:()=>m,ProxySupervisor:()=>f,SupervisorTypeId:()=>l,Track:()=>h,Zip:()=>d,fibersIn:()=>w,fromEffect:()=>S,isZip:()=>p,none:()=>v,supervisorVariance:()=>u,track:()=>b,unsafeTrack:()=>y});var r=n(154258),i=n(744628),a=n(847857),s=n(125105),o=n(769512),c=n(597081);const l=Symbol.for("effect/Supervisor"),u={_T:e=>e};class f{underlying;value0;[l]=u;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,n,r){this.underlying.onStart(e,t,n,r)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}}class d{left;right;_tag="Zip";[l]=u;constructor(e,t){this.left=e,this.right=t}get value(){return c.zip(this.left.value,this.right.value)}onStart(e,t,n,r){this.left.onStart(e,t,n,r),this.right.onStart(e,t,n,r)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}}const p=e=>(0,s.hasProperty)(e,l)&&(0,s.isTagged)(e,"Zip");class h{[l]=u;fibers=new Set;get value(){return c.sync((()=>Array.from(this.fibers)))}onStart(e,t,n,r){this.fibers.add(r)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}class m{effect;[l]=u;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,n,r){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}class g{ref;[l]=u;constructor(e){this.ref=e}get value(){return c.sync((()=>a.get(this.ref)))}onStart(e,t,n,i){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),o.add(i))))}onEnd(e,t){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),o.remove(t))))}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f(this,(0,r.pipe)(this.value,c.map(e)))}zip(e){return new d(this,e)}onRun(e,t){return e()}}const y=()=>new h,b=c.sync(y),S=e=>new m(e),v=(0,i.globalValue)("effect/Supervisor/none",(()=>S(c.void))),w=e=>c.sync((()=>new g(e)))},660571:(e,t,n)=>{n.r(t),n.d(t,{getAndUpdateEffect:()=>s,getAndUpdateSomeEffect:()=>o,modify:()=>c,modifyEffect:()=>l,modifySomeEffect:()=>u,updateAndGetEffect:()=>d,updateEffect:()=>f,updateSomeEffect:()=>p});var r=n(154258),i=n(504491),a=n(597081);const s=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(t=>[e,t])))))),o=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return a.succeed([e,e]);case"Some":return a.map(n.value,(t=>[e,t]))}})))),c=(0,r.dual)(2,((e,t)=>e.modify(t))),l=(0,r.dual)(2,((e,t)=>e.modifyEffect(t))),u=(0,r.dual)(3,((e,t,n)=>e.modifyEffect((e=>(0,r.pipe)(n(e),i.getOrElse((()=>a.succeed([t,e])))))))),f=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(e=>[void 0,e])))))),d=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>a.map(t(e),(e=>[e,e])))))),p=(0,r.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return a.succeed([void 0,e]);case"Some":return a.map(n.value,(e=>[void 0,e]))}}))))},460011:(e,t,n)=>{n.r(t),n.d(t,{NativeSpan:()=>l,TracerTypeId:()=>i,addSpanStackTrace:()=>d,externalSpan:()=>f,make:()=>a,nativeTracer:()=>u,spanTag:()=>o,tracerTag:()=>s});var r=n(499779);const i=Symbol.for("effect/Tracer"),a=e=>({[i]:i,...e}),s=r.GenericTag("effect/Tracer"),o=r.GenericTag("effect/ParentSpan"),c=function(){const e="abcdef0123456789";return function(t){let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(16*Math.random()));return n}}();class l{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,n,r,i,a){this.name=e,this.parent=t,this.context=n,this.links=r,this.startTime=i,this.kind=a,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:c(32),this.spanId=c(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,n){this.events.push([e,t,n??{}])}}const u=a({span:(e,t,n,r,i,a)=>new l(e,t,n,r,i,a),context:e=>e()}),f=e=>({_tag:"ExternalSpan",spanId:e.spanId,traceId:e.traceId,sampled:e.sampled??!0,context:e.context??r.empty()}),d=e=>{if(!1===e?.captureStackTrace)return e;if(void 0!==e?.captureStackTrace&&"boolean"!==typeof e.captureStackTrace)return e;const t=Error.stackTraceLimit;Error.stackTraceLimit=3;const n=new Error;Error.stackTraceLimit=t;let r=!1;return{...e,captureStackTrace:()=>{if(!1!==r)return r;if(void 0!==n.stack){const e=n.stack.split("\n");if(void 0!==e[3])return r=e[3].trim(),r}}}}},635420:(e,t,n)=>{n.r(t),n.d(t,{getCurrentVersion:()=>i,setCurrentVersion:()=>a});let r="3.5.3";const i=()=>r,a=e=>{r=e}},562635:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>jt,allocate:()=>w,append:()=>F,appendAll:()=>L,bind:()=>qt,bindTo:()=>Wt,cartesian:()=>Ut,cartesianWith:()=>Dt,chop:()=>Ue,chunksOf:()=>$e,contains:()=>De,containsWith:()=>Le,copy:()=>ze,dedupe:()=>Ct,dedupeAdjacent:()=>Ft,dedupeAdjacentWith:()=>Rt,dedupeWith:()=>Mt,difference:()=>Xe,differenceWith:()=>Qe,drop:()=>le,dropRight:()=>ue,dropWhile:()=>fe,empty:()=>et,ensure:()=>I,every:()=>Et,extend:()=>kt,filter:()=>ft,filterMap:()=>at,filterMapWhile:()=>st,findFirst:()=>he,findFirstIndex:()=>de,findLast:()=>me,findLastIndex:()=>pe,flatMap:()=>rt,flatMapNullable:()=>vt,flatten:()=>it,forEach:()=>Nt,fromIterable:()=>x,fromNullable:()=>bt,fromOption:()=>O,fromRecord:()=>T,get:()=>G,getEquivalence:()=>At,getLefts:()=>lt,getOrder:()=>Ot,getRights:()=>ut,getSomes:()=>ct,group:()=>Ge,groupBy:()=>Je,groupWith:()=>Ve,head:()=>Y,headNonEmpty:()=>Z,init:()=>ne,initNonEmpty:()=>re,insertAt:()=>ge,intersection:()=>Ze,intersectionWith:()=>Ye,intersperse:()=>Ae,isArray:()=>U,isEmptyArray:()=>j,isEmptyReadonlyArray:()=>q,isNonEmptyArray:()=>W,isNonEmptyReadonlyArray:()=>B,join:()=>Lt,last:()=>Q,lastNonEmpty:()=>X,length:()=>z,let:()=>Bt,liftEither:()=>wt,liftNullable:()=>St,liftOption:()=>yt,liftPredicate:()=>gt,make:()=>v,makeBy:()=>E,map:()=>nt,mapAccum:()=>Pt,match:()=>A,matchLeft:()=>N,matchRight:()=>M,max:()=>It,min:()=>xt,modify:()=>Se,modifyNonEmptyHead:()=>Ne,modifyNonEmptyLast:()=>Ce,modifyOption:()=>ve,of:()=>tt,partition:()=>dt,partitionMap:()=>ot,prepend:()=>C,prependAll:()=>R,range:()=>_,reduce:()=>ht,reduceRight:()=>mt,remove:()=>we,replace:()=>ye,replaceOption:()=>be,replicate:()=>k,reverse:()=>Ee,rotate:()=>Fe,scan:()=>P,scanRight:()=>D,separate:()=>pt,setNonEmptyHead:()=>Me,setNonEmptyLast:()=>Re,some:()=>_t,sort:()=>_e,sortBy:()=>xe,sortWith:()=>ke,span:()=>ce,split:()=>We,splitAt:()=>je,splitNonEmptyAt:()=>qe,splitWhere:()=>Be,tail:()=>ee,tailNonEmpty:()=>te,take:()=>ie,takeRight:()=>ae,takeWhile:()=>se,unappend:()=>K,unfold:()=>Tt,union:()=>Ke,unionWith:()=>He,unprepend:()=>H,unsafeGet:()=>J,unzip:()=>Oe,zip:()=>Ie,zipWith:()=>Te});var r=n(757964),i=n(43977),a=n(235309),s=n(361369),o=n(611174),c=n(91276),l=n(977948),u=n(856572),f=n(259877);const d=(...e)=>e,p=(a.tuple,f.tuple,(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){const e=t(r,n);if((0,u.isBoolean)(e)){if(e)return l.some(r)}else if(l.isSome(e))return e;n++}return l.none()}))),h=(Symbol.iterator,{next:()=>({done:!0,value:void 0})}),m=(0,s.dual)(2,((e,t)=>({[Symbol.iterator](){const n=e[Symbol.iterator]();let r=0;return{next(){let e=n.next();for(;!e.done;){const i=t(e.value,r++);if(l.isSome(i))return{done:!1,value:i.value};e=n.next()}return{done:!0,value:void 0}}}}}))),g=(s.identity,Object.fromEntries,(0,s.dual)(2,((e,t)=>{const n=[];for(const r of S(e))n.push(t(r,e[r]));return n}))),y=g(((e,t)=>[e,t])),b=(0,s.dual)(2,((e,t)=>{const n={};for(const r of S(e)){const i=t(e[r],r);l.isSome(i)&&(n[r]=i.value)}return n})),S=(s.identity,s.identity,e=>Object.keys(e)),v=(...e)=>e,w=e=>new Array(e),E=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let i=0;i<n;i++)r[i]=t(i);return r},_=(e,t)=>e<=t?E(t-e+1,(t=>e+t)):[e],k=(0,s.dual)(2,((e,t)=>E(t,(()=>e)))),x=e=>Array.isArray(e)?e:Array.from(e),I=e=>Array.isArray(e)?e:[e],T=y,O=l.toArray,A=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>B(e)?n(e):t())),N=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>B(e)?n(Z(e),te(e)):t())),M=(0,s.dual)(2,((e,{onEmpty:t,onNonEmpty:n})=>B(e)?n(re(e),X(e)):t())),C=(0,s.dual)(2,((e,t)=>[t,...e])),R=(0,s.dual)(2,((e,t)=>x(t).concat(x(e)))),F=(0,s.dual)(2,((e,t)=>[...e,t])),L=(0,s.dual)(2,((e,t)=>x(e).concat(x(t)))),P=(0,s.dual)(3,((e,t,n)=>{const r=[t];let i=0;for(const a of e)r[i+1]=n(r[i],a),i++;return r})),D=(0,s.dual)(3,((e,t,n)=>{const r=x(e),i=new Array(r.length+1);i[r.length]=t;for(let a=r.length-1;a>=0;a--)i[a]=n(i[a+1],r[a]);return i})),U=Array.isArray,j=e=>0===e.length,q=j,W=o.isNonEmptyArray,B=o.isNonEmptyArray,z=e=>e.length,$=(e,t)=>e<0||e>=t.length,V=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),G=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);return $(n,e)?l.none():l.some(e[n])})),J=(0,s.dual)(2,((e,t)=>{const n=Math.floor(t);if($(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]})),H=e=>[Z(e),te(e)],K=e=>[re(e),X(e)],Y=G(0),Z=J(0),Q=e=>B(e)?l.some(X(e)):l.none(),X=e=>e[e.length-1],ee=e=>{const t=x(e);return B(t)?l.some(te(t)):l.none()},te=e=>e.slice(1),ne=e=>{const t=x(e);return B(t)?l.some(re(t)):l.none()},re=e=>e.slice(0,-1),ie=(0,s.dual)(2,((e,t)=>{const n=x(e);return n.slice(0,V(t,n))})),ae=(0,s.dual)(2,((e,t)=>{const n=x(e),r=V(t,n);return 0===r?[]:n.slice(-r)})),se=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){if(!t(i,n))break;r.push(i),n++}return r})),oe=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},ce=(0,s.dual)(2,((e,t)=>je(e,oe(e,t)))),le=(0,s.dual)(2,((e,t)=>{const n=x(e);return n.slice(V(t,n),n.length)})),ue=(0,s.dual)(2,((e,t)=>{const n=x(e);return n.slice(0,n.length-V(t,n))})),fe=(0,s.dual)(2,((e,t)=>x(e).slice(oe(e,t)))),de=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of e){if(t(r,n))return l.some(n);n++}return l.none()})),pe=(0,s.dual)(2,((e,t)=>{const n=x(e);for(let r=n.length-1;r>=0;r--)if(t(n[r],r))return l.some(r);return l.none()})),he=p,me=(0,s.dual)(2,((e,t)=>{const n=x(e);for(let r=n.length-1;r>=0;r--){const e=n[r],i=t(e,r);if((0,u.isBoolean)(i)){if(i)return l.some(e)}else if(l.isSome(i))return i}return l.none()})),ge=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);return t<0||t>r.length?l.none():(r.splice(t,0,n),l.some(r))})),ye=(0,s.dual)(3,((e,t,n)=>Se(e,t,(()=>n)))),be=(0,s.dual)(3,((e,t,n)=>ve(e,t,(()=>n)))),Se=(0,s.dual)(3,((e,t,n)=>l.getOrElse(ve(e,t,n),(()=>Array.from(e))))),ve=(0,s.dual)(3,((e,t,n)=>{const r=Array.from(e);if($(t,r))return l.none();const i=n(r[t]);return r[t]=i,l.some(r)})),we=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return $(t,n)||n.splice(t,1),n})),Ee=e=>Array.from(e).reverse(),_e=(0,s.dual)(2,((e,t)=>{const n=Array.from(e);return n.sort(t),n})),ke=(0,s.dual)(3,((e,t,n)=>_e(e,f.mapInput(n,t)))),xe=(...e)=>{const t=_e(f.combineAll(e));return e=>{const n=x(e);return B(n)?t(n):[]}},Ie=(0,s.dual)(2,((e,t)=>Te(e,t,d))),Te=(0,s.dual)(3,((e,t,n)=>{const r=x(e),i=x(t);if(B(r)&&B(i)){const e=[n(Z(r),Z(i))],t=Math.min(r.length,i.length);for(let a=1;a<t;a++)e[a]=n(r[a],i[a]);return e}return[]})),Oe=e=>{const t=x(e);if(B(t)){const e=[t[0][0]],n=[t[0][1]];for(let r=1;r<t.length;r++)e[r]=t[r][0],n[r]=t[r][1];return[e,n]}return[[],[]]},Ae=(0,s.dual)(2,((e,t)=>{const n=x(e);if(B(n)){const e=[Z(n)],r=te(n);for(let n=0;n<r.length;n++)n<r.length&&e.push(t),e.push(r[n]);return e}return[]})),Ne=(0,s.dual)(2,((e,t)=>[t(Z(e)),...te(e)])),Me=(0,s.dual)(2,((e,t)=>Ne(e,(()=>t)))),Ce=(0,s.dual)(2,((e,t)=>F(re(e),t(X(e))))),Re=(0,s.dual)(2,((e,t)=>Ce(e,(()=>t)))),Fe=(0,s.dual)(2,((e,t)=>{const n=x(e);if(B(n)){const r=n.length,i=Math.round(t)%r;if($(Math.abs(i),n)||0===i)return ze(n);if(i<0){const[e,t]=qe(n,-i);return L(t,e)}return Fe(e,i-r)}return[]})),Le=e=>(0,s.dual)(2,((t,n)=>{for(const r of t)if(e(n,r))return!0;return!1})),Pe=i.equivalence(),De=Le(Pe),Ue=(0,s.dual)(2,((e,t)=>{const n=x(e);if(B(n)){const[e,r]=t(n),i=[e];let a=r;for(;o.isNonEmptyArray(a);){const[e,n]=t(a);i.push(e),a=n}return i}return[]})),je=(0,s.dual)(2,((e,t)=>{const n=Array.from(e),r=Math.floor(t);return B(n)?r>=1?qe(n,r):[[],n]:[n,[]]})),qe=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[ze(e),[]]:[C(e.slice(1,n),Z(e)),e.slice(n)]})),We=(0,s.dual)(2,((e,t)=>{const n=x(e);return $e(n,Math.ceil(n.length/Math.floor(t)))})),Be=(0,s.dual)(2,((e,t)=>ce(e,((e,n)=>!t(e,n))))),ze=e=>e.slice(),$e=(0,s.dual)(2,((e,t)=>{const n=x(e);return B(n)?Ue(n,qe(t)):[]})),Ve=(0,s.dual)(2,((e,t)=>Ue(e,(e=>{const n=Z(e),r=[n];let i=1;for(;i<e.length;i++){const a=e[i];if(!t(a,n))break;r.push(a)}return[r,e.slice(i)]})))),Ge=Ve(i.equivalence()),Je=(0,s.dual)(2,((e,t)=>{const n={};for(const r of e){const e=t(r);Object.prototype.hasOwnProperty.call(n,e)?n[e].push(r):n[e]=[r]}return n})),He=(0,s.dual)(3,((e,t,n)=>{const r=x(e),i=x(t);if(B(r)){if(B(i)){return Mt(n)(L(r,i))}return r}return i})),Ke=(0,s.dual)(2,((e,t)=>He(e,t,Pe))),Ye=e=>{const t=Le(e);return(0,s.dual)(2,((e,n)=>x(e).filter((e=>t(n,e)))))},Ze=Ye(Pe),Qe=e=>{const t=Le(e);return(0,s.dual)(2,((e,n)=>x(e).filter((e=>!t(n,e)))))},Xe=Qe(Pe),et=()=>[],tt=e=>[e],nt=(0,s.dual)(2,((e,t)=>e.map(t))),rt=(0,s.dual)(2,((e,t)=>{if(q(e))return[];const n=[];for(let r=0;r<e.length;r++){const i=t(e[r],r);for(let e=0;e<i.length;e++)n.push(i[e])}return n})),it=rt(s.identity),at=(0,s.dual)(2,((e,t)=>{const n=x(e),r=[];for(let i=0;i<n.length;i++){const e=t(n[i],i);l.isSome(e)&&r.push(e.value)}return r})),st=(0,s.dual)(2,((e,t)=>{let n=0;const r=[];for(const i of e){const e=t(i,n);if(!l.isSome(e))break;r.push(e.value),n++}return r})),ot=(0,s.dual)(2,((e,t)=>{const n=[],i=[],a=x(e);for(let s=0;s<a.length;s++){const e=t(a[s],s);r.isLeft(e)?n.push(e.left):i.push(e.right)}return[n,i]})),ct=at(s.identity),lt=e=>{const t=[];for(const n of e)r.isLeft(n)&&t.push(n.left);return t},ut=e=>{const t=[];for(const n of e)r.isRight(n)&&t.push(n.right);return t},ft=(0,s.dual)(2,((e,t)=>{const n=x(e),r=[];for(let i=0;i<n.length;i++)t(n[i],i)&&r.push(n[i]);return r})),dt=(0,s.dual)(2,((e,t)=>{const n=[],r=[],i=x(e);for(let a=0;a<i.length;a++)t(i[a],a)?r.push(i[a]):n.push(i[a]);return[n,r]})),pt=ot(s.identity),ht=(0,s.dual)(3,((e,t,n)=>x(e).reduce(((e,t,r)=>n(e,t,r)),t))),mt=(0,s.dual)(3,((e,t,n)=>x(e).reduceRight(((e,t,r)=>n(e,t,r)),t))),gt=e=>t=>e(t)?[t]:[],yt=e=>(...t)=>O(e(...t)),bt=e=>null==e?et():[e],St=e=>(...t)=>bt(e(...t)),vt=(0,s.dual)(2,((e,t)=>rt(e,(e=>bt(t(e)))))),wt=e=>(...t)=>{const n=e(...t);return r.isLeft(n)?[]:[n.right]},Et=(0,s.dual)(2,((e,t)=>e.every(t))),_t=(0,s.dual)(2,((e,t)=>e.some(t))),kt=(0,s.dual)(2,((e,t)=>e.map(((e,n,r)=>t(r.slice(n)))))),xt=(0,s.dual)(2,((e,t)=>e.reduce(f.min(t)))),It=(0,s.dual)(2,((e,t)=>e.reduce(f.max(t)))),Tt=(e,t)=>{const n=[];let r,i=e;for(;l.isSome(r=t(i));){const[e,t]=r.value;n.push(e),i=t}return n},Ot=f.array,At=a.array,Nt=(0,s.dual)(2,((e,t)=>x(e).forEach(((e,n)=>t(e,n))))),Mt=(0,s.dual)(2,((e,t)=>{const n=x(e);if(B(n)){const e=[Z(n)],r=te(n);for(const n of r)e.every((e=>!t(n,e)))&&e.push(n);return e}return[]})),Ct=e=>Mt(e,i.equivalence()),Rt=(0,s.dual)(2,((e,t)=>{const n=[];let r=l.none();for(const i of e)!l.isNone(r)&&t(i,r.value)||(n.push(i),r=l.some(i));return n})),Ft=Rt(i.equivalence()),Lt=(0,s.dual)(2,((e,t)=>x(e).join(t))),Pt=(0,s.dual)(3,((e,t,n)=>{let r=0,i=t;const a=[];for(const s of e){const e=n(i,s,r);i=e[0],a.push(e[1]),r++}return[i,a]})),Dt=(0,s.dual)(3,((e,t,n)=>rt(e,(e=>nt(t,(t=>n(e,t))))))),Ut=(0,s.dual)(2,((e,t)=>Dt(e,t,((e,t)=>[e,t])))),jt=tt({}),qt=c.bind(nt,rt),Wt=c.bindTo(nt),Bt=c.let_(nt)},128420:(e,t,n)=>{n.r(t),n.d(t,{append:()=>R,appendAll:()=>q,chunksOf:()=>H,compact:()=>$,contains:()=>Re,containsWith:()=>Fe,dedupe:()=>we,dedupeAdjacent:()=>Ee,difference:()=>Ve,differenceWith:()=>$e,drop:()=>P,dropRight:()=>D,dropWhile:()=>U,empty:()=>w,every:()=>je,filter:()=>B,filterMap:()=>W,filterMapWhile:()=>z,findFirst:()=>Le,findFirstIndex:()=>Pe,findLast:()=>De,findLastIndex:()=>Ue,flatMap:()=>V,flatten:()=>J,forEach:()=>G,fromIterable:()=>k,get:()=>A,getEquivalence:()=>m,head:()=>Q,headNonEmpty:()=>ee,intersection:()=>K,isChunk:()=>S,isEmpty:()=>Y,isNonEmpty:()=>Z,join:()=>We,last:()=>te,lastNonEmpty:()=>re,make:()=>E,makeBy:()=>Me,map:()=>ie,mapAccum:()=>ae,modify:()=>Oe,modifyOption:()=>Te,of:()=>_,partition:()=>se,partitionMap:()=>oe,prepend:()=>F,prependAll:()=>j,range:()=>Ce,reduce:()=>Be,reduceRight:()=>ze,remove:()=>Ie,replace:()=>Ae,replaceOption:()=>Ne,reverse:()=>O,separate:()=>ce,size:()=>le,some:()=>qe,sort:()=>ue,sortWith:()=>fe,split:()=>he,splitAt:()=>de,splitNonEmptyAt:()=>pe,splitWhere:()=>me,tail:()=>ge,tailNonEmpty:()=>ye,take:()=>L,takeRight:()=>be,takeWhile:()=>Se,toArray:()=>I,toReadonlyArray:()=>T,union:()=>ve,unsafeFromArray:()=>N,unsafeFromNonEmptyArray:()=>M,unsafeGet:()=>C,unsafeHead:()=>X,unsafeLast:()=>ne,unzip:()=>_e,zip:()=>xe,zipWith:()=>ke});var r=n(562635),i=n(43977),a=n(235309),s=n(361369),o=n(367337),c=n(883845),l=n(977948),u=n(259877),f=n(953533),d=n(856572);const p=Symbol.for("effect/Chunk");const h=[],m=e=>a.make(((t,n)=>t.length===n.length&&T(t).every(((t,r)=>e(t,C(n,r)))))),g=m(i.equals),y={[p]:{_A:e=>e},toString(){return(0,c.format)(this.toJSON())},toJSON(){return{_id:"Chunk",values:T(this).map(c.toJSON)}},[c.NodeInspectSymbol](){return this.toJSON()},[i.symbol](e){return S(e)&&g(this,e)},[o.symbol](){return o.cached(this,o.array(T(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return h[Symbol.iterator]();default:return T(this)[Symbol.iterator]()}},pipe(){return(0,f.pipeArguments)(this,arguments)}},b=e=>{const t=Object.create(y);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=v,t.right=v;break;case"ISingleton":t.length=1,t.depth=0,t.left=v,t.right=v;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=v,t.right=v}return t},S=e=>(0,d.hasProperty)(e,p),v=b({_tag:"IEmpty"}),w=()=>v,E=(...e)=>1===e.length?_(e[0]):M(e),_=e=>b({_tag:"ISingleton",a:e}),k=e=>S(e)?e:b({_tag:"IArray",array:r.fromIterable(e)}),x=(e,t,n)=>{switch(e.backing._tag){case"IArray":!function(e,t,n,r,i){for(let a=t;a<Math.min(e.length,t+i);a++)n[r+a-t]=e[a]}(e.backing.array,0,t,n,e.length);break;case"IConcat":x(e.left,t,n),x(e.right,t,n+e.left.length);break;case"ISingleton":t[n]=e.backing.a;break;case"ISlice":{let r=0,i=n;for(;r<e.length;)t[i]=C(e,r),r+=1,i+=1;break}}},I=e=>T(e).slice(),T=e=>{switch(e.backing._tag){case"IEmpty":return h;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return x(e,t,0),e.backing={_tag:"IArray",array:t},e.left=v,e.right=v,e.depth=0,t}}},O=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return b({_tag:"IArray",array:r.reverse(e.backing.array)});case"IConcat":return b({_tag:"IConcat",left:O(e.backing.right),right:O(e.backing.left)});case"ISlice":return N(r.reverse(T(e)))}},A=(0,s.dual)(2,((e,t)=>t<0||t>=e.length?l.none():l.some(C(e,t)))),N=e=>b({_tag:"IArray",array:e}),M=e=>N(e),C=(0,s.dual)(2,((e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==t)throw new Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?C(e.left,t):C(e.right,t-e.left.length);case"ISlice":return C(e.backing.chunk,t+e.backing.offset)}})),R=(0,s.dual)(2,((e,t)=>q(e,_(t)))),F=(0,s.dual)(2,((e,t)=>q(_(t),e))),L=(0,s.dual)(2,((e,t)=>{if(t<=0)return v;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?b({_tag:"IConcat",left:e.left,right:L(e.right,t-e.left.length)}):L(e.left,t);default:return b({_tag:"ISlice",chunk:e,offset:0,length:t})}})),P=(0,s.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=e.length)return v;switch(e.backing._tag){case"ISlice":return b({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?P(e.right,t-e.left.length):b({_tag:"IConcat",left:P(e.left,t),right:e.right});default:return b({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}})),D=(0,s.dual)(2,((e,t)=>L(e,Math.max(0,e.length-t)))),U=(0,s.dual)(2,((e,t)=>{const n=T(e),r=n.length;let i=0;for(;i<r&&t(n[i]);)i++;return P(e,i)})),j=(0,s.dual)(2,((e,t)=>q(t,e))),q=(0,s.dual)(2,((e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return b({_tag:"IConcat",left:e,right:t});if(n<-1){if(e.left.depth>=e.right.depth){const n=q(e.right,t);return b({_tag:"IConcat",left:e.left,right:n})}{const n=q(e.right.right,t);if(n.depth===e.depth-3){const t=b({_tag:"IConcat",left:e.right.left,right:n});return b({_tag:"IConcat",left:e.left,right:t})}{const t=b({_tag:"IConcat",left:e.left,right:e.right.left});return b({_tag:"IConcat",left:t,right:n})}}}if(t.right.depth>=t.left.depth){const n=q(e,t.left);return b({_tag:"IConcat",left:n,right:t.right})}{const n=q(e,t.left.left);if(n.depth===t.depth-3){const e=b({_tag:"IConcat",left:n,right:t.left.right});return b({_tag:"IConcat",left:e,right:t.right})}{const e=b({_tag:"IConcat",left:t.left.right,right:t.right});return b({_tag:"IConcat",left:n,right:e})}}})),W=(0,s.dual)(2,((e,t)=>N(r.filterMap(e,t)))),B=(0,s.dual)(2,((e,t)=>N(r.filter(e,t)))),z=(0,s.dual)(2,((e,t)=>N(r.filterMapWhile(e,t)))),$=e=>W(e,s.identity),V=(0,s.dual)(2,((e,t)=>{if("ISingleton"===e.backing._tag)return t(e.backing.a,0);let n=v,r=0;for(const i of e)n=q(n,t(i,r++));return n})),G=(0,s.dual)(2,((e,t)=>T(e).forEach(t))),J=V(s.identity),H=(0,s.dual)(2,((e,t)=>{const n=[];let r=[];return T(e).forEach((e=>{r.push(e),r.length>=t&&(n.push(N(r)),r=[])})),r.length>0&&n.push(N(r)),N(n)})),K=(0,s.dual)(2,((e,t)=>N(r.intersection(T(e),T(t))))),Y=e=>0===e.length,Z=e=>e.length>0,Q=A(0),X=e=>C(e,0),ee=X,te=e=>A(e,e.length-1),ne=e=>C(e,e.length-1),re=ne,ie=(0,s.dual)(2,((e,t)=>"ISingleton"===e.backing._tag?_(t(e.backing.a,0)):N((0,s.pipe)(T(e),r.map(((e,n)=>t(e,n))))))),ae=(0,s.dual)(3,((e,t,n)=>{const[i,a]=r.mapAccum(e,t,n);return[i,N(a)]})),se=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partition(T(e),t),(([e,t])=>[N(e),N(t)])))),oe=(0,s.dual)(2,((e,t)=>(0,s.pipe)(r.partitionMap(T(e),t),(([e,t])=>[N(e),N(t)])))),ce=e=>(0,s.pipe)(r.separate(T(e)),(([e,t])=>[N(e),N(t)])),le=e=>e.length,ue=(0,s.dual)(2,((e,t)=>N(r.sort(T(e),t)))),fe=(0,s.dual)(3,((e,t,n)=>ue(e,u.mapInput(n,t)))),de=(0,s.dual)(2,((e,t)=>[L(e,t),P(e,t)])),pe=(0,s.dual)(2,((e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[e,w()]:[L(e,n),P(e,n)]})),he=(0,s.dual)(2,((e,t)=>H(e,Math.ceil(e.length/Math.floor(t))))),me=(0,s.dual)(2,((e,t)=>{let n=0;for(const r of T(e)){if(t(r))break;n++}return de(e,n)})),ge=e=>e.length>0?l.some(P(e,1)):l.none(),ye=e=>P(e,1),be=(0,s.dual)(2,((e,t)=>P(e,e.length-t))),Se=(0,s.dual)(2,((e,t)=>{const n=[];for(const r of T(e)){if(!t(r))break;n.push(r)}return N(n)})),ve=(0,s.dual)(2,((e,t)=>N(r.union(T(e),T(t))))),we=e=>N(r.dedupe(T(e))),Ee=e=>N(r.dedupeAdjacent(e)),_e=e=>{const[t,n]=r.unzip(e);return[N(t),N(n)]},ke=(0,s.dual)(3,((e,t,n)=>N(r.zipWith(e,t,n)))),xe=(0,s.dual)(2,((e,t)=>ke(e,t,((e,t)=>[e,t])))),Ie=(0,s.dual)(2,((e,t)=>N(r.remove(T(e),t)))),Te=(0,s.dual)(3,((e,t,n)=>l.map(r.modifyOption(T(e),t,n),N))),Oe=(0,s.dual)(3,((e,t,n)=>l.getOrElse(Te(e,t,n),(()=>e)))),Ae=(0,s.dual)(3,((e,t,n)=>Oe(e,t,(()=>n)))),Ne=(0,s.dual)(3,((e,t,n)=>Te(e,t,(()=>n)))),Me=(0,s.dual)(2,((e,t)=>k(r.makeBy(e,t)))),Ce=(e,t)=>e<=t?Me(t-e+1,(t=>e+t)):_(e),Re=r.contains,Fe=r.containsWith,Le=r.findFirst,Pe=r.findFirstIndex,De=r.findLast,Ue=r.findLastIndex,je=(0,s.dual)(2,((e,t)=>r.fromIterable(e).every(t))),qe=(0,s.dual)(2,((e,t)=>r.fromIterable(e).some(t))),We=r.join,Be=r.reduce,ze=r.reduceRight,$e=e=>(0,s.dual)(2,((t,n)=>N(r.differenceWith(e)(n,t)))),Ve=(0,s.dual)(2,((e,t)=>N(r.difference(t,e))))},131651:(e,t,n)=>{n.r(t),n.d(t,{Clock:()=>f,ClockTypeId:()=>a,clockWith:()=>u,currentTimeMillis:()=>c,currentTimeNanos:()=>l,make:()=>s,sleep:()=>o});var r=n(114969),i=n(344862);const a=r.ClockTypeId,s=r.make,o=i.sleep,c=i.currentTimeMillis,l=i.currentTimeNanos,u=i.clockWith,f=r.clockTag},689702:(e,t,n)=>{n.r(t),n.d(t,{GenericTag:()=>i,Tag:()=>y,add:()=>u,empty:()=>c,get:()=>f,getOption:()=>p,isContext:()=>s,isTag:()=>o,make:()=>l,merge:()=>h,omit:()=>g,pick:()=>m,unsafeGet:()=>d,unsafeMake:()=>a});var r=n(883768);r.TagTypeId;const i=r.makeGenericTag,a=(r.TypeId,r.makeContext),s=r.isContext,o=r.isTag,c=r.empty,l=r.make,u=r.add,f=r.get,d=r.unsafeGet,p=r.getOption,h=r.merge,m=r.pick,g=r.omit,y=r.Tag},762738:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,await:()=>o,complete:()=>c,completeWith:()=>l,die:()=>m,dieSync:()=>g,done:()=>u,fail:()=>f,failCause:()=>p,failCauseSync:()=>h,failSync:()=>d,interrupt:()=>y,interruptWith:()=>b,isDone:()=>S,make:()=>a,makeAs:()=>s,poll:()=>v,succeed:()=>w,sync:()=>E,unsafeDone:()=>k,unsafeMake:()=>_});var r=n(672620);const i=n(304080).DeferredTypeId,a=r.deferredMake,s=r.deferredMakeAs,o=r.deferredAwait,c=r.deferredComplete,l=r.deferredCompleteWith,u=r.deferredDone,f=r.deferredFail,d=r.deferredFailSync,p=r.deferredFailCause,h=r.deferredFailCauseSync,m=r.deferredDie,g=r.deferredDieSync,y=r.deferredInterrupt,b=r.deferredInterruptWith,S=r.deferredIsDone,v=r.deferredPoll,w=r.deferredSucceed,E=r.deferredSync,_=r.deferredUnsafeMake,k=r.deferredUnsafeDone},284073:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>J,Order:()=>V,between:()=>G,clamp:()=>X,days:()=>P,decode:()=>S,decodeUnknown:()=>v,divide:()=>ee,equals:()=>le,format:()=>ue,greaterThan:()=>oe,greaterThanOrEqualTo:()=>ce,hours:()=>L,infinity:()=>A,isDuration:()=>x,isFinite:()=>I,isZero:()=>T,lessThan:()=>ae,lessThanOrEqualTo:()=>se,match:()=>z,matchWith:()=>$,max:()=>Z,micros:()=>M,millis:()=>C,min:()=>K,minutes:()=>F,nanos:()=>N,seconds:()=>R,subtract:()=>re,sum:()=>ie,times:()=>ne,toHrTime:()=>B,toMillis:()=>U,toNanos:()=>q,toSeconds:()=>j,unsafeDivide:()=>te,unsafeToNanos:()=>W,weeks:()=>D,zero:()=>O});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(259877),l=n(953533),u=n(856572);const f=Symbol.for("effect/Duration"),d=BigInt(0),p=BigInt(24),h=BigInt(60),m=BigInt(1e3),g=BigInt(1e6),y=BigInt(1e9),b=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,S=e=>{if(x(e))return e;if((0,u.isNumber)(e))return C(e);if((0,u.isBigInt)(e))return N(e);if(Array.isArray(e)){if(2===e.length&&(0,u.isNumber)(e[0])&&(0,u.isNumber)(e[1]))return N(BigInt(e[0])*y+BigInt(e[1]))}else if((0,u.isString)(e)){b.lastIndex=0;const t=b.exec(e);if(t){const[e,n,r]=t,i=Number(n);switch(r){case"nano":case"nanos":return N(BigInt(n));case"micro":case"micros":return M(BigInt(n));case"milli":case"millis":return C(i);case"second":case"seconds":return R(i);case"minute":case"minutes":return F(i);case"hour":case"hours":return L(i);case"day":case"days":return P(i);case"week":case"weeks":return D(i)}}}throw new Error("Invalid DurationInput")},v=o.liftThrowable(S),w={_tag:"Millis",millis:0},E={_tag:"Infinity"},_={[f]:f,[a.symbol](){return a.cached(this,a.structure(this.value))},[r.symbol](e){return x(e)&&le(this,e)},toString(){return`Duration(${ue(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:B(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,l.pipeArguments)(this,arguments)}},k=e=>{const t=Object.create(_);return(0,u.isNumber)(e)?isNaN(e)||e<=0?t.value=w:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=E:t.value=e<=d?w:{_tag:"Nanos",nanos:e},t},x=e=>(0,u.hasProperty)(e,f),I=e=>"Infinity"!==e.value._tag,T=e=>{switch(e.value._tag){case"Millis":return 0===e.value.millis;case"Nanos":return e.value.nanos===d;case"Infinity":return!1}},O=k(0),A=k(1/0),N=e=>k(e),M=e=>k(e*m),C=e=>k(e),R=e=>k(1e3*e),F=e=>k(6e4*e),L=e=>k(36e5*e),P=e=>k(864e5*e),D=e=>k(6048e5*e),U=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},j=e=>U(e)/1e3,q=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return o.none();case"Nanos":return o.some(t.value.nanos);case"Millis":return o.some(BigInt(Math.round(1e6*t.value.millis)))}},W=e=>{const t=S(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},B=e=>{const t=S(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/y),Number(t.value.nanos%y)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},z=(0,i.dual)(2,((e,t)=>{const n=S(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}})),$=(0,i.dual)(3,((e,t,n)=>{const r=S(e),i=S(t);if("Infinity"===r.value._tag||"Infinity"===i.value._tag)return n.onMillis(U(r),U(i));if("Nanos"===r.value._tag||"Nanos"===i.value._tag){const e="Nanos"===r.value._tag?r.value.nanos:BigInt(Math.round(1e6*r.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return n.onNanos(e,t)}return n.onMillis(r.value.millis,i.value.millis)})),V=c.make(((e,t)=>$(e,t,{onMillis:(e,t)=>e<t?-1:e>t?1:0,onNanos:(e,t)=>e<t?-1:e>t?1:0}))),G=c.between(c.mapInput(V,S)),J=(e,t)=>$(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),H=c.min(V),K=(0,i.dual)(2,((e,t)=>H(S(e),S(t)))),Y=c.max(V),Z=(0,i.dual)(2,((e,t)=>Y(S(e),S(t)))),Q=c.clamp(V),X=(0,i.dual)(2,((e,t)=>Q(S(e),{minimum:S(t.minimum),maximum:S(t.maximum)}))),ee=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>0===t||isNaN(t)||!Number.isFinite(t)?o.none():o.some(k(e/t)),onNanos:e=>{if(isNaN(t)||t<=0||!Number.isFinite(t))return o.none();try{return o.some(k(e/BigInt(t)))}catch(n){return o.none()}}}))),te=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>k(e/t),onNanos:e=>isNaN(t)||t<0||Object.is(t,-0)?O:Object.is(t,0)||!Number.isFinite(t)?A:k(e/BigInt(t))}))),ne=(0,i.dual)(2,((e,t)=>z(e,{onMillis:e=>k(e*t),onNanos:e=>k(e*BigInt(t))}))),re=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>k(e-t),onNanos:(e,t)=>k(e-t)}))),ie=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>k(e+t),onNanos:(e,t)=>k(e+t)}))),ae=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}))),se=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),oe=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e>t,onNanos:(e,t)=>e>t}))),ce=(0,i.dual)(2,((e,t)=>$(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t}))),le=(0,i.dual)(2,((e,t)=>J(S(e),S(t)))),ue=e=>{const t=S(e),n=[];if("Infinity"===t.value._tag)return"Infinity";const r=W(t);r%g&&n.push(r%g+"ns");const i=r/g;i%m!==d&&n.push(i%m+"ms");const a=i/m;a%h!==d&&n.push(a%h+"s");const s=a/h;s%h!==d&&n.push(s%h+"m");const o=s/h;o%p!==d&&n.push(o%p+"h");const c=o/p;return c!==d&&n.push(`${c}d`),n.reverse().join(" ")}},737028:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>Pn,EffectTypeId:()=>_,Tag:()=>ua,acquireRelease:()=>gt,acquireReleaseInterruptible:()=>yt,acquireUseRelease:()=>bt,addFinalizer:()=>St,all:()=>N,allSuccesses:()=>C,allWith:()=>M,allowInterrupt:()=>Ge,andThen:()=>nr,annotateCurrentSpan:()=>Ki,annotateLogs:()=>Kr,annotateLogsScoped:()=>Yr,annotateSpans:()=>Hi,ap:()=>Ri,as:()=>rt,asSome:()=>it,asSomeError:()=>at,asVoid:()=>st,async:()=>te,asyncEffect:()=>ne,awaitAllChildren:()=>Mt,bind:()=>Dn,bindTo:()=>Un,blocked:()=>Fi,cacheRequestResult:()=>Ui,cached:()=>T,cachedFunction:()=>O,cachedInvalidateWithTTL:()=>I,cachedWithTTL:()=>x,catch:()=>_e,catchAll:()=>ke,catchAllCause:()=>xe,catchAllDefect:()=>Ie,catchIf:()=>Te,catchSome:()=>Oe,catchSomeCause:()=>Ae,catchSomeDefect:()=>Ne,catchTag:()=>Me,catchTags:()=>Ce,cause:()=>Re,checkInterruptible:()=>Je,clock:()=>en,clockWith:()=>tn,configProviderWith:()=>bn,console:()=>an,consoleWith:()=>sn,context:()=>wn,contextWith:()=>En,contextWithEffect:()=>_n,currentParentSpan:()=>Zi,currentSpan:()=>Yi,custom:()=>re,daemonChildren:()=>Ct,delay:()=>ln,descriptor:()=>Rt,descriptorWith:()=>Ft,die:()=>le,dieMessage:()=>ue,dieSync:()=>fe,diffFiberRefs:()=>Lt,disconnect:()=>He,dropUntil:()=>R,dropWhile:()=>F,either:()=>qn,ensuring:()=>vt,ensuringChild:()=>Pt,ensuringChildren:()=>Dt,eventually:()=>Fe,every:()=>L,exists:()=>P,exit:()=>Wn,fail:()=>ae,failCause:()=>oe,failCauseSync:()=>ce,failSync:()=>se,fiberId:()=>Ut,fiberIdWith:()=>jt,filter:()=>D,filterMap:()=>U,filterOrDie:()=>Vn,filterOrDieMessage:()=>Gn,filterOrElse:()=>Jn,filterOrFail:()=>Hn,finalizersMask:()=>kt,findFirst:()=>j,firstSuccessOf:()=>q,flatMap:()=>tr,flatten:()=>rr,flip:()=>ot,flipWith:()=>ct,forEach:()=>W,forever:()=>mr,fork:()=>qt,forkAll:()=>Bt,forkDaemon:()=>Wt,forkIn:()=>zt,forkScoped:()=>$t,forkWithErrorHandler:()=>Vt,fromFiber:()=>Gt,fromFiberEffect:()=>Jt,fromNullable:()=>ca,functionWithSpan:()=>aa,gen:()=>de,getFiberRefs:()=>xr,getRuntimeFlags:()=>li,head:()=>B,if:()=>$n,ignore:()=>Le,ignoreLogged:()=>Pe,inheritFiberRefs:()=>Ir,interrupt:()=>Ke,interruptWith:()=>Ye,interruptible:()=>Ze,interruptibleMask:()=>Qe,intoDeferred:()=>Bn,isEffect:()=>k,isFailure:()=>Fr,isSuccess:()=>Lr,iterate:()=>gr,labelMetrics:()=>hi,labelMetricsScoped:()=>gi,let:()=>jn,liftPredicate:()=>nt,linkSpans:()=>ea,locally:()=>Tr,locallyScoped:()=>Ar,locallyScopedWith:()=>Nr,locallyWith:()=>Or,log:()=>qr,logAnnotations:()=>Zr,logDebug:()=>zr,logError:()=>Gr,logFatal:()=>Jr,logInfo:()=>$r,logTrace:()=>Br,logWarning:()=>Vr,logWithLevel:()=>Wr,loop:()=>yr,makeSemaphore:()=>vi,makeSpan:()=>ta,makeSpanScoped:()=>na,map:()=>lt,mapAccum:()=>ut,mapBoth:()=>ft,mapError:()=>dt,mapErrorCause:()=>pt,mapInputContext:()=>kn,match:()=>Pr,matchCause:()=>Dr,matchCauseEffect:()=>Ur,matchEffect:()=>jr,merge:()=>ht,mergeAll:()=>z,metricLabels:()=>yi,negate:()=>mt,never:()=>pe,none:()=>he,onError:()=>wt,onExit:()=>Et,onInterrupt:()=>Xe,once:()=>A,option:()=>zn,optionFromOptional:()=>la,orDie:()=>Xr,orDieWith:()=>ei,orElse:()=>ti,orElseFail:()=>ni,orElseSucceed:()=>ri,parallelErrors:()=>De,parallelFinalizers:()=>_t,partition:()=>$,patchFiberRefs:()=>Mr,patchRuntimeFlags:()=>ui,promise:()=>me,provide:()=>xn,provideService:()=>In,provideServiceEffect:()=>Tn,race:()=>ar,raceAll:()=>ir,raceFirst:()=>sr,raceWith:()=>or,random:()=>ii,randomWith:()=>ai,reduce:()=>V,reduceEffect:()=>G,reduceRight:()=>J,reduceWhile:()=>H,repeat:()=>br,repeatN:()=>Sr,repeatOrElse:()=>vr,replicate:()=>K,replicateEffect:()=>Y,request:()=>Di,retry:()=>je,retryOrElse:()=>qe,runCallback:()=>Ei,runFork:()=>wi,runPromise:()=>_i,runPromiseExit:()=>ki,runRequestBlock:()=>Li,runSync:()=>xi,runSyncExit:()=>Ii,runtime:()=>ci,sandbox:()=>Ue,schedule:()=>wr,scheduleForked:()=>Er,scheduleFrom:()=>_r,scope:()=>It,scopeWith:()=>Tt,scoped:()=>Ot,sequentialFinalizers:()=>xt,serviceConstants:()=>Mn,serviceFunction:()=>On,serviceFunctionEffect:()=>An,serviceFunctions:()=>Nn,serviceMembers:()=>Cn,serviceOption:()=>Rn,serviceOptional:()=>Fn,setFiberRefs:()=>Cr,sleep:()=>un,spanAnnotations:()=>Qi,spanLinks:()=>Xi,step:()=>Pi,succeed:()=>ge,succeedNone:()=>ye,succeedSome:()=>be,summarized:()=>cr,supervised:()=>Ht,suspend:()=>Se,sync:()=>ve,tagMetrics:()=>pi,tagMetricsScoped:()=>mi,takeUntil:()=>Z,takeWhile:()=>Q,tap:()=>lr,tapBoth:()=>ur,tapDefect:()=>fr,tapError:()=>dr,tapErrorCause:()=>hr,tapErrorTag:()=>pr,timed:()=>fn,timedWith:()=>dn,timeout:()=>pn,timeoutFail:()=>mn,timeoutFailCause:()=>gn,timeoutOption:()=>hn,timeoutTo:()=>yn,tracer:()=>Bi,tracerWith:()=>zi,transplant:()=>Kt,try:()=>We,tryMap:()=>Be,tryMapPromise:()=>ze,tryPromise:()=>$e,uninterruptible:()=>et,uninterruptibleMask:()=>tt,unless:()=>Kn,unlessEffect:()=>Yn,unsafeMakeSemaphore:()=>Si,unsandbox:()=>Ve,updateFiberRefs:()=>Rr,updateService:()=>Ln,useSpan:()=>ra,using:()=>At,validate:()=>Ti,validateAll:()=>X,validateFirst:()=>ee,validateWith:()=>Oi,void:()=>we,when:()=>Zn,whenEffect:()=>Qn,whenFiberRef:()=>Xn,whenRef:()=>er,whileLoop:()=>kr,withClock:()=>rn,withClockScoped:()=>nn,withConcurrency:()=>Yt,withConfigProvider:()=>Sn,withConfigProviderScoped:()=>vn,withConsole:()=>cn,withConsoleScoped:()=>on,withEarlyRelease:()=>Nt,withFiberRuntime:()=>ie,withLogSpan:()=>Hr,withMaxOpsBeforeYield:()=>Xt,withMetric:()=>bi,withParentSpan:()=>oa,withRandom:()=>si,withRandomScoped:()=>oi,withRequestBatching:()=>ji,withRequestCache:()=>Wi,withRequestCaching:()=>qi,withRuntimeFlagsPatch:()=>fi,withRuntimeFlagsPatchScoped:()=>di,withScheduler:()=>Zt,withSchedulingPriority:()=>Qt,withSpan:()=>ia,withSpanScoped:()=>sa,withTracer:()=>$i,withTracerEnabled:()=>Gi,withTracerScoped:()=>Vi,withTracerTiming:()=>Ji,withUnhandledErrorLogLevel:()=>Qr,yieldNow:()=>Ee,zip:()=>Ai,zipLeft:()=>Ni,zipRight:()=>Mi,zipWith:()=>Ci});var r=n(361369),i=n(689702),a=n(672620),s=n(344862),o=n(272572),c=n(858657),l=n(277568);const u=a.map(a.fiberRefGet(s.currentServices),i.get(o.consoleTag)),f=e=>a.fiberRefGetWith(s.currentServices,(t=>e(i.get(t,o.consoleTag)))),d=(0,r.dual)(2,((e,t)=>a.fiberRefLocallyWith(e,s.currentServices,i.add(o.consoleTag,t))));var p=n(883768),h=n(5316),m=n(212164),g=n(502787),y=n(44399),b=n(141324),S=n(668481),v=(n(964155),n(502146));v.RequestTypeId;const w=v.isRequest;v.of,v.tagged,v.Class,v.TaggedClass,v.complete,c.interruptWhenPossible,v.completeEffect,v.fail,v.failCause,v.succeed,S.isEntry,S.makeEntry;var E=n(71108);const _=a.EffectTypeId,k=a.isEffect,x=m.cached,I=m.cachedInvalidateWithTTL,T=h.memoize,O=m.cachedFunction,A=h.once,N=c.all,M=c.allWith,C=c.allSuccesses,R=h.dropUntil,F=h.dropWhile,L=h.every,P=c.exists,D=c.filter,U=h.filterMap,j=h.findFirst,q=h.firstSuccessOf,W=c.forEach,B=h.head,z=c.mergeAll,$=c.partition,V=h.reduce,G=c.reduceEffect,J=h.reduceRight,H=h.reduceWhile,K=c.replicate,Y=c.replicateEffect,Z=h.takeUntil,Q=h.takeWhile,X=c.validateAll,ee=c.validateFirst,te=a.async,ne=y.asyncEffect,re=a.custom,ie=a.withFiberRuntime,ae=a.fail,se=a.failSync,oe=a.failCause,ce=a.failCauseSync,le=a.die,ue=a.dieMessage,fe=a.dieSync,de=h.gen,pe=a.never,he=h.none,me=h.promise,ge=a.succeed,ye=h.succeedNone,be=h.succeedSome,Se=a.suspend,ve=a.sync,we=a.void,Ee=a.yieldNow,_e=h._catch,ke=a.catchAll,xe=a.catchAllCause,Ie=h.catchAllDefect,Te=a.catchIf,Oe=a.catchSome,Ae=h.catchSomeCause,Ne=h.catchSomeDefect,Me=h.catchTag,Ce=h.catchTags,Re=h.cause,Fe=h.eventually,Le=h.ignore,Pe=h.ignoreLogged,De=h.parallelErrors,Ue=h.sandbox,je=b.retry_combined,qe=b.retryOrElse_Effect,We=h.try_,Be=h.tryMap,ze=h.tryMapPromise,$e=h.tryPromise,Ve=h.unsandbox,Ge=h.allowInterrupt,Je=a.checkInterruptible,He=c.disconnect,Ke=a.interrupt,Ye=a.interruptWith,Ze=a.interruptible,Qe=a.interruptibleMask,Xe=a.onInterrupt,et=a.uninterruptible,tt=a.uninterruptibleMask,nt=h.liftPredicate,rt=a.as,it=h.asSome,at=h.asSomeError,st=a.asVoid,ot=a.flip,ct=h.flipWith,lt=a.map,ut=h.mapAccum,ft=a.mapBoth,dt=a.mapError,pt=h.mapErrorCause,ht=h.merge,mt=h.negate,gt=c.acquireRelease,yt=c.acquireReleaseInterruptible,bt=a.acquireUseRelease,St=c.addFinalizer,vt=c.ensuring,wt=a.onError,Et=a.onExit,_t=c.parallelFinalizers,kt=c.finalizersMask,xt=c.sequentialFinalizers,It=c.scope,Tt=c.scopeWith,Ot=c.scopedEffect,At=c.using,Nt=c.withEarlyRelease,Mt=m.awaitAllChildren,Ct=c.daemonChildren,Rt=h.descriptor,Ft=h.descriptorWith,Lt=h.diffFiberRefs,Pt=m.ensuringChild,Dt=m.ensuringChildren,Ut=a.fiberId,jt=a.fiberIdWith,qt=c.fork,Wt=c.forkDaemon,Bt=m.forkAll,zt=m.forkIn,$t=m.forkScoped,Vt=c.forkWithErrorHandler,Gt=m.fromFiber,Jt=m.fromFiberEffect,Ht=m.supervised,Kt=a.transplant,Yt=a.withConcurrency,Zt=E.withScheduler,Qt=a.withSchedulingPriority,Xt=a.withMaxOpsBeforeYield,en=h.clock,tn=h.clockWith,nn=c.withClockScoped,rn=s.withClock,an=u,sn=f,on=e=>c.fiberRefLocallyScopedWith(s.currentServices,i.add(o.consoleTag,e)),cn=d,ln=h.delay,un=h.sleep,fn=h.timed,dn=h.timedWith,pn=m.timeout,hn=m.timeoutOption,mn=m.timeoutFail,gn=m.timeoutFailCause,yn=m.timeoutTo,bn=s.configProviderWith,Sn=s.withConfigProvider,vn=c.withConfigProviderScoped,wn=a.context,En=h.contextWith,_n=a.contextWithEffect,kn=a.mapInputContext,xn=l.effect_provide,In=h.provideService,Tn=h.provideServiceEffect,On=h.serviceFunction,An=h.serviceFunctionEffect,Nn=h.serviceFunctions,Mn=h.serviceConstants,Cn=h.serviceMembers,Rn=h.serviceOption,Fn=h.serviceOptional,Ln=h.updateService,Pn=h.Do,Dn=h.bind,Un=h.bindTo,jn=h.let_,qn=a.either,Wn=a.exit,Bn=a.intoDeferred,zn=h.option,$n=a.if_,Vn=h.filterOrDie,Gn=h.filterOrDieMessage,Jn=h.filterOrElse,Hn=h.filterOrFail,Kn=h.unless,Yn=h.unlessEffect,Zn=h.when,Qn=a.whenEffect,Xn=h.whenFiberRef,er=h.whenRef,tr=a.flatMap,nr=a.andThen,rr=a.flatten,ir=c.raceAll,ar=c.race,sr=m.raceFirst,or=c.raceWith,cr=h.summarized,lr=a.tap,ur=h.tapBoth,fr=h.tapDefect,dr=h.tapError,pr=h.tapErrorTag,hr=h.tapErrorCause,mr=h.forever,gr=h.iterate,yr=h.loop,br=b.repeat_combined,Sr=h.repeatN,vr=b.repeatOrElse_Effect,wr=b.schedule_Effect,Er=m.scheduleForked,_r=b.scheduleFrom_Effect,kr=a.whileLoop,xr=h.fiberRefs,Ir=h.inheritFiberRefs,Tr=a.fiberRefLocally,Or=a.fiberRefLocallyWith,Ar=c.fiberRefLocallyScoped,Nr=c.fiberRefLocallyScopedWith,Mr=h.patchFiberRefs,Cr=h.setFiberRefs,Rr=h.updateFiberRefs,Fr=h.isFailure,Lr=h.isSuccess,Pr=h.match,Dr=a.matchCause,Ur=a.matchCauseEffect,jr=a.matchEffect,qr=h.log,Wr=(e,...t)=>h.logWithLevel(e)(...t),Br=h.logTrace,zr=h.logDebug,$r=h.logInfo,Vr=h.logWarning,Gr=h.logError,Jr=h.logFatal,Hr=h.withLogSpan,Kr=h.annotateLogs,Yr=c.annotateLogsScoped,Zr=h.logAnnotations,Qr=a.withUnhandledErrorLogLevel,Xr=a.orDie,ei=a.orDieWith,ti=a.orElse,ni=h.orElseFail,ri=h.orElseSucceed,ii=h.random,ai=s.randomWith,si=s.withRandom,oi=c.withRandomScoped,ci=y.runtime,li=a.runtimeFlags,ui=a.updateRuntimeFlags,fi=a.withRuntimeFlags,di=c.withRuntimeFlagsScoped,pi=h.tagMetrics,hi=h.labelMetrics,mi=c.tagMetricsScoped,gi=c.labelMetricsScoped,yi=a.metricLabels,bi=h.withMetric,Si=m.unsafeMakeSemaphore,vi=m.makeSemaphore,wi=y.unsafeForkEffect,Ei=y.unsafeRunEffect,_i=y.unsafeRunPromiseEffect,ki=y.unsafeRunPromiseExitEffect,xi=y.unsafeRunSyncEffect,Ii=y.unsafeRunSyncExitEffect,Ti=c.validate,Oi=c.validateWith,Ai=c.zipOptions,Ni=c.zipLeftOptions,Mi=c.zipRightOptions,Ci=c.zipWithOptions,Ri=(0,r.dual)(2,((e,t)=>Ci(e,t,((e,t)=>e(t))))),Fi=a.blocked,Li=a.runRequestBlock,Pi=a.step,Di=(0,r.dual)((e=>w(e[0])),g.fromRequest),Ui=g.cacheRequest,ji=a.withRequestBatching,qi=g.withRequestCaching,Wi=g.withRequestCache,Bi=h.tracer,zi=s.tracerWith,$i=s.withTracer,Vi=c.withTracerScoped,Gi=a.withTracerEnabled,Ji=a.withTracerTiming,Hi=h.annotateSpans,Ki=h.annotateCurrentSpan,Yi=h.currentSpan,Zi=h.currentParentSpan,Qi=h.spanAnnotations,Xi=h.spanLinks,ea=h.linkSpans,ta=h.makeSpan,na=c.makeSpanScoped,ra=h.useSpan,ia=h.withSpan,aa=h.functionWithSpan,sa=c.withSpanScoped,oa=h.withParentSpan,ca=h.fromNullable,la=h.optionFromOptional,ua=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}Error.stackTraceLimit=t,Object.setPrototypeOf(r,p.TagProto),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack});const i=new Map;return new Proxy(r,{get(e,t,n){if("use"===t)return e=>a.andThen(r,e);if(t in r)return r[t];if(i.has(t))return i.get(t);const s=(...e)=>a.andThen(r,(n=>"function"===typeof n[t]?(i.set(t,((...e)=>a.andThen(r,(n=>n[t](...e))))),n[t](...e)):(i.set(t,a.andThen(r,(e=>e[t]))),n[t]))),o=a.andThen(r,(e=>e[t]));return Object.assign(s,o),Object.setPrototypeOf(s,Object.getPrototypeOf(o)),i.set(t,s),s}})}},757964:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>B,TypeId:()=>l,all:()=>U,andThen:()=>L,ap:()=>D,bind:()=>z,bindTo:()=>$,filterOrLeft:()=>I,flatMap:()=>F,flip:()=>j,fromNullable:()=>d,fromOption:()=>p,gen:()=>W,getEquivalence:()=>v,getLeft:()=>S,getOrElse:()=>O,getOrNull:()=>A,getOrThrow:()=>C,getOrThrowWith:()=>M,getOrUndefined:()=>N,getRight:()=>b,isEither:()=>m,isLeft:()=>g,isRight:()=>y,left:()=>f,let:()=>V,liftPredicate:()=>x,map:()=>_,mapBoth:()=>w,mapLeft:()=>E,match:()=>k,merge:()=>T,orElse:()=>R,right:()=>u,try:()=>h,zipWith:()=>P});var r=n(235309),i=n(361369),a=n(91276),s=n(609018),o=n(856572),c=n(730276);const l=s.TypeId,u=s.right,f=s.left,d=(0,i.dual)(2,((e,t)=>null==e?f(t(e)):u(e))),p=s.fromOption,h=e=>{if((0,o.isFunction)(e))try{return u(e())}catch(t){return f(t)}else try{return u(e.try())}catch(t){return f(e.catch(t))}},m=s.isEither,g=s.isLeft,y=s.isRight,b=s.getRight,S=s.getLeft,v=({left:e,right:t})=>r.make(((n,r)=>g(n)?g(r)&&e(n.left,r.left):y(r)&&t(n.right,r.right))),w=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?f(t(e.left)):u(n(e.right)))),E=(0,i.dual)(2,((e,t)=>g(e)?f(t(e.left)):u(e.right))),_=(0,i.dual)(2,((e,t)=>y(e)?u(t(e.right)):f(e.left))),k=(0,i.dual)(2,((e,{onLeft:t,onRight:n})=>g(e)?t(e.left):n(e.right))),x=(0,i.dual)(3,((e,t,n)=>t(e)?u(e):f(n(e)))),I=(0,i.dual)(3,((e,t,n)=>F(e,(e=>t(e)?u(e):f(n(e)))))),T=k({onLeft:i.identity,onRight:i.identity}),O=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):e.right)),A=O(i.constNull),N=O(i.constUndefined),M=(0,i.dual)(2,((e,t)=>{if(y(e))return e.right;throw t(e.left)})),C=M((()=>new Error("getOrThrow called on a Left"))),R=(0,i.dual)(2,((e,t)=>g(e)?t(e.left):u(e.right))),F=(0,i.dual)(2,((e,t)=>g(e)?f(e.left):t(e.right))),L=(0,i.dual)(2,((e,t)=>F(e,(e=>{const n=(0,o.isFunction)(t)?t(e):t;return m(n)?n:u(n)})))),P=(0,i.dual)(3,((e,t,n)=>F(e,(e=>_(t,(t=>n(e,t))))))),D=(0,i.dual)(2,((e,t)=>P(e,t,((e,t)=>e(t))))),U=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(g(n))return n;t.push(n.right)}return u(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(g(r))return r;t[n]=r.right}return u(t)},j=e=>g(e)?u(e.left):f(e.right),q=c.adapter(),W=(...e)=>{const t=(1===e.length?e[0]:e[1].bind(e[0]))(q);let n=t.next();if(n.done)return u(n.value);{let e=n.value;if(e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e))return e;for(;!n.done;)if(n=t.next(e.right),!n.done&&(e=n.value,e=c.isGenKind(e)?e.value:c.yieldWrapGet(e),g(e)))return e;return u(n.value)}},B=u({}),z=a.bind(_,F),$=a.bindTo(_),V=a.let_(_)},43977:(e,t,n)=>{n.r(t),n.d(t,{equals:()=>o,equivalence:()=>u,isEqual:()=>l,symbol:()=>s});var r=n(367337),i=n(856572),a=n(730276);const s=Symbol.for("effect/Equal");function o(){return 1===arguments.length?e=>c(e,arguments[0]):c(arguments[0],arguments[1])}function c(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(l(e)&&l(t))return!(r.hash(e)!==r.hash(t)||!e[s](t))||!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(a.structuralRegionState.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,n)=>c(e,t[n])));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e),r=Object.keys(t);if(n.length===r.length){for(const r of n)if(!(r in t)||!c(e[r],t[r]))return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t);return!0}}return!!a.structuralRegionState.tester&&a.structuralRegionState.tester(e,t)}}return!(!a.structuralRegionState.enabled||!a.structuralRegionState.tester)&&a.structuralRegionState.tester(e,t)}const l=e=>(0,i.hasProperty)(e,s),u=()=>o},235309:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>y,all:()=>S,array:()=>E,bigint:()=>u,boolean:()=>l,combine:()=>d,combineAll:()=>m,combineMany:()=>p,make:()=>i,mapInput:()=>g,number:()=>c,product:()=>b,productMany:()=>v,strict:()=>s,string:()=>o,struct:()=>_,symbol:()=>f,tuple:()=>w});var r=n(361369);const i=e=>(t,n)=>t===n||e(t,n),a=(e,t)=>e===t,s=()=>a,o=s(),c=s(),l=s(),u=s(),f=s(),d=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(n,r)&&t(n,r))))),p=(0,r.dual)(2,((e,t)=>i(((n,r)=>{if(!e(n,r))return!1;for(const e of t)if(!e(n,r))return!1;return!0})))),h=(e,t)=>!0,m=e=>p(h,e),g=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),y=g(c,(e=>e.getTime())),b=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>e(n,i)&&t(r,a))))),S=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;if(!a(t[i],n[i]))return!1;i++}return!0})),v=(e,t)=>{const n=S(t);return i(((t,r)=>!!e(t[0],r[0])&&n(t.slice(1),r.slice(1))))},w=(...e)=>S(e),E=e=>i(((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){if(!e(t[r],n[r]))return!1}return!0})),_=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t)if(!e[i](n[i],r[i]))return!1;return!0}))}},896949:(e,t,n)=>{n.r(t),n.d(t,{all:()=>f,as:()=>c,asVoid:()=>l,causeOption:()=>u,die:()=>d,exists:()=>p,fail:()=>h,failCause:()=>m,flatMap:()=>g,flatMapEffect:()=>y,flatten:()=>b,forEachEffect:()=>S,fromEither:()=>v,fromOption:()=>w,getOrElse:()=>E,interrupt:()=>_,isExit:()=>i,isFailure:()=>a,isInterrupted:()=>o,isSuccess:()=>s,map:()=>k,mapBoth:()=>x,mapError:()=>I,mapErrorCause:()=>T,match:()=>O,matchEffect:()=>A,succeed:()=>N,void:()=>M,zip:()=>C,zipLeft:()=>R,zipPar:()=>L,zipParLeft:()=>P,zipParRight:()=>D,zipRight:()=>F,zipWith:()=>U});var r=n(672620);const i=r.exitIsExit,a=r.exitIsFailure,s=r.exitIsSuccess,o=r.exitIsInterrupted,c=r.exitAs,l=r.exitAsVoid,u=r.exitCauseOption,f=r.exitCollectAll,d=r.exitDie,p=r.exitExists,h=r.exitFail,m=r.exitFailCause,g=r.exitFlatMap,y=r.exitFlatMapEffect,b=r.exitFlatten,S=r.exitForEachEffect,v=r.exitFromEither,w=r.exitFromOption,E=r.exitGetOrElse,_=r.exitInterrupt,k=r.exitMap,x=r.exitMapBoth,I=r.exitMapError,T=r.exitMapErrorCause,O=r.exitMatch,A=r.exitMatchEffect,N=r.exitSucceed,M=r.exitVoid,C=r.exitZip,R=r.exitZipLeft,F=r.exitZipRight,L=r.exitZipPar,P=r.exitZipParLeft,D=r.exitZipParRight,U=r.exitZipWith},295602:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>i,combine:()=>d,combineAll:()=>p,composite:()=>o,getOrElse:()=>h,ids:()=>m,isComposite:()=>f,isFiberId:()=>c,isNone:()=>l,isRuntime:()=>u,make:()=>g,none:()=>a,runtime:()=>s,threadName:()=>y,toOption:()=>b,toSet:()=>S,unsafeMake:()=>v});var r=n(478908);const i=r.FiberIdTypeId,a=r.none,s=r.runtime,o=r.composite,c=r.isFiberId,l=r.isNone,u=r.isRuntime,f=r.isComposite,d=r.combine,p=r.combineAll,h=r.getOrElse,m=r.ids,g=r.make,y=r.threadName,b=r.toOption,S=r.toSet,v=r.unsafeMake},989105:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsSym:()=>i,delete:()=>a,empty:()=>m,fiberRefs:()=>s,forkAs:()=>o,get:()=>c,getOrDefault:()=>l,joinAs:()=>u,setAll:()=>f,unsafeMake:()=>h,updateAs:()=>d,updateManyAs:()=>p});var r=n(789391);const i=r.FiberRefsSym,a=r.delete_,s=r.fiberRefs,o=r.forkAs,c=r.get,l=r.getOrDefault,u=r.joinAs,f=r.setAll,d=r.updateAs,p=r.updateManyAs,h=r.unsafeMake,m=r.empty},46755:(e,t,n)=>{n.r(t),n.d(t,{combine:()=>s,diff:()=>a,empty:()=>i,patch:()=>o});var r=n(392538);const i=r.empty,a=r.diff,s=r.combine,o=r.patch},285485:(e,t,n)=>{n.r(t),n.d(t,{FiberStatusTypeId:()=>y,done:()=>b,isDone:()=>E,isFiberStatus:()=>w,isRunning:()=>_,isSuspended:()=>k,running:()=>S,suspended:()=>v});var r=n(43977),i=n(361369),a=n(367337),s=n(856572);const o="effect/FiberStatus",c=Symbol.for(o),l="Done",u="Running",f="Suspended",d=a.string(`${o}-${l}`);class p{[c]=c;_tag=l;[a.symbol](){return d}[r.symbol](e){return g(e)&&e._tag===l}}class h{runtimeFlags;[c]=c;_tag=u;constructor(e){this.runtimeFlags=e}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===u&&this.runtimeFlags===e.runtimeFlags}}class m{runtimeFlags;blockingOn;[c]=c;_tag=f;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[a.symbol](){return(0,i.pipe)(a.hash(o),a.combine(a.hash(this._tag)),a.combine(a.hash(this.runtimeFlags)),a.combine(a.hash(this.blockingOn)),a.cached(this))}[r.symbol](e){return g(e)&&e._tag===f&&this.runtimeFlags===e.runtimeFlags&&r.equals(this.blockingOn,e.blockingOn)}}const g=e=>(0,s.hasProperty)(e,c),y=c,b=new p,S=e=>new h(e),v=(e,t)=>new m(e,t),w=g,E=e=>e._tag===l,_=e=>e._tag===u,k=e=>e._tag===f},361369:(e,t,n)=>{n.r(t),n.d(t,{SK:()=>_,absurd:()=>y,apply:()=>a,compose:()=>g,constFalse:()=>f,constNull:()=>d,constTrue:()=>u,constUndefined:()=>p,constVoid:()=>h,constant:()=>l,dual:()=>i,flip:()=>m,flow:()=>w,hole:()=>E,identity:()=>s,isFunction:()=>r,pipe:()=>v,satisfies:()=>o,tupled:()=>b,unsafeCoerce:()=>c,untupled:()=>S});const r=e=>"function"===typeof e,i=function(e,t){if("function"===typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,r){return arguments.length>=3?t(e,n,r):function(r){return t(r,e,n)}};case 4:return function(e,n,r,i){return arguments.length>=4?t(e,n,r,i):function(i){return t(i,e,n,r)}};case 5:return function(e,n,r,i,a){return arguments.length>=5?t(e,n,r,i,a):function(a){return t(a,e,n,r,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(e){return t(e,...n)}}}},a=e=>t=>t(e),s=e=>e,o=()=>e=>e,c=s,l=e=>()=>e,u=l(!0),f=l(!1),d=l(null),p=l(void 0),h=p,m=e=>(...t)=>(...n)=>e(...n)(...t),g=i(2,((e,t)=>n=>t(e(n)))),y=e=>{throw new Error("Called `absurd` function which should be uncallable")},b=e=>t=>e(...t),S=e=>(...t)=>e(t);function v(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return s(a(i(r(n(t(e))))));case 8:return o(s(a(i(r(n(t(e)))))));case 9:return c(o(s(a(i(r(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}function w(e,t,n,r,i,a,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(a(i(r(n(t(e.apply(this,arguments)))))))))}}}const E=c(y),_=(e,t)=>t},606517:(e,t,n)=>{n.r(t),n.d(t,{globalValue:()=>s});var r=n(853563);const i=Symbol.for(`effect/GlobalValue/globalStoreId/${r.getCurrentVersion()}`);i in globalThis||(globalThis[i]=new Map);const a=globalThis[i],s=(e,t)=>(a.has(e)||a.set(e,t()),a.get(e))},367337:(e,t,n)=>{n.r(t),n.d(t,{array:()=>b,cached:()=>S,combine:()=>f,hash:()=>l,isHash:()=>p,number:()=>h,optimize:()=>d,random:()=>u,string:()=>m,structure:()=>y,structureKeys:()=>g,symbol:()=>c});var r=n(361369),i=n(606517),a=n(856572),s=n(730276);const o=(0,i.globalValue)(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),c=Symbol.for("effect/Hash"),l=e=>{if(!0===s.structuralRegionState.enabled)return 0;switch(typeof e){case"number":return h(e);case"bigint":return m(e.toString(10));case"boolean":case"symbol":return m(String(e));case"string":return m(e);case"undefined":return m("undefined");case"function":case"object":return null===e?m("null"):e instanceof Date?l(e.toISOString()):p(e)?e[c]():u(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},u=e=>(o.has(e)||o.set(e,h(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),o.get(e)),f=e=>t=>53*t^e,d=e=>3221225471&e|e>>>1&1073741824,p=e=>(0,a.hasProperty)(e,c),h=e=>{if(e!==e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return d(e)},m=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return d(t)},g=(e,t)=>{let n=12289;for(let i=0;i<t.length;i++)n^=(0,r.pipe)(m(t[i]),f(l(e[t[i]])));return d(n)},y=e=>g(e,Object.keys(e)),b=e=>{let t=6151;for(let n=0;n<e.length;n++)t=(0,r.pipe)(t,f(l(e[n])));return d(t)},S=function(){if(1===arguments.length){const e=arguments[0];return function(t){return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,c,{value:()=>t,enumerable:!1}),t}},827964:(e,t,n)=>{n.r(t),n.d(t,{beginMutation:()=>E,compact:()=>P,empty:()=>s,endMutation:()=>_,entries:()=>S,filter:()=>L,filterMap:()=>D,findFirst:()=>U,flatMap:()=>C,forEach:()=>R,fromIterable:()=>c,get:()=>u,getHash:()=>f,has:()=>p,hasHash:()=>h,isEmpty:()=>l,isHashMap:()=>a,keySet:()=>y,keys:()=>g,make:()=>o,map:()=>M,modify:()=>T,modifyAt:()=>x,modifyHash:()=>I,mutate:()=>k,reduce:()=>F,remove:()=>A,removeMany:()=>N,set:()=>m,size:()=>w,toEntries:()=>v,union:()=>O,unsafeGet:()=>d,values:()=>b});var r=n(918799),i=n(722167);r.HashMapTypeId;const a=r.isHashMap,s=r.empty,o=r.make,c=r.fromIterable,l=r.isEmpty,u=r.get,f=r.getHash,d=r.unsafeGet,p=r.has,h=r.hasHash,m=r.set,g=r.keys,y=function(e){return(0,i.makeImpl)(e)},b=r.values,S=r.entries,v=e=>Array.from(S(e)),w=r.size,E=r.beginMutation,_=r.endMutation,k=r.mutate,x=r.modifyAt,I=r.modifyHash,T=r.modify,O=r.union,A=r.remove,N=r.removeMany,M=r.map,C=r.flatMap,R=r.forEach,F=r.reduce,L=r.filter,P=r.compact,D=r.filterMap,U=r.findFirst},227561:(e,t,n)=>{n.r(t),n.d(t,{add:()=>y,beginMutation:()=>h,difference:()=>S,empty:()=>a,endMutation:()=>m,every:()=>u,filter:()=>T,flatMap:()=>k,forEach:()=>x,fromIterable:()=>s,has:()=>c,intersection:()=>v,isHashSet:()=>i,isSubset:()=>f,make:()=>o,map:()=>_,mutate:()=>g,partition:()=>O,reduce:()=>I,remove:()=>b,size:()=>p,some:()=>l,toggle:()=>E,union:()=>w,values:()=>d});var r=n(722167);r.HashSetTypeId;const i=r.isHashSet,a=r.empty,s=r.fromIterable,o=r.make,c=r.has,l=r.some,u=r.every,f=r.isSubset,d=r.values,p=r.size,h=r.beginMutation,m=r.endMutation,g=r.mutate,y=r.add,b=r.remove,S=r.difference,v=r.intersection,w=r.union,E=r.toggle,_=r.map,k=r.flatMap,x=r.forEach,I=r.reduce,T=r.filter,O=r.partition},883845:(e,t,n)=>{n.r(t),n.d(t,{BaseProto:()=>o,Class:()=>c,NodeInspectSymbol:()=>i,format:()=>s,stringifyCircular:()=>u,toJSON:()=>a,toStringUnknown:()=>l});var r=n(856572);const i=Symbol.for("nodejs.util.inspect.custom"),a=e=>(0,r.hasProperty)(e,"toJSON")&&(0,r.isFunction)(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(a):e,s=e=>JSON.stringify(e,null,2),o={toJSON(){return a(this)},[i](){return this.toJSON()},toString(){return s(this.toJSON())}};class c{[i](){return this.toJSON()}toString(){return s(this.toJSON())}}const l=(e,t=2)=>{try{return"object"===typeof e?u(e,t):String(e)}catch(n){return String(e)}},u=(e,t)=>{let n=[];const r=JSON.stringify(e,((e,t)=>"object"===typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t),t);return n=void 0,r}},489425:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>h,append:()=>R,appendAll:()=>F,compact:()=>G,cons:()=>O,drop:()=>U,empty:()=>A,every:()=>j,filter:()=>W,filterMap:()=>V,findFirst:()=>J,flatMap:()=>H,forEach:()=>K,fromIterable:()=>M,getEquivalence:()=>g,head:()=>Y,isCons:()=>x,isList:()=>_,isNil:()=>k,last:()=>Z,make:()=>C,map:()=>Q,nil:()=>T,of:()=>N,partition:()=>X,partitionMap:()=>ee,prepend:()=>L,prependAll:()=>P,prependAllReversed:()=>D,reduce:()=>te,reduceRight:()=>ne,reverse:()=>re,size:()=>I,some:()=>q,splitAt:()=>ie,tail:()=>ae,take:()=>se,toArray:()=>m,toChunk:()=>oe,unsafeHead:()=>le,unsafeLast:()=>ue,unsafeTail:()=>fe});var r=n(562635),i=n(128420),a=n(757964),s=n(43977),o=n(235309),c=n(361369),l=n(367337),u=n(883845),f=n(977948),d=n(953533),p=n(856572);const h=Symbol.for("effect/List"),m=e=>r.fromIterable(e),g=e=>o.mapInput(r.getEquivalence(e),m),y=g(s.equals),b={[h]:h,_tag:"Cons",toString(){return(0,u.format)(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:m(this).map(u.toJSON)}},[u.NodeInspectSymbol](){return this.toJSON()},[s.symbol](e){return _(e)&&this._tag===e._tag&&y(this,e)},[l.symbol](){return l.cached(this,l.array(m(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return(0,d.pipeArguments)(this,arguments)}},S=(e,t)=>{const n=Object.create(b);return n.head=e,n.tail=t,n},v=l.string("Nil"),w={[h]:h,_tag:"Nil",toString(){return(0,u.format)(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[u.NodeInspectSymbol](){return this.toJSON()},[l.symbol]:()=>v,[s.symbol](e){return _(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return(0,d.pipeArguments)(this,arguments)}},E=Object.create(w),_=e=>(0,p.hasProperty)(e,h),k=e=>"Nil"===e._tag,x=e=>"Cons"===e._tag,I=e=>{let t=e,n=0;for(;!k(t);)n+=1,t=t.tail;return n},T=()=>E,O=(e,t)=>S(e,t),A=T,N=e=>S(e,E),M=e=>{const t=e[Symbol.iterator]();let n;if((n=t.next())&&!n.done){const e=S(n.value,E);let r=e;for(;(n=t.next())&&!n.done;){const e=S(n.value,E);r.tail=e,r=e}return e}return E},C=(...e)=>M(e),R=(0,c.dual)(2,((e,t)=>F(e,N(t)))),F=(0,c.dual)(2,((e,t)=>P(t,e))),L=(0,c.dual)(2,((e,t)=>O(t,e))),P=(0,c.dual)(2,((e,t)=>{if(k(e))return t;if(k(t))return e;{const n=S(t.head,e);let r=n,i=t.tail;for(;!k(i);){const t=S(i.head,e);r.tail=t,r=t,i=i.tail}return n}})),D=(0,c.dual)(2,((e,t)=>{let n=e,r=t;for(;x(r);)n=S(r.head,n),r=r.tail;return n})),U=(0,c.dual)(2,((e,t)=>{if(t<=0)return e;if(t>=I(e))return E;let n=e,r=0;for(;!k(n)&&r<t;)n=n.tail,r+=1;return n})),j=(0,c.dual)(2,((e,t)=>{for(const n of e)if(!t(n))return!1;return!0})),q=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);){if(t(n.head))return!0;n=n.tail}return!1})),W=(0,c.dual)(2,((e,t)=>B(e,t,!1))),B=(e,t,n)=>{for(;;){if(k(e))return E;if(t(e.head)!==n)return z(e,e.tail,t,n);e=e.tail}},z=(e,t,n,r)=>{for(;;){if(k(t))return e;if(n(t.head)===r)return $(e,t,n,r);t=t.tail}},$=(e,t,n,r)=>{const i=S(le(e),E);let a=fe(e),s=i;for(;a!==t;){const e=S(le(a),E);s.tail=e,s=(0,c.unsafeCoerce)(e),a=(0,c.unsafeCoerce)(a.tail)}let o=t.tail,l=(0,c.unsafeCoerce)(o);for(;!k(o);){if(n(le(o))!==r)o=o.tail;else{for(;l!==o;){const e=S(le(l),E);s.tail=e,s=e,l=(0,c.unsafeCoerce)(l.tail)}l=(0,c.unsafeCoerce)(o.tail),o=o.tail}}return k(l)||(s.tail=l),i},V=(0,c.dual)(2,((e,t)=>{const n=[];for(const r of e){const e=t(r);f.isSome(e)&&n.push(e.value)}return M(n)})),G=e=>V(e,c.identity),J=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);){if(t(n.head))return f.some(n.head);n=n.tail}return f.none()})),H=(0,c.dual)(2,((e,t)=>{let n,r,i=e;for(;!k(i);){let e=t(i.head);for(;!k(e);){const t=S(e.head,E);void 0===r?n=t:r.tail=t,r=t,e=e.tail}i=i.tail}return void 0===n?E:n})),K=(0,c.dual)(2,((e,t)=>{let n=e;for(;!k(n);)t(n.head),n=n.tail})),Y=e=>k(e)?f.none():f.some(e.head),Z=e=>k(e)?f.none():f.some(ue(e)),Q=(0,c.dual)(2,((e,t)=>{if(k(e))return e;{let n=0;const r=S(t(e.head,n++),E);let i=r,a=e.tail;for(;!k(a);){const e=S(t(a.head,n++),E);i.tail=e,i=e,a=a.tail}return r}})),X=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e)t(i)?r.push(i):n.push(i);return[M(n),M(r)]})),ee=(0,c.dual)(2,((e,t)=>{const n=[],r=[];for(const i of e){const e=t(i);a.isLeft(e)?n.push(e.left):r.push(e.right)}return[M(n),M(r)]})),te=(0,c.dual)(3,((e,t,n)=>{let r=t,i=e;for(;!k(i);)r=n(r,i.head),i=i.tail;return r})),ne=(0,c.dual)(3,((e,t,n)=>{let r=t,i=re(e);for(;!k(i);)r=n(r,i.head),i=i.tail;return r})),re=e=>{let t=A(),n=e;for(;!k(n);)t=L(t,n.head),n=n.tail;return t},ie=(0,c.dual)(2,((e,t)=>[se(e,t),U(e,t)])),ae=e=>k(e)?f.none():f.some(e.tail),se=(0,c.dual)(2,((e,t)=>{if(t<=0)return E;if(t>=I(e))return e;let n=C(le(e)),r=fe(e);for(let i=1;i<t;i++)n=S(le(r),n),r=fe(r);return re(n)})),oe=e=>i.fromIterable(e),ce="Expected List to be non-empty",le=e=>{if(k(e))throw new Error(ce);return e.head},ue=e=>{if(k(e))throw new Error(ce);let t=e,n=e.tail;for(;!k(n);)t=n,n=n.tail;return t.head},fe=e=>{if(k(e))throw new Error(ce);return e.tail}},934321:(e,t,n)=>{n.r(t),n.d(t,{All:()=>o,Debug:()=>d,Error:()=>l,Fatal:()=>c,Info:()=>f,None:()=>h,Order:()=>y,Trace:()=>p,Warning:()=>u,allLevels:()=>m,fromLiteral:()=>E,greaterThan:()=>v,greaterThanEqual:()=>w,lessThan:()=>b,lessThanEqual:()=>S,locally:()=>g});var r=n(361369),i=n(672620),a=n(804676),s=n(259877);const o=i.logLevelAll,c=i.logLevelFatal,l=i.logLevelError,u=i.logLevelWarning,f=i.logLevelInfo,d=i.logLevelDebug,p=i.logLevelTrace,h=i.logLevelNone,m=i.allLogLevels,g=(0,r.dual)(2,((e,t)=>i.fiberRefLocally(e,i.currentLogLevel,t))),y=(0,r.pipe)(a.Order,s.mapInput((e=>e.ordinal))),b=s.lessThan(y),S=s.lessThanOrEqualTo(y),v=s.greaterThan(y),w=s.greaterThanOrEqualTo(y),E=e=>{switch(e){case"All":return o;case"Debug":return d;case"Error":return l;case"Fatal":return c;case"Info":return f;case"Trace":return p;case"None":return h;case"Warning":return u}}},204971:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r,render:()=>i});const r=(e,t)=>({label:e,startTime:t}),i=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`},714349:(e,t,n)=>{n.r(t),n.d(t,{clear:()=>k,empty:()=>p,fromIterable:()=>m,get:()=>g,has:()=>b,make:()=>h,modify:()=>w,modifyAt:()=>E,remove:()=>_,set:()=>S,size:()=>x});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(953533);const l=Symbol.for("effect/MutableHashMap"),u={[l]:l,[Symbol.iterator](){return new f(this)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}};class f{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new d(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new f(this.self)}}class d{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){const e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const p=()=>{const e=Object.create(u);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},h=(...e)=>m(e),m=e=>{const t=p();for(const[n,r]of e)S(t,n,r);return t},g=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.has(t)?o.some(e.referential.get(t)):o.none();const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i?o.none():y(e,i,t)})),y=(e,t,n,i=!1)=>{for(let a=0,s=t.length;a<s;a++)if(n[r.symbol](t[a][0])){const n=t[a][1];return i&&(t.splice(a,1),e.bucketsSize--),o.some(n)}return o.none()},b=(0,i.dual)(2,((e,t)=>o.isSome(g(e,t)))),S=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.set(t,n),e;const i=t[a.symbol](),s=e.buckets.get(i);return void 0===s?(e.buckets.set(i,[[t,n]]),e.bucketsSize++,e):(v(e,s,t),s.push([t,n]),e.bucketsSize++,e)})),v=(e,t,n)=>{for(let i=0,a=t.length;i<a;i++)if(n[r.symbol](t[i][0]))return t.splice(i,1),void e.bucketsSize--},w=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t))return e.referential.has(t)&&e.referential.set(t,n(e.referential.get(t))),e;const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s)return e;const c=y(e,s,t,!0);return o.isNone(c)||(s.push([t,n(c.value)]),e.bucketsSize++),e})),E=(0,i.dual)(3,((e,t,n)=>{if(!1===r.isEqual(t)){const r=n(g(e,t));return o.isSome(r)?S(e,t,r.value):_(e,t),e}const i=t[a.symbol](),s=e.buckets.get(i);if(void 0===s){const r=n(o.none());return o.isSome(r)?S(e,t,r.value):e}const c=n(y(e,s,t,!0));return o.isNone(c)?(0===s.length&&e.buckets.delete(i),e):(s.push([t,c.value]),e.bucketsSize++,e)})),_=(0,i.dual)(2,((e,t)=>{if(!1===r.isEqual(t))return e.referential.delete(t),e;const n=t[a.symbol](),i=e.buckets.get(n);return void 0===i||(v(e,i,t),0===i.length&&e.buckets.delete(n)),e})),k=e=>(e.referential.clear(),e.buckets.clear(),e.bucketsSize=0,e),x=e=>e.referential.size+e.bucketsSize},645914:(e,t,n)=>{n.r(t),n.d(t,{compareAndSet:()=>u,decrement:()=>f,decrementAndGet:()=>d,get:()=>p,getAndDecrement:()=>h,getAndIncrement:()=>m,getAndSet:()=>g,getAndUpdate:()=>y,increment:()=>b,incrementAndGet:()=>S,make:()=>l,set:()=>v,setAndGet:()=>w,toggle:()=>k,update:()=>E,updateAndGet:()=>_});var r=n(43977),i=n(361369),a=n(883845),s=n(953533);const o=Symbol.for("effect/MutableRef"),c={[o]:o,toString(){return(0,a.format)(this.toJSON())},toJSON(){return{_id:"MutableRef",current:(0,a.toJSON)(this.current)}},[a.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,s.pipeArguments)(this,arguments)}},l=e=>{const t=Object.create(c);return t.current=e,t},u=i.dual(3,((e,t,n)=>!!r.equals(t,e.current)&&(e.current=n,!0))),f=e=>E(e,(e=>e-1)),d=e=>_(e,(e=>e-1)),p=e=>e.current,h=e=>y(e,(e=>e-1)),m=e=>y(e,(e=>e+1)),g=i.dual(2,((e,t)=>{const n=e.current;return e.current=t,n})),y=i.dual(2,((e,t)=>g(e,t(p(e))))),b=e=>E(e,(e=>e+1)),S=e=>_(e,(e=>e+1)),v=i.dual(2,((e,t)=>(e.current=t,e))),w=i.dual(2,((e,t)=>(e.current=t,e.current))),E=i.dual(2,((e,t)=>v(e,t(p(e))))),_=i.dual(2,((e,t)=>w(e,t(p(e))))),k=e=>E(e,(e=>!e))},804676:(e,t,n)=>{n.r(t),n.d(t,{Equivalence:()=>m,Order:()=>g,between:()=>w,clamp:()=>E,decrement:()=>h,divide:()=>f,greaterThan:()=>S,greaterThanOrEqualTo:()=>v,increment:()=>p,isNumber:()=>o,lessThan:()=>y,lessThanOrEqualTo:()=>b,max:()=>k,min:()=>_,multiply:()=>l,multiplyAll:()=>T,nextPow2:()=>A,parse:()=>N,remainder:()=>O,sign:()=>x,subtract:()=>u,sum:()=>c,sumAll:()=>I,unsafeDivide:()=>d});var r=n(235309),i=n(361369),a=n(8578),s=n(259877);const o=n(856572).isNumber,c=(0,i.dual)(2,((e,t)=>e+t)),l=(0,i.dual)(2,((e,t)=>e*t)),u=(0,i.dual)(2,((e,t)=>e-t)),f=(0,i.dual)(2,((e,t)=>0===t?a.none:a.some(e/t))),d=(0,i.dual)(2,((e,t)=>e/t)),p=e=>e+1,h=e=>e-1,m=r.number,g=s.number,y=s.lessThan(g),b=s.lessThanOrEqualTo(g),S=s.greaterThan(g),v=s.greaterThanOrEqualTo(g),w=s.between(g),E=s.clamp(g),_=s.min(g),k=s.max(g),x=e=>g(e,0),I=e=>{let t=0;for(const n of e)t+=n;return t},T=e=>{let t=1;for(const n of e){if(0===n)return 0;t*=n}return t},O=(0,i.dual)(2,((e,t)=>{const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)})),A=e=>{const t=Math.ceil(Math.log(e)/Math.log(2));return Math.max(Math.pow(2,t),2)},N=e=>{if("NaN"===e)return a.some(NaN);if("Infinity"===e)return a.some(1/0);if("-Infinity"===e)return a.some(-1/0);if(""===e.trim())return a.none;const t=Number(e);return Number.isNaN(t)?a.none:a.some(t)}},977948:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>de,TypeId:()=>f,all:()=>H,andThen:()=>j,ap:()=>Y,as:()=>L,asVoid:()=>P,bind:()=>fe,bindTo:()=>le,composeK:()=>z,contains:()=>oe,containsWith:()=>se,exists:()=>ce,filter:()=>te,filterMap:()=>ee,firstSomeOf:()=>I,flatMap:()=>U,flatMapNullable:()=>q,flatten:()=>W,fromIterable:()=>S,fromNullable:()=>T,gen:()=>he,getEquivalence:()=>ne,getLeft:()=>w,getOrElse:()=>E,getOrNull:()=>A,getOrThrow:()=>R,getOrThrowWith:()=>C,getOrUndefined:()=>N,getOrder:()=>re,getRight:()=>v,isNone:()=>m,isOption:()=>h,isSome:()=>g,let:()=>ue,lift2:()=>ie,liftNullable:()=>O,liftPredicate:()=>ae,liftThrowable:()=>M,map:()=>F,match:()=>y,none:()=>d,orElse:()=>_,orElseEither:()=>x,orElseSome:()=>k,partitionMap:()=>X,product:()=>G,productMany:()=>J,reduceCompact:()=>Z,some:()=>p,tap:()=>V,toArray:()=>Q,toRefinement:()=>b,void:()=>D,zipLeft:()=>$,zipRight:()=>B,zipWith:()=>K});var r=n(43977),i=n(235309),a=n(361369),s=n(91276),o=n(609018),c=n(8578),l=n(259877),u=n(730276);const f=Symbol.for("effect/Option"),d=()=>c.none,p=c.some,h=c.isOption,m=c.isNone,g=c.isSome,y=(0,a.dual)(2,((e,{onNone:t,onSome:n})=>m(e)?t():n(e.value))),b=e=>t=>g(e(t)),S=e=>{for(const t of e)return p(t);return d()},v=o.getRight,w=o.getLeft,E=(0,a.dual)(2,((e,t)=>m(e)?t():e.value)),_=(0,a.dual)(2,((e,t)=>m(e)?t():e)),k=(0,a.dual)(2,((e,t)=>m(e)?p(t()):e)),x=(0,a.dual)(2,((e,t)=>m(e)?F(t(),o.right):F(e,o.left))),I=e=>{let t=d();for(t of e)if(g(t))return t;return t},T=e=>null==e?d():p(e),O=e=>(...t)=>T(e(...t)),A=E(a.constNull),N=E(a.constUndefined),M=e=>(...t)=>{try{return p(e(...t))}catch(n){return d()}},C=(0,a.dual)(2,((e,t)=>{if(g(e))return e.value;throw t()})),R=C((()=>new Error("getOrThrow called on a None"))),F=(0,a.dual)(2,((e,t)=>m(e)?d():p(t(e.value)))),L=(0,a.dual)(2,((e,t)=>F(e,(()=>t)))),P=L(void 0),D=p(void 0),U=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),j=(0,a.dual)(2,((e,t)=>U(e,(e=>{const n=(0,a.isFunction)(t)?t(e):t;return h(n)?n:p(n)})))),q=(0,a.dual)(2,((e,t)=>m(e)?d():T(t(e.value)))),W=U(a.identity),B=(0,a.dual)(2,((e,t)=>U(e,(()=>t)))),z=(0,a.dual)(2,((e,t)=>n=>U(e(n),t))),$=(0,a.dual)(2,((e,t)=>V(e,(()=>t)))),V=(0,a.dual)(2,((e,t)=>U(e,(e=>F(t(e),(()=>e)))))),G=(e,t)=>g(e)&&g(t)?p([e.value,t.value]):d(),J=(e,t)=>{if(m(e))return d();const n=[e.value];for(const r of t){if(m(r))return d();n.push(r.value)}return p(n)},H=e=>{if(Symbol.iterator in e){const t=[];for(const n of e){if(m(n))return d();t.push(n.value)}return p(t)}const t={};for(const n of Object.keys(e)){const r=e[n];if(m(r))return d();t[n]=r.value}return p(t)},K=(0,a.dual)(3,((e,t,n)=>F(G(e,t),(([e,t])=>n(e,t))))),Y=(0,a.dual)(2,((e,t)=>K(e,t,((e,t)=>e(t))))),Z=(0,a.dual)(3,((e,t,n)=>{let r=t;for(const i of e)g(i)&&(r=n(r,i.value));return r})),Q=e=>m(e)?[]:[e.value],X=(0,a.dual)(2,((e,t)=>{if(m(e))return[d(),d()];const n=t(e.value);return o.isLeft(n)?[p(n.left),d()]:[d(),p(n.right)]})),ee=(0,a.dual)(2,((e,t)=>m(e)?d():t(e.value))),te=(0,a.dual)(2,((e,t)=>ee(e,(e=>t(e)?c.some(e):c.none)))),ne=e=>i.make(((t,n)=>m(t)?m(n):!m(n)&&e(t.value,n.value))),re=e=>l.make(((t,n)=>g(t)?g(n)?e(t.value,n.value):1:-1)),ie=e=>(0,a.dual)(2,((t,n)=>K(t,n,e))),ae=(0,a.dual)(2,((e,t)=>t(e)?p(e):d())),se=e=>(0,a.dual)(2,((t,n)=>!m(t)&&e(t.value,n))),oe=se(r.equivalence()),ce=(0,a.dual)(2,((e,t)=>!m(e)&&t(e.value))),le=s.bindTo(F),ue=s.let_(F),fe=s.bind(F,U),de=p({}),pe=u.adapter(),he=(...e)=>{let t;t=1===e.length?e[0]:e[1].bind(e[0]);const n=t(pe);let r=n.next();if(r.done)return p(r.value);{let e=r.value;if(e=u.isGenKind(e)?e.value:u.yieldWrapGet(e),m(e))return e;for(;!r.done;)if(r=n.next(e.value),!r.done&&(e=r.value,e=u.isGenKind(e)?e.value:u.yieldWrapGet(e),m(e)))return e;return p(r.value)}}},259877:(e,t,n)=>{n.r(t),n.d(t,{Date:()=>m,all:()=>y,array:()=>v,between:()=>A,bigint:()=>c,boolean:()=>o,clamp:()=>O,combine:()=>u,combineAll:()=>p,combineMany:()=>f,empty:()=>d,greaterThan:()=>_,greaterThanOrEqualTo:()=>x,lessThan:()=>E,lessThanOrEqualTo:()=>k,make:()=>i,mapInput:()=>h,max:()=>T,min:()=>I,number:()=>s,product:()=>g,productMany:()=>b,reverse:()=>l,string:()=>a,struct:()=>w,tuple:()=>S});var r=n(361369);const i=e=>(t,n)=>t===n?0:e(t,n),a=i(((e,t)=>e<t?-1:1)),s=i(((e,t)=>e<t?-1:1)),o=i(((e,t)=>e<t?-1:1)),c=i(((e,t)=>e<t?-1:1)),l=e=>i(((t,n)=>e(n,t))),u=(0,r.dual)(2,((e,t)=>i(((n,r)=>{const i=e(n,r);return 0!==i?i:t(n,r)})))),f=(0,r.dual)(2,((e,t)=>i(((n,r)=>{let i=e(n,r);if(0!==i)return i;for(const e of t)if(i=e(n,r),0!==i)return i;return i})))),d=()=>i((()=>0)),p=e=>f(d(),e),h=(0,r.dual)(2,((e,t)=>i(((n,r)=>e(t(n),t(r)))))),m=h(s,(e=>e.getTime())),g=(0,r.dual)(2,((e,t)=>i((([n,r],[i,a])=>{const s=e(n,i);return 0!==s?s:t(r,a)})))),y=e=>i(((t,n)=>{const r=Math.min(t.length,n.length);let i=0;for(const a of e){if(i>=r)break;const e=a(t[i],n[i]);if(0!==e)return e;i++}return 0})),b=(0,r.dual)(2,((e,t)=>{const n=y(t);return i(((t,r)=>{const i=e(t[0],r[0]);return 0!==i?i:n(t.slice(1),r.slice(1))}))})),S=(...e)=>y(e),v=e=>i(((t,n)=>{const r=t.length,i=n.length,a=Math.min(r,i);for(let s=0;s<a;s++){const r=e(t[s],n[s]);if(0!==r)return r}return s(r,i)})),w=e=>{const t=Object.keys(e);return i(((n,r)=>{for(const i of t){const t=e[i](n[i],r[i]);if(0!==t)return t}return 0}))},E=e=>(0,r.dual)(2,((t,n)=>-1===e(t,n))),_=e=>(0,r.dual)(2,((t,n)=>1===e(t,n))),k=e=>(0,r.dual)(2,((t,n)=>1!==e(t,n))),x=e=>(0,r.dual)(2,((t,n)=>-1!==e(t,n))),I=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)<1?t:n)),T=e=>(0,r.dual)(2,((t,n)=>t===n||e(t,n)>-1?t:n)),O=e=>(0,r.dual)(2,((t,n)=>I(e)(n.maximum,T(e)(n.minimum,t)))),A=e=>(0,r.dual)(2,((t,n)=>!E(e)(t,n.minimum)&&!_(e)(t,n.maximum)))},953533:(e,t,n)=>{n.r(t),n.d(t,{pipeArguments:()=>r});const r=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,r=t.length;e<r;e++)n=t[e](n);return n}}}},856572:(e,t,n)=>{n.r(t),n.d(t,{all:()=>U,and:()=>$,compose:()=>P,eqv:()=>G,every:()=>Y,hasProperty:()=>k,implies:()=>J,isBigInt:()=>p,isBoolean:()=>d,isDate:()=>N,isError:()=>O,isFunction:()=>m,isIterable:()=>M,isMap:()=>l,isNever:()=>v,isNotNull:()=>S,isNotNullable:()=>T,isNotUndefined:()=>y,isNull:()=>b,isNullable:()=>I,isNumber:()=>f,isObject:()=>_,isPromise:()=>F,isPromiseLike:()=>L,isReadonlyRecord:()=>R,isRecord:()=>C,isSet:()=>c,isString:()=>u,isSymbol:()=>h,isTagged:()=>x,isTruthy:()=>o,isTupleOf:()=>a,isTupleOfAtLeast:()=>s,isUint8Array:()=>A,isUndefined:()=>g,isUnknown:()=>w,mapInput:()=>i,nand:()=>K,nor:()=>H,not:()=>B,or:()=>z,product:()=>D,productMany:()=>j,some:()=>Z,struct:()=>W,tuple:()=>q,xor:()=>V});var r=n(361369);const i=(0,r.dual)(2,((e,t)=>n=>e(t(n)))),a=(0,r.dual)(2,((e,t)=>e.length===t)),s=(0,r.dual)(2,((e,t)=>e.length>=t)),o=e=>!!e,c=e=>e instanceof Set,l=e=>e instanceof Map,u=e=>"string"===typeof e,f=e=>"number"===typeof e,d=e=>"boolean"===typeof e,p=e=>"bigint"===typeof e,h=e=>"symbol"===typeof e,m=r.isFunction,g=e=>void 0===e,y=e=>void 0!==e,b=e=>null===e,S=e=>null!==e,v=e=>!1,w=e=>!0,E=e=>"object"===typeof e&&null!==e,_=e=>E(e)||m(e),k=(0,r.dual)(2,((e,t)=>_(e)&&t in e)),x=(0,r.dual)(2,((e,t)=>k(e,"_tag")&&e._tag===t)),I=e=>null===e||void 0===e,T=e=>null!==e&&void 0!==e,O=e=>e instanceof Error,A=e=>e instanceof Uint8Array,N=e=>e instanceof Date,M=e=>k(e,Symbol.iterator),C=e=>E(e)&&!Array.isArray(e),R=C,F=e=>k(e,"then")&&"catch"in e&&m(e.then)&&m(e.catch),L=e=>k(e,"then")&&m(e.then),P=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),D=(e,t)=>([n,r])=>e(n)&&t(r),U=e=>t=>{let n=0;for(const r of e){if(n>=t.length)break;if(!1===r(t[n]))return!1;n++}return!0},j=(e,t)=>{const n=U(t);return([t,...r])=>!1!==e(t)&&n(r)},q=(...e)=>U(e),W=e=>{const t=Object.keys(e);return n=>{for(const r of t)if(!e[r](n[r]))return!1;return!0}},B=e=>t=>!e(t),z=(0,r.dual)(2,((e,t)=>n=>e(n)||t(n))),$=(0,r.dual)(2,((e,t)=>n=>e(n)&&t(n))),V=(0,r.dual)(2,((e,t)=>n=>e(n)!==t(n))),G=(0,r.dual)(2,((e,t)=>n=>e(n)===t(n))),J=(0,r.dual)(2,((e,t)=>n=>!e(n)||t(n))),H=(0,r.dual)(2,((e,t)=>n=>!(e(n)||t(n)))),K=(0,r.dual)(2,((e,t)=>n=>!(e(n)&&t(n)))),Y=e=>t=>{for(const n of e)if(!n(t))return!1;return!0},Z=e=>t=>{for(const n of e)if(n(t))return!0;return!1}},220209:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>o,isReadable:()=>c,make:()=>u,map:()=>f,mapEffect:()=>d,unwrap:()=>p});var r=n(361369),i=n(672620),a=n(953533),s=n(856572);const o=Symbol.for("effect/Readable"),c=e=>(0,s.hasProperty)(e,o),l={[o]:o,pipe(){return(0,a.pipeArguments)(this,arguments)}},u=e=>{const t=Object.create(l);return t.get=e,t},f=(0,r.dual)(2,((e,t)=>u(i.map(e.get,t)))),d=(0,r.dual)(2,((e,t)=>u(i.flatMap(e.get,t)))),p=e=>u(i.flatMap(e,(e=>e.get)))},55040:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>i,get:()=>s,getAndSet:()=>o,getAndUpdate:()=>c,getAndUpdateSome:()=>l,make:()=>a,modify:()=>u,modifySome:()=>f,set:()=>d,setAndGet:()=>p,unsafeMake:()=>b,update:()=>h,updateAndGet:()=>m,updateSome:()=>g,updateSomeAndGet:()=>y});var r=n(361974);const i=r.RefTypeId,a=r.make,s=r.get,o=r.getAndSet,c=r.getAndUpdate,l=r.getAndUpdateSome,u=r.modify,f=r.modifySome,d=r.set,p=r.setAndGet,h=r.update,m=r.updateAndGet,g=r.updateSome,y=r.updateSomeAndGet,b=r.unsafeMake},128202:(e,t,n)=>{n.r(t),n.d(t,{andThen:()=>h,both:()=>m,disable:()=>c,disabledSet:()=>v,either:()=>g,empty:()=>a,enable:()=>o,enabledSet:()=>S,exclude:()=>y,includes:()=>p,inverse:()=>b,isActive:()=>u,isDisabled:()=>d,isEmpty:()=>l,isEnabled:()=>f,make:()=>s,render:()=>w});var r=n(66932),i=n(848464);const a=i.empty,s=i.make,o=i.enable,c=i.disable,l=i.isEmpty,u=i.isActive,f=i.isEnabled,d=i.isDisabled,p=i.isActive,h=i.andThen,m=i.both,g=i.either,y=i.exclude,b=i.inverse,S=r.enabledSet,v=r.disabledSet,w=r.renderPatch},530714:(e,t,n)=>{n.r(t),n.d(t,{continue:()=>o,continueWith:()=>c,done:()=>l,isContinue:()=>u,isDone:()=>f});var r=n(128420),i=n(490544);const a="Continue",s="Done",o=e=>({_tag:a,intervals:e}),c=e=>({_tag:a,intervals:i.make(r.of(e))}),l={_tag:s},u=e=>e._tag===a,f=e=>e._tag===s},779100:(e,t,n)=>{n.r(t),n.d(t,{IntervalTypeId:()=>m,after:()=>I,before:()=>T,empty:()=>y,intersect:()=>_,isEmpty:()=>w,isNonEmpty:()=>E,lessThan:()=>b,make:()=>g,max:()=>v,min:()=>S,size:()=>k,union:()=>x});var r=n(284073),i=n(361369),a=n(977948);const s=Symbol.for("effect/ScheduleInterval"),o={[s]:s,startMillis:0,endMillis:0},c=(e,t)=>e>t?o:{[s]:s,startMillis:e,endMillis:t},l=(0,i.dual)(2,((e,t)=>u(e,t)===e)),u=(0,i.dual)(2,((e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t)),f=(0,i.dual)(2,((e,t)=>u(e,t)===e?t:e)),d=e=>e.startMillis>=e.endMillis,p=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return c(n,r)})),h=(0,i.dual)(2,((e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return n<r?a.none():a.some(c(n,r))})),m=s,g=c,y=o,b=l,S=u,v=f,w=d,E=e=>!d(e),_=p,k=e=>r.millis(e.endMillis-e.startMillis),x=h,I=e=>c(e,Number.POSITIVE_INFINITY),T=e=>c(Number.NEGATIVE_INFINITY,e)},490544:(e,t,n)=>{n.r(t),n.d(t,{IntervalsTypeId:()=>b,empty:()=>v,end:()=>x,fromIterable:()=>w,intersect:()=>_,isNonEmpty:()=>T,lessThan:()=>I,make:()=>S,max:()=>O,start:()=>k,union:()=>E});var r=n(128420),i=n(361369),a=n(977948),s=n(779100),o=n(94732);const c=Symbol.for("effect/ScheduleIntervals"),l=e=>({[c]:c,intervals:e}),u=l(r.empty()),f=(0,i.dual)(2,((e,t)=>r.isNonEmpty(t.intervals)?r.isNonEmpty(e.intervals)?r.headNonEmpty(e.intervals).startMillis<r.headNonEmpty(t.intervals).startMillis?d(r.tailNonEmpty(e.intervals),t.intervals,r.headNonEmpty(e.intervals),r.empty()):d(e.intervals,r.tailNonEmpty(t.intervals),r.headNonEmpty(t.intervals),r.empty()):t:e)),d=(e,t,n,a)=>{let c=e,u=t,f=n,d=a;for(;r.isNonEmpty(c)||r.isNonEmpty(u);)if(!r.isNonEmpty(c)&&r.isNonEmpty(u))f.endMillis<r.headNonEmpty(u).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(u),u=r.tailNonEmpty(u),c=r.empty()):(f=s.make(f.startMillis,r.headNonEmpty(u).endMillis),u=r.tailNonEmpty(u),c=r.empty());else if(r.isNonEmpty(c)&&r.isEmpty(u))f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),u=r.empty(),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),u=r.empty(),c=r.tailNonEmpty(c));else{if(!r.isNonEmpty(c)||!r.isNonEmpty(u))throw new Error((0,o.getBugErrorMessage)("Intervals.unionLoop"));r.headNonEmpty(c).startMillis<r.headNonEmpty(u).startMillis?f.endMillis<r.headNonEmpty(c).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(c),c=r.tailNonEmpty(c)):(f=s.make(f.startMillis,r.headNonEmpty(c).endMillis),c=r.tailNonEmpty(c)):f.endMillis<r.headNonEmpty(u).startMillis?(d=(0,i.pipe)(d,r.prepend(f)),f=r.headNonEmpty(u),u=r.tailNonEmpty(u)):(f=s.make(f.startMillis,r.headNonEmpty(u).endMillis),u=r.tailNonEmpty(u))}return l((0,i.pipe)(d,r.prepend(f),r.reverse))},p=(0,i.dual)(2,((e,t)=>h(e.intervals,t.intervals,r.empty()))),h=(e,t,n)=>{let a=e,o=t,c=n;for(;r.isNonEmpty(a)&&r.isNonEmpty(o);){const e=(0,i.pipe)(r.headNonEmpty(a),s.intersect(r.headNonEmpty(o))),t=s.isEmpty(e)?c:(0,i.pipe)(c,r.prepend(e));(0,i.pipe)(r.headNonEmpty(a),s.lessThan(r.headNonEmpty(o)))?a=r.tailNonEmpty(a):o=r.tailNonEmpty(o),c=t}return l(r.reverse(c))},m=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).startMillis,g=(0,i.dual)(2,((e,t)=>m(e)<m(t))),y=(0,i.dual)(2,((e,t)=>g(e,t)?t:e)),b=c,S=l,v=u,w=e=>Array.from(e).reduce(((e,t)=>(0,i.pipe)(e,f(l(r.of(t))))),u),E=f,_=p,k=m,x=e=>(0,i.pipe)(e.intervals,r.head,a.getOrElse((()=>s.empty))).endMillis,I=g,T=e=>r.isNonEmpty(e.intervals),O=y},71108:(e,t,n)=>{n.r(t),n.d(t,{ControlledScheduler:()=>u,MixedScheduler:()=>o,PriorityBuckets:()=>s,SyncScheduler:()=>l,currentScheduler:()=>y,defaultScheduler:()=>c,defaultShouldYield:()=>d,make:()=>p,makeBatched:()=>h,makeMatrix:()=>f,timer:()=>m,timerBatched:()=>g,withScheduler:()=>b});var r=n(361369),i=n(606517),a=n(672620);class s{buckets=[];scheduleTask(e,t){let n,r;for(r=0;r<this.buckets.length&&this.buckets[r][0]<=t;r++)n=this.buckets[r];if(n)n[1].push(e);else{const n=[];for(let e=0;e<r;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=r;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class o{maxNextTickBeforeTimer;running=!1;tasks=new s;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let e=0;e<r.length;e++)r[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout((()=>this.starveInternal(0)),0):Promise.resolve(void 0).then((()=>this.starveInternal(e+1)))}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}const c=(0,i.globalValue)(Symbol.for("effect/Scheduler/defaultScheduler"),(()=>new o(2048)));class l{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}this.deferred=!0}}class u{tasks=new s;deferred=!1;scheduleTask(e,t){this.deferred?c.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority)}step(){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]()}}const f=(...e)=>{const t=e.sort((([e],[t])=>e<t?-1:e>t?1:0));return{shouldYield(t){for(const n of e){const e=n[1].shouldYield(t);if(!1!==e)return e}return!1},scheduleTask(e,n){let r;for(const i of t){if(!(n>=i[0]))return(r??c).scheduleTask(e,n);r=i[1]}return(r??c).scheduleTask(e,n)}}},d=e=>e.currentOpCount>e.getFiberRef(a.currentMaxOpsBeforeYield)&&e.getFiberRef(a.currentSchedulingPriority),p=(e,t=d)=>({scheduleTask:e,shouldYield:t}),h=(e,t=d)=>{let n=!1;const r=new s,i=()=>{const e=r.buckets;r.buckets=[];for(const[t,n]of e)for(let e=0;e<n.length;e++)n[e]();0===r.buckets.length?n=!1:a()},a=()=>e(i);return p(((e,t)=>{r.scheduleTask(e,t),n||(n=!0,a())}),t)},m=(e,t=d)=>p((t=>setTimeout(t,e)),t),g=(e,t=d)=>h((t=>setTimeout(t,e)),t),y=(0,i.globalValue)(Symbol.for("effect/FiberRef/currentScheduler"),(()=>a.fiberRefUnsafeMake(c))),b=(0,r.dual)(2,((e,t)=>a.fiberRefLocally(e,y,t)))},908993:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>s,Scope:()=>o,ScopeTypeId:()=>a,addFinalizer:()=>c,addFinalizerExit:()=>l,close:()=>u,extend:()=>f,fork:()=>d,make:()=>h,use:()=>p});var r=n(672620),i=n(858657);const a=r.ScopeTypeId,s=r.CloseableScopeTypeId,o=i.scopeTag,c=r.scopeAddFinalizer,l=r.scopeAddFinalizerExit,u=r.scopeClose,f=i.scopeExtend,d=r.scopeFork,p=i.scopeUse,h=i.scopeMake},730276:(e,t,n)=>{n.r(t),n.d(t,{GenKindImpl:()=>l,GenKindTypeId:()=>o,PCGRandom:()=>p,SingleShotGen:()=>u,YieldWrap:()=>g,YieldWrapTypeId:()=>m,adapter:()=>d,internalCall:()=>v,isGenKind:()=>c,makeGenKind:()=>f,structuralRegion:()=>S,structuralRegionState:()=>b,yieldWrapGet:()=>y});var r=n(361369),i=n(606517),a=n(94732),s=n(856572);const o=Symbol.for("effect/Gen/GenKind"),c=e=>(0,s.isObject)(e)&&o in e;class l{value;constructor(e){this.value=e}get _F(){return r.identity}get _R(){return e=>e}get _O(){return e=>e}get _E(){return e=>e}[o]=o;[Symbol.iterator](){return new u(this)}}class u{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new u(this.self)}}const f=e=>new l(e),d=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new l(e)};class p{_state;constructor(e,t,n,r){return(0,s.isNullable)(t)&&(0,s.isNullable)(e)?(t=4294967295*Math.random()>>>0,e=0):(0,s.isNullable)(t)&&(t=e,e=0),(0,s.isNullable)(r)&&(0,s.isNullable)(n)?(r=this._state?this._state[3]:4150755663,n=this._state?this._state[2]:335903614):(0,s.isNullable)(r)&&(r=n,n=0),this._state=new Int32Array([0,0,n>>>0,(1|(r||0))>>>0]),this._next(),h(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(0===((e>>>=0)&e-1))return this._next()&e-1;let t=0;const n=(-e>>>0)%e>>>0;for(t=this._next();t<n;t=this._next());return t%e}number(){return(134217728*(1*(67108863&this._next()))+1*(134217727&this._next()))/9007199254740992}_next(){const e=this._state[0]>>>0,t=this._state[1]>>>0;!function(e,t,n,r,i){let a=(n>>>16)*(65535&i)>>>0,s=(65535&n)*(i>>>16)>>>0,o=(65535&n)*(65535&i)>>>0,c=(n>>>16)*(i>>>16)+((s>>>16)+(a>>>16))>>>0;s=s<<16>>>0,o=o+s>>>0,o>>>0<s>>>0&&(c=c+1>>>0);a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(c=c+1>>>0);c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,i)>>>0,e[0]=c,e[1]=o}(this._state,e,t,1481765933,1284865837),h(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=e>>>18,r=(t>>>18|e<<14)>>>0;n=(n^e)>>>0,r=(r^t)>>>0;const i=(r>>>27|n<<5)>>>0,a=e>>>27;return(i>>>a|i<<((-a>>>0&31)>>>0))>>>0}}function h(e,t,n,r,i){let a=t+r>>>0;const s=n+i>>>0;s>>>0<n>>>0&&(a=a+1|0),e[0]=a,e[1]=s}const m=Symbol.for("effect/Utils/YieldWrap");class g{#e;constructor(e){this.#e=e}[m](){return this.#e}}function y(e){if("object"===typeof e&&null!==e&&m in e)return e[m]();throw new Error((0,a.getBugErrorMessage)("yieldWrapGet"))}const b=(0,i.globalValue)("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),S=(e,t)=>{const n=b.enabled,r=b.tester;b.enabled=!0,t&&(b.tester=t);try{return e()}finally{b.enabled=n,b.tester=r}},v=(e=>{const t={[e]:e=>e()};return function(n){return t[e](n)}})("effect_internal_function")},611174:(e,t,n)=>{n.r(t),n.d(t,{isNonEmptyArray:()=>r});const r=e=>e.length>0},668481:(e,t,n)=>{n.r(t),n.d(t,{EntryTypeId:()=>v,MapRequestResolversReducer:()=>h,RequestBlockParallelTypeId:()=>x,SequentialCollectionTypeId:()=>L,empty:()=>u,flatten:()=>y,isEntry:()=>_,makeEntry:()=>k,mapRequestResolvers:()=>m,par:()=>f,parallelCollectionAdd:()=>N,parallelCollectionCombine:()=>M,parallelCollectionEmpty:()=>O,parallelCollectionIsEmpty:()=>C,parallelCollectionKeys:()=>R,parallelCollectionMake:()=>A,parallelCollectionToSequentialCollection:()=>F,reduce:()=>g,seq:()=>d,sequentialCollectionCombine:()=>j,sequentialCollectionIsEmpty:()=>q,sequentialCollectionKeys:()=>W,sequentialCollectionMake:()=>U,sequentialCollectionToChunk:()=>B,single:()=>p});var r=n(128420),i=n(757964),a=n(43977),s=n(827964),o=n(489425),c=n(977948),l=n(856572);const u={_tag:"Empty"},f=(e,t)=>({_tag:"Par",left:e,right:t}),d=(e,t)=>({_tag:"Seq",left:e,right:t}),p=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t}),h=e=>({emptyCase:()=>u,parCase:(e,t)=>f(e,t),seqCase:(e,t)=>d(e,t),singleCase:(t,n)=>p(e(t),n)}),m=(e,t)=>g(e,h(t)),g=(e,t)=>{let n=o.of(e),r=o.empty();for(;o.isCons(n);){const e=n.head;switch(e._tag){case"Empty":r=o.cons(i.right(t.emptyCase()),r),n=n.tail;break;case"Par":r=o.cons(i.left({_tag:"ParCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Seq":r=o.cons(i.left({_tag:"SeqCase"}),r),n=o.cons(e.left,o.cons(e.right,n.tail));break;case"Single":{const a=t.singleCase(e.dataSource,e.blockedRequest);r=o.cons(i.right(a),r),n=n.tail;break}}}const a=o.reduce(r,o.empty(),((e,n)=>{switch(n._tag){case"Left":{const r=o.unsafeHead(e),i=o.unsafeHead(o.unsafeTail(e)),a=o.unsafeTail(o.unsafeTail(e));switch(n.left._tag){case"ParCase":return o.cons(t.parCase(r,i),a);case"SeqCase":return o.cons(t.seqCase(r,i),a)}}case"Right":return o.cons(n.right,e)}}));if(o.isNil(a))throw new Error("BUG: BlockedRequests.reduce - please report an issue at https://github.com/Effect-TS/effect/issues");return a.head},y=e=>{let t=o.of(e),n=o.empty();for(;;){const[e,r]=o.reduce(t,[O(),o.empty()],(([e,t],n)=>{const[r,i]=b(n);return[M(e,r),o.appendAll(t,i)]}));if(n=S(n,e),o.isNil(r))return o.reverse(n);t=r}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},b=e=>{let t=e,n=O(),r=o.empty(),i=o.empty();for(;;)switch(t._tag){case"Empty":if(o.isNil(r))return[n,i];t=r.head,r=r.tail;break;case"Par":r=o.cons(t.right,r),t=t.left;break;case"Seq":{const e=t.left,n=t.right;switch(e._tag){case"Empty":t=n;break;case"Par":{const r=e.left,i=e.right;t=f(d(r,n),d(i,n));break}case"Seq":{const r=e.left,i=e.right;t=d(r,d(i,n));break}case"Single":t=e,i=o.cons(n,i)}break}case"Single":if(n=N(n,t),o.isNil(r))return[n,i];t=r.head,r=r.tail}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},S=(e,t)=>{if(o.isNil(e))return o.of(F(t));if(C(t))return e;const n=W(e.head),r=R(t);return 1===n.length&&1===r.length&&a.equals(n[0],r[0])?o.cons(j(e.head,F(t)),e.tail):o.cons(F(t),e)},v=Symbol.for("effect/RequestBlock/Entry");class w{request;result;listeners;ownerId;state;[v]=E;constructor(e,t,n,r,i){this.request=e,this.result=t,this.listeners=n,this.ownerId=r,this.state=i}}const E={_R:e=>e},_=e=>(0,l.hasProperty)(e,v),k=e=>new w(e.request,e.result,e.listeners,e.ownerId,e.state),x=Symbol.for("effect/RequestBlock/RequestBlockParallel"),I={_R:e=>e};class T{map;[x]=I;constructor(e){this.map=e}}const O=()=>new T(s.empty()),A=(e,t)=>new T(s.make([e,r.of(t)])),N=(e,t)=>new T(s.modifyAt(e.map,t.dataSource,(e=>c.orElseSome(c.map(e,r.append(t.blockedRequest)),(()=>r.of(t.blockedRequest)))))),M=(e,t)=>new T(s.reduce(e.map,t.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>t,onSome:e=>r.appendAll(t,e)}))))),C=e=>s.isEmpty(e.map),R=e=>Array.from(s.keys(e.map)),F=e=>U(s.map(e.map,(e=>r.of(e)))),L=Symbol.for("effect/RequestBlock/RequestBlockSequential"),P={_R:e=>e};class D{map;[L]=P;constructor(e){this.map=e}}const U=e=>new D(e),j=(e,t)=>new D(s.reduce(t.map,e.map,((e,t,n)=>s.set(e,n,c.match(s.get(e,n),{onNone:()=>r.empty(),onSome:e=>r.appendAll(e,t)}))))),q=e=>s.isEmpty(e.map),W=e=>Array.from(s.keys(e.map)),B=e=>Array.from(e.map)},964155:(e,t,n)=>{n.r(t),n.d(t,{CacheTypeId:()=>J,MapKeyTypeId:()=>j,complete:()=>P,initialCacheState:()=>G,isMapKey:()=>B,make:()=>Q,makeCacheState:()=>V,makeCacheStats:()=>K,makeEntryStats:()=>Y,makeKeySet:()=>$,makeMapKey:()=>W,makeWith:()=>X,pending:()=>D,refreshing:()=>U,unsafeMakeWith:()=>ee});var r=n(689702),i=n(762738),a=n(284073),s=n(757964),o=n(43977),c=n(896949),l=n(361369),u=n(367337),f=n(714349),d=(n(128420),n(883845)),p=n(953533);const h=Symbol.for("effect/MutableList"),m={[h]:h,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();const n=t.value;return t=t.next,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return(0,d.format)(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(d.toJSON)}},[d.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,p.pipeArguments)(this,arguments)}},g=e=>({value:e,removed:!1,prev:void 0,next:void 0}),y=()=>{const e=Object.create(m);return e.head=void 0,e.tail=void 0,e._length=0,e},b=e=>0===S(e),S=e=>e._length,v=l.dual(2,((e,t)=>{const n=g(t);return void 0===e.head&&(e.head=n),void 0===e.tail||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e})),w=(e,t)=>{t.removed||(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},E=Symbol.for("effect/MutableQueue"),_=Symbol.for("effect/mutable/MutableQueue/Empty"),k={[E]:E,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return(0,d.format)(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(d.toJSON)}},[d.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,p.pipeArguments)(this,arguments)}},x=e=>{const t=Object.create(k);return t.queue=y(),t.capacity=e,t},I=l.dual(2,((e,t)=>{const n=S(e.queue);return(void 0===e.capacity||n!==e.capacity)&&(v(t)(e.queue),!0)})),T=l.dual(2,((e,t)=>b(e.queue)?t:(e=>{const t=e.head;if(void 0!==t)return w(e,t),t.value})(e.queue)));var O=n(645914),A=n(977948),N=n(856572),M=n(5316),C=n(672620),R=n(234951),F=n(478908),L=n(858657);const P=(e,t,n,r)=>R.struct({_tag:"Complete",key:e,exit:t,entryStats:n,timeToLiveMillis:r}),D=(e,t)=>R.struct({_tag:"Pending",key:e,deferred:t}),U=(e,t)=>R.struct({_tag:"Refreshing",deferred:e,complete:t}),j=Symbol.for("effect/Cache/MapKey");class q{current;[j]=j;previous=void 0;next=void 0;constructor(e){this.current=e}[u.symbol](){return(0,l.pipe)(u.hash(this.current),u.combine(u.hash(this.previous)),u.combine(u.hash(this.next)),u.cached(this))}[o.symbol](e){return this===e||B(e)&&o.equals(this.current,e.current)&&o.equals(this.previous,e.previous)&&o.equals(this.next,e.next)}}const W=e=>new q(e),B=e=>(0,N.hasProperty)(e,j);class z{head=void 0;tail=void 0;add(e){if(e!==this.tail)if(void 0===this.tail)this.head=e,this.tail=e;else{const t=e.previous,n=e.next;void 0!==n&&(e.next=void 0,void 0!==t?(t.next=n,n.previous=t):(this.head=n,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}remove(){const e=this.head;if(void 0!==e){const t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}const $=()=>new z,V=(e,t,n,r,i,a)=>({map:e,keys:t,accesses:n,updating:r,hits:i,misses:a}),G=()=>V(f.empty(),$(),x(void 0),O.make(!1),0,0),J=Symbol.for("effect/Cache"),H={_Key:e=>e,_Error:e=>e,_Value:e=>e},K=e=>e,Y=e=>({loadedMillis:e});class Z{capacity;context;fiberId;lookup;timeToLive;[J]=H;cacheState;constructor(e,t,n,r,i){this.capacity=e,this.context=t,this.fiberId=n,this.lookup=r,this.timeToLive=i,this.cacheState=G()}get(e){return C.map(this.getEither(e),s.merge)}get cacheStats(){return C.sync((()=>K({hits:this.cacheState.hits,misses:this.cacheState.misses,size:f.size(this.cacheState.map)})))}getOption(e){return C.suspend((()=>A.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=W(e);return this.trackAccess(t),this.trackMiss(),C.succeed(A.none())},onSome:e=>this.resolveMapValue(e)})))}getOptionComplete(e){return C.suspend((()=>A.match(f.get(this.cacheState.map,e),{onNone:()=>{const t=W(e);return this.trackAccess(t),this.trackMiss(),C.succeed(A.none())},onSome:e=>this.resolveMapValue(e,!0)})))}contains(e){return C.sync((()=>f.has(this.cacheState.map,e)))}entryStats(e){return C.sync((()=>{const t=f.get(this.cacheState.map,e);if(A.isSome(t))switch(t.value._tag){case"Complete":{const e=t.value.entryStats.loadedMillis;return A.some(Y(e))}case"Pending":return A.none();case"Refreshing":{const e=t.value.complete.entryStats.loadedMillis;return A.some(Y(e))}}return A.none()}))}getEither(e){return C.suspend((()=>{const t=e;let n,r,a=A.getOrUndefined(f.get(this.cacheState.map,t));return void 0===a&&(r=i.unsafeMake(this.fiberId),n=W(t),f.has(this.cacheState.map,t)?a=A.getOrUndefined(f.get(this.cacheState.map,t)):f.set(this.cacheState.map,t,D(n,r))),void 0===a?(this.trackAccess(n),this.trackMiss(),C.map(this.lookupValueOf(e,r),s.right)):C.flatMap(this.resolveMapValue(a),A.match({onNone:()=>this.getEither(e),onSome:e=>C.succeed(s.left(e))}))}))}invalidate(e){return C.sync((()=>{f.remove(this.cacheState.map,e)}))}invalidateWhen(e,t){return C.sync((()=>{const n=f.get(this.cacheState.map,e);A.isSome(n)&&"Complete"===n.value._tag&&"Success"===n.value.exit._tag&&t(n.value.exit.value)&&f.remove(this.cacheState.map,e)}))}get invalidateAll(){return C.sync((()=>{this.cacheState.map=f.empty()}))}refresh(e){return M.clockWith((t=>C.suspend((()=>{const n=e,r=i.unsafeMake(this.fiberId);let a=A.getOrUndefined(f.get(this.cacheState.map,n));if(void 0===a&&(f.has(this.cacheState.map,n)?a=A.getOrUndefined(f.get(this.cacheState.map,n)):f.set(this.cacheState.map,n,D(W(n),r))),void 0===a)return C.asVoid(this.lookupValueOf(e,r));switch(a._tag){case"Complete":if(this.hasExpired(t,a.timeToLiveMillis)){const t=A.getOrUndefined(f.get(this.cacheState.map,n));return o.equals(t,a)&&f.remove(this.cacheState.map,n),C.asVoid(this.get(e))}return(0,l.pipe)(this.lookupValueOf(e,r),M.when((()=>{const e=A.getOrUndefined(f.get(this.cacheState.map,n));if(o.equals(e,a)){const e=U(r,a);return f.set(this.cacheState.map,n,e),!0}return!1})),C.asVoid);case"Pending":case"Refreshing":return i.await(a.deferred)}}))))}set(e,t){return M.clockWith((n=>C.sync((()=>{const r=n.unsafeCurrentTimeMillis(),i=e,s=c.succeed(t),o=P(W(i),s,Y(r),r+a.toMillis(a.decode(this.timeToLive(s))));f.set(this.cacheState.map,i,o)}))))}get size(){return C.sync((()=>f.size(this.cacheState.map)))}get values(){return C.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e}))}get entries(){return C.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e}))}get keys(){return C.sync((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e}))}resolveMapValue(e,t=!1){return M.clockWith((n=>{switch(e._tag){case"Complete":return this.trackAccess(e.key),this.hasExpired(n,e.timeToLiveMillis)?(f.remove(this.cacheState.map,e.key.current),C.succeed(A.none())):(this.trackHit(),C.map(e.exit,A.some));case"Pending":return this.trackAccess(e.key),this.trackHit(),t?C.succeed(A.none()):C.map(i.await(e.deferred),A.some);case"Refreshing":return this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(n,e.complete.timeToLiveMillis)?t?C.succeed(A.none()):C.map(i.await(e.deferred),A.some):C.map(e.complete.exit,A.some)}}))}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(I(this.cacheState.accesses,e),O.compareAndSet(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){const t=T(this.cacheState.accesses,_);t===_?e=!1:this.cacheState.keys.add(t)}let t=f.size(this.cacheState.map);for(e=t>this.capacity;e;){const n=this.cacheState.keys.remove();void 0!==n?f.has(this.cacheState.map,n.current)&&(f.remove(this.cacheState.map,n.current),t-=1,e=t>this.capacity):e=!1}O.set(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return M.clockWith((n=>C.suspend((()=>{const r=e;return(0,l.pipe)(this.lookup(e),C.provideContext(this.context),C.exit,C.flatMap((e=>{const s=n.unsafeCurrentTimeMillis(),o=Y(s),c=P(W(r),e,o,s+a.toMillis(a.decode(this.timeToLive(e))));return f.set(this.cacheState.map,r,c),C.zipRight(i.done(t,e),e)})),C.onInterrupt((()=>C.zipRight(i.interrupt(t),C.sync((()=>{f.remove(this.cacheState.map,r)}))))))}))))}}const Q=e=>{const t=a.decode(e.timeToLive);return X({capacity:e.capacity,lookup:e.lookup,timeToLive:()=>t})},X=e=>C.map(L.all([C.context(),C.fiberId]),(([t,n])=>new Z(e.capacity,t,n,e.lookup,(t=>a.decode(e.timeToLive(t)))))),ee=(e,t,n)=>new Z(e,r.empty(),F.none,t,(e=>a.decode(n(e))))},908197:(e,t,n)=>{n.r(t),n.d(t,{CauseTypeId:()=>_,andThen:()=>ce,as:()=>ie,contains:()=>le,defects:()=>V,die:()=>T,dieOption:()=>K,electFailures:()=>ne,empty:()=>x,fail:()=>I,failureOption:()=>J,failureOrCause:()=>H,failures:()=>$,filter:()=>he,find:()=>pe,flatMap:()=>se,flatten:()=>oe,flipCauseOption:()=>Y,interrupt:()=>O,interruptOption:()=>Z,interruptors:()=>G,isCause:()=>M,isDie:()=>W,isDieType:()=>F,isEmpty:()=>j,isEmptyType:()=>C,isFailType:()=>R,isFailure:()=>q,isInterruptType:()=>L,isInterrupted:()=>B,isInterruptedOnly:()=>z,isParallelType:()=>D,isSequentialType:()=>P,keepDefects:()=>Q,keepDefectsAndElectFailures:()=>X,linearize:()=>ee,map:()=>ae,match:()=>we,parallel:()=>A,pretty:()=>ke,prettyErrorMessage:()=>Te,prettyErrors:()=>Ce,reduce:()=>Ee,reduceWithContext:()=>_e,sequential:()=>N,size:()=>U,spanToTrace:()=>Ae,stripFailures:()=>te,stripSomeDefects:()=>re});var r=n(562635),i=n(128420),a=n(757964),s=n(43977),o=n(361369),c=n(606517),l=n(367337),u=n(227561),f=n(883845),d=n(977948),p=n(953533),h=n(856572),m=n(94732);const g="Die",y="Empty",b="Fail",S="Interrupt",v="Parallel",w="Sequential",E="effect/Cause",_=Symbol.for(E),k={[_]:{_E:e=>e},[l.symbol](){return(0,o.pipe)(l.hash(E),l.combine(l.hash(fe(this))),l.cached(this))},[s.symbol](e){return M(e)&&ue(this,e)},pipe(){return(0,p.pipeArguments)(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:(0,f.toJSON)(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:(0,f.toJSON)(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:(0,f.toJSON)(this.left),right:(0,f.toJSON)(this.right)}}},toString(){return ke(this)},[f.NodeInspectSymbol](){return this.toJSON()}},x=(()=>{const e=Object.create(k);return e._tag=y,e})(),I=e=>{const t=Object.create(k);return t._tag=b,t.error=e,t},T=e=>{const t=Object.create(k);return t._tag=g,t.defect=e,t},O=e=>{const t=Object.create(k);return t._tag=S,t.fiberId=e,t},A=(e,t)=>{const n=Object.create(k);return n._tag=v,n.left=e,n.right=t,n},N=(e,t)=>{const n=Object.create(k);return n._tag=w,n.left=e,n.right=t,n},M=e=>(0,h.hasProperty)(e,_),C=e=>e._tag===y,R=e=>e._tag===b,F=e=>e._tag===g,L=e=>e._tag===S,P=e=>e._tag===w,D=e=>e._tag===v,U=e=>_e(e,void 0,ge),j=e=>e._tag===y||Ee(e,!0,((e,t)=>{switch(t._tag){case y:return d.some(e);case g:case b:case S:return d.some(!1);default:return d.none()}})),q=e=>d.isSome(J(e)),W=e=>d.isSome(K(e)),B=e=>d.isSome(Z(e)),z=e=>_e(void 0,ye)(e),$=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===b?d.some((0,o.pipe)(e,i.prepend(t.error))):d.none()))),V=e=>i.reverse(Ee(e,i.empty(),((e,t)=>t._tag===g?d.some((0,o.pipe)(e,i.prepend(t.defect))):d.none()))),G=e=>Ee(e,u.empty(),((e,t)=>t._tag===S?d.some((0,o.pipe)(e,u.add(t.fiberId))):d.none())),J=e=>pe(e,(e=>e._tag===b?d.some(e.error):d.none())),H=e=>{const t=J(e);switch(t._tag){case"None":return a.right(e);case"Some":return a.left(t.value)}},K=e=>pe(e,(e=>e._tag===g?d.some(e.defect):d.none())),Y=e=>we(e,{onEmpty:d.some(x),onFail:e=>(0,o.pipe)(e,d.map(I)),onDie:e=>d.some(T(e)),onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.none()}),Z=e=>pe(e,(e=>e._tag===S?d.some(e.fiberId):d.none())),Q=e=>we(e,{onEmpty:d.none(),onFail:()=>d.none(),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),X=e=>we(e,{onEmpty:d.none(),onFail:e=>d.some(T(e)),onDie:e=>d.some(T(e)),onInterrupt:()=>d.none(),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}),ee=e=>we(e,{onEmpty:u.empty(),onFail:e=>u.make(I(e)),onDie:e=>u.make(T(e)),onInterrupt:e=>u.make(O(e)),onSequential:(e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>N(e,t))))))),onParallel:(e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>A(e,t)))))))}),te=e=>we(e,{onEmpty:x,onFail:()=>x,onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:N,onParallel:A}),ne=e=>we(e,{onEmpty:x,onFail:e=>T(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}),re=(0,o.dual)(2,((e,t)=>we(e,{onEmpty:d.some(x),onFail:e=>d.some(I(e)),onDie:e=>{const n=t(e);return d.isSome(n)?d.none():d.some(T(e))},onInterrupt:e=>d.some(O(e)),onSequential:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(N(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none(),onParallel:(e,t)=>d.isSome(e)&&d.isSome(t)?d.some(A(e.value,t.value)):d.isSome(e)&&d.isNone(t)?d.some(e.value):d.isNone(e)&&d.isSome(t)?d.some(t.value):d.none()}))),ie=(0,o.dual)(2,((e,t)=>ae(e,(()=>t)))),ae=(0,o.dual)(2,((e,t)=>se(e,(e=>I(t(e)))))),se=(0,o.dual)(2,((e,t)=>we(e,{onEmpty:x,onFail:e=>t(e),onDie:e=>T(e),onInterrupt:e=>O(e),onSequential:(e,t)=>N(e,t),onParallel:(e,t)=>A(e,t)}))),oe=e=>se(e,o.identity),ce=(0,o.dual)(2,((e,t)=>(0,h.isFunction)(t)?se(e,t):se(e,(()=>t)))),le=(0,o.dual)(2,((e,t)=>t._tag===y||e===t||Ee(e,!1,((e,n)=>d.some(e||ue(n,t)))))),ue=(e,t)=>{let n=i.of(e),r=i.of(t);for(;i.isNonEmpty(n)&&i.isNonEmpty(r);){const[e,t]=(0,o.pipe)(i.headNonEmpty(n),Ee([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))])}))),[a,c]=(0,o.pipe)(i.headNonEmpty(r),Ee([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return d.some([(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))])})));if(!s.equals(e,a))return!1;n=t,r=c}return!0},fe=e=>de(i.of(e),i.empty()),de=(e,t)=>{for(;;){const[n,a]=(0,o.pipe)(e,r.reduce([u.empty(),i.empty()],(([e,t],n)=>{const[r,a]=me(n);return[(0,o.pipe)(e,u.union(r)),(0,o.pipe)(t,i.appendAll(a))]}))),s=u.size(n)>0?(0,o.pipe)(t,i.prepend(n)):t;if(i.isEmpty(a))return i.reverse(s);e=a,t=s}throw new Error((0,m.getBugErrorMessage)("Cause.flattenCauseLoop"))},pe=(0,o.dual)(2,((e,t)=>{const n=[e];for(;n.length>0;){const e=n.pop(),r=t(e);switch(r._tag){case"None":switch(e._tag){case w:case v:n.push(e.right),n.push(e.left)}break;case"Some":return r}}return d.none()})),he=(0,o.dual)(2,((e,t)=>_e(e,void 0,be(t)))),me=e=>{let t=e;const n=[];let r=u.empty(),a=i.empty();for(;void 0!==t;)switch(t._tag){case y:if(0===n.length)return[r,a];t=n.pop();break;case b:if(r=u.add(r,i.make(t._tag,t.error)),0===n.length)return[r,a];t=n.pop();break;case g:if(r=u.add(r,i.make(t._tag,t.defect)),0===n.length)return[r,a];t=n.pop();break;case S:if(r=u.add(r,i.make(t._tag,t.fiberId)),0===n.length)return[r,a];t=n.pop();break;case w:switch(t.left._tag){case y:t=t.right;break;case w:t=N(t.left.left,N(t.left.right,t.right));break;case v:t=A(N(t.left.left,t.right),N(t.left.right,t.right));break;default:a=i.prepend(a,t.right),t=t.left}break;case v:n.push(t.right),t=t.left}throw new Error((0,m.getBugErrorMessage)("Cause.evaluateCauseLoop"))},ge={emptyCase:()=>0,failCase:()=>1,dieCase:()=>1,interruptCase:()=>1,sequentialCase:(e,t,n)=>t+n,parallelCase:(e,t,n)=>t+n},ye={emptyCase:o.constTrue,failCase:o.constFalse,dieCase:o.constFalse,interruptCase:o.constTrue,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},be=e=>({emptyCase:()=>x,failCase:(e,t)=>I(t),dieCase:(e,t)=>T(t),interruptCase:(e,t)=>O(t),sequentialCase:(t,n,r)=>e(n)?e(r)?N(n,r):n:e(r)?r:x,parallelCase:(t,n,r)=>e(n)?e(r)?A(n,r):n:e(r)?r:x}),Se="SequentialCase",ve="ParallelCase",we=(0,o.dual)(2,((e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:i,onParallel:a,onSequential:s})=>_e(e,void 0,{emptyCase:()=>n,failCase:(e,t)=>r(t),dieCase:(e,n)=>t(n),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,n)=>s(t,n),parallelCase:(e,t,n)=>a(t,n)}))),Ee=(0,o.dual)(3,((e,t,n)=>{let r=t,i=e;const a=[];for(;void 0!==i;){const e=n(r,i);switch(r=d.isSome(e)?e.value:r,i._tag){case w:case v:a.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&a.length>0&&(i=a.pop())}return r})),_e=(0,o.dual)(3,((e,t,n)=>{const r=[e],i=[];for(;r.length>0;){const e=r.pop();switch(e._tag){case y:i.push(a.right(n.emptyCase(t)));break;case b:i.push(a.right(n.failCase(t,e.error)));break;case g:i.push(a.right(n.dieCase(t,e.defect)));break;case S:i.push(a.right(n.interruptCase(t,e.fiberId)));break;case w:r.push(e.right),r.push(e.left),i.push(a.left({_tag:Se}));break;case v:r.push(e.right),r.push(e.left),i.push(a.left({_tag:ve}))}}const s=[];for(;i.length>0;){const e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case Se:{const e=s.pop(),r=s.pop(),i=n.sequentialCase(t,e,r);s.push(i);break}case ve:{const e=s.pop(),r=s.pop(),i=n.parallelCase(t,e,r);s.push(i);break}}break;case"Right":s.push(e.right)}}if(0===s.length)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),ke=(e,t)=>z(e)?"All fibers interrupted without errors.":Ce(e).map((function(e){return!0!==t?.renderErrorCause||void 0===e.cause?e.stack:`${e.stack} {\n${xe(e.cause,"  ")}\n}`})).join("\n"),xe=(e,t)=>{const n=e.stack.split("\n");let r=`${t}[cause]: ${n[0]}`;for(let i=1,a=n.length;i<a;i++)r+=`\n${t}${n[i]}`;return r};class Ie extends globalThis.Error{span=void 0;constructor(e){const t="object"===typeof e&&null!==e,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Te(e),t&&"cause"in e&&"undefined"!==typeof e.cause?{cause:new Ie(e.cause)}:void 0),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=e instanceof Error?e.name:"Error",t&&(Me in e&&(this.span=e[Me]),Object.keys(e).forEach((t=>{t in this||(this[t]=e[t])}))),this.stack=Ne(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const Te=e=>{if("string"===typeof e)return e;if("object"===typeof e&&null!==e&&e instanceof Error)return e.message;try{if((0,h.hasProperty)(e,"toString")&&(0,h.isFunction)(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},Oe=/\((.*)\)/,Ae=(0,c.globalValue)("effect/Tracer/spanToTrace",(()=>new WeakMap)),Ne=(e,t,n)=>{const r=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let a=1;a<i.length&&!i[a].includes("Generator.next");a++){if(i[a].includes("effect_internal_function")){r.pop();break}r.push(i[a].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let e=n,t=0;for(;e&&"Span"===e._tag&&t<10;){const n=Ae.get(e);if("function"===typeof n){const t=n();if("string"===typeof t){const n=t.match(Oe),i=n?n[1]:t.replace(/^at /,"");r.push(`    at ${e.name} (${i})`)}else r.push(`    at ${e.name}`)}else r.push(`    at ${e.name}`);e=d.getOrUndefined(e.parent),t++}}return r.join("\n")},Me=Symbol.for("effect/SpanAnnotation"),Ce=e=>_e(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new Ie(t)],failCase:(e,t)=>[new Ie(t)],interruptCase:()=>[],parallelCase:(e,t,n)=>[...t,...n],sequentialCase:(e,t,n)=>[...t,...n]})},114969:(e,t,n)=>{n.r(t),n.d(t,{ClockTypeId:()=>o,MAX_TIMER_MILLIS:()=>l,clockTag:()=>c,globalClockScheduler:()=>u,make:()=>h});var r=n(689702),i=n(284073),a=n(361369),s=n(672620);const o=Symbol.for("effect/Clock"),c=r.GenericTag("effect/Clock"),l=2**31-1,u={unsafeSchedule(e,t){const n=i.toMillis(t);if(n>l)return a.constFalse;let r=!1;const s=setTimeout((()=>{r=!0,e()}),n);return()=>(clearTimeout(s),!r)}},f=function(){const e=BigInt(1e6);if("undefined"===typeof performance)return()=>BigInt(Date.now())*e;const t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),d=function(){const e="hrtime"in{env:{NODE_ENV:"production"}}&&"function"===typeof{env:{NODE_ENV:"production"}}.hrtime.bigint?{env:{NODE_ENV:"production"}}.hrtime:void 0;if(!e)return f;const t=f()-e.bigint();return()=>t+e.bigint()}();class p{[o]=o;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return d()}currentTimeMillis=s.sync((()=>this.unsafeCurrentTimeMillis()));currentTimeNanos=s.sync((()=>this.unsafeCurrentTimeNanos()));scheduler(){return s.succeed(u)}sleep(e){return s.async((t=>{const n=u.unsafeSchedule((()=>t(s.void)),e);return s.asVoid(s.sync(n))}))}}const h=()=>new p},242927:(e,t,n)=>{n.r(t),n.d(t,{currentRequestMap:()=>a});var r=n(606517),i=n(672620);const a=(0,r.globalValue)(Symbol.for("effect/FiberRef/currentRequestMap"),(()=>(0,i.fiberRefUnsafeMake)(new Map)))},717172:(e,t,n)=>{n.r(t),n.d(t,{ConfigProviderTypeId:()=>V,FlatConfigProviderTypeId:()=>J,configProviderTag:()=>G,constantCase:()=>oe,fromEnv:()=>Z,fromFlat:()=>Y,fromJson:()=>Ee,fromMap:()=>Q,kebabCase:()=>ce,lowerCase:()=>le,make:()=>H,makeFlat:()=>K,mapInputPath:()=>te,nested:()=>re,orElse:()=>ae,snakeCase:()=>ue,unnested:()=>ie,upperCase:()=>fe,within:()=>de});var r=n(562635),i=n(689702),a=n(757964),s=n(361369),o=n(827964),c=n(227561),l=n(804676),u=n(977948),f=n(953533);n(856572);const d="And",p="Or",h="InvalidData",m="MissingData",g="SourceUnavailable",y="Unsupported",b=Symbol.for("effect/ConfigError"),S={_tag:"ConfigError",[b]:b},v=(e,t)=>{const n=Object.create(S);return n._op=d,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},w=(e,t)=>{const n=Object.create(S);return n._op=p,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},E=(e,t,n={pathDelim:"."})=>{const i=Object.create(S);return i._op=h,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Invalid data at ${(0,s.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},_=(e,t,n={pathDelim:"."})=>{const i=Object.create(S);return i._op=m,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Missing data at ${(0,s.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},k=(e,t,n,i={pathDelim:"."})=>{const a=Object.create(S);return a._op=g,a.path=e,a.message=t,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${(0,s.pipe)(this.path,r.join(i.pathDelim))}: "${this.message}")`}}),a},x=(e,t,n={pathDelim:"."})=>{const i=Object.create(S);return i._op=y,i.path=e,i.message=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${(0,s.pipe)(this.path,r.join(n.pathDelim))}: "${this.message}")`}}),i},I=(0,s.dual)(2,((e,t)=>{switch(e._op){case d:return v(I(e.left,t),I(e.right,t));case p:return w(I(e.left,t),I(e.right,t));case h:return E([...t,...e.path],e.message);case m:return _([...t,...e.path],e.message);case g:return k([...t,...e.path],e.message,e.cause);case y:return x([...t,...e.path],e.message)}}));s.constFalse,s.constTrue,s.constFalse,s.constFalse;var T=n(489425);const O={_tag:"Empty"},A=(0,s.dual)(2,((e,t)=>({_tag:"AndThen",first:e,second:t}))),N=(0,s.dual)(2,((e,t)=>A(e,{_tag:"MapName",f:t}))),M=(0,s.dual)(2,((e,t)=>A(e,{_tag:"Nested",name:t}))),C=(0,s.dual)(2,((e,t)=>A(e,{_tag:"Unnested",name:t}))),R=(0,s.dual)(2,((e,t)=>{let n=T.of(t),i=e;for(;T.isCons(n);){const e=n.head;switch(e._tag){case"Empty":n=n.tail;break;case"AndThen":n=T.cons(e.first,T.cons(e.second,n.tail));break;case"MapName":i=r.map(i,e.f),n=n.tail;break;case"Nested":i=r.prepend(i,e.name),n=n.tail;break;case"Unnested":if(!(0,s.pipe)(r.head(i),u.contains(e.name)))return a.left(_(i,`Expected ${e.name} to be in path in ConfigProvider#unnested`));i=r.tailNonEmpty(i),n=n.tail;break}}return a.right(i)}));var F=n(672620);const L=e=>e.toLowerCase(),P=e=>e.toUpperCase(),D=(e,t,n)=>t instanceof RegExp?e.replace(t,n):t.reduce(((e,t)=>e.replace(t,n)),e),U=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],j=/[^A-Z0-9]+/gi,q=(e,t={})=>{const{delimiter:n=" ",splitRegexp:r=U,stripRegexp:i=j,transform:a=L}=t,s=D(D(e,r,"$1\0$2"),i,"\0");let o=0,c=s.length;for(;"\0"===s.charAt(o);)o++;for(;"\0"===s.charAt(c-1);)c--;return s.slice(o,c).split("\0").map(a).join(n)},W=(e,t)=>q(e,{delimiter:"_",transform:P,...t}),B=(e,t)=>q(e,{delimiter:"-",...t}),z=(e,t)=>q(e,{delimiter:"_",...t}),$=(e,t)=>[...e,...t],V=Symbol.for("effect/ConfigProvider"),G=i.GenericTag("effect/ConfigProvider"),J=Symbol.for("effect/ConfigProviderFlat"),H=e=>({[V]:V,pipe(){return(0,f.pipeArguments)(this,arguments)},...e}),K=e=>({[J]:J,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),Y=e=>H({load:t=>F.flatMap(X(e,r.empty(),t,!1),(e=>u.match(r.head(e),{onNone:()=>F.fail(_(r.empty(),`Expected a single value having structure: ${t}`)),onSome:F.succeed}))),flattened:e}),Z=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),i=()=>"env"in{env:{NODE_ENV:"production"}}?{NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"starpy",slug:"starpy",version:"2.1.0",orientation:"portrait",icon:"./assets/icon.png",platforms:["ios","android","web"],scheme:"starpy",env:{DEBUG:"webtorrent"},userInterfaceStyle:"dark",web:{},extra:{eas:{projectId:"96050f57-642d-4f18-8222-de9f9ccb9e21"}},sdkVersion:"51.0.0"},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}:{};return Y(K({load:(e,a,o=!0)=>{const c=(e=>(0,s.pipe)(e,r.join(t)))(e),l=i(),f=c in l?u.some(l[c]):u.none();return(0,s.pipe)(f,F.mapError((()=>_(e,`Expected ${c} to exist in the process context`))),F.flatMap((t=>pe(t,e,a,n,o))))},enumerateChildren:e=>F.sync((()=>{const n=i(),a=Object.keys(n).map((e=>e.toUpperCase().split(t))).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(a)})),patch:O}))},Q=(e,t)=>{const{pathDelim:n,seqDelim:i}=Object.assign({seqDelim:",",pathDelim:"."},t),a=e=>(0,s.pipe)(e,r.join(n)),o=e=>e.split(n),l=Se(e,(e=>o(e)),a);return Y(K({load:(e,t,n=!0)=>{const r=a(e),o=l.has(r)?u.some(l.get(r)):u.none();return(0,s.pipe)(o,F.mapError((()=>_(e,`Expected ${r} to exist in the provided map`))),F.flatMap((r=>pe(r,e,t,i,n))))},enumerateChildren:e=>F.sync((()=>{const t=r.fromIterable(l.keys()).map(o).filter((t=>{for(let n=0;n<e.length;n++){const i=(0,s.pipe)(e,r.unsafeGet(n)),a=t[n];if(void 0===a||i!==a)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return c.fromIterable(t)})),patch:O}))},X=(e,t,n,i)=>{const c=n;switch(c._tag){case"Constant":return F.succeed(r.of(c.value));case"Described":return F.suspend((()=>X(e,t,c.config,i)));case"Fail":return F.fail(_(t,c.message));case"Fallback":return(0,s.pipe)(F.suspend((()=>X(e,t,c.first,i))),F.catchAll((n=>c.condition(n)?(0,s.pipe)(X(e,t,c.second,i),F.catchAll((e=>F.fail(w(n,e))))):F.fail(n))));case"Lazy":return F.suspend((()=>X(e,t,c.config(),i)));case"MapOrFail":return F.suspend((()=>(0,s.pipe)(X(e,t,c.original,i),F.flatMap(F.forEachSequential((e=>(0,s.pipe)(c.mapOrFail(e),F.mapError(I(((e,t)=>{let n=t;if("Nested"===n._tag){const t=e.slice();for(;"Nested"===n._tag;)t.push(n.name),n=n.config;return t}return e})(t,c.original))))))))));case"Nested":return F.suspend((()=>X(e,$(t,r.of(c.name)),c.config,i)));case"Primitive":return(0,s.pipe)(R(t,e.patch),F.flatMap((t=>(0,s.pipe)(e.load(t,c,i),F.flatMap((e=>{if(0===e.length){const e=(0,s.pipe)(r.last(t),u.getOrElse((()=>"<n/a>")));return F.fail(_([],`Expected ${c.description} with name ${e}`))}return F.succeed(e)}))))));case"Sequence":return(0,s.pipe)(R(t,e.patch),F.flatMap((n=>(0,s.pipe)(e.enumerateChildren(n),F.flatMap(me),F.flatMap((i=>0===i.length?F.suspend((()=>F.map(X(e,n,c.config,!0),r.of))):(0,s.pipe)(F.forEachSequential(i,(n=>X(e,r.append(t,`[${n}]`),c.config,!0))),F.map((e=>{const t=r.flatten(e);return 0===t.length?r.of(r.empty()):r.of(t)})))))))));case"HashMap":return F.suspend((()=>(0,s.pipe)(R(t,e.patch),F.flatMap((t=>(0,s.pipe)(e.enumerateChildren(t),F.flatMap((n=>(0,s.pipe)(n,F.forEachSequential((n=>X(e,$(t,r.of(n)),c.valueConfig,i))),F.map((e=>0===e.length?r.of(o.empty()):(0,s.pipe)(he(e),r.map((e=>o.fromIterable(r.zip(r.fromIterable(n),e))))))))))))))));case"ZipWith":return F.suspend((()=>(0,s.pipe)(X(e,t,c.left,i),F.either,F.flatMap((n=>(0,s.pipe)(X(e,t,c.right,i),F.either,F.flatMap((e=>{if(a.isLeft(n)&&a.isLeft(e))return F.fail(v(n.left,e.left));if(a.isLeft(n)&&a.isRight(e))return F.fail(n.left);if(a.isRight(n)&&a.isLeft(e))return F.fail(e.left);if(a.isRight(n)&&a.isRight(e)){const i=(0,s.pipe)(t,r.join(".")),o=ee(t,i),[l,f]=((e,t,n,i)=>{const a=r.unfold(n.length,(t=>t>=i.length?u.none():u.some([e(t),t+1]))),s=r.unfold(i.length,(e=>e>=n.length?u.none():u.some([t(e),e+1])));return[$(n,a),$(i,s)]})(o,o,(0,s.pipe)(n.right,r.map(a.right)),(0,s.pipe)(e.right,r.map(a.right)));return(0,s.pipe)(l,r.zip(f),F.forEachSequential((([e,t])=>(0,s.pipe)(F.zip(e,t),F.map((([e,t])=>c.zip(e,t)))))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))}},ee=(e,t)=>n=>a.left(_(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),te=(0,s.dual)(2,((e,t)=>Y(ne(e.flattened,t)))),ne=(e,t)=>K({load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:t=>e.enumerateChildren(t),patch:N(e.patch,t)}),re=(0,s.dual)(2,((e,t)=>Y(K({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:M(e.flattened.patch,t)})))),ie=(0,s.dual)(2,((e,t)=>Y(K({load:(t,n)=>e.flattened.load(t,n,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:C(e.flattened.patch,t)})))),ae=(0,s.dual)(2,((e,t)=>Y(se(e.flattened,(()=>t().flattened))))),se=(e,t)=>K({load:(n,r,i)=>(0,s.pipe)(R(n,e.patch),F.flatMap((t=>e.load(t,r,i))),F.catchAll((e=>(0,s.pipe)(F.sync(t),F.flatMap((t=>(0,s.pipe)(R(n,t.patch),F.flatMap((e=>t.load(e,r,i))),F.catchAll((t=>F.fail(w(e,t))))))))))),enumerateChildren:n=>(0,s.pipe)(R(n,e.patch),F.flatMap((t=>e.enumerateChildren(t))),F.either,F.flatMap((e=>(0,s.pipe)(F.sync(t),F.flatMap((t=>(0,s.pipe)(R(n,t.patch),F.flatMap((e=>t.enumerateChildren(e))),F.either,F.flatMap((t=>{if(a.isLeft(e)&&a.isLeft(t))return F.fail(v(e.left,t.left));if(a.isLeft(e)&&a.isRight(t))return F.succeed(t.right);if(a.isRight(e)&&a.isLeft(t))return F.succeed(e.right);if(a.isRight(e)&&a.isRight(t))return F.succeed((0,s.pipe)(e.right,c.union(t.right)));throw new Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))),patch:O}),oe=e=>te(e,W),ce=e=>te(e,B),le=e=>te(e,L),ue=e=>te(e,z),fe=e=>te(e,P),de=(0,s.dual)(3,((e,t,n)=>{const i=r.reduce(t,e,((e,t)=>ie(e,t))),a=r.reduceRight(t,n(i),((e,t)=>re(e,t)));return ae(a,(()=>e))})),pe=(e,t,n,i,a)=>a?(0,s.pipe)(((e,t)=>{var n;return e.split(new RegExp(`\\s*${n=t,n.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&")}\\s*`))})(e,i),F.forEachSequential((e=>n.parse(e.trim()))),F.mapError(I(t))):(0,s.pipe)(n.parse(e),F.mapBoth({onFailure:I(t),onSuccess:r.of})),he=e=>Object.keys(e[0]).map((t=>e.map((e=>e[t])))),me=e=>(0,s.pipe)(F.forEachSequential(e,be),F.mapBoth({onFailure:()=>r.empty(),onSuccess:r.sort(l.Order)}),F.either,F.map(a.merge)),ge=/(^.+)(\[(\d+)\])$/,ye=/^(\[(\d+)\])$/,be=e=>{const t=e.match(ye);if(null!==t){const e=t[2];return(0,s.pipe)(void 0!==e&&e.length>0?u.some(e):u.none(),u.flatMap(we))}return u.none()},Se=(e,t,n)=>{const i=new Map;for(const[a,o]of e){const e=(0,s.pipe)(t(a),r.flatMap((e=>u.match(ve(e),{onNone:()=>r.of(e),onSome:([e,t])=>r.make(e,`[${t}]`)}))));i.set(n(e),o)}return i},ve=e=>{const t=e.match(ge);if(null!==t){const e=t[1],n=t[3],r=void 0!==e&&e.length>0?u.some(e):u.none(),i=(0,s.pipe)(void 0!==n&&n.length>0?u.some(n):u.none(),u.flatMap(we));return u.all([r,i])}return u.none()},we=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?u.none():u.some(t)},Ee=e=>{const t=r.map(ke(e),(([e,t])=>[_e(e).join("\ufeff"),t]));return Q(new Map(t),{pathDelim:"\ufeff",seqDelim:"\ufeff"})},_e=e=>{const t=[];let n=0;for(;n<e.length;){const r=e[n];if("KeyName"===r._tag)if(n+1<e.length){const i=e[n+1];"KeyIndex"===i._tag?(t.push(`${r.name}[${i.index}]`),n+=2):(t.push(r.name),n+=1)}else t.push(r.name),n+=1}return t},ke=e=>{const t=(e,t)=>"string"===typeof t?r.make([e,t]):"number"===typeof t||"boolean"===typeof t?r.make([e,String(t)]):r.isArray(t)?n(e,t):"object"===typeof t&&null!==t?i(e,t):r.empty(),n=(e,n)=>r.match(n,{onEmpty:()=>r.make([e,"<nil>"]),onNonEmpty:r.flatMap(((n,i)=>t(r.append(e,(e=>({_tag:"KeyIndex",index:e}))(i)),n)))}),i=(e,n)=>Object.entries(n).flatMap((([n,i])=>{const a=r.append(e,{_tag:"KeyName",name:n});const s=t(a,i);return r.isEmptyReadonlyArray(s)?r.make([a,""]):s}));return i(r.empty(),e)}},883768:(e,t,n)=>{n.r(t),n.d(t,{ContextProto:()=>y,STMTypeId:()=>d,Tag:()=>m,TagProto:()=>p,TagTypeId:()=>f,TypeId:()=>g,add:()=>k,empty:()=>E,get:()=>I,getOption:()=>T,isContext:()=>S,isTag:()=>v,make:()=>_,makeContext:()=>b,makeGenericTag:()=>h,merge:()=>O,omit:()=>N,pick:()=>A,unsafeGet:()=>x});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(953533),c=n(856572),l=n(68498),u=n(8578);const f=Symbol.for("effect/Context/Tag"),d=Symbol.for("effect/STM"),p={...l.EffectPrototype,_tag:"Tag",_op:"Tag",[d]:l.effectVariance,[f]:{_Service:e=>e,_Identifier:e=>e},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[s.NodeInspectSymbol](){return this.toJSON()},of:e=>e,context(e){return _(this,e)}},h=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(p);return Object.defineProperty(r,"stack",{get:()=>n.stack}),r.key=e,r},m=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;function r(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(r,p),r.key=e,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},g=Symbol.for("effect/Context"),y={[g]:{_Services:e=>e},[r.symbol](e){if(S(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!r.equals(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[a.symbol](){return a.cached(this,a.number(this.unsafeMap.size))},pipe(){return(0,o.pipeArguments)(this,arguments)},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()}},b=e=>{const t=Object.create(y);return t.unsafeMap=e,t},S=e=>(0,c.hasProperty)(e,g),v=e=>(0,c.hasProperty)(e,f),w=b(new Map),E=()=>w,_=(e,t)=>b(new Map([[e.key,t]])),k=(0,i.dual)(3,((e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),b(r)})),x=(0,i.dual)(2,((e,t)=>{if(!e.unsafeMap.has(t.key))throw(e=>{const t=new Error("Service not found"+(e.key?`: ${String(e.key)}`:""));if(e.stack){const n=e.stack.split("\n");if(n.length>2){const e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){const e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t})(t);return e.unsafeMap.get(t.key)})),I=x,T=(0,i.dual)(2,((e,t)=>e.unsafeMap.has(t.key)?u.some(e.unsafeMap.get(t.key)):u.none)),O=(0,i.dual)(2,((e,t)=>{const n=new Map(e.unsafeMap);for(const[r,i]of t.unsafeMap)n.set(r,i);return b(n)})),A=(...e)=>t=>{const n=new Set(e.map((e=>e.key))),r=new Map;for(const[e,i]of t.unsafeMap.entries())n.has(e)&&r.set(e,i);return b(r)},N=(...e)=>t=>{const n=new Map(t.unsafeMap);for(const r of e)n.delete(r.key);return b(n)}},5316:(e,t,n)=>{n.r(t),n.d(t,{Do:()=>H,_catch:()=>R,allowInterrupt:()=>$,annotateCurrentSpan:()=>$t,annotateLogs:()=>A,annotateSpans:()=>Vt,asSome:()=>N,asSomeError:()=>M,bind:()=>K,bindTo:()=>Y,catchAllDefect:()=>F,catchSomeCause:()=>L,catchSomeDefect:()=>P,catchTag:()=>D,catchTags:()=>U,cause:()=>j,clock:()=>W,clockWith:()=>q,contextWith:()=>ee,currentParentSpan:()=>Gt,currentSpan:()=>Jt,delay:()=>B,descriptor:()=>V,descriptorWith:()=>z,diffFiberRefs:()=>G,diffFiberRefsAndRuntimeFlags:()=>J,dropUntil:()=>Q,dropWhile:()=>X,endSpan:()=>en,eventually:()=>te,every:()=>pe,fiberRefs:()=>ye,filterMap:()=>ne,filterOrDie:()=>re,filterOrDieMessage:()=>ie,filterOrElse:()=>ae,filterOrFail:()=>oe,findFirst:()=>ce,firstSuccessOf:()=>ue,flipWith:()=>fe,forever:()=>me,fromNullable:()=>sn,functionWithSpan:()=>an,gen:()=>ge,head:()=>be,ignore:()=>Se,ignoreLogged:()=>ve,inheritFiberRefs:()=>we,isFailure:()=>Ee,isSuccess:()=>_e,iterate:()=>ke,labelMetrics:()=>pt,let_:()=>Z,liftPredicate:()=>se,linkSpans:()=>Ht,log:()=>Ie,logAnnotations:()=>Fe,logDebug:()=>Oe,logError:()=>Me,logFatal:()=>Ce,logInfo:()=>Ae,logTrace:()=>Te,logWarning:()=>Ne,logWithLevel:()=>xe,loop:()=>Le,makeSpan:()=>Zt,mapAccum:()=>Ue,mapErrorCause:()=>je,match:()=>de,memoize:()=>qe,merge:()=>We,negate:()=>Be,none:()=>ze,once:()=>$e,option:()=>Ve,optionFromOptional:()=>on,orElseFail:()=>Ge,orElseSucceed:()=>Je,parallelErrors:()=>He,patchFiberRefs:()=>Ke,promise:()=>Ye,provideService:()=>Ze,provideServiceEffect:()=>Qe,random:()=>Xe,reduce:()=>et,reduceRight:()=>tt,reduceWhile:()=>nt,repeatN:()=>it,sandbox:()=>st,serviceConstants:()=>qt,serviceFunction:()=>Ut,serviceFunctionEffect:()=>Dt,serviceFunctions:()=>jt,serviceMembers:()=>Wt,serviceOption:()=>Bt,serviceOptional:()=>zt,setFiberRefs:()=>ot,sleep:()=>ct,spanAnnotations:()=>Qt,spanLinks:()=>Xt,succeedNone:()=>lt,succeedSome:()=>ut,summarized:()=>ft,tagMetrics:()=>dt,takeUntil:()=>ht,takeWhile:()=>mt,tapBoth:()=>gt,tapDefect:()=>yt,tapError:()=>bt,tapErrorCause:()=>vt,tapErrorTag:()=>St,timed:()=>wt,timedWith:()=>Et,tracer:()=>kt,tracerWith:()=>_t,tryMap:()=>It,tryMapPromise:()=>Tt,tryPromise:()=>xt,try_:()=>C,unless:()=>Ot,unlessEffect:()=>At,unsafeMakeSpan:()=>Yt,unsandbox:()=>Nt,updateFiberRefs:()=>Mt,updateService:()=>Ct,useSpan:()=>tn,when:()=>Rt,whenFiberRef:()=>Ft,whenRef:()=>Lt,withLogSpan:()=>Re,withMetric:()=>Pt,withParentSpan:()=>nn,withSpan:()=>rn});var r=n(730276),i=n(562635),a=n(128420),s=n(131651),o=n(689702),c=n(284073),l=n(989105),u=n(361369),f=n(827964),d=n(227561),p=n(489425),h=n(934321),m=n(204971),g=n(977948),y=n(856572),b=n(55040),S=n(344862),v=n(127514);v.TracerTypeId,v.spanTag,v.tracerTag,v.make,v.externalSpan;const w=S.tracerWith;var E=n(908197),_=n(114969),k=n(672620),x=n(91276),I=n(392538),T=n(458762),O=n(66932);const A=(0,u.dual)((e=>k.isEffect(e[0])),(function(){const e=arguments;return k.fiberRefLocallyWith(e[0],k.currentLogAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),N=e=>k.map(e,g.some),M=e=>k.mapError(e,g.some),C=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),k.sync((()=>{try{return t()}catch(e){throw k.makeEffectError(E.fail(n?n(e):new k.UnknownException(e)))}}))},R=(0,u.dual)(3,((e,t,n)=>k.catchAll(e,(e=>y.hasProperty(e,t)&&e[t]===n.failure?n.onFailure(e):k.fail(e))))),F=(0,u.dual)(2,((e,t)=>k.catchAllCause(e,(e=>{const n=E.find(e,(e=>E.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return k.failCause(e);case"Some":return t(n.value.defect)}})))),L=(0,u.dual)(2,((e,t)=>k.matchCauseEffect(e,{onFailure:e=>{const n=t(e);switch(n._tag){case"None":return k.failCause(e);case"Some":return n.value}},onSuccess:k.succeed}))),P=(0,u.dual)(2,((e,t)=>k.catchAllCause(e,(e=>{const n=E.find(e,(e=>E.isDieType(e)?g.some(e):g.none()));switch(n._tag){case"None":return k.failCause(e);case"Some":{const r=t(n.value.defect);return"Some"===r._tag?r.value:k.failCause(e)}}})))),D=(0,u.dual)(3,((e,t,n)=>k.catchIf(e,y.isTagged(t),n))),U=(0,u.dual)(2,((e,t)=>{let n;return k.catchIf(e,(e=>(n??=Object.keys(t),y.hasProperty(e,"_tag")&&y.isString(e._tag)&&n.includes(e._tag))),(e=>t[e._tag](e)))})),j=e=>k.matchCause(e,{onFailure:u.identity,onSuccess:()=>E.empty}),q=s.clockWith,W=q(k.succeed),B=(0,u.dual)(2,((e,t)=>k.zipRight(s.sleep(t),e))),z=e=>k.withFiberRuntime(((t,n)=>e({id:t.id(),status:n,interruptors:E.interruptors(t.getFiberRef(k.currentInterruptedCause))}))),$=z((e=>d.size(e.interruptors)>0?k.interrupt:k.void)),V=z(k.succeed),G=e=>ft(e,ye,I.diff),J=e=>ft(e,k.zip(ye,k.runtimeFlags),(([e,t],[n,r])=>[I.diff(e,n),O.diff(t,r)])),H=k.succeed({}),K=x.bind(k.map,k.flatMap),Y=x.bindTo(k.map),Z=x.let_(k.map),Q=(0,u.dual)(2,((e,t)=>k.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=k.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=k.flatMap(a,(i=>i?(r.push(e),k.succeed(!0)):t(e,n)))}return k.map(a,(()=>r))})))),X=(0,u.dual)(2,((e,t)=>k.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=k.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=k.flatMap(a,(i=>k.map(i?t(e,n):k.succeed(!1),(t=>(t||r.push(e),t)))))}return k.map(a,(()=>r))})))),ee=e=>k.map(k.context(),e),te=e=>k.orElse(e,(()=>k.flatMap(k.yieldNow(),(()=>te(e))))),ne=(0,u.dual)(2,((e,t)=>k.map(k.forEachSequential(e,u.identity),i.filterMap(t)))),re=(0,u.dual)(3,((e,t,n)=>ae(e,t,(e=>k.dieSync((()=>n(e))))))),ie=(0,u.dual)(3,((e,t,n)=>ae(e,t,(()=>k.dieMessage(n))))),ae=(0,u.dual)(3,((e,t,n)=>k.flatMap(e,(e=>t(e)?k.succeed(e):n(e))))),se=(0,u.dual)(3,((e,t,n)=>k.suspend((()=>t(e)?k.succeed(e):k.fail(n(e)))))),oe=(0,u.dual)((e=>k.isEffect(e[0])),((e,t,n)=>ae(e,t,(e=>void 0===n?k.fail(new k.NoSuchElementException):k.failSync((()=>n(e))))))),ce=(0,u.dual)(2,((e,t)=>k.suspend((()=>{const n=e[Symbol.iterator](),r=n.next();return r.done?k.succeed(g.none()):le(n,0,t,r.value)})))),le=(e,t,n,r)=>k.flatMap(n(r,t),(i=>{if(i)return k.succeed(g.some(r));const a=e.next();return a.done?k.succeed(g.none()):le(e,t+1,n,a.value)})),ue=e=>k.suspend((()=>{const t=a.fromIterable(e);return a.isNonEmpty(t)?(0,u.pipe)(a.tailNonEmpty(t),i.reduce(a.headNonEmpty(t),((e,t)=>k.orElse(e,(()=>t))))):k.dieSync((()=>new k.IllegalArgumentException("Received an empty collection of effects")))})),fe=(0,u.dual)(2,((e,t)=>k.flip(t(k.flip(e))))),de=(0,u.dual)(2,((e,t)=>k.matchEffect(e,{onFailure:e=>k.succeed(t.onFailure(e)),onSuccess:e=>k.succeed(t.onSuccess(e))}))),pe=(0,u.dual)(2,((e,t)=>k.suspend((()=>he(e[Symbol.iterator](),0,t))))),he=(e,t,n)=>{const r=e.next();return r.done?k.succeed(!0):k.flatMap(n(r.value,t),(r=>r?he(e,t+1,n):k.succeed(r)))},me=e=>{const t=k.flatMap(k.flatMap(e,(()=>k.yieldNow())),(()=>t));return t},ge=function(){let e;return e=1===arguments.length?arguments[0]:arguments[1].bind(arguments[0]),k.suspend((()=>{const t=e(u.pipe),n=(0,r.internalCall)((()=>t.next())),i=e=>e.done?k.succeed(e.value):k.flatMap((0,r.yieldWrapGet)(e.value),(e=>i((0,r.internalCall)((()=>t.next(e))))));return i(n)}))},ye=k.withFiberRuntime((e=>k.succeed(e.getFiberRefs()))),be=e=>k.flatMap(e,(e=>{const t=e[Symbol.iterator]().next();return t.done?k.fail(new k.NoSuchElementException):k.succeed(t.value)})),Se=e=>de(e,{onFailure:u.constVoid,onSuccess:u.constVoid}),ve=e=>k.matchCauseEffect(e,{onFailure:e=>Oe(e,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>k.void}),we=e=>Mt(((t,n)=>l.joinAs(n,t,e))),Ee=e=>de(e,{onFailure:u.constTrue,onSuccess:u.constFalse}),_e=e=>de(e,{onFailure:u.constFalse,onSuccess:u.constTrue}),ke=(e,t)=>k.suspend((()=>t.while(e)?k.flatMap(t.body(e),(e=>ke(e,t))):k.succeed(e))),xe=e=>(...t)=>{const n=g.fromNullable(e);let r;for(let e=0,i=t.length;e<i;e++){const n=t[e];E.isCause(n)&&(r=void 0!==r?E.sequential(r,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return void 0===r&&(r=E.empty),k.withFiberRuntime((e=>(e.log(t,r,n),k.void)))},Ie=xe(),Te=xe(h.Trace),Oe=xe(h.Debug),Ae=xe(h.Info),Ne=xe(h.Warning),Me=xe(h.Error),Ce=xe(h.Fatal),Re=(0,u.dual)(2,((e,t)=>k.flatMap(s.currentTimeMillis,(n=>k.fiberRefLocallyWith(e,k.currentLogSpan,p.prepend(m.make(t,n))))))),Fe=k.fiberRefGet(k.currentLogAnnotations),Le=(e,t)=>t.discard?De(e,t.while,t.step,t.body):k.map(Pe(e,t.while,t.step,t.body),i.fromIterable),Pe=(e,t,n,r)=>k.suspend((()=>t(e)?k.flatMap(r(e),(i=>k.map(Pe(n(e),t,n,r),p.prepend(i)))):k.sync((()=>p.empty())))),De=(e,t,n,r)=>k.suspend((()=>t(e)?k.flatMap(r(e),(()=>De(n(e),t,n,r))):k.void)),Ue=(0,u.dual)(3,((e,t,n)=>k.suspend((()=>{const r=e[Symbol.iterator](),i=[];let a,s=k.succeed(t),o=0;for(;!(a=r.next()).done;){const e=o++,t=a.value;s=k.flatMap(s,(r=>k.map(n(r,t,e),(([e,t])=>(i.push(t),e)))))}return k.map(s,(e=>[e,i]))})))),je=(0,u.dual)(2,((e,t)=>k.matchCauseEffect(e,{onFailure:e=>k.failCauseSync((()=>t(e))),onSuccess:k.succeed}))),qe=e=>(0,u.pipe)(k.deferredMake(),k.flatMap((t=>(0,u.pipe)(J(e),k.intoDeferred(t),$e,k.map((e=>k.zipRight(e,(0,u.pipe)(k.deferredAwait(t),k.flatMap((([e,t])=>k.as(k.zip(Ke(e[0]),k.updateRuntimeFlags(e[1])),t))))))))))),We=e=>k.matchEffect(e,{onFailure:e=>k.succeed(e),onSuccess:k.succeed}),Be=e=>k.map(e,(e=>!e)),ze=e=>k.flatMap(e,(e=>{switch(e._tag){case"None":return k.void;case"Some":return k.fail(new k.NoSuchElementException)}})),$e=e=>k.map(b.make(!0),(t=>k.asVoid(k.whenEffect(e,b.getAndSet(t,!1))))),Ve=e=>k.matchEffect(e,{onFailure:()=>k.succeed(g.none()),onSuccess:e=>k.succeed(g.some(e))}),Ge=(0,u.dual)(2,((e,t)=>k.orElse(e,(()=>k.failSync(t))))),Je=(0,u.dual)(2,((e,t)=>k.orElse(e,(()=>k.sync(t))))),He=e=>k.matchCauseEffect(e,{onFailure:e=>{const t=i.fromIterable(E.failures(e));return 0===t.length?k.failCause(e):k.fail(t)},onSuccess:k.succeed}),Ke=e=>Mt(((t,n)=>(0,u.pipe)(e,I.patch(t,n)))),Ye=e=>e.length>=1?k.async(((t,n)=>{e(n).then((e=>t(k.exitSucceed(e))),(e=>t(k.exitDie(e))))})):k.async((t=>{e().then((e=>t(k.exitSucceed(e))),(e=>t(k.exitDie(e))))})),Ze=(0,u.dual)(3,((e,t,n)=>k.contextWithEffect((r=>k.provideContext(e,o.add(r,t,n)))))),Qe=(0,u.dual)(3,((e,t,n)=>k.contextWithEffect((r=>k.flatMap(n,(n=>k.provideContext(e,(0,u.pipe)(r,o.add(t,n))))))))),Xe=S.randomWith(k.succeed),et=(0,u.dual)(3,((e,t,n)=>i.fromIterable(e).reduce(((e,t,r)=>k.flatMap(e,(e=>n(e,t,r)))),k.succeed(t)))),tt=(0,u.dual)(3,((e,t,n)=>i.fromIterable(e).reduceRight(((e,t,r)=>k.flatMap(e,(e=>n(t,e,r)))),k.succeed(t)))),nt=(0,u.dual)(3,((e,t,n)=>k.flatMap(k.sync((()=>e[Symbol.iterator]())),(e=>rt(e,0,t,n.while,n.body))))),rt=(e,t,n,r,i)=>{const a=e.next();return!a.done&&r(n)?k.flatMap(i(n,a.value,t),(n=>rt(e,t+1,n,r,i))):k.succeed(n)},it=(0,u.dual)(2,((e,t)=>k.suspend((()=>at(e,t))))),at=(e,t)=>k.flatMap(e,(n=>t<=0?k.succeed(n):k.zipRight(k.yieldNow(),at(e,t-1)))),st=e=>k.matchCauseEffect(e,{onFailure:k.fail,onSuccess:k.succeed}),ot=e=>k.suspend((()=>l.setAll(e))),ct=s.sleep,lt=k.succeed(g.none()),ut=e=>k.succeed(g.some(e)),ft=(0,u.dual)(3,((e,t,n)=>k.flatMap(t,(r=>k.flatMap(e,(e=>k.map(t,(t=>[n(r,t),e])))))))),dt=(0,u.dual)((e=>k.isEffect(e[0])),(function(){return pt(arguments[0],"string"===typeof arguments[1]?[T.make(arguments[1],arguments[2])]:Object.entries(arguments[1]).map((([e,t])=>T.make(e,t))))})),pt=(0,u.dual)(2,((e,t)=>k.fiberRefLocallyWith(e,k.currentMetricLabels,(e=>i.union(e,t))))),ht=(0,u.dual)(2,((e,t)=>k.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=k.succeed(!1),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=k.flatMap(a,(i=>i?k.succeed(!0):(r.push(e),t(e,n))))}return k.map(a,(()=>r))})))),mt=(0,u.dual)(2,((e,t)=>k.suspend((()=>{const n=e[Symbol.iterator](),r=[];let i,a=k.succeed(!0),s=0;for(;(i=n.next())&&!i.done;){const e=i.value,n=s++;a=k.flatMap(a,(i=>(0,u.pipe)(i?t(e,n):k.succeed(!1),k.map((t=>(t&&r.push(e),t))))))}return k.map(a,(()=>r))})))),gt=(0,u.dual)(2,((e,{onFailure:t,onSuccess:n})=>k.matchCauseEffect(e,{onFailure:e=>{const n=E.failureOrCause(e);switch(n._tag){case"Left":return k.zipRight(t(n.left),k.failCause(e));case"Right":return k.failCause(e)}},onSuccess:e=>k.as(n(e),e)}))),yt=(0,u.dual)(2,((e,t)=>k.catchAllCause(e,(e=>g.match(E.keepDefects(e),{onNone:()=>k.failCause(e),onSome:n=>k.zipRight(t(n),k.failCause(e))}))))),bt=(0,u.dual)(2,((e,t)=>k.matchCauseEffect(e,{onFailure:e=>{const n=E.failureOrCause(e);switch(n._tag){case"Left":return k.zipRight(t(n.left),k.failCause(e));case"Right":return k.failCause(e)}},onSuccess:k.succeed}))),St=(0,u.dual)(3,((e,t,n)=>bt(e,(e=>y.isTagged(e,t)?n(e):k.void)))),vt=(0,u.dual)(2,((e,t)=>k.matchCauseEffect(e,{onFailure:e=>k.zipRight(t(e),k.failCause(e)),onSuccess:k.succeed}))),wt=e=>Et(e,s.currentTimeNanos),Et=(0,u.dual)(2,((e,t)=>ft(e,t,((e,t)=>c.nanos(t-e))))),_t=w,kt=_t(k.succeed),xt=e=>{let t,n;return"function"===typeof e?t=e:(t=e.try,n=e.catch),t.length>=1?k.async(((e,r)=>{try{t(r).then((t=>e(k.exitSucceed(t))),(t=>e(k.fail(n?n(t):new k.UnknownException(t)))))}catch(i){e(k.fail(n?n(i):new k.UnknownException(i)))}})):k.async((e=>{try{t().then((t=>e(k.exitSucceed(t))),(t=>e(k.fail(n?n(t):new k.UnknownException(t)))))}catch(r){e(k.fail(n?n(r):new k.UnknownException(r)))}}))},It=(0,u.dual)(2,((e,t)=>k.flatMap(e,(e=>C({try:()=>t.try(e),catch:t.catch}))))),Tt=(0,u.dual)(2,((e,t)=>k.flatMap(e,(e=>xt({try:t.try.length>=1?n=>t.try(e,n):()=>t.try(e),catch:t.catch}))))),Ot=(0,u.dual)(2,((e,t)=>k.suspend((()=>t()?lt:N(e))))),At=(0,u.dual)(2,((e,t)=>k.flatMap(t,(t=>t?lt:N(e))))),Nt=e=>je(e,E.flatten),Mt=e=>k.withFiberRuntime((t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),k.void))),Ct=(0,u.dual)(3,((e,t,n)=>k.mapInputContext(e,(e=>o.add(e,t,n(o.unsafeGet(e,t))))))),Rt=(0,u.dual)(2,((e,t)=>k.suspend((()=>t()?k.map(e,g.some):k.succeed(g.none()))))),Ft=(0,u.dual)(3,((e,t,n)=>k.flatMap(k.fiberRefGet(t),(t=>n(t)?k.map(e,(e=>[t,g.some(e)])):k.succeed([t,g.none()]))))),Lt=(0,u.dual)(3,((e,t,n)=>k.flatMap(b.get(t),(t=>n(t)?k.map(e,(e=>[t,g.some(e)])):k.succeed([t,g.none()]))))),Pt=(0,u.dual)(2,((e,t)=>t(e))),Dt=(e,t)=>(...n)=>k.flatMap(e,(e=>t(e)(...n))),Ut=(e,t)=>(...n)=>k.map(e,(e=>t(e)(...n))),jt=e=>new Proxy({},{get:(t,n,r)=>(...t)=>k.flatMap(e,(e=>e[n](...t)))}),qt=e=>new Proxy({},{get:(t,n,r)=>k.flatMap(e,(e=>k.isEffect(e[n])?e[n]:k.succeed(e[n])))}),Wt=e=>({functions:jt(e),constants:qt(e)}),Bt=e=>k.map(k.context(),o.getOption(e)),zt=e=>k.flatMap(k.context(),o.getOption(e)),$t=function(){const e=arguments;return Se(k.flatMap(Jt,(t=>k.sync((()=>{if("string"===typeof e[0])t.attribute(e[0],e[1]);else for(const n in e[0])t.attribute(n,e[0][n])})))))},Vt=(0,u.dual)((e=>k.isEffect(e[0])),(function(){const e=arguments;return k.fiberRefLocallyWith(e[0],k.currentTracerSpanAnnotations,"string"===typeof e[1]?f.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>f.set(e,t,n)),t))})),Gt=zt(v.spanTag),Jt=k.flatMap(k.context(),(e=>{const t=e.unsafeMap.get(v.spanTag.key);return void 0!==t&&"Span"===t._tag?k.succeed(t):k.fail(new k.NoSuchElementException)})),Ht=(0,u.dual)((e=>k.isEffect(e[0])),((e,t,n)=>k.fiberRefLocallyWith(e,k.currentTracerSpanLinks,a.append({_tag:"SpanLink",span:t,attributes:n??{}})))),Kt=BigInt(0),Yt=(e,t,n)=>{if(!1===e.getFiberRef(k.currentTracerEnabled))return k.noopSpan(t);const r=e.getFiberRef(k.currentContext),c=e.getFiberRef(S.currentServices),u=o.get(c,v.tracerTag),d=o.get(c,s.Clock),p=e.getFiberRef(k.currentTracerTimingEnabled),h=e.getFiberRefs(),m=l.get(h,k.currentTracerSpanAnnotations),y=l.get(h,k.currentTracerSpanLinks),b=n.parent?g.some(n.parent):n.root?g.none():o.getOption(r,v.spanTag),w="Some"===y._tag?void 0!==n.links?[...a.toReadonlyArray(y.value),...n.links??[]]:a.toReadonlyArray(y.value):n.links??i.empty(),_=u.span(t,b,n.context??o.empty(),w,p?d.unsafeCurrentTimeNanos():Kt,n.kind??"internal");return"function"===typeof n.captureStackTrace&&E.spanToTrace.set(_,n.captureStackTrace),"Some"===m._tag&&f.forEach(m.value,((e,t)=>_.attribute(t,e))),void 0!==n.attributes&&Object.entries(n.attributes).forEach((([e,t])=>_.attribute(e,t))),_},Zt=(e,t)=>(t=v.addSpanStackTrace(t),k.withFiberRuntime((n=>k.succeed(Yt(n,e,t))))),Qt=k.fiberRefGet(k.currentTracerSpanAnnotations),Xt=k.fiberRefGet(k.currentTracerSpanLinks),en=(e,t,n,r)=>k.sync((()=>{"Ended"!==e.status._tag&&(k.exitIsFailure(t)&&E.spanToTrace.has(e)&&e.attribute("code.stacktrace",E.spanToTrace.get(e)()),e.end(r?n.unsafeCurrentTimeNanos():Kt,t))})),tn=(e,...t)=>{const n=v.addSpanStackTrace(1===t.length?void 0:t[0]),r=t[t.length-1];return k.withFiberRuntime((t=>{const i=Yt(t,e,n),a=t.getFiberRef(k.currentTracerTimingEnabled),s=o.get(t.getFiberRef(S.currentServices),_.clockTag);return k.onExit(r(i),(e=>en(i,e,s,a)))}))},nn=(0,u.dual)(2,((e,t)=>Ze(e,v.spanTag,t))),rn=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=v.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return tn(t,n,(t=>nn(e,t)))}return e=>tn(t,n,(t=>nn(e,t)))},an=e=>function(){let t=e.captureStackTrace??!1;if(!1!==e.captureStackTrace){const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;let r=!1;t=()=>{if(!1!==r)return r;if(n.stack){const e=n.stack.trim().split("\n");return r=e.slice(2).join("\n").trim(),r}}}return k.suspend((()=>{const n="function"===typeof e.options?e.options.apply(null,arguments):e.options;return rn(k.suspend((()=>(0,r.internalCall)((()=>e.body.apply(this,arguments))))),n.name,{...n,captureStackTrace:t})}))},sn=e=>null==e?k.fail(new k.NoSuchElementException):k.succeed(e),on=e=>k.catchAll(k.map(e,g.some),(e=>k.isNoSuchElementException(e)?lt:k.fail(e)))},672620:(e,t,n)=>{n.r(t),n.d(t,{CloseableScopeTypeId:()=>kn,EffectErrorTypeId:()=>R,EffectTypeId:()=>U,ExceededCapacityException:()=>Hn,ExceededCapacityExceptionTypeId:()=>Jn,FiberRefTypeId:()=>xt,IllegalArgumentException:()=>qn,IllegalArgumentExceptionTypeId:()=>jn,InterruptedException:()=>Dn,InterruptedExceptionTypeId:()=>Pn,InvalidPubSubCapacityException:()=>Gn,InvalidPubSubCapacityExceptionTypeId:()=>Vn,NoSuchElementException:()=>zn,NoSuchElementExceptionTypeId:()=>Bn,RequestResolverImpl:()=>zt,RequestResolverTypeId:()=>Wt,RevertFlags:()=>j,RuntimeException:()=>Fn,RuntimeExceptionTypeId:()=>Rn,ScopeTypeId:()=>_n,TimeoutException:()=>Qn,TimeoutExceptionTypeId:()=>Zn,UnknownException:()=>nr,UnknownExceptionTypeId:()=>tr,YieldableError:()=>Mn,acquireUseRelease:()=>V,allLogLevels:()=>kt,andThen:()=>be,as:()=>G,asVoid:()=>J,async:()=>Y,attemptOrElse:()=>Ke,blocked:()=>P,catchAll:()=>Q,catchAllCause:()=>Z,catchIf:()=>X,catchSome:()=>ee,causeSquash:()=>An,causeSquashWith:()=>Nn,checkInterruptible:()=>te,context:()=>ci,contextWith:()=>li,contextWithEffect:()=>ui,currentConcurrency:()=>fn,currentContext:()=>nn,currentForkScopeOverride:()=>yn,currentInterruptedCause:()=>bn,currentLogAnnotations:()=>sn,currentLogLevel:()=>on,currentLogSpan:()=>cn,currentMaxOpsBeforeYield:()=>an,currentMetricLabels:()=>mn,currentRequestBatching:()=>dn,currentSchedulingPriority:()=>rn,currentSpanFromFiber:()=>hi,currentTracerEnabled:()=>Sn,currentTracerSpanAnnotations:()=>wn,currentTracerSpanLinks:()=>En,currentTracerTimingEnabled:()=>vn,currentUnhandledErrorLogLevel:()=>pn,custom:()=>H,deferredAwait:()=>zr,deferredComplete:()=>$r,deferredCompleteWith:()=>Vr,deferredDie:()=>Zr,deferredDieSync:()=>Qr,deferredDone:()=>Gr,deferredFail:()=>Jr,deferredFailCause:()=>Kr,deferredFailCauseSync:()=>Yr,deferredFailSync:()=>Hr,deferredInterrupt:()=>Xr,deferredInterruptWith:()=>ei,deferredIsDone:()=>ti,deferredMake:()=>Wr,deferredMakeAs:()=>Br,deferredPoll:()=>ni,deferredSucceed:()=>ri,deferredSync:()=>ii,deferredUnsafeDone:()=>ai,deferredUnsafeMake:()=>qr,die:()=>se,dieMessage:()=>oe,dieSync:()=>ce,either:()=>le,exit:()=>ue,exitAs:()=>cr,exitAsVoid:()=>lr,exitCauseOption:()=>ur,exitCollectAll:()=>fr,exitDie:()=>dr,exitExists:()=>pr,exitFail:()=>hr,exitFailCause:()=>mr,exitFlatMap:()=>gr,exitFlatMapEffect:()=>yr,exitFlatten:()=>br,exitForEachEffect:()=>Sr,exitFromEither:()=>vr,exitFromOption:()=>wr,exitGetOrElse:()=>Er,exitInterrupt:()=>_r,exitIsExit:()=>ir,exitIsFailure:()=>ar,exitIsInterrupted:()=>or,exitIsSuccess:()=>sr,exitMap:()=>kr,exitMapBoth:()=>xr,exitMapError:()=>Ir,exitMapErrorCause:()=>Tr,exitMatch:()=>Or,exitMatchEffect:()=>Ar,exitSucceed:()=>Nr,exitVoid:()=>Mr,exitZip:()=>Cr,exitZipLeft:()=>Rr,exitZipPar:()=>Lr,exitZipParLeft:()=>Pr,exitZipParRight:()=>Dr,exitZipRight:()=>Fr,exitZipWith:()=>Ur,fail:()=>fe,failCause:()=>pe,failCauseSync:()=>he,failSync:()=>de,fiberId:()=>me,fiberIdWith:()=>ge,fiberRefDelete:()=>Rt,fiberRefGet:()=>Tt,fiberRefGetAndSet:()=>Ot,fiberRefGetAndUpdate:()=>At,fiberRefGetAndUpdateSome:()=>Nt,fiberRefGetWith:()=>Mt,fiberRefLocally:()=>Ht,fiberRefLocallyWith:()=>Kt,fiberRefModify:()=>Lt,fiberRefModifySome:()=>Pt,fiberRefReset:()=>Ft,fiberRefSet:()=>Ct,fiberRefUnsafeMake:()=>Yt,fiberRefUnsafeMakeContext:()=>Xt,fiberRefUnsafeMakeHashSet:()=>Zt,fiberRefUnsafeMakePatch:()=>en,fiberRefUnsafeMakeReadonlyArray:()=>Qt,fiberRefUnsafeMakeRuntimeFlags:()=>tn,fiberRefUpdate:()=>Dt,fiberRefUpdateAndGet:()=>jt,fiberRefUpdateSome:()=>Ut,fiberRefUpdateSomeAndGet:()=>qt,flatMap:()=>ye,flatten:()=>ve,flip:()=>we,forEachSequential:()=>xe,forEachSequentialDiscard:()=>Ie,if_:()=>Te,interrupt:()=>Oe,interruptAsFiber:()=>mt,interruptFiber:()=>ht,interruptWith:()=>Ae,interruptible:()=>Ne,interruptibleMask:()=>Me,intoDeferred:()=>Ce,isEffect:()=>z,isEffectError:()=>F,isExceededCapacityException:()=>Kn,isIllegalArgumentException:()=>Wn,isInterruptedException:()=>Un,isInvalidCapacityError:()=>Yn,isNoSuchElementException:()=>$n,isRequestResolver:()=>$t,isRuntimeException:()=>Ln,isTimeoutException:()=>er,isUnknownException:()=>rr,logLevelAll:()=>gt,logLevelDebug:()=>wt,logLevelError:()=>bt,logLevelFatal:()=>yt,logLevelInfo:()=>vt,logLevelNone:()=>_t,logLevelTrace:()=>Et,logLevelWarning:()=>St,makeEffectError:()=>L,map:()=>Re,mapBoth:()=>Fe,mapError:()=>Le,mapInputContext:()=>pi,matchCause:()=>Ee,matchCauseEffect:()=>_e,matchEffect:()=>ke,metricLabels:()=>gn,never:()=>pt,noopSpan:()=>gi,onError:()=>Pe,onExit:()=>De,onInterrupt:()=>Ue,orDie:()=>qe,orDieWith:()=>We,orElse:()=>je,originalInstance:()=>ie,partitionMap:()=>Be,provideContext:()=>fi,provideSomeContext:()=>di,requestBlockLocally:()=>Gt,resolverLocally:()=>Vt,runRequestBlock:()=>D,runtimeFlags:()=>ze,scopeAddFinalizer:()=>xn,scopeAddFinalizerExit:()=>In,scopeClose:()=>Tn,scopeFork:()=>On,step:()=>Se,succeed:()=>$e,suspend:()=>Ve,sync:()=>Ge,tap:()=>Je,timeoutExceptionFromDuration:()=>Xn,transplant:()=>He,uninterruptible:()=>Ye,uninterruptibleMask:()=>Ze,unsafeAsync:()=>K,updateRuntimeFlags:()=>Xe,void:()=>Qe,whenEffect:()=>et,whileLoop:()=>tt,withConcurrency:()=>nt,withFiberRuntime:()=>$,withMaxOpsBeforeYield:()=>un,withRequestBatching:()=>rt,withRuntimeFlags:()=>it,withSchedulingPriority:()=>ln,withTracerEnabled:()=>at,withTracerTiming:()=>st,withUnhandledErrorLogLevel:()=>hn,yieldNow:()=>ot,zip:()=>ct,zipFlatten:()=>lt,zipLeft:()=>ut,zipRight:()=>ft,zipWith:()=>dt});var r=n(730276),i=n(562635),a=n(128420),s=n(689702),o=n(284073),c=n(757964),l=n(43977),u=n(295602),f=n(361369),d=n(606517),p=n(367337),h=n(827964),m=n(883845),g=n(489425),y=n(645914),b=n(977948),S=n(953533),v=n(856572),w=n(128202),E=n(668481),_=n(908197),k=n(304080),x=n(245779),I=n(68498),T=n(94732),O=n(127576),A=n(889706),N=n(66932),M=n(238961),C=n(127514);const R=Symbol.for("effect/EffectError"),F=e=>(0,v.hasProperty)(e,R),L=e=>({[R]:R,_tag:"EffectError",cause:e}),P=(e,t)=>{const n=new q("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},D=e=>{const t=new q("RunBlocked");return t.effect_instruction_i0=e,t},U=Symbol.for("effect/Effect");class j{patch;op;_op=A.OP_REVERT_FLAGS;constructor(e,t){this.patch=e,this.op=t}}class q{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e}[l.symbol](e){return this===e}[p.symbol](){return p.cached(this,p.random(this))}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:(0,m.toJSON)(this.effect_instruction_i0),effect_instruction_i1:(0,m.toJSON)(this.effect_instruction_i1),effect_instruction_i2:(0,m.toJSON)(this.effect_instruction_i2)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}class W{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[l.symbol](e){return ir(e)&&"Failure"===e._op&&l.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[p.symbol](){return(0,f.pipe)(p.string(this._tag),p.combine(p.hash(this.effect_instruction_i0)),p.cached(this))}get cause(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}class B{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[U]=I.effectVariance;constructor(e){this._op=e,this._tag=e}[l.symbol](e){return ir(e)&&"Success"===e._op&&l.equals(this.effect_instruction_i0,e.effect_instruction_i0)}[p.symbol](){return(0,f.pipe)(p.string(this._tag),p.combine(p.hash(this.effect_instruction_i0)),p.cached(this))}get value(){return this.effect_instruction_i0}pipe(){return(0,S.pipeArguments)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:(0,m.toJSON)(this.value)}}toString(){return(0,m.format)(this.toJSON())}[m.NodeInspectSymbol](){return this.toJSON()}[Symbol.iterator](){return new M.SingleShotGen(new r.YieldWrap(this))}}const z=e=>(0,v.hasProperty)(e,U),$=e=>{const t=new q(A.OP_WITH_RUNTIME);return t.effect_instruction_i0=e,t},V=(0,f.dual)(3,((e,t,n)=>Ze((r=>ye(e,(e=>ye(ue(Ve((()=>r(t(e))))),(t=>Ve((()=>n(e,t))).pipe(_e({onFailure:e=>{switch(t._tag){case A.OP_FAILURE:return pe(_.parallel(t.effect_instruction_i0,e));case A.OP_SUCCESS:return pe(e)}},onSuccess:()=>t})))))))))),G=(0,f.dual)(2,((e,t)=>ye(e,(()=>$e(t))))),J=e=>G(e,void 0),H=function(){const e=new q(A.OP_COMMIT);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw new Error((0,T.getBugErrorMessage)("you're not supposed to end up here"))}return e},K=(e,t=u.none)=>{const n=new q(A.OP_ASYNC);let r;return n.effect_instruction_i0=t=>{r=e(t)},n.effect_instruction_i1=t,void 0!==r?Ue(n,(e=>r)):n},Y=(e,t=u.none)=>H(e,(function(){let e,n;function i(t){e?e(t):void 0===n&&(n=t)}const a=new q(A.OP_ASYNC);let s,o;return a.effect_instruction_i0=t=>{e=t,n&&t(n)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(o=new AbortController,s=(0,r.internalCall)((()=>this.effect_instruction_i0(i,o.signal)))):s=(0,r.internalCall)((()=>this.effect_instruction_i0(i))),s||o?Ue(a,(e=>(o&&o.abort(),s??Qe))):a})),Z=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),Q=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:t,onSuccess:$e}))),X=(0,f.dual)(3,((e,t,n)=>Z(e,(e=>{const r=_.failureOrCause(e);switch(r._tag){case"Left":return t(r.left)?n(r.left):pe(e);case"Right":return pe(r.right)}})))),ee=(0,f.dual)(2,((e,t)=>Z(e,(e=>{const n=_.failureOrCause(e);switch(n._tag){case"Left":return(0,f.pipe)(t(n.left),b.getOrElse((()=>pe(e))));case"Right":return pe(n.right)}})))),te=e=>$(((t,n)=>e(N.interruption(n.runtimeFlags)))),ne=Symbol.for("effect/SpanAnnotation"),re=Symbol.for("effect/OriginalAnnotation"),ie=e=>(0,v.hasProperty)(e,re)?e[re]:e,ae=(e,t)=>b.isSome(t)?new Proxy(e,{has:(e,t)=>t===ne||t===re||t in e,get:(n,r)=>r===ne?t.value:r===re?e:n[r]}):e,se=e=>(0,v.isObject)(e)&&!(ne in e)?$((t=>pe(_.die(ae(e,hi(t)))))):pe(_.die(e)),oe=e=>he((()=>_.die(new Fn(e)))),ce=e=>ye(Ge(e),se),le=e=>ke(e,{onFailure:e=>$e(c.left(e)),onSuccess:e=>$e(c.right(e))}),ue=e=>Ee(e,{onFailure:mr,onSuccess:Nr}),fe=e=>(0,v.isObject)(e)&&!(ne in e)?$((t=>pe(_.fail(ae(e,hi(t)))))):pe(_.fail(e)),de=e=>ye(Ge(e),fe),pe=e=>{const t=new W(A.OP_FAILURE);return t.effect_instruction_i0=e,t},he=e=>ye(Ge(e),pe),me=$((e=>$e(e.id()))),ge=e=>$((t=>e(t.id()))),ye=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_SUCCESS);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n})),be=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return z(n)?n:(0,v.isPromiseLike)(n)?Y((e=>{n.then((t=>e($e(t))),(t=>e(fe(new nr(t)))))})):$e(n)})))),Se=e=>{const t=new q("OnStep");return t.effect_instruction_i0=e,t},ve=e=>ye(e,f.identity),we=e=>ke(e,{onFailure:$e,onSuccess:fe}),Ee=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>$e(t.onFailure(e)),onSuccess:e=>$e(t.onSuccess(e))}))),_e=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_ON_SUCCESS_AND_FAILURE);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n})),ke=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>{if(_.defects(e).length>0)return pe(_.electFailures(e));const n=_.failures(e);return n.length>0?t.onFailure(a.unsafeHead(n)):pe(e)},onSuccess:t.onSuccess}))),xe=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e),r=i.allocate(n.length);let a=0;return G(tt({while:()=>a<n.length,body:()=>t(n[a],a),step:e=>{r[a++]=e}}),r)})))),Ie=(0,f.dual)(2,((e,t)=>Ve((()=>{const n=i.fromIterable(e);let r=0;return tt({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})))),Te=(0,f.dual)((e=>"boolean"===typeof e[0]||z(e[0])),((e,t)=>z(e)?ye(e,(e=>e?t.onTrue():t.onFalse())):e?t.onTrue():t.onFalse())),Oe=ye(me,(e=>Ae(e))),Ae=e=>pe(_.interrupt(e)),Ne=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=w.enable(N.Interruption),t.effect_instruction_i1=()=>e,t},Me=e=>H(e,(function(){const e=new q(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=w.enable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Ce=(0,f.dual)(2,((e,t)=>Ze((n=>ye(ue(n(e)),(e=>Gr(t,e))))))),Re=(0,f.dual)(2,((e,t)=>ye(e,(e=>Ge((()=>t(e))))))),Fe=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>de((()=>t.onFailure(e))),onSuccess:e=>Ge((()=>t.onSuccess(e)))}))),Le=(0,f.dual)(2,((e,t)=>_e(e,{onFailure:e=>{const n=_.failureOrCause(e);switch(n._tag){case"Left":return de((()=>t(n.left)));case"Right":return pe(n.right)}},onSuccess:$e}))),Pe=(0,f.dual)(2,((e,t)=>De(e,(e=>sr(e)?Qe:t(e.effect_instruction_i0))))),De=(0,f.dual)(2,((e,t)=>Ze((n=>_e(n(e),{onFailure:e=>{const n=mr(e);return _e(t(n),{onFailure:t=>mr(_.sequential(e,t)),onSuccess:()=>n})},onSuccess:e=>{const n=Nr(e);return ft(t(n),n)}}))))),Ue=(0,f.dual)(2,((e,t)=>De(e,Or({onFailure:e=>_.isInterruptedOnly(e)?J(t(_.interruptors(e))):Qe,onSuccess:()=>Qe})))),je=(0,f.dual)(2,((e,t)=>Ke(e,t,$e))),qe=e=>We(e,f.identity),We=(0,f.dual)(2,((e,t)=>ke(e,{onFailure:e=>se(t(e)),onSuccess:$e}))),Be=(e,t)=>i.fromIterable(e).reduceRight((([e,n],r)=>{const i=t(r);switch(i._tag){case"Left":return[[i.left,...e],n];case"Right":return[e,[i.right,...n]]}}),[i.empty(),i.empty()]),ze=$(((e,t)=>$e(t.runtimeFlags))),$e=e=>{const t=new B(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Ve=e=>ye(Ge(e),f.identity),Ge=e=>{const t=new q(A.OP_SYNC);return t.effect_instruction_i0=e,t},Je=(0,f.dual)(2,((e,t)=>ye(e,(e=>{const n="function"===typeof t?t(e):t;return z(n)?G(n,e):(0,v.isPromiseLike)(n)?Y((t=>{n.then((n=>t($e(e))),(e=>t(fe(new nr(e)))))})):$e(e)})))),He=e=>$((t=>{const n=t.getFiberRef(yn),r=(0,f.pipe)(n,b.getOrElse((()=>t.scope())));return e(Ht(yn,b.some(r)))})),Ke=(0,f.dual)(3,((e,t,n)=>_e(e,{onFailure:e=>_.defects(e).length>0?pe(b.getOrThrow(_.keepDefectsAndElectFailures(e))):t(),onSuccess:n}))),Ye=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=w.disable(N.Interruption),t.effect_instruction_i1=()=>e,t},Ze=e=>H(e,(function(){const e=new q(A.OP_UPDATE_RUNTIME_FLAGS);return e.effect_instruction_i0=w.disable(N.Interruption),e.effect_instruction_i1=e=>N.interruption(e)?(0,r.internalCall)((()=>this.effect_instruction_i0(Ne))):(0,r.internalCall)((()=>this.effect_instruction_i0(Ye))),e})),Qe=$e(void 0),Xe=e=>{const t=new q(A.OP_UPDATE_RUNTIME_FLAGS);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},et=(0,f.dual)(2,((e,t)=>ye(t,(t=>t?(0,f.pipe)(e,Re(b.some)):$e(b.none()))))),tt=e=>{const t=new q(A.OP_WHILE);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},nt=(0,f.dual)(2,((e,t)=>Ht(e,fn,t))),rt=(0,f.dual)(2,((e,t)=>Ht(e,dn,t))),it=(0,f.dual)(2,((e,t)=>{const n=new q(A.OP_UPDATE_RUNTIME_FLAGS);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n})),at=(0,f.dual)(2,((e,t)=>Ht(e,Sn,t))),st=(0,f.dual)(2,((e,t)=>Ht(e,vn,t))),ot=e=>{const t=new q(A.OP_YIELD);return"undefined"!==typeof e?.priority?ln(t,e.priority):t},ct=(0,f.dual)(2,((e,t)=>ye(e,(e=>Re(t,(t=>[e,t])))))),lt=(0,f.dual)(2,((e,t)=>ye(e,(e=>Re(t,(t=>[...e,t])))))),ut=(0,f.dual)(2,((e,t)=>ye(e,(e=>G(t,e))))),ft=(0,f.dual)(2,((e,t)=>ye(e,(()=>t)))),dt=(0,f.dual)(3,((e,t,n)=>ye(e,(e=>Re(t,(t=>n(e,t))))))),pt=Y((()=>{const e=setInterval((()=>{}),2**31-1);return Ge((()=>clearInterval(e)))})),ht=e=>ye(me,(t=>(0,f.pipe)(e,mt(t)))),mt=(0,f.dual)(2,((e,t)=>ye(e.interruptAsFork(t),(()=>e.await)))),gt={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},yt={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},bt={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},St={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},vt={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},wt={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return(0,S.pipeArguments)(this,arguments)}},Et={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return(0,S.pipeArguments)(this,arguments)}},_t={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return(0,S.pipeArguments)(this,arguments)}},kt=[gt,Et,wt,vt,St,bt,yt,_t],xt=Symbol.for("effect/FiberRef"),It={_A:e=>e},Tt=e=>Lt(e,(e=>[e,e])),Ot=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t])))),At=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,t(e)])))),Nt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[e,b.getOrElse(t(e),(()=>e))])))),Mt=(0,f.dual)(2,((e,t)=>ye(Tt(e),t))),Ct=(0,f.dual)(2,((e,t)=>Lt(e,(()=>[void 0,t])))),Rt=e=>$((t=>(t.unsafeDeleteFiberRef(e),Qe))),Ft=e=>Ct(e,e.initial),Lt=(0,f.dual)(2,((e,t)=>$((n=>{const[r,i]=t(n.getFiberRef(e));return n.setFiberRef(e,i),$e(r)})))),Pt=(e,t,n)=>Lt(e,(e=>b.getOrElse(n(e),(()=>[t,e])))),Dt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,t(e)])))),Ut=(0,f.dual)(2,((e,t)=>Lt(e,(e=>[void 0,b.getOrElse(t(e),(()=>e))])))),jt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=t(e);return[n,n]})))),qt=(0,f.dual)(2,((e,t)=>Lt(e,(e=>{const n=b.getOrElse(t(e),(()=>e));return[n,n]})))),Wt=Symbol.for("effect/RequestResolver"),Bt={_A:e=>e,_R:e=>e};class zt{runAll;target;[Wt]=Bt;constructor(e,t){this.runAll=e,this.target=t}[p.symbol](){return p.cached(this,this.target?p.hash(this.target):p.random(this))}[l.symbol](e){return this.target?$t(e)&&l.equals(this.target,e.target):this===e}identified(...e){return new zt(this.runAll,a.fromIterable(e))}pipe(){return(0,S.pipeArguments)(this,arguments)}}const $t=e=>(0,v.hasProperty)(e,Wt),Vt=(0,f.dual)(3,((e,t,n)=>new zt((r=>Ht(e.runAll(r),t,n)),a.make("Locally",e,t,n)))),Gt=(e,t,n)=>E.reduce(e,Jt(t,n)),Jt=(e,t)=>({emptyCase:()=>E.empty,parCase:(e,t)=>E.par(e,t),seqCase:(e,t)=>E.seq(e,t),singleCase:(n,r)=>E.single(Vt(n,e,t),r)}),Ht=(0,f.dual)(3,((e,t,n)=>V(ut(Tt(t),Ct(t,n)),(()=>e),(e=>Ct(t,e))))),Kt=(0,f.dual)(3,((e,t,n)=>Mt(t,(r=>Ht(e,t,n(r)))))),Yt=(e,t)=>en(e,{differ:x.update(),fork:t?.fork??f.identity,join:t?.join}),Zt=e=>{const t=x.hashSet();return en(e,{differ:t,fork:t.empty})},Qt=e=>{const t=x.readonlyArray(x.update());return en(e,{differ:t,fork:t.empty})},Xt=e=>{const t=x.environment();return en(e,{differ:t,fork:t.empty})},en=(e,t)=>({[xt]:It,initial:e,diff:(e,n)=>t.differ.diff(e,n),combine:(e,n)=>t.differ.combine(e,n),patch:e=>n=>t.differ.patch(e,n),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return(0,S.pipeArguments)(this,arguments)}}),tn=e=>en(e,{differ:N.differ,fork:N.differ.empty}),nn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentContext"),(()=>Xt(s.empty()))),rn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentSchedulingPriority"),(()=>Yt(0))),an=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),(()=>Yt(2048))),sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogAnnotation"),(()=>Yt(h.empty()))),on=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogLevel"),(()=>Yt(vt))),cn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentLogSpan"),(()=>Yt(g.empty()))),ln=(0,f.dual)(2,((e,t)=>Ht(e,rn,t))),un=(0,f.dual)(2,((e,t)=>Ht(e,an,t))),fn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentConcurrency"),(()=>Yt("unbounded"))),dn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentRequestBatching"),(()=>Yt(!0))),pn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),(()=>Yt(b.some(wt)))),hn=(0,f.dual)(2,((e,t)=>Ht(e,pn,t))),mn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentMetricLabels"),(()=>Qt(i.empty()))),gn=Tt(mn),yn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentForkScopeOverride"),(()=>Yt(b.none(),{fork:()=>b.none(),join:(e,t)=>e}))),bn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentInterruptedCause"),(()=>Yt(_.empty,{fork:()=>_.empty,join:(e,t)=>e}))),Sn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerEnabled"),(()=>Yt(!0))),vn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerTiming"),(()=>Yt(!0))),wn=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),(()=>Yt(h.empty()))),En=(0,d.globalValue)(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),(()=>Yt(a.empty()))),_n=Symbol.for("effect/Scope"),kn=Symbol.for("effect/CloseableScope"),xn=(e,t)=>e.addFinalizer((()=>J(t))),In=(e,t)=>e.addFinalizer(t),Tn=(e,t)=>e.close(t),On=(e,t)=>e.fork(t),An=e=>Nn(f.identity)(e),Nn=(0,f.dual)(2,((e,t)=>{const n=(0,f.pipe)(e,_.failureOption,b.map(t));switch(n._tag){case"None":return(0,f.pipe)(_.defects(e),a.head,b.match({onNone:()=>{const t=i.fromIterable(_.interruptors(e)).flatMap((e=>i.fromIterable(u.ids(e)).map((e=>`#${e}`))));return new Dn(t?`Interrupted by fibers: ${t.join(", ")}`:void 0)},onSome:f.identity}));case"Some":return n.value}})),Mn=function(){class e extends globalThis.Error{commit(){return fe(this)}toJSON(){return{...this}}[m.NodeInspectSymbol](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}\n${this.stack.split("\n").slice(1).join("\n")}`:this.toString():this}}return Object.assign(e.prototype,I.StructuralCommitPrototype),e}(),Cn=(e,t)=>{class n extends Mn{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},Rn=Symbol.for("effect/Cause/errors/RuntimeException"),Fn=Cn({[Rn]:Rn},"RuntimeException"),Ln=e=>(0,v.hasProperty)(e,Rn),Pn=Symbol.for("effect/Cause/errors/InterruptedException"),Dn=Cn({[Pn]:Pn},"InterruptedException"),Un=e=>(0,v.hasProperty)(e,Pn),jn=Symbol.for("effect/Cause/errors/IllegalArgument"),qn=Cn({[jn]:jn},"IllegalArgumentException"),Wn=e=>(0,v.hasProperty)(e,jn),Bn=Symbol.for("effect/Cause/errors/NoSuchElement"),zn=Cn({[Bn]:Bn},"NoSuchElementException"),$n=e=>(0,v.hasProperty)(e,Bn),Vn=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),Gn=Cn({[Vn]:Vn},"InvalidPubSubCapacityException"),Jn=Symbol.for("effect/Cause/errors/ExceededCapacityException"),Hn=Cn({[Jn]:Jn},"ExceededCapacityException"),Kn=e=>(0,v.hasProperty)(e,Jn),Yn=e=>(0,v.hasProperty)(e,Vn),Zn=Symbol.for("effect/Cause/errors/Timeout"),Qn=Cn({[Zn]:Zn},"TimeoutException"),Xn=e=>new Qn(`Operation timed out before the specified duration of '${o.format(e)}' elapsed`),er=e=>(0,v.hasProperty)(e,Zn),tr=Symbol.for("effect/Cause/errors/UnknownException"),nr=function(){class e extends Mn{error;_tag="UnknownException";constructor(e,t){super(t??((0,v.hasProperty)(e,"message")&&(0,v.isString)(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[tr]:tr,name:"UnknownException"}),e}(),rr=e=>(0,v.hasProperty)(e,tr),ir=e=>z(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),ar=e=>"Failure"===e._tag,sr=e=>"Success"===e._tag,or=e=>{switch(e._tag){case A.OP_FAILURE:return _.isInterrupted(e.effect_instruction_i0);case A.OP_SUCCESS:return!1}},cr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t)}})),lr=e=>cr(e,void 0),ur=e=>{switch(e._tag){case A.OP_FAILURE:return b.some(e.effect_instruction_i0);case A.OP_SUCCESS:return b.none()}},fr=(e,t)=>jr(e,t?.parallel?_.parallel:_.sequential),dr=e=>mr(_.die(e)),pr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return!1;case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),hr=e=>mr(_.fail(e)),mr=e=>{const t=new W(A.OP_FAILURE);return t.effect_instruction_i0=e,t},gr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),yr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return $e(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return t(e.effect_instruction_i0)}})),br=e=>(0,f.pipe)(e,gr(f.identity)),Sr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return $e(mr(e.effect_instruction_i0));case A.OP_SUCCESS:return ue(t(e.effect_instruction_i0))}})),vr=e=>{switch(e._tag){case"Left":return hr(e.left);case"Right":return Nr(e.right)}},wr=e=>{switch(e._tag){case"None":return hr(void 0);case"Some":return Nr(e.value)}},Er=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return e.effect_instruction_i0}})),_r=e=>mr(_.interrupt(e)),kr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(e.effect_instruction_i0);case A.OP_SUCCESS:return Nr(t(e.effect_instruction_i0))}})),xr=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,_.map(t)));case A.OP_SUCCESS:return Nr(n(e.effect_instruction_i0))}})),Ir=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr((0,f.pipe)(e.effect_instruction_i0,_.map(t)));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Tr=(0,f.dual)(2,((e,t)=>{switch(e._tag){case A.OP_FAILURE:return mr(t(e.effect_instruction_i0));case A.OP_SUCCESS:return Nr(e.effect_instruction_i0)}})),Or=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Ar=(0,f.dual)(2,((e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case A.OP_FAILURE:return t(e.effect_instruction_i0);case A.OP_SUCCESS:return n(e.effect_instruction_i0)}})),Nr=e=>{const t=new B(A.OP_SUCCESS);return t.effect_instruction_i0=e,t},Mr=Nr(void 0),Cr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:_.sequential}))),Rr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:_.sequential}))),Fr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:_.sequential}))),Lr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>[e,t],onFailure:_.parallel}))),Pr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>e,onFailure:_.parallel}))),Dr=(0,f.dual)(2,((e,t)=>Ur(e,t,{onSuccess:(e,t)=>t,onFailure:_.parallel}))),Ur=(0,f.dual)(3,((e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case A.OP_FAILURE:switch(t._tag){case A.OP_SUCCESS:return mr(e.effect_instruction_i0);case A.OP_FAILURE:return mr(n(e.effect_instruction_i0,t.effect_instruction_i0))}case A.OP_SUCCESS:switch(t._tag){case A.OP_SUCCESS:return Nr(r(e.effect_instruction_i0,t.effect_instruction_i0));case A.OP_FAILURE:return mr(t.effect_instruction_i0)}}})),jr=(e,t)=>{const n=a.fromIterable(e);return a.isNonEmpty(n)?(0,f.pipe)(a.tailNonEmpty(n),i.reduce((0,f.pipe)(a.headNonEmpty(n),kr(a.of)),((e,n)=>(0,f.pipe)(e,Ur(n,{onSuccess:(e,t)=>(0,f.pipe)(e,a.prepend(t)),onFailure:t})))),kr(a.reverse),kr((e=>a.toReadonlyArray(e))),b.some):b.none()},qr=e=>({[k.DeferredTypeId]:k.deferredVariance,state:y.make(k.pending([])),blockingOn:e,pipe(){return(0,S.pipeArguments)(this,arguments)}}),Wr=()=>ye(me,(e=>Br(e))),Br=e=>Ge((()=>qr(e))),zr=e=>Y((t=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return t(n.effect);case O.OP_STATE_PENDING:return n.joiners.push(t),si(e,t)}}),e.blockingOn),$r=(0,f.dual)(2,((e,t)=>Ce(t,e))),Vr=(0,f.dual)(2,((e,t)=>Ge((()=>{const n=y.get(e.state);switch(n._tag){case O.OP_STATE_DONE:return!1;case O.OP_STATE_PENDING:y.set(e.state,k.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t);return!0}})))),Gr=(0,f.dual)(2,((e,t)=>Vr(e,t))),Jr=(0,f.dual)(2,((e,t)=>Vr(e,fe(t)))),Hr=(0,f.dual)(2,((e,t)=>Vr(e,de(t)))),Kr=(0,f.dual)(2,((e,t)=>Vr(e,pe(t)))),Yr=(0,f.dual)(2,((e,t)=>Vr(e,he(t)))),Zr=(0,f.dual)(2,((e,t)=>Vr(e,se(t)))),Qr=(0,f.dual)(2,((e,t)=>Vr(e,ce(t)))),Xr=e=>ye(me,(t=>Vr(e,Ae(t)))),ei=(0,f.dual)(2,((e,t)=>Vr(e,Ae(t)))),ti=e=>Ge((()=>y.get(e.state)._tag===O.OP_STATE_DONE)),ni=e=>Ge((()=>{const t=y.get(e.state);switch(t._tag){case O.OP_STATE_DONE:return b.some(t.effect);case O.OP_STATE_PENDING:return b.none()}})),ri=(0,f.dual)(2,((e,t)=>Vr(e,$e(t)))),ii=(0,f.dual)(2,((e,t)=>Vr(e,Ge(t)))),ai=(e,t)=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){y.set(e.state,k.done(t));for(let e=0,r=n.joiners.length;e<r;e++)n.joiners[e](t)}},si=(e,t)=>Ge((()=>{const n=y.get(e.state);if(n._tag===O.OP_STATE_PENDING){const e=n.joiners.indexOf(t);e>=0&&n.joiners.splice(e,1)}})),oi=Tt(nn),ci=()=>oi,li=e=>Re(ci(),e),ui=e=>ye(ci(),e),fi=(0,f.dual)(2,((e,t)=>Ht(nn,t)(e))),di=(0,f.dual)(2,((e,t)=>Kt(nn,(e=>s.merge(e,t)))(e))),pi=(0,f.dual)(2,((e,t)=>ui((n=>fi(e,t(n)))))),hi=e=>{const t=e.getFiberRef(nn).unsafeMap.get(C.spanTag.key);return void 0!==t&&"Span"===t._tag?b.some(t):b.none()},mi={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:b.none(),context:s.empty(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Mr},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},gi=e=>{const t=Object.create(mi);return t.name=e,t}},234951:(e,t,n)=>{n.r(t),n.d(t,{ArrayProto:()=>s,Structural:()=>o,struct:()=>c});var r=n(43977),i=n(367337),a=n(68498);const s=Object.assign(Object.create(Array.prototype),{[i.symbol](){return i.cached(this,i.array(this))},[r.symbol](e){return!(!Array.isArray(e)||this.length!==e.length)&&this.every(((t,n)=>r.equals(t,e[n])))}}),o=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=a.StructuralPrototype,e}(),c=e=>Object.assign(Object.create(a.StructuralPrototype),e)},344862:(e,t,n)=>{n.r(t),n.d(t,{clockWith:()=>g,config:()=>E,configOrDie:()=>_,configProviderWith:()=>w,currentServices:()=>h,currentTimeMillis:()=>y,currentTimeNanos:()=>b,liveServices:()=>p,next:()=>I,nextBoolean:()=>O,nextInt:()=>T,nextIntBetween:()=>N,nextRange:()=>A,randomWith:()=>k,shuffle:()=>M,sleep:()=>m,tracerWith:()=>C,withClock:()=>S,withConfigProvider:()=>v,withRandom:()=>x,withTracer:()=>R});var r=n(689702),i=n(284073),a=n(361369),s=n(606517),o=n(114969),c=n(717172),l=n(672620),u=n(272572),f=n(937540),d=n(127514);const p=(0,a.pipe)(r.empty(),r.add(o.clockTag,o.make()),r.add(u.consoleTag,u.defaultConsole),r.add(f.randomTag,f.make(Math.random())),r.add(c.configProviderTag,c.fromEnv()),r.add(d.tracerTag,d.nativeTracer)),h=(0,s.globalValue)(Symbol.for("effect/DefaultServices/currentServices"),(()=>l.fiberRefUnsafeMakeContext(p))),m=e=>{const t=i.decode(e);return g((e=>e.sleep(t)))},g=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,o.clockTag)))),y=g((e=>e.currentTimeMillis)),b=g((e=>e.currentTimeNanos)),S=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(o.clockTag,t))(e))),v=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(c.configProviderTag,t))(e))),w=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,c.configProviderTag)))),E=e=>w((t=>t.load(e))),_=e=>l.orDie(w((t=>t.load(e)))),k=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,f.randomTag)))),x=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(f.randomTag,t))(e))),I=k((e=>e.next)),T=k((e=>e.nextInt)),O=k((e=>e.nextBoolean)),A=(e,t)=>k((n=>n.nextRange(e,t))),N=(e,t)=>k((n=>n.nextIntBetween(e,t))),M=e=>k((t=>t.shuffle(e))),C=e=>l.fiberRefGetWith(h,(t=>e(r.get(t,d.tracerTag)))),R=(0,a.dual)(2,((e,t)=>l.fiberRefLocallyWith(h,r.add(d.tracerTag,t))(e)))},272572:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>a,consoleTag:()=>s,defaultConsole:()=>o});var r=n(689702),i=n(672620);const a=Symbol.for("effect/Console"),s=r.GenericTag("effect/Console"),o={[a]:a,assert:(e,...t)=>i.sync((()=>{console.assert(e,...t)})),clear:i.sync((()=>{console.clear()})),count:e=>i.sync((()=>{console.count(e)})),countReset:e=>i.sync((()=>{console.countReset(e)})),debug:(...e)=>i.sync((()=>{console.debug(...e)})),dir:(e,t)=>i.sync((()=>{console.dir(e,t)})),dirxml:(...e)=>i.sync((()=>{console.dirxml(...e)})),error:(...e)=>i.sync((()=>{console.error(...e)})),group:e=>e?.collapsed?i.sync((()=>console.groupCollapsed(e?.label))):i.sync((()=>console.group(e?.label))),groupEnd:i.sync((()=>{console.groupEnd()})),info:(...e)=>i.sync((()=>{console.info(...e)})),log:(...e)=>i.sync((()=>{console.log(...e)})),table:(e,t)=>i.sync((()=>{console.table(e,t)})),time:e=>i.sync((()=>console.time(e))),timeEnd:e=>i.sync((()=>console.timeEnd(e))),timeLog:(e,...t)=>i.sync((()=>{console.timeLog(e,...t)})),trace:(...e)=>i.sync((()=>{console.trace(...e)})),warn:(...e)=>i.sync((()=>{console.warn(...e)})),unsafe:console}},304080:(e,t,n)=>{n.r(t),n.d(t,{DeferredTypeId:()=>i,deferredVariance:()=>a,done:()=>o,pending:()=>s});var r=n(127576);const i=Symbol.for("effect/Deferred"),a={_E:e=>e,_A:e=>e},s=e=>({_tag:r.OP_STATE_PENDING,joiners:e}),o=e=>({_tag:r.OP_STATE_DONE,effect:e})},245779:(e,t,n)=>{n.r(t),n.d(t,{DifferProto:()=>d,DifferTypeId:()=>f,chunk:()=>m,environment:()=>h,hashMap:()=>g,hashSet:()=>y,make:()=>p,orElseEither:()=>b,readonlyArray:()=>S,transform:()=>v,update:()=>w,updateWith:()=>E,zip:()=>_});var r=n(43977),i=n(361369),a=n(211635),s=n(281),o=n(889542),c=n(861324),l=n(888961),u=n(776273);const f=Symbol.for("effect/Differ"),d={[f]:{_P:i.identity,_V:i.identity}},p=e=>{const t=Object.create(d);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},h=()=>p({empty:s.empty(),combine:(e,t)=>s.combine(t)(e),diff:(e,t)=>s.diff(e,t),patch:(e,t)=>s.patch(t)(e)}),m=e=>p({empty:a.empty(),combine:(e,t)=>a.combine(t)(e),diff:(t,n)=>a.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>a.patch(n,e)(t)}),g=e=>p({empty:o.empty(),combine:(e,t)=>o.combine(t)(e),diff:(t,n)=>o.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>o.patch(n,e)(t)}),y=()=>p({empty:c.empty(),combine:(e,t)=>c.combine(t)(e),diff:(e,t)=>c.diff(e,t),patch:(e,t)=>c.patch(t)(e)}),b=i.dual(2,((e,t)=>p({empty:l.empty(),combine:(e,t)=>l.combine(e,t),diff:(n,r)=>l.diff({oldValue:n,newValue:r,left:e,right:t}),patch:(n,r)=>l.patch(n,{oldValue:r,left:e,right:t})}))),S=e=>p({empty:u.empty(),combine:(e,t)=>u.combine(e,t),diff:(t,n)=>u.diff({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>u.patch(t,n,e)}),v=i.dual(2,((e,{toNew:t,toOld:n})=>p({empty:e.empty,combine:(t,n)=>e.combine(t,n),diff:(t,r)=>e.diff(n(t),n(r)),patch:(r,i)=>t(e.patch(r,n(i)))}))),w=()=>E(((e,t)=>t)),E=e=>p({empty:i.identity,combine:(e,t)=>e===i.identity?t:t===i.identity?e:n=>t(e(n)),diff:(e,t)=>r.equals(e,t)?i.identity:(0,i.constant)(t),patch:(t,n)=>e(n,t(n))}),_=i.dual(2,((e,t)=>p({empty:[e.empty,t.empty],combine:(n,r)=>[e.combine(n[0],r[0]),t.combine(n[1],r[1])],diff:(n,r)=>[e.diff(n[0],r[0]),t.diff(n[1],r[1])],patch:(n,r)=>[e.patch(n[0],r[0]),t.patch(n[1],r[1])]})))},211635:(e,t,n)=>{n.r(t),n.d(t,{ChunkPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>v});var r=n(128420),i=n(43977),a=n(361369),s=n(234951);const o=Symbol.for("effect/DifferChunkPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=Object.assign(Object.create(l),{_tag:"Append"}),m=Object.assign(Object.create(l),{_tag:"Slice"}),g=Object.assign(Object.create(l),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=r.unsafeGet(t)(e.oldValue),o=r.unsafeGet(t)(e.newValue),c=e.differ.diff(s,o);i.equals(c,e.differ.empty)||(n=(0,a.pipe)(n,S(y(t,c)))),t+=1}return t<e.oldValue.length&&(n=(0,a.pipe)(n,S(((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t)))),t<e.newValue.length&&(n=(0,a.pipe)(n,S((e=>{const t=Object.create(h);return t.values=e,t})(r.drop(t)(e.newValue))))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),v=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Append":i=r.appendAll(e.values)(i),a=t;break;case"Slice":{const n=r.toReadonlyArray(i);i=r.unsafeFromArray(n.slice(e.from,e.until)),a=t;break}case"Update":{const s=r.toReadonlyArray(i);s[e.index]=n.patch(e.patch,s[e.index]),i=r.unsafeFromArray(s),a=t;break}}}return i}))},281:(e,t,n)=>{n.r(t),n.d(t,{ContextPatchTypeId:()=>c,combine:()=>E,diff:()=>w,empty:()=>p,patch:()=>_});var r=n(128420),i=n(43977),a=n(361369),s=n(883768),o=n(234951);const c=Symbol.for("effect/DifferContextPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=Object.assign(Object.create(u),{_tag:"AddService"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.service=t,n},y=Object.assign(Object.create(u),{_tag:"RemoveService"}),b=e=>{const t=Object.create(y);return t.key=e,t},S=Object.assign(Object.create(u),{_tag:"UpdateService"}),v=(e,t)=>{const n=Object.create(S);return n.key=e,n.update=t,n},w=(e,t)=>{const n=new Map(e.unsafeMap);let r=p();for(const[a,s]of t.unsafeMap.entries())if(n.has(a)){const e=n.get(a);n.delete(a),i.equals(e,s)||(r=E(v(a,(()=>s)))(r))}else n.delete(a),r=E(g(a,s))(r);for(const[i]of n.entries())r=E(b(i))(r);return r},E=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),_=a.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=!1,i=r.of(e);const a=new Map(t.unsafeMap);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AddService":a.set(e.key,e.service),i=t;break;case"AndThen":i=r.prepend(r.prepend(t,e.second),e.first);break;case"RemoveService":a.delete(e.key),i=t;break;case"UpdateService":a.set(e.key,e.update(a.get(e.key))),n=!0,i=t}}if(!n)return(0,s.makeContext)(a);const o=new Map;for(const[r]of t.unsafeMap)a.has(r)&&(o.set(r,a.get(r)),a.delete(r));for(const[r,s]of a)o.set(r,s);return(0,s.makeContext)(o)}))},889542:(e,t,n)=>{n.r(t),n.d(t,{HashMapPatchTypeId:()=>c,combine:()=>w,diff:()=>v,empty:()=>p,patch:()=>E});var r=n(128420),i=n(43977),a=n(361369),s=n(827964),o=n(234951);const c=Symbol.for("effect/DifferHashMapPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Key:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=Object.assign(Object.create(u),{_tag:"Add"}),g=(e,t)=>{const n=Object.create(m);return n.key=e,n.value=t,n},y=Object.assign(Object.create(u),{_tag:"Remove"}),b=Object.assign(Object.create(u),{_tag:"Update"}),S=(e,t)=>{const n=Object.create(b);return n.key=e,n.patch=t,n},v=e=>{const[t,n]=s.reduce([e.oldValue,p()],(([t,n],r,a)=>{const o=s.get(a)(t);switch(o._tag){case"Some":{const c=e.differ.diff(o.value,r);return i.equals(c,e.differ.empty)?[s.remove(a)(t),n]:[s.remove(a)(t),w(S(a,c))(n)]}case"None":return[t,w(g(a,r))(n)]}}))(e.newValue);return s.reduce(n,((e,t,n)=>w((e=>{const t=Object.create(y);return t.key=e,t})(n))(e)))(t)},w=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n})(e,t))),E=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t,a=r.of(e);for(;r.isNonEmpty(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":a=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":i=s.set(e.key,e.value)(i),a=t;break;case"Remove":i=s.remove(e.key)(i),a=t;break;case"Update":{const r=s.get(e.key)(i);"Some"===r._tag&&(i=s.set(e.key,n.patch(e.patch,r.value))(i)),a=t;break}}}return i}))},861324:(e,t,n)=>{n.r(t),n.d(t,{HashSetPatchTypeId:()=>o,combine:()=>v,diff:()=>S,empty:()=>d,makeAdd:()=>g,makeAndThen:()=>h,makeRemove:()=>b,patch:()=>w});var r=n(128420),i=n(361369),a=n(227561),s=n(234951);const o=Symbol.for("effect/DifferHashSetPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Key:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=(e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n},m=Object.assign(Object.create(l),{_tag:"Add"}),g=e=>{const t=Object.create(m);return t.value=e,t},y=Object.assign(Object.create(l),{_tag:"Remove"}),b=e=>{const t=Object.create(y);return t.value=e,t},S=(e,t)=>{const[n,r]=a.reduce([e,d()],(([e,t],n)=>a.has(n)(e)?[a.remove(n)(e),t]:[e,v(g(n))(t)]))(t);return a.reduce(r,((e,t)=>v(b(t))(e)))(n)},v=i.dual(2,((e,t)=>h(e,t))),w=i.dual(2,((e,t)=>{if("Empty"===e._tag)return t;let n=t,i=r.of(e);for(;r.isNonEmpty(i);){const e=r.headNonEmpty(i),t=r.tailNonEmpty(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":i=r.prepend(e.first)(r.prepend(e.second)(t));break;case"Add":n=a.add(e.value)(n),i=t;break;case"Remove":n=a.remove(e.value)(n),i=t}}return n}))},888961:(e,t,n)=>{n.r(t),n.d(t,{OrPatchTypeId:()=>c,combine:()=>x,diff:()=>k,empty:()=>p,makeAndThen:()=>m,makeSetLeft:()=>y,makeSetRight:()=>S,makeUpdateLeft:()=>w,makeUpdateRight:()=>_,patch:()=>I});var r=n(128420),i=n(757964),a=n(43977),s=n(361369),o=n(234951);const c=Symbol.for("effect/DifferOrPatch");function l(e){return e}const u={...o.Structural.prototype,[c]:{_Value:l,_Key:l,_Patch:l}},f=Object.assign(Object.create(u),{_tag:"Empty"}),d=Object.create(f),p=()=>d,h=Object.assign(Object.create(u),{_tag:"AndThen"}),m=(e,t)=>{const n=Object.create(h);return n.first=e,n.second=t,n},g=Object.assign(Object.create(u),{_tag:"SetLeft"}),y=e=>{const t=Object.create(g);return t.value=e,t},b=Object.assign(Object.create(u),{_tag:"SetRight"}),S=e=>{const t=Object.create(b);return t.value=e,t},v=Object.assign(Object.create(u),{_tag:"UpdateLeft"}),w=e=>{const t=Object.create(v);return t.patch=e,t},E=Object.assign(Object.create(u),{_tag:"UpdateRight"}),_=e=>{const t=Object.create(E);return t.patch=e,t},k=e=>{switch(e.oldValue._tag){case"Left":switch(e.newValue._tag){case"Left":{const t=e.left.diff(e.oldValue.left,e.newValue.left);return a.equals(t,e.left.empty)?p():w(t)}case"Right":return S(e.newValue.right)}case"Right":switch(e.newValue._tag){case"Left":return y(e.newValue.left);case"Right":{const t=e.right.diff(e.oldValue.right,e.newValue.right);return a.equals(t,e.right.empty)?p():_(t)}}}},x=s.dual(2,((e,t)=>m(e,t))),I=s.dual(2,((e,{left:t,oldValue:n,right:a})=>{if("Empty"===e._tag)return n;let s=r.of(e),o=n;for(;r.isNonEmpty(s);){const e=r.headNonEmpty(s),n=r.tailNonEmpty(s);switch(e._tag){case"Empty":s=n;break;case"AndThen":s=r.prepend(e.first)(r.prepend(e.second)(n));break;case"UpdateLeft":"Left"===o._tag&&(o=i.left(t.patch(e.patch,o.left))),s=n;break;case"UpdateRight":"Right"===o._tag&&(o=i.right(a.patch(e.patch,o.right))),s=n;break;case"SetLeft":o=i.left(e.value),s=n;break;case"SetRight":o=i.right(e.value),s=n}}return o}))},776273:(e,t,n)=>{n.r(t),n.d(t,{ReadonlyArrayPatchTypeId:()=>o,combine:()=>S,diff:()=>b,empty:()=>d,patch:()=>v});var r=n(562635),i=n(43977),a=n(361369),s=n(234951);const o=Symbol.for("effect/DifferReadonlyArrayPatch");function c(e){return e}const l={...s.Structural.prototype,[o]:{_Value:c,_Patch:c}},u=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(u),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),h=Object.assign(Object.create(l),{_tag:"Append"}),m=Object.assign(Object.create(l),{_tag:"Slice"}),g=Object.assign(Object.create(l),{_tag:"Update"}),y=(e,t)=>{const n=Object.create(g);return n.index=e,n.patch=t,n},b=e=>{let t=0,n=d();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],a=e.newValue[t],s=e.differ.diff(r,a);i.equals(s,e.differ.empty)||(n=S(n,y(t,s))),t+=1}return t<e.oldValue.length&&(n=S(n,((e,t)=>{const n=Object.create(m);return n.from=e,n.until=t,n})(0,t))),t<e.newValue.length&&(n=S(n,(e=>{const t=Object.create(h);return t.values=e,t})(r.drop(t)(e.newValue)))),n},S=a.dual(2,((e,t)=>((e,t)=>{const n=Object.create(p);return n.first=e,n.second=t,n})(e,t))),v=a.dual(3,((e,t,n)=>{if("Empty"===e._tag)return t;let i=t.slice(),a=r.of(e);for(;r.isNonEmptyArray(a);){const e=r.headNonEmpty(a),t=r.tailNonEmpty(a);switch(e._tag){case"Empty":a=t;break;case"AndThen":t.unshift(e.first,e.second),a=t;break;case"Append":for(const t of e.values)i.push(t);a=t;break;case"Slice":i=i.slice(e.from,e.until),a=t;break;case"Update":i[e.index]=n.patch(e.patch,i[e.index]),a=t}}return i}))},91276:(e,t,n)=>{n.r(t),n.d(t,{bind:()=>s,bindTo:()=>a,let_:()=>i});var r=n(361369);const i=e=>(0,r.dual)(3,((t,n,r)=>e(t,(e=>Object.assign({},e,{[n]:r(e)}))))),a=e=>(0,r.dual)(2,((t,n)=>e(t,(e=>({[n]:e}))))),s=(e,t)=>(0,r.dual)(3,((n,r,i)=>t(n,(t=>e(i(t),(e=>Object.assign({},t,{[r]:e})))))))},212164:(e,t,n)=>{n.r(t),n.d(t,{SynchronizedTypeId:()=>Q,awaitAllChildren:()=>O,cached:()=>A,cachedFunction:()=>z,cachedInvalidateWithTTL:()=>N,ensuringChild:()=>F,ensuringChildren:()=>L,forkAll:()=>P,forkIn:()=>D,forkScoped:()=>U,fromFiber:()=>j,fromFiberEffect:()=>q,makeSemaphore:()=>T,makeSynchronized:()=>te,raceFirst:()=>$,scheduleForked:()=>V,supervised:()=>G,synchronizedVariance:()=>X,timeout:()=>J,timeoutFail:()=>H,timeoutFailCause:()=>K,timeoutOption:()=>Y,timeoutTo:()=>Z,unsafeMakeSemaphore:()=>I,unsafeMakeSynchronized:()=>ne,updateSomeAndGetEffectSynchronized:()=>re,zipFiber:()=>ie,zipLeftFiber:()=>ae,zipRightFiber:()=>se,zipWithFiber:()=>oe});var r=n(284073),i=n(43977),a=n(896949),s=n(295602),o=n(361369),c=n(367337),l=n(714349),u=n(977948),f=n(953533),d=n(856572),p=n(220209),h=n(71108),m=n(908197),g=n(5316),y=n(672620),b=n(232628),S=n(424285),v=n(858657),w=n(508977),E=n(361974),_=n(141324),k=n(95807);class x{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>y.async((t=>{if(this.free<e){const n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,t(y.succeed(e)))};return this.waiters.add(n),y.sync((()=>{this.waiters.delete(n)}))}return this.taken+=e,t(y.succeed(e))}));updateTaken=e=>y.withFiberRuntime((t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(h.currentScheduler).scheduleTask((()=>{const e=this.waiters.values();let t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()}),t.getFiberRef(y.currentSchedulingPriority)),y.succeed(this.free))));release=e=>this.updateTaken((t=>t-e));releaseAll=this.updateTaken((e=>0));withPermits=e=>t=>y.uninterruptibleMask((n=>y.flatMap(n(this.take(e)),(e=>v.ensuring(n(t),this.release(e))))))}const I=e=>new x(e),T=e=>y.sync((()=>I(e))),O=e=>L(e,v.fiberAwaitAll),A=(0,o.dual)(2,((e,t)=>y.map(N(e,t),(e=>e[0])))),N=(0,o.dual)(2,((e,t)=>{const n=r.decode(t);return y.flatMap(y.context(),(t=>y.map(te(u.none()),(r=>[y.provideContext(C(e,n,r),t),R(r)]))))})),M=(e,t,n)=>{const i=r.toMillis(r.decode(t));return(0,o.pipe)(y.deferredMake(),y.tap((t=>y.intoDeferred(e,t))),y.map((e=>u.some([n+i,e]))))},C=(e,t,n)=>y.uninterruptibleMask((r=>(0,o.pipe)(g.clockWith((e=>e.currentTimeMillis)),y.flatMap((r=>re(n,(n=>{switch(n._tag){case"None":return u.some(M(e,t,r));case"Some":{const[i]=n.value;return i-r<=0?u.some(M(e,t,r)):u.none()}}})))),y.flatMap((e=>u.isNone(e)?y.dieMessage("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):r(y.deferredAwait(e.value[1]))))))),R=e=>E.set(e,u.none()),F=(0,o.dual)(2,((e,t)=>L(e,(e=>t(v.fiberAll(e)))))),L=(0,o.dual)(2,((e,t)=>y.flatMap(k.track,(n=>(0,o.pipe)(G(e,n),v.ensuring(y.flatMap(n.value,t))))))),P=(0,o.dual)((e=>d.isIterable(e[0])),((e,t)=>t?.discard?y.forEachSequentialDiscard(e,v.fork):y.map(y.forEachSequential(e,v.fork),v.fiberAll))),D=(0,o.dual)(2,((e,t)=>y.uninterruptibleMask((n=>y.flatMap(t.fork(b.sequential),(t=>(0,o.pipe)(n(e),y.onExit((e=>t.close(e))),v.forkDaemon,y.tap((e=>t.addFinalizer((()=>y.fiberIdWith((t=>i.equals(t,e.id())?y.void:y.asVoid(y.interruptFiber(e))))))))))))))),U=e=>v.scopeWith((t=>D(e,t))),j=e=>S.join(e),q=e=>y.suspend((()=>y.flatMap(e,S.join))),W=Symbol.for("effect/Effect/memoizeFunction.key");class B{a;eq;[W]=W;constructor(e,t){this.a=e,this.eq=t}[i.symbol](e){return!!d.hasProperty(e,W)&&(this.eq?this.eq(this.a,e.a):i.equals(this.a,e.a))}[c.symbol](){return this.eq?0:c.cached(this,c.hash(this.a))}}const z=(e,t)=>(0,o.pipe)(y.sync((()=>l.empty())),y.flatMap(te),y.map((n=>r=>(0,o.pipe)(n.modifyEffect((n=>{const i=(0,o.pipe)(n,l.get(new B(r,t)));return u.isNone(i)?(0,o.pipe)(y.deferredMake(),y.tap((t=>(0,o.pipe)(g.diffFiberRefs(e(r)),y.intoDeferred(t),v.fork))),y.map((e=>[e,(0,o.pipe)(n,l.set(new B(r,t),e))]))):y.succeed([i.value,n])})),y.flatMap(y.deferredAwait),y.flatMap((([e,t])=>(0,o.pipe)(g.patchFiberRefs(e),y.as(t)))))))),$=(0,o.dual)(2,((e,t)=>(0,o.pipe)(y.exit(e),v.race(y.exit(t)),(e=>y.flatten(e))))),V=(0,o.dual)(2,((e,t)=>(0,o.pipe)(e,_.schedule_Effect(t),U))),G=(0,o.dual)(2,((e,t)=>y.fiberRefLocallyWith(v.currentSupervisor,(e=>e.zip(t)))(e))),J=(0,o.dual)(2,((e,t)=>H(e,{onTimeout:()=>y.timeoutExceptionFromDuration(t),duration:t}))),H=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failSync(n),onSuccess:y.succeed,duration:t})))),K=(0,o.dual)(2,((e,{duration:t,onTimeout:n})=>y.flatten(Z(e,{onTimeout:()=>y.failCauseSync(n),onSuccess:y.succeed,duration:t})))),Y=(0,o.dual)(2,((e,t)=>Z(e,{duration:t,onSuccess:u.some,onTimeout:u.none}))),Z=(0,o.dual)(2,((e,{duration:t,onSuccess:n,onTimeout:r})=>y.fiberIdWith((i=>v.raceFibersWith(e,y.interruptible(g.sleep(t)),{onSelfWin:(e,t)=>y.flatMap(e.await,(r=>"Success"===r._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),n(r.value)))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(r.cause))))),onOtherWin:(e,t)=>y.flatMap(e.await,(n=>"Success"===n._tag?y.flatMap(e.inheritAll,(()=>y.as(y.interruptAsFiber(t,i),r()))):y.flatMap(y.interruptAsFiber(t,i),(()=>y.exitFailCause(n.cause))))),otherScope:w.globalScope}))))),Q=Symbol.for("effect/Ref/SynchronizedRef"),X={_A:e=>e};class ee{ref;withLock;[Q]=X;[E.RefTypeId]=E.refVariance;[p.TypeId];constructor(e,t){this.ref=e,this.withLock=t,this[p.TypeId]=p.TypeId,this.get=E.get(this.ref)}get;modify(e){return this.modifyEffect((t=>y.succeed(e(t))))}modifyEffect(e){return this.withLock((0,o.pipe)(y.flatMap(E.get(this.ref),e),y.flatMap((([e,t])=>y.as(E.set(this.ref,t),e)))))}pipe(){return(0,f.pipeArguments)(this,arguments)}}const te=e=>y.sync((()=>ne(e))),ne=e=>{const t=E.unsafeMake(e),n=I(1);return new ee(t,n.withPermits(1))},re=(0,o.dual)(2,((e,t)=>e.modifyEffect((e=>{const n=t(e);switch(n._tag){case"None":return y.succeed([e,e]);case"Some":return y.map(n.value,(e=>[e,e]))}})))),ie=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>[e,t])))),ae=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>e)))),se=(0,o.dual)(2,((e,t)=>oe(e,t,((e,t)=>t)))),oe=(0,o.dual)(3,((e,t,n)=>({[S.FiberTypeId]:S.fiberVariance,id:()=>(0,o.pipe)(e.id(),s.getOrElse(t.id())),await:(0,o.pipe)(e.await,y.flatten,v.zipWithOptions(y.flatten(t.await),n,{concurrent:!0}),y.exit),children:e.children,inheritAll:y.zipRight(t.inheritAll,e.inheritAll),poll:y.zipWith(e.poll,t.poll,((e,t)=>(0,o.pipe)(e,u.flatMap((e=>(0,o.pipe)(t,u.map((t=>a.zipWith(e,t,{onSuccess:n,onFailure:m.parallel}))))))))),interruptAsFork:n=>y.zipRight(e.interruptAsFork(n),t.interruptAsFork(n)),pipe(){return(0,f.pipeArguments)(this,arguments)}})))},68498:(e,t,n)=>{n.r(t),n.d(t,{Base:()=>b,ChannelTypeId:()=>d,CommitPrototype:()=>g,EffectPrototype:()=>h,EffectTypeId:()=>l,SinkTypeId:()=>f,StreamTypeId:()=>u,StructuralBase:()=>S,StructuralCommitPrototype:()=>y,StructuralPrototype:()=>m,effectVariance:()=>p});var r=n(43977),i=n(367337),a=n(953533),s=n(730276),o=n(889706),c=n(853563);const l=Symbol.for("effect/Effect"),u=Symbol.for("effect/Stream"),f=Symbol.for("effect/Sink"),d=Symbol.for("effect/Channel"),p={_R:e=>e,_E:e=>e,_A:e=>e,_V:c.getCurrentVersion()},h={[l]:p,[u]:p,[f]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[d]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[r.symbol](e){return this===e},[i.symbol](){return i.cached(this,i.random(this))},[Symbol.iterator](){return new s.SingleShotGen(new s.YieldWrap(this))},pipe(){return(0,a.pipeArguments)(this,arguments)}},m={[i.symbol](){return i.cached(this,i.structure(this))},[r.symbol](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const i of t)if(!(i in e)||!r.equals(this[i],e[i]))return!1;return!0}},g={...h,_op:o.OP_COMMIT},y={...g,...m},b=function(){function e(){}return e.prototype=g,e}(),S=function(){function e(){}return e.prototype=y,e}()},609018:(e,t,n)=>{n.r(t),n.d(t,{TypeId:()=>u,fromOption:()=>w,getLeft:()=>S,getRight:()=>v,isEither:()=>h,isLeft:()=>m,isRight:()=>g,left:()=>y,right:()=>b});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(856572),c=n(68498),l=n(8578);const u=Symbol.for("effect/Either"),f={...c.EffectPrototype,[u]:{_R:e=>e},[s.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,s.format)(this.toJSON())}},d=Object.assign(Object.create(f),{_tag:"Right",_op:"Right",[r.symbol](e){return h(e)&&g(e)&&r.equals(this.right,e.right)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:(0,s.toJSON)(this.right)}}}),p=Object.assign(Object.create(f),{_tag:"Left",_op:"Left",[r.symbol](e){return h(e)&&m(e)&&r.equals(this.left,e.left)},[a.symbol](){return a.combine(a.hash(this._tag))(a.hash(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:(0,s.toJSON)(this.left)}}}),h=e=>(0,o.hasProperty)(e,u),m=e=>"Left"===e._tag,g=e=>"Right"===e._tag,y=e=>{const t=Object.create(p);return t.left=e,t},b=e=>{const t=Object.create(d);return t.right=e,t},S=e=>g(e)?l.none:l.some(e.left),v=e=>m(e)?l.none:l.some(e.right),w=(0,i.dual)(2,((e,t)=>l.isNone(e)?y(t()):b(e.value)))},94732:(e,t,n)=>{n.r(t),n.d(t,{getBugErrorMessage:()=>r});const r=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`},232628:(e,t,n)=>{n.r(t),n.d(t,{OP_PARALLEL:()=>a,OP_PARALLEL_N:()=>s,OP_SEQUENTIAL:()=>i,isParallel:()=>f,isParallelN:()=>d,isSequential:()=>u,match:()=>p,parallel:()=>c,parallelN:()=>l,sequential:()=>o});var r=n(361369);const i="Sequential",a="Parallel",s="ParallelN",o={_tag:i},c={_tag:a},l=e=>({_tag:s,parallelism:e}),u=e=>e._tag===i,f=e=>e._tag===a,d=e=>e._tag===s,p=(0,r.dual)(2,((e,t)=>{switch(e._tag){case i:return t.onSequential();case a:return t.onParallel();case s:return t.onParallelN(e.parallelism)}}))},424285:(e,t,n)=>{n.r(t),n.d(t,{FiberTypeId:()=>b,Order:()=>E,RuntimeFiberTypeId:()=>w,_await:()=>x,children:()=>I,currentFiberURI:()=>ee,done:()=>T,dump:()=>O,dumpAll:()=>A,fail:()=>N,failCause:()=>M,fiberVariance:()=>S,fromEffect:()=>C,getCurrentFiber:()=>te,id:()=>R,inheritAll:()=>F,interruptAll:()=>P,interruptAllAs:()=>D,interruptAsFork:()=>U,interrupted:()=>L,isFiber:()=>_,isRuntimeFiber:()=>k,join:()=>j,map:()=>q,mapEffect:()=>W,mapFiber:()=>B,match:()=>z,never:()=>$,orElse:()=>V,orElseEither:()=>G,poll:()=>J,pretty:()=>H,roots:()=>Y,status:()=>Z,succeed:()=>Q,unsafeRoots:()=>K,void:()=>X});var r=n(131651),i=n(757964),a=n(896949),s=n(295602),o=n(285485),c=n(361369),l=n(227561),u=n(804676),f=n(977948),d=n(259877),p=n(953533),h=n(856572),m=n(672620),g=n(508977),y=n(66932);const b=Symbol.for("effect/Fiber"),S={_E:e=>e,_A:e=>e},v={[b]:S,pipe(){return(0,p.pipeArguments)(this,arguments)}},w=Symbol.for("effect/Fiber"),E=(0,c.pipe)(d.tuple(u.Order,u.Order),d.mapInput((e=>[e.id().startTimeMillis,e.id().id]))),_=e=>(0,h.hasProperty)(e,b),k=e=>w in e,x=e=>e.await,I=e=>e.children,T=e=>({...v,id:()=>s.none,await:m.succeed(e),children:m.succeed([]),inheritAll:m.void,poll:m.succeed(f.some(e)),interruptAsFork:()=>m.void}),O=e=>m.map(e.status,(t=>({id:e.id(),status:t}))),A=e=>m.forEachSequential(e,O),N=e=>T(a.fail(e)),M=e=>T(a.failCause(e)),C=e=>m.map(m.exit(e),T),R=e=>e.id(),F=e=>e.inheritAll,L=e=>T(a.interrupt(e)),P=e=>m.flatMap(m.fiberId,(t=>(0,c.pipe)(e,D(t)))),D=(0,c.dual)(2,((e,t)=>(0,c.pipe)(m.forEachSequentialDiscard(e,U(t)),m.zipRight((0,c.pipe)(e,m.forEachSequentialDiscard(x)))))),U=(0,c.dual)(2,((e,t)=>e.interruptAsFork(t))),j=e=>m.zipLeft(m.flatten(e.await),e.inheritAll),q=(0,c.dual)(2,((e,t)=>W(e,(e=>m.sync((()=>t(e))))))),W=(0,c.dual)(2,((e,t)=>({...v,id:()=>e.id(),await:m.flatMap(e.await,a.forEachEffect(t)),children:e.children,inheritAll:e.inheritAll,poll:m.flatMap(e.poll,(e=>{switch(e._tag){case"None":return m.succeed(f.none());case"Some":return(0,c.pipe)(a.forEachEffect(e.value,t),m.map(f.some))}})),interruptAsFork:t=>e.interruptAsFork(t)}))),B=(0,c.dual)(2,((e,t)=>m.map(e.await,a.match({onFailure:e=>M(e),onSuccess:e=>t(e)})))),z=(0,c.dual)(2,((e,{onFiber:t,onRuntimeFiber:n})=>k(e)?n(e):t(e))),$={...v,id:()=>s.none,await:m.never,children:m.succeed([]),inheritAll:m.never,poll:m.succeed(f.none()),interruptAsFork:()=>m.never},V=(0,c.dual)(2,((e,t)=>({...v,id:()=>s.getOrElse(e.id(),t.id()),await:m.zipWith(e.await,t.await,((e,t)=>a.isSuccess(e)?e:t)),children:e.children,inheritAll:m.zipRight(t.inheritAll,e.inheritAll),poll:m.zipWith(e.poll,t.poll,((e,t)=>{switch(e._tag){case"None":return f.none();case"Some":return a.isSuccess(e.value)?e:t}})),interruptAsFork:n=>(0,c.pipe)(m.interruptAsFiber(e,n),m.zipRight((0,c.pipe)(t,m.interruptAsFiber(n))),m.asVoid)}))),G=(0,c.dual)(2,((e,t)=>V(q(e,i.left),q(t,i.right)))),J=e=>e.poll,H=e=>m.flatMap(r.currentTimeMillis,(t=>m.map(O(e),(e=>{const n=t-e.id.startTimeMillis,{days:r,hours:i,milliseconds:a,minutes:c,seconds:u}=(e=>{const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}})(n),f=(0===r?"":`${r}d`)+(0===r&&0===i?"":`${i}h`)+(0===r&&0===i&&0===c?"":`${c}m`)+(0===r&&0===i&&0===c&&0===u?"":`${u}s`)+`${a}ms`,d=o.isSuspended(e.status)?(()=>{const t=s.ids(e.status.blockingOn);return l.size(t)>0?"waiting on "+Array.from(t).map((e=>`${e}`)).join(", "):""})():"",p=(e=>o.isDone(e)?"Done":o.isRunning(e)?"Running":`Suspended(${y.interruptible(e.runtimeFlags)?"interruptible":"uninterruptible"})`)(e.status);return`[Fiber](#${e.id.id}) (${f}) ${d}\n   Status: ${p}`})))),K=()=>Array.from(g.globalScope.roots),Y=m.sync(K),Z=e=>e.status,Q=e=>T(a.succeed(e)),X=Q(void 0),ee="effect/FiberCurrent",te=()=>f.fromNullable(globalThis[ee])},478908:(e,t,n)=>{n.r(t),n.d(t,{FiberIdTypeId:()=>p,combine:()=>O,combineAll:()=>A,composite:()=>_,getOrElse:()=>N,ids:()=>M,isComposite:()=>T,isFiberId:()=>k,isNone:()=>x,isRuntime:()=>I,make:()=>R,none:()=>w,runtime:()=>E,threadName:()=>F,toOption:()=>L,toSet:()=>P,unsafeMake:()=>D});var r=n(43977),i=n(361369),a=n(606517),s=n(367337),o=n(227561),c=n(883845),l=n(645914),u=n(977948),f=n(856572);const d="effect/FiberId",p=Symbol.for(d),h="None",m="Runtime",g="Composite",y=s.string(`${d}-${h}`);class b{[p]=p;_tag=h;id=-1;startTimeMillis=-1;[s.symbol](){return y}[r.symbol](e){return k(e)&&e._tag===h}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[c.NodeInspectSymbol](){return this.toJSON()}}class S{id;startTimeMillis;[p]=p;_tag=m;constructor(e,t){this.id=e,this.startTimeMillis=t}[s.symbol](){return s.cached(this,s.string(`${d}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[r.symbol](e){return k(e)&&e._tag===m&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[c.NodeInspectSymbol](){return this.toJSON()}}class v{left;right;[p]=p;_tag=g;constructor(e,t){this.left=e,this.right=t}_hash;[s.symbol](){return(0,i.pipe)(s.string(`${d}-${this._tag}`),s.combine(s.hash(this.left)),s.combine(s.hash(this.right)),s.cached(this))}[r.symbol](e){return k(e)&&e._tag===g&&r.equals(this.left,e.left)&&r.equals(this.right,e.right)}toString(){return(0,c.format)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:(0,c.toJSON)(this.left),right:(0,c.toJSON)(this.right)}}[c.NodeInspectSymbol](){return this.toJSON()}}const w=new b,E=(e,t)=>new S(e,t),_=(e,t)=>new v(e,t),k=e=>(0,f.hasProperty)(e,p),x=e=>e._tag===h||(0,i.pipe)(P(e),o.every((e=>x(e)))),I=e=>e._tag===m,T=e=>e._tag===g,O=(0,i.dual)(2,((e,t)=>e._tag===h?t:t._tag===h?e:new v(e,t))),A=e=>(0,i.pipe)(e,o.reduce(w,((e,t)=>O(t)(e)))),N=(0,i.dual)(2,((e,t)=>x(e)?t:e)),M=e=>{switch(e._tag){case h:return o.empty();case m:return o.make(e.id);case g:return(0,i.pipe)(M(e.left),o.union(M(e.right)))}},C=(0,a.globalValue)(Symbol.for("effect/Fiber/Id/_fiberCounter"),(()=>l.make(0))),R=(e,t)=>new S(e,t),F=e=>Array.from(M(e)).map((e=>`#${e}`)).join(","),L=e=>{const t=P(e);if(0===o.size(t))return u.none();let n,r=!0;for(const a of t)r?(n=a,r=!1):n=(0,i.pipe)(n,O(a));return u.some(n)},P=e=>{switch(e._tag){case h:return o.empty();case m:return o.make(e);case g:return(0,i.pipe)(P(e.left),o.union(P(e.right)))}},D=()=>{const e=l.get(C);return(0,i.pipe)(C,l.set(e+1)),new S(e,Date.now())}},44402:(e,t,n)=>{n.r(t),n.d(t,{OP_INTERRUPT_SIGNAL:()=>r,OP_RESUME:()=>a,OP_STATEFUL:()=>i,OP_YIELD_NOW:()=>s,interruptSignal:()=>o,resume:()=>l,stateful:()=>c,yieldNow:()=>u});const r="InterruptSignal",i="Stateful",a="Resume",s="YieldNow",o=e=>({_tag:r,cause:e}),c=e=>({_tag:i,onFiber:e}),l=e=>({_tag:a,effect:e}),u=()=>({_tag:s})},789391:(e,t,n)=>{n.r(t),n.d(t,{FiberRefsImpl:()=>p,FiberRefsSym:()=>d,delete_:()=>S,empty:()=>f,fiberRefs:()=>y,forkAs:()=>m,get:()=>v,getOrDefault:()=>w,joinAs:()=>h,setAll:()=>b,unsafeMake:()=>u,updateAs:()=>E,updateManyAs:()=>k});var r=n(562635),i=n(43977),a=n(361369),s=n(227561),o=n(977948),c=n(953533),l=n(672620);function u(e){return new p(e)}function f(){return u(new Map)}const d=Symbol.for("effect/FiberRefs");class p{locals;[d]=d;constructor(e){this.locals=e}pipe(){return(0,c.pipeArguments)(this,arguments)}}const h=(0,a.dual)(3,((e,t,n)=>{const a=new Map(e.locals);return n.locals.forEach(((e,n)=>{const s=e[0][1];if(!e[0][0][i.symbol](t)){if(!a.has(n)){if(i.equals(s,n.initial))return;return void a.set(n,[[t,n.join(n.initial,s)]])}const o=a.get(n),[c,l]=((e,t,n,i=!1)=>{const a=e;let s,o=t,c=n,l=i;for(;void 0===s;)if(r.isNonEmptyReadonlyArray(o)&&r.isNonEmptyReadonlyArray(c)){const e=r.headNonEmpty(o)[0],t=r.tailNonEmpty(o),n=r.headNonEmpty(c)[0],i=r.headNonEmpty(c)[1],a=r.tailNonEmpty(c);e.startTimeMillis<n.startTimeMillis?(c=a,l=!0):e.startTimeMillis>n.startTimeMillis?o=t:e.id<n.id?(c=a,l=!0):e.id>n.id?o=t:s=[i,l]}else s=[a.initial,!0];return s})(n,o,e);if(l){const e=n.diff(c,s),r=o[0][1],l=n.join(r,n.patch(e)(r));if(!i.equals(r,l)){let e;const r=o[0][0];e=r[i.symbol](t)?[[r,l],...o.slice(1)]:[[t,l],...o],a.set(n,e)}}}})),new p(a)})),m=(0,a.dual)(2,((e,t)=>{const n=new Map;return g(e,n,t),new p(n)})),g=(e,t,n)=>{e.locals.forEach(((e,r)=>{const a=e[0][1],s=r.patch(r.fork)(a);i.equals(a,s)?t.set(r,e):t.set(r,[[n,s],...e])}))},y=e=>s.fromIterable(e.locals.keys()),b=e=>l.forEachSequentialDiscard(y(e),(t=>l.fiberRefSet(t,w(e,t)))),S=(0,a.dual)(2,((e,t)=>{const n=new Map(e.locals);return n.delete(t),new p(n)})),v=(0,a.dual)(2,((e,t)=>e.locals.has(t)?o.some(r.headNonEmpty(e.locals.get(t))[1]):o.none())),w=(0,a.dual)(2,((e,t)=>(0,a.pipe)(v(e,t),o.getOrElse((()=>t.initial))))),E=(0,a.dual)(2,((e,{fiberId:t,fiberRef:n,value:r})=>{if(0===e.locals.size)return new p(new Map([[n,[[t,r]]]]));const i=new Map(e.locals);return _(i,t,n,r),new p(i)})),_=(e,t,n,a)=>{const s=e.get(n)??[];let o;if(r.isNonEmptyReadonlyArray(s)){const[e,n]=r.headNonEmpty(s);if(e[i.symbol](t)){if(i.equals(n,a))return;o=[[t,a],...s.slice(1)]}else o=[[t,a],...s]}else o=[[t,a]];e.set(n,o)},k=(0,a.dual)(2,((e,{entries:t,forkAs:n})=>{if(0===e.locals.size)return new p(new Map(t));const r=new Map(e.locals);return void 0!==n&&g(e,r,n),t.forEach((([e,t])=>{1===t.length?_(r,t[0][0],e,t[0][1]):t.forEach((([t,n])=>{_(r,t,e,n)}))})),new p(r)}))},392538:(e,t,n)=>{n.r(t),n.d(t,{OP_ADD:()=>c,OP_AND_THEN:()=>f,OP_EMPTY:()=>o,OP_REMOVE:()=>l,OP_UPDATE:()=>u,combine:()=>h,diff:()=>p,empty:()=>d,patch:()=>m});var r=n(562635),i=n(43977),a=n(361369),s=n(789391);const o="Empty",c="Add",l="Remove",u="Update",f="AndThen",d={_tag:o},p=(e,t)=>{const n=new Map(e.locals);let a=d;for(const[s,o]of t.locals.entries()){const e=r.headNonEmpty(o)[1],t=n.get(s);if(void 0!==t){const n=r.headNonEmpty(t)[1];(0,i.equals)(n,e)||(a=h({_tag:u,fiberRef:s,patch:s.diff(n,e)})(a))}else a=h({_tag:c,fiberRef:s,value:e})(a);n.delete(s)}for(const[r]of n.entries())a=h({_tag:l,fiberRef:r})(a);return a},h=(0,a.dual)(2,((e,t)=>({_tag:f,first:e,second:t}))),m=(0,a.dual)(3,((e,t,n)=>{let i=n,a=r.of(e);for(;r.isNonEmptyReadonlyArray(a);){const e=r.headNonEmpty(a),n=r.tailNonEmpty(a);switch(e._tag){case o:a=n;break;case c:i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),a=n;break;case l:i=s.delete_(i,e.fiberRef),a=n;break;case u:{const r=s.getOrDefault(i,e.fiberRef);i=s.updateAs(i,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),a=n;break}case f:a=r.prepend(e.first)(r.prepend(e.second)(n))}}return i}))},858657:(e,t,n)=>{n.r(t),n.d(t,{FiberRuntime:()=>yr,acquireRelease:()=>Mr,acquireReleaseInterruptible:()=>Cr,addFinalizer:()=>Rr,all:()=>jr,allSuccesses:()=>Wr,allWith:()=>qr,annotateLogsScoped:()=>Nr,batchedLogger:()=>Ar,currentLoggers:()=>Or,currentMinimumLogLevel:()=>br,currentRuntimeFlags:()=>$i,currentSupervisor:()=>Vi,daemonChildren:()=>Fr,defaultLogger:()=>wr,disconnect:()=>Qi,ensuring:()=>na,exists:()=>Pr,fiberActive:()=>ar,fiberAll:()=>Ji,fiberAwaitAll:()=>Gi,fiberFailures:()=>or,fiberInterruptFork:()=>Hi,fiberJoinAll:()=>Ki,fiberLifetimes:()=>cr,fiberRefLocallyScoped:()=>Ui,fiberRefLocallyScopedWith:()=>ji,fiberRefMake:()=>qi,fiberRefMakeContext:()=>Bi,fiberRefMakeRuntimeFlags:()=>zi,fiberRefMakeWith:()=>Wi,fiberRefUnsafeMakeSupervisor:()=>Di,fiberScoped:()=>Yi,fiberStarted:()=>ir,fiberSuccesses:()=>sr,filter:()=>Ur,finalizersMask:()=>li,forEach:()=>$r,forEachConcurrentDiscard:()=>Gr,forEachParN:()=>Jr,forEachParUnbounded:()=>Vr,fork:()=>Hr,forkDaemon:()=>Kr,forkWithErrorHandler:()=>Yr,interruptWhenPossible:()=>ia,invokeWithInterrupt:()=>ra,jsonLogger:()=>Er,labelMetricsScoped:()=>hi,logFmtLogger:()=>_r,loggerWithConsoleError:()=>vr,loggerWithConsoleLog:()=>Sr,loggerWithSpanAnnotations:()=>Tr,makeSpanScoped:()=>aa,mergeAll:()=>ti,parallelFinalizers:()=>oi,parallelNFinalizers:()=>ci,partition:()=>ni,prettyLogger:()=>kr,race:()=>Xi,raceAll:()=>ii,raceFibersWith:()=>ea,raceWith:()=>Zi,reduceEffect:()=>si,replicate:()=>Br,replicateEffect:()=>zr,scope:()=>Mi,scopeExtend:()=>Li,scopeMake:()=>Fi,scopeTag:()=>Ni,scopeUse:()=>Pi,scopeWith:()=>ui,scopedEffect:()=>fi,sequentialFinalizers:()=>di,structuredLogger:()=>xr,tagMetricsScoped:()=>pi,tracerLogger:()=>Ir,unsafeFork:()=>Zr,unsafeForkUnstarted:()=>Qr,unsafeMakeChildFiber:()=>Xr,using:()=>mi,validate:()=>gi,validateAll:()=>ri,validateAllPar:()=>bi,validateAllParDiscard:()=>Si,validateFirst:()=>vi,validateWith:()=>yi,withClockScoped:()=>wi,withConfigProviderScoped:()=>_i,withEarlyRelease:()=>ki,withRandomScoped:()=>Ei,withRuntimeFlagsScoped:()=>Ai,withSpanScoped:()=>oa,withTracerScoped:()=>sa,zipLeftOptions:()=>Ii,zipOptions:()=>xi,zipRightOptions:()=>Ti,zipWithOptions:()=>Oi});var r=n(730276),i=n(562635),a=n(235309),s=n(361369),o=n(259877),c=n(856572);c.isBoolean,a.boolean,o.boolean;const l=e=>!e;var u=n(128420),f=n(689702),d=n(762738),p=n(68498);const h=p.EffectTypeId,m=(p.StreamTypeId,p.SinkTypeId,p.ChannelTypeId,p.EffectPrototype);p.CommitPrototype,p.StructuralCommitPrototype,p.Base,p.StructuralBase;var g=n(232628);const y=g.sequential,b=g.parallel,S=g.parallelN;g.isSequential,g.isParallel,g.isParallelN,g.match;var v=n(295602),w=n(989105),E=n(46755),_=n(285485),k=n(606517),x=n(827964),I=n(227561),T=n(883845),O=n(934321),A=n(757964),N=(n(91276),n(238961)),M=n(977948),C=n(953533);const R=Symbol.for("effect/Micro"),F=Symbol.for("effect/Micro/runSymbol"),L=Symbol.for("effect/Micro/MicroCause"),P={_E:s.identity};class D extends globalThis.Error{_tag;traces;[L];constructor(e,t,n){const r=`MicroCause.${e}`;let i,a,s;if(t instanceof globalThis.Error){i=`(${r}) ${t.name}`,a=t.message;const e=a.split("\n").length;s=t.stack?`(${r}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${i}: ${a}`}else i=r,a=(0,T.toStringUnknown)(t,0),s=`${i}: ${a}`;n.length>0&&(s+=`\n    ${n.join("\n    ")}`),super(a),this._tag=e,this.traces=n,this[L]=P,this.name=i,this.stack=s}pipe(){return(0,C.pipeArguments)(this,arguments)}toString(){return this.stack}[T.NodeInspectSymbol](){return this.stack}}class U extends D{error;constructor(e,t=[]){super("Fail",e,t),this.error=e}}const j=(e,t=[])=>new U(e,t);A.right;const q=e=>A.left(j(e)),W=(A.left,A.isRight,A.isLeft,Symbol.for("effect/Micro/Env")),B=Symbol.for("effect/Micro/EnvRef"),z={[W]:{_R:s.identity},pipe(){return(0,C.pipeArguments)(this,arguments)}},$=e=>{const t=Object.create(z);return t.refs=e,t},V=(0,s.dual)(2,((e,t)=>t.key in e.refs?e.refs[t.key]:t.initial)),G=(0,s.dual)(3,((e,t,n)=>{const r=Object.assign(Object.create(null),e.refs);return r[t.key]=n,$(r)})),J={[B]:B},H=(e,t)=>(0,k.globalValue)(e,(()=>{const n=Object.create(J);return n.key=e,n.initial=t(),n})),K=H("effect/Micro/currentAbortController",(()=>{})),Y=H("effect/Micro/currentAbortSignal",(()=>{})),Z=H("effect/Micro/currentContext",(()=>f.empty())),Q={...m,_op:"Micro",[R]:{_A:s.identity,_E:s.identity,_R:s.identity},[Symbol.iterator](){return new N.SingleShotGen(new r.YieldWrap(this))}};"setImmediate"in globalThis&&globalThis.setImmediate;const X=function(){class e extends globalThis.Error{[F](e,t){t(q(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[T.NodeInspectSymbol](){const e=this.stack;return e?`${this.toString()}\n${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,Q,p.StructuralPrototype),e}(),ee=function(){return class extends X{constructor(e){super(),e&&Object.assign(this,e)}}}(),te=e=>{class t extends ee{_tag=e}return t.prototype.name=e,t};te("NoSuchElementException");te("TimeoutException");var ne=n(645914),re=n(55040),ie=n(128202),ae=n(71108),se=n(668481),oe=n(908197),ce=n(114969),le=n(242927),ue=n(672620);const fe=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ue.fiberRefGetWith(ue.currentConcurrency,(e=>"unbounded"===e?n():e>1?r(e):t()));default:return e>1?r(e):t()}},de=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ue.fiberRefGetWith(ue.currentConcurrency,(e=>"unbounded"===e||e>1?n():t()));default:return e>1?n():t()}};var pe=n(717172),he=n(5316),me=n(344862),ge=n(272572),ye=n(424285),be=n(44402),Se=n(789391),ve=n(508977),we=n(489425),Ee=n(204971),_e=n(478908);const ke=Symbol.for("effect/Logger"),xe={_Message:e=>e,_Output:e=>e},Ie=e=>({[ke]:xe,log:e,pipe(){return(0,C.pipeArguments)(this,arguments)}}),Te=(0,s.dual)(2,((e,t)=>Ie((n=>e.log(t(n)))))),Oe=(0,s.dual)(2,((e,t)=>Ie((n=>t(e.log(n)))))),Ae=(s.constVoid,Ie((({annotations:e,cause:t,date:n,fiberId:r,logLevel:a,message:o,spans:c})=>{const l=n.getTime();let u=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${_e.threadName(r)}`].join(" ");const f=i.ensure(o);for(let i=0;i<f.length;i++){const e=T.toStringUnknown(f[i]);e.length>0&&(u+=" message=",u=Me(e,u))}if(null!=t&&"Empty"!==t._tag&&(u+=" cause=",u=Me(oe.pretty(t,{renderErrorCause:!0}),u)),we.isCons(c)){u+=" ";let e=!0;for(const t of c)e?e=!1:u+=" ",u+=(0,s.pipe)(t,Ee.render(l))}if(x.size(e)>0){u+=" ";let t=!0;for(const[n,r]of e)t?t=!1:u+=" ",u+=Pe(n),u+="=",u=Me(T.toStringUnknown(r),u)}return u}))),Ne=/^[^\s"=]+$/,Me=(e,t)=>t+(e.match(Ne)?e:`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`),Ce=Ie((({annotations:e,cause:t,date:n,fiberId:r,logLevel:a,message:o,spans:c})=>{const l=n.getTime();let u=[`timestamp=${n.toISOString()}`,`level=${a.label}`,`fiber=${_e.threadName(r)}`].join(" ");const f=i.ensure(o);for(let i=0;i<f.length;i++){const e=T.toStringUnknown(f[i],0);e.length>0&&(u+=" message=",u=De(e,u))}if(null!=t&&"Empty"!==t._tag&&(u+=" cause=",u=De(oe.pretty(t,{renderErrorCause:!0}),u)),we.isCons(c)){u+=" ";let e=!0;for(const t of c)e?e=!1:u+=" ",u+=(0,s.pipe)(t,Ue(l))}if(x.size(e)>0){u+=" ";let t=!0;for(const[n,r]of e)t?t=!1:u+=" ",u+=Pe(n),u+="=",u=De(T.toStringUnknown(r,0),u)}return u})),Re=Ie((({annotations:e,cause:t,date:n,fiberId:r,logLevel:a,message:s,spans:o})=>{const c=n.getTime(),l={},u={};if(x.size(e)>0)for(const[i,d]of e)l[i]=Fe(d);if(we.isCons(o))for(const i of o)u[i.label]=c-i.startTime;const f=i.ensure(s);return{message:1===f.length?Fe(f[0]):f.map(Fe),logLevel:a.label,timestamp:n.toISOString(),cause:oe.isEmpty(t)?void 0:oe.pretty(t,{renderErrorCause:!0}),annotations:l,spans:u,fiberId:_e.threadName(r)}})),Fe=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},Le=Oe(Re,T.stringifyCircular),Pe=e=>e.replace(/[\s="]/g,"_"),De=(e,t)=>{return t+(e.match(Ne)?e:(n=e,JSON.stringify(n)));var n},Ue=e=>t=>`${Pe(t.label)}=${e-t.startTime}ms`,je=(e,...t)=>{let n="";for(let r=0;r<t.length;r++)n+=`\x1b[${t[r]}m`;return n+e+"\x1b[0m"},qe=(e,...t)=>e,We="1",Be="36",ze="37",$e={None:[],All:[],Trace:["90"],Debug:["34"],Info:["32"],Warning:["33"],Error:["31"],Fatal:["101","30"]},Ve={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},Ge=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,Je="object"===typeof{env:{NODE_ENV:"production"}}.stdout&&null!=={env:{NODE_ENV:"production"}}.stdout&&!0==={env:{NODE_ENV:"production"}}.stdout.isTTY,He="object"===typeof window,Ke="object"===typeof self&&null!==self&&"function"===typeof self.constructor&&self.constructor.name.includes("Worker"),Ye=e=>{const t="isBun"in{env:{NODE_ENV:"production"}}&&!0==={env:{NODE_ENV:"production"}}.isBun,n=e.colors&&Je?je:qe;return Ie((({annotations:r,cause:a,context:s,date:o,fiberId:c,logLevel:l,message:u,spans:d})=>{const p=w.getOrDefault(s,me.currentServices),h=f.get(p,ge.consoleTag).unsafe,m=!0===e.stderr?h.error:h.log,g=i.ensure(u);let y=n(`[${e.formatDate(o)}]`,ze)+` ${n(l.label,...$e[l._tag])}`+` (${_e.threadName(c)})`;if(we.isCons(d)){const e=o.getTime(),t=Ue(e);for(const n of d)y+=" "+t(n)}y+=":";let b=0;if(g.length>0){const e=Fe(g[0]);"string"===typeof e&&(y+=" "+n(e,We,Be),b++)}if(m(y),t||h.group(),oe.isEmpty(a)||m(oe.pretty(a,{renderErrorCause:!0})),b<g.length)for(;b<g.length;b++)m(g[b]);if(x.size(r)>0)for(const[e,t]of r)m(n(`${e}:`,We,ze),t);t||h.groupEnd()}))},Ze=e=>{const t=e.colors?"%c":"";return Ie((({annotations:n,cause:r,context:a,date:s,fiberId:o,logLevel:c,message:l,spans:u})=>{const d=w.getOrDefault(a,me.currentServices),p=f.get(d,ge.consoleTag).unsafe,h=i.ensure(l);let m=`${t}[${e.formatDate(s)}]`;const g=[];if(e.colors&&g.push("color:gray"),m+=` ${t}${c.label}${t} (${_e.threadName(o)})`,e.colors&&g.push(Ve[c._tag],""),we.isCons(u)){const e=s.getTime(),t=Ue(e);for(const n of u)m+=" "+t(n)}m+=":";let y=0;if(h.length>0){const n=Fe(h[0]);"string"===typeof n&&(m+=` ${t}${n}`,e.colors&&g.push("color:deepskyblue"),y++)}if(p.groupCollapsed(m,...g),oe.isEmpty(r)||p.error(oe.pretty(r,{renderErrorCause:!0})),y<h.length)for(;y<h.length;y++)p.log(h[y]);if(x.size(n)>0)for(const[t,i]of n)e.colors?p.log(`%c${t}:`,"color:gray",i):p.log(`${t}:`,i);p.groupEnd()}))};n(131651);var Qe=n(284073),Xe=n(43977),et=n(367337);const tt="effect/MetricBoundaries",nt=Symbol.for(tt);class rt{values;[nt]=nt;constructor(e){this.values=e,this._hash=(0,s.pipe)(et.string(tt),et.combine(et.array(this.values)))}_hash;[et.symbol](){return this._hash}[Xe.symbol](e){return it(e)&&Xe.equals(this.values,e.values)}pipe(){return(0,C.pipeArguments)(this,arguments)}}const it=e=>(0,c.hasProperty)(e,nt),at=e=>{const t=(0,s.pipe)(e,i.appendAll(u.of(Number.POSITIVE_INFINITY)),i.dedupe);return new rt(t)},st=e=>(0,s.pipe)(i.makeBy(e.count-1,(t=>e.start*Math.pow(e.factor,t))),u.unsafeFromArray,at),ot=Symbol.for("effect/MetricKeyType"),ct="effect/MetricKeyType/Counter",lt=Symbol.for(ct),ut="effect/MetricKeyType/Frequency",ft=Symbol.for(ut),dt="effect/MetricKeyType/Gauge",pt=Symbol.for(dt),ht="effect/MetricKeyType/Histogram",mt=Symbol.for(ht),gt="effect/MetricKeyType/Summary",yt=Symbol.for(gt),bt={_In:e=>e,_Out:e=>e};class St{incremental;bigint;[ot]=bt;[lt]=lt;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=et.string(ct)}_hash;[et.symbol](){return this._hash}[Xe.symbol](e){return wt(e)}pipe(){return(0,C.pipeArguments)(this,arguments)}}et.symbol,Xe.symbol;et.symbol,Xe.symbol;class vt{boundaries;[ot]=bt;[mt]=mt;constructor(e){this.boundaries=e,this._hash=(0,s.pipe)(et.string(ht),et.combine(et.hash(this.boundaries)))}_hash;[et.symbol](){return this._hash}[Xe.symbol](e){return kt(e)&&Xe.equals(this.boundaries,e.boundaries)}pipe(){return(0,C.pipeArguments)(this,arguments)}}et.symbol,Xe.symbol;const wt=e=>(0,c.hasProperty)(e,lt),Et=e=>(0,c.hasProperty)(e,ft),_t=e=>(0,c.hasProperty)(e,pt),kt=e=>(0,c.hasProperty)(e,mt),xt=e=>(0,c.hasProperty)(e,yt);var It=n(458762);const Tt=Symbol.for("effect/MetricKey"),Ot={_Type:e=>e},At=i.getEquivalence(Xe.equals);class Nt{name;keyType;description;tags;[Tt]=Ot;constructor(e,t,n,r=[]){this.name=e,this.keyType=t,this.description=n,this.tags=r,this._hash=(0,s.pipe)(et.string(this.name+this.description),et.combine(et.hash(this.keyType)),et.combine(et.array(this.tags)))}_hash;[et.symbol](){return this._hash}[Xe.symbol](e){return Mt(e)&&this.name===e.name&&Xe.equals(this.keyType,e.keyType)&&Xe.equals(this.description,e.description)&&At(this.tags,e.tags)}pipe(){return(0,C.pipeArguments)(this,arguments)}}const Mt=e=>(0,c.hasProperty)(e,Tt),Ct=(e,t)=>new Nt(e,(e=>new St(e?.incremental??!1,e?.bigint??!1))(t),M.fromNullable(t?.description)),Rt=(e,t,n)=>new Nt(e,(e=>new vt(e))(t),M.fromNullable(n)),Ft=(0,s.dual)(2,((e,t)=>0===t.length?e:new Nt(e.name,e.keyType,e.description,i.union(e.tags,t))));var Lt=n(714349),Pt=n(804676);const Dt=Symbol.for("effect/MetricState"),Ut="effect/MetricState/Counter",jt=Symbol.for(Ut),qt="effect/MetricState/Frequency",Wt=Symbol.for(qt),Bt="effect/MetricState/Gauge",zt=Symbol.for(Bt),$t="effect/MetricState/Histogram",Vt=Symbol.for($t),Gt="effect/MetricState/Summary",Jt=Symbol.for(Gt),Ht={_A:e=>e};class Kt{count;[Dt]=Ht;[jt]=jt;constructor(e){this.count=e}[et.symbol](){return(0,s.pipe)(et.hash(Ut),et.combine(et.hash(this.count)),et.cached(this))}[Xe.symbol](e){return tn(e)&&this.count===e.count}pipe(){return(0,C.pipeArguments)(this,arguments)}}const Yt=i.getEquivalence(Xe.equals);class Zt{occurrences;[Dt]=Ht;[Wt]=Wt;constructor(e){this.occurrences=e}_hash;[et.symbol](){return(0,s.pipe)(et.string(qt),et.combine(et.array(i.fromIterable(this.occurrences.entries()))),et.cached(this))}[Xe.symbol](e){return nn(e)&&Yt(i.fromIterable(this.occurrences.entries()),i.fromIterable(e.occurrences.entries()))}pipe(){return(0,C.pipeArguments)(this,arguments)}}class Qt{value;[Dt]=Ht;[zt]=zt;constructor(e){this.value=e}[et.symbol](){return(0,s.pipe)(et.hash(Bt),et.combine(et.hash(this.value)),et.cached(this))}[Xe.symbol](e){return rn(e)&&this.value===e.value}pipe(){return(0,C.pipeArguments)(this,arguments)}}class Xt{buckets;count;min;max;sum;[Dt]=Ht;[Vt]=Vt;constructor(e,t,n,r,i){this.buckets=e,this.count=t,this.min=n,this.max=r,this.sum=i}[et.symbol](){return(0,s.pipe)(et.hash($t),et.combine(et.hash(this.buckets)),et.combine(et.hash(this.count)),et.combine(et.hash(this.min)),et.combine(et.hash(this.max)),et.combine(et.hash(this.sum)),et.cached(this))}[Xe.symbol](e){return an(e)&&Xe.equals(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,C.pipeArguments)(this,arguments)}}class en{error;quantiles;count;min;max;sum;[Dt]=Ht;[Jt]=Jt;constructor(e,t,n,r,i,a){this.error=e,this.quantiles=t,this.count=n,this.min=r,this.max=i,this.sum=a}[et.symbol](){return(0,s.pipe)(et.hash(Gt),et.combine(et.hash(this.error)),et.combine(et.hash(this.quantiles)),et.combine(et.hash(this.count)),et.combine(et.hash(this.min)),et.combine(et.hash(this.max)),et.combine(et.hash(this.sum)),et.cached(this))}[Xe.symbol](e){return sn(e)&&this.error===e.error&&Xe.equals(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,C.pipeArguments)(this,arguments)}}const tn=e=>(0,c.hasProperty)(e,jt),nn=e=>(0,c.hasProperty)(e,Wt),rn=e=>(0,c.hasProperty)(e,zt),an=e=>(0,c.hasProperty)(e,Vt),sn=e=>(0,c.hasProperty)(e,Jt),on=Symbol.for("effect/MetricHook"),cn={_In:e=>e,_Out:e=>e},ln=e=>({[on]:cn,pipe(){return(0,C.pipeArguments)(this,arguments)},...e}),un=BigInt(0),fn=e=>{let t=e.keyType.bigint?un:0;const n=e.keyType.incremental?e.keyType.bigint?e=>e>=un:e=>e>=0:e=>!0;return ln({get:()=>new Kt(t),update:e=>{n(e)&&(t+=e)}})},dn=e=>{const t=new Map;for(const n of e.keyType.preregisteredWords)t.set(n,0);return ln({get:()=>new Zt(t),update:e=>{const n=t.get(e)??0;t.set(e,n+1)}})},pn=(e,t)=>{let n=t;return ln({get:()=>new Qt(n),update:e=>{n=e}})},hn=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),a=new Float32Array(n);let o=0,c=0,l=Number.MAX_VALUE,u=Number.MIN_VALUE;(0,s.pipe)(t,i.sort(Pt.Order),i.map(((e,t)=>{a[t]=e})));const f=()=>{const e=i.allocate(n);let t=0;for(let i=0;i<n;i++){const n=a[i];t+=r[i],e[i]=[n,t]}return e};return ln({get:()=>{return e={buckets:f(),count:o,min:l,max:u,sum:c},new Xt(e.buckets,e.count,e.min,e.max,e.sum);var e},update:e=>{let t=0,i=n;for(;t!==i;){const n=Math.floor(t+(i-t)/2);e<=a[n]?i=n:t=n,i===t+1&&(e<=a[t]?i=t:t=i)}r[t]=r[t]+1,o+=1,c+=e,e<l&&(l=e),e>u&&(u=e)}})},mn=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:a}=e.keyType,o=(0,s.pipe)(a,i.sort(Pt.Order)),c=i.allocate(r);let l=0,u=0,f=0,d=Number.MAX_VALUE,p=Number.MIN_VALUE;const h=e=>{const a=[];let s=0;for(;s!==r-1;){const t=c[s];if(null!=t){const[r,i]=t,s=Qe.millis(e-r);Qe.greaterThanOrEqualTo(s,Qe.zero)&&s<=n&&a.push(i)}s+=1}return gn(t,o,i.sort(a,Pt.Order))};return ln({get:()=>{return e={error:t,quantiles:h(Date.now()),count:u,min:d,max:p,sum:f},new en(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var e},update:([e,t])=>((e,t)=>{r>0&&(l+=1,c[l%r]=[t,e]);u+=1,f+=e,e<d&&(d=e),e>p&&(p=e)})(e,t)})},gn=(e,t,n)=>{const r=n.length;if(!i.isNonEmptyReadonlyArray(t))return i.empty();const a=t[0],s=t.slice(1),o=yn(e,r,M.none(),0,a,n),c=i.of(o);return s.forEach((t=>{c.push(yn(e,r,o.value,o.consumed,t,o.rest))})),i.map(c,(e=>[e.quantile,e.value]))},yn=(e,t,n,r,a,s)=>{let o=e,c=t,l=n,u=r,f=a,d=s,p=e,h=t,m=n,g=r,y=a,b=s;for(;;){if(!i.isNonEmptyReadonlyArray(d))return{quantile:f,value:M.none(),consumed:u,rest:[]};if(1===f)return{quantile:f,value:M.some(i.lastNonEmpty(d)),consumed:u+d.length,rest:[]};const e=i.span(d,(e=>e<=d[0])),t=f*c,n=o/2*t,r=u+e[0].length,a=Math.abs(r-t);if(r<t-n)p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;else{if(r>t+n)return{quantile:f,value:l,consumed:u,rest:d};switch(l._tag){case"None":p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;continue;case"Some":if(a<Math.abs(t-l.value)){p=o,h=c,m=i.head(d),g=r,y=f,b=e[1],o=p,c=h,l=m,u=g,f=y,d=b;continue}return{quantile:f,value:M.some(l.value),consumed:u,rest:d}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},bn=Symbol.for("effect/MetricPair"),Sn={_Type:e=>e},vn=(e,t)=>({[bn]:Sn,metricKey:e,metricState:t,pipe(){return(0,C.pipeArguments)(this,arguments)}}),wn=Symbol.for("effect/MetricRegistry");class En{[wn]=wn;map=Lt.empty();snapshot(){const e=[];for(const[t,n]of this.map)e.push(vn(t,n.get()));return e}get(e){const t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){if(wt(e.keyType))return this.getCounter(e);if(_t(e.keyType))return this.getGauge(e);if(Et(e.keyType))return this.getFrequency(e);if(kt(e.keyType))return this.getHistogram(e);if(xt(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}return t}getCounter(e){let t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){const n=fn(e);(0,s.pipe)(this.map,Lt.has(e))||(0,s.pipe)(this.map,Lt.set(e,n)),t=n}return t}getFrequency(e){let t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){const n=dn(e);(0,s.pipe)(this.map,Lt.has(e))||(0,s.pipe)(this.map,Lt.set(e,n)),t=n}return t}getGauge(e){let t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){const n=pn(0,e.keyType.bigint?BigInt(0):0);(0,s.pipe)(this.map,Lt.has(e))||(0,s.pipe)(this.map,Lt.set(e,n)),t=n}return t}getHistogram(e){let t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){const n=hn(e);(0,s.pipe)(this.map,Lt.has(e))||(0,s.pipe)(this.map,Lt.set(e,n)),t=n}return t}getSummary(e){let t=(0,s.pipe)(this.map,Lt.get(e),M.getOrUndefined);if(null==t){const n=mn(e);(0,s.pipe)(this.map,Lt.has(e))||(0,s.pipe)(this.map,Lt.set(e,n)),t=n}return t}}const _n=Symbol.for("effect/Metric"),kn={_Type:e=>e,_In:e=>e,_Out:e=>e},xn=(0,k.globalValue)(Symbol.for("effect/Metric/globalMetricRegistry"),(()=>new En)),In=function(e,t,n){const r=Object.assign((e=>ue.tap(e,(e=>Cn(r,e)))),{[_n]:kn,keyType:e,unsafeUpdate:t,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return(0,C.pipeArguments)(this,arguments)}});return r},Tn=(e,t)=>On(Ct(e,t)),On=e=>{let t;const n=new WeakMap,r=r=>{if(0===r.length)return void 0!==t||(t=xn.get(e)),t;let i=n.get(r);return void 0!==i||(i=xn.get(Ft(e,r)),n.set(r,i)),i};return In(e.keyType,((e,t)=>r(t).update(e)),(e=>r(e).get()))},An=(e,t,n)=>On(Rt(e,t,n)),Nn=(0,s.dual)(3,((e,t,n)=>Mn(e,[It.make(t,n)]))),Mn=(0,s.dual)(2,((e,t)=>In(e.keyType,((n,r)=>e.unsafeUpdate(n,i.union(t,r))),(n=>e.unsafeValue(i.union(t,n)))))),Cn=(0,s.dual)(2,((e,t)=>ue.fiberRefGetWith(ue.currentMetricLabels,(n=>ue.sync((()=>e.unsafeUpdate(t,n)))))));var Rn=n(889706),Fn=n(937540),Ln=n(502146),Pn=n(66932),Dn=n(95807),Un=n(245779),jn=n(211635),qn=n(281),Wn=n(889542),Bn=n(861324),zn=n(888961),$n=n(776273);Un.DifferTypeId,jn.ChunkPatchTypeId,qn.ContextPatchTypeId,Wn.HashMapPatchTypeId,Bn.HashSetPatchTypeId,zn.OrPatchTypeId,$n.ReadonlyArrayPatchTypeId;const Vn=Un.make,Gn=(Un.environment,Un.chunk,Un.hashMap,Un.hashSet,Un.orElseEither,Un.readonlyArray,Un.transform,Un.update,Un.updateWith,Un.zip,"Empty"),Jn="AddSupervisor",Hn="RemoveSupervisor",Kn="AndThen",Yn={_tag:Gn},Zn=(e,t)=>({_tag:Kn,first:e,second:t}),Qn=(e,t)=>{let n=e,r=t;for(;u.isNonEmpty(r);){const e=u.headNonEmpty(r);switch(e._tag){case Gn:r=u.tailNonEmpty(r);break;case Jn:n=n.zip(e.supervisor),r=u.tailNonEmpty(r);break;case Hn:n=Xn(n,e.supervisor),r=u.tailNonEmpty(r);break;case Kn:r=u.prepend(e.first)(u.prepend(e.second)(u.tailNonEmpty(r)))}}return n},Xn=(e,t)=>Xe.equals(e,t)?Dn.none:Dn.isZip(e)?Xn(e.left,t).zip(Xn(e.right,t)):e,er=e=>Xe.equals(e,Dn.none)?I.empty():Dn.isZip(e)?(0,s.pipe)(er(e.left),I.union(er(e.right))):I.make(e),tr=Vn({empty:Yn,patch:(e,t)=>Qn(t,u.of(e)),combine:Zn,diff:(e,t)=>{if(Xe.equals(e,t))return Yn;const n=er(e),r=er(t),i=(0,s.pipe)(r,I.difference(n),I.reduce(Yn,((e,t)=>Zn(e,{_tag:Jn,supervisor:t})))),a=(0,s.pipe)(n,I.difference(r),I.reduce(Yn,((e,t)=>Zn(e,{_tag:Hn,supervisor:t}))));return Zn(i,a)}});var nr=n(127514),rr=n(853563);const ir=Tn("effect_fiber_started",{incremental:!0}),ar=Tn("effect_fiber_active"),sr=Tn("effect_fiber_successes",{incremental:!0}),or=Tn("effect_fiber_failures",{incremental:!0}),cr=Nn(An("effect_fiber_lifetimes",st({start:.5,factor:2,count:35})),"time_unit","milliseconds"),lr="Continue",ur="Yield",fr={_E:e=>e,_A:e=>e},dr=e=>{throw new Error(`BUG: FiberRuntime - ${T.toStringUnknown(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},pr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),hr=(0,k.globalValue)("effect/internal/fiberRuntime/yieldedOpChannel",(()=>({currentOp:null}))),mr={[Rn.OP_ON_SUCCESS]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i1(n))),OnStep:(e,t,n)=>ue.exitSucceed(ue.exitSucceed(n)),[Rn.OP_ON_SUCCESS_AND_FAILURE]:(e,t,n)=>(0,r.internalCall)((()=>t.effect_instruction_i2(n))),[Rn.OP_REVERT_FLAGS]:(e,t,n)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),Pn.interruptible(e._runtimeFlags)&&e.isInterrupted()?ue.exitFailCause(e.getInterruptedCause()):ue.exitSucceed(n)),[Rn.OP_WHILE]:(e,t,n)=>((0,r.internalCall)((()=>t.effect_instruction_i2(n))),(0,r.internalCall)((()=>t.effect_instruction_i0()))?(e.pushStack(t),(0,r.internalCall)((()=>t.effect_instruction_i1()))):ue.void)},gr={[be.OP_INTERRUPT_SIGNAL]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Pn.interruptible(t)?ue.exitFailCause(r.cause):n),[be.OP_RESUME]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[be.OP_STATEFUL]:(e,t,n,r)=>(r.onFiber(e,_.running(t)),n),[be.OP_YIELD_NOW]:(e,t,n,r)=>ue.flatMap(ue.yieldNow(),(()=>n))};class yr{[ye.FiberTypeId]=ye.fiberVariance;[ye.RuntimeFiberTypeId]=fr;pipe(){return(0,C.pipeArguments)(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,n){if(this._runtimeFlags=n,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(Vi),this._scheduler=this.getFiberRef(ae.currentScheduler),Pn.runtimeMetrics(n)){const e=this.getFiberRef(ue.currentMetricLabels);ir.unsafeUpdate(1,e),ar.unsafeUpdate(1,e)}this._tracer=f.get(this.getFiberRef(me.currentServices),nr.tracerTag)}id(){return this._fiberId}resume(e){this.tell(be.resume(e))}get status(){return this.ask(((e,t)=>t))}get runtimeFlags(){return this.ask(((e,t)=>_.isDone(t)?e._runtimeFlags:t.runtimeFlags))}scope(){return ve.unsafeMake(this)}get children(){return this.ask((e=>Array.from(e.getChildren())))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ue.currentInterruptedCause)}fiberRefs(){return this.ask((e=>e.getFiberRefs()))}ask(e){return ue.suspend((()=>{const t=ue.deferredUnsafeMake(this._fiberId);return this.tell(be.stateful(((n,r)=>{ue.deferredUnsafeDone(t,ue.sync((()=>e(n,r))))}))),ue.deferredAwait(t)}))}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return ue.async((e=>{const t=t=>e(ue.succeed(t));return this.tell(be.stateful(((e,n)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)}))),ue.sync((()=>this.tell(be.stateful(((e,n)=>{e.removeObserver(t)})))))}),this.id())}get inheritAll(){return ue.withFiberRuntime(((e,t)=>{const n=e.id(),r=e.getFiberRefs(),i=t.runtimeFlags,a=this.getFiberRefs(),o=Se.joinAs(r,n,a);e.setFiberRefs(o);const c=e.getFiberRef($i),l=(0,s.pipe)(Pn.diff(i,c),ie.exclude(Pn.Interruption),ie.exclude(Pn.WindDown));return ue.updateRuntimeFlags(l)}))}get poll(){return ue.sync((()=>M.fromNullable(this._exitValue)))}unsafePoll(){return this._exitValue}interruptAsFork(e){return ue.sync((()=>this.tell(be.interruptSignal(oe.interrupt(e)))))}unsafeInterruptAsFork(e){this.tell(be.interruptSignal(oe.interrupt(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter((t=>t!==e))}getFiberRefs(){return this.setFiberRef($i,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=Se.delete_(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=Se.updateAs(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=f.get(this.getFiberRef(me.currentServices),nr.tracerTag),this._supervisor=this.getFiberRef(Vi),this._scheduler=this.getFiberRef(ae.currentScheduler)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=lr;const n=globalThis[ye.currentFiberURI];globalThis[ye.currentFiberURI]=this;try{for(;t===lr;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[ye.currentFiberURI]=n}this._queue.length>0&&!this._running?(this._running=!0,t===ur?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(ue.currentSchedulingPriority))}drainQueueWhileRunning(e,t){let n=t;for(;this._queue.length>0;){const t=this._queue.splice(0,1)[0];n=gr[t._tag](this,e,n,t)}return n}isInterrupted(){return!oe.isEmpty(this.getFiberRef(ue.currentInterruptedCause))}addInterruptedCause(e){const t=this.getFiberRef(ue.currentInterruptedCause);this.setFiberRef(ue.currentInterruptedCause,oe.sequential(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(const t of this._children)t.tell(be.interruptSignal(oe.interrupt(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let t=!1;const n=()=>{const n=e.next();return n.done?ue.sync((()=>{t=!0})):ue.asVoid(n.value.await)};return ue.whileLoop({while:()=>!t,body:n,step:()=>{}})}return null}reportExitValue(e){if(Pn.runtimeMetrics(this._runtimeFlags)){const t=this.getFiberRef(ue.currentMetricLabels),n=this.id().startTimeMillis,r=Date.now();switch(cr.unsafeUpdate(r-n,t),ar.unsafeUpdate(-1,t),e._tag){case Rn.OP_SUCCESS:sr.unsafeUpdate(1,t);break;case Rn.OP_FAILURE:or.unsafeUpdate(1,t)}}if("Failure"===e._tag){const t=this.getFiberRef(ue.currentUnhandledErrorLogLevel);oe.isInterruptedOnly(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(Or)}log(e,t,n){const r=M.isSome(n)?n.value:this.getFiberRef(ue.currentLogLevel),i=this.getFiberRef(br);if(O.greaterThan(i,r))return;const a=this.getFiberRef(ue.currentLogSpan),s=this.getFiberRef(ue.currentLogAnnotations),o=this.getLoggers(),c=this.getFiberRefs();if(I.size(o)>0){const n=f.get(this.getFiberRef(me.currentServices),ce.clockTag),i=new Date(n.unsafeCurrentTimeMillis());for(const l of o)l.log({fiberId:this.id(),logLevel:r,message:e,cause:t,context:c,spans:a,annotations:s,date:i})}}evaluateMessageWhileSuspended(e){switch(e._tag){case be.OP_YIELD_NOW:return ur;case be.OP_INTERRUPT_SIGNAL:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(ue.exitFailCause(e.cause)),this._asyncInterruptor=null),lr;case be.OP_RESUME:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),lr;case be.OP_STATEFUL:return e.onFiber(this,null!==this._exitValue?_.done:_.suspended(this._runtimeFlags,this._asyncBlockingOn)),lr;default:return dr(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=Pn.interruptible(this._runtimeFlags)&&this.isInterrupted()?ue.exitFailCause(this.getInterruptedCause()):e;for(;null!==t;){const e=t,n=this.runLoop(e);if(n===pr){const e=hr.currentOp;hr.currentOp=null,e._op===Rn.OP_YIELD?Pn.cooperativeYielding(this._runtimeFlags)?(this.tell(be.yieldNow()),this.tell(be.resume(ue.exitVoid)),t=null):t=ue.exitVoid:e._op===Rn.OP_ASYNC&&(t=null)}else{this._runtimeFlags=(0,s.pipe)(this._runtimeFlags,Pn.enable(Pn.WindDown));const e=this.interruptAllChildren();null!==e?t=ue.flatMap(e,(()=>n)):(0===this._queue.length?this.setExitValue(n):this.tell(be.resume(n)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(be.resume(e));else{this._running=!0;const t=globalThis[ye.currentFiberURI];globalThis[ye.currentFiberURI]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[ye.currentFiberURI]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(be.resume(e))}patchRuntimeFlags(e,t){const n=Pn.patch(e,t);return globalThis[ye.currentFiberURI]=this,this._runtimeFlags=n,n}initiateAsync(e,t){let n=!1;const r=e=>{n||(n=!0,this.tell(be.resume(e)))};Pn.interruptible(e)&&(this._asyncInterruptor=r);try{t(r)}catch(i){r(ue.failCause(oe.die(i)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==Rn.OP_ON_FAILURE)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Rn.OP_ON_SUCCESS&&e._op!==Rn.OP_WHILE)return e;e=this.popStack()}}[Rn.OP_TAG](e){return ue.map(ue.fiberRefGet(ue.currentContext),(t=>f.unsafeGet(t,e)))}Left(e){return ue.fail(e.left)}None(e){return ue.fail(new ue.NoSuchElementException)}Right(e){return ue.exitSucceed(e.right)}Some(e){return ue.exitSucceed(e.value)}Micro(e){return ue.unsafeAsync((t=>{const n=(()=>{const e=new AbortController,t=Object.create(null);return t[K.key]=e,t[Y.key]=e.signal,$(t)})().pipe(G(Z,this.getFiberRef(ue.currentContext)));let r=t;return e[F](n,(e=>{if("Right"===e._tag)return r(ue.exitSucceed(e.right));switch(e.left._tag){case"Interrupt":return r(ue.exitFailCause(oe.interrupt(v.none)));case"Fail":return r(ue.fail(e.left.error));case"Die":return r(ue.die(e.left.defect))}})),ue.async((e=>{r=t=>{e(ue.void)},V(n,K).abort()}))}))}[Rn.OP_SYNC](e){const t=(0,r.internalCall)((()=>e.effect_instruction_i0())),n=this.getNextSuccessCont();return void 0!==n?(n._op in mr||dr(n),mr[n._op](this,n,t)):(hr.currentOp=ue.exitSucceed(t),pr)}[Rn.OP_SUCCESS](e){const t=e,n=this.getNextSuccessCont();return void 0!==n?(n._op in mr||dr(n),mr[n._op](this,n,t.effect_instruction_i0)):(hr.currentOp=t,pr)}[Rn.OP_FAILURE](e){const t=e.effect_instruction_i0,n=this.getNextFailCont();if(void 0===n)return hr.currentOp=ue.exitFailCause(t),pr;switch(n._op){case Rn.OP_ON_FAILURE:case Rn.OP_ON_SUCCESS_AND_FAILURE:return Pn.interruptible(this._runtimeFlags)&&this.isInterrupted()?ue.exitFailCause(oe.stripFailures(t)):(0,r.internalCall)((()=>n.effect_instruction_i1(t)));case"OnStep":return Pn.interruptible(this._runtimeFlags)&&this.isInterrupted()?ue.exitFailCause(oe.stripFailures(t)):ue.exitSucceed(ue.exitFailCause(t));case Rn.OP_REVERT_FLAGS:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),Pn.interruptible(this._runtimeFlags)&&this.isInterrupted()?ue.exitFailCause(oe.sequential(t,this.getInterruptedCause())):ue.exitFailCause(t);default:dr(n)}}[Rn.OP_WITH_RUNTIME](e){return(0,r.internalCall)((()=>e.effect_instruction_i0(this,_.running(this._runtimeFlags))))}Blocked(e){const t=this.getFiberRefs(),n=this._runtimeFlags;if(this._steps.length>0){const r=[],i=this._steps[this._steps.length-1];let a=this.popStack();for(;a&&"OnStep"!==a._op;)r.push(a),a=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;const s=E.diff(i.refs,t),o=Pn.diff(i.flags,n);return ue.exitSucceed(ue.blocked(e.effect_instruction_i0,ue.withFiberRuntime((t=>{for(;r.length>0;)t.pushStack(r.pop());return t.setFiberRefs(E.patch(t.id(),t.getFiberRefs())(s)),t._runtimeFlags=Pn.patch(o)(t._runtimeFlags),e.effect_instruction_i1}))))}return ue.uninterruptibleMask((t=>ue.flatMap(Kr(ue.runRequestBlock(e.effect_instruction_i0)),(()=>t(e.effect_instruction_i1)))))}RunBlocked(e){return(e=>ue.forEachSequentialDiscard(se.flatten(e),(e=>Gr(se.sequentialCollectionToChunk(e),(([e,t])=>{const n=new Map,r=[];for(const a of t){r.push(u.toReadonlyArray(a));for(const e of a)n.set(e.request,e)}const i=r.flat();return ue.fiberRefLocally(ra(e.runAll(r),i,(()=>i.forEach((e=>{e.listeners.interrupted=!0})))),le.currentRequestMap,n)}),!1,!1))))(e.effect_instruction_i0)}[Rn.OP_UPDATE_RUNTIME_FLAGS](e){const t=e.effect_instruction_i0,n=this._runtimeFlags,i=Pn.patch(n,t);if(Pn.interruptible(i)&&this.isInterrupted())return ue.exitFailCause(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),e.effect_instruction_i1){const t=Pn.diff(i,n);return this.pushStack(new ue.RevertFlags(t,e)),(0,r.internalCall)((()=>e.effect_instruction_i1(n)))}return ue.exitVoid}[Rn.OP_ON_SUCCESS](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[Rn.OP_ON_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[Rn.OP_ON_SUCCESS_AND_FAILURE](e){return this.pushStack(e),e.effect_instruction_i0}[Rn.OP_ASYNC](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),hr.currentOp=e,pr}[Rn.OP_YIELD](e){return this.isYielding=!1,hr.currentOp=e,pr}[Rn.OP_WHILE](e){const t=e.effect_instruction_i0,n=e.effect_instruction_i1;return t()?(this.pushStack(e),n()):ue.exitVoid}[Rn.OP_COMMIT](e){return(0,r.internalCall)((()=>e.commit()))}runLoop(e){let t=e;for(this.currentOpCount=0;;){if(0!==(this._runtimeFlags&Pn.OpSupervision)&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;const e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;const n=t;t=ue.flatMap(ue.yieldNow({priority:e}),(()=>n))}}try{if("_op"in t&&t._op in this||dr(t),t=this._tracer.context((()=>rr.getCurrentVersion()!==t[h]._V?ue.dieMessage(`Cannot execute an Effect versioned ${t[h]._V} with a Runtime of version ${rr.getCurrentVersion()}`):this[t._op](t)),this),t===pr){const e=hr.currentOp;return e._op===Rn.OP_YIELD||e._op===Rn.OP_ASYNC?pr:(hr.currentOp=null,e._op===Rn.OP_SUCCESS||e._op===Rn.OP_FAILURE?e:ue.exitFailCause(oe.die(e)))}}catch(n){t=ue.isEffectError(n)?ue.exitFailCause(n.cause):ue.isInterruptedException(n)?ue.exitFailCause(oe.sequential(oe.die(n),oe.interrupt(v.none))):ue.die(n)}}}run=()=>{this.drainQueueOnCurrentThread()}}const br=(0,k.globalValue)("effect/FiberRef/currentMinimumLogLevel",(()=>ue.fiberRefUnsafeMake(O.fromLiteral("Info")))),Sr=e=>Ie((t=>{const n=w.getOrDefault(t.context,me.currentServices);f.get(n,ge.consoleTag).unsafe.log(e.log(t))})),vr=e=>Ie((t=>{const n=w.getOrDefault(t.context,me.currentServices);f.get(n,ge.consoleTag).unsafe.error(e.log(t))})),wr=(0,k.globalValue)(Symbol.for("effect/Logger/defaultLogger"),(()=>Sr(Ae))),Er=(0,k.globalValue)(Symbol.for("effect/Logger/jsonLogger"),(()=>Sr(Le))),_r=(0,k.globalValue)(Symbol.for("effect/Logger/logFmtLogger"),(()=>Sr(Ce))),kr=(0,k.globalValue)(Symbol.for("effect/Logger/prettyLogger"),(()=>(e=>{const t=e?.mode??"auto",n="browser"===("auto"===t?He||Ke?"browser":"tty":t),r="boolean"===typeof e?.colors?e.colors:Je||n,i=e?.formatDate??Ge;return n?Ze({colors:r,formatDate:i}):Ye({colors:r,formatDate:i,stderr:!0===e?.stderr})})())),xr=(0,k.globalValue)(Symbol.for("effect/Logger/structuredLogger"),(()=>Sr(Re))),Ir=(0,k.globalValue)(Symbol.for("effect/Logger/tracerLogger"),(()=>Ie((({annotations:e,cause:t,context:n,fiberId:r,logLevel:i,message:a})=>{const s=M.flatMap(Se.get(n,ue.currentContext),f.getOption(nr.spanTag)),o=M.map(Se.get(n,me.currentServices),(e=>f.get(e,ce.clockTag)));if("None"===s._tag||"ExternalSpan"===s.value._tag||"None"===o._tag)return;const c=Object.fromEntries(x.map(e,T.toStringUnknown));c["effect.fiberId"]=v.threadName(r),c["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(c["effect.cause"]=oe.pretty(t)),s.value.event(String(a),o.value.unsafeCurrentTimeNanos(),c)})))),Tr=e=>Te(e,(e=>{const t=M.flatMap(Se.get(e.context,ue.currentContext),f.getOption(nr.spanTag));return"None"===t._tag?e:{...e,annotations:(0,s.pipe)(e.annotations,x.set("effect.traceId",t.value.traceId),x.set("effect.spanId",t.value.spanId),"Span"===t.value._tag?x.set("effect.spanName",t.value.name):s.identity)}})),Or=(0,k.globalValue)(Symbol.for("effect/FiberRef/currentLoggers"),(()=>ue.fiberRefUnsafeMakeHashSet(I.make(wr,Ir)))),Ar=(0,s.dual)(3,((e,t,n)=>ue.flatMap(Mi,(r=>{let i=[];const a=ue.suspend((()=>{if(0===i.length)return ue.void;const e=i;return i=[],n(e)}));return ue.uninterruptibleMask((n=>(0,s.pipe)(he.sleep(t),ue.zipRight(a),he.forever,n,Kr,ue.flatMap((e=>ue.scopeAddFinalizer(r,ue.interruptFiber(e)))),ue.zipRight(Rr((()=>a))),ue.as(Ie((t=>{i.push(e.log(t))}))))))})))),Nr=function(){if("string"===typeof arguments[0])return ji(ue.currentLogAnnotations,x.set(arguments[0],arguments[1]));const e=Object.entries(arguments[0]);return ji(ue.currentLogAnnotations,x.mutate((t=>{for(let n=0;n<e.length;n++){const[r,i]=e[n];x.set(t,r,i)}return t})))},Mr=(0,s.dual)((e=>ue.isEffect(e[0])),((e,t)=>ue.uninterruptible(ue.tap(e,(e=>Rr((n=>t(e,n)))))))),Cr=(0,s.dual)((e=>ue.isEffect(e[0])),((e,t)=>na(e,Rr((e=>t(e)))))),Rr=e=>ue.withFiberRuntime((t=>{const n=t.getFiberRefs(),r=t._runtimeFlags;return ue.flatMap(Mi,(t=>ue.scopeAddFinalizerExit(t,(t=>ue.withFiberRuntime((i=>{const a=i.getFiberRefs(),s=i._runtimeFlags,o=E.diff(a,n),c=Pn.diff(s,r),l=E.diff(n,a);return i.setFiberRefs(E.patch(o,i.id(),n)),na(ue.withRuntimeFlags(e(t),c),ue.sync((()=>{i.setFiberRefs(E.patch(l,i.id(),i.getFiberRefs()))})))}))))))})),Fr=e=>ue.fiberRefLocally(ue.currentForkScopeOverride,M.some(ve.globalScope))(e),Lr=Symbol.for("effect/Effect/existsPar/found"),Pr=(0,s.dual)((e=>c.isIterable(e[0])&&!ue.isEffect(e[0])),((e,t,n)=>de(n?.concurrency,(()=>ue.suspend((()=>Dr(e[Symbol.iterator](),0,t)))),(()=>ue.matchEffect($r(e,((e,n)=>ue.if_(t(e,n),{onTrue:()=>ue.fail(Lr),onFalse:()=>ue.void})),n),{onFailure:e=>e===Lr?ue.succeed(!0):ue.fail(e),onSuccess:()=>ue.succeed(!1)}))))),Dr=(e,t,n)=>{const r=e.next();return r.done?ue.succeed(!1):(0,s.pipe)(ue.flatMap(n(r.value,t),(r=>r?ue.succeed(r):Dr(e,t+1,n))))},Ur=(0,s.dual)((e=>c.isIterable(e[0])&&!ue.isEffect(e[0])),((e,t,n)=>{const r=n?.negate?(e,n)=>ue.map(t(e,n),l):t;return de(n?.concurrency,(()=>ue.suspend((()=>i.fromIterable(e).reduceRight(((e,t,n)=>ue.zipWith(e,ue.suspend((()=>r(t,n))),((e,n)=>n?[t,...e]:e))),ue.sync((()=>new Array)))))),(()=>ue.map($r(e,((e,t)=>ue.map(r(e,t),(t=>t?M.some(e):M.none()))),n),i.getSomes)))})),jr=(e,t)=>{const[n,r]=(e=>{if(Array.isArray(e)||c.isIterable(e))return[e,M.none()];const t=Object.keys(e),n=t.length;return[t.map((t=>e[t])),M.some((e=>{const r={};for(let i=0;i<n;i++)r[t[i]]=e[i];return r}))]})(e);return"validate"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(ue.either(i));return ue.flatMap($r(r,s.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>{const r=M.none(),i=e.length,a=new Array(i),s=new Array(i);let o=!1;for(let t=0;t<i;t++){const n=e[t];"Left"===n._tag?(a[t]=M.some(n.left),o=!0):(s[t]=n.right,a[t]=r)}return o?"Some"===t._tag?ue.fail(t.value(a)):ue.fail(a):n?.discard?ue.void:"Some"===t._tag?ue.succeed(t.value(s)):ue.succeed(s)}))})(n,r,t):"either"===t?.mode?((e,t,n)=>{const r=[];for(const i of e)r.push(ue.either(i));return n?.discard?$r(r,s.identity,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):ue.map($r(r,s.identity,{concurrency:n?.concurrency,batching:n?.batching}),(e=>"Some"===t._tag?t.value(e):e))})(n,r,t):!0!==t?.discard&&"Some"===r._tag?ue.map($r(n,s.identity,t),r.value):$r(n,s.identity,t)},qr=e=>t=>jr(t,e),Wr=(e,t)=>ue.map(jr(i.fromIterable(e).map(ue.exit),t),i.filterMap((e=>ue.exitIsSuccess(e)?M.some(e.effect_instruction_i0):M.none()))),Br=(0,s.dual)(2,((e,t)=>Array.from({length:t},(()=>e)))),zr=(0,s.dual)((e=>ue.isEffect(e[0])),((e,t,n)=>jr(Br(e,t),n))),$r=(0,s.dual)((e=>c.isIterable(e[0])),((e,t,n)=>ue.withFiberRuntime((r=>{const i=!0===n?.batching||"inherit"===n?.batching&&r.getFiberRef(ue.currentRequestBatching);return n?.discard?fe(n.concurrency,(()=>li(y)((n=>i?Gr(e,((e,r)=>n(t(e,r))),!0,!1,1):ue.forEachSequentialDiscard(e,((e,r)=>n(t(e,r))))))),(()=>li(b)((n=>Gr(e,((e,r)=>n(t(e,r))),i,!1)))),(n=>li(S(n))((r=>Gr(e,((e,n)=>r(t(e,n))),i,!1,n))))):fe(n?.concurrency,(()=>li(y)((n=>i?Jr(e,1,((e,r)=>n(t(e,r))),!0):ue.forEachSequential(e,((e,r)=>n(t(e,r))))))),(()=>li(b)((n=>Vr(e,((e,r)=>n(t(e,r))),i)))),(n=>li(S(n))((r=>Jr(e,n,((e,n)=>r(t(e,n))),i)))))})))),Vr=(e,t,n)=>ue.suspend((()=>{const r=i.fromIterable(e),a=new Array(r.length);return ue.zipRight(Gr(r,((e,n)=>ue.flatMap(t(e,n),(e=>ue.sync((()=>a[n]=e))))),n,!1),ue.succeed(a))})),Gr=(e,t,n,r,i)=>ue.uninterruptibleMask((a=>ue.transplant((s=>ue.withFiberRuntime((o=>{let c=Array.from(e).reverse(),l=c.length;if(0===l)return ue.void;let u=0,f=!1;const d=i?Math.min(c.length,i):c.length,p=new Set,h=new Array,m=new Array,g=new Array,y=new Array,b=()=>{const e=h.filter((({exit:e})=>"Failure"===e._tag)).sort(((e,t)=>e.index<t.index?-1:e.index===t.index?0:1)).map((({exit:e})=>e));return 0===e.length&&e.push(ue.exitVoid),e},S=(e,t=!1)=>{const n=ue.uninterruptible(s(e)),r=Qr(n,o,o._runtimeFlags,ve.globalScope);return o._scheduler.scheduleTask((()=>{t&&r.unsafeInterruptAsFork(o.id()),r.resume(n)}),0),r},v=()=>{r||(l-=c.length,c=[]),f=!0,p.forEach((e=>{e._scheduler.scheduleTask((()=>{e.unsafeInterruptAsFork(o.id())}),0)}))},w=n?ue.step:ue.exit,E=S(ue.async((e=>{const r=(e,t)=>{"Blocked"===e._op?y.push(e):(h.push({index:t,exit:e}),"Failure"!==e._op||f||v())},s=()=>{if(c.length>0){const d=c.pop();let v=u++;const E=()=>{const e=c.pop();return v=u++,ue.flatMap(ue.yieldNow(),(()=>ue.flatMap(w(a(t(e,v))),_)))},_=e=>c.length>0&&(r(e,v),c.length>0)?E():ue.succeed(e),k=ue.flatMap(w(a(t(d,v))),_),x=S(k);m.push(x),p.add(x),f&&x._scheduler.scheduleTask((()=>{x.unsafeInterruptAsFork(o.id())}),0),x.addObserver((t=>{let a;if(a="Failure"===t._op?t:t.effect_instruction_i0,g.push(x),p.delete(x),r(a,v),h.length===l)e(ue.succeed(M.getOrElse(ue.exitCollectAll(b(),{parallel:!0}),(()=>ue.exitVoid))));else if(y.length+h.length===l){const t=y.map((e=>e.effect_instruction_i0)).reduce(se.par);e(ue.succeed(ue.blocked(t,Gr([M.getOrElse(ue.exitCollectAll(b(),{parallel:!0}),(()=>ue.exitVoid)),...y.map((e=>e.effect_instruction_i1))],(e=>e),n,!0,i))))}else s()}))}};for(let t=0;t<d;t++)s()})));return ue.asVoid(ue.onExit(ue.flatten(a(ye.join(E))),ue.exitMatch({onFailure:()=>{v();const e=y.length+1,t=Math.min("number"===typeof i?i:y.length,y.length),n=Array.from(y);return ue.async((r=>{const i=[];let a=0,s=0;const o=(t,s)=>o=>{i[t]=o,a++,a===e&&r(M.getOrThrow(ue.exitCollectAll(i,{parallel:!0}))),n.length>0&&s&&c()},c=()=>{S(n.pop(),!0).addObserver(o(s,!0)),s++};E.addObserver(o(s,!1)),s++;for(let e=0;e<t;e++)c()}))},onSuccess:()=>ue.forEachSequential(g,(e=>e.inheritAll))})))})))))),Jr=(e,t,n,r)=>ue.suspend((()=>{const a=i.fromIterable(e),s=new Array(a.length);return ue.zipRight(Gr(a,((e,t)=>ue.map(n(e,t),(e=>s[t]=e))),r,!1,t),ue.succeed(s))})),Hr=e=>ue.withFiberRuntime(((t,n)=>ue.succeed(Zr(e,t,n.runtimeFlags)))),Kr=e=>ei(e,ve.globalScope),Yr=(0,s.dual)(2,((e,t)=>Hr(ue.onError(e,(e=>{const n=oe.failureOrCause(e);switch(n._tag){case"Left":return t(n.left);case"Right":return ue.failCause(n.right)}}))))),Zr=(e,t,n,r=null)=>{const i=Xr(e,t,n,r);return i.resume(e),i},Qr=(e,t,n,r=null)=>Xr(e,t,n,r),Xr=(e,t,n,r=null)=>{const i=v.unsafeMake(),a=t.getFiberRefs(),o=Se.forkAs(a,i),c=new yr(i,o,n),l=Se.getOrDefault(o,ue.currentContext),u=c._supervisor;u.onStart(l,e,M.some(t),c),c.addObserver((e=>u.onEnd(e,c)));return(null!==r?r:(0,s.pipe)(t.getFiberRef(ue.currentForkScopeOverride),M.getOrElse((()=>t.scope())))).add(n,c),c},ei=(e,t)=>ue.withFiberRuntime(((n,r)=>ue.succeed(Zr(e,n,r.runtimeFlags,t)))),ti=(0,s.dual)((e=>c.isFunction(e[2])),((e,t,n,r)=>de(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>ue.zipWith(e,t,((e,t)=>n(e,t,r)))),ue.succeed(t))),(()=>ue.flatMap(re.make(t),(t=>ue.flatMap($r(e,((e,r)=>ue.flatMap(e,(e=>re.update(t,(t=>n(t,e,r)))))),r),(()=>re.get(t))))))))),ni=(0,s.dual)((e=>c.isIterable(e[0])),((e,t,n)=>(0,s.pipe)($r(e,((e,n)=>ue.either(t(e,n))),n),ue.map((e=>ue.partitionMap(e,s.identity)))))),ri=(0,s.dual)((e=>c.isIterable(e[0])),((e,t,n)=>ue.flatMap(ni(e,t,{concurrency:n?.concurrency,batching:n?.batching}),(([e,t])=>0===e.length?n?.discard?ue.void:ue.succeed(t):ue.fail(e))))),ii=e=>{const t=u.fromIterable(e);if(!u.isNonEmpty(t))return ue.dieSync((()=>new ue.IllegalArgumentException("Received an empty collection of effects")));const n=u.headNonEmpty(t),r=u.tailNonEmpty(t),a=e=>(0,s.pipe)(ye.inheritAll(e[1]),ue.as(e[0]));return(0,s.pipe)(ue.deferredMake(),ue.flatMap((e=>(0,s.pipe)(re.make(r.length),ue.flatMap((t=>ue.uninterruptibleMask((o=>(0,s.pipe)(Hr(ue.interruptible(n)),ue.flatMap((n=>(0,s.pipe)(r,ue.forEachSequential((e=>Hr(ue.interruptible(e)))),ue.map((e=>u.unsafeFromArray(e))),ue.map((e=>(0,s.pipe)(e,u.prepend(n)))),ue.tap((n=>(0,s.pipe)(n,i.reduce(ue.void,((r,i)=>(0,s.pipe)(r,ue.zipRight((0,s.pipe)(ye._await(i),ue.flatMap(ai(n,i,e,t)),Hr,ue.asVoid)))))))),ue.flatMap((t=>(0,s.pipe)(o((0,s.pipe)(d.await(e),ue.flatMap(a))),ue.onInterrupt((()=>(0,s.pipe)(t,i.reduce(ue.void,((e,t)=>(0,s.pipe)(e,ue.zipLeft(ue.interruptFiber(t)))))))))))))))))))))))},ai=(e,t,n,r)=>a=>ue.exitMatchEffect(a,{onFailure:e=>(0,s.pipe)(re.modify(r,(t=>[0===t?(0,s.pipe)(ue.deferredFailCause(n,e),ue.asVoid):ue.void,t-1])),ue.flatten),onSuccess:r=>(0,s.pipe)(ue.deferredSucceed(n,[r,t]),ue.flatMap((n=>n?(0,s.pipe)(u.fromIterable(e),i.reduce(ue.void,((e,n)=>n===t?e:(0,s.pipe)(e,ue.zipLeft(ue.interruptFiber(n)))))):ue.void)))}),si=(0,s.dual)((e=>c.isIterable(e[0])&&!ue.isEffect(e[0])),((e,t,n,r)=>de(r?.concurrency,(()=>i.fromIterable(e).reduce(((e,t,r)=>ue.zipWith(e,t,((e,t)=>n(e,t,r)))),t)),(()=>ue.suspend((()=>(0,s.pipe)(ti([t,...e],M.none(),((e,t,r)=>{switch(e._tag){case"None":return M.some(t);case"Some":return M.some(n(e.value,t,r))}}),r),ue.map((e=>{switch(e._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return e.value}}))))))))),oi=e=>ue.contextWithEffect((t=>M.match(f.getOption(t,Ni),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return ue.flatMap(ue.scopeFork(t,b),(t=>Li(e,t)))}}}))),ci=e=>t=>ue.contextWithEffect((n=>M.match(f.getOption(n,Ni),{onNone:()=>t,onSome:n=>"ParallelN"===n.strategy._tag&&n.strategy.parallelism===e?t:ue.flatMap(ue.scopeFork(n,S(e)),(e=>Li(t,e)))}))),li=e=>t=>ue.contextWithEffect((n=>M.match(f.getOption(n,Ni),{onNone:()=>t(s.identity),onSome:n=>{const r="Parallel"===e._tag?oi:"Sequential"===e._tag?di:ci(e.parallelism);switch(n.strategy._tag){case"Parallel":return r(t(oi));case"Sequential":return r(t(di));case"ParallelN":return r(t(ci(n.strategy.parallelism)))}}}))),ui=e=>ue.flatMap(Ni,e),fi=e=>ue.flatMap(Fi(),(t=>Pi(e,t))),di=e=>ue.contextWithEffect((t=>M.match(f.getOption(t,Ni),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return ue.flatMap(ue.scopeFork(t,y),(t=>Li(e,t)))}}}))),pi=(e,t)=>hi([It.make(e,t)]),hi=e=>ji(ue.currentMetricLabels,(t=>i.union(t,e))),mi=(0,s.dual)(2,((e,t)=>ue.acquireUseRelease(Fi(),(n=>ue.flatMap(Li(e,n),t)),((e,t)=>ue.scopeClose(e,t))))),gi=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n)=>yi(e,t,((e,t)=>[e,t]),n))),yi=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n,r)=>ue.flatten(Oi(ue.exit(e),ue.exit(t),((e,t)=>ue.exitZipWith(e,t,{onSuccess:n,onFailure:(e,t)=>r?.concurrent?oe.parallel(e,t):oe.sequential(e,t)})),r)))),bi=(0,s.dual)(2,((e,t)=>ue.flatMap(ni(e,t),(([e,t])=>0===e.length?ue.succeed(t):ue.fail(e))))),Si=(0,s.dual)(2,((e,t)=>ue.flatMap(ni(e,t),(([e,t])=>0===e.length?ue.void:ue.fail(e))))),vi=(0,s.dual)((e=>c.isIterable(e[0])),((e,t,n)=>ue.flip($r(e,((e,n)=>ue.flip(t(e,n))),n)))),wi=e=>ji(me.currentServices,f.add(ce.clockTag,e)),Ei=e=>ji(me.currentServices,f.add(Fn.randomTag,e)),_i=e=>ji(me.currentServices,f.add(pe.configProviderTag,e)),ki=e=>ui((t=>ue.flatMap(ue.scopeFork(t,g.sequential),(t=>(0,s.pipe)(e,Li(t),ue.map((e=>[ue.fiberIdWith((e=>ue.scopeClose(t,ue.exitInterrupt(e)))),e]))))))),xi=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n)=>Oi(e,t,((e,t)=>[e,t]),n))),Ii=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Oi(e,t,((e,t)=>e),n):ue.zipLeft(e,t))),Ti=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n)=>!0===n?.concurrent||void 0!==n?.batching&&!1!==n.batching?Oi(e,t,((e,t)=>t),n):ue.zipRight(e,t))),Oi=(0,s.dual)((e=>ue.isEffect(e[1])),((e,t,n,r)=>ue.map(jr([e,t],{concurrency:r?.concurrent?2:1,batching:r?.batching}),(([e,t])=>n(e,t))))),Ai=e=>e===ie.empty?ue.void:(0,s.pipe)(ue.runtimeFlags,ue.flatMap((t=>{const n=Pn.patch(t,e),r=Pn.diff(n,t);return(0,s.pipe)(ue.updateRuntimeFlags(e),ue.zipRight(Rr((()=>ue.updateRuntimeFlags(r)))),ue.asVoid)})),ue.uninterruptible),Ni=f.GenericTag("effect/Scope"),Mi=Ni,Ci={[ue.ScopeTypeId]:ue.ScopeTypeId,[ue.CloseableScopeTypeId]:ue.CloseableScopeTypeId,pipe(){return(0,C.pipeArguments)(this,arguments)},fork(e){return ue.sync((()=>{const t=Ri(e);if("Closed"===this.state._tag)return t.state=this.state,t;const n=e=>t.close(e);return this.state.finalizers.add(n),((e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)})(t,(e=>ue.sync((()=>{"Open"===this.state._tag&&this.state.finalizers.delete(n)})))),t}))},close(e){return ue.suspend((()=>{if("Closed"===this.state._tag)return ue.void;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},0===t.length?ue.void:g.isSequential(this.strategy)?(0,s.pipe)(ue.forEachSequential(t,(t=>ue.exit(t(e)))),ue.flatMap((e=>(0,s.pipe)(ue.exitCollectAll(e),M.map(ue.exitAsVoid),M.getOrElse((()=>ue.exitVoid)))))):g.isParallel(this.strategy)?(0,s.pipe)(Vr(t,(t=>ue.exit(t(e))),!1),ue.flatMap((e=>(0,s.pipe)(ue.exitCollectAll(e,{parallel:!0}),M.map(ue.exitAsVoid),M.getOrElse((()=>ue.exitVoid)))))):(0,s.pipe)(Jr(t,this.strategy.parallelism,(t=>ue.exit(t(e))),!1),ue.flatMap((e=>(0,s.pipe)(ue.exitCollectAll(e,{parallel:!0}),M.map(ue.exitAsVoid),M.getOrElse((()=>ue.exitVoid))))))}))},addFinalizer(e){return ue.suspend((()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),ue.void)))}},Ri=(e=g.sequential)=>{const t=Object.create(Ci);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Fi=(e=g.sequential)=>ue.sync((()=>Ri(e))),Li=(0,s.dual)(2,((e,t)=>ue.mapInputContext(e,f.merge(f.make(Ni,t))))),Pi=(0,s.dual)(2,((e,t)=>(0,s.pipe)(e,Li(t),ue.onExit((e=>t.close(e)))))),Di=e=>ue.fiberRefUnsafeMakePatch(e,{differ:tr,fork:Yn}),Ui=(0,s.dual)(2,((e,t)=>ue.asVoid(Mr(ue.flatMap(ue.fiberRefGet(e),(n=>ue.as(ue.fiberRefSet(e,t),n))),(t=>ue.fiberRefSet(e,t)))))),ji=(0,s.dual)(2,((e,t)=>ue.fiberRefGetWith(e,(n=>Ui(e,t(n)))))),qi=(e,t)=>Wi((()=>ue.fiberRefUnsafeMake(e,t))),Wi=e=>Mr(ue.tap(ue.sync(e),(e=>ue.fiberRefUpdate(e,s.identity))),(e=>ue.fiberRefDelete(e))),Bi=e=>Wi((()=>ue.fiberRefUnsafeMakeContext(e))),zi=e=>Wi((()=>ue.fiberRefUnsafeMakeRuntimeFlags(e))),$i=ue.fiberRefUnsafeMakeRuntimeFlags(Pn.none),Vi=Di(Dn.none),Gi=e=>ue.asVoid(ye._await(Ji(e))),Ji=e=>({[ye.FiberTypeId]:ye.fiberVariance,id:()=>i.fromIterable(e).reduce(((e,t)=>v.combine(e,t.id())),v.none),await:ue.exit(Vr(e,(e=>ue.flatten(e.await)),!1)),children:ue.map(Vr(e,(e=>e.children),!1),i.flatten),inheritAll:ue.forEachSequentialDiscard(e,(e=>e.inheritAll)),poll:ue.map(ue.forEachSequential(e,(e=>e.poll)),i.reduceRight(M.some(ue.exitSucceed(new Array)),((e,t)=>{switch(t._tag){case"None":return M.none();case"Some":switch(e._tag){case"None":return M.none();case"Some":return M.some(ue.exitZipWith(t.value,e.value,{onSuccess:(e,t)=>[e,...t],onFailure:oe.parallel}))}}}))),interruptAsFork:t=>ue.forEachSequentialDiscard(e,(e=>e.interruptAsFork(t))),pipe(){return(0,C.pipeArguments)(this,arguments)}}),Hi=e=>ue.asVoid(Kr(ue.interruptFiber(e))),Ki=e=>ye.join(Ji(e)),Yi=e=>Mr(ue.succeed(e),ue.interruptFiber),Zi=(0,s.dual)(3,((e,t,n)=>ea(e,t,{onSelfWin:(e,t)=>ue.flatMap(e.await,(r=>{switch(r._tag){case Rn.OP_SUCCESS:return ue.flatMap(e.inheritAll,(()=>n.onSelfDone(r,t)));case Rn.OP_FAILURE:return n.onSelfDone(r,t)}})),onOtherWin:(e,t)=>ue.flatMap(e.await,(r=>{switch(r._tag){case Rn.OP_SUCCESS:return ue.flatMap(e.inheritAll,(()=>n.onOtherDone(r,t)));case Rn.OP_FAILURE:return n.onOtherDone(r,t)}}))}))),Qi=e=>ue.uninterruptibleMask((t=>ue.fiberIdWith((n=>ue.flatMap(Kr(t(e)),(e=>(0,s.pipe)(t(ye.join(e)),ue.onInterrupt((()=>(0,s.pipe)(e,ye.interruptAsFork(n))))))))))),Xi=(0,s.dual)(2,((e,t)=>ue.fiberIdWith((n=>Zi(e,t,{onSelfDone:(e,t)=>ue.exitMatchEffect(e,{onFailure:e=>(0,s.pipe)(ye.join(t),he.mapErrorCause((t=>oe.parallel(e,t)))),onSuccess:e=>(0,s.pipe)(t,ue.interruptAsFiber(n),ue.as(e))}),onOtherDone:(e,t)=>ue.exitMatchEffect(e,{onFailure:e=>(0,s.pipe)(ye.join(t),he.mapErrorCause((t=>oe.parallel(t,e)))),onSuccess:e=>(0,s.pipe)(t,ue.interruptAsFiber(n),ue.as(e))})}))))),ea=(0,s.dual)(3,((e,t,n)=>ue.withFiberRuntime(((r,i)=>{const a=i.runtimeFlags,s=ne.make(!0),o=Xr(e,r,a,n.selfScope),c=Xr(t,r,a,n.otherScope);return ue.async((r=>{o.addObserver((()=>ta(o,c,n.onSelfWin,s,r))),c.addObserver((()=>ta(c,o,n.onOtherWin,s,r))),o.startFork(e),c.startFork(t)}),v.combine(o.id(),c.id()))})))),ta=(e,t,n,r,i)=>{ne.compareAndSet(!0,!1)(r)&&i(n(e,t))},na=(0,s.dual)(2,((e,t)=>ue.uninterruptibleMask((n=>ue.matchCauseEffect(n(e),{onFailure:e=>ue.matchCauseEffect(t,{onFailure:t=>ue.failCause(oe.sequential(e,t)),onSuccess:()=>ue.failCause(e)}),onSuccess:e=>ue.as(t,e)}))))),ra=(e,t,n)=>ue.fiberIdWith((r=>ue.flatMap(ue.flatMap(Kr(ue.interruptible(e)),(e=>ue.async((r=>{const i=t.map((e=>e.listeners.count)),a=()=>{i.every((e=>0===e))&&t.every((e=>"Pending"===e.result.state.current._tag||!("Done"!==e.result.state.current._tag||!ue.exitIsExit(e.result.state.current.effect)||"Failure"!==e.result.state.current.effect._tag||!oe.isInterrupted(e.result.state.current.effect.cause))))&&(s.forEach((e=>e())),n?.(),r(ue.interruptFiber(e)))};e.addObserver((e=>{s.forEach((e=>e())),r(e)}));const s=t.map(((e,t)=>{const n=e=>{i[t]=e,a()};return e.listeners.addObserver(n),()=>e.listeners.removeObserver(n)}));return a(),ue.sync((()=>{s.forEach((e=>e()))}))})))),(()=>ue.suspend((()=>{const e=t.flatMap((e=>e.state.completed?[]:[e]));return ue.forEachSequentialDiscard(e,(e=>(0,Ln.complete)(e.request,ue.exitInterrupt(r))))})))))),ia=(0,s.dual)(2,((e,t)=>ue.fiberRefGetWith(le.currentRequestMap,(n=>ue.suspend((()=>{const r=i.fromIterable(t).flatMap((e=>n.has(e)?[n.get(e)]:[]));return ra(e,r)})))))),aa=(e,t)=>(t=nr.addSpanStackTrace(t),ue.uninterruptible(ue.withFiberRuntime((n=>{const r=f.unsafeGet(n.getFiberRef(ue.currentContext),Ni),i=he.unsafeMakeSpan(n,e,t),a=n.getFiberRef(ue.currentTracerTimingEnabled),s=f.get(n.getFiberRef(me.currentServices),ce.clockTag);return ue.as(ue.scopeAddFinalizerExit(r,(e=>he.endSpan(i,e,s,a))),i)})))),sa=e=>ji(me.currentServices,f.add(nr.tracerTag,e)),oa=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=nr.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return ue.flatMap(aa(t,nr.addSpanStackTrace(n)),(t=>he.provideService(e,nr.spanTag,t)))}return e=>ue.flatMap(aa(t,nr.addSpanStackTrace(n)),(t=>he.provideService(e,nr.spanTag,t)))}},508977:(e,t,n)=>{n.r(t),n.d(t,{FiberScopeTypeId:()=>s,globalScope:()=>u,unsafeMake:()=>l});var r=n(295602),i=n(606517),a=n(44402);const s=Symbol.for("effect/FiberScope");class o{[s]=s;fiberId=r.none;roots=new Set;add(e,t){this.roots.add(t),t.addObserver((()=>{this.roots.delete(t)}))}}class c{fiberId;parent;[s]=s;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(a.stateful((e=>{e.addChild(t),t.addObserver((()=>{e.removeChild(t)}))})))}}const l=e=>new c(e.id(),e),u=(0,i.globalValue)(Symbol.for("effect/FiberScope/Global"),(()=>new o))},918799:(e,t,n)=>{n.r(t),n.d(t,{HashMapTypeId:()=>N,beginMutation:()=>ee,compact:()=>he,empty:()=>U,endMutation:()=>te,entries:()=>Q,filter:()=>pe,filterMap:()=>me,findFirst:()=>ge,flatMap:()=>ue,forEach:()=>fe,fromIterable:()=>q,get:()=>z,getHash:()=>$,has:()=>G,hasHash:()=>J,isEmpty:()=>B,isHashMap:()=>W,keys:()=>Y,make:()=>j,map:()=>le,modify:()=>ae,modifyAt:()=>re,modifyHash:()=>ie,mutate:()=>ne,reduce:()=>de,remove:()=>oe,removeMany:()=>ce,set:()=>H,setTree:()=>K,size:()=>X,union:()=>se,unsafeGet:()=>V,values:()=>Z});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(977948),c=n(953533),l=n(856572);const u=Math.pow(2,5),f=u-1,d=u/2,p=u/4;function h(e,t){return t>>>e&f}function m(e){return 1<<e}function g(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n}var y=n(107687);function b(e,t,n,r){let i=r;if(!e){const e=r.length;i=new Array(e);for(let t=0;t<e;++t)i[t]=r[t]}return i[t]=n,i}function S(e,t,n){const r=n.length-1;let i=0,a=0,s=n;if(e)i=a=t;else for(s=new Array(r);i<t;)s[a++]=n[i++];for(++i;i<=r;)s[a++]=n[i++];return e&&(s.length=r),s}class v{_tag="EmptyNode";modify(e,t,n,r,i,a){const s=n(o.none());return o.isNone(s)?new v:(++a.value,new _(e,r,i,s))}}function w(e){return(0,l.isTagged)(e,"EmptyNode")}function E(e,t){return!w(e)&&t===e.edit}class _{edit;hash;key;value;_tag="LeafNode";constructor(e,t,n,r){this.edit=e,this.hash=t,this.key=n,this.value=r}modify(e,t,n,i,a,s){if((0,r.equals)(a,this.key)){const t=n(this.value);return t===this.value?this:o.isNone(t)?(--s.value,new v):E(this,e)?(this.value=t,this):new _(e,i,a,t)}const c=n(o.none());return o.isNone(c)?this:(++s.value,O(e,t,this.hash,this,i,new _(e,i,a,c)))}}class k{edit;hash;children;_tag="CollisionNode";constructor(e,t,n){this.edit=e,this.hash=t,this.children=n}modify(e,t,n,r,i,a){if(r===this.hash){const t=E(this,e),r=this.updateCollisionList(t,e,this.hash,this.children,n,i,a);return r===this.children?this:r.length>1?new k(e,this.hash,r):r[0]}const s=n(o.none());return o.isNone(s)?this:(++a.value,O(e,t,this.hash,this,r,new _(e,r,i,s)))}updateCollisionList(e,t,n,i,a,s,c){const l=i.length;for(let f=0;f<l;++f){const l=i[f];if("key"in l&&(0,r.equals)(s,l.key)){const r=l.value,u=a(r);return u===r?i:o.isNone(u)?(--c.value,S(e,f,i)):b(e,f,new _(t,n,s,u),i)}}const u=a(o.none());return o.isNone(u)?i:(++c.value,b(e,l,new _(t,n,s,u),i))}}class x{edit;mask;children;_tag="IndexedNode";constructor(e,t,n){this.edit=e,this.mask=t,this.children=n}modify(e,t,n,r,i,a){const s=this.mask,o=this.children,c=h(t,r),l=m(c),u=g(s,l),f=s&l,p=E(this,e);if(!f){const f=(new v).modify(e,t+5,n,r,i,a);return f?o.length>=d?function(e,t,n,r,i){const a=[];let s=r,o=0;for(let c=0;s;++c)1&s&&(a[c]=i[o++]),s>>>=1;return a[t]=n,new I(e,o+1,a)}(e,c,f,s,o):new x(e,s|l,function(e,t,n,r){const i=r.length;if(e){let e=i;for(;e>=t;)r[e--]=r[e];return r[t]=n,r}let a=0,s=0;const o=new Array(i+1);for(;a<t;)o[s++]=r[a++];for(o[t]=n;a<i;)o[++s]=r[a++];return o}(p,u,f,o)):this}const y=o[u],_=y.modify(e,t+5,n,r,i,a);if(y===_)return this;let k,T=s;if(w(_)){if(T&=~l,!T)return new v;if(o.length<=2&&(w(O=o[1^u])||"LeafNode"===O._tag||"CollisionNode"===O._tag))return o[1^u];k=S(p,u,o)}else k=b(p,u,_,o);var O;return p?(this.mask=T,this.children=k,this):new x(e,T,k)}}class I{edit;size;children;_tag="ArrayNode";constructor(e,t,n){this.edit=e,this.size=t,this.children=n}modify(e,t,n,r,i,a){let s=this.size;const o=this.children,c=h(t,r),l=o[c],u=(l||new v).modify(e,t+5,n,r,i,a);if(l===u)return this;const f=E(this,e);let d;if(w(l)&&!w(u))++s,d=b(f,c,u,o);else if(!w(l)&&w(u)){if(--s,s<=p)return function(e,t,n,r){const i=new Array(t-1);let a=0,s=0;for(let o=0,c=r.length;o<c;++o)if(o!==n){const e=r[o];e&&!w(e)&&(i[a++]=e,s|=1<<o)}return new x(e,s,i)}(e,s,c,o);d=b(f,c,new v,o)}else d=b(f,c,u,o);return f?(this.size=s,this.children=d,this):new I(e,s,d)}}function T(e,t,n,r,i,a){if(n===i)return new k(e,n,[a,r]);const s=h(t,n),o=h(t,i);if(s===o)return t=>new x(e,m(s)|m(o),[t]);{const t=s<o?[r,a]:[a,r];return new x(e,m(s)|m(o),t)}}function O(e,t,n,r,i,a){let s,o=t;for(;;){const t=T(e,o,n,r,i,a);if("function"!==typeof t){let e=t;for(;null!=s;)e=s.value(e),s=s.previous;return e}s=y.make(t,s),o+=5}}const A="effect/HashMap",N=Symbol.for(A),M={[N]:N,[Symbol.iterator](){return new R(this,((e,t)=>[e,t]))},[a.symbol](){let e=a.hash(A);for(const t of this)e^=(0,i.pipe)(a.hash(t[0]),a.combine(a.hash(t[1])));return a.cached(this,e)},[r.symbol](e){if(W(e)){if(e._size!==this._size)return!1;for(const t of this){const n=(0,i.pipe)(e,$(t[0],a.hash(t[0])));if(o.isNone(n))return!1;if(!r.equals(t[1],n.value))return!1}return!0}return!1},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,c.pipeArguments)(this,arguments)}},C=(e,t,n,r)=>{const i=Object.create(M);return i._editable=e,i._edit=t,i._root=n,i._size=r,i};class R{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=L(this.map._root,this.f,void 0)}next(){if(o.isNone(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=F(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new R(this.map,this.f)}}const F=e=>e?P(e[0],e[1],e[2],e[3],e[4]):o.none(),L=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return o.isSome(e.value)?o.some({value:t(e.key,e.value.value),cont:n}):F(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return P(r.length,r,0,t,n)}default:return F(n)}},P=(e,t,n,r,i)=>{for(;n<e;){const a=t[n++];if(a&&!w(a))return L(a,r,[e,t,n,r,i])}return F(i)},D=C(!1,0,new v,0),U=()=>D,j=(...e)=>q(e),q=e=>{const t=ee(U());for(const n of e)H(t,n[0],n[1]);return te(t)},W=e=>(0,l.hasProperty)(e,N),B=e=>e&&w(e._root),z=i.dual(2,((e,t)=>$(e,t,a.hash(t)))),$=i.dual(3,((e,t,n)=>{let i=e._root,a=0;for(;;)switch(i._tag){case"LeafNode":return r.equals(t,i.key)?i.value:o.none();case"CollisionNode":if(n===i.hash){const e=i.children;for(let n=0,i=e.length;n<i;++n){const i=e[n];if("key"in i&&r.equals(t,i.key))return i.value}}return o.none();case"IndexedNode":{const e=m(h(a,n));if(i.mask&e){i=i.children[g(i.mask,e)],a+=5;break}return o.none()}case"ArrayNode":if(i=i.children[h(a,n)],i){a+=5;break}return o.none();default:return o.none()}})),V=i.dual(2,((e,t)=>{const n=$(e,t,a.hash(t));if(o.isNone(n))throw new Error("Expected map to contain key");return n.value})),G=i.dual(2,((e,t)=>o.isSome($(e,t,a.hash(t))))),J=i.dual(3,((e,t,n)=>o.isSome($(e,t,n)))),H=i.dual(3,((e,t,n)=>re(e,t,(()=>o.some(n))))),K=i.dual(3,((e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:C(e._editable,e._edit,t,n))),Y=e=>new R(e,(e=>e)),Z=e=>new R(e,((e,t)=>t)),Q=e=>new R(e,((e,t)=>[e,t])),X=e=>e._size,ee=e=>C(!0,e._edit+1,e._root,e._size),te=e=>(e._editable=!1,e),ne=i.dual(2,((e,t)=>{const n=ee(e);return t(n),te(n)})),re=i.dual(3,((e,t,n)=>ie(e,t,a.hash(t),n))),ie=i.dual(4,((e,t,n,r)=>{const a={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,a);return(0,i.pipe)(e,K(s,a.value))})),ae=i.dual(3,((e,t,n)=>re(e,t,o.map(n)))),se=i.dual(2,((e,t)=>{const n=ee(e);return fe(t,((e,t)=>H(n,t,e))),te(n)})),oe=i.dual(2,((e,t)=>re(e,t,o.none))),ce=i.dual(2,((e,t)=>ne(e,(e=>{for(const n of t)oe(n)(e)})))),le=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>H(e,r,t(n,r)))))),ue=i.dual(2,((e,t)=>de(e,U(),((e,n,r)=>ne(e,(e=>fe(t(n,r),((t,n)=>H(e,n,t))))))))),fe=i.dual(2,((e,t)=>de(e,void 0,((e,n,r)=>t(n,r))))),de=i.dual(3,((e,t,n)=>{const r=e._root;if("LeafNode"===r._tag)return o.isSome(r.value)?n(t,r.value.value,r.key):t;if("EmptyNode"===r._tag)return t;const i=[r.children];let a;for(;a=i.pop();)for(let e=0,r=a.length;e<r;){const r=a[e++];r&&!w(r)&&("LeafNode"===r._tag?o.isSome(r.value)&&(t=n(t,r.value.value,r.key)):i.push(r.children))}return t})),pe=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e)t(i,r)&&H(n,r,i)})))),he=e=>me(e,i.identity),me=i.dual(2,((e,t)=>ne(U(),(n=>{for(const[r,i]of e){const e=t(i,r);o.isSome(e)&&H(n,r,e.value)}})))),ge=i.dual(2,((e,t)=>{for(const n of e)if(t(n[1],n[0]))return o.some(n);return o.none()}))},722167:(e,t,n)=>{n.r(t),n.d(t,{HashSetTypeId:()=>f,add:()=>O,beginMutation:()=>x,difference:()=>N,empty:()=>g,endMutation:()=>I,every:()=>w,filter:()=>U,flatMap:()=>L,forEach:()=>P,fromIterable:()=>y,has:()=>S,intersection:()=>M,isHashSet:()=>h,isSubset:()=>E,make:()=>b,makeImpl:()=>p,map:()=>F,mutate:()=>T,partition:()=>j,reduce:()=>D,remove:()=>A,size:()=>k,some:()=>v,toggle:()=>R,union:()=>C,values:()=>_});var r=n(43977),i=n(361369),a=n(367337),s=n(883845),o=n(953533),c=n(856572),l=n(918799);const u="effect/HashSet",f=Symbol.for(u),d={[f]:f,[Symbol.iterator](){return l.keys(this._keyMap)},[a.symbol](){return a.cached(this,a.combine(a.hash(this._keyMap))(a.hash(u)))},[r.symbol](e){return!!h(e)&&(l.size(this._keyMap)===l.size(e._keyMap)&&r.equals(this._keyMap,e._keyMap))},toString(){return(0,s.format)(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(s.toJSON)}},[s.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,o.pipeArguments)(this,arguments)}},p=e=>{const t=Object.create(d);return t._keyMap=e,t},h=e=>(0,c.hasProperty)(e,f),m=p(l.empty()),g=()=>m,y=e=>{const t=x(g());for(const n of e)O(t,n);return I(t)},b=(...e)=>{const t=x(g());for(const n of e)O(t,n);return I(t)},S=(0,i.dual)(2,((e,t)=>l.has(e._keyMap,t))),v=(0,i.dual)(2,((e,t)=>{let n=!1;for(const r of e)if(n=t(r),n)break;return n})),w=(0,i.dual)(2,((e,t)=>!v(e,(e=>!t(e))))),E=(0,i.dual)(2,((e,t)=>w(e,(e=>S(t,e))))),_=e=>l.keys(e._keyMap),k=e=>l.size(e._keyMap),x=e=>p(l.beginMutation(e._keyMap)),I=e=>(e._keyMap._editable=!1,e),T=(0,i.dual)(2,((e,t)=>{const n=x(e);return t(n),I(n)})),O=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(l.set(t,!0)(e._keyMap),e):p(l.set(t,!0)(e._keyMap)))),A=(0,i.dual)(2,((e,t)=>e._keyMap._editable?(l.remove(t)(e._keyMap),e):p(l.remove(t)(e._keyMap)))),N=(0,i.dual)(2,((e,t)=>T(e,(e=>{for(const n of t)A(e,n)})))),M=(0,i.dual)(2,((e,t)=>T(g(),(n=>{for(const r of t)S(r)(e)&&O(r)(n)})))),C=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>O(n,e)));for(const e of t)O(n,e)})))),R=(0,i.dual)(2,((e,t)=>S(e,t)?A(e,t):O(e,t))),F=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{const r=t(e);S(n,r)||O(n,r)}))})))),L=(0,i.dual)(2,((e,t)=>T(g(),(n=>{P(e,(e=>{for(const r of t(e))S(n,r)||O(n,r)}))})))),P=(0,i.dual)(2,((e,t)=>l.forEach(e._keyMap,((e,n)=>t(n))))),D=(0,i.dual)(3,((e,t,n)=>l.reduce(e._keyMap,t,((e,t,r)=>n(e,r))))),U=(0,i.dual)(2,((e,t)=>T(g(),(n=>{const r=_(e);let i;for(;!(i=r.next()).done;){const e=i.value;t(e)&&O(n,e)}})))),j=(0,i.dual)(2,((e,t)=>{const n=_(e);let r;const i=x(g()),a=x(g());for(;!(r=n.next()).done;){const e=r.value;t(e)?O(i,e):O(a,e)}return[I(a),I(i)]}))},277568:(e,t,n)=>{n.r(t),n.d(t,{LayerTypeId:()=>M,MemoMapTypeId:()=>R,annotateLogs:()=>He,annotateSpans:()=>Ke,build:()=>j,buildWithMemoMap:()=>W,buildWithScope:()=>q,catchAll:()=>z,catchAllCause:()=>$,context:()=>H,die:()=>V,dieSync:()=>G,discard:()=>J,effect_provide:()=>et,empty:()=>Fe,extendScope:()=>K,fail:()=>Y,failCause:()=>Q,failCauseSync:()=>X,failSync:()=>Z,fiberRefLocally:()=>se,fiberRefLocallyScoped:()=>le,fiberRefLocallyScopedWith:()=>ue,fiberRefLocallyWith:()=>ce,flatMap:()=>ee,flatten:()=>te,fresh:()=>ne,fromEffect:()=>re,fromEffectContext:()=>ae,fromEffectDiscard:()=>ie,fromFunction:()=>fe,isFresh:()=>L,isLayer:()=>F,launch:()=>de,locallyEffect:()=>oe,makeMemoMap:()=>D,map:()=>pe,mapError:()=>he,match:()=>ge,matchCause:()=>me,memoize:()=>ye,merge:()=>be,mergeAll:()=>Se,orDie:()=>ve,orElse:()=>we,passthrough:()=>Ee,project:()=>_e,provide:()=>ze,provideMerge:()=>$e,retry:()=>ke,scope:()=>Ne,scoped:()=>Te,scopedContext:()=>Ae,scopedDiscard:()=>Oe,service:()=>Me,succeed:()=>Ce,succeedContext:()=>Re,suspend:()=>Le,sync:()=>Pe,syncContext:()=>De,tap:()=>Ue,tapError:()=>je,tapErrorCause:()=>qe,toRuntime:()=>We,toRuntimeWithMemoMap:()=>Be,unsafeMakeMemoMap:()=>U,unwrapEffect:()=>Ge,unwrapScoped:()=>Je,withParentSpan:()=>Ze,withSpan:()=>Ye,zipWith:()=>Ve});var r=n(908197),i=n(672620);r.CauseTypeId,i.RuntimeExceptionTypeId,i.InterruptedExceptionTypeId,i.IllegalArgumentExceptionTypeId,i.NoSuchElementExceptionTypeId,i.InvalidPubSubCapacityExceptionTypeId,i.ExceededCapacityExceptionTypeId,i.TimeoutExceptionTypeId,i.UnknownExceptionTypeId,i.YieldableError,r.empty;const a=r.fail,s=r.die,o=(r.interrupt,r.parallel,r.sequential,r.isCause,r.isEmptyType,r.isFailType,r.isDieType,r.isInterruptType,r.isSequentialType,r.isParallelType,r.size,r.isEmpty,r.isFailure,r.isDie,r.isInterrupted,r.isInterruptedOnly,r.failures,r.defects,r.interruptors,r.failureOption,r.failureOrCause);r.flipCauseOption,r.dieOption,r.interruptOption,r.keepDefects,r.linearize,r.stripFailures,r.stripSomeDefects,r.as,r.map,r.flatMap,r.andThen,r.flatten,r.contains,i.causeSquash,i.causeSquashWith,r.find,r.filter,r.match,r.reduce,r.reduceWithContext,i.InterruptedException,i.isInterruptedException,i.IllegalArgumentException,i.isIllegalArgumentException,i.NoSuchElementException,i.isNoSuchElementException,i.RuntimeException,i.isRuntimeException,i.TimeoutException,i.UnknownException,i.isUnknownException,i.ExceededCapacityException,i.isExceededCapacityException,r.pretty,r.prettyErrors,i.originalInstance;var c=n(131651),l=n(689702),u=n(284073),f=n(46755),d=n(361369),p=n(827964),h=n(953533),m=n(856572),g=n(530714),y=n(490544),b=n(908993),S=n(5316),v=n(212164),w=n(858657),E=n(889706);const _="Fresh",k="FromEffect",x="ProvideMerge";var I=n(361974),T=n(44399),O=n(66932);n(977948);const A=(0,d.dual)(2,((e,t)=>e.modifyEffect(t)));var N=n(127514);const M=Symbol.for("effect/Layer"),C={[M]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return(0,h.pipeArguments)(this,arguments)}},R=Symbol.for("effect/Layer/MemoMap"),F=e=>(0,m.hasProperty)(e,M),L=e=>e._tag===_;class P{ref;[R];constructor(e){this.ref=e,this[R]=R}getOrElseMemoize(e,t){return(0,d.pipe)(A(this.ref,(n=>{const r=n.get(e);if(void 0!==r){const[e,a]=r,s=(0,d.pipe)(e,i.flatMap((([e,t])=>(0,d.pipe)(S.patchFiberRefs(e),i.as(t)))),i.onExit(i.exitMatch({onFailure:()=>i.void,onSuccess:()=>i.scopeAddFinalizerExit(t,a)})));return i.succeed([s,n])}return(0,d.pipe)(I.make(0),i.flatMap((r=>(0,d.pipe)(i.deferredMake(),i.flatMap((a=>(0,d.pipe)(I.make((()=>i.void)),i.map((s=>{const o=i.uninterruptibleMask((o=>(0,d.pipe)(w.scopeMake(),i.flatMap((c=>(0,d.pipe)(o(i.flatMap(B(e,c,!0),(e=>S.diffFiberRefs(e(this))))),i.exit,i.flatMap((o=>{switch(o._tag){case E.OP_FAILURE:return(0,d.pipe)(i.deferredFailCause(a,o.effect_instruction_i0),i.zipRight(i.scopeClose(c,o)),i.zipRight(i.failCause(o.effect_instruction_i0)));case E.OP_SUCCESS:return(0,d.pipe)(I.set(s,(e=>(0,d.pipe)(i.scopeClose(c,e),i.whenEffect(I.modify(r,(e=>[1===e,e-1]))),i.asVoid))),i.zipRight(I.update(r,(e=>e+1))),i.zipRight(i.scopeAddFinalizerExit(t,(t=>(0,d.pipe)(i.sync((()=>n.delete(e))),i.zipRight(I.get(s)),i.flatMap((e=>e(t))))))),i.zipRight(i.deferredSucceed(a,o.effect_instruction_i0)),i.as(o.effect_instruction_i0[1]))}})))))))),c=[(0,d.pipe)(i.deferredAwait(a),i.onExit(i.exitMatchEffect({onFailure:()=>i.void,onSuccess:()=>I.update(r,(e=>e+1))}))),e=>(0,d.pipe)(I.get(s),i.flatMap((t=>t(e))))];return[o,L(e)?n:n.set(e,c)]})))))))))})),i.flatten)}}const D=i.suspend((()=>i.map(v.makeSynchronized(new Map),(e=>new P(e))))),U=()=>new P(v.unsafeMakeSynchronized(new Map)),j=e=>w.scopeWith((t=>q(e,t))),q=(0,d.dual)(2,((e,t)=>i.flatMap(D,(n=>i.flatMap(B(e,t),(e=>e(n))))))),W=(0,d.dual)(3,((e,t,n)=>i.flatMap(B(e,n),(e=>e(t))))),B=(e,t,n=!1)=>{const r=e;switch(r._tag){case"Locally":return i.sync((()=>e=>r.f(e.getOrElseMemoize(r.self,t))));case"ExtendScope":return i.sync((()=>e=>w.scopeWith((t=>e.getOrElseMemoize(r.layer,t)))));case"Fold":return i.sync((()=>e=>(0,d.pipe)(e.getOrElseMemoize(r.layer,t),i.matchCauseEffect({onFailure:n=>e.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>e.getOrElseMemoize(r.successK(n),t)}))));case"Fresh":return i.sync((()=>e=>(0,d.pipe)(r.layer,q(t))));case"FromEffect":return n?i.sync((()=>e=>r.effect)):i.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Provide":return i.sync((()=>e=>(0,d.pipe)(e.getOrElseMemoize(r.first,t),i.flatMap((n=>(0,d.pipe)(e.getOrElseMemoize(r.second,t),i.provideContext(n)))))));case"Scoped":return n?i.sync((()=>e=>w.scopeExtend(r.effect,t))):i.sync((()=>n=>n.getOrElseMemoize(e,t)));case"Suspend":return i.sync((()=>e=>e.getOrElseMemoize(r.evaluate(),t)));case"ProvideMerge":return i.sync((()=>e=>(0,d.pipe)(e.getOrElseMemoize(r.first,t),i.zipWith(e.getOrElseMemoize(r.second,t),r.zipK))));case"ZipWith":return i.sync((()=>e=>(0,d.pipe)(e.getOrElseMemoize(r.first,t),w.zipWithOptions(e.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0}))))}},z=(0,d.dual)(2,((e,t)=>ge(e,{onFailure:t,onSuccess:Re}))),$=(0,d.dual)(2,((e,t)=>me(e,{onFailure:t,onSuccess:Re}))),V=e=>Q(s(e)),G=e=>X((()=>s(e()))),J=e=>pe(e,(()=>l.empty())),H=()=>ae(i.context()),K=e=>{const t=Object.create(C);return t._tag="ExtendScope",t.layer=e,t},Y=e=>Q(a(e)),Z=e=>X((()=>a(e()))),Q=e=>ae(i.failCause(e)),X=e=>ae(i.failCauseSync(e)),ee=(0,d.dual)(2,((e,t)=>ge(e,{onFailure:Y,onSuccess:t}))),te=(0,d.dual)(2,((e,t)=>ee(e,l.get(t)))),ne=e=>{const t=Object.create(C);return t._tag=_,t.layer=e,t},re=(0,d.dual)(2,((e,t)=>{const n=l.isTag(e),r=n?e:t,a=n?t:e;return ae(i.map(a,(e=>l.make(r,e))))})),ie=e=>ae(i.map(e,(()=>l.empty())));function ae(e){const t=Object.create(C);return t._tag=k,t.effect=e,t}const se=(0,d.dual)(3,((e,t,n)=>oe(e,i.fiberRefLocally(t,n)))),oe=(0,d.dual)(2,((e,t)=>{const n=Object.create(C);return n._tag="Locally",n.self=e,n.f=t,n})),ce=(0,d.dual)(3,((e,t,n)=>oe(e,i.fiberRefLocallyWith(t,n)))),le=(e,t)=>Oe(w.fiberRefLocallyScoped(e,t)),ue=(e,t)=>Oe(w.fiberRefLocallyScopedWith(e,t)),fe=(e,t,n)=>ae(i.map(e,(e=>l.make(t,n(e))))),de=e=>w.scopedEffect(i.zipRight(w.scopeWith((t=>(0,d.pipe)(e,q(t)))),i.never)),pe=(0,d.dual)(2,((e,t)=>ee(e,(e=>Re(t(e)))))),he=(0,d.dual)(2,((e,t)=>z(e,(e=>Z((()=>t(e))))))),me=(0,d.dual)(2,((e,{onFailure:t,onSuccess:n})=>{const r=Object.create(C);return r._tag="Fold",r.layer=e,r.failureK=t,r.successK=n,r})),ge=(0,d.dual)(2,((e,{onFailure:t,onSuccess:n})=>me(e,{onFailure:e=>{const n=o(e);switch(n._tag){case"Left":return t(n.left);case"Right":return Q(n.right)}},onSuccess:n}))),ye=e=>w.scopeWith((t=>i.map(S.memoize(q(e,t)),ae))),be=(0,d.dual)(2,((e,t)=>Ve(e,t,((e,t)=>l.merge(e,t))))),Se=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t=be(t,e[n]);return t},ve=e=>z(e,(e=>V(e))),we=(0,d.dual)(2,((e,t)=>z(e,t))),Ee=e=>be(H(),e),_e=(0,d.dual)(4,((e,t,n,r)=>pe(e,(e=>l.make(n,r(l.unsafeGet(e,t))))))),ke=(0,d.dual)(2,((e,t)=>Le((()=>{const n=l.GenericTag("effect/Layer/retry/{ state: unknown }");return(0,d.pipe)(Ce(n,{state:t.initial}),ee((r=>xe(e,t,n,(0,d.pipe)(r,l.get(n)).state))))})))),xe=(e,t,n,r)=>(0,d.pipe)(e,z((i=>(0,d.pipe)(Ie(t,n,i,r),ee((r=>ne(xe(e,t,n,(0,d.pipe)(r,l.get(n)).state)))))))),Ie=(e,t,n,r)=>re(t,(0,d.pipe)(c.currentTimeMillis,i.flatMap((t=>(0,d.pipe)(e.step(t,n,r),i.flatMap((([e,r,a])=>g.isDone(a)?i.fail(n):(0,d.pipe)(c.sleep(u.millis(y.start(a.intervals)-t)),i.as({state:e}))))))))),Te=(0,d.dual)(2,((e,t)=>{const n=l.isTag(e),r=n?e:t,a=n?t:e;return Ae(i.map(a,(e=>l.make(r,e))))})),Oe=e=>Ae((0,d.pipe)(e,i.as(l.empty()))),Ae=e=>{const t=Object.create(C);return t._tag="Scoped",t.effect=e,t},Ne=Ae(i.map(w.acquireRelease(w.scopeMake(),((e,t)=>e.close(t))),(e=>l.make(b.Scope,e)))),Me=e=>re(e,e),Ce=(0,d.dual)(2,((e,t)=>{const n=l.isTag(e),r=n?e:t,a=n?t:e;return ae(i.succeed(l.make(r,a)))})),Re=e=>ae(i.succeed(e)),Fe=Re(l.empty()),Le=e=>{const t=Object.create(C);return t._tag="Suspend",t.evaluate=e,t},Pe=(0,d.dual)(2,((e,t)=>{const n=l.isTag(e),r=n?e:t,a=n?t:e;return ae(i.sync((()=>l.make(r,a()))))})),De=e=>ae(i.sync(e)),Ue=(0,d.dual)(2,((e,t)=>ee(e,(e=>ae(i.as(t(e),e)))))),je=(0,d.dual)(2,((e,t)=>z(e,(e=>ae(i.flatMap(t(e),(()=>i.fail(e)))))))),qe=(0,d.dual)(2,((e,t)=>$(e,(e=>ae(i.flatMap(t(e),(()=>i.failCause(e)))))))),We=e=>(0,d.pipe)(w.scopeWith((t=>q(e,t))),i.flatMap((e=>(0,d.pipe)(T.runtime(),i.provideContext(e))))),Be=(0,d.dual)(2,((e,t)=>i.flatMap(w.scopeWith((n=>W(e,t,n))),(e=>(0,d.pipe)(T.runtime(),i.provideContext(e)))))),ze=(0,d.dual)(2,((e,t)=>Le((()=>{const n=Object.create(C);return n._tag="Provide",n.first=Object.create(C,{_tag:{value:x,enumerable:!0},first:{value:H(),enumerable:!0},second:{value:t},zipK:{value:(e,t)=>(0,d.pipe)(e,l.merge(t))}}),n.second=e,n})))),$e=(0,d.dual)(2,((e,t)=>{const n=Object.create(C);return n._tag=x,n.first=t,n.second=ze(e,t),n.zipK=(e,t)=>(0,d.pipe)(e,l.merge(t)),n})),Ve=(0,d.dual)(3,((e,t,n)=>Le((()=>{const r=Object.create(C);return r._tag="ZipWith",r.first=e,r.second=t,r.zipK=n,r})))),Ge=e=>{const t=l.GenericTag("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return ee(re(t,e),(e=>l.get(e,t)))},Je=e=>{const t=l.GenericTag("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return ee(Te(t,e),(e=>l.get(e,t)))},He=(0,d.dual)((e=>F(e[0])),(function(){const e=arguments;return ce(e[0],i.currentLogAnnotations,"string"===typeof e[1]?p.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>p.set(e,t,n)),t))})),Ke=(0,d.dual)((e=>F(e[0])),(function(){const e=arguments;return ce(e[0],i.currentTracerSpanAnnotations,"string"===typeof e[1]?p.set(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,n])=>p.set(e,t,n)),t))})),Ye=function(){const e="string"!==typeof arguments[0],t=e?arguments[1]:arguments[0],n=N.addSpanStackTrace(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return Je(i.map(n?.onEnd?i.tap(w.makeSpanScoped(t,n),(e=>w.addFinalizer((t=>n.onEnd(e,t))))):w.makeSpanScoped(t,n),(t=>Ze(e,t))))}return e=>Je(i.map(n?.onEnd?i.tap(w.makeSpanScoped(t,n),(e=>w.addFinalizer((t=>n.onEnd(e,t))))):w.makeSpanScoped(t,n),(t=>Ze(e,t))))},Ze=(0,d.dual)(2,((e,t)=>ze(e,Re(l.make(N.spanTag,t))))),Qe=(0,d.dual)(2,((e,t)=>i.acquireUseRelease(w.scopeMake(),(n=>i.flatMap(q(t,n),(t=>i.provideSomeContext(e,t)))),((e,t)=>i.scopeClose(e,t))))),Xe=(0,d.dual)(2,((e,t)=>{const n=f.diff(T.defaultRuntime.fiberRefs,t.fiberRefs),r=O.diff(T.defaultRuntime.runtimeFlags,t.runtimeFlags);return i.uninterruptibleMask((a=>i.withFiberRuntime((s=>{const o=s.getFiberRef(i.currentContext),c=s.getFiberRefs(),u=f.patch(s.id(),c)(n),d=s._runtimeFlags,p=O.patch(r)(d),h=f.diff(u,c),m=O.diff(p,d);return s.setFiberRefs(u),s._runtimeFlags=p,w.ensuring(i.provideSomeContext(a(e),l.merge(o,t.context)),i.withFiberRuntime((e=>(e.setFiberRefs(f.patch(e.id(),e.getFiberRefs())(h)),e._runtimeFlags=O.patch(m)(e._runtimeFlags),i.void))))}))))})),et=(0,d.dual)(2,((e,t)=>F(t)?Qe(e,t):l.isContext(t)?i.provideSomeContext(e,t):Xe(e,t)))},458762:(e,t,n)=>{n.r(t),n.d(t,{MetricLabelTypeId:()=>c,isMetricLabel:()=>f,make:()=>u});var r=n(43977),i=n(367337),a=n(953533),s=n(856572);const o="effect/MetricLabel",c=Symbol.for(o);class l{key;value;[c]=c;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=i.string(o+this.key+this.value)}[i.symbol](){return this._hash}[r.symbol](e){return f(e)&&this.key===e.key&&this.value===e.value}pipe(){return(0,a.pipeArguments)(this,arguments)}}const u=(e,t)=>new l(e,t),f=e=>(0,s.hasProperty)(e,c)},127576:(e,t,n)=>{n.r(t),n.d(t,{OP_STATE_DONE:()=>i,OP_STATE_PENDING:()=>r});const r="Pending",i="Done"},889706:(e,t,n)=>{n.r(t),n.d(t,{OP_ASYNC:()=>r,OP_COMMIT:()=>i,OP_FAILURE:()=>a,OP_ON_FAILURE:()=>s,OP_ON_SUCCESS:()=>o,OP_ON_SUCCESS_AND_FAILURE:()=>c,OP_REVERT_FLAGS:()=>g,OP_SUCCESS:()=>l,OP_SYNC:()=>u,OP_TAG:()=>f,OP_UPDATE_RUNTIME_FLAGS:()=>d,OP_WHILE:()=>p,OP_WITH_RUNTIME:()=>h,OP_YIELD:()=>m});const r="Async",i="Commit",a="Failure",s="OnFailure",o="OnSuccess",c="OnSuccessAndFailure",l="Success",u="Sync",f="Tag",d="UpdateRuntimeFlags",p="While",h="WithRuntime",m="Yield",g="RevertFlags"},8578:(e,t,n)=>{n.r(t),n.d(t,{isNone:()=>h,isOption:()=>p,isSome:()=>m,none:()=>g,some:()=>y});var r=n(43977),i=n(367337),a=n(883845),s=n(856572),o=n(68498);const c=Symbol.for("effect/Option"),l={...o.EffectPrototype,[c]:{_A:e=>e},[a.NodeInspectSymbol](){return this.toJSON()},toString(){return(0,a.format)(this.toJSON())}},u=Object.assign(Object.create(l),{_tag:"Some",_op:"Some",[r.symbol](e){return p(e)&&m(e)&&r.equals(this.value,e.value)},[i.symbol](){return i.cached(this,i.combine(i.hash(this._tag))(i.hash(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:(0,a.toJSON)(this.value)}}}),f=i.hash("None"),d=Object.assign(Object.create(l),{_tag:"None",_op:"None",[r.symbol]:e=>p(e)&&h(e),[i.symbol]:()=>f,toJSON(){return{_id:"Option",_tag:this._tag}}}),p=e=>(0,s.hasProperty)(e,c),h=e=>"None"===e._tag,m=e=>"Some"===e._tag,g=Object.create(d),y=e=>{const t=Object.create(u);return t.value=e,t}},502787:(e,t,n)=>{n.r(t),n.d(t,{cacheRequest:()=>h,currentCache:()=>f,currentCacheEnabled:()=>d,fromRequest:()=>p,withRequestCache:()=>g,withRequestCaching:()=>m});var r=n(284073),i=n(361369),a=n(606517),s=n(668481),o=n(964155),c=n(672620),l=n(858657),u=n(502146);const f=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCache"),(()=>c.fiberRefUnsafeMake((0,o.unsafeMakeWith)(65536,(()=>c.map(c.deferredMake(),(e=>({listeners:new u.Listeners,handle:e})))),(()=>(0,r.seconds)(60)))))),d=(0,a.globalValue)(Symbol.for("effect/FiberRef/currentCacheEnabled"),(()=>c.fiberRefUnsafeMake(!1))),p=(e,t)=>c.flatMap(c.isEffect(t)?t:c.succeed(t),(t=>c.fiberIdWith((n=>{const r=new Proxy(e,{});return c.fiberRefGetWith(d,(e=>{if(e){const e=c.fiberRefGetWith(f,(i=>c.flatMap(i.getEither(r),(a=>{switch(a._tag){case"Left":return a.left.listeners.interrupted?c.flatMap(i.invalidateWhen(r,(e=>e.handle===a.left.handle)),(()=>e)):(a.left.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.empty,e(c.deferredAwait(a.left.handle)))),(e=>(a.left.listeners.decrement(),e))))));case"Right":return a.right.listeners.increment(),c.uninterruptibleMask((e=>c.flatMap(c.exit(c.blocked(s.single(t,s.makeEntry({request:r,result:a.right.handle,listeners:a.right.listeners,ownerId:n,state:{completed:!1}})),e(c.deferredAwait(a.right.handle)))),(()=>(a.right.listeners.decrement(),c.deferredAwait(a.right.handle))))))}}))));return e}const i=new u.Listeners;return i.increment(),c.flatMap(c.deferredMake(),(e=>(0,l.ensuring)(c.blocked(s.single(t,s.makeEntry({request:r,result:e,listeners:i,ownerId:n,state:{completed:!1}})),c.deferredAwait(e)),c.sync((()=>i.decrement())))))}))})))),h=(e,t)=>c.fiberRefGetWith(d,(n=>n?c.fiberRefGetWith(f,(n=>c.flatMap(n.getEither(e),(e=>{switch(e._tag){case"Left":return c.void;case"Right":return c.deferredComplete(e.right.handle,t)}})))):c.void)),m=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,d,t))),g=(0,i.dual)(2,((e,t)=>c.fiberRefLocally(e,f,t)))},937540:(e,t,n)=>{n.r(t),n.d(t,{RandomTypeId:()=>l,make:()=>h,randomTag:()=>u});var r=n(128420),i=n(689702),a=n(361369),s=n(367337),o=n(730276),c=n(672620);const l=Symbol.for("effect/Random"),u=i.GenericTag("effect/Random");class f{seed;[l]=l;PRNG;constructor(e){this.seed=e,this.PRNG=new o.PCGRandom(e)}get next(){return c.sync((()=>this.PRNG.number()))}get nextBoolean(){return c.map(this.next,(e=>e>.5))}get nextInt(){return c.sync((()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER)))}nextRange(e,t){return c.map(this.next,(n=>(t-e)*n+e))}nextIntBetween(e,t){return c.sync((()=>this.PRNG.integer(t-e)+e))}shuffle(e){return d(e,(e=>this.nextIntBetween(0,e)))}}const d=(e,t)=>c.suspend((()=>(0,a.pipe)(c.sync((()=>Array.from(e))),c.flatMap((e=>{const n=[];for(let t=e.length;t>=2;t-=1)n.push(t);return(0,a.pipe)(n,c.forEachSequentialDiscard((n=>(0,a.pipe)(t(n),c.map((t=>p(e,n-1,t)))))),c.as(r.fromIterable(e)))}))))),p=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},h=e=>new f(s.hash(e))},361974:(e,t,n)=>{n.r(t),n.d(t,{RefTypeId:()=>l,get:()=>h,getAndSet:()=>g,getAndUpdate:()=>y,getAndUpdateSome:()=>b,make:()=>p,modify:()=>v,modifySome:()=>w,refVariance:()=>u,set:()=>m,setAndGet:()=>S,unsafeGet:()=>I,unsafeMake:()=>d,update:()=>E,updateAndGet:()=>_,updateSome:()=>k,updateSomeAndGet:()=>x});var r=n(361369),i=n(645914),a=n(977948),s=n(953533),o=n(220209),c=n(672620);const l=Symbol.for("effect/Ref"),u={_A:e=>e};class f{ref;[l]=u;[o.TypeId];constructor(e){this.ref=e,this[o.TypeId]=o.TypeId,this.get=c.sync((()=>i.get(this.ref)))}get;modify(e){return c.sync((()=>{const t=i.get(this.ref),[n,r]=e(t);return t!==r&&i.set(r)(this.ref),n}))}pipe(){return(0,s.pipeArguments)(this,arguments)}}const d=e=>new f(i.make(e)),p=e=>c.sync((()=>d(e))),h=e=>e.get,m=(0,r.dual)(2,((e,t)=>e.modify((()=>[void 0,t])))),g=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t])))),y=(0,r.dual)(2,((e,t)=>e.modify((e=>[e,t(e)])))),b=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[e,n.value]}})))),S=(0,r.dual)(2,((e,t)=>e.modify((()=>[t,t])))),v=(0,r.dual)(2,((e,t)=>e.modify(t))),w=(0,r.dual)(3,((e,t,n)=>e.modify((e=>{const r=n(e);switch(r._tag){case"None":return[t,e];case"Some":return r.value}})))),E=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,t(e)])))),_=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);return[n,n]})))),k=(0,r.dual)(2,((e,t)=>e.modify((e=>[void 0,a.match(t(e),{onNone:()=>e,onSome:e=>e})])))),x=(0,r.dual)(2,((e,t)=>e.modify((e=>{const n=t(e);switch(n._tag){case"None":return[e,e];case"Some":return[n.value,n.value]}})))),I=e=>i.get(e.ref)},502146:(e,t,n)=>{n.r(t),n.d(t,{Class:()=>p,Listeners:()=>v,RequestTypeId:()=>c,TaggedClass:()=>h,complete:()=>m,completeEffect:()=>g,fail:()=>y,failCause:()=>b,filterOutCompleted:()=>w,isRequest:()=>u,of:()=>f,succeed:()=>S,tagged:()=>d});var r=n(361369),i=n(856572),a=n(242927),s=n(672620),o=n(68498);const c=Symbol.for("effect/Request"),l={...o.StructuralPrototype,[c]:{_E:e=>e,_A:e=>e}},u=e=>(0,i.hasProperty)(e,c),f=()=>e=>Object.assign(Object.create(l),e),d=e=>t=>{const n=Object.assign(Object.create(l),t);return n._tag=e,n},p=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=l,e}(),h=e=>class extends p{_tag=e},m=(0,r.dual)(2,((e,t)=>s.fiberRefGetWith(a.currentRequestMap,(n=>s.sync((()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,s.deferredUnsafeDone(r.result,t))}})))))),g=(0,r.dual)(2,((e,t)=>s.matchEffect(t,{onFailure:t=>m(e,s.exitFail(t)),onSuccess:t=>m(e,s.exitSucceed(t))}))),y=(0,r.dual)(2,((e,t)=>m(e,s.exitFail(t)))),b=(0,r.dual)(2,((e,t)=>m(e,s.exitFailCause(t)))),S=(0,r.dual)(2,((e,t)=>m(e,s.exitSucceed(t))));class v{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach((e=>e(this.count)))}decrement(){this.count--,this.observers.forEach((e=>e(this.count)))}}const w=e=>s.fiberRefGetWith(a.currentRequestMap,(t=>s.succeed(e.filter((e=>!(!0===t.get(e)?.state.completed))))))},44399:(e,t,n)=>{n.r(t),n.d(t,{FiberFailureCauseId:()=>C,FiberFailureId:()=>M,RuntimeImpl:()=>q,asyncEffect:()=>ae,defaultRuntime:()=>$,defaultRuntimeFlags:()=>z,deleteFiberRef:()=>Q,disableRuntimeFlag:()=>G,enableRuntimeFlag:()=>J,fiberFailure:()=>F,isAsyncFiberException:()=>N,isFiberFailure:()=>L,make:()=>W,provideService:()=>K,runtime:()=>B,setFiberRef:()=>Z,unsafeFork:()=>I,unsafeForkEffect:()=>ee,unsafeRunCallback:()=>T,unsafeRunEffect:()=>X,unsafeRunPromise:()=>U,unsafeRunPromiseEffect:()=>te,unsafeRunPromiseExit:()=>j,unsafeRunPromiseExitEffect:()=>ne,unsafeRunSync:()=>O,unsafeRunSyncEffect:()=>re,unsafeRunSyncExit:()=>D,unsafeRunSyncExitEffect:()=>ie,updateContext:()=>H,updateFiberRefs:()=>Y,updateRuntimeFlags:()=>V});var r=n(43977),i=n(689702),a=n(896949),s=n(672620),o=n(212164),c=n(424285),l=n(858657);c.FiberTypeId,c.RuntimeFiberTypeId,c.Order,c.isFiber,c.isRuntimeFiber,c.id,c._await,l.fiberAwaitAll,c.children,l.fiberAll,c.done,c.dump,c.dumpAll,c.fail,c.failCause,c.fromEffect,c.getCurrentFiber,c.inheritAll,s.interruptFiber,c.interrupted;const u=s.interruptAsFiber;c.interruptAsFork,c.interruptAll,c.interruptAllAs,l.fiberInterruptFork,c.join,l.fiberJoinAll,c.map,c.mapEffect,c.mapFiber,c.match,c.never,c.orElse,c.orElseEither,c.poll,c.pretty,c.roots,c.unsafeRoots,l.fiberScoped,c.status,c.succeed,c.void,o.zipFiber,o.zipLeftFiber,o.zipRightFiber,o.zipWithFiber;var f=n(295602),d=n(989105),p=n(361369),h=n(883845),m=n(977948),g=n(953533),y=n(856572),b=n(71108),S=n(908993),v=n(908197),w=n(232628),E=n(508977),_=n(889706),k=n(66932),x=n(95807);const I=e=>(t,n)=>{const i=f.unsafeMake(),a=[[s.currentContext,[[i,e.context]]]];n?.scheduler&&a.push([b.currentScheduler,[[i,n.scheduler]]]);let o=d.updateManyAs(e.fiberRefs,{entries:a,forkAs:i});n?.updateRefs&&(o=n.updateRefs(o,i));const c=new l.FiberRuntime(i,o,e.runtimeFlags);let u=t;n?.scope&&(u=s.flatMap(S.fork(n.scope,w.sequential),(e=>s.zipRight(s.scopeAddFinalizer(e,s.fiberIdWith((e=>(0,r.equals)(e,c.id())?s.void:s.interruptAsFiber(c,e)))),s.onExit(t,(t=>S.close(e,t)))))));const p=c._supervisor;return p!==x.none&&(p.onStart(e.context,u,m.none(),c),c.addObserver((e=>p.onEnd(e,c)))),E.globalScope.add(e.runtimeFlags,c),!1===n?.immediate?c.resume(u):c.start(u),c},T=e=>(t,n={})=>{const r=I(e)(t,n);return n.onExit&&r.addObserver((e=>{n.onExit(e)})),(t,n)=>T(e)((0,p.pipe)(r,u(t??f.none)),{...n,onExit:n?.onExit?e=>n.onExit(a.flatten(e)):void 0})},O=e=>t=>{const n=D(e)(t);if("Failure"===n._tag)throw F(n.effect_instruction_i0);return n.effect_instruction_i0};class A extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const N=e=>y.isTagged(e,"AsyncFiberException")&&"fiber"in e,M=Symbol.for("effect/Runtime/FiberFailure"),C=Symbol.for("effect/Runtime/FiberFailure/Cause");class R extends Error{[M];[C];constructor(e){super(),this[M]=M,this[C]=e;const t=v.prettyErrors(e);if(t.length>0){const e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,void 0!==this.message&&0!==this.message.length||(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[C].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[h.NodeInspectSymbol](){return this.toString()}}const F=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new R(e);return Error.stackTraceLimit=t,n},L=e=>y.hasProperty(e,M),P=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return s.exitFail(t.left);case"Right":return s.exitSucceed(t.right);case"Some":return s.exitSucceed(t.value);case"None":return s.exitFail(s.NoSuchElementException())}},D=e=>t=>{const n=P(t);if(n)return n;const r=new b.SyncScheduler,i=I(e)(t,{scheduler:r});r.flush();const a=i.unsafePoll();if(a)return a;throw(e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new A(e);return Error.stackTraceLimit=t,n})(i)},U=e=>(t,n)=>j(e)(t,n).then((e=>{switch(e._tag){case _.OP_SUCCESS:return e.effect_instruction_i0;case _.OP_FAILURE:throw F(e.effect_instruction_i0)}})),j=e=>(t,n)=>new Promise((r=>{const i=P(t);i&&r(i);const a=I(e)(t);a.addObserver((e=>{r(e)})),void 0!==n?.signal&&(n.signal.aborted?a.unsafeInterruptAsFork(a.id()):n.signal.addEventListener("abort",(()=>{a.unsafeInterruptAsFork(a.id())}),{once:!0}))}));class q{context;runtimeFlags;fiberRefs;constructor(e,t,n){this.context=e,this.runtimeFlags=t,this.fiberRefs=n}pipe(){return(0,g.pipeArguments)(this,arguments)}}const W=e=>new q(e.context,e.runtimeFlags,e.fiberRefs),B=()=>s.withFiberRuntime(((e,t)=>s.succeed(new q(e.getFiberRef(s.currentContext),t.runtimeFlags,e.getFiberRefs())))),z=k.make(k.Interruption,k.CooperativeYielding,k.RuntimeMetrics),$=W({context:i.empty(),runtimeFlags:z,fiberRefs:d.empty()}),V=(0,p.dual)(2,((e,t)=>W({context:e.context,runtimeFlags:t(e.runtimeFlags),fiberRefs:e.fiberRefs}))),G=(0,p.dual)(2,((e,t)=>V(e,k.disable(t)))),J=(0,p.dual)(2,((e,t)=>V(e,k.enable(t)))),H=(0,p.dual)(2,((e,t)=>W({context:t(e.context),runtimeFlags:e.runtimeFlags,fiberRefs:e.fiberRefs}))),K=(0,p.dual)(3,((e,t,n)=>H(e,i.add(t,n)))),Y=(0,p.dual)(2,((e,t)=>W({context:e.context,runtimeFlags:e.runtimeFlags,fiberRefs:t(e.fiberRefs)}))),Z=(0,p.dual)(3,((e,t,n)=>Y(e,d.updateAs({fiberId:f.none,fiberRef:t,value:n})))),Q=(0,p.dual)(2,((e,t)=>Y(e,d.delete(t)))),X=T($),ee=I($),te=U($),ne=j($),re=O($),ie=D($),ae=e=>s.suspend((()=>{let t;return s.flatMap(s.deferredMake(),(n=>s.flatMap(B(),(r=>s.uninterruptibleMask((i=>s.zipRight(l.fork(i(s.matchCauseEffect(e((e=>T(r)(s.intoDeferred(e,n)))),{onFailure:e=>s.deferredFailCause(n,e),onSuccess:e=>(t=e,s.void)}))),i(s.onInterrupt(s.deferredAwait(n),(()=>t??s.void))))))))))}))},66932:(e,t,n)=>{n.r(t),n.d(t,{CooperativeYielding:()=>f,Interruption:()=>o,None:()=>s,OpSupervision:()=>c,RuntimeMetrics:()=>l,WindDown:()=>u,allFlags:()=>d,cooperativeYielding:()=>h,diff:()=>C,differ:()=>L,disable:()=>m,disableAll:()=>g,disabledSet:()=>M,enable:()=>y,enableAll:()=>b,enabledSet:()=>N,interruptible:()=>S,interruption:()=>v,isDisabled:()=>w,isEnabled:()=>E,make:()=>_,none:()=>k,opSupervision:()=>x,patch:()=>R,render:()=>I,renderPatch:()=>F,runtimeMetrics:()=>T,toSet:()=>O,windDown:()=>A});var r=n(361369),i=n(245779),a=n(848464);const s=0,o=1,c=2,l=4,u=16,f=32,d=[s,o,c,l,u,f],p=e=>{switch(e){case f:return"CooperativeYielding";case u:return"WindDown";case l:return"RuntimeMetrics";case c:return"OpSupervision";case o:return"Interruption";case s:return"None"}},h=e=>E(e,f),m=(0,r.dual)(2,((e,t)=>e&~t)),g=(0,r.dual)(2,((e,t)=>e&~t)),y=(0,r.dual)(2,((e,t)=>e|t)),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>v(e)&&!A(e),v=e=>E(e,o),w=(0,r.dual)(2,((e,t)=>!E(e,t))),E=(0,r.dual)(2,((e,t)=>0!==(e&t))),_=(...e)=>e.reduce(((e,t)=>e|t),0),k=_(s),x=e=>E(e,c),I=e=>{const t=[];return d.forEach((n=>{E(e,n)&&t.push(`${p(n)}`)})),`RuntimeFlags(${t.join(", ")})`},T=e=>E(e,l),O=e=>new Set(d.filter((t=>E(e,t)))),A=e=>E(e,u),N=e=>O(a.active(e)&a.enabled(e)),M=e=>O(a.active(e)&~a.enabled(e)),C=(0,r.dual)(2,((e,t)=>a.make(e^t,t))),R=(0,r.dual)(2,((e,t)=>e&(a.invert(a.active(t))|a.enabled(t))|a.active(t)&a.enabled(t))),F=e=>`RuntimeFlagsPatch(enabled = (${Array.from(N(e)).map((e=>p(e))).join(", ")}), disabled = (${Array.from(M(e)).map((e=>p(e))).join(", ")}))`,L=i.make({empty:a.empty,diff:(e,t)=>C(e,t),combine:(e,t)=>a.andThen(t)(e),patch:(e,t)=>R(t,e)})},848464:(e,t,n)=>{n.r(t),n.d(t,{active:()=>a,andThen:()=>b,both:()=>g,disable:()=>u,either:()=>y,empty:()=>c,enable:()=>l,enabled:()=>s,exclude:()=>m,inverse:()=>S,invert:()=>v,isActive:()=>d,isDisabled:()=>h,isEmpty:()=>f,isEnabled:()=>p,make:()=>o});var r=n(361369);const i=255,a=e=>e&i,s=e=>e>>8&i,o=(e,t)=>(e&i)+((t&e&i)<<8),c=o(0,0),l=e=>o(e,e),u=e=>o(e,0),f=e=>0===e,d=(0,r.dual)(2,((e,t)=>0!==(a(e)&t))),p=(0,r.dual)(2,((e,t)=>0!==(s(e)&t))),h=(0,r.dual)(2,((e,t)=>0!==(a(e)&t)&&0===(s(e)&t))),m=(0,r.dual)(2,((e,t)=>o(a(e)&~t,s(e)))),g=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)&s(t)))),y=(0,r.dual)(2,((e,t)=>o(a(e)|a(t),s(e)|s(t)))),b=(0,r.dual)(2,((e,t)=>e|t)),S=e=>o(s(e),v(a(e))),v=e=>~e>>>0&i},141324:(e,t,n)=>{n.r(t),n.d(t,{ScheduleDriverTypeId:()=>X,ScheduleTypeId:()=>Z,addDelay:()=>ae,addDelayEffect:()=>se,andThen:()=>oe,andThenEither:()=>ce,as:()=>le,asVoid:()=>ue,beginningOfDay:()=>Xt,beginningOfHour:()=>Yt,beginningOfMinute:()=>Jt,beginningOfSecond:()=>$t,bothInOut:()=>fe,check:()=>de,checkEffect:()=>pe,collectAllInputs:()=>he,collectAllOutputs:()=>me,collectUntil:()=>ge,collectUntilEffect:()=>ye,collectWhile:()=>be,collectWhileEffect:()=>Se,compose:()=>ve,count:()=>vn,cron:()=>ke,dayOfMonth:()=>xe,dayOfWeek:()=>Ie,delayed:()=>Te,delayedEffect:()=>Oe,delayedSchedule:()=>Ae,delays:()=>Ne,driver:()=>Re,duration:()=>Fe,either:()=>Le,eitherWith:()=>Pe,elapsed:()=>wn,endOfDay:()=>en,endOfHour:()=>Zt,endOfMinute:()=>Ht,endOfSecond:()=>Vt,ensuring:()=>De,exponential:()=>Ue,fibonacci:()=>je,findNextMonth:()=>rn,fixed:()=>qe,forever:()=>En,fromDelay:()=>We,fromDelays:()=>Be,fromFunction:()=>ze,hourOfDay:()=>$e,identity:()=>Ve,intersect:()=>Ge,intersectWith:()=>Je,isSchedule:()=>Q,jittered:()=>Ke,jitteredWith:()=>Ye,linear:()=>Ze,makeWithState:()=>ie,map:()=>Qe,mapBoth:()=>Me,mapBothEffect:()=>Ce,mapEffect:()=>Xe,mapInput:()=>we,mapInputContext:()=>Ee,mapInputEffect:()=>_e,minuteOfHour:()=>et,modifyDelay:()=>tt,modifyDelayEffect:()=>nt,nextDay:()=>tn,nextDayOfMonth:()=>nn,nextHour:()=>Qt,nextMinute:()=>Kt,nextSecond:()=>Gt,onDecision:()=>rt,once:()=>_n,passthrough:()=>it,provideContext:()=>at,provideService:()=>st,recurUntil:()=>ot,recurUntilEffect:()=>ct,recurUntilOption:()=>lt,recurUpTo:()=>ut,recurWhile:()=>ft,recurWhileEffect:()=>dt,recurs:()=>pt,reduce:()=>ht,reduceEffect:()=>mt,repeatForever:()=>gt,repeatOrElse_Effect:()=>fn,repeat_Effect:()=>ln,repeat_combined:()=>un,repetitions:()=>yt,resetAfter:()=>bt,resetWhen:()=>St,retryOrElse_Effect:()=>mn,retry_Effect:()=>pn,retry_combined:()=>hn,run:()=>vt,scheduleFrom_Effect:()=>bn,schedule_Effect:()=>yn,secondOfMinute:()=>Et,spaced:()=>_t,stop:()=>kn,succeed:()=>kt,sync:()=>xt,tapInput:()=>It,tapOutput:()=>Tt,unfold:()=>Ot,union:()=>At,unionWith:()=>Nt,untilInput:()=>Mt,untilInputEffect:()=>Ct,untilOutput:()=>Rt,untilOutputEffect:()=>Ft,upTo:()=>Lt,whileInput:()=>Pt,whileInputEffect:()=>Dt,whileOutput:()=>Ut,whileOutputEffect:()=>jt,windowed:()=>qt,zipLeft:()=>Wt,zipRight:()=>Bt,zipWith:()=>zt});var r=n(128420),i=n(131651),a=n(689702),s=n(562635),o=n(757964),c=n(43977),l=n(235309),u=n(361369),f=n(367337),d=n(883845),p=n(804676),h=n(953533),m=n(856572),g=(n(611174),n(977948)),y=n(259877);m.isString,l.string,y.string;const b=e=>e.length>0;Symbol.iterator;const S=Symbol.for("effect/Cron"),v={[S]:S,[c.symbol](e){return w(e)&&N(this,e)},[f.symbol](){return(0,u.pipe)(f.array(s.fromIterable(this.minutes)),f.combine(f.array(s.fromIterable(this.hours))),f.combine(f.array(s.fromIterable(this.days))),f.combine(f.array(s.fromIterable(this.months))),f.combine(f.array(s.fromIterable(this.weekdays))),f.cached(this))},toString(){return(0,d.format)(this.toJSON())},toJSON(){return{_id:"Cron",minutes:s.fromIterable(this.minutes),hours:s.fromIterable(this.hours),days:s.fromIterable(this.days),months:s.fromIterable(this.months),weekdays:s.fromIterable(this.weekdays)}},[d.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,h.pipeArguments)(this,arguments)}},w=e=>(0,m.hasProperty)(e,S),E=Symbol.for("effect/Cron/errors/ParseError"),_={_tag:"ParseError",[E]:E},k=(e,t)=>{const n=Object.create(_);return n.message=e,void 0!==t&&(n.input=t),n},x=e=>{const t=e.split(" ").filter(b);if(5!==t.length)return o.left(k("Invalid number of segments in cron expression",e));const[n,r,i,a,c]=t;return o.all({minutes:P(n,M),hours:P(r,C),days:P(i,R),months:P(a,F),weekdays:P(c,L)}).pipe(o.map((e=>(({days:e,hours:t,minutes:n,months:r,weekdays:i})=>{const a=Object.create(v);return a.minutes=new Set(s.sort(n,p.Order)),a.hours=new Set(s.sort(t,p.Order)),a.days=new Set(s.sort(e,p.Order)),a.months=new Set(s.sort(r,p.Order)),a.weekdays=new Set(s.sort(i,p.Order)),a})(e))))},I=(e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=0!==i.size,c=0!==r.size,l=0!==n.size,u=0!==a.size,f=0!==s.size,d=t?new Date(t.getTime()):new Date;d.setMinutes(d.getMinutes()+1),d.setSeconds(0),d.setMilliseconds(0);const p=new Date(d).setFullYear(d.getFullYear()+8);for(;d.getTime()<=p;)if(!u||a.has(d.getMonth()+1)){if(l&&f){if(!n.has(d.getDate())&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(l){if(!n.has(d.getDate())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}}else if(f&&!s.has(d.getDay())){d.setDate(d.getDate()+1),d.setHours(0),d.setMinutes(0);continue}if(!c||r.has(d.getHours())){if(!o||i.has(d.getMinutes()))return d;d.setMinutes(d.getMinutes()+1)}else d.setHours(d.getHours()+1),d.setMinutes(0)}else d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0),d.setMinutes(0);throw new Error("Unable to find next cron date")},T=l.make(((e,t)=>A(e.minutes,t.minutes)&&A(e.hours,t.hours)&&A(e.days,t.days)&&A(e.months,t.months)&&A(e.weekdays,t.weekdays))),O=l.array(l.number),A=(e,t)=>O(s.fromIterable(e),s.fromIterable(t)),N=(0,u.dual)(2,((e,t)=>T(e,t))),M={segment:"minute",min:0,max:59},C={segment:"hour",min:0,max:23},R={segment:"day",min:1,max:31},F={segment:"month",min:1,max:12,aliases:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}},L={segment:"weekday",min:0,max:6,aliases:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},P=(e,t)=>{const n=t.max-t.min+1,r=new Set,i=e.split(",");for(const a of i){const[i,s]=D(a);if("*"===i&&void 0===s)return o.right(new Set);if(void 0!==s){if(!Number.isInteger(s))return o.left(k("Expected step value to be a positive integer",e));if(s<1)return o.left(k("Expected step value to be greater than 0",e));if(s>t.max)return o.left(k(`Expected step value to be less than ${t.max}`,e))}if("*"===i)for(let e=t.min;e<=t.max;e+=s??1)r.add(e);else{const[n,a]=U(i,t.aliases);if(!Number.isInteger(n))return o.left(k("Expected a positive integer",e));if(n<t.min||n>t.max)return o.left(k(`Expected a value between ${t.min} and ${t.max}`,e));if(void 0===a)r.add(n);else{if(!Number.isInteger(a))return o.left(k("Expected a positive integer",e));if(a<t.min||a>t.max)return o.left(k(`Expected a value between ${t.min} and ${t.max}`,e));if(n>a)return o.left(k("Invalid value range",e));for(let e=n;e<=a;e+=s??1)r.add(e)}}if(r.size>=n)return o.right(new Set)}return o.right(r)},D=e=>{const t=e.indexOf("/");return-1!==t?[e.slice(0,t),Number(e.slice(t+1))]:[e,void 0]},U=(e,t)=>{const n=e.indexOf("-");return-1!==n?[j(e.slice(0,n),t),j(e.slice(n+1),t)]:[j(e,t),void 0]};function j(e,t){return t?.[e.toLocaleLowerCase()]??Number(e)}var q=n(284073),W=n(344862),B=n(937540);B.RandomTypeId;const z=W.next;W.nextInt,W.nextBoolean,W.nextRange,W.nextIntBetween,W.shuffle,W.randomWith,B.randomTag,B.make;var $=n(530714),V=n(779100),G=n(490544),J=n(908197),H=n(5316),K=n(672620),Y=n(361974);const Z=Symbol.for("effect/Schedule"),Q=e=>(0,m.hasProperty)(e,Z),X=Symbol.for("effect/ScheduleDriver"),ee={_Out:e=>e,_In:e=>e,_R:e=>e},te={_Out:e=>e,_In:e=>e,_R:e=>e};class ne{initial;step;[Z]=ee;constructor(e,t){this.initial=e,this.step=t}pipe(){return(0,h.pipeArguments)(this,arguments)}}class re{schedule;ref;[X]=te;constructor(e,t){this.schedule=e,this.ref=t}get state(){return K.map(Y.get(this.ref),(e=>e[1]))}get last(){return K.flatMap(Y.get(this.ref),(([e,t])=>{switch(e._tag){case"None":return K.failSync((()=>new K.NoSuchElementException));case"Some":return K.succeed(e.value)}}))}get reset(){return Y.set(this.ref,[g.none(),this.schedule.initial])}next(e){return(0,u.pipe)(K.map(Y.get(this.ref),(e=>e[1])),K.flatMap((t=>(0,u.pipe)(i.currentTimeMillis,K.flatMap((n=>(0,u.pipe)(K.suspend((()=>this.schedule.step(n,e,t))),K.flatMap((([e,t,r])=>{const i=Y.set(this.ref,[g.some(t),e]);if($.isDone(r))return K.zipRight(i,K.fail(g.none()));const a=G.start(r.intervals)-n;return a<=0?K.as(i,t):(0,u.pipe)(i,K.zipRight(H.sleep(q.millis(a))),K.as(t))})))))))))}}const ie=(e,t)=>new ne(e,t),ae=(0,u.dual)(2,((e,t)=>se(e,(e=>K.sync((()=>t(e))))))),se=(0,u.dual)(2,((e,t)=>nt(e,((e,n)=>K.map(t(e),(e=>q.sum(n,q.decode(e)))))))),oe=(0,u.dual)(2,((e,t)=>Qe(ce(e,t),o.merge))),ce=(0,u.dual)(2,((e,t)=>ie([e.initial,t.initial,!0],((n,r,i)=>i[2]?K.flatMap(e.step(n,r,i[0]),(([e,a,s])=>$.isDone(s)?K.map(t.step(n,r,i[1]),(([t,n,r])=>[[e,t,!1],o.right(n),r])):K.succeed([[e,i[1],!0],o.left(a),s]))):K.map(t.step(n,r,i[1]),(([e,t,n])=>[[i[0],e,!1],o.right(t),n])))))),le=(0,u.dual)(2,((e,t)=>Qe(e,(()=>t)))),ue=e=>Qe(e,u.constVoid),fe=(0,u.dual)(2,((e,t)=>ie([e.initial,t.initial],((n,[r,i],a)=>K.zipWith(e.step(n,r,a[0]),t.step(n,i,a[1]),(([e,t,n],[r,i,a])=>{if($.isContinue(n)&&$.isContinue(a)){const s=(0,u.pipe)(n.intervals,G.union(a.intervals));return[[e,r],[t,i],$.continue(s)]}return[[e,r],[t,i],$.done]})))))),de=(0,u.dual)(2,((e,t)=>pe(e,((e,n)=>K.sync((()=>t(e,n))))))),pe=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([e,n,i])=>$.isDone(i)?K.succeed([e,n,$.done]):K.map(t(r,n),(t=>t?[e,n,i]:[e,n,$.done])))))))),he=()=>me(Ve()),me=e=>ht(e,r.empty(),((e,t)=>(0,u.pipe)(e,r.append(t)))),ge=e=>me(ot(e)),ye=e=>me(ct(e)),be=e=>me(ft(e)),Se=e=>me(dt(e)),ve=(0,u.dual)(2,((e,t)=>ie([e.initial,t.initial],((n,r,i)=>K.flatMap(e.step(n,r,i[0]),(([e,r,a])=>K.map(t.step(n,r,i[1]),(([t,n,r])=>$.isDone(a)||$.isDone(r)?[[e,t],n,$.done]:[[e,t],n,$.continue((0,u.pipe)(a.intervals,G.max(r.intervals)))])))))))),we=(0,u.dual)(2,((e,t)=>_e(e,(e=>K.sync((()=>t(e))))))),Ee=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.mapInputContext(e.step(n,r,i),t))))),_e=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(t(r),(t=>e.step(n,t,i))))))),ke=e=>{const t=w(e)?o.right(e):x(e);return ie([!0,[Number.MIN_SAFE_INTEGER,0,0]],((e,n,[r,i])=>{if(e<i[0])return K.succeed([[!1,i],[i[1],i[2]],$.continueWith(V.make(i[1],i[2]))]);if(o.isLeft(t))return K.die(t.left);const a=t.right,s=new Date(e);let c;if(r&&((e,t)=>{const{days:n,hours:r,minutes:i,months:a,weekdays:s}=e,o=t.getMinutes();if(0!==i.size&&!i.has(o))return!1;const c=t.getHours();if(0!==r.size&&!r.has(c))return!1;const l=t.getMonth()+1;if(0!==a.size&&!a.has(l))return!1;if(0===n.size&&0===s.size)return!0;const u=t.getDate();if(0===s.size)return n.has(u);const f=t.getDay();return 0===n.size?s.has(f):n.has(u)||s.has(f)})(a,s))c=e;else{c=I(a,s).getTime()}const l=Jt(c),u=Ht(c),f=V.make(l,u);return K.succeed([[!1,[c,l,u]],[l,u],$.continueWith(f)])}))},xe=e=>ie([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||31<e)return K.dieSync((()=>new K.IllegalArgumentException(`Invalid argument in: dayOfMonth(${e}). Must be in range 1...31`)));const i=r[1],a=nn(t,e,0===i),s=Xt(a),o=en(a),c=V.make(s,o);return K.succeed([[o,i+1],i,$.continueWith(c)])})),Ie=e=>ie([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<1||7<e)return K.dieSync((()=>new K.IllegalArgumentException(`Invalid argument in: dayOfWeek(${e}). Must be in range 1 (Monday)...7 (Sunday)`)));const i=r[1],a=tn(t,e,0===i),s=Xt(a),o=en(a),c=V.make(s,o);return K.succeed([[o,i+1],i,$.continueWith(c)])})),Te=(0,u.dual)(2,((e,t)=>Oe(e,(e=>K.sync((()=>t(e))))))),Oe=(0,u.dual)(2,((e,t)=>nt(e,((e,n)=>t(n))))),Ae=e=>ae(e,(e=>e)),Ne=e=>ie(e.initial,((t,n,r)=>(0,u.pipe)(e.step(t,n,r),K.flatMap((([e,n,r])=>$.isDone(r)?K.succeed([e,q.zero,r]):K.succeed([e,q.millis(G.start(r.intervals)-t),r])))))),Me=(0,u.dual)(2,((e,{onInput:t,onOutput:n})=>Qe(we(e,t),n))),Ce=(0,u.dual)(2,((e,{onInput:t,onOutput:n})=>Xe(_e(e,t),n))),Re=e=>(0,u.pipe)(Y.make([g.none(),e.initial]),K.map((t=>new re(e,t)))),Fe=e=>{const t=q.decode(e),n=q.toMillis(t);return ie(!0,((e,r,i)=>K.succeed(i?[!1,t,$.continueWith(V.after(e+n))]:[!1,q.zero,$.done])))},Le=(0,u.dual)(2,((e,t)=>At(e,t))),Pe=(0,u.dual)(3,((e,t,n)=>Nt(e,t,n))),De=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([e,n,r])=>$.isDone(r)?K.as(t,[e,n,r]):K.succeed([e,n,r]))))))),Ue=(e,t=2)=>{const n=q.decode(e);return Ae(Qe(En,(e=>q.times(n,Math.pow(t,e)))))},je=e=>{const t=q.decode(e);return Ae((0,u.pipe)(Ot([t,t],(([e,t])=>[t,q.sum(e,t)])),Qe((e=>e[0]))))},qe=e=>{const t=q.decode(e),n=q.toMillis(t);return ie([g.none(),0],((e,r,[i,a])=>K.sync((()=>{switch(i._tag){case"None":return[[g.some([e,e+n]),a+1],a,$.continueWith(V.after(e+n))];case"Some":{const[r,s]=i.value,o=e>s+n,l=c.equals(t,q.zero)?t:q.millis(n-(e-r)%n),u=c.equals(l,q.zero)?t:l,f=o?e:e+q.toMillis(u);return[[g.some([r,f]),a+1],a,$.continueWith(V.after(f))]}}}))))},We=e=>Fe(e),Be=(e,...t)=>ie([[e,...t].map((e=>q.decode(e))),!0],((e,t,[n,r])=>K.sync((()=>{if(r){const t=n[0],r=V.after(e+q.toMillis(t));if(n.length>=2)return[[n.slice(1),!0],t,$.continueWith(r)];return[[[t,...n.slice(1)],!1],t,$.continueWith(r)]}return[[n,!1],q.zero,$.done]})))),ze=e=>Qe(Ve(),e),$e=e=>ie([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||23<e)return K.dieSync((()=>new K.IllegalArgumentException(`Invalid argument in: hourOfDay(${e}). Must be in range 0...23`)));const i=r[1],a=Qt(t,e,0===i),s=Yt(a),o=Zt(a),c=V.make(s,o);return K.succeed([[o,i+1],i,$.continueWith(c)])})),Ve=()=>ie(void 0,((e,t,n)=>K.succeed([n,t,$.continueWith(V.after(e))]))),Ge=(0,u.dual)(2,((e,t)=>Je(e,t,G.intersect))),Je=(0,u.dual)(3,((e,t,n)=>ie([e.initial,t.initial],((r,i,a)=>(0,u.pipe)(K.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),((e,t)=>[e,t])),K.flatMap((([[r,a,s],[o,c,l]])=>$.isContinue(s)&&$.isContinue(l)?He(e,t,i,r,a,s.intervals,o,c,l.intervals,n):K.succeed([[r,o],[a,c],$.done])))))))),He=(e,t,n,r,i,a,s,o,c,l)=>{const f=l(a,c);return G.isNonEmpty(f)?K.succeed([[r,s],[i,o],$.continue(f)]):(0,u.pipe)(a,G.lessThan(c))?K.flatMap(e.step(G.end(a),n,r),(([r,i,a])=>$.isDone(a)?K.succeed([[r,s],[i,o],$.done]):He(e,t,n,r,i,a.intervals,s,o,c,l))):K.flatMap(t.step(G.end(c),n,s),(([s,o,c])=>$.isDone(c)?K.succeed([[r,s],[i,o],$.done]):He(e,t,n,r,i,a,s,o,c.intervals,l)))},Ke=e=>Ye(e,{min:.8,max:1.2}),Ye=(0,u.dual)(2,((e,t)=>{const{max:n,min:r}=Object.assign({min:.8,max:1.2},t);return Oe(e,(e=>K.map(z,(t=>{const i=q.toMillis(e),a=i*r*(1-t)+i*n*t;return q.millis(a)}))))})),Ze=e=>{const t=q.decode(e);return Ae(Qe(En,(e=>q.times(t,e+1))))},Qe=(0,u.dual)(2,((e,t)=>Xe(e,(e=>K.sync((()=>t(e))))))),Xe=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([e,n,r])=>K.map(t(n),(t=>[e,t,r])))))))),et=e=>ie([Number.MIN_SAFE_INTEGER,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return K.dieSync((()=>new K.IllegalArgumentException(`Invalid argument in: minuteOfHour(${e}). Must be in range 0...59`)));const i=r[1],a=Kt(t,e,0===i),s=Jt(a),o=Ht(a),c=V.make(s,o);return K.succeed([[o,i+1],i,$.continueWith(c)])})),tt=(0,u.dual)(2,((e,t)=>nt(e,((e,n)=>K.sync((()=>t(e,n))))))),nt=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([e,r,i])=>{if($.isDone(i))return K.succeed([e,r,i]);const a=i.intervals,s=V.size(V.make(n,G.start(a)));return K.map(t(r,s),(t=>{const i=q.decode(t),s=G.start(a),o=n+q.toMillis(i),c=o-s,l=Math.max(0,G.end(a)+c),u=V.make(o,l);return[e,r,$.continueWith(u)]}))})))))),rt=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([e,n,r])=>K.as(t(n,r),[e,n,r]))))))),it=e=>ie(e.initial,((t,n,r)=>(0,u.pipe)(e.step(t,n,r),K.map((([e,t,r])=>[e,n,r]))))),at=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.provideContext(e.step(n,r,i),t))))),st=(0,u.dual)(3,((e,t,n)=>ie(e.initial,((r,i,s)=>K.contextWithEffect((o=>K.provideContext(e.step(r,i,s),a.add(o,t,n)))))))),ot=e=>Mt(Ve(),e),ct=e=>Ct(Ve(),e),lt=e=>Rt(Qe(Ve(),e),g.isSome),ut=e=>{const t=q.decode(e);return Ut(wn,(e=>q.lessThan(e,t)))},ft=e=>Pt(Ve(),e),dt=e=>Dt(Ve(),e),pt=e=>Ut(En,(t=>t<e)),ht=(0,u.dual)(3,((e,t,n)=>mt(e,t,((e,t)=>K.sync((()=>n(e,t))))))),mt=(0,u.dual)(3,((e,t,n)=>ie([e.initial,t],((t,r,[i,a])=>K.flatMap(e.step(t,r,i),(([e,t,r])=>$.isDone(r)?K.succeed([[e,a],a,r]):K.map(n(a,t),(t=>[[e,t],a,r])))))))),gt=e=>ie(e.initial,((t,n,r)=>{const i=(t,n,r)=>K.flatMap(e.step(t,n,r),(([r,a,s])=>$.isDone(s)?i(t,n,e.initial):K.succeed([r,a,s])));return i(t,n,r)})),yt=e=>ht(e,0,((e,t)=>e+1)),bt=(0,u.dual)(2,((e,t)=>{const n=q.decode(t);return(0,u.pipe)(e,Ge(wn),St((([,e])=>q.greaterThanOrEqualTo(e,n))),Qe((e=>e[0])))})),St=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.flatMap(e.step(n,r,i),(([i,a,s])=>t(a)?e.step(n,r,e.initial):K.succeed([i,a,s]))))))),vt=(0,u.dual)(3,((e,t,n)=>(0,u.pipe)(wt(e,t,r.fromIterable(n),e.initial,r.empty()),K.map((e=>r.reverse(e)))))),wt=(e,t,n,i,a)=>{if(!r.isNonEmpty(n))return K.succeed(a);const s=r.headNonEmpty(n),o=r.tailNonEmpty(n);return K.flatMap(e.step(t,s,i),(([t,n,i])=>$.isDone(i)?K.sync((()=>(0,u.pipe)(a,r.prepend(n)))):wt(e,G.start(i.intervals),o,t,r.prepend(a,n))))},Et=e=>ie([Number.NEGATIVE_INFINITY,0],((t,n,r)=>{if(!Number.isInteger(e)||e<0||59<e)return K.dieSync((()=>new K.IllegalArgumentException(`Invalid argument in: secondOfMinute(${e}). Must be in range 0...59`)));const i=r[1],a=Gt(t,e,0===i),s=$t(a),o=Vt(a),c=V.make(s,o);return K.succeed([[o,i+1],i,$.continueWith(c)])})),_t=e=>ae(En,(()=>e)),kt=e=>Qe(En,(()=>e)),xt=e=>Qe(En,e),It=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.zipRight(t(r),e.step(n,r,i)))))),Tt=(0,u.dual)(2,((e,t)=>ie(e.initial,((n,r,i)=>K.tap(e.step(n,r,i),(([,e])=>t(e))))))),Ot=(e,t)=>ie(e,((e,n,r)=>K.sync((()=>[t(r),r,$.continueWith(V.after(e))])))),At=(0,u.dual)(2,((e,t)=>Nt(e,t,G.union))),Nt=(0,u.dual)(3,((e,t,n)=>ie([e.initial,t.initial],((r,i,a)=>K.zipWith(e.step(r,i,a[0]),t.step(r,i,a[1]),(([e,t,r],[i,a,s])=>{if($.isDone(r)&&$.isDone(s))return[[e,i],[t,a],$.done];if($.isDone(r)&&$.isContinue(s))return[[e,i],[t,a],$.continue(s.intervals)];if($.isContinue(r)&&$.isDone(s))return[[e,i],[t,a],$.continue(r.intervals)];if($.isContinue(r)&&$.isContinue(s)){const o=n(r.intervals,s.intervals);return[[e,i],[t,a],$.continue(o)]}throw new Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),Mt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>!t(e))))),Ct=(0,u.dual)(2,((e,t)=>pe(e,((e,n)=>H.negate(t(e)))))),Rt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>!t(n))))),Ft=(0,u.dual)(2,((e,t)=>pe(e,((e,n)=>H.negate(t(n)))))),Lt=(0,u.dual)(2,((e,t)=>Wt(e,ut(t)))),Pt=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>t(e))))),Dt=(0,u.dual)(2,((e,t)=>pe(e,((e,n)=>t(e))))),Ut=(0,u.dual)(2,((e,t)=>de(e,((e,n)=>t(n))))),jt=(0,u.dual)(2,((e,t)=>pe(e,((e,n)=>t(n))))),qt=e=>{const t=q.decode(e),n=q.toMillis(t);return ie([g.none(),0],((e,t,[r,i])=>{switch(r._tag){case"None":return K.succeed([[g.some(e),i+1],i,$.continueWith(V.after(e+n))]);case"Some":return K.succeed([[g.some(r.value),i+1],i,$.continueWith(V.after(e+(n-(e-r.value)%n)))])}}))},Wt=(0,u.dual)(2,((e,t)=>Qe(Ge(e,t),(e=>e[0])))),Bt=(0,u.dual)(2,((e,t)=>Qe(Ge(e,t),(e=>e[1])))),zt=(0,u.dual)(3,((e,t,n)=>Qe(Ge(e,t),(([e,t])=>n(e,t))))),$t=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0).getTime()},Vt=e=>{const t=new Date($t(e));return t.setSeconds(t.getSeconds()+1)},Gt=(e,t,n)=>{const r=new Date(e);if(r.getSeconds()===t&&n)return e;if(r.getSeconds()<t)return r.setSeconds(t);const i=new Date(r.setSeconds(t));return i.setTime(i.getTime()+6e4)},Jt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0).getTime()},Ht=e=>{const t=new Date(Jt(e));return t.setMinutes(t.getMinutes()+1)},Kt=(e,t,n)=>{const r=new Date(e);if(r.getMinutes()===t&&n)return e;if(r.getMinutes()<t)return r.setMinutes(t);const i=new Date(r.setMinutes(t));return i.setTime(i.getTime()+36e5)},Yt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime()},Zt=e=>{const t=new Date(Yt(e));return t.setHours(t.getHours()+1)},Qt=(e,t,n)=>{const r=new Date(e);if(r.getHours()===t&&n)return e;if(r.getHours()<t)return r.setHours(t);const i=new Date(r.setHours(t));return i.setTime(i.getTime()+864e5)},Xt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime()},en=e=>{const t=new Date(Xt(e));return t.setDate(t.getDate()+1)},tn=(e,t,n)=>{const r=new Date(e);if(r.getDay()===t&&n)return e;const i=(7+t-r.getDay())%7;return r.setDate(r.getDate()+(0===i?7:i))},nn=(e,t,n)=>{const r=new Date(e);return r.getDate()===t&&n?e:r.getDate()<t?r.setDate(t):rn(e,t,1)},rn=(e,t,n)=>{const r=new Date(e),i=new Date(r.setDate(t));if(new Date(i.setMonth(i.getMonth()+n)).getDate()===t){const r=new Date(e),i=new Date(r.setDate(t));return i.setMonth(i.getMonth()+n)}return rn(e,t,n+1)},an=Symbol.for("effect/Schedule/ScheduleDefect");class sn{error;[an];constructor(e){this.error=e,this[an]=an}}const on=e=>K.catchAll(e,(e=>K.die(new sn(e)))),cn=e=>K.catchAllCause(e,(e=>g.match(J.find(e,(e=>{return J.isDieType(e)&&(t=e.defect,(0,m.hasProperty)(t,an))?g.some(e.defect):g.none();var t})),{onNone:()=>K.failCause(e),onSome:e=>K.fail(e.error)}))),ln=(0,u.dual)(2,((e,t)=>fn(e,t,((e,t)=>K.fail(e))))),un=(0,u.dual)(2,((e,t)=>{if(Q(t))return ln(e,t);const n=t.schedule??it(En),r=t.while?Dt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?K.succeed(n):on(n)})):n,i=t.until?Ct(r,(e=>{const n=t.until(e);return"boolean"===typeof n?K.succeed(n):on(n)})):r,a=t.times?Ge(i,pt(t.times)):i;return cn(ln(e,a))})),fn=(0,u.dual)(3,((e,t,n)=>K.flatMap(Re(t),(t=>K.matchEffect(e,{onFailure:e=>n(e,g.none()),onSuccess:r=>dn(e,t,n,r)}))))),dn=(e,t,n,r)=>K.matchEffect(t.next(r),{onFailure:()=>K.orDie(t.last),onSuccess:r=>K.matchEffect(e,{onFailure:e=>n(e,g.some(r)),onSuccess:r=>dn(e,t,n,r)})}),pn=(0,u.dual)(2,((e,t)=>mn(e,t,((e,t)=>K.fail(e))))),hn=(0,u.dual)(2,((e,t)=>{if(Q(t))return pn(e,t);const n=t.schedule??En,r=t.while?Dt(n,(e=>{const n=t.while(e);return"boolean"===typeof n?K.succeed(n):on(n)})):n,i=t.until?Ct(r,(e=>{const n=t.until(e);return"boolean"===typeof n?K.succeed(n):on(n)})):r,a=t.times?Ge(i,pt(t.times)):i;return cn(pn(e,a))})),mn=(0,u.dual)(3,((e,t,n)=>K.flatMap(Re(t),(t=>gn(e,t,n))))),gn=(e,t,n)=>K.catchAll(e,(r=>K.matchEffect(t.next(r),{onFailure:()=>(0,u.pipe)(t.last,K.orDie,K.flatMap((e=>n(r,e)))),onSuccess:()=>gn(e,t,n)}))),yn=(0,u.dual)(2,((e,t)=>bn(e,void 0,t))),bn=(0,u.dual)(3,((e,t,n)=>K.flatMap(Re(n),(n=>Sn(e,t,n))))),Sn=(e,t,n)=>K.matchEffect(n.next(t),{onFailure:()=>K.orDie(n.last),onSuccess:()=>K.flatMap(e,(t=>Sn(e,t,n)))}),vn=Ot(0,(e=>e+1)),wn=ie(g.none(),((e,t,n)=>{switch(n._tag){case"None":return K.succeed([g.some(e),q.zero,$.continueWith(V.after(e))]);case"Some":return K.succeed([g.some(n.value),q.millis(e-n.value),$.continueWith(V.after(e))])}})),En=Ot(0,(e=>e+1)),_n=ue(pt(1)),kn=ue(pt(0))},238961:(e,t,n)=>{n.r(t),n.d(t,{SingleShotGen:()=>r});class r{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new r(this.self)}}},107687:(e,t,n)=>{n.r(t),n.d(t,{make:()=>r});const r=(e,t)=>({value:e,previous:t})},95807:(e,t,n)=>{n.r(t),n.d(t,{Const:()=>K,ProxySupervisor:()=>V,SupervisorTypeId:()=>z,Track:()=>H,Zip:()=>G,fibersIn:()=>te,fromEffect:()=>X,isZip:()=>J,none:()=>ee,supervisorVariance:()=>$,track:()=>Q,unsafeTrack:()=>Z});var r=n(361369),i=n(606517),a=n(645914),s=n(856572),o=n(43977),c=n(367337),l=n(883845),u=n(953533),f=(n(128420),n(977948)),d=n(562635);const p={Forward:0,Backward:1};class h{self;stack;direction;count=0;constructor(e,t,n){this.self=e,this.stack=t,this.direction=n}clone(){return new h(this.self,this.stack.slice(),this.direction)}reversed(){return new h(this.self,this.stack.slice(),this.direction===p.Forward?p.Backward:p.Forward)}next(){const e=this.entry;switch(this.count++,this.direction===p.Forward?this.moveNext():this.movePrev(),e._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:e.value}}}get key(){return this.stack.length>0?f.some(this.stack[this.stack.length-1].key):f.none()}get value(){return this.stack.length>0?f.some(this.stack[this.stack.length-1].value):f.none()}get entry(){return f.map(d.last(this.stack),(e=>[e.key,e.value]))}get index(){let e=0;const t=this.stack;if(0===t.length){const e=this.self._root;return null!=e?e.count:0}null!=t[t.length-1].left&&(e=t[t.length-1].left.count);for(let n=t.length-2;n>=0;--n)t[n+1]===t[n].right&&(++e,null!=t[n].left&&(e+=t[n].left.count));return e}moveNext(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t.right)for(t=t.right;null!=t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}get hasNext(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].right)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}movePrev(){const e=this.stack;if(0===e.length)return;let t=e[e.length-1];if(null!=t&&null!=t.left)for(t=t.left;null!=t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}get hasPrev(){const e=this.stack;if(0===e.length)return!1;if(null!=e[e.length-1].left)return!0;for(let t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}}const m=0,g=1,y=({color:e,count:t,key:n,left:r,right:i,value:a})=>({color:e,key:n,value:a,left:r,right:i,count:t});function b(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e.color=t.color,e.count=t.count}const S=({count:e,key:t,left:n,right:r,value:i},a)=>({color:a,key:t,value:i,left:n,right:r,count:e}),v=e=>{e.count=1+(e.left?.count??0)+(e.right?.count??0)};n(107687);const w="effect/RedBlackTree",E=Symbol.for(w),_={[E]:{_Key:e=>e,_Value:e=>e},[c.symbol](){let e=c.hash(w);for(const t of this)e^=(0,r.pipe)(c.hash(t[0]),c.combine(c.hash(t[1])));return c.cached(this,e)},[o.symbol](e){if(x(e)){if((this._root?.count??0)!==(e._root?.count??0))return!1;const t=Array.from(e);return Array.from(this).every(((e,n)=>{const r=t[n];return o.equals(e[0],r[0])&&o.equals(e[1],r[1])}))}return!1},[Symbol.iterator](){const e=[];let t=this._root;for(;null!=t;)e.push(t),t=t.left;return new h(this,e,p.Forward)},toString(){return(0,l.format)(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(l.toJSON)}},[l.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,u.pipeArguments)(this,arguments)}},k=(e,t)=>{const n=Object.create(_);return n._ord=e,n._root=t,n},x=e=>(0,s.hasProperty)(e,E),I=(0,r.dual)(2,((e,t)=>{const n=e._ord;let r=e._root;for(;void 0!==r;){const e=n(t,r.key);if(o.equals(t,r.key))return f.some(r.value);r=e<=0?r.left:r.right}return f.none()})),T=(0,r.dual)(2,((e,t)=>f.isSome(I(e,t)))),O=(0,r.dual)(3,((e,t,n)=>{const r=e._ord;let i=e._root;const a=[],s=[];for(;null!=i;){const e=r(t,i.key);a.push(i),s.push(e),i=e<=0?i.left:i.right}a.push({color:m,key:t,value:n,left:void 0,right:void 0,count:1});for(let o=a.length-2;o>=0;--o){const e=a[o];s[o]<=0?a[o]={color:e.color,key:e.key,value:e.value,left:a[o+1],right:e.right,count:e.count+1}:a[o]={color:e.color,key:e.key,value:e.value,left:e.left,right:a[o+1],count:e.count+1}}for(let o=a.length-1;o>1;--o){const e=a[o-1],t=a[o];if(e.color===g||t.color===g)break;const n=a[o-2];if(n.left===e)if(e.left===t){const r=n.right;if(!r||r.color!==m){if(n.color=m,n.left=e.right,e.color=g,e.right=n,a[o-2]=e,a[o-1]=t,v(n),v(e),o>=3){const t=a[o-3];t.left===n?t.left=e:t.right=e}break}e.color=g,n.right=S(r,g),n.color=m,o-=1}else{const r=n.right;if(!r||r.color!==m){if(e.right=t.left,n.color=m,n.left=t.right,t.color=g,t.left=e,t.right=n,a[o-2]=t,a[o-1]=e,v(n),v(e),v(t),o>=3){const e=a[o-3];e.left===n?e.left=t:e.right=t}break}e.color=g,n.right=S(r,g),n.color=m,o-=1}else if(e.right===t){const r=n.left;if(!r||r.color!==m){if(n.color=m,n.right=e.left,e.color=g,e.left=n,a[o-2]=e,a[o-1]=t,v(n),v(e),o>=3){const t=a[o-3];t.right===n?t.right=e:t.left=e}break}e.color=g,n.left=S(r,g),n.color=m,o-=1}else{const r=n.left;if(!r||r.color!==m){if(e.left=t.right,n.color=m,n.right=t.left,t.color=g,t.right=e,t.left=n,a[o-2]=t,a[o-1]=e,v(n),v(e),v(t),o>=3){const e=a[o-3];e.right===n?e.right=t:e.left=t}break}e.color=g,n.left=S(r,g),n.color=m,o-=1}}return a[0].color=g,k(e._ord,a[0])})),A=(e,t)=>{const n=e[Symbol.iterator]();let r=0;return{[Symbol.iterator]:()=>A(e,t),next:()=>{r++;const e=n.key;switch(t===p.Forward?n.moveNext():n.movePrev(),e._tag){case"None":return{done:!0,value:r};case"Some":return{done:!1,value:e.value}}}}},N=(0,r.dual)(2,((e,t)=>{if(!T(e,t))return e;const n=e._ord,r=n;let i=e._root;const a=[];for(;void 0!==i;){const e=r(t,i.key);a.push(i),i=o.equals(t,i.key)?void 0:e<=0?i.left:i.right}if(0===a.length)return e;const s=new Array(a.length);let c=a[a.length-1];s[s.length-1]={color:c.color,key:c.key,value:c.value,left:c.left,right:c.right,count:c.count};for(let o=a.length-2;o>=0;--o)c=a[o],c.left===a[o+1]?s[o]={color:c.color,key:c.key,value:c.value,left:s[o+1],right:c.right,count:c.count}:s[o]={color:c.color,key:c.key,value:c.value,left:c.left,right:s[o+1],count:c.count};if(c=s[s.length-1],void 0!==c.left&&void 0!==c.right){const e=s.length;for(c=c.left;null!=c.right;)s.push(c),c=c.right;const t=s[e-1];s.push({color:c.color,key:t.key,value:t.value,left:c.left,right:c.right,count:c.count}),s[e-1].key=c.key,s[e-1].value=c.value;for(let n=s.length-2;n>=e;--n)c=s[n],s[n]={color:c.color,key:c.key,value:c.value,left:c.left,right:s[n+1],count:c.count};s[e-1].left=s[e]}if(c=s[s.length-1],c.color===m){const e=s[s.length-2];e.left===c?e.left=void 0:e.right===c&&(e.right=void 0),s.pop();for(let t=0;t<s.length;++t)s[t].count--;return k(n,s[0])}if(void 0!==c.left||void 0!==c.right){void 0!==c.left?b(c,c.left):void 0!==c.right&&b(c,c.right),c.color=g;for(let e=0;e<s.length-1;++e)s[e].count--;return k(n,s[0])}if(1===s.length)return k(n,void 0);{for(let t=0;t<s.length;++t)s[t].count--;const e=s[s.length-2];M(s),e.left===c?e.left=void 0:e.right=void 0}return k(n,s[0])})),M=e=>{let t,n,r,i;for(let a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void(t.color=g);if(n=e[a-1],n.left===t){if(r=n.right,void 0!==r&&void 0!==r.right&&r.right.color===m){if(r=n.right=y(r),i=r.right=y(r.right),n.right=r.left,r.left=n,r.right=i,r.color=n.color,t.color=g,n.color=g,i.color=g,v(n),v(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.left&&r.left.color===m){if(r=n.right=y(r),i=r.left=y(r.left),n.right=i.left,r.left=i.right,i.left=n,i.right=r,i.color=n.color,n.color=g,r.color=g,t.color=g,v(n),v(r),v(i),a>1){const t=e[a-2];t.left===n?t.left=i:t.right=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===g){if(n.color===m)return n.color=g,void(n.right=S(r,m));n.right=S(r,m);continue}if(void 0!==r){if(r=y(r),n.right=r.left,r.left=n,r.color=n.color,n.color=m,v(n),v(r),a>1){const t=e[a-2];t.left===n?t.left=r:t.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}else{if(r=n.left,void 0!==r&&void 0!==r.left&&r.left.color===m){if(r=n.left=y(r),i=r.left=y(r.left),n.left=r.right,r.right=n,r.left=i,r.color=n.color,t.color=g,n.color=g,i.color=g,v(n),v(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}return void(e[a-1]=r)}if(void 0!==r&&void 0!==r.right&&r.right.color===m){if(r=n.left=y(r),i=r.right=y(r.right),n.left=i.right,r.right=i.left,i.right=n,i.left=r,i.color=n.color,n.color=g,r.color=g,t.color=g,v(n),v(r),v(i),a>1){const t=e[a-2];t.right===n?t.right=i:t.left=i}return void(e[a-1]=i)}if(void 0!==r&&r.color===g){if(n.color===m)return n.color=g,void(n.left=S(r,m));n.left=S(r,m);continue}if(void 0!==r){if(r=y(r),n.left=r.right,r.right=n,r.color=n.color,n.color=m,v(n),v(r),a>1){const t=e[a-2];t.right===n?t.right=r:t.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}},C=T,R=O,F=e=>A(e,p.Forward),L=N,P=Symbol.for("effect/SortedSet"),D={[P]:{_A:e=>e},[c.symbol](){return(0,r.pipe)(c.hash(this.keyTree),c.combine(c.hash(P)),c.cached(this))},[o.symbol](e){return j(e)&&o.equals(this.keyTree,e.keyTree)},[Symbol.iterator](){return F(this.keyTree)},toString(){return(0,l.format)(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(l.toJSON)}},[l.NodeInspectSymbol](){return this.toJSON()},pipe(){return(0,u.pipeArguments)(this,arguments)}},U=e=>{const t=Object.create(D);return t.keyTree=e,t},j=e=>(0,s.hasProperty)(e,P),q=r.dual(2,((e,t)=>C(e.keyTree,t)?e:U(R(e.keyTree,t,!0)))),W=r.dual(2,((e,t)=>U(L(e.keyTree,t))));var B=n(672620);const z=Symbol.for("effect/Supervisor"),$={_T:e=>e};class V{underlying;value0;[z]=$;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,n,r){this.underlying.onStart(e,t,n,r)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new V(this,(0,r.pipe)(this.value,B.map(e)))}zip(e){return new G(this,e)}}class G{left;right;_tag="Zip";[z]=$;constructor(e,t){this.left=e,this.right=t}get value(){return B.zip(this.left.value,this.right.value)}onStart(e,t,n,r){this.left.onStart(e,t,n,r),this.right.onStart(e,t,n,r)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new V(this,(0,r.pipe)(this.value,B.map(e)))}zip(e){return new G(this,e)}}const J=e=>(0,s.hasProperty)(e,z)&&(0,s.isTagged)(e,"Zip");class H{[z]=$;fibers=new Set;get value(){return B.sync((()=>Array.from(this.fibers)))}onStart(e,t,n,r){this.fibers.add(r)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new V(this,(0,r.pipe)(this.value,B.map(e)))}zip(e){return new G(this,e)}onRun(e,t){return e()}}class K{effect;[z]=$;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,n,r){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new V(this,(0,r.pipe)(this.value,B.map(e)))}zip(e){return new G(this,e)}onRun(e,t){return e()}}class Y{ref;[z]=$;constructor(e){this.ref=e}get value(){return B.sync((()=>a.get(this.ref)))}onStart(e,t,n,i){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),q(i))))}onEnd(e,t){(0,r.pipe)(this.ref,a.set((0,r.pipe)(a.get(this.ref),W(t))))}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new V(this,(0,r.pipe)(this.value,B.map(e)))}zip(e){return new G(this,e)}onRun(e,t){return e()}}const Z=()=>new H,Q=B.sync(Z),X=e=>new K(e),ee=(0,i.globalValue)("effect/Supervisor/none",(()=>X(B.void))),te=e=>B.sync((()=>new Y(e)))},127514:(e,t,n)=>{n.r(t),n.d(t,{NativeSpan:()=>l,TracerTypeId:()=>i,addSpanStackTrace:()=>d,externalSpan:()=>f,make:()=>a,nativeTracer:()=>u,spanTag:()=>o,tracerTag:()=>s});var r=n(689702);const i=Symbol.for("effect/Tracer"),a=e=>({[i]:i,...e}),s=r.GenericTag("effect/Tracer"),o=r.GenericTag("effect/ParentSpan"),c=function(){const e="abcdef0123456789";return function(t){let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(16*Math.random()));return n}}();class l{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,n,r,i,a){this.name=e,this.parent=t,this.context=n,this.links=r,this.startTime=i,this.kind=a,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:c(32),this.spanId=c(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,n){this.events.push([e,t,n??{}])}}const u=a({span:(e,t,n,r,i,a)=>new l(e,t,n,r,i,a),context:e=>e()}),f=e=>({_tag:"ExternalSpan",spanId:e.spanId,traceId:e.traceId,sampled:e.sampled??!0,context:e.context??r.empty()}),d=e=>{if(!1===e?.captureStackTrace)return e;if(void 0!==e?.captureStackTrace&&"boolean"!==typeof e.captureStackTrace)return e;const t=Error.stackTraceLimit;Error.stackTraceLimit=3;const n=new Error;Error.stackTraceLimit=t;let r=!1;return{...e,captureStackTrace:()=>{if(!1!==r)return r;if(void 0!==n.stack){const e=n.stack.split("\n");if(void 0!==e[3])return r=e[3].trim(),r}}}}},853563:(e,t,n)=>{n.r(t),n.d(t,{getCurrentVersion:()=>i,setCurrentVersion:()=>a});let r="3.5.3";const i=()=>r,a=e=>{r=e}},659599:(e,t,n)=>{n.r(t),n.d(t,{customAlphabet:()=>s,customRandom:()=>a,nanoid:()=>o,random:()=>i,urlAlphabet:()=>r});let r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),a=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(a=t)=>{let s="";for(;;){let t=n(i),o=i;for(;o--;)if(s+=e[t[o]&r]||"",s.length===a)return s}}},s=(e,t=21)=>a(e,t,i),o=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);
//# sourceMappingURL=681.js.map