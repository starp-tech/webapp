/*! For license information please see 939.js.LICENSE.txt */
"use strict";(self.webpackChunkstarpyapp=self.webpackChunkstarpyapp||[]).push([[939],{22274:(e,t,r)=>{function s(e,t){if(!e)throw new Error(t)}r.d(t,{bn:()=>c,e1:()=>l,vA:()=>s,wO:()=>h});const n=34028234663852886e22,i=-34028234663852886e22,o=4294967295,a=2147483647,u=-2147483648;function c(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>a||e<u)throw new Error("invalid int 32: "+e)}function l(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>o||e<0)throw new Error("invalid uint 32: "+e)}function h(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>n||e<i))throw new Error("invalid float 32: "+e)}},77688:(e,t,r)=>{var s,n;r.d(t,{O0:()=>n,f$:()=>s}),function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(r,s,n,i,o)=>{(t(s)?s[e.symbol]:s[e.symbol]=[]).push({no:n,wireType:i,data:o})},e.onWrite=(t,r,s)=>{for(let{no:t,wireType:n,data:i}of e.list(r))s.tag(t,n).raw(i)},e.list=(r,s)=>{if(t(r)){let t=r[e.symbol];return s?t.filter((e=>e.no==s)):t}return[]},e.last=(t,r)=>e.list(t,r).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(s||(s={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(n||(n={}))},80945:(e,t,r)=>{r.d(t,{V:()=>u,e:()=>a});var s=r(77688),n=r(20241),i=r(68060);const o={readUnknownField:!0,readerFactory:e=>new u(e)};function a(e){return e?Object.assign(Object.assign({},o),e):o}class u{constructor(e,t){this.varint64=i.ls,this.uint32=i.Gn,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,r=7&e;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case s.O0.Varint:for(;128&this.buf[this.pos++];);break;case s.O0.Bit64:this.pos+=4;case s.O0.Bit32:this.pos+=4;break;case s.O0.LengthDelimited:let t=this.uint32();this.pos+=t;break;case s.O0.StartGroup:let r;for(;(r=this.tag()[1])!==s.O0.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new n.hY(...this.varint64())}uint64(){return new n.eA(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(1&e);return e=(e>>>1|(1&t)<<31)^r,t=t>>>1^r,new n.hY(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new n.eA(this.sfixed32(),this.sfixed32())}sfixed64(){return new n.hY(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}},34589:(e,t,r)=>{r.d(t,{d:()=>a,f:()=>u});var s=r(20241),n=r(68060),i=r(22274);const o={writeUnknownFields:!0,writerFactory:()=>new u};function a(e){return e?Object.assign(Object.assign({},o),e):o}class u{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),r=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],r),r+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for((0,i.e1)(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return(0,i.bn)(e),(0,n.f7)(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){(0,i.wO)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){(0,i.e1)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){(0,i.bn)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return(0,i.bn)(e),e=(e<<1^e>>31)>>>0,(0,n.f7)(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=s.hY.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=s.eA.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}int64(e){let t=s.hY.from(e);return(0,n.cV)(t.lo,t.hi,this.buf),this}sint64(e){let t=s.hY.from(e),r=t.hi>>31,i=t.lo<<1^r,o=(t.hi<<1|t.lo>>>31)^r;return(0,n.cV)(i,o,this.buf),this}uint64(e){let t=s.eA.from(e);return(0,n.cV)(t.lo,t.hi,this.buf),this}}},68060:(e,t,r)=>{function s(){let e=0,t=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(e|=(127&s)<<r,!(128&s))return this.assertBounds(),[e,t]}let r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,!(128&r))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(t|=(127&s)<<r,!(128&s))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function n(e,t,r){for(let s=0;s<28;s+=7){const n=e>>>s,i=!(n>>>7==0&&0==t),o=255&(i?128|n:n);if(r.push(o),!i)return}const s=e>>>28&15|(7&t)<<4,n=!!(t>>3);if(r.push(255&(n?128|s:s)),n){for(let e=3;e<31;e+=7){const s=t>>>e,n=!(s>>>7==0),i=255&(n?128|s:s);if(r.push(i),!n)return}r.push(t>>>31&1)}}r.d(t,{Gn:()=>c,Jg:()=>o,cV:()=>n,f7:()=>u,ls:()=>s,oJ:()=>a});const i=4294967296;function o(e){let t="-"==e[0];t&&(e=e.slice(1));const r=1e6;let s=0,n=0;function o(t,o){const a=Number(e.slice(t,o));n*=r,s=s*r+a,s>=i&&(n+=s/i|0,s%=i)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),[t,s,n]}function a(e,t){if(t>>>0<=2097151)return""+(i*t+(e>>>0));let r=(e>>>24|t<<8)>>>0&16777215,s=t>>16&65535,n=(16777215&e)+6777216*r+6710656*s,o=r+8147497*s,a=2*s,u=1e7;function c(e,t){let r=e?String(e):"";return t?"0000000".slice(r.length)+r:r}return n>=u&&(o+=Math.floor(n/u),n%=u),o>=u&&(a+=Math.floor(o/u),o%=u),c(a,0)+c(o,a)+c(n,1)}function u(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let r=0;r<9;r++)t.push(127&e|128),e>>=7;t.push(1)}}function c(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}},20241:(e,t,r)=>{r.d(t,{eA:()=>l,hY:()=>h});var s=r(68060);let n;function i(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64;n=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();const o=/^-?[0-9]+$/,a=4294967296,u=2147483648;class c{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*a+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class l extends c{static from(e){if(n)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=n.C(e);case"number":if(0===e)return this.ZERO;e=n.C(e);case"bigint":if(!e)return this.ZERO;if(e<n.UMIN)throw new Error("signed value for ulong");if(e>n.UMAX)throw new Error("ulong too large");return n.V.setBigUint64(0,e,!0),new l(n.V.getInt32(0,!0),n.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,r,n]=(0,s.Jg)(e);if(t)throw new Error("signed value for ulong");return new l(r,n);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new l(e,e/a)}throw new Error("unknown value "+typeof e)}toString(){return n?this.toBigInt().toString():(0,s.oJ)(this.lo,this.hi)}toBigInt(){return i(n),n.V.setInt32(0,this.lo,!0),n.V.setInt32(4,this.hi,!0),n.V.getBigUint64(0,!0)}}l.ZERO=new l(0,0);class h extends c{static from(e){if(n)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=n.C(e);case"number":if(0===e)return this.ZERO;e=n.C(e);case"bigint":if(!e)return this.ZERO;if(e<n.MIN)throw new Error("signed long too small");if(e>n.MAX)throw new Error("signed long too large");return n.V.setBigInt64(0,e,!0),new h(n.V.getInt32(0,!0),n.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!o.test(e))throw new Error("string is no integer");let[t,r,n]=(0,s.Jg)(e);if(t){if(n>u||n==u&&0!=r)throw new Error("signed long too small")}else if(n>=u)throw new Error("signed long too large");let i=new h(r,n);return t?i.negate():i;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new h(e,e/a):new h(-e,-e/a).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return!!(this.hi&u)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new h(t,e)}toString(){if(n)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+(0,s.oJ)(e.lo,e.hi)}return(0,s.oJ)(this.lo,this.hi)}toBigInt(){return i(n),n.V.setInt32(0,this.lo,!0),n.V.setInt32(4,this.hi,!0),n.V.getBigInt64(0,!0)}}h.ZERO=new h(0,0)},52054:(e,t,r)=>{r.d(t,{Im:()=>g,h1:()=>y,p0:()=>d,xV:()=>F});var s=r(84073),n=r(61369),i=r(83845),o=r(77948),a=r(53533),u=r(67316);const c=Symbol.for("@effect/platform/Cookies"),l=Symbol.for("@effect/platform/Cookies/Cookie"),h={[c]:c,...i.os,toJSON(){return{_id:"@effect/platform/Cookies",cookies:u.Tj(this.cookies,(e=>e.toJSON()))}},pipe(){return(0,a.t)(this,arguments)}},f=e=>{const t=Object.create(h);return t.cookies=e,t},d=e=>{const t="string"==typeof e?[e]:e,r=[];for(const e of t){const t=p(e.trim());o.Ru(t)&&r.push(t.value)}return(e=>{const t={};for(const r of e)t[r.name]=r;return f(t)})(r)};function p(e){const t=e.split(";").map((e=>e.trim())).filter((e=>""!==e));if(0===t.length)return o.dv();const r=t[0].indexOf("=");if(-1===r)return o.dv();const n=t[0].slice(0,r);if(!m.test(n))return o.dv();const i=t[0].slice(r+1),a=_(i);if(1===t.length)return o.zN(Object.assign(Object.create(b),{name:n,value:a,valueEncoded:i}));const u={};for(let e=1;e<t.length;e++){const r=t[e],n=r.indexOf("="),i=-1===n?r:r.slice(0,n).trim(),o=-1===n?void 0:r.slice(n+1).trim();switch(i.toLowerCase()){case"domain":{if(void 0===o)break;const e=o.trim().replace(/^\./,"");e&&(u.domain=e);break}case"expires":{if(void 0===o)break;const e=new Date(o);isNaN(e.getTime())||(u.expires=e);break}case"max-age":{if(void 0===o)break;const e=parseInt(o,10);isNaN(e)||(u.maxAge=s.YA(e));break}case"path":if(void 0===o)break;"/"===o[0]&&(u.path=o);break;case"priority":if(void 0===o)break;switch(o.toLowerCase()){case"low":u.priority="low";break;case"medium":u.priority="medium";break;case"high":u.priority="high"}break;case"httponly":u.httpOnly=!0;break;case"secure":u.secure=!0;break;case"partitioned":u.partitioned=!0;break;case"samesite":if(void 0===o)break;switch(o.toLowerCase()){case"lax":u.sameSite="lax";break;case"strict":u.sameSite="strict";break;case"none":u.sameSite="none"}}}return o.zN(Object.assign(Object.create(b),{name:n,value:a,valueEncoded:i,options:Object.keys(u).length>0?u:void 0}))}const g=e=>u.DM(e.cookies),m=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,b={[l]:l,...i.os,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}},y=(0,n.XY)(2,((e,t)=>f({...e.cookies,...t.cookies}))),F=e=>Object.values(e.cookies).map((e=>`${e.name}=${e.valueEncoded}`)).join("; "),_=e=>{try{return decodeURIComponent(e)}catch(t){return e}}},62119:(e,t,r)=>{r.d(t,{dB:()=>a,_N:()=>u,SD:()=>o});var s=r(95181);const n=Symbol.for("@effect/platform/Error/PlatformErrorTypeId"),i=e=>t=>s.w3({[n]:n,_tag:e,...t}),o=(e,t)=>{class r extends s.$D{_tag=t}return r.prototype[e]=e,r.prototype.name=t,r},a=i("BadArgument"),u=i("SystemError")},50595:(e,t,r)=>{r.d(t,{Oj:()=>N,Ie:()=>_,lX:()=>v,E$:()=>Y,TF:()=>k,hZ:()=>S,Au:()=>w,St:()=>I});var s=r(89210),n=r(45650),i=r(61369),o=r(6517),a=r(56572),u=(r(67316),r(43977)),c=r(67337),l=r(53533);const h="effect/Redacted",f=(0,o.V)("effect/Redacted/redactedRegistry",(()=>new WeakMap)),d=Symbol.for(h),p={[d]:{_A:e=>e},pipe(){return(0,l.t)(this,arguments)},toString:()=>"<redacted>",toJSON:()=>"<redacted>",[c.HR](){return(0,i.Fs)(c.tW(h),c.kg(c.tW(f.get(this))),c.PO(this))},[u.HR](e){return g(e)&&u.aI(f.get(this),f.get(e))}},g=e=>(0,a.i5)(e,d),m=e=>{const t=Object.create(p);return f.set(t,e),t};r(43216);const b=Symbol.for("@effect/platform/Headers"),y=Object.assign(Object.create(null),{[b]:b}),F=e=>Object.assign(Object.create(y),e),_=(s.QfV,s.QfV,s.QfV,i.D_,Object.create(y)),v=e=>{if(void 0===e)return _;if(Symbol.iterator in e){const t=Object.create(y);for(const[r,s]of e)t[r.toLowerCase()]=s;return t}const t=Object.create(y);for(const[r,s]of Object.entries(e))Array.isArray(s)?t[r.toLowerCase()]=s.join(", "):void 0!==s&&(t[r.toLowerCase()]=s);return t},I=e=>Object.setPrototypeOf(e,y),S=(0,i.XY)(3,((e,t,r)=>{const s=F(e);return s[t.toLowerCase()]=r,s})),w=(0,i.XY)(2,((e,t)=>F({...e,...v(t)}))),k=(0,i.XY)(2,((e,t)=>{const r=F(e);return delete r[t.toLowerCase()],r})),Y=(0,i.XY)(2,((e,t)=>{const r={...e},s=t=>{if("string"==typeof t){const s=t.toLowerCase();s in e&&(r[s]=m(e[s]))}else for(const s in e)t.test(s)&&(r[s]=m(e[s]))};if(Array.isArray(t))for(let e=0;e<t.length;e++)s(t[e]);else s(t);return r})),N=(0,o.V)("@effect/platform/Headers/currentRedactedNames",(()=>n.p5(["authorization","cookie","set-cookie","x-api-key"])))},18880:(e,t,r)=>{r.d(t,{vd:()=>Y}),r(89210);var s=r(89702),n=r(55519),i=r(45650),o=r(61369),a=r(6517),u=(r(86780),r(53533)),c=(r(56572),r(55040),r(8993)),l=r(90208),h=(r(52054),r(50595)),f=r(17017),d=r(93374),p=(r(46386),r(64387)),g=r(48805);const m=Symbol.for("@effect/platform/HttpClient"),b=(0,a.V)(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),(()=>i.p5(o.f4))),y=(0,a.V)(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),(()=>i.p5(!0))),F=(0,a.V)(Symbol.for("@effect/platform/HttpClient/currentFetchOptions"),(()=>i.p5({}))),_={[m]:m,pipe(){return(0,u.t)(this,arguments)}},v=(e,t)=>{function r(r){return e(t(r))}return Object.setPrototypeOf(r,_),r.preprocess=t,r.execute=e,r},I=e=>v((t=>n.flatMap(t,(t=>n.withFiberRuntime((r=>{const o=s.$v(r.getFiberRef(i.Fi),c.HG),a=new AbortController,u=c.U9(o,n.sync((()=>a.abort()))),l=d.Gm(t.url,t.urlParams,t.hash);if("Left"===l._tag)return n.fail(new f.GI({request:t,reason:"InvalidUrl",cause:l.left}));const g=l.right;return!r.getFiberRef(i.MP)||r.getFiberRef(b)(t)?n.zipRight(u,e(t,g,a.signal,r)):n.zipRight(u,n.useSpan(`http.client ${t.method}`,{kind:"client",captureStackTrace:!1},(s=>{s.attribute("http.request.method",t.method),s.attribute("server.address",g.origin),""!==g.port&&s.attribute("server.port",+g.port),s.attribute("url.full",g.toString()),s.attribute("url.path",g.pathname),s.attribute("url.scheme",g.protocol.slice(0,-1));const i=g.search.slice(1);""!==i&&s.attribute("url.query",i);const o=r.getFiberRef(h.Oj),u=h.E$(t.headers,o);for(const e in u)s.attribute(`http.request.header.${e}`,String(u[e]));return t=r.getFiberRef(y)?p.lL(t,(e=>h.St({b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${"Some"===e.parent._tag?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`}))(s)):t,n.tap(n.withParentSpan(e(t,g,a.signal,r),s),(e=>{s.attribute("http.response.status_code",e.status);const t=h.E$(e.headers,o);for(const e in t)s.attribute(`http.response.header.${e}`,String(t[e]))}))})))}))))),n.succeed),S=s.Io("@effect/platform/HttpClient/Fetch"),w=I(((e,t,r,s)=>{const o=s.getFiberRef(i.Fi).unsafeMap.get(S.key)??globalThis.fetch,a=s.getFiberRef(F),u=new globalThis.Headers(e.headers),c=s=>n.map(n.tryPromise({try:()=>o(t,{...a,method:e.method,headers:u,body:s,duplex:"Stream"===e.body._tag?"half":void 0,signal:r}),catch:t=>new f.GI({request:e,reason:"Transport",cause:t})}),(t=>g.tO(e,t)));if("GET"!==(h=e.method)&&"HEAD"!==h)switch(e.body._tag){case"Raw":case"Uint8Array":return c(e.body.body);case"FormData":return c(e.body.formData);case"Stream":return n.flatMap(l.tiA(e.body.stream),c)}var h;return c(void 0)})),k=(0,o.XY)(2,((e,t)=>v(n.flatMap((r=>t(e.execute(n.succeed(r)),r))),e.preprocess))),Y=(e=>k(e,((e,t)=>n.filterOrFail(e,(e=>e.status>=200&&e.status<300),(e=>new f.o3({request:t,response:e,reason:"StatusCode",description:"non 2xx status code"}))))))(w)},17017:(e,t,r)=>{r.d(t,{GI:()=>i,o3:()=>o});var s=r(62119);const n=Symbol.for("@effect/platform/HttpClientError");class i extends(s.SD(n,"RequestError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}}class o extends(s.SD(n,"ResponseError")){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){const e=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${e})`:`${this.reason} error (${e})`}}},10749:(e,t,r)=>{r.d(t,{bE:()=>n,mu:()=>i});var s=r(64387);s.L8,s.Jt;const n=s.bE,i=(s.F6,s.yJ,s.yH,s.d5,s.fF,s.JP,s.U0,s.WH,s.lL,s.tB,s.hC,s.Ju,s.TK,s.cV,s.c5,s.i9,s.bj,s.Bg,s.uR,s.Dc,s.EZ,s.hd,s.fr,s.ju,s.mu);s.iD,s.J9,s.F,s.SZ,s.If,s.zA,s.tY,s.hh,s.PG},233:(e,t,r)=>{r.d(t,{sv:()=>n});var s=r(48805);s.ii,s.tO,s.CM,s.XL;const n=s.sv;s.ZN,s.Pq,s.GO,s.Td,s.Qq,s.If,s.oB,s.nh,s.Ge,s.SA},93374:(e,t,r)=>{r.d(t,{Au:()=>c,BC:()=>l,Gm:()=>d,Ie:()=>a,dI:()=>f,hZ:()=>u,lX:()=>o,u2:()=>h}),r(89210);var s=r(58600),n=r(57964),i=r(61369);const o=e=>{const t=Symbol.iterator in e?s.Ts(e):Object.entries(e),r=[];for(const[e,s]of t)if(Array.isArray(s))for(let t=0;t<s.length;t++)void 0!==s[t]&&r.push([e,String(s[t])]);else void 0!==s&&r.push([e,String(s)]);return r},a=[],u=(0,i.XY)(3,((e,t,r)=>s.BC(s.pb(e,(([e])=>e!==t)),[t,String(r)]))),c=(0,i.XY)(2,((e,t)=>{const r=o(t),n=r.map((([e])=>e));return s.u2(s.pb(e,(([e])=>n.includes(e))),r)})),l=(0,i.XY)(3,((e,t,r)=>s.BC(e,[t,String(r)]))),h=(0,i.XY)(2,((e,t)=>s.u2(e,o(t)))),f=e=>new URLSearchParams(e).toString(),d=(e,t,r)=>{try{const s=new URL(e,p());for(let e=0;e<t.length;e++){const[r,n]=t[e];void 0!==n&&s.searchParams.append(r,n)}return"Some"===r._tag&&(s.hash=r.value),n.pG(s)}catch(e){return n.kb(e)}},p=()=>{if("location"in globalThis&&void 0!==globalThis.location&&void 0!==globalThis.location.origin&&void 0!==globalThis.location.pathname)return location.origin+location.pathname}},46386:(e,t,r)=>{r.d(t,{Ie:()=>v,NJ:()=>E,P8:()=>O,ZN:()=>X,Pq:()=>N,Og:()=>T,Td:()=>M,Qq:()=>k,wF:()=>S,jz:()=>Y});var s=r(89210),n=r(95181),i=r(55519),o=r(61369),a=r(83845),u=r(90208),c=r(83136),l=r(29064),h=r(48960),f=r(18428);l.le,c.gl,l.IV,c.jG,l.Ih,c.as,c.NL,c.r,c.yO,c.h9,l.uP,l.KO,l.sF,c.Hh,l.Ny,l.AS,c.Fo,c.lN,c.zQ,c.K7,c.fq,c.aP,c._,c.Vi,c.$t,c.Ze,l.wO,c.UP,c.ye,l.sz,c._O,c.sx,c.h1,c.d_,l.fJ,l.gO,l.AT,l.pV,l.qI,c.Bq,c.JE,l.Qr,l.uS,c.Mr,c.lX,c.qd,c.sw,c.sV,c.gJ,c.As,c.S6,c.P4,c.Tj,c.WK,c.xm,c.aW,c.Hq,c.qp,c.XV,c.Um,c.Es,c.Gn,c.mL,c.ZZ,c.B4,c.zv,c.XQ,c.Zm,c.Qg,c.kS,c.NW,l.WK,c.tw,l.Pp,c.pR,c.ky,c.rG,c.Pf,c.LF,l.Ml,l.$5,l.u,c.ZD,c.eF,c.sZ,c.KE,c.P1,c.uz,l.Py,l.DY,l.OH,c.bk,c.Vl,c.TE,h.WD,f.vJM,l.rI,c.oA,c.A2,c.bU,c.fR,l.M9,c.f4,c.xs,c.yU,c.pi,c.aN,c.Td,c.vV,r(28420);var d=r(89702);r(86780),r(77948),h.TW,h.as,h._U,h.ul,h.OO,h.vZ,h.PB,h.XM,h.Nh,h.WW,h.zN,h.Zg,h.uW,h.xs,h.o6,h.zQ,h.K7,h.rb,h.Hr,h.U9,h.F_,h.GS,h.Kb,h.q0,h.jZ,h.q5,h.bY,h.Ze,h.gv,h.Cm,h.jj,h.Hd,h.IH,h.ye,h.sz,h._O,h.sx,h.d_,h.n,h.Si,h.fJ,h.gO,h.AT,h.pV,h.ts,h.kR,h.nC,h.AU,h.VQ,h.E1,h.hi,h.R3,h.H_,h.ft,h.WU,h.m$,h.US,h.pD,h.FF,h.Wg,h.l_,h.oU,h.jJ,h.q$,h.H0,h.Sh,h.qI,h.Ef,h.pr,h.uS,h.qd,h.PD,h.gJ,h.d5,h.mY,h.HV,h.wm,h.Tj,h.WK,h.xm,h.a$,h.kB,h.Zm,h.NW,h.Pp,h.O4,h.pb,h.wV,h.xQ,h.fV,h.S_,h.cs,h.Py,h.cz,h.Uy,h.DY,h.OH,h.s,h.ay,h.oA,h.A2,h.N_,h.yU,h.pi,h.aN,h.OY,r(62119);const p=(0,d.Io)("@effect/platform/FileSystem"),g=Symbol.for("@effect/platform/HttpBody"),m=Symbol.for("@effect/platform/HttpBody/HttpBodyError"),b=n.VK("HttpBodyError"),y=e=>b({[m]:m,reason:e});class F{[g];constructor(){this[g]=g}[a.FX](){return this.toJSON()}toString(){return a.GP(this)}}class _ extends F{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}}const v=new _;class I extends F{body;contentType;_tag="Uint8Array";constructor(e,t){super(),this.body=e,this.contentType=t}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?(new TextDecoder).decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}}const S=(e,t)=>new I(e,t??"application/octet-stream"),w=new TextEncoder,k=(e,t)=>S(w.encode(e),t??"text/plain"),Y=e=>k(JSON.stringify(e),"application/json"),N=e=>i.try({try:()=>Y(e),catch:e=>y({_tag:"JsonError",error:e})}),T=(e,t)=>{const r=s.lFO(e,t);return e=>i.flatMap(i.mapError(r(e),(e=>y({_tag:"SchemaError",error:e}))),N)},E=(e,t)=>i.flatMap(p,(r=>i.map(r.stat(e),(s=>M(r.stream(e,t),t?.contentType,Number(s.size)))))),O=e=>M(u.fph((()=>e.stream()),o.D_),e.type,e.size);class x extends F{formData;_tag="FormData";constructor(e){super(),this.formData=e}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"FormData",formData:this.formData}}}const X=e=>new x(e);class R extends F{stream;contentType;contentLength;_tag="Stream";constructor(e,t,r){super(),this.stream=e,this.contentType=t,this.contentLength=r}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Stream",contentType:this.contentType,contentLength:this.contentLength}}}const M=(e,t,r)=>new R(e,t??"application/octet-stream",r)},64387:(e,t,r)=>{r.d(t,{Bg:()=>W,Dc:()=>C,EZ:()=>j,F:()=>V,F6:()=>I,If:()=>Z,J9:()=>$,JP:()=>Y,Jt:()=>F,Ju:()=>x,L8:()=>y,PG:()=>U,SZ:()=>G,TK:()=>X,U0:()=>R,WH:()=>N,bE:()=>_,bj:()=>P,c5:()=>D,cV:()=>M,d5:()=>w,fF:()=>k,fr:()=>z,hC:()=>O,hd:()=>q,hh:()=>K,i9:()=>A,iD:()=>J,ju:()=>L,lL:()=>T,mu:()=>H,tB:()=>E,tY:()=>ee,uR:()=>B,yH:()=>S,yJ:()=>v,zA:()=>Q});var s=r(89702),n=r(55519),i=r(37728),o=r(61369),a=r(83845),u=r(77948),c=r(50595),l=r(93374),h=r(46386);const f=Symbol.for("@effect/platform/HttpClientRequest"),d=s.Io("@effect/platform/HttpClient"),p={[f]:f,...i.Em,...a.os,commit(){return n.flatMap(d,(e=>e(this)))},toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:this.headers,body:this.body.toJSON()}}};function g(e,t,r,s,n,i){const o=Object.create(p);return o.method=e,o.url=t,o.urlParams=r,o.hash=s,o.headers=n,o.body=i,o}const m=e=>"object"==typeof e&&null!==e&&f in e,b=g("GET","",l.Ie,u.dv(),c.Ie,h.Ie),y=e=>(t,r)=>Y(b,{method:e,url:t,...r??void 0}),F=y("GET"),_=y("POST"),v=y("PUT"),I=y("PATCH"),S=y("DELETE"),w=y("HEAD"),k=y("OPTIONS"),Y=(0,o.XY)(2,((e,t)=>{let r=e;return t.method&&(r=R(r,t.method)),t.url&&(r=M(r,t.url)),t.headers&&(r=T(r,t.headers)),t.urlParams&&(r=B(r,t.urlParams)),t.hash&&(r=q(r,t.hash)),t.body&&(r=L(r,t.body)),t.accept&&(r=x(r,t.accept)),t.acceptJson&&(r=X(r)),r})),N=(0,o.XY)(3,((e,t,r)=>g(e.method,e.url,e.urlParams,e.hash,c.hZ(e.headers,t,r),e.body))),T=(0,o.XY)(2,((e,t)=>g(e.method,e.url,e.urlParams,e.hash,c.Au(e.headers,t),e.body))),E=(0,o.XY)(3,((e,t,r)=>N(e,"Authorization",`Basic ${btoa(`${t}:${r}`)}`))),O=(0,o.XY)(2,((e,t)=>N(e,"Authorization",`Bearer ${t}`))),x=(0,o.XY)(2,((e,t)=>N(e,"Accept",t))),X=x("application/json"),R=(0,o.XY)(2,((e,t)=>g(t,e.url,e.urlParams,e.hash,e.headers,e.body))),M=(0,o.XY)(2,((e,t)=>{if("string"==typeof t)return g(e.method,t,e.urlParams,e.hash,e.headers,e.body);const r=new URL(t.toString()),s=l.lX(r.searchParams),n=r.hash?u.zN(r.hash.slice(1)):u.dv();return r.search="",r.hash="",g(e.method,r.toString(),s,n,e.headers,e.body)})),A=(0,o.XY)(2,((e,t)=>g(e.method,e.url.endsWith("/")&&t.startsWith("/")?e.url+t.slice(1):e.url+t,e.urlParams,e.hash,e.headers,e.body))),D=(0,o.XY)(2,((e,t)=>g(e.method,t.endsWith("/")&&e.url.startsWith("/")?t+e.url.slice(1):t+e.url,e.urlParams,e.hash,e.headers,e.body))),P=(0,o.XY)(2,((e,t)=>g(e.method,t(e.url),e.urlParams,e.hash,e.headers,e.body))),C=(0,o.XY)(3,((e,t,r)=>g(e.method,e.url,l.BC(e.urlParams,t,r),e.hash,e.headers,e.body))),j=(0,o.XY)(2,((e,t)=>g(e.method,e.url,l.u2(e.urlParams,t),e.hash,e.headers,e.body))),W=(0,o.XY)(3,((e,t,r)=>g(e.method,e.url,l.hZ(e.urlParams,t,r),e.hash,e.headers,e.body))),B=(0,o.XY)(2,((e,t)=>g(e.method,e.url,l.Au(e.urlParams,t),e.hash,e.headers,e.body))),q=(0,o.XY)(2,((e,t)=>g(e.method,e.url,e.urlParams,u.zN(t),e.headers,e.body))),z=e=>g(e.method,e.url,e.urlParams,u.dv(),e.headers,e.body),L=(0,o.XY)(2,((e,t)=>{let r=e.headers;if("Empty"===t._tag)r=c.TF(c.TF(r,"Content-Type"),"Content-length");else{const e=t.contentType;e&&(r=c.hZ(r,"content-type",e));const s=t.contentLength;s&&(r=c.hZ(r,"content-length",s.toString()))}return g(e.method,e.url,e.urlParams,e.hash,r,t)})),H=(0,o.XY)((e=>m(e[0])),((e,t,r="application/octet-stream")=>L(e,h.wF(t,r)))),J=(0,o.XY)((e=>m(e[0])),((e,t,r="text/plain")=>L(e,h.Qq(t,r)))),$=(0,o.XY)(2,((e,t)=>n.map(h.Pq(t),(t=>L(e,t))))),V=(0,o.XY)(2,((e,t)=>L(e,h.jz(t)))),K=(0,o.XY)((e=>m(e[0])),((e,t,r)=>n.map(h.NJ(t,r),(t=>L(e,t))))),U=(0,o.XY)(2,((e,t)=>L(e,h.P8(t)))),G=(e,t)=>{const r=h.Og(e,t);return(0,o.XY)(2,((e,t)=>n.map(r(t),(t=>L(e,t)))))},Z=(0,o.XY)(2,((e,t)=>L(e,h.Qq(l.dI(l.lX(t)),"application/x-www-form-urlencoded")))),Q=(0,o.XY)(2,((e,t)=>L(e,h.ZN(t)))),ee=(0,o.XY)((e=>m(e[0])),((e,t,{contentLength:r,contentType:s="application/octet-stream"}={})=>L(e,h.Td(t,s,r))))},48805:(e,t,r)=>{r.d(t,{ii:()=>p,sv:()=>F,ZN:()=>S,tO:()=>g,Pq:()=>v,Ge:()=>T,SA:()=>E,CM:()=>b,oB:()=>Y,XL:()=>y,nh:()=>N,Td:()=>k,Qq:()=>_,If:()=>I,GO:()=>w});var s=r(89210),n=r(55519),i=r(61369),o=r(83845),a=r(77948),u=r(90208),c=r(52054),l=r(50595),h=r(17017);const f=Symbol.for("@effect/platform/HttpIncomingMessage");var d=r(93374);const p=Symbol.for("@effect/platform/HttpClientResponse"),g=(e,t)=>new m(e,t);class m extends o.Xs{request;source;[f];[p];constructor(e,t){super(),this.request=e,this.source=t,this[f]=f,this[p]=p}toJSON(){return((e,t)=>{const r=e.headers["content-type"]??"";let s;if(r.includes("application/json"))try{s=n.runSync(e.json)}catch(e){}else if(r.includes("text/")||r.includes("urlencoded"))try{s=n.runSync(e.text)}catch(e){}const i={...t,headers:e.headers,remoteAddress:e.remoteAddress.toJSON()};return void 0!==s&&(i.body=s),i})(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return l.lX(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=c.p0(this.source.headers.getSetCookie())}get remoteAddress(){return a.dv()}get stream(){return this.source.body?u.fph((()=>this.source.body),(e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e}))):u.fJG(new h.o3({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return n.tryMap(this.text,{try:e=>""===e?null:JSON.parse(e),catch:e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e})})}textBody;get text(){return this.textBody??=n.tryPromise({try:()=>this.source.text(),catch:e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(n.cached,n.runSync)}get urlParamsBody(){return n.flatMap(this.text,(e=>n.try({try:()=>d.lX(new URLSearchParams(e)),catch:e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e})})))}formDataBody;get formData(){return this.formDataBody??=n.tryPromise({try:()=>this.source.formData(),catch:e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(n.cached,n.runSync)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=n.tryPromise({try:()=>this.source.arrayBuffer(),catch:e=>new h.o3({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(n.cached,n.runSync)}}const b=(e,t)=>{const r=s.lNp(e,t);return e=>n.flatMap(e.json,(t=>r({status:e.status,headers:e.headers,body:t})))},y=(e,t)=>{const r=s.lNp(e,t);return e=>r({status:e.status,headers:e.headers})},F=e=>n.scoped(n.flatMap(e,(e=>e.arrayBuffer))),_=e=>n.scoped(n.flatMap(e,(e=>e.text))),v=e=>n.scoped(n.flatMap(e,(e=>e.json))),I=e=>n.scoped(n.flatMap(e,(e=>e.urlParamsBody))),S=e=>n.scoped(n.flatMap(e,(e=>e.formData))),w=e=>n.scoped(n.asVoid(e)),k=e=>u.A2M(n.map(e,(e=>e.stream))),Y=(e,t)=>{const r=b(e,t);return e=>n.scoped(n.flatMap(e,r))},N=(e,t)=>{const r=y(e,t);return e=>n.scoped(n.flatMap(e,r))},T=(0,i.XY)(2,((e,t)=>{const r=e.status;return t[r]?t[r](e):r>=200&&r<300&&t["2xx"]?t["2xx"](e):r>=300&&r<400&&t["3xx"]?t["3xx"](e):r>=400&&r<500&&t["4xx"]?t["4xx"](e):r>=500&&r<600&&t["5xx"]?t["5xx"](e):t.orElse(e)})),E=(0,i.XY)(2,((e,t)=>n.scoped(n.flatMap(e,T(t)))))},41499:(e,t,r)=>{r.d(t,{B1:()=>s});const s=Symbol.for("@effect/schema/ArbitraryHookId")},34721:(e,t,r)=>{r.d(t,{tI:()=>s});const s=Symbol.for("@effect/schema/EquivalenceHookId")},39357:(e,t,r)=>{r.d(t,{jo:()=>n}),r(58600);r(77948),r(28789);var s=(r(41112),r(15407));r(60023);const n=Symbol.for("@effect/schema/PrettyHookId");s.eA},81107:(e,t,r)=>{r.d(t,{Im:()=>c});var s=r(55519),n=r(77948),i=r(56572),o=r(28789),a=r(15407);const u=(e,t=[])=>({value:e,forest:t}),c=e=>s.runSync((e=>s.map(_(e),(e=>l(e))))(e)),l=e=>e.value+h("\n",e.forest),h=(e,t)=>{let r="";const s=t.length;let n;for(let i=0;i<s;i++){n=t[i];const o=i===s-1;r+=e+(o?"└":"├")+"─ "+n.value,r+=h(e+(s>1&&!o?"│  ":"   "),n.forest)}return r},f=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},d=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},p=e=>"ast"in e?n.zN(e.ast):n.dv(),g=e=>{const t=(e=>p(e).pipe(n.qI(o.$O),s.flatMap((t=>{const r=t(e);return i.Kg(r)?s.succeed({message:r,override:!1}):s.isEffect(r)?s.map(r,(e=>({message:e,override:!1}))):i.Kg(r.message)?s.succeed({message:r.message,override:r.override}):s.map(r.message,(e=>({message:e,override:r.override})))}))))(e);return(e=>{switch(e._tag){case"Refinement":if("From"===e.kind)return g(e.issue);break;case"Transformation":return g(e.issue)}return n.dv()})(e).pipe(s.flatMap((e=>s.map(t,(t=>t.override?t.message:e)))),s.catchAll((()=>s.flatMap(t,(t=>!t.override&&("Refinement"===e._tag&&"Predicate"!==e.kind||"Transformation"===e._tag&&"Transformation"!==e.kind)?n.dv():s.succeed(t.message))))))},m=e=>p(e).pipe(n.qI(o.M7),n.x1((t=>n.k$(t(e))))),b=e=>n.WL(m(e),(()=>String(e.ast))),y=e=>e.message??"is forbidden",F=(e,t)=>s.matchEffect(g(e),{onFailure:t,onSuccess:e=>s.succeed(u(e))}),_=e=>{switch(e._tag){case"Type":return s.map((e=>g(e).pipe(s.orElse((()=>m(e))),s.catchAll((()=>s.succeed(e.message??`Expected ${String(e.ast)}, actual ${a.eA(e.actual)}`)))))(e),u);case"Forbidden":return s.succeed(u(b(e),[u(y(e))]));case"Unexpected":return s.succeed(u((e=>e.message??"is unexpected")(e)));case"Missing":return s.map((e=>o.rt(e.ast).pipe(s.flatMap((e=>{const t=e();return i.Kg(t)?s.succeed(t):t})),s.catchAll((()=>s.succeed(e.message??"is missing")))))(e),u);case"Transformation":return F(e,(()=>s.map(_(e.issue),(t=>u(b(e),[u(f(e.kind),[t])])))));case"Refinement":return F(e,(()=>s.map(_(e.issue),(t=>u(b(e),[u(d(e.kind),[t])])))));case"Pointer":return s.map(_(e.issue),(t=>u(a.jV(e.path),[t])));case"Composite":{const t=b(e);return F(e,(()=>a.J_(e.issues)?s.map(s.forEach(e.issues,_),(e=>u(t,e))):s.map(_(e.issues),(e=>u(t,[e])))))}}}},41112:(e,t,r)=>{r.d(t,{Bd:()=>l,D4:()=>f,DB:()=>h,Kn:()=>a,NJ:()=>p,T5:()=>o,YW:()=>d,eT:()=>g,vR:()=>u,yK:()=>c});var s=r(58600),n=r(15407);const i=(e,t,r,i)=>{let o=e;return r&&s.iI(r)&&(o+=`\nat path: ${n.jV(r)}`),void 0!==t&&(o+=`\ndetails: ${t}`),i&&(o+=`\nschema (${i._tag}): ${i}`),o},o=(e,t)=>((e,t,r)=>i("Missing annotation",e,t,r))('Generating a Pretty for this schema requires a "pretty" annotation',e,t),a="Cannot pretty print a `never` value",u=(e,t,r)=>i("Unexpected Error",`Cannot find a matching schema for ${n.eA(e)}`,t,r),c=e=>i("Unsupported key schema",void 0,void 0,e),l=e=>i("Unsupported literal",`literal value: ${n.eA(e)}`),h=e=>i("Duplicate index signature",`${e} index signature`),f=i("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),d=i("Invalid element","A required element cannot follow an optional element. ts(1257)"),p=e=>i("Duplicate property signature transformation",`Duplicate key ${n.eA(e)}`),g=e=>i("Duplicate property signature",`Duplicate key ${n.eA(e)}`)},29140:(e,t,r)=>{r.d(t,{$H:()=>f,$_:()=>s,EM:()=>y,IO:()=>i,Ij:()=>m,Ls:()=>F,Qp:()=>g,Wz:()=>p,Xe:()=>a,_F:()=>u,_b:()=>o,ft:()=>n,mO:()=>b,pU:()=>h,tg:()=>d,uy:()=>c,wO:()=>l});const s=Symbol.for("@effect/schema/TypeId/GreaterThan"),n=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),i=Symbol.for("@effect/schema/TypeId/LessThan"),o=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),a=Symbol.for("@effect/schema/TypeId/Int"),u=Symbol.for("@effect/schema/TypeId/Between"),c=Symbol.for("@effect/schema/TypeId/GreaterThanBigint"),l=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualToBigint"),h=Symbol.for("@effect/schema/TypeId/LessThanBigint"),f=Symbol.for("@effect/schema/TypeId/LessThanOrEqualToBigint"),d=Symbol.for("@effect/schema/TypeId/BetweenBigint"),p=Symbol.for("@effect/schema/TypeId/MinLength"),g=Symbol.for("@effect/schema/TypeId/MaxLength"),m=Symbol.for("@effect/schema/TypeId/Length"),b=Symbol.for("@effect/schema/TypeId/MinItems"),y=Symbol.for("@effect/schema/TypeId/MaxItems"),F=Symbol.for("@effect/schema/TypeId/ItemsCount")},15407:(e,t,r)=>{r.d(t,{Hs:()=>o,J_:()=>l,SC:()=>i,Z4:()=>a,_r:()=>c,eA:()=>u,jV:()=>d,vX:()=>h});var s=r(58600),n=r(56572);const i=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return i(e,t.from)}},o=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),a=e=>{let t,r=!1;return()=>(r||(t=e(),r=!0),t)},u=e=>{if(n.Kg(e))return JSON.stringify(e);if(n.Et(e)||null==e||n.Lm(e)||n.Bm(e)||n.$P(e))return String(e);if(n.sI(e))return String(e)+"n";if(!s.cy(e)&&n.i5(e,"toString")&&n.Tn(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),s.cy(e)?`[${e.map(u).join(",")}]`:`{${o(e).map((t=>`${n.Kg(t)?JSON.stringify(t):String(t)}:${u(e[t])}`)).join(",")}}`}catch(t){return String(e)}},c=e=>"string"==typeof e?JSON.stringify(e):String(e),l=e=>Array.isArray(e),h=e=>!Array.isArray(e),f=e=>`[${c(e)}]`,d=e=>l(e)?e.map(f).join(""):f(e)},14816:(e,t,r)=>{r.d(t,{PV:()=>P,Vr:()=>M,fZ:()=>A});const s=Symbol.for("protobuf-ts/message-type");function n(e){let t=!1;const r=[];for(let s=0;s<e.length;s++){let n=e.charAt(s);"_"==n?t=!0:/\d/.test(n)?(r.push(n),t=!0):t?(r.push(n.toUpperCase()),t=!1):0==s?r.push(n.toLowerCase()):r.push(n)}return r.join("")}var i,o,a;function u(e){var t,r,s,i;return e.localName=null!==(t=e.localName)&&void 0!==t?t:n(e.name),e.jsonName=null!==(r=e.jsonName)&&void 0!==r?r:n(e.name),e.repeat=null!==(s=e.repeat)&&void 0!==s?s:a.NO,e.opt=null!==(i=e.opt)&&void 0!==i?i:!e.repeat&&!e.oneof&&"message"==e.kind,e}function c(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(i||(i={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(o||(o={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(a||(a={}));class l{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],r=[];for(let s of this.fields)if(s.oneof)r.includes(s.oneof)||(r.push(s.oneof),e.push(s.oneof),t.push(s.oneof));else switch(t.push(s.localName),s.kind){case"scalar":case"enum":s.opt&&!s.repeat||e.push(s.localName);break;case"message":s.repeat&&e.push(s.localName);break;case"map":e.push(s.localName)}this.data={req:e,known:t,oneofs:Object.values(r)}}is(e,t,r=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let s=Object.keys(e),n=this.data;if(s.length<n.req.length||n.req.some((e=>!s.includes(e))))return!1;if(!r&&s.some((e=>!n.known.includes(e))))return!1;if(t<1)return!0;for(const s of n.oneofs){const n=e[s];if(!c(n))return!1;if(void 0===n.oneofKind)continue;const i=this.fields.find((e=>e.localName===n.oneofKind));if(!i)return!1;if(!this.field(n[n.oneofKind],i,r,t))return!1}for(const s of this.fields)if(void 0===s.oneof&&!this.field(e[s.localName],s,r,t))return!1;return!0}field(e,t,r,s){let n=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:n?this.scalars(e,t.T,s,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:n?this.scalars(e,i.INT32,s):this.scalar(e,i.INT32);case"message":return void 0===e||(n?this.messages(e,t.T(),r,s):this.message(e,t.T(),r,s));case"map":if("object"!=typeof e||null===e)return!1;if(s<2)return!0;if(!this.mapKeys(e,t.K,s))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,s,t.V.L);case"enum":return this.scalars(Object.values(e),i.INT32,s);case"message":return this.messages(Object.values(e),t.V.T(),r,s)}}return!0}message(e,t,r,s){return r?t.isAssignable(e,s):t.is(e,s)}messages(e,t,r,s){if(!Array.isArray(e))return!1;if(s<2)return!0;if(r){for(let r=0;r<e.length&&r<s;r++)if(!t.isAssignable(e[r],s-1))return!1}else for(let r=0;r<e.length&&r<s;r++)if(!t.is(e[r],s-1))return!1;return!0}scalar(e,t,r){let s=typeof e;switch(t){case i.UINT64:case i.FIXED64:case i.INT64:case i.SFIXED64:case i.SINT64:switch(r){case o.BIGINT:return"bigint"==s;case o.NUMBER:return"number"==s&&!isNaN(e);default:return"string"==s}case i.BOOL:return"boolean"==s;case i.STRING:return"string"==s;case i.BYTES:return e instanceof Uint8Array;case i.DOUBLE:case i.FLOAT:return"number"==s&&!isNaN(e);default:return"number"==s&&Number.isInteger(e)}}scalars(e,t,r,s){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e))for(let n=0;n<e.length&&n<r;n++)if(!this.scalar(e[n],t,s))return!1;return!0}mapKeys(e,t,r){let s=Object.keys(e);switch(t){case i.INT32:case i.FIXED32:case i.SFIXED32:case i.SINT32:case i.UINT32:return this.scalars(s.slice(0,r).map((e=>parseInt(e))),t,r);case i.BOOL:return this.scalars(s.slice(0,r).map((e=>"true"==e||"false"!=e&&e)),t,r);default:return this.scalars(s,t,r,o.STRING)}}}function h(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}let f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),d=[];for(let e=0;e<f.length;e++)d[f[e].charCodeAt(0)]=e;d["-".charCodeAt(0)]=f.indexOf("+"),d["_".charCodeAt(0)]=f.indexOf("/");var p=r(20241),g=r(22274);function m(e,t){switch(t){case o.BIGINT:return e.toBigInt();case o.NUMBER:return e.toNumber();default:return e.toString()}}class b{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,r){if(!e){let e=h(r);throw"number"!=e&&"boolean"!=e||(e=r.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,r){this.prepare();const s=[];for(const[a,u]of Object.entries(e)){const e=this.fMap[a];if(!e){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${a}`);continue}const c=e.localName;let l;if(e.oneof){if(null===u&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(s.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);s.push(e.oneof),l=t[e.oneof]={oneofKind:c}}else l=t;if("map"==e.kind){if(null===u)continue;this.assert(null!==(n=u)&&"object"==typeof n&&!Array.isArray(n),e.name,u);const t=l[c];for(const[s,n]of Object.entries(u)){let a;switch(this.assert(null!==n,e.name+" map value",null),e.V.kind){case"message":a=e.V.T().internalJsonRead(n,r);break;case"enum":if(a=this.enum(e.V.T(),n,e.name,r.ignoreUnknownFields),!1===a)continue;break;case"scalar":a=this.scalar(n,e.V.T,e.V.L,e.name)}this.assert(void 0!==a,e.name+" map value",n);let u=s;e.K==i.BOOL&&(u="true"==u||"false"!=u&&u),u=this.scalar(u,e.K,o.STRING,e.name).toString(),t[u]=a}}else if(e.repeat){if(null===u)continue;this.assert(Array.isArray(u),e.name,u);const t=l[c];for(const s of u){let n;switch(this.assert(null!==s,e.name,null),e.kind){case"message":n=e.T().internalJsonRead(s,r);break;case"enum":if(n=this.enum(e.T(),s,e.name,r.ignoreUnknownFields),!1===n)continue;break;case"scalar":n=this.scalar(s,e.T,e.L,e.name)}this.assert(void 0!==n,e.name,u),t.push(n)}}else switch(e.kind){case"message":if(null===u&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}l[c]=e.T().internalJsonRead(u,r,l[c]);break;case"enum":let t=this.enum(e.T(),u,e.name,r.ignoreUnknownFields);if(!1===t)continue;l[c]=t;break;case"scalar":l[c]=this.scalar(u,e.T,e.L,e.name)}}var n}enum(e,t,r,s){if("google.protobuf.NullValue"==e[0]&&(0,g.vA)(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return(0,g.vA)(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${t}.`),t;case"string":let n=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(n=t.substring(e[2].length));let i=e[1][n];return(void 0!==i||!s)&&((0,g.vA)("number"==typeof i,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${t}".`),i)}(0,g.vA)(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,r,s){let n;try{switch(t){case i.DOUBLE:case i.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){n="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){n="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let s=Number(e);if(Number.isNaN(s)){n="not a number";break}if(!Number.isFinite(s)){n="too large or small";break}return t==i.FLOAT&&(0,g.wO)(s),s;case i.INT32:case i.FIXED32:case i.SFIXED32:case i.SINT32:case i.UINT32:if(null===e)return 0;let o;if("number"==typeof e?o=e:""===e?n="empty string":"string"==typeof e&&(e.trim().length!==e.length?n="extra whitespace":o=Number(e)),void 0===o)break;return t==i.UINT32?(0,g.e1)(o):(0,g.bn)(o),o;case i.INT64:case i.SFIXED64:case i.SINT64:if(null===e)return m(p.hY.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return m(p.hY.from(e),r);case i.FIXED64:case i.UINT64:if(null===e)return m(p.eA.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return m(p.eA.from(e),r);case i.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case i.STRING:if(null===e)return"";if("string"!=typeof e){n="extra whitespace";break}try{encodeURIComponent(e)}catch(n){n="invalid UTF8";break}return e;case i.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let r,s=new Uint8Array(t),n=0,i=0,o=0;for(let t=0;t<e.length;t++){if(r=d[e.charCodeAt(t)],void 0===r)switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=r,i=1;break;case 1:s[n++]=o<<2|(48&r)>>4,o=r,i=2;break;case 2:s[n++]=(15&o)<<4|(60&r)>>2,o=r,i=3;break;case 3:s[n++]=(3&o)<<6|r,i=0}}if(1==i)throw Error("invalid base64 string.");return s.subarray(0,n)}(e)}}catch(e){n=e.message}this.assert(!1,s+(n?" - "+n:""),e)}}class y{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const r={},s=e;for(const e of this.fields){if(!e.oneof){let n=this.field(e,s[e.localName],t);void 0!==n&&(r[t.useProtoFieldName?e.name:e.jsonName]=n);continue}const n=s[e.oneof];if(n.oneofKind!==e.localName)continue;const i="scalar"==e.kind||"enum"==e.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let o=this.field(e,n[e.localName],i);(0,g.vA)(void 0!==o),r[t.useProtoFieldName?e.name:e.jsonName]=o}return r}field(e,t,r){let s;if("map"==e.kind){(0,g.vA)("object"==typeof t&&null!==t);const n={};switch(e.V.kind){case"scalar":for(const[r,s]of Object.entries(t)){const t=this.scalar(e.V.T,s,e.name,!1,!0);(0,g.vA)(void 0!==t),n[r.toString()]=t}break;case"message":const s=e.V.T();for(const[i,o]of Object.entries(t)){const t=this.message(s,o,e.name,r);(0,g.vA)(void 0!==t),n[i.toString()]=t}break;case"enum":const i=e.V.T();for(const[s,o]of Object.entries(t)){(0,g.vA)(void 0===o||"number"==typeof o);const t=this.enum(i,o,e.name,!1,!0,r.enumAsInteger);(0,g.vA)(void 0!==t),n[s.toString()]=t}}(r.emitDefaultValues||Object.keys(n).length>0)&&(s=n)}else if(e.repeat){(0,g.vA)(Array.isArray(t));const n=[];switch(e.kind){case"scalar":for(let r=0;r<t.length;r++){const s=this.scalar(e.T,t[r],e.name,e.opt,!0);(0,g.vA)(void 0!==s),n.push(s)}break;case"enum":const s=e.T();for(let i=0;i<t.length;i++){(0,g.vA)(void 0===t[i]||"number"==typeof t[i]);const o=this.enum(s,t[i],e.name,e.opt,!0,r.enumAsInteger);(0,g.vA)(void 0!==o),n.push(o)}break;case"message":const i=e.T();for(let s=0;s<t.length;s++){const o=this.message(i,t[s],e.name,r);(0,g.vA)(void 0!==o),n.push(o)}}(r.emitDefaultValues||n.length>0||r.emitDefaultValues)&&(s=n)}else switch(e.kind){case"scalar":s=this.scalar(e.T,t,e.name,e.opt,r.emitDefaultValues);break;case"enum":s=this.enum(e.T(),t,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":s=this.message(e.T(),t,e.name,r)}return s}enum(e,t,r,s,n,i){if("google.protobuf.NullValue"==e[0])return n||s?null:void 0;if(void 0!==t){if(0!==t||n||s)return(0,g.vA)("number"==typeof t),(0,g.vA)(Number.isInteger(t)),i||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else(0,g.vA)(s)}message(e,t,r,s){return void 0===t?s.emitDefaultValues?null:void 0:e.internalJsonWrite(t,s)}scalar(e,t,r,s,n){if(void 0===t)return void(0,g.vA)(s);const o=n||s;switch(e){case i.INT32:case i.SFIXED32:case i.SINT32:return 0===t?o?0:void 0:((0,g.bn)(t),t);case i.FIXED32:case i.UINT32:return 0===t?o?0:void 0:((0,g.e1)(t),t);case i.FLOAT:(0,g.wO)(t);case i.DOUBLE:return 0===t?o?0:void 0:((0,g.vA)("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case i.STRING:return""===t?o?"":void 0:((0,g.vA)("string"==typeof t),t);case i.BOOL:return!1===t?!o&&void 0:((0,g.vA)("boolean"==typeof t),t);case i.UINT64:case i.FIXED64:(0,g.vA)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=p.eA.from(t);if(e.isZero()&&!o)return;return e.toString();case i.INT64:case i.SFIXED64:case i.SINT64:(0,g.vA)("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let r=p.hY.from(t);if(r.isZero()&&!o)return;return r.toString();case i.BYTES:return(0,g.vA)(t instanceof Uint8Array),t.byteLength?function(e){let t,r="",s=0,n=0;for(let i=0;i<e.length;i++)switch(t=e[i],s){case 0:r+=f[t>>2],n=(3&t)<<4,s=1;break;case 1:r+=f[n|t>>4],n=(15&t)<<2,s=2;break;case 2:r+=f[n|t>>6],r+=f[63&t],s=0}return s&&(r+=f[n],r+="=",1==s&&(r+="=")),r}(t):o?"":void 0}}}var F=r(77688);function _(e,t=o.STRING){switch(e){case i.BOOL:return!1;case i.UINT64:case i.FIXED64:return m(p.eA.ZERO,t);case i.INT64:case i.SFIXED64:case i.SINT64:return m(p.hY.ZERO,t);case i.DOUBLE:case i.FLOAT:return 0;case i.BYTES:return new Uint8Array(0);case i.STRING:return"";default:return 0}}class v{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,r,s){this.prepare();const n=void 0===s?e.len:e.pos+s;for(;e.pos<n;){const[s,n]=e.tag(),o=this.fieldNoToField.get(s);if(!o){let i=r.readUnknownField;if("throw"==i)throw new Error(`Unknown field ${s} (wire type ${n}) for ${this.info.typeName}`);let o=e.skip(n);!1!==i&&(!0===i?F.f$.onRead:i)(this.info.typeName,t,s,n,o);continue}let a=t,u=o.repeat,c=o.localName;switch(o.oneof&&(a=a[o.oneof],a.oneofKind!==c&&(a=t[o.oneof]={oneofKind:c})),o.kind){case"scalar":case"enum":let t="enum"==o.kind?i.INT32:o.T,s="scalar"==o.kind?o.L:void 0;if(u){let r=a[c];if(n==F.O0.LengthDelimited&&t!=i.STRING&&t!=i.BYTES){let n=e.uint32()+e.pos;for(;e.pos<n;)r.push(this.scalar(e,t,s))}else r.push(this.scalar(e,t,s))}else a[c]=this.scalar(e,t,s);break;case"message":if(u){let t=a[c],s=o.T().internalBinaryRead(e,e.uint32(),r);t.push(s)}else a[c]=o.T().internalBinaryRead(e,e.uint32(),r,a[c]);break;case"map":let[l,h]=this.mapEntry(o,e,r);a[c][l]=h}}}mapEntry(e,t,r){let s,n,a=t.uint32(),u=t.pos+a;for(;t.pos<u;){let[a,u]=t.tag();switch(a){case 1:s=e.K==i.BOOL?t.bool().toString():this.scalar(t,e.K,o.STRING);break;case 2:switch(e.V.kind){case"scalar":n=this.scalar(t,e.V.T,e.V.L);break;case"enum":n=t.int32();break;case"message":n=e.V.T().internalBinaryRead(t,t.uint32(),r)}break;default:throw new Error(`Unknown field ${a} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===s){let t=_(e.K);s=e.K==i.BOOL?t.toString():t}if(void 0===n)switch(e.V.kind){case"scalar":n=_(e.V.T,e.V.L);break;case"enum":n=0;break;case"message":n=e.V.T().create()}return[s,n]}scalar(e,t,r){switch(t){case i.INT32:return e.int32();case i.STRING:return e.string();case i.BOOL:return e.bool();case i.DOUBLE:return e.double();case i.FLOAT:return e.float();case i.INT64:return m(e.int64(),r);case i.UINT64:return m(e.uint64(),r);case i.FIXED64:return m(e.fixed64(),r);case i.FIXED32:return e.fixed32();case i.BYTES:return e.bytes();case i.UINT32:return e.uint32();case i.SFIXED32:return e.sfixed32();case i.SFIXED64:return m(e.sfixed64(),r);case i.SINT32:return e.sint32();case i.SINT64:return m(e.sint64(),r)}}}class I{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,r){this.prepare();for(const s of this.fields){let n,o,u=s.repeat,c=s.localName;if(s.oneof){const t=e[s.oneof];if(t.oneofKind!==c)continue;n=t[c],o=!0}else n=e[c],o=!1;switch(s.kind){case"scalar":case"enum":let e="enum"==s.kind?i.INT32:s.T;if(u)if((0,g.vA)(Array.isArray(n)),u==a.PACKED)this.packed(t,e,s.no,n);else for(const r of n)this.scalar(t,e,s.no,r,!0);else void 0===n?(0,g.vA)(s.opt):this.scalar(t,e,s.no,n,o||s.opt);break;case"message":if(u){(0,g.vA)(Array.isArray(n));for(const e of n)this.message(t,r,s.T(),s.no,e)}else this.message(t,r,s.T(),s.no,n);break;case"map":(0,g.vA)("object"==typeof n&&null!==n);for(const[e,i]of Object.entries(n))this.mapEntry(t,r,s,e,i)}}let s=r.writeUnknownFields;!1!==s&&(!0===s?F.f$.onWrite:s)(this.info.typeName,e,t)}mapEntry(e,t,r,s,n){e.tag(r.no,F.O0.LengthDelimited),e.fork();let o=s;switch(r.K){case i.INT32:case i.FIXED32:case i.UINT32:case i.SFIXED32:case i.SINT32:o=Number.parseInt(s);break;case i.BOOL:(0,g.vA)("true"==s||"false"==s),o="true"==s}switch(this.scalar(e,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,n,!0);break;case"enum":this.scalar(e,i.INT32,2,n,!0);break;case"message":this.message(e,t,r.V.T(),2,n)}e.join()}message(e,t,r,s,n){void 0!==n&&(r.internalBinaryWrite(n,e.tag(s,F.O0.LengthDelimited).fork(),t),e.join())}scalar(e,t,r,s,n){let[i,o,a]=this.scalarInfo(t,s);a&&!n||(e.tag(r,i),e[o](s))}packed(e,t,r,s){if(!s.length)return;(0,g.vA)(t!==i.BYTES&&t!==i.STRING),e.tag(r,F.O0.LengthDelimited),e.fork();let[,n]=this.scalarInfo(t);for(let t=0;t<s.length;t++)e[n](s[t]);e.join()}scalarInfo(e,t){let r,s=F.O0.Varint,n=void 0===t,o=0===t;switch(e){case i.INT32:r="int32";break;case i.STRING:o=n||!t.length,s=F.O0.LengthDelimited,r="string";break;case i.BOOL:o=!1===t,r="bool";break;case i.UINT32:r="uint32";break;case i.DOUBLE:s=F.O0.Bit64,r="double";break;case i.FLOAT:s=F.O0.Bit32,r="float";break;case i.INT64:o=n||p.hY.from(t).isZero(),r="int64";break;case i.UINT64:o=n||p.eA.from(t).isZero(),r="uint64";break;case i.FIXED64:o=n||p.eA.from(t).isZero(),s=F.O0.Bit64,r="fixed64";break;case i.BYTES:o=n||!t.byteLength,s=F.O0.LengthDelimited,r="bytes";break;case i.FIXED32:s=F.O0.Bit32,r="fixed32";break;case i.SFIXED32:s=F.O0.Bit32,r="sfixed32";break;case i.SFIXED64:o=n||p.hY.from(t).isZero(),s=F.O0.Bit64,r="sfixed64";break;case i.SINT32:r="sint32";break;case i.SINT64:o=n||p.hY.from(t).isZero(),r="sint64"}return[s,r,n||o]}}function S(e,t,r){let s,n,i=r;for(let r of e.fields){let e=r.localName;if(r.oneof){const o=i[r.oneof];if(null==(null==o?void 0:o.oneofKind))continue;if(s=o[e],n=t[r.oneof],n.oneofKind=o.oneofKind,null==s){delete n[e];continue}}else if(s=i[e],n=t,null==s)continue;switch(r.repeat&&(n[e].length=s.length),r.kind){case"scalar":case"enum":if(r.repeat)for(let t=0;t<s.length;t++)n[e][t]=s[t];else n[e]=s;break;case"message":let t=r.T();if(r.repeat)for(let r=0;r<s.length;r++)n[e][r]=t.create(s[r]);else void 0===n[e]?n[e]=t.create(s):t.mergePartial(n[e],s);break;case"map":switch(r.V.kind){case"scalar":case"enum":Object.assign(n[e],s);break;case"message":let t=r.V.T();for(let r of Object.keys(s))n[e][r]=t.create(s[r])}}}}const w={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},k={ignoreUnknownFields:!1},Y=Object.values;function N(e,t,r){if(t===r)return!0;if(e!==i.BYTES)return!1;let s=t,n=r;if(s.length!==n.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!=n[e])return!1;return!0}function T(e,t,r){if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!N(e,t[s],r[s]))return!1;return!0}function E(e,t,r){if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!e.equals(t[s],r[s]))return!1;return!0}var O=r(34589),x=r(80945);const X=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class R{constructor(e,t,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(u),this.options=null!=r?r:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},X),{[s]:{value:this}})),this.refTypeCheck=new l(this),this.refJsonReader=new b(this),this.refJsonWriter=new y(this),this.refBinReader=new v(this),this.refBinWriter=new I(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},s,{value:e});for(let r of e.fields){let e=r.localName;if(!r.opt)if(r.oneof)t[r.oneof]={oneofKind:void 0};else if(r.repeat)t[e]=[];else switch(r.kind){case"scalar":t[e]=_(r.T,r.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&S(this,t,e),t}clone(e){let t=this.create();return S(this,t,e),t}equals(e,t){return function(e,t,r){if(t===r)return!0;if(!t||!r)return!1;for(let s of e.fields){let e=s.localName,n=s.oneof?t[s.oneof][e]:t[e],o=s.oneof?r[s.oneof][e]:r[e];switch(s.kind){case"enum":case"scalar":let e="enum"==s.kind?i.INT32:s.T;if(!(s.repeat?T(e,n,o):N(e,n,o)))return!1;break;case"map":if(!("message"==s.V.kind?E(s.V.T(),Y(n),Y(o)):T("enum"==s.V.kind?i.INT32:s.V.T,Y(n),Y(o))))return!1;break;case"message":let t=s.T();if(!(s.repeat?E(t,n,o):t.equals(n,o)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){S(this,e,t)}fromBinary(e,t){let r=(0,x.e)(t);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},k),e):k}(t))}fromJsonString(e,t){let r=JSON.parse(e);return this.fromJson(r,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},w),e):w}(t))}toJsonString(e,t){var r;let s=this.toJson(e,t);return JSON.stringify(s,null,null!==(r=null==t?void 0:t.prettySpaces)&&void 0!==r?r:0)}toBinary(e,t){let r=(0,O.d)(t);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,t,r){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let s=null!=r?r:this.create();return this.refJsonReader.read(e,s,t),s}throw new Error(`Unable to parse message ${this.typeName} from JSON ${h(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,r){return this.refBinWriter.write(e,t,r),t}internalBinaryRead(e,t,r,s){let n=null!=s?s:this.create();return this.refBinReader.read(e,n,r,t),n}}const M=new class extends R{constructor(){super("SyncRequest",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>D},{no:2,name:"userId",kind:"scalar",T:9},{no:3,name:"nodeId",kind:"scalar",T:9},{no:4,name:"merkleTree",kind:"scalar",T:9}])}},A=new class extends R{constructor(){super("SyncResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>D},{no:2,name:"merkleTree",kind:"scalar",T:9}])}},D=new class extends R{constructor(){super("EncryptedMessage",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:12}])}},P=new class extends R{constructor(){super("MessageContent",[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"row",kind:"scalar",T:9},{no:3,name:"column",kind:"scalar",T:9},{no:4,name:"stringValue",kind:"scalar",oneof:"value",T:9},{no:5,name:"numberValue",kind:"scalar",oneof:"value",T:9},{no:6,name:"bytesValue",kind:"scalar",oneof:"value",T:12},{no:7,name:"jsonValue",kind:"scalar",oneof:"value",T:9}])}}},95906:(e,t,r)=>{r.d(t,{E:()=>s});const s="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},64537:(e,t,r)=>{function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function n(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!i(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){o(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(t,{CG:()=>u,aY:()=>i,ai:()=>s,ee:()=>o,lc:()=>n,t2:()=>a})},95107:(e,t,r)=>{r.d(t,{EY:()=>v});var s=r(64537),n=r(92075);const i=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),o=i("expand 16-byte k"),a=i("expand 32-byte k"),u=(0,n.DH)(o),c=(0,n.DH)(a);function l(e,t){return e<<t|e>>>32-t}function h(e){return e.byteOffset%4==0}c.slice();const f=2**32-1,d=new Uint32Array;function p(e,t){const{allowShortKeys:r,extendNonceFn:i,counterLength:o,counterRight:a,rounds:l}=(0,n.tY)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw new Error("core must be a function");return(0,s.ai)(o),(0,s.ai)(l),(0,s.lc)(a),(0,s.lc)(r),(t,p,g,m,b=0)=>{(0,s.ee)(t),(0,s.ee)(p),(0,s.ee)(g);const y=g.length;if(m||(m=new Uint8Array(y)),(0,s.ee)(m),(0,s.ai)(b),b<0||b>=f)throw new Error("arx: counter overflow");if(m.length<y)throw new Error(`arx: output (${m.length}) is shorter than data (${y})`);const F=[];let _,v,I=t.length;if(32===I)_=t.slice(),F.push(_),v=c;else{if(16!==I||!r)throw new Error(`arx: invalid 32-byte key, got length=${I}`);_=new Uint8Array(32),_.set(t),_.set(t,16),v=u,F.push(_)}h(p)||(p=p.slice(),F.push(p));const S=(0,n.DH)(_);if(i){if(24!==p.length)throw new Error("arx: extended nonce must be 24 bytes");i(v,S,(0,n.DH)(p.subarray(0,16)),S),p=p.subarray(16)}const w=16-o;if(w!==p.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(12!==w){const e=new Uint8Array(12);e.set(p,a?0:12-p.length),p=e,F.push(p)}const k=(0,n.DH)(p);for(function(e,t,r,s,i,o,a,u){const c=i.length,l=new Uint8Array(64),p=(0,n.DH)(l),g=h(i)&&h(o),m=g?(0,n.DH)(i):d,b=g?(0,n.DH)(o):d;for(let n=0;n<c;a++){if(e(t,r,s,p,a,u),a>=f)throw new Error("arx: counter overflow");const h=Math.min(64,c-n);if(g&&64===h){const e=n/4;if(n%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,b[t]=m[t]^p[r];n+=64}else{for(let e,t=0;t<h;t++)e=n+t,o[e]=i[e]^l[t];n+=h}}}(e,v,S,k,g,m,b,l);F.length>0;)F.pop().fill(0);return m}}const g=(e,t)=>255&e[t++]|(255&e[t++])<<8;class m{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,n.ZJ)(e),(0,s.ee)(e,32);const t=g(e,0),r=g(e,2),i=g(e,4),o=g(e,6),a=g(e,8),u=g(e,10),c=g(e,12),l=g(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|a<<12),this.r[5]=a>>>1&8190,this.r[6]=8191&(a>>>14|u<<2),this.r[7]=8065&(u>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=g(e,16+2*t)}process(e,t,r=!1){const s=r?0:2048,{h:n,r:i}=this,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],h=i[5],f=i[6],d=i[7],p=i[8],m=i[9],b=g(e,t+0),y=g(e,t+2),F=g(e,t+4),_=g(e,t+6),v=g(e,t+8),I=g(e,t+10),S=g(e,t+12),w=g(e,t+14);let k=n[0]+(8191&b),Y=n[1]+(8191&(b>>>13|y<<3)),N=n[2]+(8191&(y>>>10|F<<6)),T=n[3]+(8191&(F>>>7|_<<9)),E=n[4]+(8191&(_>>>4|v<<12)),O=n[5]+(v>>>1&8191),x=n[6]+(8191&(v>>>14|I<<2)),X=n[7]+(8191&(I>>>11|S<<5)),R=n[8]+(8191&(S>>>8|w<<8)),M=n[9]+(w>>>5|s),A=0,D=A+k*o+Y*(5*m)+N*(5*p)+T*(5*d)+E*(5*f);A=D>>>13,D&=8191,D+=O*(5*h)+x*(5*l)+X*(5*c)+R*(5*u)+M*(5*a),A+=D>>>13,D&=8191;let P=A+k*a+Y*o+N*(5*m)+T*(5*p)+E*(5*d);A=P>>>13,P&=8191,P+=O*(5*f)+x*(5*h)+X*(5*l)+R*(5*c)+M*(5*u),A+=P>>>13,P&=8191;let C=A+k*u+Y*a+N*o+T*(5*m)+E*(5*p);A=C>>>13,C&=8191,C+=O*(5*d)+x*(5*f)+X*(5*h)+R*(5*l)+M*(5*c),A+=C>>>13,C&=8191;let j=A+k*c+Y*u+N*a+T*o+E*(5*m);A=j>>>13,j&=8191,j+=O*(5*p)+x*(5*d)+X*(5*f)+R*(5*h)+M*(5*l),A+=j>>>13,j&=8191;let W=A+k*l+Y*c+N*u+T*a+E*o;A=W>>>13,W&=8191,W+=O*(5*m)+x*(5*p)+X*(5*d)+R*(5*f)+M*(5*h),A+=W>>>13,W&=8191;let B=A+k*h+Y*l+N*c+T*u+E*a;A=B>>>13,B&=8191,B+=O*o+x*(5*m)+X*(5*p)+R*(5*d)+M*(5*f),A+=B>>>13,B&=8191;let q=A+k*f+Y*h+N*l+T*c+E*u;A=q>>>13,q&=8191,q+=O*a+x*o+X*(5*m)+R*(5*p)+M*(5*d),A+=q>>>13,q&=8191;let z=A+k*d+Y*f+N*h+T*l+E*c;A=z>>>13,z&=8191,z+=O*u+x*a+X*o+R*(5*m)+M*(5*p),A+=z>>>13,z&=8191;let L=A+k*p+Y*d+N*f+T*h+E*l;A=L>>>13,L&=8191,L+=O*c+x*u+X*a+R*o+M*(5*m),A+=L>>>13,L&=8191;let H=A+k*m+Y*p+N*d+T*f+E*h;A=H>>>13,H&=8191,H+=O*l+x*c+X*u+R*a+M*o,A+=H>>>13,H&=8191,A=(A<<2)+A|0,A=A+D|0,D=8191&A,A>>>=13,P+=A,n[0]=D,n[1]=P,n[2]=C,n[3]=j,n[4]=W,n[5]=B,n[6]=q,n[7]=z,n[8]=L,n[9]=H}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=s,s=e[t]>>>13,e[t]&=8191;e[0]+=5*s,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+s,s=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^s)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let r=1;r<8;r++)i=(e[r]+t[r]|0)+(i>>>16)|0,e[r]=65535&i}update(e){(0,s.t2)(this);const{buffer:t,blockLen:r}=this,i=(e=(0,n.ZJ)(e)).length;for(let s=0;s<i;){const n=Math.min(r-this.pos,i-s);if(n!==r)t.set(e.subarray(s,s+n),this.pos),this.pos+=n,s+=n,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){(0,s.t2)(this),(0,s.CG)(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const b=function(e){const t=(t,r)=>e(r).update((0,n.ZJ)(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new m(e)));function y(e,t,r,s,n,i=20){let o=e[0],a=t[0],u=t[1],c=t[2],h=t[3],f=e[1],d=r[0],p=r[1],g=n,m=e[2],b=t[4],y=t[5],F=t[6],_=t[7],v=e[3],I=o,S=a,w=u,k=c,Y=h,N=f,T=d,E=p,O=g,x=0,X=m,R=b,M=y,A=F,D=_,P=v;for(let e=0;e<i;e+=2)Y^=l(I+M|0,7),O^=l(Y+I|0,9),M^=l(O+Y|0,13),I^=l(M+O|0,18),x^=l(N+S|0,7),A^=l(x+N|0,9),S^=l(A+x|0,13),N^=l(S+A|0,18),D^=l(X+T|0,7),w^=l(D+X|0,9),T^=l(w+D|0,13),X^=l(T+w|0,18),k^=l(P+R|0,7),E^=l(k+P|0,9),R^=l(E+k|0,13),P^=l(R+E|0,18),S^=l(I+k|0,7),w^=l(S+I|0,9),k^=l(w+S|0,13),I^=l(k+w|0,18),T^=l(N+Y|0,7),E^=l(T+N|0,9),Y^=l(E+T|0,13),N^=l(Y+E|0,18),R^=l(X+x|0,7),O^=l(R+X|0,9),x^=l(O+R|0,13),X^=l(x+O|0,18),M^=l(P+D|0,7),A^=l(M+P|0,9),D^=l(A+M|0,13),P^=l(D+A|0,18);let C=0;s[C++]=o+I|0,s[C++]=a+S|0,s[C++]=u+w|0,s[C++]=c+k|0,s[C++]=h+Y|0,s[C++]=f+N|0,s[C++]=d+T|0,s[C++]=p+E|0,s[C++]=g+O|0,s[C++]=0+x|0,s[C++]=m+X|0,s[C++]=b+R|0,s[C++]=y+M|0,s[C++]=F+A|0,s[C++]=_+D|0,s[C++]=v+P|0}const F=p(y,{counterRight:!0,extendNonceFn:function(e,t,r,s){let n=e[0],i=t[0],o=t[1],a=t[2],u=t[3],c=e[1],h=r[0],f=r[1],d=r[2],p=r[3],g=e[2],m=t[4],b=t[5],y=t[6],F=t[7],_=e[3];for(let e=0;e<20;e+=2)u^=l(n+b|0,7),d^=l(u+n|0,9),b^=l(d+u|0,13),n^=l(b+d|0,18),p^=l(c+i|0,7),y^=l(p+c|0,9),i^=l(y+p|0,13),c^=l(i+y|0,18),F^=l(g+h|0,7),o^=l(F+g|0,9),h^=l(o+F|0,13),g^=l(h+o|0,18),a^=l(_+m|0,7),f^=l(a+_|0,9),m^=l(f+a|0,13),_^=l(m+f|0,18),i^=l(n+a|0,7),o^=l(i+n|0,9),a^=l(o+i|0,13),n^=l(a+o|0,18),h^=l(c+u|0,7),f^=l(h+c|0,9),u^=l(f+h|0,13),c^=l(u+f|0,18),m^=l(g+p|0,7),d^=l(m+g|0,9),p^=l(d+m|0,13),g^=l(p+d|0,18),b^=l(_+F|0,7),y^=l(b+_|0,9),F^=l(y+b|0,13),_^=l(F+y|0,18);let v=0;s[v++]=n,s[v++]=c,s[v++]=g,s[v++]=_,s[v++]=h,s[v++]=f,s[v++]=d,s[v++]=p}}),_=(0,n.qn)({blockSize:64,nonceLength:24,tagLength:16},((e,t)=>{const r=16;return(0,s.ee)(e,32),(0,s.ee)(t,24),{encrypt:(n,i)=>{(0,s.ee)(n);const o=n.length+32;i?(0,s.ee)(i,o):i=new Uint8Array(o),i.set(n,32),F(e,t,i,i);const a=i.subarray(0,32),u=b(i.subarray(32),a);return i.set(u,r),i.subarray(0,r).fill(0),i.subarray(r)},decrypt:i=>{(0,s.ee)(i);const o=i.length;if(o<r)throw new Error("encrypted data should be at least 16 bytes");const a=new Uint8Array(o+r);a.set(i,r);const u=F(e,t,new Uint8Array(32)),c=b(a.subarray(32),u);if(!(0,n.ex)(a.subarray(16,32),c))throw new Error("invalid tag");const l=F(e,t,a);return l.subarray(0,32).fill(0),u.fill(0),l.subarray(32)}}}));function v(e,t){const r=_(e,t);return{seal:r.encrypt,open:r.decrypt}}},92075:(e,t,r)=>{r.d(t,{DH:()=>n,Id:()=>o,ZJ:()=>i,ex:()=>u,qn:()=>c,tY:()=>a});var s=r(64537);const n=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function i(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!(0,s.aY)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}function o(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,s.ee)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r}function a(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)}function u(e,t){if(e.length!==t.length)return!1;let r=0;for(let s=0;s<e.length;s++)r|=e[s]^t[s];return 0===r}const c=(e,t)=>(Object.assign(t,e),t)},75176:(e,t,r)=>{r.d(t,{Di:()=>Y,GP:()=>k,L8:()=>p,S8:()=>F,cI:()=>N,ep:()=>T,oB:()=>S,rs:()=>v,s5:()=>d,sH:()=>w});var s=r(43977),n=r(35309),i=r(61369),o=r(67337),a=r(83845),u=r(77948),c=r(53533),l=r(56572);const h=Symbol.for("effect/BigDecimal"),f={[h]:h,[o.HR](){const e=F(this);return(0,i.Fs)(o.tW(e.value),o.kg(o.ai(e.scale)),o.PO(this))},[s.HR](e){return d(e)&&I(this,e)},toString(){return`BigDecimal(${k(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[a.FX](){return this.toJSON()},pipe(){return(0,c.t)(this,arguments)}},d=e=>(0,l.i5)(e,h),p=(e,t)=>{const r=Object.create(f);return r.value=e,r.scale=t,r},g=(e,t)=>{if(e!==m&&e%b===m)throw new RangeError("Value must be normalized");const r=p(e,t);return r.normalized=r,r},m=BigInt(0),b=BigInt(10),y=g(m,0),F=e=>{if(void 0===e.normalized)if(e.value===m)e.normalized=y;else{const t=`${e.value}`;let r=0;for(let e=t.length-1;e>=0&&"0"===t[e];e--)r++;0===r&&(e.normalized=e);const s=BigInt(t.substring(0,t.length-r)),n=e.scale-r;e.normalized=g(s,n)}return e.normalized},_=(e,t)=>t>e.scale?p(e.value*b**BigInt(t-e.scale),t):t<e.scale?p(e.value/b**BigInt(e.scale-t),t):e,v=n.L8(((e,t)=>e.scale>t.scale?_(t,e.scale).value===e.value:e.scale<t.scale?_(e,t.scale).value===t.value:e.value===t.value)),I=(0,i.XY)(2,((e,t)=>v(e,t))),S=e=>{const[t,r=""]=`${e}`.split(".");return p(BigInt(`${t}${r}`),r.length)},w=e=>{let t,r;const s=e.search(/\./);if(-1!==s){const n=e.slice(0,s),i=e.slice(s+1);t=`${n}${i}`,r=i.length}else t=e,r=0;return""===t?u.zN(y):/^(?:\+|-)?\d+$/.test(t)?u.zN(p(BigInt(t),r)):u.dv()},k=e=>{const t=e.value<m,r=t?`${e.value}`.substring(1):`${e.value}`;let s,n;if(e.scale>=r.length)s="0",n="0".repeat(e.scale-r.length)+r;else{const t=r.length-e.scale;if(t>r.length){const e=t-r.length;s=`${r}${"0".repeat(e)}`,n=""}else n=r.slice(t),s=r.slice(0,t)}const i=""===n?s:`${s}.${n}`;return t?`-${i}`:i},Y=e=>Number(k(e)),N=e=>e.value<m,T=e=>e.value>m},37694:(e,t,r)=>{r.d(t,{Ro:()=>o,oB:()=>u,sH:()=>a});var s=r(35309),n=r(77948),i=r(59877);r(56572).sI,s.o,i.o;const o=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?n.dv():n.zN(Number(e)),a=e=>{try{return""===e.trim()?n.dv():n.zN(BigInt(e))}catch(e){return n.dv()}},u=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return n.dv();try{return n.zN(BigInt(e))}catch(e){return n.dv()}}},83733:(e,t,r)=>{r.d(t,{AU:()=>i});var s=r(35309),n=r(59877);r(56572).Lm,s.zM,n.zM;const i=e=>!e},20634:(e,t,r)=>{r.d(t,{Al:()=>b,F_:()=>a,G:()=>u,Ie:()=>i,Ki:()=>d,Mr:()=>y,Tj:()=>p,VY:()=>c,fJ:()=>o,fT:()=>l,iw:()=>g,nA:()=>m,t9:()=>h,vE:()=>f});var s=r(8197),n=r(72620);s.PX,n.R8K,n.jo7,n.owM,n.VwM,n.PDv,n.g1R,n.igQ,n.VbV,n.Wc6;const i=s.Ie,o=s.fJ,a=s.F_,u=s.G,c=(s._7,s.il,s.Aj,s.uH,s.rv,s.VY),l=(s.Ep,s.yl,s.I2,s.Ej,s.Im,s.N6,s.Jq,s.fT),h=s.t9,f=(s.e9,s.RU,s.ml,s.od,s.vE),d=s.Ki,p=(s.Co,s.FQ,s.AW,s.Q6,s.el,s.Rw,s.as,s.Tj),g=(s.qI,s.hg,s.Bq,s.gR,n.ReC),m=(n.R_7,s.I6,s.pb,s.YW,s.TS,s.og,n.s2,n.OTT,n.nAV),b=(n.xt1,n.kJg,n.QRo,n.AlI),y=n.MrQ;n.nv8,n.Uis,n.sAm,n.THF,n.p2e,s.j9,s.Yu,n.RkE},28420:(e,t,r)=>{r.d(t,{$v:()=>E,BC:()=>O,BE:()=>k,Bq:()=>W,HV:()=>J,Hd:()=>M,Hs:()=>x,Ie:()=>F,Im:()=>B,Iv:()=>N,J_:()=>q,L8:()=>_,O6:()=>Q,OM:()=>K,OY:()=>te,Rx:()=>Z,TS:()=>ie,Tj:()=>V,Ts:()=>I,XK:()=>oe,cs:()=>G,d5:()=>z,gI:()=>U,gv:()=>R,h3:()=>w,i8:()=>ne,mA:()=>C,of:()=>v,pb:()=>P,qI:()=>j,s:()=>X,tt:()=>$,u2:()=>A,v4:()=>H,v6:()=>ee,x1:()=>D,y1:()=>se,yL:()=>b,z1:()=>L});var s=r(58600),n=r(43977),i=r(35309),o=r(61369),a=r(67337),u=r(83845),c=r(77948),l=r(53533),h=r(56572);const f=Symbol.for("effect/Chunk"),d=[],p=(e=>i.L8(((t,r)=>t.length===r.length&&w(t).every(((t,s)=>e(t,E(r,s)))))))(n.aI),g={[f]:{_A:e=>e},toString(){return(0,u.GP)(this.toJSON())},toJSON(){return{_id:"Chunk",values:w(this).map(u.U2)}},[u.FX](){return this.toJSON()},[n.HR](e){return b(e)&&p(this,e)},[a.HR](){return a.PO(this,a.YO(w(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return d[Symbol.iterator]();default:return w(this)[Symbol.iterator]()}},pipe(){return(0,l.t)(this,arguments)}},m=e=>{const t=Object.create(g);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=y,t.right=y;break;case"ISingleton":t.length=1,t.depth=0,t.left=y,t.right=y;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=y,t.right=y}return t},b=e=>(0,h.i5)(e,f),y=m({_tag:"IEmpty"}),F=()=>y,_=(...e)=>1===e.length?v(e[0]):T(e),v=e=>m({_tag:"ISingleton",a:e}),I=e=>b(e)?e:m({_tag:"IArray",array:s.Ts(e)}),S=(e,t,r)=>{switch(e.backing._tag){case"IArray":!function(e,t,r,s,n){for(let t=0;t<Math.min(e.length,0+n);t++)r[s+t-0]=e[t]}(e.backing.array,0,t,r,e.length);break;case"IConcat":S(e.left,t,r),S(e.right,t,r+e.left.length);break;case"ISingleton":t[r]=e.backing.a;break;case"ISlice":{let s=0,n=r;for(;s<e.length;)t[n]=E(e,s),s+=1,n+=1;break}}},w=e=>{switch(e.backing._tag){case"IEmpty":return d;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return S(e,t,0),e.backing={_tag:"IArray",array:t},e.left=y,e.right=y,e.depth=0,t}}},k=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return m({_tag:"IArray",array:s.BE(e.backing.array)});case"IConcat":return m({_tag:"IConcat",left:k(e.backing.right),right:k(e.backing.left)});case"ISlice":return N(s.BE(w(e)))}},Y=(0,o.XY)(2,((e,t)=>t<0||t>=e.length?c.dv():c.zN(E(e,t)))),N=e=>m({_tag:"IArray",array:e}),T=e=>N(e),E=(0,o.XY)(2,((e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==t)throw new Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?E(e.left,t):E(e.right,t-e.left.length);case"ISlice":return E(e.backing.chunk,t+e.backing.offset)}})),O=(0,o.XY)(2,((e,t)=>A(e,v(t)))),x=(0,o.XY)(2,((e,t)=>A(v(t),e))),X=(0,o.XY)(2,((e,t)=>{if(t<=0)return y;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return m({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?m({_tag:"IConcat",left:e.left,right:X(e.right,t-e.left.length)}):X(e.left,t);default:return m({_tag:"ISlice",chunk:e,offset:0,length:t})}})),R=(0,o.XY)(2,((e,t)=>{if(t<=0)return e;if(t>=e.length)return y;switch(e.backing._tag){case"ISlice":return m({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?R(e.right,t-e.left.length):m({_tag:"IConcat",left:R(e.left,t),right:e.right});default:return m({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}})),M=(0,o.XY)(2,((e,t)=>{const r=w(e),s=r.length;let n=0;for(;n<s&&t(r[n]);)n++;return R(e,n)})),A=(0,o.XY)(2,((e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;const r=t.depth-e.depth;if(Math.abs(r)<=1)return m({_tag:"IConcat",left:e,right:t});if(r<-1){if(e.left.depth>=e.right.depth){const r=A(e.right,t);return m({_tag:"IConcat",left:e.left,right:r})}{const r=A(e.right.right,t);if(r.depth===e.depth-3){const t=m({_tag:"IConcat",left:e.right.left,right:r});return m({_tag:"IConcat",left:e.left,right:t})}{const t=m({_tag:"IConcat",left:e.left,right:e.right.left});return m({_tag:"IConcat",left:t,right:r})}}}if(t.right.depth>=t.left.depth){const r=A(e,t.left);return m({_tag:"IConcat",left:r,right:t.right})}{const r=A(e,t.left.left);if(r.depth===t.depth-3){const e=m({_tag:"IConcat",left:r,right:t.left.right});return m({_tag:"IConcat",left:e,right:t.right})}{const e=m({_tag:"IConcat",left:t.left.right,right:t.right});return m({_tag:"IConcat",left:r,right:e})}}})),D=(0,o.XY)(2,((e,t)=>N(s.x1(e,t)))),P=(0,o.XY)(2,((e,t)=>N(s.pb(e,t)))),C=(0,o.XY)(2,((e,t)=>N(s.mA(e,t)))),j=(0,o.XY)(2,((e,t)=>{if("ISingleton"===e.backing._tag)return t(e.backing.a,0);let r=y,s=0;for(const n of e)r=A(r,t(n,s++));return r})),W=j(o.D_),B=e=>0===e.length,q=e=>e.length>0,z=Y(0),L=e=>E(e,0),H=L,J=e=>Y(e,e.length-1),$=e=>E(e,e.length-1),V=(0,o.XY)(2,((e,t)=>"ISingleton"===e.backing._tag?v(t(e.backing.a,0)):N((0,o.Fs)(w(e),s.Tj(((e,r)=>t(e,r))))))),K=(0,o.XY)(3,((e,t,r)=>{const[n,i]=s.OM(e,t,r);return[n,N(i)]})),U=(0,o.XY)(2,((e,t)=>[X(e,t),R(e,t)])),G=(0,o.XY)(2,((e,t)=>{let r=0;for(const s of w(e)){if(t(s))break;r++}return U(e,r)})),Z=e=>R(e,1),Q=(0,o.XY)(2,((e,t)=>R(e,e.length-t))),ee=(0,o.XY)(2,((e,t)=>{const r=[];for(const s of w(e)){if(!t(s))break;r.push(s)}return N(r)})),te=(0,o.XY)(3,((e,t,r)=>N(s.OY(e,t,r)))),re=(0,o.XY)(2,((e,t)=>I(s.Y6(e,t)))),se=(e,t)=>e<=t?re(t-e+1,(t=>e+t)):v(e),ne=(s.gR,s.Ou,s.i8),ie=(s.g9,s.Uk,s.Kl,s.fj,s.TS),oe=s.XK},31651:(e,t,r)=>{r.d(t,{RK:()=>u,Ru:()=>o,s0:()=>a,yy:()=>i,zD:()=>c});var s=r(14969),n=r(44862);s.iu,s.L8;const i=n.yy,o=n.Ru,a=n.s0,u=n.RK,c=s.hV},89702:(e,t,r)=>{r.d(t,{$v:()=>h,Ie:()=>a,Io:()=>n,Jt:()=>l,L8:()=>u,WQ:()=>c,aE:()=>i,dz:()=>o,h1:()=>d,om:()=>f,vw:()=>p});var s=r(83768);s.Sr;const n=s.KA,i=(s.ii,s.og,s.aE),o=s.dz,a=s.Ie,u=s.L8,c=s.WQ,l=s.Jt,h=s.$v,f=s.om,d=s.h1,p=(s.Up,s.cJ,s.vw)},95181:(e,t,r)=>{r.d(t,{$D:()=>u,VK:()=>a,rN:()=>c,w3:()=>o});var s=r(72620),n=r(34951),i=r(68498);const o=n.w3,a=e=>t=>{const r=void 0===t?Object.create(i.KE):o(t);return r._tag=e,r};n.wC,n.wC;const u=function(){return class extends s.Wc6{constructor(e){super(e?.message,e?.cause?{cause:e.cause}:void 0),e&&Object.assign(this,e)}}}(),c=e=>{class t extends u{_tag=e}return t.prototype.name=e,t}},62738:(e,t,r)=>{r.d(t,{$L:()=>l,$N:()=>d,AT:()=>u,G:()=>c,L8:()=>n,Py:()=>f,Tx:()=>i,Vw:()=>o,dz:()=>p,fJ:()=>a,wt:()=>h});var s=r(72620);r(4080).FX;const n=s.WW4,i=(s.sDf,s.gn0),o=(s.$1O,s.ZI2,s.AsN),a=s.Ao,u=(s.jxG,s.FIO),c=(s.un1,s.AR8,s.lN4,s.ZM1),l=(s.bdM,s._fI),h=s.vwO,f=s.syF,d=(s.BCV,s.MIt),p=s.q_p},84073:(e,t,r)=>{r.d(t,{An:()=>L,D4:()=>y,GP:()=>J,Gx:()=>O,Hn:()=>W,MM:()=>z,QM:()=>R,SY:()=>N,Tn:()=>k,Xe:()=>q,YA:()=>E,Zr:()=>D,_3:()=>X,c$:()=>x,cF:()=>Y,cz:()=>B,kE:()=>M,n$:()=>S,ne:()=>T,rs:()=>j,tb:()=>A,v_:()=>w});var s=r(43977),n=r(61369),i=r(67337),o=r(83845),a=r(77948),u=r(53533),c=r(56572);const l=Symbol.for("effect/Duration"),h=BigInt(0),f=BigInt(24),d=BigInt(60),p=BigInt(1e3),g=BigInt(1e6),m=BigInt(1e9),b=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,y=e=>{if(S(e))return e;if((0,c.Et)(e))return T(e);if((0,c.sI)(e))return Y(e);if(Array.isArray(e)){if(2===e.length&&(0,c.Et)(e[0])&&(0,c.Et)(e[1]))return Y(BigInt(e[0])*m+BigInt(e[1]))}else if((0,c.Kg)(e)){b.lastIndex=0;const t=b.exec(e);if(t){const[e,r,s]=t,n=Number(r);switch(s){case"nano":case"nanos":return Y(BigInt(r));case"micro":case"micros":return N(BigInt(r));case"milli":case"millis":return T(n);case"second":case"seconds":return E(n);case"minute":case"minutes":return O(n);case"hour":case"hours":return x(n);case"day":case"days":return X(n);case"week":case"weeks":return R(n)}}}throw new Error("Invalid DurationInput")},F={_tag:"Millis",millis:0},_={_tag:"Infinity"},v={[l]:l,[i.HR](){return i.PO(this,i.QK(this.value))},[s.HR](e){return S(e)&&H(this,e)},toString(){return`Duration(${J(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:D(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[o.FX](){return this.toJSON()},pipe(){return(0,u.t)(this,arguments)}},I=e=>{const t=Object.create(v);return(0,c.Et)(e)?isNaN(e)||e<=0?t.value=F:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=_:t.value=e<=h?F:{_tag:"Nanos",nanos:e},t},S=e=>(0,c.i5)(e,l),w=I(0),k=I(1/0),Y=e=>I(e),N=e=>I(e*p),T=e=>I(e),E=e=>I(1e3*e),O=e=>I(6e4*e),x=e=>I(36e5*e),X=e=>I(864e5*e),R=e=>I(6048e5*e),M=e=>{const t=y(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},A=e=>{const t=y(e);switch(t.value._tag){case"Infinity":return a.dv();case"Nanos":return a.zN(t.value.nanos);case"Millis":return a.zN(BigInt(Math.round(1e6*t.value.millis)))}},D=e=>{const t=y(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/m),Number(t.value.nanos%m)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},P=(0,n.XY)(2,((e,t)=>{const r=y(e);switch(r.value._tag){case"Nanos":return t.onNanos(r.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(r.value.millis)}})),C=(0,n.XY)(3,((e,t,r)=>{const s=y(e),n=y(t);if("Infinity"===s.value._tag||"Infinity"===n.value._tag)return r.onMillis(M(s),M(n));if("Nanos"===s.value._tag||"Nanos"===n.value._tag){const e="Nanos"===s.value._tag?s.value.nanos:BigInt(Math.round(1e6*s.value.millis)),t="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis));return r.onNanos(e,t)}return r.onMillis(s.value.millis,n.value.millis)})),j=(e,t)=>C(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),W=(0,n.XY)(2,((e,t)=>P(e,{onMillis:e=>I(e*t),onNanos:e=>I(e*BigInt(t))}))),B=(0,n.XY)(2,((e,t)=>C(e,t,{onMillis:(e,t)=>I(e+t),onNanos:(e,t)=>I(e+t)}))),q=(0,n.XY)(2,((e,t)=>C(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}))),z=(0,n.XY)(2,((e,t)=>C(e,t,{onMillis:(e,t)=>e>t,onNanos:(e,t)=>e>t}))),L=(0,n.XY)(2,((e,t)=>C(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t}))),H=(0,n.XY)(2,((e,t)=>j(y(e),y(t)))),J=e=>{const t=y(e),r=[];if("Infinity"===t.value._tag)return"Infinity";const s=(e=>{const t=y(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}})(t);s%g&&r.push(s%g+"ns");const n=s/g;n%p!==h&&r.push(n%p+"ms");const i=n/p;i%d!==h&&r.push(i%d+"s");const o=i/d;o%d!==h&&r.push(o%d+"m");const a=o/d;a%f!==h&&r.push(a%f+"h");const u=a/f;return u!==h&&r.push(`${u}d`),r.reverse().join(" ")}},37728:(e,t,r)=>{r.d(t,{$n:()=>n,Em:()=>o,MS:()=>i});var s=r(68498);const n=s.$n,i=(s.O4,s.TW,s.le,s.MS),o=s.Em;s.Pe,s.C6,s.bw},57964:(e,t,r)=>{r.d(t,{FG:()=>f,Gu:()=>b,OC:()=>h,Q7:()=>y,Sv:()=>c,Tj:()=>p,Wc:()=>l,YW:()=>g,h1:()=>m,kb:()=>a,pG:()=>o,qE:()=>d,sV:()=>u});var s=r(61369),n=r(9018),i=r(56572);n.ii;const o=n.pG,a=n.kb,u=n.sV,c=e=>{if((0,i.Tn)(e))try{return o(e())}catch(e){return a(e)}else try{return o(e.try())}catch(t){return a(e.catch(t))}},l=n.Wc,h=n.OC,f=n.FG,d=(n.j4,n.Gp,(0,s.XY)(2,((e,t)=>h(e)?a(t(e.left)):o(e.right)))),p=(0,s.XY)(2,((e,t)=>f(e)?o(t(e.right)):a(e.left))),g=(0,s.XY)(2,((e,{onLeft:t,onRight:r})=>h(e)?t(e.left):r(e.right))),m=g({onLeft:s.D_,onRight:s.D_}),b=(0,s.XY)(2,((e,t)=>{if(f(e))return e.right;throw t(e.left)})),y=e=>{if(Symbol.iterator in e){const t=[];for(const r of e){if(h(r))return r;t.push(r.right)}return o(t)}const t={};for(const r of Object.keys(e)){const s=e[r];if(h(s))return s;t[r]=s.right}return o(t)}},7664:(e,t,r)=>{r.d(t,{y4:()=>m,$X:()=>y,EF:()=>_,WG:()=>g,DX:()=>b,mU:()=>F});var s=r(57964),n=r(56572);const i=Symbol.for("effect/Encoding/errors/Decode"),o=(e,t)=>{const r={_tag:"DecodeException",[i]:i,input:e};return(0,n.Kg)(t)&&(r.message=t),r},a=new TextEncoder,u=e=>{const t=e.length;let r,s="";for(r=2;r<t;r+=3)s+=h[e[r-2]>>2],s+=h[(3&e[r-2])<<4|e[r-1]>>4],s+=h[(15&e[r-1])<<2|e[r]>>6],s+=h[63&e[r]];return r===t+1&&(s+=h[e[r-2]>>2],s+=h[(3&e[r-2])<<4],s+="=="),r===t&&(s+=h[e[r-2]>>2],s+=h[(3&e[r-2])<<4|e[r-1]>>4],s+=h[(15&e[r-1])<<2],s+="="),s},c=e=>{const t=e.length;if(t%4!=0)return s.kb(o(e,`Length must be a multiple of 4, but is ${t}`));const r=e.indexOf("=");if(-1!==r&&(r<t-2||r===t-2&&"="!==e[t-1]))return s.kb(o(e,"Found a '=' character, but it is not at the end"));try{const r=e.endsWith("==")?2:e.endsWith("=")?1:0,n=new Uint8Array(t/4*3);for(let r=0,s=0;r<t;r+=4,s+=3){const t=l(e.charCodeAt(r))<<18|l(e.charCodeAt(r+1))<<12|l(e.charCodeAt(r+2))<<6|l(e.charCodeAt(r+3));n[s]=t>>16,n[s+1]=t>>8&255,n[s+2]=255&t}return s.pG(n.subarray(0,n.length-r))}catch(t){return s.kb(o(e,t instanceof Error?t.message:"Invalid input"))}};function l(e){if(e>=f.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);const t=f[e];if(255===t)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}const h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],f=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],p=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw new TypeError("Invalid input")},g=e=>u("string"==typeof e?a.encode(e):e),m=e=>c(e),b=e=>{return t="string"==typeof e?a.encode(e):e,u(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var t},y=e=>(e=>{const t=e.length;if(t%4==1)return s.kb(o(e,`Length should be a multiple of 4, but is ${t}`));if(!/^[-_A-Z0-9]*?={0,2}$/i.test(e))return s.kb(o(e,"Invalid input"));let r=t%4==2?`${e}==`:t%4==3?`${e}=`:e;return r=r.replace(/-/g,"+").replace(/_/g,"/"),c(r)})(e),F=e=>(e=>{let t="";for(let r=0;r<e.length;++r)t+=d[e[r]];return t})("string"==typeof e?a.encode(e):e),_=e=>(e=>{const t=(new TextEncoder).encode(e);if(t.length%2!=0)return s.kb(o(e,`Length must be a multiple of 2, but is ${t.length}`));try{const e=t.length/2,r=new Uint8Array(e);for(let s=0;s<e;s++){const e=p(t[2*s]),n=p(t[2*s+1]);r[s]=e<<4|n}return s.pG(r)}catch(t){return s.kb(o(e,t instanceof Error?t.message:"Invalid input"))}})(e)},43977:(e,t,r)=>{r.d(t,{HR:()=>o,XY:()=>l,aI:()=>a,n4:()=>c});var s=r(67337),n=r(56572),i=r(30276);const o=Symbol.for("effect/Equal");function a(){return 1===arguments.length?e=>u(e,arguments[0]):u(arguments[0],arguments[1])}function u(e,t){if(e===t)return!0;const r=typeof e;if(r!==typeof t)return!1;if("object"===r||"function"===r){if(null!==e&&null!==t){if(c(e)&&c(t))return!(s.tW(e)!==s.tW(t)||!e[o](t))||!(!i.Hi.enabled||!i.Hi.tester)&&i.Hi.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(i.Hi.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(((e,r)=>u(e,t[r])));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const s of r)if(!(s in t)||!u(e[s],t[s]))return!!i.Hi.tester&&i.Hi.tester(e,t);return!0}}return!!i.Hi.tester&&i.Hi.tester(e,t)}}return!(!i.Hi.enabled||!i.Hi.tester)&&i.Hi.tester(e,t)}const c=e=>(0,n.i5)(e,o),l=()=>a},35309:(e,t,r)=>{r.d(t,{L8:()=>n,PV:()=>d,YO:()=>p,Yj:()=>a,ai:()=>u,n9:()=>f,o:()=>l,zM:()=>c,zQ:()=>h});var s=r(61369);const n=e=>(t,r)=>t===r||e(t,r),i=(e,t)=>e===t,o=()=>i,a=o(),u=o(),c=o(),l=o(),h=(0,s.XY)(2,((e,t)=>n(((r,s)=>e(t(r),t(s)))))),f=h(u,(e=>e.getTime())),d=(...e)=>{return t=e,n(((e,r)=>{const s=Math.min(e.length,r.length);let n=0;for(const i of t){if(n>=s)break;if(!i(e[n],r[n]))return!1;n++}return!0}));var t},p=e=>n(((t,r)=>{if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],r[s]))return!1;return!0}))},92102:(e,t,r)=>{r.d(t,{_7:()=>i,_K:()=>o,il:()=>n});var s=r(32628);const n=s.il,i=s._7,o=s._K;s.Gp,s.K7,s.Uv,s.YW},96949:(e,t,r)=>{r.d(t,{AT:()=>c,Bq:()=>l,Cw:()=>h,F_:()=>a,G:()=>f,N6:()=>n,OY:()=>_,Py:()=>m,Q7:()=>o,Tj:()=>d,Uc:()=>p,YW:()=>g,aN:()=>F,fJ:()=>u,oJ:()=>i,rI:()=>b,yU:()=>y});var s=r(72620);s.h0c;const n=s.VE1,i=s.CoE,o=(s.dWJ,s.VuY,s.Hox,s.n9O,s.Q9S),a=s.V2G,u=(s.JUF,s.Rkt),c=s.cbD,l=(s.ygP,s.NG,s.T12),h=s.m_i,f=(s.eec,s.Cau,s.t9n,s._sz),d=s.v9O,p=s.EkE,g=(s.zPu,s.o7R,s.Wtn),m=(s.dDX,s.xtk),b=s.x5l,y=s.cpb,F=(s.TBR,s.il9),_=(s.pLZ,s.CrW,s.$sd,s.wnO)},99571:(e,t,r)=>{r.d(t,{G:()=>c,Tx:()=>a,fj:()=>h,wt:()=>f,yS:()=>l,zq:()=>u});var s=r(72620),n=r(12164),i=r(24285),o=r(60356);i.QV,i.sA,i.pH,i.Lv,i.Zh,i.id;const a=i.gt,u=(o.C6,i.Y_,o.qm,i.Vw,i.Bh,i.KB,i.fJ,i.AT,i.uS,i.Ik,i.zq),c=s.OLv,l=(i.VM,s._tB),h=(i.UX,i.nA,i.tx,o.oh,i.fj),f=(o.IN,i.Tj,i.WK,i.FW,i.YW,i.Zm,i.NW,i.Gg,i.wt);i.j9,i.ab,i._g,o.xk,i.h5,i.Py,i.rI,n.S1,n.XJ,n.gh,n.SH},95602:(e,t,r)=>{r.d(t,{$N:()=>f,CB:()=>h,Do:()=>c,dK:()=>l,dv:()=>n,fA:()=>i,gb:()=>a,kg:()=>u,sN:()=>o});var s=r(78908);s.lm;const n=s.dv,i=s.fA,o=s.sN,a=s.gb,u=(s.$I,s.vk,s.mO,s.kg),c=(s.pM,s.Do),l=s.dK,h=(s.L8,s.CB),f=(s.zL,s.M1,s.$N)},45650:(e,t,r)=>{r.d(t,{Fi:()=>c,Jt:()=>u,MP:()=>l,QY:()=>h,p5:()=>a});var s=r(72620),n=r(60356),i=r(99752),o=r(71108);s.XOb,n.wT,n.xK,n.BB,n.Rf;const a=s.QID,u=(s._Pd,s.bzD,n.WY,s.sH6,s.U8_),c=(s.JGl,s.QcH,s.Kpo,s.uPR,s.Ecz,s.PNH,s.lOA,s.EbJ,s.qoC,s.tNQ,s.TsL,s.INx,s.GyC,s.D$Q,s.pX6,i.yW,i.Dn,s.Fi1),l=(s.QPU,s.KAb,s.bRS,s.Umi,n.RZ,s.w6U,n.UO,s.krO,n.Lt,o.X_,n.me,s.b1P,s.MP9),h=s.QYw;s.BzD,s.s$T,s.LGt},11486:(e,t,r)=>{r.d(t,{Au:()=>u,Fh:()=>o,Ie:()=>h,Jt:()=>i,Q2:()=>n,aI:()=>c,rl:()=>a,vG:()=>l});var s=r(89391);s.gU;const n=s.Rt,i=(s.rQ,s.BG,s.Jt),o=s.Fh,a=s.rl,u=s.Au,c=s.aI,l=s.vG,h=(s.$N,s.Ie)},46755:(e,t,r)=>{r.d(t,{F6:()=>i,Ui:()=>n});var s=r(92538);s.Ie;const n=s.Ui,i=(s.kg,s.F6)},85485:(e,t,r)=>{r.d(t,{Vw:()=>b,$L:()=>_,W_:()=>v,eJ:()=>I,yk:()=>y,IU:()=>F});var s=r(43977),n=r(61369),i=r(67337),o=r(56572);const a="effect/FiberStatus",u=Symbol.for(a),c="Done",l="Running",h="Suspended",f=i.Yj(`${a}-${c}`);class d{[u]=u;_tag=c;[i.HR](){return f}[s.HR](e){return m(e)&&e._tag===c}}class p{runtimeFlags;[u]=u;_tag=l;constructor(e){this.runtimeFlags=e}[i.HR](){return(0,n.Fs)(i.tW(a),i.kg(i.tW(this._tag)),i.kg(i.tW(this.runtimeFlags)),i.PO(this))}[s.HR](e){return m(e)&&e._tag===l&&this.runtimeFlags===e.runtimeFlags}}class g{runtimeFlags;blockingOn;[u]=u;_tag=h;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[i.HR](){return(0,n.Fs)(i.tW(a),i.kg(i.tW(this._tag)),i.kg(i.tW(this.runtimeFlags)),i.kg(i.tW(this.blockingOn)),i.PO(this))}[s.HR](e){return m(e)&&e._tag===h&&this.runtimeFlags===e.runtimeFlags&&s.aI(this.blockingOn,e.blockingOn)}}const m=e=>(0,o.i5)(e,u),b=new d,y=e=>new p(e),F=(e,t)=>new g(e,t),_=e=>e._tag===c,v=e=>e._tag===l,I=e=>e._tag===h},6517:(e,t,r)=>{r.d(t,{V:()=>o});var s=r(53563);const n=Symbol.for(`effect/GlobalValue/globalStoreId/${s.M()}`);n in globalThis||(globalThis[n]=new Map);const i=globalThis[n],o=(e,t)=>(i.has(e)||i.set(e,t()),i.get(e))},67337:(e,t,r)=>{r.d(t,{HR:()=>u,PO:()=>y,QK:()=>m,YO:()=>b,Yj:()=>g,ai:()=>p,kg:()=>h,tW:()=>c,yT:()=>l});var s=r(61369),n=r(6517),i=r(56572),o=r(30276);const a=(0,n.V)(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),u=Symbol.for("effect/Hash"),c=e=>{if(!0===o.Hi.enabled)return 0;switch(typeof e){case"number":return p(e);case"bigint":return g(e.toString(10));case"boolean":case"symbol":return g(String(e));case"string":return g(e);case"undefined":return g("undefined");case"function":case"object":return null===e?g("null"):e instanceof Date?c(e.toISOString()):d(e)?e[u]():l(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},l=e=>(a.has(e)||a.set(e,p(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),a.get(e)),h=e=>t=>53*t^e,f=e=>3221225471&e|e>>>1&1073741824,d=e=>(0,i.i5)(e,u),p=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return f(e)},g=e=>{let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return f(t)},m=e=>((e,t)=>{let r=12289;for(let n=0;n<t.length;n++)r^=(0,s.Fs)(g(t[n]),h(c(e[t[n]])));return f(r)})(e,Object.keys(e)),b=e=>{let t=6151;for(let r=0;r<e.length;r++)t=(0,s.Fs)(t,h(c(e[r])));return f(t)},y=function(){if(1===arguments.length){const e=arguments[0];return function(t){return Object.defineProperty(e,u,{value:()=>t,enumerable:!1}),t}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,u,{value:()=>t,enumerable:!1}),t}},5583:(e,t,r)=>{r.d(t,{Ie:()=>n,jJ:()=>b,Ts:()=>i,Jt:()=>a,zy:()=>c,Im:()=>o,HP:()=>h,Tj:()=>m,qt:()=>p,Tk:()=>d,TS:()=>y,TF:()=>g,hZ:()=>l,Ej:()=>f,$v:()=>u});var s=r(28565);r(22167),s.eY,s.Fu;const n=s.Ie,i=(s.L8,s.Ts),o=s.Im,a=s.Jt,u=(s.Zd,s.$v),c=s.zy,l=(s.Fp,s.hZ),h=s.HP,f=(s.zu,s.jO,s.Ej),d=(s.jT,s.bV,s.Tk),p=s.qt,g=(s.Nt,s.JP,s.KC,s.TF),m=(s.kg,s.Tj),b=(s.qI,s.jJ),y=s.TS;s.pb,s.oE,s.x1,s.i8},49942:(e,t,r)=>{r.d(t,{Ej:()=>c,Ie:()=>n,KC:()=>d,L8:()=>o,Si:()=>u,TF:()=>h,TS:()=>m,Tj:()=>p,Ts:()=>i,WQ:()=>l,iv:()=>f,qI:()=>g,zy:()=>a});var s=r(22167);s.oC,s.fi;const n=s.Ie,i=s.Ts,o=s.L8,a=s.zy,u=(s.zN,s.Si),c=(s.HS,s.zu,s.Ej),l=(s.jT,s.bV,s.Tk,s.WQ),h=s.TF,f=s.iv,d=(s.E$,s.KC),p=(s.L$,s.Tj),g=s.qI,m=(s.jJ,s.TS);s.pb,s.jB},83845:(e,t,r)=>{r.d(t,{FX:()=>n,GP:()=>o,U2:()=>i,Xs:()=>u,ZK:()=>c,hL:()=>l,os:()=>a});var s=r(56572);const n=Symbol.for("nodejs.util.inspect.custom"),i=e=>(0,s.i5)(e,"toJSON")&&(0,s.Tn)(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(i):e,o=e=>JSON.stringify(e,null,2),a={toJSON(){return i(this)},[n](){return this.toJSON()},toString(){return o(this.toJSON())}};class u{[n](){return this.toJSON()}toString(){return o(this.toJSON())}}const c=(e,t=2)=>{try{return"object"==typeof e?l(e,t):String(e)}catch(t){return String(e)}},l=(e,t)=>{let r=[];const s=JSON.stringify(e,((e,t)=>"object"==typeof t&&null!==t?r.includes(t)?void 0:r.push(t)&&t:t),t);return r=void 0,s}},54987:(e,t,r)=>{r.d(t,{i8:()=>o});var s=r(61369),n=r(77948),i=r(56572);const o=(0,s.XY)(2,((e,t)=>{let r=0;for(const s of e){const e=t(s,r);if((0,i.Lm)(e)){if(e)return n.zN(s)}else if(n.Ru(e))return e;r++}return n.dv()}));Symbol.iterator},89425:(e,t,r)=>{r.d(t,{BE:()=>E,Hs:()=>Y,Ie:()=>S,TS:()=>T,ae:()=>v,gD:()=>_,of:()=>w,qu:()=>I,u2:()=>k});var s=r(58600),n=r(43977),i=r(35309),o=r(61369),a=r(67337),u=r(83845),c=r(53533),l=r(56572);const h=Symbol.for("effect/List"),f=e=>s.Ts(e),d=(e=>i.zQ(s.bt(e),f))(n.aI),p={[h]:h,_tag:"Cons",toString(){return(0,u.GP)(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:f(this).map(u.U2)}},[u.FX](){return this.toJSON()},[n.HR](e){return F(e)&&this._tag===e._tag&&d(this,e)},[a.HR](){return a.PO(this,a.YO(f(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();const r=t.head;return t=t.tail,{done:e,value:r}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return(0,c.t)(this,arguments)}},g=(e,t)=>{const r=Object.create(p);return r.head=e,r.tail=t,r},m=a.Yj("Nil"),b={[h]:h,_tag:"Nil",toString(){return(0,u.GP)(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[u.FX](){return this.toJSON()},[a.HR]:()=>m,[n.HR](e){return F(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return(0,c.t)(this,arguments)}},y=Object.create(b),F=e=>(0,l.i5)(e,h),_=e=>"Nil"===e._tag,v=e=>"Cons"===e._tag,I=(e,t)=>g(e,t),S=()=>y,w=e=>g(e,y),k=(0,o.XY)(2,((e,t)=>N(t,e))),Y=(0,o.XY)(2,((e,t)=>I(t,e))),N=(0,o.XY)(2,((e,t)=>{if(_(e))return t;if(_(t))return e;{const r=g(t.head,e);let s=r,n=t.tail;for(;!_(n);){const t=g(n.head,e);s.tail=t,s=t,n=n.tail}return r}})),T=(0,o.XY)(3,((e,t,r)=>{let s=t,n=e;for(;!_(n);)s=r(s,n.head),n=n.tail;return s})),E=e=>{let t=S(),r=e;for(;!_(r);)t=Y(t,r.head),r=r.tail;return t}},34321:(e,t,r)=>{r.d(t,{$D:()=>c,Al:()=>b,Cn:()=>d,Lj:()=>u,MM:()=>m,N5:()=>l,NV:()=>p,R2:()=>h,y:()=>f});var s=r(61369),n=r(72620),i=r(4676),o=r(59877);const a=n.whK,u=n.xah,c=n.DxM,l=n.PuW,h=n.VEq,f=n.OM4,d=n._$,p=n.zg6,g=(n.HTn,(0,s.Fs)(i.pH,o.zQ((e=>e.ordinal)))),m=o.MM(g),b=e=>{switch(e){case"All":return a;case"Debug":return f;case"Error":return c;case"Fatal":return u;case"Info":return h;case"Trace":return d;case"None":return p;case"Warning":return l}}},4971:(e,t,r)=>{r.d(t,{L:()=>s,X:()=>n});const s=(e,t)=>({label:e,startTime:t}),n=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`},10523:(e,t,r)=>{r.d(t,{Um:()=>u,L8:()=>o,dl:()=>c,HC:()=>a});var s=r(60356),n=r(8624);r(20634),r(61369),r(5583),r(89425),r(72620),r(78908),r(89391);var i=r(65123);i.y4;const o=i.rY,a=(n.EJ,n.j3,n.GG,i.zQ,i.Tc,i.Li,i.Tj,s.sO,s.qI,s.eU,i.dv,n.vl,n.Tg),u=(n.cm,n.Pg,i.bQ,i.Py,i.OH,n.Z1,s.By,i.yU,i.pi,i.aN,s.Um),c=(i.Rz,i.mE,i.oz,i.xW,i.SZ,s.ek,s.Um,s.Rz,s.Um,s.S_,s.Um,s.xW,s.Um,s.SZ,n.dl);i.jj},98966:(e,t,r)=>{r.d(t,{L:()=>h});var s=r(53533),n=r(8993),i=r(20808),o=r(72620),a=r(60356),u=r(86881),c=r(3611);function l(e,t){return o.qIB(e.runtimeEffect,(e=>o.$we((r=>(r.setFiberRefs(e.fiberRefs),r._runtimeFlags=e.runtimeFlags,o.PpN(t,e.context))))))}const h=(e,t)=>{t=t??u.$M();const r=c.wg(a.RW()),h={memoMap:t,scope:r,runtimeEffect:c.wg(i.Bj(o.Mim(n.X$(u.Yp(e,t),r),(e=>{h.cachedRuntime=e})))),cachedRuntime:void 0,pipe(){return(0,s.t)(this,arguments)},runtime:()=>void 0===h.cachedRuntime?c.w$(h.runtimeEffect):Promise.resolve(h.cachedRuntime),dispose:()=>c.w$(h.disposeEffect),disposeEffect:o.DYE((()=>(h.runtime=o.F_Q("ManagedRuntime disposed"),h.cachedRuntime=void 0,n.VN(h.scope,o.x5l)))),runFork:(e,t)=>void 0===h.cachedRuntime?c.C9(l(h,e),t):c.vI(h.cachedRuntime)(e,t),runSyncExit:e=>void 0===h.cachedRuntime?c.ej(l(h,e)):c.NV(h.cachedRuntime)(e),runSync:e=>void 0===h.cachedRuntime?c.wg(l(h,e)):c.FZ(h.cachedRuntime)(e),runPromiseExit:(e,t)=>void 0===h.cachedRuntime?c.MN(l(h,e),t):c.Vk(h.cachedRuntime)(e,t),runCallback:(e,t)=>void 0===h.cachedRuntime?c.B5(c.KD)(l(h,e),t):c.B5(h.cachedRuntime)(e,t),runPromise:(e,t)=>void 0===h.cachedRuntime?c.w$(l(h,e),t):c.LP(h.cachedRuntime)(e,t)};return h}},62304:(e,t,r)=>{r.d(t,{T1:()=>g,Uq:()=>d,z7:()=>p});var s=r(57964),n=r(61369),i=(r(77948),r(53533));const o=Symbol.for("@effect/matcher/Matcher"),a={[o]:{_input:n.D_,_filters:n.D_,_remaining:n.D_,_result:n.D_,_return:n.D_},_tag:"TypeMatcher",add(e){return function(e){const t=Object.create(a);return t.cases=e,t}([...this.cases,e])},pipe(){return(0,i.t)(this,arguments)}};const u={[o]:{_input:n.D_,_filters:n.D_,_result:n.D_,_return:n.D_},_tag:"ValueMatcher",add(e){return"Right"===this.value._tag?this:"When"===e._tag&&!0===e.guard(this.provided)||"Not"===e._tag&&!1===e.guard(this.provided)?c(this.provided,s.pG(e.evaluate(this.provided))):this},pipe(){return(0,i.t)(this,arguments)}};function c(e,t){const r=Object.create(u);return r.provided=e,r.value=t,r}const l=e=>{if("function"==typeof e)return e;if(Array.isArray(e)){const t=e.map(l),r=t.length;return e=>{if(!Array.isArray(e))return!1;for(let s=0;s<r;s++)if(!1===t[s](e[s]))return!1;return!0}}if(null!==e&&"object"==typeof e){const t=Object.entries(e).map((([e,t])=>[e,l(t)])),r=t.length;return e=>{if("object"!=typeof e||null===e)return!1;for(let s=0;s<r;s++){const[r,n]=t[s];if(!(r in e)||!1===n(e[r]))return!1}return!0}}return t=>t===e},h="effect/Match/exhaustive: absurd";var f=r(56572);const d=e=>c(e,s.kb(e)),p=(e,t)=>r=>r.add({_tag:"When",guard:l(e),evaluate:t}),g=(f.Kg,f.Et,f.Lm,f.b0,f.kZ,f.sI,f.Bm,f.$P,f.u4,e=>{const t=(e=>{if("ValueMatcher"===e._tag)return e.value;const t=e.cases.length;if(1===t){const t=e.cases[0];return e=>"When"===t._tag&&!0===t.guard(e)||"Not"===t._tag&&!1===t.guard(e)?s.pG(t.evaluate(e)):s.kb(e)}return r=>{for(let n=0;n<t;n++){const t=e.cases[n];if("When"===t._tag&&!0===t.guard(r))return s.pG(t.evaluate(r));if("Not"===t._tag&&!1===t.guard(r))return s.pG(t.evaluate(r))}return s.kb(r)}})(e);if(s.Wc(t)){if("Right"===t._tag)return t.right;throw new Error(h)}return e=>{const r=t(e);if("Right"===r._tag)return r.right;throw new Error(h)}})},14349:(e,t,r)=>{r.d(t,{Ej:()=>_,Ie:()=>d,Jt:()=>p,TF:()=>F,hZ:()=>b,zy:()=>m});var s=r(43977),n=r(61369),i=r(67337),o=r(83845),a=r(77948),u=r(53533);const c=Symbol.for("effect/MutableHashMap"),l={[c]:c,[Symbol.iterator](){return new h(this)},toString(){return(0,o.GP)(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(o.U2)}},[o.FX](){return this.toJSON()},pipe(){return(0,u.t)(this,arguments)}};class h{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new f(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new h(this.self)}}class f{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){const e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const d=()=>{const e=Object.create(l);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},p=(0,n.XY)(2,((e,t)=>{if(!1===s.n4(t))return e.referential.has(t)?a.zN(e.referential.get(t)):a.dv();const r=t[i.HR](),n=e.buckets.get(r);return void 0===n?a.dv():g(e,n,t)})),g=(e,t,r,n=!1)=>{for(let i=0,o=t.length;i<o;i++)if(r[s.HR](t[i][0])){const r=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),a.zN(r)}return a.dv()},m=(0,n.XY)(2,((e,t)=>a.Ru(p(e,t)))),b=(0,n.XY)(3,((e,t,r)=>{if(!1===s.n4(t))return e.referential.set(t,r),e;const n=t[i.HR](),o=e.buckets.get(n);return void 0===o?(e.buckets.set(n,[[t,r]]),e.bucketsSize++,e):(y(e,o,t),o.push([t,r]),e.bucketsSize++,e)})),y=(e,t,r)=>{for(let n=0,i=t.length;n<i;n++)if(r[s.HR](t[n][0]))return t.splice(n,1),void e.bucketsSize--},F=(0,n.XY)(2,((e,t)=>{if(!1===s.n4(t))return e.referential.delete(t),e;const r=t[i.HR](),n=e.buckets.get(r);return void 0===n||(y(e,n,t),0===n.length&&e.buckets.delete(r)),e})),_=e=>e.referential.size+e.bucketsSize},66775:(e,t,r)=>{r.d(t,{r_:()=>d,Mm:()=>m,bN:()=>_,Im:()=>F,Bw:()=>y,x:()=>v,iI:()=>I,wt:()=>S,KK:()=>w,dT:()=>b});var s=r(28420),n=r(61369),i=r(83845),o=r(53533);const a=Symbol.for("effect/MutableList"),u={[a]:a,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();const r=t.value;return t=t.next,{done:e,value:r}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return(0,i.GP)(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(i.U2)}},[i.FX](){return this.toJSON()},pipe(){return(0,o.t)(this,arguments)}},c=e=>0===l(e),l=e=>e._length,h=n.XY(2,((e,t)=>{const r=(e=>({value:e,removed:!1,prev:void 0,next:void 0}))(t);return void 0===e.head&&(e.head=r),void 0===e.tail||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e})),f=Symbol.for("effect/MutableQueue"),d=Symbol.for("effect/mutable/MutableQueue/Empty"),p={[f]:f,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return(0,i.GP)(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(i.U2)}},[i.FX](){return this.toJSON()},pipe(){return(0,o.t)(this,arguments)}},g=e=>{const t=Object.create(p);return t.queue=(()=>{const e=Object.create(u);return e.head=void 0,e.tail=void 0,e._length=0,e})(),t.capacity=e,t},m=e=>g(e),b=()=>g(void 0),y=e=>l(e.queue),F=e=>c(e.queue),_=e=>void 0===e.capacity?1/0:e.capacity,v=n.XY(2,((e,t)=>{const r=l(e.queue);return(void 0===e.capacity||r!==e.capacity)&&(h(t)(e.queue),!0)})),I=n.XY(2,((e,t)=>{const r=t[Symbol.iterator]();let n,i=s.Ie(),o=!0;for(;o&&(n=r.next())&&!n.done;)o=v(n.value)(e);for(;null!=n&&!n.done;)i=s.Hs(n.value)(i),n=r.next();return s.BE(i)})),S=n.XY(2,((e,t)=>c(e.queue)?t:(e=>{const t=e.head;if(void 0!==t)return((e,t)=>{t.removed||(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))})(e,t),t.value})(e.queue))),w=n.XY(2,((e,t)=>{let r=s.Ie(),n=0;for(;n<t;){const t=S(d)(e);if(t===d)break;r=s.Hs(t)(r),n+=1}return s.BE(r)}))},45914:(e,t,r)=>{r.d(t,{Jt:()=>h,L8:()=>c,Tc:()=>l,hZ:()=>f});var s=r(43977),n=r(61369),i=r(83845),o=r(53533);const a=Symbol.for("effect/MutableRef"),u={[a]:a,toString(){return(0,i.GP)(this.toJSON())},toJSON(){return{_id:"MutableRef",current:(0,i.U2)(this.current)}},[i.FX](){return this.toJSON()},pipe(){return(0,o.t)(this,arguments)}},c=e=>{const t=Object.create(u);return t.current=e,t},l=n.XY(3,((e,t,r)=>!!s.aI(t,e.current)&&(e.current=r,!0))),h=e=>e.current,f=n.XY(2,((e,t)=>(e.current=t,e)))},77948:(e,t,r)=>{r.d(t,{$I:()=>c,$r:()=>v,IB:()=>b,NW:()=>d,Ru:()=>l,Tj:()=>F,WL:()=>f,Y6:()=>m,YW:()=>h,ZK:()=>p,dv:()=>a,gR:()=>S,k$:()=>g,n4:()=>y,qI:()=>_,x1:()=>I,zN:()=>u});var s=r(43977),n=r(61369),i=r(9018),o=r(8578);const a=()=>o.dv,u=o.zN,c=(o.oL,o.$I),l=o.Ru,h=(0,n.XY)(2,((e,{onNone:t,onSome:r})=>c(e)?t():r(e.value))),f=(i.j4,i.Gp,(0,n.XY)(2,((e,t)=>c(e)?t():e.value))),d=(0,n.XY)(2,((e,t)=>c(e)?t():e)),p=(0,n.XY)(2,((e,t)=>c(e)?u(t()):e)),g=e=>null==e?a():u(e),m=f(n.MN),b=e=>(...t)=>{try{return u(e(...t))}catch(e){return a()}},y=(0,n.XY)(2,((e,t)=>{if(l(e))return e.value;throw t()}))((()=>new Error("getOrThrow called on a None"))),F=(0,n.XY)(2,((e,t)=>c(e)?a():u(t(e.value)))),_=(0,n.XY)(2,((e,t)=>c(e)?a():t(e.value))),v=e=>c(e)?[]:[e.value],I=(0,n.XY)(2,((e,t)=>c(e)?a():t(e.value))),S=(e=>(0,n.XY)(2,((t,r)=>!c(t)&&e(t.value,r))))(s.XY())},59877:(e,t,r)=>{r.d(t,{MM:()=>f,PV:()=>l,YO:()=>h,Yj:()=>i,ai:()=>o,o:()=>u,zM:()=>a,zQ:()=>c});var s=r(61369);const n=e=>(t,r)=>t===r?0:e(t,r),i=n(((e,t)=>e<t?-1:1)),o=n(((e,t)=>e<t?-1:1)),a=n(((e,t)=>e<t?-1:1)),u=n(((e,t)=>e<t?-1:1)),c=(0,s.XY)(2,((e,t)=>n(((r,s)=>e(t(r),t(s)))))),l=(...e)=>{return t=e,n(((e,r)=>{const s=Math.min(e.length,r.length);let n=0;for(const i of t){if(n>=s)break;const t=i(e[n],r[n]);if(0!==t)return t;n++}return 0}));var t},h=e=>n(((t,r)=>{const s=t.length,n=r.length,i=Math.min(s,n);for(let s=0;s<i;s++){const n=e(t[s],r[s]);if(0!==n)return n}return o(s,n)})),f=e=>(0,s.XY)(2,((t,r)=>1===e(t,r)))},53533:(e,t,r)=>{r.d(t,{t:()=>s});const s=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let e=0,s=t.length;e<s;e++)r=t[e](r);return r}}}},80677:(e,t,r)=>{r.d(t,{Mm:()=>$,Ke:()=>V,n_:()=>G,p2:()=>K,B1:()=>Z,dT:()=>U});var s=r(28420),n=r(61369),i=r(66775),o=r(45914),a=r(4676),u=r(77948),c=r(53533),l=r(72620),h=r(32628),f=r(60356),d=r(90788);const p=Symbol.for("effect/PubSub/AbsentValue"),g=(e,t)=>r=>{r.has(e)||r.set(e,new Set),r.get(e).add(t)},m=(e,t)=>r=>{if(!r.has(e))return;const s=r.get(e);s.delete(t),0===s.size&&r.delete(e)},b=e=>{const t="number"==typeof e?{capacity:e}:e;x(t.capacity);const r=t.replay&&t.replay>0?new L(Math.ceil(t.replay)):void 0;return 1===t.capacity?new I(r):(0,a.U5)(t.capacity)===t.capacity?new _(t.capacity,r):new y(t.capacity,r)};class y{capacity;replayBuffer;array;publisherIndex=0;subscribers;subscriberCount=0;subscribersIndex=0;constructor(e,t){this.capacity=e,this.replayBuffer=t,this.array=Array.from({length:e}),this.subscribers=Array.from({length:e})}replayWindow(){return this.replayBuffer?new H(this.replayBuffer):J}isEmpty(){return this.publisherIndex===this.subscribersIndex}isFull(){return this.publisherIndex===this.subscribersIndex+this.capacity}size(){return this.publisherIndex-this.subscribersIndex}publish(e){if(this.isFull())return!1;if(0!==this.subscriberCount){const t=this.publisherIndex%this.capacity;this.array[t]=e,this.subscribers[t]=this.subscriberCount,this.publisherIndex+=1}return this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),s.Ie();const t=s.Ts(e),r=t.length,n=this.publisherIndex-this.subscribersIndex,i=this.capacity-n,o=Math.min(r,i);if(0===o)return t;let a=0;const u=this.publisherIndex+o;for(;this.publisherIndex!==u;){const e=s.$v(t,a++),r=this.publisherIndex%this.capacity;this.array[r]=e,this.subscribers[r]=this.subscriberCount,this.publisherIndex+=1,this.replayBuffer&&this.replayBuffer.offer(e)}return s.gv(t,a)}slide(){if(this.subscribersIndex!==this.publisherIndex){const e=this.subscribersIndex%this.capacity;this.array[e]=p,this.subscribers[e]=0,this.subscribersIndex+=1}this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new F(this,this.publisherIndex,!1)}}class F{self;subscriberIndex;unsubscribed;constructor(e,t,r){this.self=e,this.subscriberIndex=t,this.unsubscribed=r}isEmpty(){return this.unsubscribed||this.self.publisherIndex===this.subscriberIndex||this.self.publisherIndex===this.self.subscribersIndex}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;if(this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex),this.subscriberIndex!==this.self.publisherIndex){const e=this.subscriberIndex%this.self.capacity,t=this.self.array[e];return this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),this.subscriberIndex+=1,t}return e}pollUpTo(e){if(this.unsubscribed)return s.Ie();this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);const t=this.self.publisherIndex-this.subscriberIndex,r=Math.min(e,t);if(r<=0)return s.Ie();const n=[],i=this.subscriberIndex+r;for(;this.subscriberIndex!==i;){const e=this.subscriberIndex%this.self.capacity,t=this.self.array[e];this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),n.push(t),this.subscriberIndex+=1}return s.Ts(n)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);this.subscriberIndex!==this.self.publisherIndex;){const e=this.subscriberIndex%this.self.capacity;this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),this.subscriberIndex+=1}}}class _{capacity;replayBuffer;array;mask;publisherIndex=0;subscribers;subscriberCount=0;subscribersIndex=0;constructor(e,t){this.capacity=e,this.replayBuffer=t,this.array=Array.from({length:e}),this.mask=e-1,this.subscribers=Array.from({length:e})}replayWindow(){return this.replayBuffer?new H(this.replayBuffer):J}isEmpty(){return this.publisherIndex===this.subscribersIndex}isFull(){return this.publisherIndex===this.subscribersIndex+this.capacity}size(){return this.publisherIndex-this.subscribersIndex}publish(e){if(this.isFull())return!1;if(0!==this.subscriberCount){const t=this.publisherIndex&this.mask;this.array[t]=e,this.subscribers[t]=this.subscriberCount,this.publisherIndex+=1}return this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),s.Ie();const t=s.Ts(e),r=t.length,n=this.publisherIndex-this.subscribersIndex,i=this.capacity-n,o=Math.min(r,i);if(0===o)return t;let a=0;const u=this.publisherIndex+o;for(;this.publisherIndex!==u;){const e=s.$v(t,a++),r=this.publisherIndex&this.mask;this.array[r]=e,this.subscribers[r]=this.subscriberCount,this.publisherIndex+=1,this.replayBuffer&&this.replayBuffer.offer(e)}return s.gv(t,a)}slide(){if(this.subscribersIndex!==this.publisherIndex){const e=this.subscribersIndex&this.mask;this.array[e]=p,this.subscribers[e]=0,this.subscribersIndex+=1}this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new v(this,this.publisherIndex,!1)}}class v{self;subscriberIndex;unsubscribed;constructor(e,t,r){this.self=e,this.subscriberIndex=t,this.unsubscribed=r}isEmpty(){return this.unsubscribed||this.self.publisherIndex===this.subscriberIndex||this.self.publisherIndex===this.self.subscribersIndex}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;if(this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex),this.subscriberIndex!==this.self.publisherIndex){const e=this.subscriberIndex&this.self.mask,t=this.self.array[e];return this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),this.subscriberIndex+=1,t}return e}pollUpTo(e){if(this.unsubscribed)return s.Ie();this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);const t=this.self.publisherIndex-this.subscriberIndex,r=Math.min(e,t);if(r<=0)return s.Ie();const n=[],i=this.subscriberIndex+r;for(;this.subscriberIndex!==i;){const e=this.subscriberIndex&this.self.mask,t=this.self.array[e];this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),n.push(t),this.subscriberIndex+=1}return s.Ts(n)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);this.subscriberIndex!==this.self.publisherIndex;){const e=this.subscriberIndex&this.self.mask;this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=p,this.self.subscribersIndex+=1),this.subscriberIndex+=1}}}class I{replayBuffer;publisherIndex=0;subscriberCount=0;subscribers=0;value=p;capacity=1;constructor(e){this.replayBuffer=e}replayWindow(){return this.replayBuffer?new H(this.replayBuffer):J}pipe(){return(0,c.t)(this,arguments)}isEmpty(){return 0===this.subscribers}isFull(){return!this.isEmpty()}size(){return this.isEmpty()?0:1}publish(e){return!this.isFull()&&(0!==this.subscriberCount&&(this.value=e,this.subscribers=this.subscriberCount,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0)}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),s.Ie();const t=s.Ts(e);return s.Im(t)?t:this.publish(s.z1(t))?s.gv(t,1):t}slide(){this.isFull()&&(this.subscribers=0,this.value=p),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new S(this,this.publisherIndex,!1)}}class S{self;subscriberIndex;unsubscribed;constructor(e,t,r){this.self=e,this.subscriberIndex=t,this.unsubscribed=r}isEmpty(){return this.unsubscribed||0===this.self.subscribers||this.subscriberIndex===this.self.publisherIndex}size(){return this.isEmpty()?0:1}poll(e){if(this.isEmpty())return e;const t=this.self.value;return this.self.subscribers-=1,0===this.self.subscribers&&(this.self.value=p),this.subscriberIndex+=1,t}pollUpTo(e){if(this.isEmpty()||e<1)return s.Ie();const t=this.self.value;return this.self.subscribers-=1,0===this.self.subscribers&&(this.self.value=p),this.subscriberIndex+=1,s.of(t)}unsubscribe(){this.unsubscribed||(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex!==this.self.publisherIndex&&(this.self.subscribers-=1,0===this.self.subscribers&&(this.self.value=p)))}}class w{replayBuffer;publisherHead={value:p,subscribers:0,next:null};publisherTail=this.publisherHead;publisherIndex=0;subscribersIndex=0;capacity=Number.MAX_SAFE_INTEGER;constructor(e){this.replayBuffer=e}replayWindow(){return this.replayBuffer?new H(this.replayBuffer):J}isEmpty(){return this.publisherHead===this.publisherTail}isFull(){return!1}size(){return this.publisherIndex-this.subscribersIndex}publish(e){const t=this.publisherTail.subscribers;return 0!==t&&(this.publisherTail.next={value:e,subscribers:t,next:null},this.publisherTail=this.publisherTail.next,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0!==this.publisherTail.subscribers)for(const t of e)this.publish(t);else this.replayBuffer&&this.replayBuffer.offerAll(e);return s.Ie()}slide(){this.publisherHead!==this.publisherTail&&(this.publisherHead=this.publisherHead.next,this.publisherHead.value=p,this.subscribersIndex+=1),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.publisherTail.subscribers+=1,new k(this,this.publisherTail,this.publisherIndex,!1)}}class k{self;subscriberHead;subscriberIndex;unsubscribed;constructor(e,t,r,s){this.self=e,this.subscriberHead=t,this.subscriberIndex=r,this.unsubscribed=s}isEmpty(){if(this.unsubscribed)return!0;let e=!0,t=!0;for(;t;)this.subscriberHead===this.self.publisherTail?t=!1:this.subscriberHead.next.value!==p?(e=!1,t=!1):(this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1);return e}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;let t=!0,r=e;for(;t;)if(this.subscriberHead===this.self.publisherTail)t=!1;else{const e=this.subscriberHead.next.value;e!==p&&(r=e,this.subscriberHead.subscribers-=1,0===this.subscriberHead.subscribers&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=p,this.self.subscribersIndex+=1),t=!1),this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1}return r}pollUpTo(e){const t=[],r=p;let n=0;for(;n!==e;){const s=this.poll(r);s===r?n=e:(t.push(s),n+=1)}return s.Ts(t)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.publisherTail.subscribers-=1;this.subscriberHead!==this.self.publisherTail;)this.subscriberHead.next.value!==p&&(this.subscriberHead.subscribers-=1,0===this.subscriberHead.subscribers&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=p,this.self.subscribersIndex+=1)),this.subscriberHead=this.subscriberHead.next}}class Y{pubsub;subscribers;subscription;pollers;shutdownHook;shutdownFlag;strategy;replayWindow;[d.aK]=d.Es;constructor(e,t,r,s,n,i,o,a){this.pubsub=e,this.subscribers=t,this.subscription=r,this.pollers=s,this.shutdownHook=n,this.shutdownFlag=i,this.strategy=o,this.replayWindow=a}pipe(){return(0,c.t)(this,arguments)}capacity(){return this.pubsub.capacity}isActive(){return!o.Jt(this.shutdownFlag)}get size(){return l.DYE((()=>o.Jt(this.shutdownFlag)?l.GaK:l.PyW(this.subscription.size()+this.replayWindow.remaining)))}unsafeSize(){return o.Jt(this.shutdownFlag)?u.dv():u.zN(this.subscription.size()+this.replayWindow.remaining)}get isFull(){return l.DYE((()=>o.Jt(this.shutdownFlag)?l.GaK:l.PyW(this.subscription.size()===this.capacity())))}get isEmpty(){return l.TjK(this.size,(e=>0===e))}get shutdown(){return l.rfi(l.$we((e=>(o.hZ(this.shutdownFlag,!0),(0,n.Fs)(f.L7(M(this.pollers),(t=>l.bdM(t,e.id())),!1),l.aNH(l.OH5((()=>{this.subscribers.delete(this.subscription),this.subscription.unsubscribe(),this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers)}))),l.iK2(l.syF(this.shutdownHook,void 0)),l.NLW)))))}get isShutdown(){return l.OH5((()=>o.Jt(this.shutdownFlag)))}get awaitShutdown(){return l.gn0(this.shutdownHook)}get take(){return l.$we((e=>{if(o.Jt(this.shutdownFlag))return l.GaK;if(this.replayWindow.remaining>0){const e=this.replayWindow.take();return l.PyW(e)}const t=i.Im(this.pollers)?this.subscription.poll(i.r_):i.r_;if(t===i.r_){const t=l.MIt(e.id());return(0,n.Fs)(l.DYE((()=>((0,n.Fs)(this.pollers,i.x(t)),(0,n.Fs)(this.subscribers,g(this.subscription,this.pollers)),this.strategy.unsafeCompletePollers(this.pubsub,this.subscribers,this.subscription,this.pollers),o.Jt(this.shutdownFlag)?l.GaK:l.gn0(t)))),l.nAr((()=>l.OH5((()=>C(this.pollers,t))))))}return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),l.PyW(t)}))}get takeAll(){return l.DYE((()=>{if(o.Jt(this.shutdownFlag))return l.GaK;const e=i.Im(this.pollers)?A(this.subscription):s.Ie();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),this.replayWindow.remaining>0?l.PyW(s.u2(this.replayWindow.takeAll(),e)):l.PyW(e)}))}takeUpTo(e){return l.DYE((()=>{if(o.Jt(this.shutdownFlag))return l.GaK;let t;if(this.replayWindow.remaining>=e){const t=this.replayWindow.takeN(e);return l.PyW(t)}this.replayWindow.remaining>0&&(t=this.replayWindow.takeAll(),e-=t.length);const r=i.Im(this.pollers)?D(this.subscription,e):s.Ie();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),t?l.PyW(s.u2(t,r)):l.PyW(r)}))}takeBetween(e,t){return l.DYE((()=>N(this,e,t,s.Ie())))}}const N=(e,t,r,i)=>r<t?l.PyW(i):(0,n.Fs)(e.takeUpTo(r),l.qIB((o=>{const a=t-o.length;return 1===a?(0,n.Fs)(e.take,l.TjK((e=>(0,n.Fs)(i,s.u2(o),s.BC(e))))):a>1?(0,n.Fs)(e.take,l.qIB((t=>N(e,a-1,r-o.length-1,(0,n.Fs)(i,s.u2(o),s.BC(t)))))):l.PyW((0,n.Fs)(i,s.u2(o)))})));class T{pubsub;subscribers;scope;shutdownHook;shutdownFlag;strategy;[d.e6]=d.GR;[d.aK]=d.Es;constructor(e,t,r,s,n,i){this.pubsub=e,this.subscribers=t,this.scope=r,this.shutdownHook=s,this.shutdownFlag=n,this.strategy=i}capacity(){return this.pubsub.capacity}get size(){return l.DYE((()=>o.Jt(this.shutdownFlag)?l.GaK:l.OH5((()=>this.pubsub.size()))))}unsafeSize(){return o.Jt(this.shutdownFlag)?u.dv():u.zN(this.pubsub.size())}get isFull(){return l.TjK(this.size,(e=>e===this.capacity()))}get isEmpty(){return l.TjK(this.size,(e=>0===e))}get awaitShutdown(){return l.gn0(this.shutdownHook)}get isShutdown(){return l.OH5((()=>o.Jt(this.shutdownFlag)))}get shutdown(){return l.rfi(l.$we((e=>((0,n.Fs)(this.shutdownFlag,o.hZ(!0)),(0,n.Fs)(this.scope.close(l._sz(e.id())),l.aNH(this.strategy.shutdown),l.iK2(l.syF(this.shutdownHook,void 0)),l.NLW)))))}publish(e){return l.DYE((()=>o.Jt(this.shutdownFlag)?l.GaK:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),l.PyW(!0)):this.strategy.handleSurplus(this.pubsub,this.subscribers,s.of(e),this.shutdownFlag)))}isActive(){return!o.Jt(this.shutdownFlag)}unsafeOffer(e){return!o.Jt(this.shutdownFlag)&&!!this.pubsub.publish(e)&&(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),!0)}publishAll(e){return l.DYE((()=>{if(o.Jt(this.shutdownFlag))return l.GaK;const t=P(this.pubsub,e);return this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),s.Im(t)?l.PyW(!0):this.strategy.handleSurplus(this.pubsub,this.subscribers,t,this.shutdownFlag)}))}get subscribe(){const e=l.Mim(f.Q7([this.scope.fork(h.il),(t=this.pubsub,r=this.subscribers,s=this.strategy,l.TjK(l.WW4(),(e=>((e,t,r,s,n,i,o)=>new Y(e,t,r,s,n,i,o,e.replayWindow()))(t,r,t.subscribe(),i.dT(),e,o.L8(!1),s))))]),(e=>e[0].addFinalizer((()=>e[1].shutdown))));var t,r,s;return l.TjK(f.Q5(e,((e,t)=>e[0].close(t))),(e=>e[1]))}offer(e){return this.publish(e)}offerAll(e){return this.publishAll(e)}pipe(){return(0,c.t)(this,arguments)}}const E=(e,t)=>l.qIB(f.RW(),(r=>l.TjK(l.WW4(),(s=>O(e,new Map,r,s,o.L8(!1),t))))),O=(e,t,r,s,n,i)=>new T(e,t,r,s,n,i),x=e=>{if(e<=0)throw new l.uwm(`Cannot construct PubSub with capacity of ${e}`)},X=(e,t)=>{l.q_p(e,l.PyW(t))},R=(e,t)=>(0,n.Fs)(e,i.iI(t)),M=e=>(0,n.Fs)(e,i.KK(Number.POSITIVE_INFINITY)),A=e=>e.pollUpTo(Number.POSITIVE_INFINITY),D=(e,t)=>e.pollUpTo(t),P=(e,t)=>e.publishAll(t),C=(e,t)=>{R(e,(0,n.Fs)(M(e),s.pb((e=>e!==t))))};class j{publishers=i.dT();get shutdown(){return l.qIB(l.ABT,(e=>l.qIB(l.OH5((()=>M(this.publishers))),(t=>f.Kd(t,(([t,r,s])=>s?(0,n.Fs)(l.bdM(r,e),l.NLW):l.rIH),!1,!1)))))}handleSurplus(e,t,r,s){return l.$we((i=>{const a=l.MIt(i.id());return(0,n.Fs)(l.DYE((()=>(this.unsafeOffer(r,a),this.unsafeOnPubSubEmptySpace(e,t),this.unsafeCompleteSubscribers(e,t),o.Jt(s)?l.GaK:l.gn0(a)))),l.nAr((()=>l.OH5((()=>this.unsafeRemove(a))))))}))}unsafeOnPubSubEmptySpace(e,t){let r=!0;for(;r&&!e.isFull();){const o=(0,n.Fs)(this.publishers,i.wt(i.r_));if(o===i.r_)r=!1;else{const r=e.publish(o[0]);r&&o[2]?X(o[1],!0):r||R(this.publishers,(0,n.Fs)(M(this.publishers),s.Hs(o))),this.unsafeCompleteSubscribers(e,t)}}}unsafeCompletePollers(e,t,r,s){return q(this,e,t,r,s)}unsafeCompleteSubscribers(e,t){return z(this,e,t)}unsafeOffer(e,t){const r=e[Symbol.iterator]();let s=r.next();if(!s.done)for(;;){const e=s.value;if(s=r.next(),s.done){(0,n.Fs)(this.publishers,i.x([e,t,!0]));break}(0,n.Fs)(this.publishers,i.x([e,t,!1]))}}unsafeRemove(e){R(this.publishers,(0,n.Fs)(M(this.publishers),s.pb((([t,r])=>r!==e))))}}class W{get shutdown(){return l.rIH}handleSurplus(e,t,r,s){return l.PyW(!1)}unsafeOnPubSubEmptySpace(e,t){}unsafeCompletePollers(e,t,r,s){return q(this,e,t,r,s)}unsafeCompleteSubscribers(e,t){return z(this,e,t)}}class B{get shutdown(){return l.rIH}handleSurplus(e,t,r,s){return l.OH5((()=>(this.unsafeSlidingPublish(e,r),this.unsafeCompleteSubscribers(e,t),!0)))}unsafeOnPubSubEmptySpace(e,t){}unsafeCompletePollers(e,t,r,s){return q(this,e,t,r,s)}unsafeCompleteSubscribers(e,t){return z(this,e,t)}unsafeSlidingPublish(e,t){const r=t[Symbol.iterator]();let s=r.next();if(!s.done&&e.capacity>0){let t=s.value,n=!0;for(;n;){e.slide();const i=e.publish(t);i&&(s=r.next())&&!s.done?t=s.value:i&&(n=!1)}}}}const q=(e,t,r,o,a)=>{let u=!0;for(;u&&!o.isEmpty();){const c=(0,n.Fs)(a,i.wt(i.r_));if(c===i.r_)(0,n.Fs)(r,m(o,a)),i.Im(a)?u=!1:(0,n.Fs)(r,g(o,a));else{const u=o.poll(i.r_);u===i.r_?R(a,(0,n.Fs)(M(a),s.Hs(c))):(X(c,u),e.unsafeOnPubSubEmptySpace(t,r))}}},z=(e,t,r)=>{for(const[s,n]of r)for(const i of n)e.unsafeCompletePollers(t,r,s,i)};class L{capacity;constructor(e){this.capacity=e}head={value:p,next:null};tail=this.head;size=0;index=0;slide(){this.index++}offer(e){this.tail.value=e,this.tail.next={value:p,next:null},this.tail=this.tail.next,this.size===this.capacity?this.head=this.head.next:this.size+=1}offerAll(e){for(const t of e)this.offer(t)}}class H{buffer;head;index;remaining;constructor(e){this.buffer=e,this.index=e.index,this.remaining=e.size,this.head=e.head}fastForward(){for(;this.index<this.buffer.index;)this.head=this.head.next,this.index++}take(){if(0===this.remaining)return;this.index<this.buffer.index&&this.fastForward(),this.remaining--;const e=this.head.value;return this.head=this.head.next,e}takeN(e){if(0===this.remaining)return s.Ie();this.index<this.buffer.index&&this.fastForward();const t=Math.min(e,this.remaining),r=new Array(t);for(let e=0;e<t;e++){const t=this.head.value;this.head=this.head.next,r[e]=t}return this.remaining-=t,s.Iv(r)}takeAll(){return this.takeN(this.remaining)}}const J={remaining:0,take:()=>{},takeN:()=>s.Ie(),takeAll:()=>s.Ie()},$=e=>l.DYE((()=>{const t=b(e);return E(t,new j)})),V=e=>l.DYE((()=>{const t=b(e);return E(t,new W)})),K=e=>l.DYE((()=>{const t=b(e);return E(t,new B)})),U=e=>l.DYE((()=>{const t=(e=>new w(e?.replay?new L(e.replay):void 0))(e);return E(t,new W)})),G=e=>e.shutdown,Z=e=>e.subscribe},35446:(e,t,r)=>{r.d(t,{$Q:()=>d,Ej:()=>l,FV:()=>p,Im:()=>h,Iz:()=>S,Ke:()=>o,Mm:()=>i,ON:()=>v,aK:()=>n,bN:()=>c,dT:()=>u,h0:()=>_,iI:()=>b,mX:()=>I,n_:()=>g,p2:()=>a,s:()=>F,uq:()=>f,wt:()=>y,x:()=>m});var s=r(90788);s.e6;const n=s.aK,i=(s.AH,s._K,s.gZ,s.Bg,s.Ld,s.A3,s.xE,s.KA,s.L8,s.Mm),o=s.Ke,a=s.p2,u=s.dT,c=s.bN,l=s.Ej,h=s.Im,f=s.uq,d=s.$Q,p=s.FV,g=s.n_,m=s.x,b=(s.tz,s.iI),y=s.wt,F=s.s,_=s.h0,v=s.ON,I=s.mX,S=s.Iz},20209:(e,t,r)=>{r.d(t,{ii:()=>s}),r(53533);const s=Symbol.for("effect/Readable")},67316:(e,t,r)=>{r.d(t,{DM:()=>n,Tj:()=>a,Wo:()=>i,bt:()=>c});var s=r(61369);const n=e=>0===u(e).length,i=(Object.fromEntries,(0,s.XY)(2,((e,t)=>{const r=[];for(const s of u(e))r.push(t(s,e[s]));return r})))(((e,t)=>[e,t])),o=(0,s.XY)(2,((e,t)=>Object.prototype.hasOwnProperty.call(e,t))),a=(0,s.XY)(2,((e,t)=>{const r={...e};for(const s of u(e))r[s]=t(e[s],s);return r})),u=e=>Object.keys(e),c=e=>{const t=(e=>(0,s.XY)(2,((t,r)=>{for(const s of u(t))if(!o(r,s)||!e(t[s],r[s]))return!1;return!0})))(e);return(e,r)=>t(e,r)&&t(r,e)}},55040:(e,t,r)=>{r.d(t,{C2:()=>o,JP:()=>a,Jt:()=>i,L8:()=>n,hZ:()=>u,yo:()=>c});var s=r(61974);s.ll;const n=s.L8,i=s.Jt,o=s.C2,a=(s.Ru,s.$N,s.JP),u=(s.ni,s.hZ),c=(s._c,s.yo);s.lF,s.gH,s.VH,s.s$},95156:(e,t,r)=>{r.d(t,{i:()=>s});const s=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&")},66172:(e,t,r)=>{r.d(t,{ks:()=>o});var s=r(68481),n=r(60356),i=r(2146);i.pD;const o=i.ks;i.of,i.VK,i.Xs,i.V5,i.My,n.$O,i.tx,i.fJ,i.AT,i.Py,s.Tk,s.lq},28202:(e,t,r)=>{r.d(t,{HN:()=>u,Ie:()=>i,b8:()=>a,sS:()=>o});var s=r(66932),n=r(48464);const i=n.Ie,o=(n.L8,n.sS),a=n.b8,u=(n.Im,n.$m,n.Ol,n.d6,n.$m,n.hg,n.WP,n.gP,n.HN);n.DI,s.qB,s.Vh,s.hY},30714:(e,t,r)=>{r.d(t,{c3:()=>a,ob:()=>u,Vw:()=>c,Wk:()=>l,$L:()=>h});var s=r(28420),n=r(90544);const i="Continue",o="Done",a=e=>({_tag:i,intervals:e}),u=e=>({_tag:i,intervals:n.L8(s.of(e))}),c={_tag:o},l=e=>e._tag===i,h=e=>e._tag===o},79100:(e,t,r)=>{r.d(t,{Pl:()=>b,Ie:()=>f,y$:()=>g,Im:()=>p,Xe:()=>d,L8:()=>h,Ej:()=>m});var s=r(84073),n=r(61369);r(77948);const i=Symbol.for("effect/ScheduleInterval"),o={[i]:i,startMillis:0,endMillis:0},a=(e,t)=>e>t?o:{[i]:i,startMillis:e,endMillis:t},u=(0,n.XY)(2,((e,t)=>c(e,t)===e)),c=(0,n.XY)(2,((e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t)),l=(0,n.XY)(2,((e,t)=>{const r=Math.max(e.startMillis,t.startMillis),s=Math.min(e.endMillis,t.endMillis);return a(r,s)})),h=a,f=o,d=u,p=e=>e.startMillis>=e.endMillis,g=l,m=e=>s.ne(e.endMillis-e.startMillis),b=e=>a(e,Number.POSITIVE_INFINITY)},90544:(e,t,r)=>{r.d(t,{_N:()=>v,y$:()=>F,J_:()=>S,Xe:()=>I,L8:()=>b,T9:()=>w,ni:()=>_,KC:()=>y});var s=r(28420),n=r(61369),i=r(77948),o=r(79100),a=r(94732);const u=Symbol.for("effect/ScheduleIntervals"),c=e=>({[u]:u,intervals:e}),l=(0,n.XY)(2,((e,t)=>s.J_(t.intervals)?s.J_(e.intervals)?s.v4(e.intervals).startMillis<s.v4(t.intervals).startMillis?h(s.Rx(e.intervals),t.intervals,s.v4(e.intervals),s.Ie()):h(e.intervals,s.Rx(t.intervals),s.v4(t.intervals),s.Ie()):t:e)),h=(e,t,r,i)=>{let u=e,l=t,h=r,f=i;for(;s.J_(u)||s.J_(l);)if(!s.J_(u)&&s.J_(l))h.endMillis<s.v4(l).startMillis?(f=(0,n.Fs)(f,s.Hs(h)),h=s.v4(l),l=s.Rx(l),u=s.Ie()):(h=o.L8(h.startMillis,s.v4(l).endMillis),l=s.Rx(l),u=s.Ie());else if(s.J_(u)&&s.Im(l))h.endMillis<s.v4(u).startMillis?(f=(0,n.Fs)(f,s.Hs(h)),h=s.v4(u),l=s.Ie(),u=s.Rx(u)):(h=o.L8(h.startMillis,s.v4(u).endMillis),l=s.Ie(),u=s.Rx(u));else{if(!s.J_(u)||!s.J_(l))throw new Error((0,a.k)("Intervals.unionLoop"));s.v4(u).startMillis<s.v4(l).startMillis?h.endMillis<s.v4(u).startMillis?(f=(0,n.Fs)(f,s.Hs(h)),h=s.v4(u),u=s.Rx(u)):(h=o.L8(h.startMillis,s.v4(u).endMillis),u=s.Rx(u)):h.endMillis<s.v4(l).startMillis?(f=(0,n.Fs)(f,s.Hs(h)),h=s.v4(l),l=s.Rx(l)):(h=o.L8(h.startMillis,s.v4(l).endMillis),l=s.Rx(l))}return c((0,n.Fs)(f,s.Hs(h),s.BE))},f=(0,n.XY)(2,((e,t)=>d(e.intervals,t.intervals,s.Ie()))),d=(e,t,r)=>{let i=e,a=t,u=r;for(;s.J_(i)&&s.J_(a);){const e=(0,n.Fs)(s.v4(i),o.y$(s.v4(a))),t=o.Im(e)?u:(0,n.Fs)(u,s.Hs(e));(0,n.Fs)(s.v4(i),o.Xe(s.v4(a)))?i=s.Rx(i):a=s.Rx(a),u=t}return c(s.BE(u))},p=e=>(0,n.Fs)(e.intervals,s.d5,i.WL((()=>o.Ie))).startMillis,g=(0,n.XY)(2,((e,t)=>p(e)<p(t))),m=(0,n.XY)(2,((e,t)=>g(e,t)?t:e)),b=c,y=l,F=f,_=p,v=e=>(0,n.Fs)(e.intervals,s.d5,i.WL((()=>o.Ie))).endMillis,I=g,S=e=>s.J_(e.intervals),w=m},71108:(e,t,r)=>{r.d(t,{X_:()=>l,kW:()=>h,pX:()=>c});var s=r(61369),n=r(6517),i=r(72620);class o{buckets=[];scheduleTask(e,t){let r,s;for(s=0;s<this.buckets.length&&this.buckets[s][0]<=t;s++)r=this.buckets[s];if(r)r[1].push(e);else{const r=[];for(let e=0;e<s;e++)r.push(this.buckets[e]);r.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)r.push(this.buckets[e]);this.buckets=r}}}class a{maxNextTickBeforeTimer;running=!1;tasks=new o;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[e,r]of t)for(let e=0;e<r.length;e++)r[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout((()=>this.starveInternal(0)),0):Promise.resolve(void 0).then((()=>this.starveInternal(e+1)))}shouldYield(e){return e.currentOpCount>e.getFiberRef(i.KAb)&&e.getFiberRef(i.QPU)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}const u=(0,n.V)(Symbol.for("effect/Scheduler/defaultScheduler"),(()=>new a(2048)));class c{tasks=new o;deferred=!1;scheduleTask(e,t){this.deferred?u.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(i.KAb)&&e.getFiberRef(i.QPU)}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[t,r]of e)for(let e=0;e<r.length;e++)r[e]()}this.deferred=!0}}const l=(0,n.V)(Symbol.for("effect/FiberRef/currentScheduler"),(()=>i.QID(u))),h=(0,s.XY)(2,((e,t)=>i.woH(e,l,t)))},8993:(e,t,r)=>{r.d(t,{HG:()=>i,L8:()=>l,U9:()=>o,VN:()=>a,X$:()=>u,Zy:()=>c});var s=r(72620),n=r(60356);s.kWD,s.APi;const i=n.DL,o=s.iLB,a=(s.Uio,s.vDJ),u=n.v_,c=s.Z$R,l=(n.md,n.RW)},90208:(e,t,r)=>{r.d(t,{dWW:()=>i,fJG:()=>o,EfB:()=>a,fph:()=>u,tiA:()=>c,A2M:()=>l}),r(20634),r(28420),r(62738),r(55519),r(96949),r(61369),r(77948),r(53533),r(56572);var s=r(35446),n=(r(55040),r(83136),r(35679),r(29064),r(18428));r(99688),s.aK,n.O4p,n.sAj,n.ZjH,n.pYz,n.Q56,n.QDe,n.NbH,n.mtG,n.as,n.Qku,n.a1b,n.bGY,n.Baj,n.mqN,n.Bgl,n.hYI,n.AEl,n.ra8;const i=n.dWW,o=(n.h9N,n.uPo,n._Oy,n.KuX,n.loE,n.RJ2,n.AoS,n.YaF,n.B53,n.VNK,n.pl8,n.kg7,n.c$M,n.xWs,n.KOB,n.$An,n.KBS,n.DyF,n.NJm,n.sg1,n.F_Q,n.Kbz,n.GSS,n.u3U,n.ZBY,n.Zen,n.tID,n.gvV,n.gc8,n.Cmk,n.jjj,n.HdH,n.IHh,n.gPK,n.Iex,n.yeE,n.szT,n._OA,n.sxi,n.d_m,n.EHx,n.g7Y,n.fJG),a=(n.gOk,n.ATB,n.pVV,n.pbD,n.ODK,n.x1Q,n.E8K,n.mAd,n.PdO,n.PkA,n.I6j,n.nCM,n.qIB,n.Bqz,n.B$Z,n.kjI,n.WmK,n.U5d,n._pT,n.i4r,n.zrT,n.EfB),u=(n.pr8,n.u7q,n.P$i,n.bT0,n.TYd,n.uS6,n.v7O,n.qdp,n.Tsr,n.ipe,n.b1S,n.OBL,n.gJc,n.fph),c=(n.VQg,n.agF,n.naR,n.zDy,n.yTQ,n._Q_,n.eBu,n.ZWH,n.nIh,n.CCl,n.A7h,n.ft,n.fNz,n.eV2,n.S67,n.P47,n.nlf,n.L8n,n.TjK,n.OMK,n.JUj,n.UcN,n.bsU,n.qTV,n.H7O,n.Y4$,n.by4,n.sbx,n.xm_,n.aWS,n.h1I,n.Um7,n.XQi,n.KJo,n.ahT,n.VxE,n.kBx,n.ZmZ,n.S5A,n.ER8,n.QgK,n.kS9,n.NWQ,n.Ggq,n.xS7,n.hRE,n.UZM,n.tDI,n.DM4,n.EnV,n.BG1,n.gF$,n.FSO,n.jBG,n.s9b,n.zY,n.W7X,n.tyW,n.U5Q,n.Hs9,n.PpN,n.pR7,n.PfK,n.c7E,n.FS,n.kyh,n.rGZ,n.Vdx,n.y17,n.Bsl,n.xQX,n.fVI,n.uxO,n.vyB,n.EPo,n.lwS,n.QcF,n.QqF,n.$Gu,n.TAT,n.Nh$,n.l1Z,n.w6K,n.L5P,n.eFU,n.sZ3,n.TrK,n.KEl,n.vbZ,n.ies,n.pk9,n.C2R,n.az_,n.feR,n.uL9,n.lPw,n.o1d,n.bht,n.NUv,n.S8c,n.JSQ,n.rhH,n.eKg,n.p9$,n.RXz,n.XW_,n.wEr,n.$eh,n.OlJ,n.M__,n.pqB,n.SQs,n.J8u,n.Szv,n.bqT,n._aP,n.ovR,n.P1j,n.p2R,n.I1p,n.zNS,n.Dfo,n.qUc,n.lDo,n.p7P,n.uzs,n.PyW,n.OH5,n.DYE,n.saZ,n.O6g,n.QKh,n.NpH,n.v6,n.Mim,n.Bio,n.sFT,n.Ly1,n.dW9,n.nFR,n.EH3,n.ioe,n.wRz,n.ANz,n.ny8,n.nHM,n.bk5,n.VlR,n.TEV,n.RlJ,n.olw,n.tiA),l=(n.ior,n.QCN,n.t8s,n.AyW,n.b0H,n.c13,n.rIH,n.oAg,n.A2M);n.bUZ,n.z7s,n.lsS,n.uGN,n.iK2,n.fRP,n.yU6,n._tq,n.xrQ,n.MAb,n.hVW,n.YG,n.VpO,n.oHA,n.qrH,n.fWh,n.Fnq,n.QMs,n.LiC,n.piH,n.aNH,n.OYO,n.Yir,n.fFn,n.FwQ,n.n8y,n.y4y,n.Do,n.oIE,n.JrD,n.zMU,n.g7H,n.wxB,n.VL_},43216:(e,t,r)=>{r.d(t,{J_:()=>o,rs:()=>i});var s=r(35309),n=r(59877);r(56572).Kg;const i=s.Yj,o=(n.Yj,e=>e.length>0);Symbol.iterator},32028:(e,t,r)=>{r.d(t,{wT:()=>i});var s=r(44862),n=r(27514);n.Tz,n.Te,n.Ez,n.L8,n.uV;const i=s.wT},22859:(e,t,r)=>{r.d(t,{L8:()=>i});var s=r(35309),n=r(59877);const i=(...e)=>e;s.PV,n.PV},30276:(e,t,r)=>{r.d(t,{BW:()=>o,Cz:()=>a,Hi:()=>f,WT:()=>l,ku:()=>h,sn:()=>d}),r(61369);var s=r(6517),n=r(94732),i=r(56572);Symbol.iterator;class o{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new o(this.self)}}class a{_state;constructor(e,t,r,s){return(0,i.wD)(t)&&(0,i.wD)(e)?(t=4294967295*Math.random()>>>0,e=0):(0,i.wD)(t)&&(t=e,e=0),(0,i.wD)(s)&&(0,i.wD)(r)?(s=this._state?this._state[3]:4150755663,r=this._state?this._state[2]:335903614):(0,i.wD)(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,(1|(s||0))>>>0]),this._next(),u(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(!((e>>>=0)&e-1))return this._next()&e-1;let t=0;const r=(-e>>>0)%e>>>0;for(t=this._next();t<r;t=this._next());return t%e}number(){return(1*(67108863&this._next())*134217728+1*(134217727&this._next()))/9007199254740992}_next(){const e=this._state[0]>>>0,t=this._state[1]>>>0;!function(e,t,r,s,n){let i=32557*(r>>>16)>>>0,o=19605*(65535&r)>>>0,a=32557*(65535&r)>>>0,u=19605*(r>>>16)+((o>>>16)+(i>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(u=u+1>>>0),i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(u=u+1>>>0),u=u+Math.imul(r,1481765933)>>>0,u=u+Math.imul(t,n)>>>0,e[0]=u,e[1]=a}(this._state,e,t,0,1284865837),u(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=e>>>18,s=(t>>>18|e<<14)>>>0;r=(r^e)>>>0,s=(s^t)>>>0;const n=(s>>>27|r<<5)>>>0,i=e>>>27;return(n>>>i|n<<((-i>>>0&31)>>>0))>>>0}}function u(e,t,r,s,n){let i=t+s>>>0;const o=r+n>>>0;o>>>0<r>>>0&&(i=i+1|0),e[0]=i,e[1]=o}const c=Symbol.for("effect/Utils/YieldWrap");class l{#e;constructor(e){this.#e=e}[c](){return this.#e}}function h(e){if("object"==typeof e&&null!==e&&c in e)return e[c]();throw new Error((0,n.k)("yieldWrapGet"))}const f=(0,s.V)("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),d=(e=>{const t={[e]:e=>e()};return function(r){return t[e](r)}})("effect_internal_function")},11174:(e,t,r)=>{r.d(t,{E:()=>s});const s=e=>e.length>0},68481:(e,t,r)=>{r.d(t,{Bq:()=>d,Ie:()=>c,J0:()=>f,Tk:()=>F,eM:()=>l,iG:()=>D,lq:()=>_});var s=r(28420),n=r(43977),i=r(5583),o=r(89425),a=r(77948),u=r(56572);const c={_tag:"Empty"},l=(e,t)=>({_tag:"Par",left:e,right:t}),h=(e,t)=>({_tag:"Seq",left:e,right:t}),f=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t}),d=e=>{let t=o.of(e),r=o.Ie();for(;;){const[e,s]=o.TS(t,[w(),o.Ie()],(([e,t],r)=>{const[s,n]=p(r);return[Y(e,s),o.u2(t,n)]}));if(r=g(r,e),o.gD(s))return o.BE(r);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},p=e=>{let t=e,r=w(),s=o.Ie(),n=o.Ie();for(;;)switch(t._tag){case"Empty":if(o.gD(s))return[r,n];t=s.head,s=s.tail;break;case"Par":s=o.qu(t.right,s),t=t.left;break;case"Seq":{const e=t.left,r=t.right;switch(e._tag){case"Empty":t=r;break;case"Par":{const s=e.left,n=e.right;t=l(h(s,r),h(n,r));break}case"Seq":{const s=e.left,n=e.right;t=h(s,h(n,r));break}case"Single":t=e,n=o.qu(r,n)}break}case"Single":if(r=k(r,t),o.gD(s))return[r,n];t=s.head,s=s.tail}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},g=(e,t)=>{if(o.gD(e))return o.of(E(t));if(N(t))return e;const r=A(e.head),s=T(t);return 1===r.length&&1===s.length&&n.aI(r[0],s[0])?o.qu(M(e.head,E(t)),e.tail):o.qu(E(t),e)},m=Symbol.for("effect/RequestBlock/Entry");class b{request;result;listeners;ownerId;state;[m]=y;constructor(e,t,r,s,n){this.request=e,this.result=t,this.listeners=r,this.ownerId=s,this.state=n}}const y={_R:e=>e},F=e=>(0,u.i5)(e,m),_=e=>new b(e.request,e.result,e.listeners,e.ownerId,e.state),v=Symbol.for("effect/RequestBlock/RequestBlockParallel"),I={_R:e=>e};class S{map;[v]=I;constructor(e){this.map=e}}const w=()=>new S(i.Ie()),k=(e,t)=>new S(i.qt(e.map,t.dataSource,(e=>a.ZK(a.Tj(e,s.BC(t.blockedRequest)),(()=>s.of(t.blockedRequest)))))),Y=(e,t)=>new S(i.TS(e.map,t.map,((e,t,r)=>i.hZ(e,r,a.YW(i.Jt(e,r),{onNone:()=>t,onSome:e=>s.u2(t,e)}))))),N=e=>i.Im(e.map),T=e=>Array.from(i.HP(e.map)),E=e=>R(i.Tj(e.map,(e=>s.of(e)))),O=Symbol.for("effect/RequestBlock/RequestBlockSequential"),x={_R:e=>e};class X{map;[O]=x;constructor(e){this.map=e}}const R=e=>new X(e),M=(e,t)=>new X(i.TS(t.map,e.map,((e,t,r)=>i.hZ(e,r,a.YW(i.Jt(e,r),{onNone:()=>s.Ie(),onSome:e=>s.u2(e,t)}))))),A=e=>Array.from(i.HP(e.map)),D=e=>Array.from(e.map)},8197:(e,t,r)=>{r.d(t,{PX:()=>S,hg:()=>ue,as:()=>ne,gR:()=>ce,RU:()=>H,F_:()=>N,Co:()=>K,rA:()=>re,Ie:()=>k,fJ:()=>Y,od:()=>$,vE:()=>V,e9:()=>L,pb:()=>pe,I6:()=>de,qI:()=>oe,Bq:()=>ae,Ki:()=>U,G:()=>T,FQ:()=>G,ml:()=>J,Aj:()=>x,Jq:()=>B,VY:()=>M,Im:()=>j,uH:()=>X,rv:()=>R,N6:()=>W,Ep:()=>A,fT:()=>q,t9:()=>z,I2:()=>P,yl:()=>D,AW:()=>Z,$7:()=>Q,Q6:()=>ee,Tj:()=>ie,YW:()=>ve,_7:()=>E,j9:()=>we,Yu:()=>Xe,TS:()=>Ie,og:()=>Se,il:()=>O,Ej:()=>C,rF:()=>Ee,el:()=>te,Rw:()=>se});var s=r(58600),n=r(28420),i=r(57964),o=r(43977),a=r(61369),u=r(6517),c=r(67337),l=r(49942),h=r(83845),f=r(77948),d=r(53533),p=r(56572),g=r(94732);const m="Die",b="Empty",y="Fail",F="Interrupt",_="Parallel",v="Sequential",I="effect/Cause",S=Symbol.for(I),w={[S]:{_E:e=>e},[c.HR](){return(0,a.Fs)(c.tW(I),c.kg(c.tW(he(this))),c.PO(this))},[o.HR](e){return x(e)&&le(this,e)},pipe(){return(0,d.t)(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:(0,h.U2)(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:(0,h.U2)(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:(0,h.U2)(this.left),right:(0,h.U2)(this.right)}}},toString(){return we(this)},[h.FX](){return this.toJSON()}},k=(()=>{const e=Object.create(w);return e._tag=b,e})(),Y=e=>{const t=Object.create(w);return t._tag=y,t.error=e,t},N=e=>{const t=Object.create(w);return t._tag=m,t.defect=e,t},T=e=>{const t=Object.create(w);return t._tag=F,t.fiberId=e,t},E=(e,t)=>{const r=Object.create(w);return r._tag=_,r.left=e,r.right=t,r},O=(e,t)=>{const r=Object.create(w);return r._tag=v,r.left=e,r.right=t,r},x=e=>(0,p.i5)(e,S),X=e=>e._tag===b,R=e=>e._tag===y,M=e=>e._tag===m,A=e=>e._tag===F,D=e=>e._tag===v,P=e=>e._tag===_,C=e=>Se(e,void 0,me),j=e=>e._tag===b||Ie(e,!0,((e,t)=>{switch(t._tag){case b:return f.zN(e);case m:case y:case F:return f.zN(!1);default:return f.dv()}})),W=e=>f.Ru($(e)),B=e=>f.Ru(K(e)),q=e=>f.Ru(G(e)),z=e=>Se(void 0,be)(e),L=e=>n.BE(Ie(e,n.Ie(),((e,t)=>t._tag===y?f.zN((0,a.Fs)(e,n.Hs(t.error))):f.dv()))),H=e=>n.BE(Ie(e,n.Ie(),((e,t)=>t._tag===m?f.zN((0,a.Fs)(e,n.Hs(t.defect))):f.dv()))),J=e=>Ie(e,l.Ie(),((e,t)=>t._tag===F?f.zN((0,a.Fs)(e,l.WQ(t.fiberId))):f.dv())),$=e=>de(e,(e=>e._tag===y?f.zN(e.error):f.dv())),V=e=>{const t=$(e);switch(t._tag){case"None":return i.pG(e);case"Some":return i.kb(t.value)}},K=e=>de(e,(e=>e._tag===m?f.zN(e.defect):f.dv())),U=e=>ve(e,{onEmpty:f.zN(k),onFail:e=>(0,a.Fs)(e,f.Tj(Y)),onDie:e=>f.zN(N(e)),onInterrupt:e=>f.zN(T(e)),onSequential:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(O(e.value,t.value)):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.dv(),onParallel:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(E(e.value,t.value)):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.dv()}),G=e=>de(e,(e=>e._tag===F?f.zN(e.fiberId):f.dv())),Z=e=>ve(e,{onEmpty:f.dv(),onFail:()=>f.dv(),onDie:e=>f.zN(N(e)),onInterrupt:()=>f.dv(),onSequential:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(O(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv(),onParallel:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(E(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv()}),Q=e=>ve(e,{onEmpty:f.dv(),onFail:e=>f.zN(N(e)),onDie:e=>f.zN(N(e)),onInterrupt:()=>f.dv(),onSequential:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(O(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv(),onParallel:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(E(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv()}),ee=e=>ve(e,{onEmpty:l.Ie(),onFail:e=>l.L8(Y(e)),onDie:e=>l.L8(N(e)),onInterrupt:e=>l.L8(T(e)),onSequential:(e,t)=>(0,a.Fs)(e,l.qI((e=>(0,a.Fs)(t,l.Tj((t=>O(e,t))))))),onParallel:(e,t)=>(0,a.Fs)(e,l.qI((e=>(0,a.Fs)(t,l.Tj((t=>E(e,t)))))))}),te=e=>ve(e,{onEmpty:k,onFail:()=>k,onDie:e=>N(e),onInterrupt:e=>T(e),onSequential:O,onParallel:E}),re=e=>ve(e,{onEmpty:k,onFail:e=>N(e),onDie:e=>N(e),onInterrupt:e=>T(e),onSequential:(e,t)=>O(e,t),onParallel:(e,t)=>E(e,t)}),se=(0,a.XY)(2,((e,t)=>ve(e,{onEmpty:f.zN(k),onFail:e=>f.zN(Y(e)),onDie:e=>{const r=t(e);return f.Ru(r)?f.dv():f.zN(N(e))},onInterrupt:e=>f.zN(T(e)),onSequential:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(O(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv(),onParallel:(e,t)=>f.Ru(e)&&f.Ru(t)?f.zN(E(e.value,t.value)):f.Ru(e)&&f.$I(t)?f.zN(e.value):f.$I(e)&&f.Ru(t)?f.zN(t.value):f.dv()}))),ne=(0,a.XY)(2,((e,t)=>ie(e,(()=>t)))),ie=(0,a.XY)(2,((e,t)=>oe(e,(e=>Y(t(e)))))),oe=(0,a.XY)(2,((e,t)=>ve(e,{onEmpty:k,onFail:e=>t(e),onDie:e=>N(e),onInterrupt:e=>T(e),onSequential:(e,t)=>O(e,t),onParallel:(e,t)=>E(e,t)}))),ae=e=>oe(e,a.D_),ue=(0,a.XY)(2,((e,t)=>(0,p.Tn)(t)?oe(e,t):oe(e,(()=>t)))),ce=(0,a.XY)(2,((e,t)=>t._tag===b||e===t||Ie(e,!1,((e,r)=>f.zN(e||le(r,t)))))),le=(e,t)=>{let r=n.of(e),s=n.of(t);for(;n.J_(r)&&n.J_(s);){const[e,t]=(0,a.Fs)(n.v4(r),Ie([l.Ie(),n.Ie()],(([e,t],r)=>{const[s,i]=ge(r);return f.zN([(0,a.Fs)(e,l.KC(s)),(0,a.Fs)(t,n.u2(i))])}))),[i,u]=(0,a.Fs)(n.v4(s),Ie([l.Ie(),n.Ie()],(([e,t],r)=>{const[s,i]=ge(r);return f.zN([(0,a.Fs)(e,l.KC(s)),(0,a.Fs)(t,n.u2(i))])})));if(!o.aI(e,i))return!1;r=t,s=u}return!0},he=e=>fe(n.of(e),n.Ie()),fe=(e,t)=>{for(;;){const[r,i]=(0,a.Fs)(e,s.TS([l.Ie(),n.Ie()],(([e,t],r)=>{const[s,i]=ge(r);return[(0,a.Fs)(e,l.KC(s)),(0,a.Fs)(t,n.u2(i))]}))),o=l.Ej(r)>0?(0,a.Fs)(t,n.Hs(r)):t;if(n.Im(i))return n.BE(o);e=i,t=o}throw new Error((0,g.k)("Cause.flattenCauseLoop"))},de=(0,a.XY)(2,((e,t)=>{const r=[e];for(;r.length>0;){const e=r.pop(),s=t(e);switch(s._tag){case"None":switch(e._tag){case v:case _:r.push(e.right),r.push(e.left)}break;case"Some":return s}}return f.dv()})),pe=(0,a.XY)(2,((e,t)=>Se(e,void 0,ye(t)))),ge=e=>{let t=e;const r=[];let s=l.Ie(),i=n.Ie();for(;void 0!==t;)switch(t._tag){case b:if(0===r.length)return[s,i];t=r.pop();break;case y:if(s=l.WQ(s,n.L8(t._tag,t.error)),0===r.length)return[s,i];t=r.pop();break;case m:if(s=l.WQ(s,n.L8(t._tag,t.defect)),0===r.length)return[s,i];t=r.pop();break;case F:if(s=l.WQ(s,n.L8(t._tag,t.fiberId)),0===r.length)return[s,i];t=r.pop();break;case v:switch(t.left._tag){case b:t=t.right;break;case v:t=O(t.left.left,O(t.left.right,t.right));break;case _:t=E(O(t.left.left,t.right),O(t.left.right,t.right));break;default:i=n.Hs(i,t.right),t=t.left}break;case _:r.push(t.right),t=t.left}throw new Error((0,g.k)("Cause.evaluateCauseLoop"))},me={emptyCase:()=>0,failCase:()=>1,dieCase:()=>1,interruptCase:()=>1,sequentialCase:(e,t,r)=>t+r,parallelCase:(e,t,r)=>t+r},be={emptyCase:a.ue,failCase:a.f4,dieCase:a.f4,interruptCase:a.ue,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r},ye=e=>({emptyCase:()=>k,failCase:(e,t)=>Y(t),dieCase:(e,t)=>N(t),interruptCase:(e,t)=>T(t),sequentialCase:(t,r,s)=>e(r)?e(s)?O(r,s):r:e(s)?s:k,parallelCase:(t,r,s)=>e(r)?e(s)?E(r,s):r:e(s)?s:k}),Fe="SequentialCase",_e="ParallelCase",ve=(0,a.XY)(2,((e,{onDie:t,onEmpty:r,onFail:s,onInterrupt:n,onParallel:i,onSequential:o})=>Se(e,void 0,{emptyCase:()=>r,failCase:(e,t)=>s(t),dieCase:(e,r)=>t(r),interruptCase:(e,t)=>n(t),sequentialCase:(e,t,r)=>o(t,r),parallelCase:(e,t,r)=>i(t,r)}))),Ie=(0,a.XY)(3,((e,t,r)=>{let s=t,n=e;const i=[];for(;void 0!==n;){const e=r(s,n);switch(s=f.Ru(e)?e.value:s,n._tag){case v:case _:i.push(n.right),n=n.left;break;default:n=void 0}void 0===n&&i.length>0&&(n=i.pop())}return s})),Se=(0,a.XY)(3,((e,t,r)=>{const s=[e],n=[];for(;s.length>0;){const e=s.pop();switch(e._tag){case b:n.push(i.pG(r.emptyCase(t)));break;case y:n.push(i.pG(r.failCase(t,e.error)));break;case m:n.push(i.pG(r.dieCase(t,e.defect)));break;case F:n.push(i.pG(r.interruptCase(t,e.fiberId)));break;case v:s.push(e.right),s.push(e.left),n.push(i.kb({_tag:Fe}));break;case _:s.push(e.right),s.push(e.left),n.push(i.kb({_tag:_e}))}}const o=[];for(;n.length>0;){const e=n.pop();switch(e._tag){case"Left":switch(e.left._tag){case Fe:{const e=o.pop(),s=o.pop(),n=r.sequentialCase(t,e,s);o.push(n);break}case _e:{const e=o.pop(),s=o.pop(),n=r.parallelCase(t,e,s);o.push(n);break}}break;case"Right":o.push(e.right)}}if(0===o.length)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()})),we=(e,t)=>z(e)?"All fibers interrupted without errors.":Xe(e).map((function(e){return!0!==t?.renderErrorCause||void 0===e.cause?e.stack:`${e.stack} {\n${ke(e.cause,"  ")}\n}`})).join("\n"),ke=(e,t)=>{const r=e.stack.split("\n");let s=`${t}[cause]: ${r[0]}`;for(let e=1,n=r.length;e<n;e++)s+=`\n${t}${r[e]}`;return e.cause&&(s+=` {\n${ke(e.cause,`${t}  `)}\n${t}}`),s};class Ye extends globalThis.Error{span=void 0;constructor(e){const t="object"==typeof e&&null!==e,r=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Ne(e),t&&"cause"in e&&void 0!==e.cause?{cause:new Ye(e.cause)}:void 0),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=r,this.name=e instanceof Error?e.name:"Error",t&&(xe in e&&(this.span=e[xe]),Object.keys(e).forEach((t=>{t in this||(this[t]=e[t])}))),this.stack=Oe(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const Ne=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if((0,p.i5)(e,"toString")&&(0,p.Tn)(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},Te=/\((.*)\)/,Ee=(0,u.V)("effect/Tracer/spanToTrace",(()=>new WeakMap)),Oe=(e,t,r)=>{const s=[e],n=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<n.length&&!n[e].includes("Generator.next");e++){if(n[e].includes("effect_internal_function")){s.pop();break}s.push(n[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let e=r,t=0;for(;e&&"Span"===e._tag&&t<10;){const r=Ee.get(e);if("function"==typeof r){const t=r();if("string"==typeof t){const r=t.match(Te),n=r?r[1]:t.replace(/^at /,"");s.push(`    at ${e.name} (${n})`)}else s.push(`    at ${e.name}`)}else s.push(`    at ${e.name}`);e=f.Y6(e.parent),t++}}return s.join("\n")},xe=Symbol.for("effect/SpanAnnotation"),Xe=e=>Se(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new Ye(t)],failCase:(e,t)=>[new Ye(t)],interruptCase:()=>[],parallelCase:(e,t,r)=>[...t,...r],sequentialCase:(e,t,r)=>[...t,...r]})},83136:(e,t,r)=>{r.d(t,{Td:()=>dt,gl:()=>ft,jG:()=>C,as:()=>j,NL:()=>W,r:()=>B,yO:()=>q,h9:()=>z,Fo:()=>H,Hh:()=>L,lN:()=>J,_O:()=>ne,sx:()=>ie,h1:()=>oe,d_:()=>ae,$t:()=>Q,Ze:()=>te,UP:()=>re,ye:()=>se,Bq:()=>ue,JE:()=>ce,Mr:()=>le,lX:()=>he,sV:()=>pe,qd:()=>fe,sw:()=>de,gJ:()=>ge,As:()=>be,S6:()=>ye,P4:()=>Fe,vV:()=>pt,Tj:()=>_e,WK:()=>ve,xm:()=>Ie,aW:()=>Se,zQ:()=>$,ky:()=>qe,K7:()=>V,fq:()=>K,aP:()=>U,_:()=>G,Vi:()=>Z,Hq:()=>we,qp:()=>ke,XV:()=>Ye,Um:()=>Ne,Es:()=>Te,Gn:()=>Ee,mL:()=>Oe,ZZ:()=>xe,B4:()=>Xe,zv:()=>Re,XQ:()=>Me,Zm:()=>Ae,Qg:()=>De,kS:()=>Pe,NW:()=>Ce,tw:()=>je,pR:()=>Be,Pf:()=>We,rG:()=>ze,LF:()=>Le,ZD:()=>He,eF:()=>Je,sZ:()=>$e,KE:()=>Ve,P1:()=>Ke,uz:()=>Ue,bk:()=>Ge,Vl:()=>Ze,TE:()=>et,oA:()=>rt,A2:()=>st,bU:()=>nt,fR:()=>it,f4:()=>ot,xs:()=>at,yU:()=>ct,pi:()=>lt,aN:()=>ht});var s=r(20634),n=r(28420),i=r(89702),o=r(62738),a=r(55519),u=r(57964),c=r(43977),l=r(96949),h=r(99571),f=r(45650),d=r(61369),p=r(86780),g=r(77948),m=r(56572),b=r(80677),y=r(35446),F=r(55040),_=r(8993),v=r(35679),I=r(30961);const S="BothRunning",w="LeftDone",k="RightDone",Y=Symbol.for("effect/ChannelMergeState"),N={[Y]:Y},T=(e,t)=>{const r=Object.create(N);return r._tag=S,r.left=e,r.right=t,r},E=e=>{const t=Object.create(N);return t._tag=w,t.f=e,t},O=e=>{const t=Object.create(N);return t._tag=k,t.f=e,t};var x=r(91816),X=r(53845),R=r(20808),M=r(29064),A=r(1980),D=r(9507),P=r(27514);const C=(e,t,r)=>M.qI(M.uS(F.L8((()=>a.void))),(s=>(0,d.Fs)(M.uS(a.uninterruptible(a.tap(e,(e=>F.hZ(s,(t=>r(e,t))))))),M.qI(t),M.sz((e=>a.flatMap(F.Jt(s),(t=>t(e)))))))),j=(0,d.XY)(2,((e,t)=>_e(e,(()=>t)))),W=e=>_e(e,d.Yi),B=e=>M.DY((()=>{const t=(e,r,s)=>rt(F.JP(s,(n=>r(n)?[M.$5({onInput:n=>M.qI(M.M9(n),(()=>t(e,r,s))),onFailure:e=>M.fJ(e),onDone:e=>M.B6(e)}),n]:[M.qI(M.M9(n),(()=>t(e,r,s))),e])));return t(e.empty,e.isEmpty,e.ref)})),q=e=>B({empty:n.Ie(),isEmpty:n.Im,ref:e}),z=(0,d.XY)(2,((e,t)=>M.uP(e,(e=>u.YW(s.vE(e),{onLeft:t,onRight:M.AT}))))),L=(0,d.XY)(2,((e,t)=>M.Ny(e,t,(()=>{}),(()=>{})))),H=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>g.YW(t(e),{onNone:()=>r,onSome:e=>M.qI(M.M9(e),(()=>r))}),onFailure:M.fJ,onDone:M.B6});return M.WK(e,r)})),J=e=>M.KO(e),$=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(e),(()=>r)),onFailure:M.fJ,onDone:e=>M.B6(t(e))});return M.WK(r,e)})),V=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(e),(()=>r)),onFailure:M.fJ,onDone:e=>M.uS(t(e))});return M.WK(r,e)})),K=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(e),(()=>r)),onFailure:e=>M.fJ(t(e)),onDone:M.B6});return M.WK(r,e)})),U=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(e),(()=>r)),onFailure:e=>M.uS(t(e)),onDone:M.B6});return M.WK(r,e)})),G=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(t(e)),(()=>r)),onFailure:M.fJ,onDone:M.B6});return M.WK(r,e)})),Z=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.qI(M.uS(t(e)),M.M9),(()=>r)),onFailure:M.fJ,onDone:M.B6});return M.WK(r,e)})),Q=e=>M.DY((()=>{const t=[];return(0,d.Fs)(M.WK(e,ee(t)),M.qI((e=>M.Py([n.Iv(t),e]))))})),ee=e=>M.$5({onInput:t=>M.qI(M.OH((()=>{e.push(t)})),(()=>ee(e))),onFailure:M.fJ,onDone:M.Py}),te=e=>{const t=M.u({onInput:()=>t,onFailure:M.AT,onDone:M.Py});return M.WK(e,t)},re=e=>M.qI(Q(e),M.M9),se=(0,d.XY)(2,((e,t)=>M.sz(e,(()=>t)))),ne=()=>M.uS(a.context()),ie=e=>_e(ne(),e),oe=e=>M.qI(ne(),e),ae=e=>ve(ne(),e),ue=e=>M.qI(e,d.D_),ce=(0,d.XY)(2,((e,t)=>M.Qr(e,{onFailure:e=>{const r=s.vE(e);switch(r._tag){case"Left":return t.onFailure(r.left);case"Right":return M.AT(r.right)}},onSuccess:t.onSuccess}))),le=e=>M.DY((()=>u.YW(e,{onLeft:M.fJ,onRight:M.Py}))),he=e=>rt(e.takeWith(M.AT,(t=>M.qI(M.M9(t),(()=>he(e)))),M.Py)),fe=e=>st(a.map(b.B1(e),ge)),de=e=>a.map(b.B1(e),ge),pe=e=>M.DY((()=>g.YW(e,{onNone:()=>M.fJ(g.dv()),onSome:M.Py}))),ge=e=>M.DY((()=>me(e))),me=e=>(0,d.Fs)(M.uS(y.s(e)),M.qI(u.YW({onLeft:l.YW({onFailure:M.AT,onSuccess:M.B6}),onRight:t=>M.qI(M.M9(t),(()=>me(e)))}))),be=()=>M.$5({onInput:e=>M.qI(M.M9(e),(()=>be())),onFailure:M.fJ,onDone:M.B6}),ye=(0,d.XY)(2,((e,t)=>Me(e,{other:M.uS(t),onSelfDone:e=>I.RS(a.suspend((()=>e))),onOtherDone:e=>I.RS(a.suspend((()=>e)))}))),Fe=(0,d.XY)(2,((e,t)=>ye(e,o.Tx(t)))),_e=(0,d.XY)(2,((e,t)=>M.qI(e,(e=>M.OH((()=>t(e))))))),ve=(0,d.XY)(2,((e,t)=>M.qI(e,(e=>M.uS(t(e)))))),Ie=(0,d.XY)(2,((e,t)=>Se(e,s.Tj(t)))),Se=(0,d.XY)(2,((e,t)=>M.uP(e,(e=>M.AT(t(e)))))),we=(0,d.XY)(2,((e,t)=>{const r=M.$5({onInput:e=>M.qI(M.M9(t(e)),(()=>r)),onFailure:M.fJ,onDone:M.B6});return M.WK(e,r)})),ke=(0,d.XY)(2,((e,t)=>{const r=M.u({onInput:e=>(0,d.Fs)(M.uS(t(e)),M.qI(M.M9),M.qI((()=>r))),onFailure:M.AT,onDone:M.B6});return M.WK(e,r)})),Ye=(0,d.XY)(3,((e,t,r)=>(0,d.Fs)(a.gen((function*(s){const n=yield*s(a.acquireRelease(y.Mm(r),(e=>y.n_(e)))),i=yield*s(o.L8()),c=r===Number.POSITIVE_INFINITY?e=>d.D_:(yield*s(a.makeSemaphore(r))).withPermits,l=yield*s(Ze(e));return yield*s(a.matchCauseEffect(l,{onFailure:e=>y.x(n,a.failCause(e)),onSuccess:e=>u.YW(e,{onLeft:e=>{const t=c(r);return a.zipRight(a.interruptible(t(a.void)),a.asVoid(y.x(n,a.succeed(u.kb(e)))))},onRight:e=>a.gen((function*(r){const s=yield*r(o.L8()),l=yield*r(o.L8());yield*r(a.asVoid(y.x(n,a.map(o.Tx(s),u.pG)))),yield*r(o.Py(l,void 0),a.zipRight((0,d.Fs)(a.uninterruptibleMask((r=>(0,d.Fs)(a.exit(r(o.Tx(i))),a.raceFirst(a.exit(r(t(e)))),a.flatMap((e=>a.suspend((()=>e))))))),a.tapErrorCause((e=>o.AT(i,e))),a.intoDeferred(s))),c(1),a.forkScoped),yield*r(o.Tx(l))}))})}),a.forever,a.interruptible,a.forkScoped),n})),a.map((e=>{const t=rt(a.matchCause(a.flatten(y.s(e)),{onFailure:M.AT,onSuccess:u.YW({onLeft:M.B6,onRight:e=>M.qI(M.M9(e),(()=>t))})}));return t})),st))),Ne=e=>t=>Oe(e)(t,d.Yi),Te=e=>Oe({concurrency:"unbounded"})(e,d.Yi),Ee=(e,t)=>Oe({concurrency:"unbounded"})(e,t),Oe=({bufferSize:e=16,concurrency:t,mergeStrategy:r=x.N4()})=>(n,i)=>(0,d.Fs)(a.gen((function*(c){const l="unbounded"===t?Number.MAX_SAFE_INTEGER:t,f=yield*c(X.L()),p=he(f),m=yield*c(a.acquireRelease(y.Mm(e),(e=>y.n_(e)))),b=yield*c(a.acquireRelease(y.dT(),(e=>y.n_(e)))),_=yield*c(F.L8(g.dv())),v=yield*c(o.L8()),I=(yield*c(a.makeSemaphore(l))).withPermits,S=yield*c(Ze(n)),w=e=>(0,d.Fs)(a.flatMap(e,u.YW({onLeft:e=>a.succeed(g.zN(e)),onRight:e=>a.as(y.x(m,a.succeed(u.pG(e))),g.dv())})),a.repeat({until:e=>g.Ru(e)}),a.flatMap((e=>F.yo(_,g.YW({onNone:()=>g.zN(e.value),onSome:t=>g.zN(i(t,e.value))})))),a.catchAllCause((e=>s.fT(e)?a.failCause(e):(0,d.Fs)(y.x(m,a.failCause(e)),a.zipRight(o.Py(v,void 0)),a.asVoid))));return yield*c(a.matchCauseEffect(S,{onFailure:e=>(0,d.Fs)(y.x(m,a.failCause(e)),a.zipRight(a.succeed(!1))),onSuccess:u.YW({onLeft:e=>a.raceWith(a.interruptible(o.Tx(v)),a.interruptible(I(l)(a.void)),{onSelfDone:(e,t)=>a.as(h.G(t),!1),onOtherDone:(t,r)=>a.zipRight(h.G(r),(0,d.Fs)(F.Jt(_),a.flatMap(g.YW({onNone:()=>y.x(m,a.succeed(u.kb(e))),onSome:t=>y.x(m,a.succeed(u.kb(i(t,e))))})),a.as(!1)))}),onRight:e=>x.YW(r,{onBackPressure:()=>a.gen((function*(t){const r=yield*t(o.L8()),s=(0,d.Fs)(p,M.WK(e),Ze,a.flatMap((e=>a.race(w(e),a.interruptible(o.Tx(v))))),a.scoped);return yield*t(o.Py(r,void 0),a.zipRight(s),I(1),a.forkScoped),yield*t(o.Tx(r)),!(yield*t(o.$L(v)))})),onBufferSliding:()=>a.gen((function*(t){const r=yield*t(o.L8()),s=yield*t(o.L8()),n=yield*t(y.Ej(b));yield*t(y.s(b),a.flatMap((e=>o.Py(e,void 0))),a.when((()=>n>=l))),yield*t(y.x(b,r));const i=(0,d.Fs)(p,M.WK(e),Ze,a.flatMap((e=>(0,d.Fs)(w(e),a.race(a.interruptible(o.Tx(v))),a.race(a.interruptible(o.Tx(r)))))),a.scoped);return yield*t(o.Py(s,void 0),a.zipRight(i),I(1),a.forkScoped),yield*t(o.Tx(s)),!(yield*t(o.$L(v)))}))})})}),a.repeat({while:e=>e}),a.forkScoped),[m,f]})),a.map((([e,t])=>{const r=(0,d.Fs)(y.s(e),a.flatten,a.matchCause({onFailure:M.AT,onSuccess:u.YW({onLeft:M.B6,onRight:e=>M.qI(M.M9(e),(()=>r))})}),rt);return M.wO(r,t)})),st),xe=(0,d.XY)(3,((e,t,r)=>Ne(r)(we(e,t)))),Xe=(0,d.XY)(2,((e,t)=>Ne({concurrency:t})(we(e,d.D_)))),Re=(0,d.XY)(3,((e,t,r)=>Oe({concurrency:t})(we(e,d.D_),r))),Me=(0,d.XY)(2,((e,t)=>st(a.flatMap(X.L(),(r=>{const s=he(r);return a.map(a.all([Ze(M.WK(s,e)),Ze(M.WK(s,t.other)),a.scope]),(([e,s,n])=>{const i=(e,t,r)=>(s,n,i)=>{const c=e=>{const r=e;return r._tag===A.P?a.succeed(M.uS(a.zipRight(h.G(t),r.effect))):a.map(h.Tx(t),l.YW({onFailure:e=>M.uS(r.f(l.AT(e))),onSuccess:u.YW({onLeft:e=>M.uS(r.f(l.Py(e))),onRight:e=>ht(M.M9(e),o(i(r.f)))})}))};return l.YW(e,{onFailure:e=>c(s(l.AT(e))),onSuccess:u.YW({onLeft:e=>c(s(l.Py(e))),onRight:e=>a.succeed(M.qI(M.M9(e),(()=>M.qI(M.uS(a.forkDaemon(r)),(e=>o(n(e,t)))))))})})},o=r=>{switch(r._tag){case S:{const n=a.interruptible(h.fj(r.left)),o=a.interruptible(h.fj(r.right));return rt(a.raceWith(n,o,{onSelfDone:(s,n)=>a.zipRight(h.G(n),i(s,r.right,e)(t.onSelfDone,T,(e=>E(e)))),onOtherDone:(e,n)=>a.zipRight(h.G(n),i(e,r.left,s)(t.onOtherDone,((e,t)=>T(t,e)),(e=>O(e))))}))}case w:return rt(a.map(a.exit(s),l.YW({onFailure:e=>M.uS(r.f(l.AT(e))),onSuccess:u.YW({onLeft:e=>M.uS(r.f(l.Py(e))),onRight:e=>M.qI(M.M9(e),(()=>o(E(r.f))))})})));case k:return rt(a.map(a.exit(e),l.YW({onFailure:e=>M.uS(r.f(l.AT(e))),onSuccess:u.YW({onLeft:e=>M.uS(r.f(l.Py(e))),onRight:e=>M.qI(M.M9(e),(()=>o(O(r.f))))})})))}};return(0,d.Fs)(M.uS(a.zipWith(a.forkIn(e,n),a.forkIn(s,n),((e,t)=>T(e,t)))),M.qI(o),M.wO(r))}))}))))),Ae=M.uS(a.never),De=(0,d.XY)(2,((e,t)=>Pe(e,t))),Pe=(0,d.XY)(2,((e,t)=>z(e,(e=>{throw t(e)})))),Ce=(0,d.XY)(2,((e,t)=>z(e,t))),je=(0,d.XY)(2,((e,t)=>M.DY((()=>{let r;const n=M.$5({onInput:e=>M.qI(M.M9(e),(()=>n)),onFailure:e=>(r=dt(e),M.AT(s.F_(r))),onDone:M.B6}),i=M.u({onInput:e=>(0,d.Fs)(M.M9(e),M.qI((()=>i))),onFailure:e=>s.VY(e)&&pt(e.defect)&&c.aI(e.defect,r)?M.fJ(e.defect.error):M.AT(e),onDone:M.B6});return M.WK(M.WK(M.WK(e,n),t),i)})))),We=(0,d.XY)(3,((e,t,r)=>M.qI(ne(),(s=>M.Pp(e,i.WQ(s,t,r)))))),Be=(0,d.XY)(2,((e,t)=>st(a.map(p.jq(t),(t=>M.Pp(e,t)))))),qe=(0,d.XY)(2,((e,t)=>oe((r=>M.Pp(e,t(r)))))),ze=(0,d.XY)(2,((e,t)=>Be(e,p.h1(p._O(),t)))),Le=()=>M.Ml(g.dv()),He=e=>M.qI(e,(()=>He(e))),Je=e=>a.scoped(v.M_(e)),$e=e=>v.eF(M.ye(e)),Ve=e=>v.eF(te(e)),Ke=e=>rt(a.uninterruptibleMask((t=>a.map(_.L8(),(r=>M.Ih(a.tapErrorCause(t(_.X$(e,r)),(e=>_.VN(r,l.AT(e)))),((e,t)=>_.VN(r,t)))))))),Ue=()=>M.DY((()=>{let e="",t=!1;const r=M.u({onInput:s=>{const i=(r=>{const s=[];return n.Tj(r,(r=>{if(0!==r.length){let n=0,i=r.indexOf("\r"),o=r.indexOf("\n");for(t&&(0===o?(s.push(e),e="",n=1,o=r.indexOf("\n",n)):e+="\r",t=!1);-1!==i||-1!==o;)-1===i||-1!==o&&o<i?(0===e.length?s.push(r.substring(n,o)):(s.push(e+r.substring(n,o)),e=""),n=o+1,o=r.indexOf("\n",n)):r.length===i+1?(t=!0,i=-1):o===i+1?(0===e.length?s.push(r.substring(n,i)):(e+=r.substring(n,i),s.push(e),e=""),n=i+2,i=r.indexOf("\r",n),o=r.indexOf("\n",n)):i=r.indexOf("\r",i+1);e+=t?r.substring(n,r.length-1):r.substring(n,r.length)}})),n.Iv(s)})(s);return n.Im(i)?r:M.qI(M.M9(i),(()=>r))},onFailure:t=>0===e.length?M.AT(t):M.qI(M.M9(n.of(e)),(()=>M.AT(t))),onDone:t=>0===e.length?M.Py(t):M.qI(M.M9(n.of(e)),(()=>M.Py(t)))});return r})),Ge=e=>et(e),Ze=e=>a.map(a.acquireRelease(a.sync((()=>new v.xM(e,void 0,d.D_))),((e,t)=>{const r=e.close(t);return void 0===r?a.void:r})),(e=>a.suspend((()=>Qe(e.run(),e))))),Qe=(e,t)=>{const r=e;switch(r._tag){case D.PC:return l.YW(t.getDone(),{onFailure:a.failCause,onSuccess:e=>a.succeed(u.kb(e))});case D.AV:return a.succeed(u.pG(t.getEmit()));case D.Rc:return(0,d.Fs)(r.effect,a.flatMap((()=>Qe(t.run(),t))));case D.db:return v._6(r,(()=>Qe(t.run(),t)),(e=>a.failCause(e)))}},et=e=>M.DY((()=>tt(e))),tt=e=>M.u({onInput:t=>M.qI(M.uS(y.x(e,u.pG(t))),(()=>tt(e))),onFailure:t=>M.uS((0,d.Fs)(y.x(e,u.kb(l.AT(t))))),onDone:t=>M.uS((0,d.Fs)(y.x(e,u.kb(l.Py(t)))))}),rt=e=>ue(M.uS(e)),st=e=>M.sF(Ke(e),((e,t)=>e),((e,t)=>e)),nt=(0,d.XY)(3,((e,t,r)=>qe(e,(e=>i.h1(e,i.L8(t,r(i.$v(e,t)))))))),it=function(){const e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],r=P.ZA(e?arguments[2]:arguments[1]),s=a.all([a.makeSpan(t,r),a.context(),a.clock,f.Jt(f.QY)]);if(e){const e=arguments[0];return C(s,(([t,r])=>M.Pp(e,i.WQ(r,P.Te,t))),(([e,,t,r],s)=>R.ex(e,s,t,r)))}return e=>C(s,(([t,r])=>M.Pp(e,i.WQ(r,P.Te,t))),(([e,,t,r],s)=>R.ex(e,s,t,r)))},ot=(...e)=>at(n.Ts(e)),at=e=>ut(0,e.length,e),ut=(e,t,r)=>e===t?M.rI:(0,d.Fs)(M.M9((0,d.Fs)(r,n.$v(e))),M.qI((()=>ut(e+1,t,r)))),ct=(0,d.XY)((e=>M.IV(e[1])),((e,t,r)=>r?.concurrent?Me(e,{other:t,onSelfDone:e=>I.jD((t=>a.suspend((()=>l.yU(e,t))))),onOtherDone:e=>I.jD((t=>a.suspend((()=>l.yU(t,e)))))}):M.qI(e,(e=>_e(t,(t=>[e,t])))))),lt=(0,d.XY)((e=>M.IV(e[1])),((e,t,r)=>r?.concurrent?_e(ct(e,t,{concurrent:!0}),(e=>e[0])):M.qI(e,(e=>j(t,e))))),ht=(0,d.XY)((e=>M.IV(e[1])),((e,t,r)=>r?.concurrent?_e(ct(e,t,{concurrent:!0}),(e=>e[1])):M.qI(e,(()=>t)))),ft=Symbol.for("effect/Channel/ChannelException"),dt=e=>({_tag:"ChannelException",[ft]:ft,error:e}),pt=e=>(0,m.i5)(e,ft)},35679:(e,t,r)=>{r.d(t,{xM:()=>C,_6:()=>B,eF:()=>q,M_:()=>z});var s=r(20634),n=r(62738),i=r(55519),o=r(92102),a=r(96949),u=r(99571),c=r(61369),l=r(77948),h=r(8993),f=r(29064),d=r(93904),p=r(55451),g=r(9507),m=r(60827),b=r(70052);const y=Symbol.for("effect/ChannelState"),F={[y]:{_E:e=>e,_R:e=>e}},_=()=>{const e=Object.create(F);return e._tag=g.PC,e},v=()=>{const e=Object.create(F);return e._tag=g.AV,e},I=e=>{const t=Object.create(F);return t._tag=g.Rc,t.effect=e,t},S=(e,t,r,s)=>{const n=Object.create(F);return n._tag=g.db,n.upstream=e,n.onEffect=t,n.onEmit=r,n.onDone=s,n},w=e=>e._tag===g.Rc,k=e=>w(e)?i.ignore(e.effect):void 0;var Y=r(93608);const N="PullFromChild",T="PullFromUpstream",E="DrainChildExecutors",O="Emit";class x{childExecutor;parentSubexecutor;onEmit;_tag=N;constructor(e,t,r){this.childExecutor=e,this.parentSubexecutor=t,this.onEmit=r}close(e){const t=this.childExecutor.close(e),r=this.parentSubexecutor.close(e);return void 0!==t&&void 0!==r?i.zipWith(i.exit(t),i.exit(r),((e,t)=>(0,c.Fs)(e,a.aN(t)))):void 0!==t?t:void 0!==r?r:void 0}enqueuePullFromChild(e){return this}}class X{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=T;constructor(e,t,r,s,n,i,o,a){this.upstreamExecutor=e,this.createChild=t,this.lastDone=r,this.activeChildExecutors=s,this.combineChildResults=n,this.combineWithChildResult=i,this.onPull=o,this.onEmit=a}close(e){const t=this.upstreamExecutor.close(e);return[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>a.aN(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0)}enqueuePullFromChild(e){return new X(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class R{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=E;constructor(e,t,r,s,n,i,o){this.upstreamExecutor=e,this.lastDone=t,this.activeChildExecutors=r,this.upstreamDone=s,this.combineChildResults=n,this.combineWithChildResult=i,this.onPull=o}close(e){const t=this.upstreamExecutor.close(e);return[...this.activeChildExecutors.map((t=>void 0!==t?t.childExecutor.close(e):void 0)),t].reduce(((e,t)=>void 0!==e&&void 0!==t?i.zipWith(e,i.exit(t),((e,t)=>a.aN(e,t))):void 0!==e?e:void 0!==t?i.exit(t):void 0),void 0)}enqueuePullFromChild(e){return new R(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class M{value;next;_tag=O;constructor(e,t){this.value=e,this.next=t}close(e){return this.next.close(e)}enqueuePullFromChild(e){return this}}const A=Symbol.for("effect/ChannelUpstreamPullRequest"),D={[A]:{_A:e=>e}},P=e=>{const t=Object.create(D);return t._tag="Pulled",t.value=e,t};class C{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,t,r){this._currentChannel=e,this._executeCloseLastSubstream=r,this._providedEnv=t}run(){let e;for(;void 0===e;)if(void 0!==this._cancelled)e=this.processCancellation();else if(void 0!==this._activeSubexecutor)e=this.runSubexecutor();else try{if(void 0===this._currentChannel)e=_();else if(i.isEffect(this._currentChannel))this._currentChannel=f.uS(this._currentChannel);else switch(this._currentChannel._tag){case d.G3:e=this.runBracketOut(this._currentChannel);break;case d.Ai:{const t=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,void 0!==this._input){const r=this._input;this._input=void 0;const s=()=>i.flatMap(t.awaitRead(),(()=>i.suspend((()=>{const e=r.run();switch(e._tag){case g.PC:return a.YW(r.getDone(),{onFailure:e=>t.error(e),onSuccess:e=>t.done(e)});case g.AV:return i.flatMap(t.emit(r.getEmit()),(()=>s()));case g.Rc:return i.matchCauseEffect(e.effect,{onFailure:e=>t.error(e),onSuccess:()=>s()});case g.db:return B(e,(()=>s()),(e=>t.error(e)))}}))));e=I(i.flatMap(i.forkDaemon(s()),(e=>i.sync((()=>this.addFinalizer((t=>i.flatMap(u.G(e),(()=>i.suspend((()=>{const e=this.restorePipe(t,r);return void 0!==e?e:i.void})))))))))))}break}case d.dr:{const e=new C(this._currentChannel.value(),this._providedEnv,(e=>i.sync((()=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;this._closeLastSubstream=(0,c.Fs)(t,i.zipRight(e))}))));e._input=this._input;const t=this._currentChannel;this._activeSubexecutor=new X(e,(e=>t.k(e)),void 0,[],((e,r)=>t.combineInners(e,r)),((e,r)=>t.combineAll(e,r)),(e=>t.onPull(e)),(e=>t.onEmit(e))),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case d.AV:this._emitted=this._currentChannel.out,this._currentChannel=void 0!==this._activeSubexecutor?void 0:f.rI,e=v();break;case d.su:this.runEnsuring(this._currentChannel);break;case d.PS:e=this.doneHalt(this._currentChannel.error());break;case d.GE:this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break;case d.Rc:{const t=void 0===this._providedEnv?this._currentChannel.effect():(0,c.Fs)(this._currentChannel.effect(),i.provide(this._providedEnv));e=I(i.matchCauseEffect(t,{onFailure:e=>{const t=this.doneHalt(e);return void 0!==t&&w(t)?t.effect:i.void},onSuccess:e=>{const t=this.doneSucceed(e);return void 0!==t&&w(t)?t.effect:i.void}}));break}case d.RY:{const e=this._input,t=new C(this._currentChannel.left(),this._providedEnv,(e=>this._executeCloseLastSubstream(e)));t._input=e,this._input=t,this.addFinalizer((t=>{const r=this.restorePipe(t,e);return void 0!==r?r:i.void})),this._currentChannel=this._currentChannel.right();break}case d.Yj:{const e=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer((()=>i.sync((()=>{this._providedEnv=e}))));break}case d.db:{const t=this._currentChannel;e=S(this._input,c.D_,(e=>{try{this._currentChannel=t.more(e)}catch(e){this._currentChannel=t.done.onExit(a.F_(e))}}),(e=>{this._currentChannel=(e=>t.done.onExit(e))(e)}));break}case d.l_:e=this.doneSucceed(this._currentChannel.evaluate());break;case d.ky:e=this.doneSucceed(this._currentChannel.terminal);break;case d.FG:this._currentChannel=this._currentChannel.channel();break;default:this._currentChannel._tag}}catch(e){this._currentChannel=f.AT(s.F_(e))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){const t=[];let r=this._doneStack.pop();for(;r;)"ContinuationFinalizer"===r._tag&&t.push(r.finalizer),r=this._doneStack.pop();const s=0===t.length?i.void:W(t,e);return this.storeInProgressFinalizer(s),s}popNextFinalizers(){const e=[];for(;0!==this._doneStack.length;){const t=this._doneStack[this._doneStack.length-1];if(t._tag===b.g)return e;e.push(t),this._doneStack.pop()}return e}restorePipe(e,t){const r=this._input;return this._input=t,void 0!==r?r.close(e):i.void}close(e){let t;const r=this._inProgressFinalizer;let s;void 0!==r&&(t=(0,c.Fs)(r,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const n=this.popAllFinalizers(e);void 0!==n&&(s=(0,c.Fs)(n,i.ensuring(i.sync((()=>this.clearInProgressFinalizer())))));const o=void 0===this._activeSubexecutor?void 0:this._activeSubexecutor.close(e);if(void 0!==o||void 0!==t||void 0!==s)return(0,c.Fs)(i.exit(j(o)),i.zip(i.exit(j(t))),i.zip(i.exit(j(s))),i.map((([[e,t],r])=>(0,c.Fs)(e,a.aN(t),a.aN(r)))),i.uninterruptible,i.flatMap((e=>i.suspend((()=>e)))))}doneSucceed(e){if(0===this._doneStack.length)return this._done=a.Py(e),this._currentChannel=void 0,_();const t=this._doneStack[this._doneStack.length-1];if(t._tag===b.g)return this._doneStack.pop(),void(this._currentChannel=t.onSuccess(e));const r=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=r.reverse(),this._done=a.Py(e),this._currentChannel=void 0,_();const s=W(r.map((e=>e.finalizer)),a.Py(e));this.storeInProgressFinalizer(s);const n=(0,c.Fs)(s,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneSucceed(e))))));return I(n)}doneHalt(e){if(0===this._doneStack.length)return this._done=a.AT(e),this._currentChannel=void 0,_();const t=this._doneStack[this._doneStack.length-1];if(t._tag===b.g)return this._doneStack.pop(),void(this._currentChannel=t.onHalt(e));const r=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=r.reverse(),this._done=a.AT(e),this._currentChannel=void 0,_();const s=W(r.map((e=>e.finalizer)),a.AT(e));this.storeInProgressFinalizer(s);const n=(0,c.Fs)(s,i.ensuring(i.sync((()=>this.clearInProgressFinalizer()))),i.uninterruptible,i.flatMap((()=>i.sync((()=>this.doneHalt(e))))));return I(n)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,_()}runBracketOut(e){const t=i.uninterruptible(i.matchCauseEffect(this.provide(e.acquire()),{onFailure:e=>i.sync((()=>{this._currentChannel=f.AT(e)})),onSuccess:t=>i.sync((()=>{this.addFinalizer((r=>this.provide(e.finalizer(t,r)))),this._currentChannel=f.M9(t)}))}));return I(t)}provide(e){return void 0===this._providedEnv?e:(0,c.Fs)(e,i.provide(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new Y.iI(e))}runSubexecutor(){const e=this._activeSubexecutor;switch(e._tag){case N:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case T:return this.pullFromUpstream(e);case E:return this.drainChildExecutors(e);case O:return this._emitted=e.value,this._activeSubexecutor=e.next,v()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){const t=a.YW(e,{onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)});return this._activeSubexecutor=void 0,void 0===t?i.void:(e=>w(e)?e.effect:i.void)(t)}finishSubexecutorWithCloseEffect(e,...t){this.addFinalizer((()=>(0,c.Fs)(t,i.forEach((t=>(0,c.Fs)(i.sync((()=>t(e))),i.flatMap((e=>void 0!==e?e:i.void)))),{discard:!0}))));const r=(0,c.Fs)(e,a.YW({onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)}));return this._activeSubexecutor=void 0,r}applyUpstreamPullStrategy(e,t,r){switch(r._tag){case m.L:{const s=!e||t.some((e=>void 0!==e));return[r.emitSeparator,s?[void 0,...t]:t]}case m.o:{const s=!e||t.some((e=>void 0!==e));return[r.emitSeparator,s?[...t,void 0]:t]}}}pullFromChild(e,t,r,s){return S(e,c.D_,(n=>{const i=r(n);switch(i._tag){case p.SX:break;case p.T7:this.finishWithDoneValue(e,t,i.value);break;case p.u4:{const e=t.enqueuePullFromChild(s);this.replaceSubexecutor(e);break}}this._activeSubexecutor=new M(n,this._activeSubexecutor)}),a.YW({onFailure:r=>{const s=this.handleSubexecutorFailure(e,t,r);return void 0===s?void 0:k(s)},onSuccess:r=>{this.finishWithDoneValue(e,t,r)}}))}finishWithDoneValue(e,t,r){const s=t;switch(s._tag){case T:{const t=new X(s.upstreamExecutor,s.createChild,void 0!==s.lastDone?s.combineChildResults(s.lastDone,r):r,s.activeChildExecutors,s.combineChildResults,s.combineWithChildResult,s.onPull,s.onEmit);this._closeLastSubstream=e.close(a.Py(r)),this.replaceSubexecutor(t);break}case E:{const t=new R(s.upstreamExecutor,void 0!==s.lastDone?s.combineChildResults(s.lastDone,r):r,s.activeChildExecutors,s.upstreamDone,s.combineChildResults,s.combineWithChildResult,s.onPull);this._closeLastSubstream=e.close(a.Py(r)),this.replaceSubexecutor(t);break}}}handleSubexecutorFailure(e,t,r){return this.finishSubexecutorWithCloseEffect(a.AT(r),(e=>t.close(e)),(t=>e.close(t)))}pullFromUpstream(e){if(0===e.activeChildExecutors.length)return this.performPullFromUpstream(e);const t=e.activeChildExecutors[0],r=new X(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(void 0===t)return this.performPullFromUpstream(r);this.replaceSubexecutor(new x(t.childExecutor,r,t.onEmit))}performPullFromUpstream(e){return S(e.upstreamExecutor,(e=>{const t=void 0===this._closeLastSubstream?i.void:this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,c.Fs)(this._executeCloseLastSubstream(t),i.zipRight(e))}),(t=>{if(void 0!==this._closeLastSubstream){const r=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,c.Fs)(this._executeCloseLastSubstream(r),i.map((()=>{const r=new C(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);r._input=this._input;const[s,n]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(P(t)));this._activeSubexecutor=new x(r,new X(e.upstreamExecutor,e.createChild,e.lastDone,n,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),l.Ru(s)&&(this._activeSubexecutor=new M(s.value,this._activeSubexecutor))})))}const r=new C(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);r._input=this._input;const[s,n]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(P(t)));this._activeSubexecutor=new x(r,new X(e.upstreamExecutor,e.createChild,e.lastDone,n,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),l.Ru(s)&&(this._activeSubexecutor=new M(s.value,this._activeSubexecutor))}),(t=>{if(e.activeChildExecutors.some((e=>void 0!==e))){const t=new R(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(void 0!==this._closeLastSubstream){const e=this._closeLastSubstream;return this._closeLastSubstream=void 0,(0,c.Fs)(this._executeCloseLastSubstream(e),i.map((()=>this.replaceSubexecutor(t))))}return void this.replaceSubexecutor(t)}const r=this._closeLastSubstream,s=this.finishSubexecutorWithCloseEffect((0,c.Fs)(t,a.Tj((t=>e.combineWithChildResult(e.lastDone,t)))),(()=>r),(t=>e.upstreamExecutor.close(t)));return void 0===s?void 0:k(s)}))}drainChildExecutors(e){if(0===e.activeChildExecutors.length){const t=this._closeLastSubstream;return void 0!==t&&this.addFinalizer((()=>i.succeed(t))),this.finishSubexecutorWithCloseEffect(e.upstreamDone,(()=>t),(t=>e.upstreamExecutor.close(t)))}const t=e.activeChildExecutors[0],r=e.activeChildExecutors.slice(1);if(void 0===t){const[t,s]=this.applyUpstreamPullStrategy(!0,r,e.onPull((e=>{const t=Object.create(D);return t._tag="NoUpstream",t.activeDownstreamCount=e,t})(r.reduce(((e,t)=>void 0!==t?e+1:e),0))));return this.replaceSubexecutor(new R(e.upstreamExecutor,e.lastDone,s,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),l.Ru(t)?(this._emitted=t.value,v()):void 0}const s=new R(e.upstreamExecutor,e.lastDone,r,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new x(t.childExecutor,s,t.onEmit))}}const j=e=>void 0!==e?e:i.void,W=(e,t)=>(0,c.Fs)(i.forEach(e,(e=>i.exit(e(t)))),i.map((e=>(0,c.Fs)(a.Q7(e),l.WL((()=>a.rI))))),i.flatMap((e=>i.suspend((()=>e))))),B=(e,t,r)=>{const s=[e],n=()=>{const e=s.pop();if(void 0===e||void 0===e.upstream)return i.dieMessage("Unexpected end of input for channel execution");const o=e.upstream.run();switch(o._tag){case g.AV:{const o=e.onEmit(e.upstream.getEmit());return 0===s.length?void 0===o?i.suspend(t):(0,c.Fs)(o,i.matchCauseEffect({onFailure:r,onSuccess:t})):void 0===o?i.suspend((()=>n())):(0,c.Fs)(o,i.matchCauseEffect({onFailure:r,onSuccess:()=>n()}))}case g.PC:{const o=e.onDone(e.upstream.getDone());return 0===s.length?void 0===o?i.suspend(t):(0,c.Fs)(o,i.matchCauseEffect({onFailure:r,onSuccess:t})):void 0===o?i.suspend((()=>n())):(0,c.Fs)(o,i.matchCauseEffect({onFailure:r,onSuccess:()=>n()}))}case g.Rc:return s.push(e),(0,c.Fs)(e.onEffect(o.effect),i.catchAllCause((t=>i.suspend((()=>{const r=e.onDone(a.AT(t));return void 0===r?i.void:r})))),i.matchCauseEffect({onFailure:r,onSuccess:()=>n()}));case g.db:return s.push(e),s.push(o),i.suspend((()=>n()))}};return n()},q=e=>(0,c.Fs)(z(e),i.scoped),z=e=>i.uninterruptibleMask((t=>i.flatMap(i.scope,(r=>(0,c.Fs)(i.all([h.Zy(r,o.il),n.L8(),n.L8()]),i.flatMap((([s,o,a])=>(0,c.Fs)(i.forkScoped(t(((t,r,s)=>i.acquireUseRelease(i.sync((()=>new C(e,void 0,c.D_))),(e=>i.suspend((()=>(0,c.Fs)(L(e.run(),e),i.intoDeferred(t),i.zipRight(n.Tx(t)),i.zipLeft(n.Tx(r)))))),((e,t)=>{const r=e.close(t);return void 0===r?i.void:i.tapErrorCause(r,(e=>h.U9(s,i.failCause(e))))})))(o,a,s))),i.flatMap((e=>(0,c.Fs)(h.U9(r,n.Py(a,void 0).pipe(i.zipRight(i.yieldNow()))),i.zipRight(t(n.Tx(o))),i.zipLeft(u.zq(e))))))))))))),L=(e,t)=>{const r=e;switch(r._tag){case g.Rc:return(0,c.Fs)(r.effect,i.flatMap((()=>L(t.run(),t))));case g.AV:return L(t.run(),t);case g.PC:return i.suspend((()=>t.getDone()));case g.db:return B(r,(()=>L(t.run(),t)),i.failCause)}}},93608:(e,t,r)=>{r.d(t,{$d:()=>a,iI:()=>u});var s=r(96949),n=r(70052);const i=Symbol.for("effect/ChannelContinuation"),o={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};class a{onSuccess;onHalt;_tag=n.g;[i]=o;constructor(e,t){this.onSuccess=e,this.onHalt=t}onExit(e){return s.N6(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class u{finalizer;_tag=n.X;[i]=o;constructor(e){this.finalizer=e}}},30961:(e,t,r)=>{r.d(t,{Ce:()=>l,Ll:()=>h,RS:()=>u,YW:()=>f,ai:()=>o,jD:()=>c});var s=r(61369),n=r(56572),i=r(1980);const o=Symbol.for("effect/ChannelMergeDecision"),a={[o]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},u=e=>{const t=Object.create(a);return t._tag=i.P,t.effect=e,t},c=e=>{const t=Object.create(a);return t._tag=i.n,t.f=e,t},l=e=>c((()=>e)),h=e=>(0,n.i5)(e,o),f=(0,s.XY)(2,((e,{onAwait:t,onDone:r})=>{const s=e;switch(s._tag){case i.P:return r(s.effect);case i.n:return t(s.f)}}))},91816:(e,t,r)=>{r.d(t,{N4:()=>u,$u:()=>c,YW:()=>l});var s=r(61369);const n="BackPressure",i="BufferSliding",o=Symbol.for("effect/ChannelMergeStrategy"),a={[o]:o},u=e=>{const t=Object.create(a);return t._tag=n,t},c=e=>{const t=Object.create(a);return t._tag=i,t},l=(0,s.XY)(2,((e,{onBackPressure:t,onBufferSliding:r})=>{switch(e._tag){case n:return t();case i:return r()}}))},53845:(e,t,r)=>{r.d(t,{L:()=>y});var s=r(20634),n=r(62738),i=r(55519),o=r(57964),a=r(96949),u=r(61369),c=r(55040);const l="Empty",h="Emit",f="Error",d="Done",p=e=>({_tag:l,notifyProducer:e}),g=e=>({_tag:h,notifyConsumers:e}),m=e=>({_tag:f,cause:e});class b{ref;constructor(e){this.ref=e}awaitRead(){return i.flatten(c.JP(this.ref,(e=>e._tag===l?[n.Tx(e.notifyProducer),e]:[i.void,e])))}get close(){return i.fiberIdWith((e=>this.error(s.G(e))))}done(e){return i.flatten(c.JP(this.ref,(t=>{switch(t._tag){case l:return[n.Tx(t.notifyProducer),t];case h:return[i.forEach(t.notifyConsumers,(t=>n.Py(t,o.kb(e))),{discard:!0}),(r=e,{_tag:d,done:r})];case f:case d:return[i.interrupt,t]}var r})))}emit(e){return i.flatMap(n.L8(),(t=>i.flatten(c.JP(this.ref,(r=>{switch(r._tag){case l:return[n.Tx(r.notifyProducer),r];case h:{const s=r.notifyConsumers[0],i=r.notifyConsumers.slice(1);if(void 0!==s)return[n.Py(s,o.pG(e)),0===i.length?p(t):g(i)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case f:case d:return[i.interrupt,r]}})))))}error(e){return i.flatten(c.JP(this.ref,(t=>{switch(t._tag){case l:return[n.Tx(t.notifyProducer),t];case h:return[i.forEach(t.notifyConsumers,(t=>n.AT(t,e)),{discard:!0}),m(e)];case f:case d:return[i.interrupt,t]}})))}get take(){return this.takeWith((e=>a.AT(s.Tj(e,o.kb))),(e=>a.Py(e)),(e=>a.fJ(o.pG(e))))}takeWith(e,t,r){return i.flatMap(n.L8(),(s=>i.flatten(c.JP(this.ref,(a=>{switch(a._tag){case l:return[i.zipRight(n.Py(a.notifyProducer,void 0),i.matchCause(n.Tx(s),{onFailure:e,onSuccess:o.YW({onLeft:r,onRight:t})})),g([s])];case h:return[i.matchCause(n.Tx(s),{onFailure:e,onSuccess:o.YW({onLeft:r,onRight:t})}),g([...a.notifyConsumers,s])];case f:return[i.succeed(e(a.cause)),a];case d:return[i.succeed(r(a.done)),a]}})))))}}const y=()=>(0,u.Fs)(n.L8(),i.flatMap((e=>c.L8(p(e)))),i.map((e=>new b(e))))},14969:(e,t,r)=>{r.d(t,{L8:()=>d,hV:()=>u,iu:()=>a});var s=r(89702),n=r(84073),i=r(61369),o=r(72620);const a=Symbol.for("effect/Clock"),u=s.Io("effect/Clock"),c={unsafeSchedule(e,t){const r=n.kE(t);if(r>2147483647)return i.f4;let s=!1;const o=setTimeout((()=>{s=!0,e()}),r);return()=>(clearTimeout(o),!s)}},l=function(){const e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;if("number"==typeof performance.timeOrigin&&0===performance.timeOrigin)return()=>BigInt(Math.round(1e6*performance.now()));const t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),h=function(){const e="hrtime"in{env:{NODE_ENV:"production"}}&&"function"==typeof{env:{NODE_ENV:"production"}}.hrtime.bigint?{env:{NODE_ENV:"production"}}.hrtime:void 0;if(!e)return l;const t=l()-e.bigint();return()=>t+e.bigint()}();class f{[a]=a;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return h()}currentTimeMillis=o.OH5((()=>this.unsafeCurrentTimeMillis()));currentTimeNanos=o.OH5((()=>this.unsafeCurrentTimeNanos()));scheduler(){return o.PyW(c)}sleep(e){return o.bIC((t=>{const r=c.unsafeSchedule((()=>t(o.rIH)),e);return o.NLW(o.OH5(r))}))}}const d=()=>new f},42927:(e,t,r)=>{r.d(t,{v:()=>i});var s=r(6517),n=r(72620);const i=(0,s.V)(Symbol.for("effect/FiberRef/currentRequestMap"),(()=>(0,n.QID)(new Map)))},57846:(e,t,r)=>{r.d(t,{Am:()=>X,sF:()=>A});var s=r(58600),n=r(89702),i=r(57964),o=r(61369),a=r(5583),u=r(49942),c=r(4676),l=r(77948),h=r(53533),f=r(95156);const d="InvalidData",p="MissingData",g="SourceUnavailable",m="Unsupported",b=Symbol.for("effect/ConfigError"),y={_tag:"ConfigError",[b]:b},F=(e,t)=>{const r=Object.create(y);return r._op="And",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},_=(e,t)=>{const r=Object.create(y);return r._op="Or",r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},v=(e,t,r={pathDelim:"."})=>{const n=Object.create(y);return n._op=d,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${(0,o.Fs)(this.path,s.fj(r.pathDelim))}: "${this.message}")`}}),n},I=(e,t,r={pathDelim:"."})=>{const n=Object.create(y);return n._op=p,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${(0,o.Fs)(this.path,s.fj(r.pathDelim))}: "${this.message}")`}}),n},S=(e,t,r,n={pathDelim:"."})=>{const i=Object.create(y);return i._op=g,i.path=e,i.message=t,i.cause=r,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Source unavailable at ${(0,o.Fs)(this.path,s.fj(n.pathDelim))}: "${this.message}")`}}),i},w=(e,t,r={pathDelim:"."})=>{const n=Object.create(y);return n._op=m,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${(0,o.Fs)(this.path,s.fj(r.pathDelim))}: "${this.message}")`}}),n},k=(0,o.XY)(2,((e,t)=>{switch(e._op){case"And":return F(k(e.left,t),k(e.right,t));case"Or":return _(k(e.left,t),k(e.right,t));case d:return v([...t,...e.path],e.message);case p:return I([...t,...e.path],e.message);case g:return S([...t,...e.path],e.message,e.cause);case m:return w([...t,...e.path],e.message)}}));o.f4,o.ue,o.f4,o.f4;var Y=r(89425);const N={_tag:"Empty"},T=(0,o.XY)(2,((e,t)=>{let r=Y.of(t),n=e;for(;Y.ae(r);){const e=r.head;switch(e._tag){case"Empty":r=r.tail;break;case"AndThen":r=Y.qu(e.first,Y.qu(e.second,r.tail));break;case"MapName":n=s.Tj(n,e.f),r=r.tail;break;case"Nested":n=s.Hs(n,e.name),r=r.tail;break;case"Unnested":if(!(0,o.Fs)(s.d5(n),l.gR(e.name)))return i.kb(I(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=s.Rx(n),r=r.tail}}return i.pG(n)}));var E=r(72620);const O=(e,t)=>[...e,...t],x=Symbol.for("effect/ConfigProvider"),X=n.Io("effect/ConfigProvider"),R=Symbol.for("effect/ConfigProviderFlat"),M=e=>({[x]:x,pipe(){return(0,h.t)(this,arguments)},...e}),A=e=>{const{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=()=>"env"in{env:{NODE_ENV:"production"}}?{NODE_ENV:"development",PUBLIC_URL:"",APP_MANIFEST:{newArchEnabled:!1,name:"starpy",slug:"starpy",version:"2.4.12",orientation:"portrait",icon:"./assets/icon.png",backgroundColor:"#000000",splash:{image:"./assets/splash.png",backgroundColor:"#000000",resizeMode:"cover"},platforms:["ios","android","web"],scheme:"starpy",userInterfaceStyle:"dark",web:{},extra:{eas:{projectId:"96050f57-642d-4f18-8222-de9f9ccb9e21"}},runtimeVersion:"3",updates:{url:"https://ios.starpy.me"},sdkVersion:"52.0.0"},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}:{};return a={load:(e,i,a=!0)=>{const u=(e=>(0,o.Fs)(e,s.fj(t)))(e),c=n(),h=u in c?l.zN(c[u]):l.dv();return(0,o.Fs)(h,E.xm_((()=>I(e,`Expected ${u} to exist in the process context`))),E.qIB((t=>C(t,e,i,r,a))))},enumerateChildren:e=>E.OH5((()=>{const r=n(),i=Object.keys(r).map((e=>e.toUpperCase().split(t))).filter((t=>{for(let r=0;r<e.length;r++){const n=(0,o.Fs)(e,s.$v(r)),i=t[r];if(void 0===i||n!==i)return!1}return!0})).flatMap((t=>t.slice(e.length,e.length+1)));return u.Ts(i)})),patch:N},i={[R]:R,patch:a.patch,load:(e,t,r=!0)=>a.load(e,t,r),enumerateChildren:a.enumerateChildren},M({load:e=>E.qIB(D(i,s.Ie(),e,!1),(t=>l.YW(s.d5(t),{onNone:()=>E.fJG(I(s.Ie(),`Expected a single value having structure: ${e}`)),onSome:E.PyW}))),flattened:i});var i,a},D=(e,t,r,n)=>{const u=r;switch(u._tag){case"Constant":return E.PyW(s.of(u.value));case"Described":return E.DYE((()=>D(e,t,u.config,n)));case"Fail":return E.fJG(I(t,u.message));case"Fallback":return(0,o.Fs)(E.DYE((()=>D(e,t,u.first,n))),E.h9N((r=>u.condition(r)?(0,o.Fs)(D(e,t,u.second,n),E.h9N((e=>E.fJG(_(r,e))))):E.fJG(r))));case"Lazy":return E.DYE((()=>D(e,t,u.config(),n)));case"MapOrFail":return E.DYE((()=>(0,o.Fs)(D(e,t,u.original,n),E.qIB(E.CFK((e=>(0,o.Fs)(u.mapOrFail(e),E.xm_(k(((e,t)=>{let r=t;if("Nested"===r._tag){const t=e.slice();for(;"Nested"===r._tag;)t.push(r.name),r=r.config;return t}return e})(t,u.original))))))))));case"Nested":return E.DYE((()=>D(e,O(t,s.of(u.name)),u.config,n)));case"Primitive":return(0,o.Fs)(T(t,e.patch),E.qIB((t=>(0,o.Fs)(e.load(t,u,n),E.qIB((e=>{if(0===e.length){const e=(0,o.Fs)(s.HV(t),l.WL((()=>"<n/a>")));return E.fJG(I([],`Expected ${u.description} with name ${e}`))}return E.PyW(e)}))))));case"Sequence":return(0,o.Fs)(T(t,e.patch),E.qIB((r=>(0,o.Fs)(e.enumerateChildren(r),E.qIB(W),E.qIB((n=>0===n.length?E.DYE((()=>E.TjK(D(e,r,u.config,!0),s.of))):(0,o.Fs)(E.CFK(n,(r=>D(e,s.BC(t,`[${r}]`),u.config,!0))),E.TjK((e=>{const t=s.Bq(e);return 0===t.length?s.of(s.Ie()):s.of(t)})))))))));case"HashMap":return E.DYE((()=>(0,o.Fs)(T(t,e.patch),E.qIB((t=>(0,o.Fs)(e.enumerateChildren(t),E.qIB((r=>(0,o.Fs)(r,E.CFK((r=>D(e,O(t,s.of(r)),u.valueConfig,n))),E.TjK((e=>0===e.length?s.of(a.Ie()):(0,o.Fs)(j(e),s.Tj((e=>a.Ts(s.yU(s.Ts(r),e))))))))))))))));case"ZipWith":return E.DYE((()=>(0,o.Fs)(D(e,t,u.left,n),E.gPK,E.qIB((r=>(0,o.Fs)(D(e,t,u.right,n),E.gPK,E.qIB((e=>{if(i.OC(r)&&i.OC(e))return E.fJG(F(r.left,e.left));if(i.OC(r)&&i.FG(e))return E.fJG(r.left);if(i.FG(r)&&i.OC(e))return E.fJG(e.left);if(i.FG(r)&&i.FG(e)){const n=(0,o.Fs)(t,s.fj(".")),a=P(t,n),[c,h]=((e,t,r,n)=>{const i=s.t8(r.length,(t=>t>=n.length?l.dv():l.zN([e(t),t+1]))),o=s.t8(n.length,(e=>e>=r.length?l.dv():l.zN([t(e),e+1])));return[O(r,i),O(n,o)]})(a,a,(0,o.Fs)(r.right,s.Tj(i.pG)),(0,o.Fs)(e.right,s.Tj(i.pG)));return(0,o.Fs)(c,s.yU(h),E.CFK((([e,t])=>(0,o.Fs)(E.yU6(e,t),E.TjK((([e,t])=>u.zip(e,t)))))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))}},P=(e,t)=>r=>i.kb(I(e,`The element at index ${r} in a sequence at path "${t}" was missing`)),C=(e,t,r,n,i)=>i?(0,o.Fs)(((e,t)=>e.split(new RegExp(`\\s*${f.i(t)}\\s*`)))(e,n),E.CFK((e=>r.parse(e.trim()))),E.xm_(k(t))):(0,o.Fs)(r.parse(e),E.UcN({onFailure:k(t),onSuccess:s.of})),j=e=>Object.keys(e[0]).map((t=>e.map((e=>e[t])))),W=e=>(0,o.Fs)(E.CFK(e,q),E.UcN({onFailure:()=>s.Ie(),onSuccess:s.di(c.pH)}),E.gPK,E.TjK(i.h1)),B=/^(\[(\d+)\])$/,q=e=>{const t=e.match(B);if(null!==t){const e=t[2];return(0,o.Fs)(void 0!==e&&e.length>0?l.zN(e):l.dv(),l.qI(z))}return l.dv()},z=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?l.dv():l.zN(t)}},29064:(e,t,r)=>{r.d(t,{le:()=>v,Ih:()=>w,uP:()=>k,ye:()=>Y,KO:()=>T,sF:()=>E,Ny:()=>O,AS:()=>x,wO:()=>X,sz:()=>R,fJ:()=>M,AT:()=>D,pV:()=>P,gO:()=>A,qI:()=>C,Qr:()=>j,uS:()=>W,IV:()=>S,WK:()=>B,Pp:()=>q,Ml:()=>z,$5:()=>L,u:()=>H,Py:()=>J,B6:()=>$,DY:()=>V,OH:()=>K,rI:()=>U,M9:()=>G});var s=r(20634),n=r(28420),i=r(55519),o=r(57964),a=r(61369),u=r(77948),c=r(53533),l=r(56572),h=r(55451);const f=Symbol.for("effect/ChannelChildExecutorDecision"),d={[f]:f},p=e=>{const t=Object.create(d);return t._tag=h.SX,t};var g=r(93608),m=r(60827);const b=Symbol.for("effect/ChannelUpstreamPullStrategy"),y={[b]:{_A:e=>e}},F=e=>{const t=Object.create(y);return t._tag=m.L,t.emitSeparator=e,t};var _=r(93904);const v=Symbol.for("effect/Channel"),I={[v]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},pipe(){return(0,c.t)(this,arguments)}},S=e=>(0,l.i5)(e,v)||i.isEffect(e),w=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.G3,r.acquire=()=>e,r.finalizer=t,r})),k=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.GE,r.channel=e,r.k=new g.$d(J,t),r})),Y=e=>V((()=>{const t=[];return C(B(e,N(t)),(e=>K((()=>[n.Ts(t),e]))))})),N=e=>L({onInput:t=>C(K((()=>{e.push(t)})),(()=>N(e))),onFailure:M,onDone:$}),T=e=>E(e,a.Yi,a.Yi),E=(e,t,r)=>{const s=Object.create(I);return s._tag=_.dr,s.combineInners=t,s.combineAll=r,s.onPull=()=>F(u.dv()),s.onEmit=()=>p,s.value=()=>e,s.k=a.D_,s},O=(0,a.XY)(4,((e,t,r,s)=>{const n=Object.create(I);return n._tag=_.dr,n.combineInners=r,n.combineAll=s,n.onPull=()=>F(u.dv()),n.onEmit=()=>p,n.value=()=>e,n.k=t,n})),x=(0,a.XY)(6,((e,t,r,s,n,i)=>{const o=Object.create(I);return o._tag=_.dr,o.combineInners=r,o.combineAll=s,o.onPull=n,o.onEmit=i,o.value=()=>e,o.k=t,o})),X=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.Ai,r.input=t,r.channel=e,r})),R=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.su,r.channel=e,r.finalizer=t,r})),M=e=>D(s.fJ(e)),A=e=>P((()=>s.fJ(e()))),D=e=>P((()=>e)),P=e=>{const t=Object.create(I);return t._tag=_.PS,t.error=e,t},C=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.GE,r.channel=e,r.k=new g.$d(t,D),r})),j=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.GE,r.channel=e,r.k=new g.$d(t.onSuccess,t.onFailure),r})),W=e=>{const t=Object.create(I);return t._tag=_.Rc,t.effect=()=>e,t},B=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.RY,r.left=()=>e,r.right=()=>t,r})),q=(0,a.XY)(2,((e,t)=>{const r=Object.create(I);return r._tag=_.Yj,r.context=()=>t,r.inner=e,r})),z=e=>{const t=Object.create(I);return t._tag=_.db,t.more=J,t.done=new g.$d((()=>M(e)),(()=>M(e))),t},L=e=>H({onInput:e.onInput,onFailure:t=>o.YW(s.vE(t),{onLeft:e.onFailure,onRight:D}),onDone:e.onDone}),H=e=>{const t=Object.create(I);return t._tag=_.db,t.more=e.onInput,t.done=new g.$d(e.onDone,e.onFailure),t},J=e=>K((()=>e)),$=e=>{const t=Object.create(I);return t._tag=_.ky,t.terminal=e,t},V=e=>{const t=Object.create(I);return t._tag=_.FG,t.channel=e,t},K=e=>{const t=Object.create(I);return t._tag=_.l_,t.evaluate=e,t},U=$(void 0),G=e=>{const t=Object.create(I);return t._tag=_.AV,t.out=e,t}},72620:(e,t,r)=>{r.d(t,{$1O:()=>xs,$1l:()=>Zs,$QS:()=>Ze,$n1:()=>P,$sd:()=>ws,$we:()=>z,ABT:()=>pe,APi:()=>dr,AR8:()=>Cs,ATB:()=>fe,AlI:()=>Sr,Ao:()=>Ms,AsN:()=>Rs,BCV:()=>Hs,Bqz:()=>Fe,BzD:()=>lr,CFK:()=>we,Cau:()=>us,CdZ:()=>or,CoE:()=>$r,CrW:()=>Ss,D$$:()=>ve,D$Q:()=>er,DYE:()=>Le,DxM:()=>mt,EYO:()=>sr,EbJ:()=>Rt,Ecz:()=>Ot,EkE:()=>fs,FIO:()=>Ds,FRe:()=>Zt,F_Q:()=>ie,FcF:()=>Ue,Fi1:()=>Jt,GSS:()=>oe,GaK:()=>Ne,GyC:()=>Ct,HTn:()=>It,Hox:()=>Ur,INx:()=>Pt,IPo:()=>Te,IeY:()=>$,Inz:()=>Ee,JGl:()=>Yt,JUF:()=>es,KAb:()=>Vt,Kbz:()=>ae,Kpo:()=>Tt,KyM:()=>tt,LGt:()=>ar,MIt:()=>Ns,MP9:()=>ur,MaT:()=>it,Mim:()=>Je,MrQ:()=>wr,NG:()=>ns,NLW:()=>J,NS5:()=>ce,NWQ:()=>Ce,OH5:()=>He,OLv:()=>ft,OM4:()=>Ft,OTT:()=>Nr,OYO:()=>lt,PDv:()=>Mr,PMw:()=>ye,PNH:()=>xt,PpN:()=>Gs,PuW:()=>bt,PyW:()=>ze,Q9S:()=>Zr,QID:()=>Bt,QPU:()=>$t,QRo:()=>Rr,QYw:()=>cr,QZV:()=>ke,QcH:()=>Nt,QgK:()=>je,R8K:()=>Ir,R_7:()=>Fr,ReC:()=>yr,RkE:()=>se,Rkt:()=>ts,S5A:()=>Ae,SLb:()=>ir,T12:()=>is,TBR:()=>_s,THF:()=>Pr,TjK:()=>Xe,TsL:()=>Dt,U8_:()=>kt,UFt:()=>D,UUz:()=>_e,UcN:()=>Re,Uio:()=>gr,Uis:()=>zr,Umi:()=>Kt,V2G:()=>Qr,VE1:()=>Jr,VEq:()=>yt,VbV:()=>qr,VuY:()=>Kr,VwM:()=>xr,WW4:()=>Ts,Wc6:()=>_r,Wtn:()=>gs,XOb:()=>St,XWm:()=>Z,Z$R:()=>br,Z5i:()=>A,ZI2:()=>Xs,ZM1:()=>Ws,ZmZ:()=>ht,_$:()=>_t,_5X:()=>ee,_OA:()=>Ks,_Oy:()=>Q,_Pd:()=>qt,_fI:()=>qs,_ig:()=>xe,_sz:()=>ls,_tB:()=>dt,aNH:()=>ct,as:()=>H,b1P:()=>nr,bIC:()=>K,bRS:()=>rr,bVS:()=>rn,bdM:()=>Bs,bzD:()=>zt,cay:()=>st,cbD:()=>rs,cfM:()=>De,cpb:()=>Fs,dDX:()=>ms,dWJ:()=>Vr,d_m:()=>Us,eMl:()=>Oe,eO_:()=>M,eec:()=>as,fJG:()=>le,g1G:()=>ge,g1R:()=>Dr,gOk:()=>he,gPK:()=>ue,gn0:()=>Os,h0c:()=>Hr,h9N:()=>G,hgn:()=>be,iK2:()=>Qe,iLB:()=>pr,iMI:()=>et,igQ:()=>jr,il9:()=>vs,jDN:()=>Qt,jGc:()=>L,jo7:()=>kr,jxG:()=>As,k6R:()=>R,kJg:()=>Xr,kS9:()=>We,kWD:()=>fr,khu:()=>Ie,krO:()=>Gt,kyh:()=>Qs,lN4:()=>js,lOA:()=>Xt,m$m:()=>qe,m9E:()=>ot,mHP:()=>rt,m_i:()=>os,n9O:()=>Gr,nAV:()=>Er,nAr:()=>Pe,nDN:()=>nt,nlF:()=>Ht,nv8:()=>Wr,o7R:()=>ps,owM:()=>Tr,p2e:()=>Cr,pLZ:()=>Is,pVV:()=>de,pX6:()=>tr,piH:()=>ut,q1t:()=>Wt,qIB:()=>me,q_p:()=>Js,qoC:()=>Mt,rIH:()=>Ge,rTm:()=>Be,rfi:()=>Ke,s$T:()=>hr,s2:()=>Yr,sAm:()=>Lr,sDf:()=>Es,sH6:()=>Lt,sK9:()=>$e,syF:()=>Ls,t04:()=>V,t9n:()=>cs,tDT:()=>Ye,tNQ:()=>At,tvg:()=>Se,uPR:()=>Et,uPo:()=>U,un1:()=>Ps,uwm:()=>Ar,v9O:()=>hs,vDJ:()=>mr,vwO:()=>zs,w6U:()=>Ut,whK:()=>pt,wnO:()=>ks,woH:()=>jt,x5l:()=>ys,x6Q:()=>Br,xah:()=>gt,xm_:()=>Me,xt1:()=>Or,xtk:()=>bs,yPL:()=>C,yU6:()=>at,ygP:()=>ss,yw5:()=>q,zPu:()=>ds,zg6:()=>vt});var s=r(30276),n=r(58600),i=r(28420),o=r(89702),a=r(84073),u=r(57964),c=r(43977),l=r(95602),h=r(61369),f=r(6517),d=r(67337),p=r(5583),g=r(83845),m=r(89425),b=r(45914),y=r(77948),F=r(53533),_=r(56572),v=r(28202),I=r(8197),S=r(4080),w=r(45779),k=r(68498),Y=r(94732),N=r(27576),T=r(89706),E=r(66932),O=r(38961),x=r(27514);const X=Symbol.for("effect/EffectError"),R=e=>(0,_.i5)(e,X),M=e=>({[X]:X,_tag:"EffectError",cause:e}),A=(e,t)=>{const r=new j("Blocked");return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r},D=e=>{const t=new j("RunBlocked");return t.effect_instruction_i0=e,t},P=Symbol.for("effect/Effect");class C{patch;op;_op=T.Ni;constructor(e,t){this.patch=e,this.op=t}}class j{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[P]=k.Hs;constructor(e){this._op=e}[c.HR](e){return this===e}[d.HR](){return d.PO(this,d.yT(this))}pipe(){return(0,F.t)(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:(0,g.U2)(this.effect_instruction_i0),effect_instruction_i1:(0,g.U2)(this.effect_instruction_i1),effect_instruction_i2:(0,g.U2)(this.effect_instruction_i2)}}toString(){return(0,g.GP)(this.toJSON())}[g.FX](){return this.toJSON()}[Symbol.iterator](){return new O.B(new s.WT(this))}}class W{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[P]=k.Hs;constructor(e){this._op=e,this._tag=e}[c.HR](e){return Hr(e)&&"Failure"===e._op&&c.aI(this.effect_instruction_i0,e.effect_instruction_i0)}[d.HR](){return(0,h.Fs)(d.Yj(this._tag),d.kg(d.tW(this.effect_instruction_i0)),d.PO(this))}get cause(){return this.effect_instruction_i0}pipe(){return(0,F.t)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return(0,g.GP)(this.toJSON())}[g.FX](){return this.toJSON()}[Symbol.iterator](){return new O.B(new s.WT(this))}}class B{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[P]=k.Hs;constructor(e){this._op=e,this._tag=e}[c.HR](e){return Hr(e)&&"Success"===e._op&&c.aI(this.effect_instruction_i0,e.effect_instruction_i0)}[d.HR](){return(0,h.Fs)(d.Yj(this._tag),d.kg(d.tW(this.effect_instruction_i0)),d.PO(this))}get value(){return this.effect_instruction_i0}pipe(){return(0,F.t)(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:(0,g.U2)(this.value)}}toString(){return(0,g.GP)(this.toJSON())}[g.FX](){return this.toJSON()}[Symbol.iterator](){return new O.B(new s.WT(this))}}const q=e=>(0,_.i5)(e,P),z=e=>{const t=new j(T.mm);return t.effect_instruction_i0=e,t},L=(0,h.XY)(3,((e,t,r)=>Ue((s=>me(e,(e=>me(ce(Le((()=>s(t(e))))),(t=>Le((()=>r(e,t))).pipe(Ie({onFailure:e=>{switch(t._tag){case T.N9:return fe(I._7(t.effect_instruction_i0,e));case T._l:return fe(e)}},onSuccess:()=>t})))))))))),H=(0,h.XY)(2,((e,t)=>me(e,(()=>ze(t))))),J=e=>H(e,void 0),$=function(){const e=new j(T.kK);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw new Error((0,Y.k)("you're not supposed to end up here"))}return e},V=(e,t=l.dv)=>{const r=new j(T.ZO);let s;return r.effect_instruction_i0=t=>{s=e(t)},r.effect_instruction_i1=t,void 0!==s?Pe(r,(e=>s)):r},K=(e,t=l.dv)=>$(e,(function(){let e,r;function n(t){e?e(t):void 0===r&&(r=t)}const i=new j(T.ZO);let o,a;return i.effect_instruction_i0=t=>{e=t,r&&t(r)},i.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(a=new AbortController,o=(0,s.sn)((()=>this.effect_instruction_i0(n,a.signal)))):o=(0,s.sn)((()=>this.effect_instruction_i0(n))),o||a?Pe(i,(e=>(a&&a.abort(),o??Ge))):i})),U=(0,h.XY)(2,((e,t)=>{const r=new j(T.JJ);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r})),G=(0,h.XY)(2,((e,t)=>Se(e,{onFailure:t,onSuccess:ze}))),Z=(0,h.XY)(3,((e,t,r)=>U(e,(e=>{const s=I.vE(e);switch(s._tag){case"Left":return t(s.left)?r(s.left):fe(e);case"Right":return fe(s.right)}})))),Q=(0,h.XY)(2,((e,t)=>U(e,(e=>{const r=I.vE(e);switch(r._tag){case"Left":return(0,h.Fs)(t(r.left),y.WL((()=>fe(e))));case"Right":return fe(r.right)}})))),ee=e=>z(((t,r)=>e(E.YW(r.runtimeFlags)))),te=Symbol.for("effect/SpanAnnotation"),re=Symbol.for("effect/OriginalAnnotation"),se=e=>(0,_.i5)(e,re)?e[re]:e,ne=(e,t)=>y.Ru(t)?new Proxy(e,{has:(e,t)=>t===te||t===re||t in e,get:(r,s)=>s===te?t.value:s===re?e:r[s]}):e,ie=e=>(0,_.Gv)(e)&&!(te in e)?z((t=>fe(I.F_(ne(e,en(t)))))):fe(I.F_(e)),oe=e=>de((()=>I.F_(new Sr(e)))),ae=e=>me(He(e),ie),ue=e=>Se(e,{onFailure:e=>ze(u.kb(e)),onSuccess:e=>ze(u.pG(e))}),ce=e=>ve(e,{onFailure:rs,onSuccess:bs}),le=e=>(0,_.Gv)(e)&&!(te in e)?z((t=>fe(I.fJ(ne(e,en(t)))))):fe(I.fJ(e)),he=e=>me(He(e),le),fe=e=>{const t=new W(T.N9);return t.effect_instruction_i0=e,t},de=e=>me(He(e),fe),pe=z((e=>ze(e.id()))),ge=e=>z((t=>e(t.id()))),me=(0,h.XY)(2,((e,t)=>{const r=new j(T.Gj);return r.effect_instruction_i0=e,r.effect_instruction_i1=t,r})),be=(0,h.XY)(2,((e,t)=>me(e,(e=>{const r="function"==typeof t?t(e):t;return q(r)?r:(0,_.$X)(r)?K((e=>{r.then((t=>e(ze(t))),(t=>e(le(new zr(t)))))})):ze(r)})))),ye=e=>{const t=new j("OnStep");return t.effect_instruction_i0=e,t},Fe=e=>me(e,h.D_),_e=e=>Se(e,{onFailure:ze,onSuccess:le}),ve=(0,h.XY)(2,((e,t)=>Ie(e,{onFailure:e=>ze(t.onFailure(e)),onSuccess:e=>ze(t.onSuccess(e))}))),Ie=(0,h.XY)(2,((e,t)=>{const r=new j(T.du);return r.effect_instruction_i0=e,r.effect_instruction_i1=t.onFailure,r.effect_instruction_i2=t.onSuccess,r})),Se=(0,h.XY)(2,((e,t)=>Ie(e,{onFailure:e=>{if(I.RU(e).length>0)return fe(I.rA(e));const r=I.e9(e);return r.length>0?t.onFailure(i.z1(r)):fe(e)},onSuccess:t.onSuccess}))),we=(0,h.XY)(2,((e,t)=>Le((()=>{const r=n.Ts(e),s=n.CN(r.length);let i=0;return H(et({while:()=>i<r.length,body:()=>t(r[i],i),step:e=>{s[i++]=e}}),s)})))),ke=(0,h.XY)(2,((e,t)=>Le((()=>{const r=n.Ts(e);let s=0;return et({while:()=>s<r.length,body:()=>t(r[s],s),step:()=>{s++}})})))),Ye=(0,h.XY)((e=>"boolean"==typeof e[0]||q(e[0])),((e,t)=>q(e)?me(e,(e=>e?t.onTrue():t.onFalse())):e?t.onTrue():t.onFalse())),Ne=me(pe,(e=>Te(e))),Te=e=>fe(I.G(e)),Ee=e=>{const t=new j(T.NM);return t.effect_instruction_i0=v.sS(E._n),t.effect_instruction_i1=()=>e,t},Oe=e=>$(e,(function(){const e=new j(T.NM);return e.effect_instruction_i0=v.sS(E._n),e.effect_instruction_i1=e=>E.YW(e)?(0,s.sn)((()=>this.effect_instruction_i0(Ee))):(0,s.sn)((()=>this.effect_instruction_i0(Ke))),e})),xe=(0,h.XY)(2,((e,t)=>Ue((r=>me(ce(r(e)),(e=>Rs(t,e))))))),Xe=(0,h.XY)(2,((e,t)=>me(e,(e=>He((()=>t(e))))))),Re=(0,h.XY)(2,((e,t)=>Se(e,{onFailure:e=>he((()=>t.onFailure(e))),onSuccess:e=>He((()=>t.onSuccess(e)))}))),Me=(0,h.XY)(2,((e,t)=>Ie(e,{onFailure:e=>{const r=I.vE(e);switch(r._tag){case"Left":return he((()=>t(r.left)));case"Right":return fe(r.right)}},onSuccess:ze}))),Ae=(0,h.XY)(2,((e,t)=>De(e,(e=>$r(e)?Ge:t(e.effect_instruction_i0))))),De=(0,h.XY)(2,((e,t)=>Ue((r=>Ie(r(e),{onFailure:e=>{const r=rs(e);return Ie(t(r),{onFailure:t=>rs(I.il(e,t)),onSuccess:()=>r})},onSuccess:e=>{const r=bs(e);return ct(t(r),r)}}))))),Pe=(0,h.XY)(2,((e,t)=>De(e,gs({onFailure:e=>I.t9(e)?J(t(I.ml(e))):Ge,onSuccess:()=>Ge})))),Ce=(0,h.XY)(2,((e,t)=>Ve(e,t,ze))),je=e=>We(e,h.D_),We=(0,h.XY)(2,((e,t)=>Se(e,{onFailure:e=>ie(t(e)),onSuccess:ze}))),Be=(e,t)=>n.Ts(e).reduceRight((([e,r],s)=>{const n=t(s);switch(n._tag){case"Left":return[[n.left,...e],r];case"Right":return[e,[n.right,...r]]}}),[n.Ie(),n.Ie()]),qe=z(((e,t)=>ze(t.runtimeFlags))),ze=e=>{const t=new B(T._l);return t.effect_instruction_i0=e,t},Le=e=>me(He(e),h.D_),He=e=>{const t=new j(T.EF);return t.effect_instruction_i0=e,t},Je=(0,h.XY)(2,((e,t)=>me(e,(e=>{const r="function"==typeof t?t(e):t;return q(r)?H(r,e):(0,_.$X)(r)?K((t=>{r.then((r=>t(ze(e))),(e=>t(le(new zr(e)))))})):ze(e)})))),$e=e=>z((t=>{const r=t.getFiberRef(or),s=(0,h.Fs)(r,y.WL((()=>t.scope())));return e(jt(or,y.zN(s)))})),Ve=(0,h.XY)(3,((e,t,r)=>Ie(e,{onFailure:e=>I.RU(e).length>0?fe(y.n4(I.$7(e))):t(),onSuccess:r}))),Ke=e=>{const t=new j(T.NM);return t.effect_instruction_i0=v.b8(E._n),t.effect_instruction_i1=()=>e,t},Ue=e=>$(e,(function(){const e=new j(T.NM);return e.effect_instruction_i0=v.b8(E._n),e.effect_instruction_i1=e=>E.YW(e)?(0,s.sn)((()=>this.effect_instruction_i0(Ee))):(0,s.sn)((()=>this.effect_instruction_i0(Ke))),e})),Ge=ze(void 0),Ze=e=>{const t=new j(T.NM);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},Qe=(0,h.XY)(2,((e,t)=>me(t,(t=>t?(0,h.Fs)(e,Xe(y.zN)):ze(y.dv()))))),et=e=>{const t=new j(T.mM);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},tt=(0,h.XY)(2,((e,t)=>jt(e,er,t))),rt=(0,h.XY)(2,((e,t)=>jt(e,tr,t))),st=(0,h.XY)(2,((e,t)=>{const r=new j(T.NM);return r.effect_instruction_i0=t,r.effect_instruction_i1=()=>e,r})),nt=(0,h.XY)(2,((e,t)=>jt(e,ur,t))),it=(0,h.XY)(2,((e,t)=>jt(e,cr,t))),ot=e=>{const t=new j(T.u4);return void 0!==e?.priority?Zt(t,e.priority):t},at=(0,h.XY)(2,((e,t)=>me(e,(e=>Xe(t,(t=>[e,t])))))),ut=(0,h.XY)(2,((e,t)=>me(e,(e=>H(t,e))))),ct=(0,h.XY)(2,((e,t)=>me(e,(()=>t)))),lt=(0,h.XY)(3,((e,t,r)=>me(e,(e=>Xe(t,(t=>r(e,t))))))),ht=K((()=>{const e=setInterval((()=>{}),2**31-1);return He((()=>clearInterval(e)))})),ft=e=>me(pe,(t=>(0,h.Fs)(e,dt(t)))),dt=(0,h.XY)(2,((e,t)=>me(e.interruptAsFork(t),(()=>e.await)))),pt={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return(0,F.t)(this,arguments)}},gt={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return(0,F.t)(this,arguments)}},mt={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return(0,F.t)(this,arguments)}},bt={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return(0,F.t)(this,arguments)}},yt={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return(0,F.t)(this,arguments)}},Ft={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return(0,F.t)(this,arguments)}},_t={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return(0,F.t)(this,arguments)}},vt={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return(0,F.t)(this,arguments)}},It=[pt,_t,Ft,yt,bt,mt,gt,vt],St=Symbol.for("effect/FiberRef"),wt={_A:e=>e},kt=e=>Rt(e,(e=>[e,e])),Yt=(0,h.XY)(2,((e,t)=>Rt(e,(e=>[e,t])))),Nt=(0,h.XY)(2,((e,t)=>Rt(e,(e=>[e,t(e)])))),Tt=(0,h.XY)(2,((e,t)=>Rt(e,(e=>[e,y.WL(t(e),(()=>e))])))),Et=(0,h.XY)(2,((e,t)=>me(kt(e),t))),Ot=(0,h.XY)(2,((e,t)=>Rt(e,(()=>[void 0,t])))),xt=e=>z((t=>(t.unsafeDeleteFiberRef(e),Ge))),Xt=e=>Ot(e,e.initial),Rt=(0,h.XY)(2,((e,t)=>z((r=>{const[s,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),ze(s)})))),Mt=(e,t,r)=>Rt(e,(e=>y.WL(r(e),(()=>[t,e])))),At=(0,h.XY)(2,((e,t)=>Rt(e,(e=>[void 0,t(e)])))),Dt=(0,h.XY)(2,((e,t)=>Rt(e,(e=>[void 0,y.WL(t(e),(()=>e))])))),Pt=(0,h.XY)(2,((e,t)=>Rt(e,(e=>{const r=t(e);return[r,r]})))),Ct=(0,h.XY)(2,((e,t)=>Rt(e,(e=>{const r=y.WL(t(e),(()=>e));return[r,r]}))));d.HR,c.HR;const jt=(0,h.XY)(3,((e,t,r)=>L(ut(kt(t),Ot(t,r)),(()=>e),(e=>Ot(t,e))))),Wt=(0,h.XY)(3,((e,t,r)=>Et(t,(s=>jt(e,t,r(s)))))),Bt=(e,t)=>Lt(e,{differ:w.yo(),fork:t?.fork??h.D_,join:t?.join}),qt=e=>{const t=w.zI();return Lt(e,{differ:t,fork:t.empty})},zt=e=>{const t=w.cA();return Lt(e,{differ:t,fork:t.empty})},Lt=(e,t)=>({[St]:wt,initial:e,diff:(e,r)=>t.differ.diff(e,r),combine:(e,r)=>t.differ.combine(e,r),patch:e=>r=>t.differ.patch(e,r),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return(0,F.t)(this,arguments)}}),Ht=e=>Lt(e,{differ:E.Tx,fork:E.Tx.empty}),Jt=(0,f.V)(Symbol.for("effect/FiberRef/currentContext"),(()=>zt(o.Ie()))),$t=(0,f.V)(Symbol.for("effect/FiberRef/currentSchedulingPriority"),(()=>Bt(0))),Vt=(0,f.V)(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),(()=>Bt(2048))),Kt=(0,f.V)(Symbol.for("effect/FiberRef/currentLogAnnotation"),(()=>Bt(p.Ie()))),Ut=(0,f.V)(Symbol.for("effect/FiberRef/currentLogLevel"),(()=>Bt(yt))),Gt=(0,f.V)(Symbol.for("effect/FiberRef/currentLogSpan"),(()=>Bt(m.Ie()))),Zt=(0,h.XY)(2,((e,t)=>jt(e,$t,t))),Qt=(0,h.XY)(2,((e,t)=>jt(e,Vt,t))),er=(0,f.V)(Symbol.for("effect/FiberRef/currentConcurrency"),(()=>Bt("unbounded"))),tr=(0,f.V)(Symbol.for("effect/FiberRef/currentRequestBatching"),(()=>Bt(!0))),rr=(0,f.V)(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),(()=>Bt(y.zN(Ft)))),sr=(0,h.XY)(2,((e,t)=>jt(e,rr,t))),nr=(0,f.V)(Symbol.for("effect/FiberRef/currentMetricLabels"),(()=>(e=>{const t=w.QZ(w.yo());return Lt(e,{differ:t,fork:t.empty})})(n.Ie()))),ir=kt(nr),or=(0,f.V)(Symbol.for("effect/FiberRef/currentForkScopeOverride"),(()=>Bt(y.dv(),{fork:()=>y.dv(),join:(e,t)=>e}))),ar=(0,f.V)(Symbol.for("effect/FiberRef/currentInterruptedCause"),(()=>Bt(I.Ie,{fork:()=>I.Ie,join:(e,t)=>e}))),ur=(0,f.V)(Symbol.for("effect/FiberRef/currentTracerEnabled"),(()=>Bt(!0))),cr=(0,f.V)(Symbol.for("effect/FiberRef/currentTracerTiming"),(()=>Bt(!0))),lr=(0,f.V)(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),(()=>Bt(p.Ie()))),hr=(0,f.V)(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),(()=>Bt(i.Ie()))),fr=Symbol.for("effect/Scope"),dr=Symbol.for("effect/CloseableScope"),pr=(e,t)=>e.addFinalizer((()=>J(t))),gr=(e,t)=>e.addFinalizer(t),mr=(e,t)=>e.close(t),br=(e,t)=>e.fork(t),yr=e=>Fr(h.D_)(e),Fr=(0,h.XY)(2,((e,t)=>{const r=(0,h.Fs)(e,I.od,y.Tj(t));switch(r._tag){case"None":return(0,h.Fs)(I.RU(e),i.d5,y.YW({onNone:()=>{const t=n.Ts(I.ml(e)).flatMap((e=>n.Ts(l.dK(e)).map((e=>`#${e}`))));return new Yr(t?`Interrupted by fibers: ${t.join(", ")}`:void 0)},onSome:h.D_}));case"Some":return r.value}})),_r=function(){class e extends globalThis.Error{commit(){return le(this)}toJSON(){return{...this}}[g.FX](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}\n${this.stack.split("\n").slice(1).join("\n")}`:this.toString():"Bun"in globalThis?I.j9(I.fJ(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,k.Pe),e}(),vr=(e,t)=>{class r extends _r{_tag=t}return Object.assign(r.prototype,e),r.prototype.name=t,r},Ir=Symbol.for("effect/Cause/errors/RuntimeException"),Sr=vr({[Ir]:Ir},"RuntimeException"),wr=e=>(0,_.i5)(e,Ir),kr=Symbol.for("effect/Cause/errors/InterruptedException"),Yr=vr({[kr]:kr},"InterruptedException"),Nr=e=>(0,_.i5)(e,kr),Tr=Symbol.for("effect/Cause/errors/IllegalArgument"),Er=vr({[Tr]:Tr},"IllegalArgumentException"),Or=e=>(0,_.i5)(e,Tr),xr=Symbol.for("effect/Cause/errors/NoSuchElement"),Xr=vr({[xr]:xr},"NoSuchElementException"),Rr=e=>(0,_.i5)(e,xr),Mr=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),Ar=vr({[Mr]:Mr},"InvalidPubSubCapacityException"),Dr=Symbol.for("effect/Cause/errors/ExceededCapacityException"),Pr=vr({[Dr]:Dr},"ExceededCapacityException"),Cr=e=>(0,_.i5)(e,Dr),jr=Symbol.for("effect/Cause/errors/Timeout"),Wr=vr({[jr]:jr},"TimeoutException"),Br=e=>new Wr(`Operation timed out before the specified duration of '${a.GP(e)}' elapsed`),qr=Symbol.for("effect/Cause/errors/UnknownException"),zr=function(){class e extends _r{cause;_tag="UnknownException";error;constructor(e,t){super(t??"An unknown error occurred",{cause:e}),this.cause=e,this.error=e}}return Object.assign(e.prototype,{[qr]:qr,name:"UnknownException"}),e}(),Lr=e=>(0,_.i5)(e,qr),Hr=e=>q(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),Jr=e=>"Failure"===e._tag,$r=e=>"Success"===e._tag,Vr=e=>{switch(e._tag){case T.N9:return I.fT(e.effect_instruction_i0);case T._l:return!1}},Kr=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return rs(e.effect_instruction_i0);case T._l:return bs(t)}})),Ur=e=>Kr(e,void 0),Gr=e=>{switch(e._tag){case T.N9:return y.zN(e.effect_instruction_i0);case T._l:return y.dv()}},Zr=(e,t)=>Ys(e,t?.parallel?I._7:I.il),Qr=e=>rs(I.F_(e)),es=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return!1;case T._l:return t(e.effect_instruction_i0)}})),ts=e=>rs(I.fJ(e)),rs=e=>{const t=new W(T.N9);return t.effect_instruction_i0=e,t},ss=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return rs(e.effect_instruction_i0);case T._l:return t(e.effect_instruction_i0)}})),ns=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return ze(rs(e.effect_instruction_i0));case T._l:return t(e.effect_instruction_i0)}})),is=e=>(0,h.Fs)(e,ss(h.D_)),os=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return ze(rs(e.effect_instruction_i0));case T._l:return ce(t(e.effect_instruction_i0))}})),as=e=>{switch(e._tag){case"Left":return ts(e.left);case"Right":return bs(e.right)}},us=e=>{switch(e._tag){case"None":return ts(void 0);case"Some":return bs(e.value)}},cs=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return t(e.effect_instruction_i0);case T._l:return e.effect_instruction_i0}})),ls=e=>rs(I.G(e)),hs=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return rs(e.effect_instruction_i0);case T._l:return bs(t(e.effect_instruction_i0))}})),fs=(0,h.XY)(2,((e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case T.N9:return rs((0,h.Fs)(e.effect_instruction_i0,I.Tj(t)));case T._l:return bs(r(e.effect_instruction_i0))}})),ds=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return rs((0,h.Fs)(e.effect_instruction_i0,I.Tj(t)));case T._l:return bs(e.effect_instruction_i0)}})),ps=(0,h.XY)(2,((e,t)=>{switch(e._tag){case T.N9:return rs(t(e.effect_instruction_i0));case T._l:return bs(e.effect_instruction_i0)}})),gs=(0,h.XY)(2,((e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case T.N9:return t(e.effect_instruction_i0);case T._l:return r(e.effect_instruction_i0)}})),ms=(0,h.XY)(2,((e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case T.N9:return t(e.effect_instruction_i0);case T._l:return r(e.effect_instruction_i0)}})),bs=e=>{const t=new B(T._l);return t.effect_instruction_i0=e,t},ys=bs(void 0),Fs=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>[e,t],onFailure:I.il}))),_s=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>e,onFailure:I.il}))),vs=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>t,onFailure:I.il}))),Is=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>[e,t],onFailure:I._7}))),Ss=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>e,onFailure:I._7}))),ws=(0,h.XY)(2,((e,t)=>ks(e,t,{onSuccess:(e,t)=>t,onFailure:I._7}))),ks=(0,h.XY)(3,((e,t,{onFailure:r,onSuccess:s})=>{switch(e._tag){case T.N9:switch(t._tag){case T._l:return rs(e.effect_instruction_i0);case T.N9:return rs(r(e.effect_instruction_i0,t.effect_instruction_i0))}case T._l:switch(t._tag){case T._l:return bs(s(e.effect_instruction_i0,t.effect_instruction_i0));case T.N9:return rs(t.effect_instruction_i0)}}})),Ys=(e,t)=>{const r=i.Ts(e);return i.J_(r)?(0,h.Fs)(i.Rx(r),n.TS((0,h.Fs)(i.v4(r),hs(i.of)),((e,r)=>(0,h.Fs)(e,ks(r,{onSuccess:(e,t)=>(0,h.Fs)(e,i.Hs(t)),onFailure:t})))),hs(i.BE),hs((e=>i.h3(e))),y.zN):y.dv()},Ns=e=>({[S.FX]:S.do,state:b.L8(S.Ub([])),blockingOn:e,pipe(){return(0,F.t)(this,arguments)}}),Ts=()=>me(pe,(e=>Es(e))),Es=e=>He((()=>Ns(e))),Os=e=>K((t=>{const r=b.Jt(e.state);switch(r._tag){case N.R:return t(r.effect);case N.i:return r.joiners.push(t),$s(e,t)}}),e.blockingOn),xs=(0,h.XY)(2,((e,t)=>xe(t,e))),Xs=(0,h.XY)(2,((e,t)=>He((()=>{const r=b.Jt(e.state);switch(r._tag){case N.R:return!1;case N.i:b.hZ(e.state,S.Vw(t));for(let e=0,s=r.joiners.length;e<s;e++)r.joiners[e](t);return!0}})))),Rs=(0,h.XY)(2,((e,t)=>Xs(e,t))),Ms=(0,h.XY)(2,((e,t)=>Xs(e,le(t)))),As=(0,h.XY)(2,((e,t)=>Xs(e,he(t)))),Ds=(0,h.XY)(2,((e,t)=>Xs(e,fe(t)))),Ps=(0,h.XY)(2,((e,t)=>Xs(e,de(t)))),Cs=(0,h.XY)(2,((e,t)=>Xs(e,ie(t)))),js=(0,h.XY)(2,((e,t)=>Xs(e,ae(t)))),Ws=e=>me(pe,(t=>Xs(e,Te(t)))),Bs=(0,h.XY)(2,((e,t)=>Xs(e,Te(t)))),qs=e=>He((()=>b.Jt(e.state)._tag===N.R)),zs=e=>He((()=>{const t=b.Jt(e.state);switch(t._tag){case N.R:return y.zN(t.effect);case N.i:return y.dv()}})),Ls=(0,h.XY)(2,((e,t)=>Xs(e,ze(t)))),Hs=(0,h.XY)(2,((e,t)=>Xs(e,He(t)))),Js=(e,t)=>{const r=b.Jt(e.state);if(r._tag===N.i){b.hZ(e.state,S.Vw(t));for(let e=0,s=r.joiners.length;e<s;e++)r.joiners[e](t)}},$s=(e,t)=>He((()=>{const r=b.Jt(e.state);if(r._tag===N.i){const e=r.joiners.indexOf(t);e>=0&&r.joiners.splice(e,1)}})),Vs=kt(Jt),Ks=()=>Vs,Us=e=>me(Ks(),e),Gs=(0,h.XY)(2,((e,t)=>jt(Jt,t)(e))),Zs=(0,h.XY)(2,((e,t)=>Wt(Jt,(e=>o.h1(e,t)))(e))),Qs=(0,h.XY)(2,((e,t)=>Us((r=>Gs(e,t(r)))))),en=e=>{const t=e.getFiberRef(Jt).unsafeMap.get(x.Te.key);return void 0!==t&&"Span"===t._tag?y.zN(t):y.dv()},tn={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:y.dv(),context:o.Ie(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:ys},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},rn=e=>{const t=Object.create(tn);return t.name=e,t}},34951:(e,t,r)=>{r.d(t,{w3:()=>a,wC:()=>o});var s=r(43977),n=r(67337),i=r(68498);Array.prototype,n.HR,s.HR;const o=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=i.KE,e}(),a=e=>Object.assign(Object.create(i.KE),e)},44862:(e,t,r)=>{r.d(t,{BQ:()=>N,Gx:()=>I,HO:()=>T,Ii:()=>S,K2:()=>w,RK:()=>m,Ru:()=>b,V6:()=>F,_o:()=>x,aP:()=>v,cF:()=>Y,gm:()=>_,k4:()=>E,qJ:()=>p,s0:()=>y,vz:()=>k,wT:()=>O,yy:()=>g});var s=r(89702),n=r(84073),i=r(61369),o=r(6517),a=r(14969),u=r(57846),c=r(72620),l=r(72572),h=r(37540),f=r(27514);const d=(0,i.Fs)(s.Ie(),s.WQ(a.hV,a.L8()),s.WQ(l.MG,l.nS),s.WQ(h.k_,h.L8(Math.random())),s.WQ(u.Am,u.sF()),s.WQ(f.Ez,f.Vv)),p=(0,o.V)(Symbol.for("effect/DefaultServices/currentServices"),(()=>c.bzD(d))),g=e=>{const t=n.D4(e);return m((e=>e.sleep(t)))},m=e=>c.uPR(p,(t=>e(s.Jt(t,a.hV)))),b=m((e=>e.currentTimeMillis)),y=m((e=>e.currentTimeNanos)),F=(0,i.XY)(2,((e,t)=>c.q1t(p,s.WQ(a.hV,t))(e))),_=(0,i.XY)(2,((e,t)=>c.q1t(p,s.WQ(u.Am,t))(e))),v=e=>c.uPR(p,(t=>e(s.Jt(t,u.Am)))),I=e=>c.uPR(p,(t=>e(s.Jt(t,h.k_)))),S=(0,i.XY)(2,((e,t)=>c.q1t(p,s.WQ(h.k_,t))(e))),w=I((e=>e.next)),k=I((e=>e.nextInt)),Y=I((e=>e.nextBoolean)),N=(e,t)=>I((r=>r.nextRange(e,t))),T=(e,t)=>I((r=>r.nextIntBetween(e,t))),E=e=>I((t=>t.shuffle(e))),O=e=>c.uPR(p,(t=>e(s.Jt(t,f.Ez)))),x=(0,i.XY)(2,((e,t)=>c.q1t(p,s.WQ(f.Ez,t))(e)))},4080:(e,t,r)=>{r.d(t,{FX:()=>n,Ub:()=>o,Vw:()=>a,do:()=>i});var s=r(27576);const n=Symbol.for("effect/Deferred"),i={_E:e=>e,_A:e=>e},o=e=>({_tag:s.i,joiners:e}),a=e=>({_tag:s.R,effect:e})},45779:(e,t,r)=>{r.d(t,{Gg:()=>y,J2:()=>m,L8:()=>d,Q$:()=>I,QZ:()=>F,cA:()=>p,cL:()=>h,iv:()=>g,pd:()=>_,yU:()=>S,yo:()=>v,zI:()=>b});var s=r(43977),n=r(61369),i=r(11635),o=r(281),a=r(89542),u=r(61324),c=r(88961),l=r(76273);const h=Symbol.for("effect/Differ"),f={[h]:{_P:n.D_,_V:n.D_}},d=e=>{const t=Object.create(f);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},p=()=>d({empty:o.Ie(),combine:(e,t)=>o.kg(t)(e),diff:(e,t)=>o.Ui(e,t),patch:(e,t)=>o.F6(t)(e)}),g=e=>d({empty:i.Ie(),combine:(e,t)=>i.kg(t)(e),diff:(t,r)=>i.Ui({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>i.F6(r,e)(t)}),m=e=>d({empty:a.Ie(),combine:(e,t)=>a.kg(t)(e),diff:(t,r)=>a.Ui({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>a.F6(r,e)(t)}),b=()=>d({empty:u.Ie(),combine:(e,t)=>u.kg(t)(e),diff:(e,t)=>u.Ui(e,t),patch:(e,t)=>u.F6(t)(e)}),y=n.XY(2,((e,t)=>d({empty:c.Ie(),combine:(e,t)=>c.kg(e,t),diff:(r,s)=>c.Ui({oldValue:r,newValue:s,left:e,right:t}),patch:(r,s)=>c.F6(r,{oldValue:s,left:e,right:t})}))),F=e=>d({empty:l.Ie(),combine:(e,t)=>l.kg(e,t),diff:(t,r)=>l.Ui({oldValue:t,newValue:r,differ:e}),patch:(t,r)=>l.F6(t,r,e)}),_=n.XY(2,((e,{toNew:t,toOld:r})=>d({empty:e.empty,combine:(t,r)=>e.combine(t,r),diff:(t,s)=>e.diff(r(t),r(s)),patch:(s,n)=>t(e.patch(s,r(n)))}))),v=()=>I(((e,t)=>t)),I=e=>d({empty:n.D_,combine:(e,t)=>e===n.D_?t:t===n.D_?e:r=>t(e(r)),diff:(e,t)=>s.aI(e,t)?n.D_:(0,n.dY)(t),patch:(t,r)=>e(r,t(r))}),S=n.XY(2,((e,t)=>d({empty:[e.empty,t.empty],combine:(r,s)=>[e.combine(r[0],s[0]),t.combine(r[1],s[1])],diff:(r,s)=>[e.diff(r[0],s[0]),t.diff(r[1],s[1])],patch:(r,s)=>[e.patch(r[0],s[0]),t.patch(r[1],s[1])]})))},11635:(e,t,r)=>{r.d(t,{F6:()=>_,Ie:()=>f,PL:()=>a,Ui:()=>y,kg:()=>F});var s=r(28420),n=r(43977),i=r(61369),o=r(34951);const a=Symbol.for("effect/DifferChunkPatch");function u(e){return e}const c={...o.wC.prototype,[a]:{_Value:u,_Patch:u}},l=Object.assign(Object.create(c),{_tag:"Empty"}),h=Object.create(l),f=()=>h,d=Object.assign(Object.create(c),{_tag:"AndThen"}),p=Object.assign(Object.create(c),{_tag:"Append"}),g=Object.assign(Object.create(c),{_tag:"Slice"}),m=Object.assign(Object.create(c),{_tag:"Update"}),b=(e,t)=>{const r=Object.create(m);return r.index=e,r.patch=t,r},y=e=>{let t=0,r=f();for(;t<e.oldValue.length&&t<e.newValue.length;){const o=s.$v(t)(e.oldValue),a=s.$v(t)(e.newValue),u=e.differ.diff(o,a);n.aI(u,e.differ.empty)||(r=(0,i.Fs)(r,F(b(t,u)))),t+=1}return t<e.oldValue.length&&(r=(0,i.Fs)(r,F(((e,t)=>{const r=Object.create(g);return r.from=0,r.until=t,r})(0,t)))),t<e.newValue.length&&(r=(0,i.Fs)(r,F((e=>{const t=Object.create(p);return t.values=e,t})(s.gv(t)(e.newValue))))),r},F=i.XY(2,((e,t)=>((e,t)=>{const r=Object.create(d);return r.first=e,r.second=t,r})(e,t))),_=i.XY(3,((e,t,r)=>{if("Empty"===e._tag)return t;let n=t,i=s.of(e);for(;s.J_(i);){const e=s.v4(i),t=s.Rx(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":i=s.Hs(e.first)(s.Hs(e.second)(t));break;case"Append":n=s.u2(e.values)(n),i=t;break;case"Slice":{const r=s.h3(n);n=s.Iv(r.slice(e.from,e.until)),i=t;break}case"Update":{const o=s.h3(n);o[e.index]=r.patch(e.patch,o[e.index]),n=s.Iv(o),i=t;break}}}return n}))},281:(e,t,r)=>{r.d(t,{F6:()=>S,Ie:()=>d,Ui:()=>v,kg:()=>I,r_:()=>u});var s=r(28420),n=r(43977),i=r(61369),o=r(83768),a=r(34951);const u=Symbol.for("effect/DifferContextPatch");function c(e){return e}const l={...a.wC.prototype,[u]:{_Value:c,_Patch:c}},h=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(h),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),g=Object.assign(Object.create(l),{_tag:"AddService"}),m=(e,t)=>{const r=Object.create(g);return r.key=e,r.service=t,r},b=Object.assign(Object.create(l),{_tag:"RemoveService"}),y=e=>{const t=Object.create(b);return t.key=e,t},F=Object.assign(Object.create(l),{_tag:"UpdateService"}),_=(e,t)=>{const r=Object.create(F);return r.key=e,r.update=t,r},v=(e,t)=>{const r=new Map(e.unsafeMap);let s=d();for(const[e,i]of t.unsafeMap.entries())if(r.has(e)){const t=r.get(e);r.delete(e),n.aI(t,i)||(s=I(_(e,(()=>i)))(s))}else r.delete(e),s=I(m(e,i))(s);for(const[e]of r.entries())s=I(y(e))(s);return s},I=i.XY(2,((e,t)=>((e,t)=>{const r=Object.create(p);return r.first=e,r.second=t,r})(e,t))),S=i.XY(2,((e,t)=>{if("Empty"===e._tag)return t;let r=!1,n=s.of(e);const i=new Map(t.unsafeMap);for(;s.J_(n);){const e=s.v4(n),t=s.Rx(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=s.Hs(s.Hs(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),r=!0,n=t}}if(!r)return(0,o.og)(i);const a=new Map;for(const[e]of t.unsafeMap)i.has(e)&&(a.set(e,i.get(e)),i.delete(e));for(const[e,t]of i)a.set(e,t);return(0,o.og)(a)}))},89542:(e,t,r)=>{r.d(t,{F6:()=>I,Ie:()=>d,Ui:()=>_,kg:()=>v,ys:()=>u});var s=r(28420),n=r(43977),i=r(61369),o=r(5583),a=r(34951);const u=Symbol.for("effect/DifferHashMapPatch");function c(e){return e}const l={...a.wC.prototype,[u]:{_Value:c,_Key:c,_Patch:c}},h=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(h),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),g=Object.assign(Object.create(l),{_tag:"Add"}),m=(e,t)=>{const r=Object.create(g);return r.key=e,r.value=t,r},b=Object.assign(Object.create(l),{_tag:"Remove"}),y=Object.assign(Object.create(l),{_tag:"Update"}),F=(e,t)=>{const r=Object.create(y);return r.key=e,r.patch=t,r},_=e=>{const[t,r]=o.TS([e.oldValue,d()],(([t,r],s,i)=>{const a=o.Jt(i)(t);switch(a._tag){case"Some":{const u=e.differ.diff(a.value,s);return n.aI(u,e.differ.empty)?[o.TF(i)(t),r]:[o.TF(i)(t),v(F(i,u))(r)]}case"None":return[t,v(m(i,s))(r)]}}))(e.newValue);return o.TS(r,((e,t,r)=>v((e=>{const t=Object.create(b);return t.key=e,t})(r))(e)))(t)},v=i.XY(2,((e,t)=>((e,t)=>{const r=Object.create(p);return r.first=e,r.second=t,r})(e,t))),I=i.XY(3,((e,t,r)=>{if("Empty"===e._tag)return t;let n=t,i=s.of(e);for(;s.J_(i);){const e=s.v4(i),t=s.Rx(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":i=s.Hs(e.first)(s.Hs(e.second)(t));break;case"Add":n=o.hZ(e.key,e.value)(n),i=t;break;case"Remove":n=o.TF(e.key)(n),i=t;break;case"Update":{const s=o.Jt(e.key)(n);"Some"===s._tag&&(n=o.hZ(e.key,r.patch(e.patch,s.value))(n)),i=t;break}}}return n}))},61324:(e,t,r)=>{r.d(t,{F6:()=>F,Ie:()=>f,Ui:()=>b,kg:()=>y,os:()=>a});var s=r(28420),n=r(61369),i=r(49942),o=r(34951);const a=Symbol.for("effect/DifferHashSetPatch");function u(e){return e}const c={...o.wC.prototype,[a]:{_Value:u,_Key:u,_Patch:u}},l=Object.assign(Object.create(c),{_tag:"Empty"}),h=Object.create(l),f=()=>h,d=Object.assign(Object.create(c),{_tag:"AndThen"}),p=Object.assign(Object.create(c),{_tag:"Add"}),g=e=>{const t=Object.create(p);return t.value=e,t},m=Object.assign(Object.create(c),{_tag:"Remove"}),b=(e,t)=>{const[r,s]=i.TS([e,f()],(([e,t],r)=>i.zy(r)(e)?[i.TF(r)(e),t]:[e,y(g(r))(t)]))(t);return i.TS(s,((e,t)=>y((e=>{const t=Object.create(m);return t.value=e,t})(t))(e)))(r)},y=n.XY(2,((e,t)=>((e,t)=>{const r=Object.create(d);return r.first=e,r.second=t,r})(e,t))),F=n.XY(2,((e,t)=>{if("Empty"===e._tag)return t;let r=t,n=s.of(e);for(;s.J_(n);){const e=s.v4(n),t=s.Rx(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=s.Hs(e.first)(s.Hs(e.second)(t));break;case"Add":r=i.WQ(e.value)(r),n=t;break;case"Remove":r=i.TF(e.value)(r),n=t}}return r}))},88961:(e,t,r)=>{r.d(t,{F6:()=>v,Ie:()=>d,Ui:()=>F,dh:()=>u,kg:()=>_});var s=r(28420),n=r(57964),i=r(43977),o=r(61369),a=r(34951);const u=Symbol.for("effect/DifferOrPatch");function c(e){return e}const l={...a.wC.prototype,[u]:{_Value:c,_Key:c,_Patch:c}},h=Object.assign(Object.create(l),{_tag:"Empty"}),f=Object.create(h),d=()=>f,p=Object.assign(Object.create(l),{_tag:"AndThen"}),g=Object.assign(Object.create(l),{_tag:"SetLeft"}),m=Object.assign(Object.create(l),{_tag:"SetRight"}),b=Object.assign(Object.create(l),{_tag:"UpdateLeft"}),y=Object.assign(Object.create(l),{_tag:"UpdateRight"}),F=e=>{switch(e.oldValue._tag){case"Left":switch(e.newValue._tag){case"Left":{const t=e.left.diff(e.oldValue.left,e.newValue.left);return i.aI(t,e.left.empty)?d():(e=>{const t=Object.create(b);return t.patch=e,t})(t)}case"Right":return(e=>{const t=Object.create(m);return t.value=e,t})(e.newValue.right)}case"Right":switch(e.newValue._tag){case"Left":return(e=>{const t=Object.create(g);return t.value=e,t})(e.newValue.left);case"Right":{const t=e.right.diff(e.oldValue.right,e.newValue.right);return i.aI(t,e.right.empty)?d():(e=>{const t=Object.create(y);return t.patch=e,t})(t)}}}},_=o.XY(2,((e,t)=>((e,t)=>{const r=Object.create(p);return r.first=e,r.second=t,r})(e,t))),v=o.XY(2,((e,{left:t,oldValue:r,right:i})=>{if("Empty"===e._tag)return r;let o=s.of(e),a=r;for(;s.J_(o);){const e=s.v4(o),r=s.Rx(o);switch(e._tag){case"Empty":o=r;break;case"AndThen":o=s.Hs(e.first)(s.Hs(e.second)(r));break;case"UpdateLeft":"Left"===a._tag&&(a=n.kb(t.patch(e.patch,a.left))),o=r;break;case"UpdateRight":"Right"===a._tag&&(a=n.pG(i.patch(e.patch,a.right))),o=r;break;case"SetLeft":a=n.kb(e.value),o=r;break;case"SetRight":a=n.pG(e.value),o=r}}return a}))},76273:(e,t,r)=>{r.d(t,{F6:()=>_,Ie:()=>f,Ui:()=>y,kg:()=>F,zo:()=>a});var s=r(58600),n=r(43977),i=r(61369),o=r(34951);const a=Symbol.for("effect/DifferReadonlyArrayPatch");function u(e){return e}const c={...o.wC.prototype,[a]:{_Value:u,_Patch:u}},l=Object.assign(Object.create(c),{_tag:"Empty"}),h=Object.create(l),f=()=>h,d=Object.assign(Object.create(c),{_tag:"AndThen"}),p=Object.assign(Object.create(c),{_tag:"Append"}),g=Object.assign(Object.create(c),{_tag:"Slice"}),m=Object.assign(Object.create(c),{_tag:"Update"}),b=(e,t)=>{const r=Object.create(m);return r.index=e,r.patch=t,r},y=e=>{let t=0,r=f();for(;t<e.oldValue.length&&t<e.newValue.length;){const s=e.oldValue[t],i=e.newValue[t],o=e.differ.diff(s,i);n.aI(o,e.differ.empty)||(r=F(r,b(t,o))),t+=1}return t<e.oldValue.length&&(r=F(r,((e,t)=>{const r=Object.create(g);return r.from=0,r.until=t,r})(0,t))),t<e.newValue.length&&(r=F(r,(e=>{const t=Object.create(p);return t.values=e,t})(s.gv(t)(e.newValue)))),r},F=i.XY(2,((e,t)=>((e,t)=>{const r=Object.create(d);return r.first=e,r.second=t,r})(e,t))),_=i.XY(3,((e,t,r)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=s.of(e);for(;s.EI(i);){const e=s.v4(i),t=s.Rx(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(const t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=r.patch(e.patch,n[e.index]),i=t}}return n}))},91276:(e,t,r)=>{r.d(t,{Jr:()=>i,oI:()=>o,zM:()=>n});var s=r(61369);const n=e=>(0,s.XY)(3,((t,r,s)=>e(t,(e=>Object.assign({},e,{[r]:s(e)}))))),i=e=>(0,s.XY)(2,((t,r)=>e(t,(e=>({[r]:e}))))),o=(e,t)=>(0,s.XY)(3,((r,s,n)=>t(r,(t=>e(n(t),(e=>Object.assign({},t,{[s]:e})))))))},68498:(e,t,r)=>{r.d(t,{$n:()=>c,C6:()=>y,Em:()=>m,Hs:()=>d,KE:()=>g,MS:()=>p,O4:()=>l,Pe:()=>b,TW:()=>h,bw:()=>F,le:()=>f});var s=r(43977),n=r(67337),i=r(53533),o=r(30276),a=r(89706),u=r(53563);const c=Symbol.for("effect/Effect"),l=Symbol.for("effect/Stream"),h=Symbol.for("effect/Sink"),f=Symbol.for("effect/Channel"),d={_R:e=>e,_E:e=>e,_A:e=>e,_V:u.M()},p={[c]:d,[l]:d,[h]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[f]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[s.HR](e){return this===e},[n.HR](){return n.PO(this,n.yT(this))},[Symbol.iterator](){return new o.BW(new o.WT(this))},pipe(){return(0,i.t)(this,arguments)}},g={[n.HR](){return n.PO(this,n.QK(this))},[s.HR](e){const t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(const r of t)if(!(r in e)||!s.aI(this[r],e[r]))return!1;return!0}},m={...p,_op:a.kK},b={...m,...g},y=function(){function e(){}return e.prototype=m,e}(),F=function(){function e(){}return e.prototype=b,e}()},9018:(e,t,r)=>{r.d(t,{FG:()=>m,Gp:()=>F,OC:()=>g,Wc:()=>p,ii:()=>l,j4:()=>_,kb:()=>b,pG:()=>y,sV:()=>v});var s=r(43977),n=r(61369),i=r(67337),o=r(83845),a=r(56572),u=r(68498),c=r(8578);const l=Symbol.for("effect/Either"),h={...u.MS,[l]:{_R:e=>e},[o.FX](){return this.toJSON()},toString(){return(0,o.GP)(this.toJSON())}},f=Object.assign(Object.create(h),{_tag:"Right",_op:"Right",[s.HR](e){return p(e)&&m(e)&&s.aI(this.right,e.right)},[i.HR](){return i.kg(i.tW(this._tag))(i.tW(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:(0,o.U2)(this.right)}}}),d=Object.assign(Object.create(h),{_tag:"Left",_op:"Left",[s.HR](e){return p(e)&&g(e)&&s.aI(this.left,e.left)},[i.HR](){return i.kg(i.tW(this._tag))(i.tW(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:(0,o.U2)(this.left)}}}),p=e=>(0,a.i5)(e,l),g=e=>"Left"===e._tag,m=e=>"Right"===e._tag,b=e=>{const t=Object.create(d);return t.left=e,t},y=e=>{const t=Object.create(f);return t.right=e,t},F=e=>m(e)?c.dv:c.zN(e.left),_=e=>g(e)?c.dv:c.zN(e.right),v=(0,n.XY)(2,((e,t)=>c.$I(e)?b(t()):y(e.value)))},94732:(e,t,r)=>{r.d(t,{k:()=>s});const s=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`},32628:(e,t,r)=>{r.d(t,{Gp:()=>l,K7:()=>h,Uv:()=>f,YW:()=>d,_7:()=>u,_K:()=>c,il:()=>a});var s=r(61369);const n="Sequential",i="Parallel",o="ParallelN",a={_tag:n},u={_tag:i},c=e=>({_tag:o,parallelism:e}),l=e=>e._tag===n,h=e=>e._tag===i,f=e=>e._tag===o,d=(0,s.XY)(2,((e,t)=>{switch(e._tag){case n:return t.onSequential();case i:return t.onParallel();case o:return t.onParallelN(e.parallelism)}}))},24285:(e,t,r)=>{r.d(t,{AT:()=>x,Bh:()=>T,FW:()=>q,GP:()=>F,Gg:()=>J,Ik:()=>te,KB:()=>E,Lv:()=>S,NW:()=>H,Py:()=>Z,QV:()=>y,Tj:()=>W,UX:()=>C,VM:()=>A,Vw:()=>N,WK:()=>B,YW:()=>z,Y_:()=>Y,Zh:()=>w,Zm:()=>L,_g:()=>K,ab:()=>U,fJ:()=>O,fj:()=>j,gt:()=>k,h5:()=>G,id:()=>R,j9:()=>V,nA:()=>D,pH:()=>I,qV:()=>ee,rI:()=>Q,sA:()=>v,tx:()=>P,uS:()=>X,wt:()=>$,zq:()=>M});var s=r(31651),n=r(57964),i=r(96949),o=r(95602),a=r(85485),u=r(61369),c=r(49942),l=r(4676),h=r(77948),f=r(59877),d=r(53533),p=r(56572),g=r(72620),m=r(8977),b=r(66932);const y=Symbol.for("effect/Fiber"),F={_E:e=>e,_A:e=>e},_={[y]:F,pipe(){return(0,d.t)(this,arguments)}},v=Symbol.for("effect/Fiber"),I=(0,u.Fs)(f.PV(l.pH,l.pH),f.zQ((e=>[e.id().startTimeMillis,e.id().id]))),S=e=>(0,p.i5)(e,y),w=e=>v in e,k=e=>e.await,Y=e=>e.children,N=e=>({..._,id:()=>o.dv,await:g.PyW(e),children:g.PyW([]),inheritAll:g.rIH,poll:g.PyW(h.zN(e)),interruptAsFork:()=>g.rIH}),T=e=>g.TjK(e.status,(t=>({id:e.id(),status:t}))),E=e=>g.CFK(e,T),O=e=>N(i.fJ(e)),x=e=>N(i.AT(e)),X=e=>g.TjK(g.NS5(e),N),R=e=>e.id(),M=e=>e.inheritAll,A=e=>N(i.G(e)),D=e=>g.qIB(g.ABT,(t=>(0,u.Fs)(e,P(t)))),P=(0,u.XY)(2,((e,t)=>(0,u.Fs)(g.QZV(e,C(t)),g.aNH((0,u.Fs)(e,g.QZV(k)))))),C=(0,u.XY)(2,((e,t)=>e.interruptAsFork(t))),j=e=>g.piH(g.Bqz(e.await),e.inheritAll),W=(0,u.XY)(2,((e,t)=>B(e,(e=>g.OH5((()=>t(e))))))),B=(0,u.XY)(2,((e,t)=>({..._,id:()=>e.id(),await:g.qIB(e.await,i.Cw(t)),children:e.children,inheritAll:e.inheritAll,poll:g.qIB(e.poll,(e=>{switch(e._tag){case"None":return g.PyW(h.dv());case"Some":return(0,u.Fs)(i.Cw(e.value,t),g.TjK(h.zN))}})),interruptAsFork:t=>e.interruptAsFork(t)}))),q=(0,u.XY)(2,((e,t)=>g.TjK(e.await,i.YW({onFailure:e=>x(e),onSuccess:e=>t(e)})))),z=(0,u.XY)(2,((e,{onFiber:t,onRuntimeFiber:r})=>w(e)?r(e):t(e))),L={..._,id:()=>o.dv,await:g.ZmZ,children:g.PyW([]),inheritAll:g.ZmZ,poll:g.PyW(h.dv()),interruptAsFork:()=>g.ZmZ},H=(0,u.XY)(2,((e,t)=>({..._,id:()=>o.Do(e.id(),t.id()),await:g.OYO(e.await,t.await,((e,t)=>i.oJ(e)?e:t)),children:e.children,inheritAll:g.aNH(t.inheritAll,e.inheritAll),poll:g.OYO(e.poll,t.poll,((e,t)=>{switch(e._tag){case"None":return h.dv();case"Some":return i.oJ(e.value)?e:t}})),interruptAsFork:r=>(0,u.Fs)(g._tB(e,r),g.aNH((0,u.Fs)(t,g._tB(r))),g.NLW)}))),J=(0,u.XY)(2,((e,t)=>H(W(e,n.kb),W(t,n.pG)))),$=e=>e.poll,V=e=>g.qIB(s.Ru,(t=>g.TjK(T(e),(e=>{const r=t-e.id.startTimeMillis,{days:s,hours:n,milliseconds:i,minutes:u,seconds:l}=(e=>{const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}})(r),h=(0===s?"":`${s}d`)+(0===s&&0===n?"":`${n}h`)+(0===s&&0===n&&0===u?"":`${u}m`)+(0===s&&0===n&&0===u&&0===l?"":`${l}s`)+`${i}ms`,f=a.eJ(e.status)?(()=>{const t=o.dK(e.status.blockingOn);return c.Ej(t)>0?"waiting on "+Array.from(t).map((e=>`${e}`)).join(", "):""})():"",d=(e=>a.$L(e)?"Done":a.W_(e)?"Running":`Suspended(${b.In(e.runtimeFlags)?"interruptible":"uninterruptible"})`)(e.status);return`[Fiber](#${e.id.id}) (${h}) ${f}\n   Status: ${d}`})))),K=()=>Array.from(m.gm.roots),U=g.OH5(K),G=e=>e.status,Z=e=>N(i.Py(e)),Q=Z(void 0),ee="effect/FiberCurrent",te=()=>h.k$(globalThis[ee])},78908:(e,t,r)=>{r.d(t,{$I:()=>k,$N:()=>P,CB:()=>M,Do:()=>O,L8:()=>R,M1:()=>D,dK:()=>x,dv:()=>v,fA:()=>I,gb:()=>w,kg:()=>T,lm:()=>d,mO:()=>N,pM:()=>E,sN:()=>S,vk:()=>Y,zL:()=>A});var s=r(43977),n=r(61369),i=r(6517),o=r(67337),a=r(49942),u=r(83845),c=r(45914),l=r(77948),h=r(56572);const f="effect/FiberId",d=Symbol.for(f),p="None",g="Runtime",m="Composite",b=o.Yj(`${f}-${p}`);class y{[d]=d;_tag=p;id=-1;startTimeMillis=-1;[o.HR](){return b}[s.HR](e){return w(e)&&e._tag===p}toString(){return(0,u.GP)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[u.FX](){return this.toJSON()}}class F{id;startTimeMillis;[d]=d;_tag=g;constructor(e,t){this.id=e,this.startTimeMillis=t}[o.HR](){return o.PO(this,o.Yj(`${f}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[s.HR](e){return w(e)&&e._tag===g&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return(0,u.GP)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[u.FX](){return this.toJSON()}}class _{left;right;[d]=d;_tag=m;constructor(e,t){this.left=e,this.right=t}_hash;[o.HR](){return(0,n.Fs)(o.Yj(`${f}-${this._tag}`),o.kg(o.tW(this.left)),o.kg(o.tW(this.right)),o.PO(this))}[s.HR](e){return w(e)&&e._tag===m&&s.aI(this.left,e.left)&&s.aI(this.right,e.right)}toString(){return(0,u.GP)(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:(0,u.U2)(this.left),right:(0,u.U2)(this.right)}}[u.FX](){return this.toJSON()}}const v=new y,I=(e,t)=>new F(e,t),S=(e,t)=>new _(e,t),w=e=>(0,h.i5)(e,d),k=e=>e._tag===p||(0,n.Fs)(D(e),a.Si((e=>k(e)))),Y=e=>e._tag===g,N=e=>e._tag===m,T=(0,n.XY)(2,((e,t)=>e._tag===p?t:t._tag===p?e:new _(e,t))),E=e=>(0,n.Fs)(e,a.TS(v,((e,t)=>T(t)(e)))),O=(0,n.XY)(2,((e,t)=>k(e)?t:e)),x=e=>{switch(e._tag){case p:return a.Ie();case g:return a.L8(e.id);case m:return(0,n.Fs)(x(e.left),a.KC(x(e.right)))}},X=(0,i.V)(Symbol.for("effect/Fiber/Id/_fiberCounter"),(()=>c.L8(0))),R=(e,t)=>new F(e,t),M=e=>Array.from(x(e)).map((e=>`#${e}`)).join(","),A=e=>{const t=D(e);if(0===a.Ej(t))return l.dv();let r,s=!0;for(const e of t)s?(r=e,s=!1):r=(0,n.Fs)(r,T(e));return l.zN(r)},D=e=>{switch(e._tag){case p:return a.Ie();case g:return a.L8(e);case m:return(0,n.Fs)(D(e.left),a.KC(D(e.right)))}},P=()=>{const e=c.Jt(X);return(0,n.Fs)(X,c.hZ(e+1)),new F(e,Date.now())}},44402:(e,t,r)=>{r.d(t,{CW:()=>a,FR:()=>o,Ry:()=>u,U:()=>c,VH:()=>s,dT:()=>n,m9:()=>l,yo:()=>i});const s="InterruptSignal",n="Stateful",i="Resume",o="YieldNow",a=e=>({_tag:s,cause:e}),u=e=>({_tag:n,onFiber:e}),c=e=>({_tag:i,effect:e}),l=()=>({_tag:o})},89391:(e,t,r)=>{r.d(t,{$N:()=>l,Au:()=>y,BG:()=>g,Fh:()=>v,Ie:()=>h,Jt:()=>_,Rt:()=>F,aI:()=>I,gU:()=>f,rQ:()=>b,rl:()=>p,vG:()=>w});var s=r(58600),n=r(43977),i=r(61369),o=r(49942),a=r(77948),u=r(53533),c=r(72620);function l(e){return new d(e)}function h(){return l(new Map)}const f=Symbol.for("effect/FiberRefs");class d{locals;[f]=f;constructor(e){this.locals=e}pipe(){return(0,u.t)(this,arguments)}}const p=(0,i.XY)(3,((e,t,r)=>{const i=new Map(e.locals);return r.locals.forEach(((e,r)=>{const o=e[0][1];if(!e[0][0][n.HR](t)){if(!i.has(r)){if(n.aI(o,r.initial))return;return void i.set(r,[[t,r.join(r.initial,o)]])}const a=i.get(r),[u,c]=((e,t,r,n=!1)=>{const i=e;let o,a=t,u=r,c=n;for(;void 0===o;)if(s.iI(a)&&s.iI(u)){const e=s.v4(a)[0],t=s.Rx(a),r=s.v4(u)[0],n=s.v4(u)[1],i=s.Rx(u);e.startTimeMillis<r.startTimeMillis?(u=i,c=!0):e.startTimeMillis>r.startTimeMillis?a=t:e.id<r.id?(u=i,c=!0):e.id>r.id?a=t:o=[n,c]}else o=[i.initial,!0];return o})(r,a,e);if(c){const e=r.diff(u,o),s=a[0][1],c=r.join(s,r.patch(e)(s));if(!n.aI(s,c)){let e;const s=a[0][0];e=s[n.HR](t)?[[s,c],...a.slice(1)]:[[t,c],...a],i.set(r,e)}}}})),new d(i)})),g=(0,i.XY)(2,((e,t)=>{const r=new Map;return m(e,r,t),new d(r)})),m=(e,t,r)=>{e.locals.forEach(((e,s)=>{const i=e[0][1],o=s.patch(s.fork)(i);n.aI(i,o)?t.set(s,e):t.set(s,[[r,o],...e])}))},b=e=>o.Ts(e.locals.keys()),y=e=>c.QZV(b(e),(t=>c.Ecz(t,v(e,t)))),F=(0,i.XY)(2,((e,t)=>{const r=new Map(e.locals);return r.delete(t),new d(r)})),_=(0,i.XY)(2,((e,t)=>e.locals.has(t)?a.zN(s.v4(e.locals.get(t))[1]):a.dv())),v=(0,i.XY)(2,((e,t)=>(0,i.Fs)(_(e,t),a.WL((()=>t.initial))))),I=(0,i.XY)(2,((e,{fiberId:t,fiberRef:r,value:s})=>{if(0===e.locals.size)return new d(new Map([[r,[[t,s]]]]));const n=new Map(e.locals);return S(n,t,r,s),new d(n)})),S=(e,t,r,i)=>{const o=e.get(r)??[];let a;if(s.iI(o)){const[e,r]=s.v4(o);if(e[n.HR](t)){if(n.aI(r,i))return;a=[[t,i],...o.slice(1)]}else a=[[t,i],...o]}else a=[[t,i]];e.set(r,a)},w=(0,i.XY)(2,((e,{entries:t,forkAs:r})=>{if(0===e.locals.size)return new d(new Map(t));const s=new Map(e.locals);return void 0!==r&&m(e,s,r),t.forEach((([e,t])=>{1===t.length?S(s,t[0][0],e,t[0][1]):t.forEach((([t,r])=>{S(s,t,e,r)}))})),new d(s)}))},92538:(e,t,r)=>{r.d(t,{F6:()=>p,Ie:()=>h,Ui:()=>f,kg:()=>d});var s=r(58600),n=r(43977),i=r(61369),o=r(89391);const a="Empty",u="Remove",c="Update",l="AndThen",h={_tag:a},f=(e,t)=>{const r=new Map(e.locals);let i=h;for(const[e,o]of t.locals.entries()){const t=s.v4(o)[1],a=r.get(e);if(void 0!==a){const r=s.v4(a)[1];(0,n.aI)(r,t)||(i=d({_tag:c,fiberRef:e,patch:e.diff(r,t)})(i))}else i=d({_tag:"Add",fiberRef:e,value:t})(i);r.delete(e)}for(const[e]of r.entries())i=d({_tag:u,fiberRef:e})(i);return i},d=(0,i.XY)(2,((e,t)=>({_tag:l,first:e,second:t}))),p=(0,i.XY)(3,((e,t,r)=>{let n=r,i=s.of(e);for(;s.iI(i);){const e=s.v4(i),r=s.Rx(i);switch(e._tag){case a:i=r;break;case"Add":n=o.aI(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=r;break;case u:n=o.Rt(n,e.fiberRef),i=r;break;case c:{const s=o.Fh(n,e.fiberRef);n=o.aI(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(s)}),i=r;break}case l:i=s.Hs(e.first)(s.Hs(e.second)(r))}}return n}))},60356:(e,t,r)=>{r.d(t,{d7:()=>ur,Q5:()=>Ir,p5:()=>Sr,U9:()=>wr,Q7:()=>Or,XU:()=>Xr,_y:()=>xr,gs:()=>vr,sO:()=>_r,RZ:()=>Fr,UO:()=>cr,Lt:()=>Rs,me:()=>Ms,e7:()=>kr,Um:()=>fr,Zf:()=>Bs,ye:()=>Hs,t2:()=>Nr,qm:()=>Ds,C6:()=>As,oh:()=>Ps,IN:()=>Cs,Eq:()=>Ns,_1:()=>Ts,wT:()=>Es,BB:()=>xs,Rf:()=>Xs,xK:()=>Os,WY:()=>Ys,xk:()=>js,pb:()=>Er,ct:()=>es,jJ:()=>Ar,Kd:()=>Pr,L7:()=>Dr,Zy:()=>jr,LX:()=>Wr,Bh:()=>Br,$O:()=>$s,Rz:()=>dr,oi:()=>is,S_:()=>pr,eU:()=>hr,qI:()=>lr,By:()=>yr,Rd:()=>Vs,B1:()=>Jr,dJ:()=>Zr,jB:()=>$r,xW:()=>gr,O4:()=>qs,Vd:()=>Kr,Fp:()=>zs,wV:()=>Ws,GH:()=>Gr,aA:()=>Rr,Xr:()=>Mr,z8:()=>_s,v_:()=>ws,RW:()=>Ss,DL:()=>Fs,md:()=>ks,NB:()=>ts,sZ:()=>rs,PO:()=>ss,SZ:()=>mr,Yt:()=>ns,ek:()=>br,v:()=>os,tf:()=>as,wM:()=>Vr,nO:()=>cs,xJ:()=>us,rh:()=>ls,Ek:()=>fs,lg:()=>ds,AA:()=>hs,qH:()=>ys,zr:()=>Us,i4:()=>Ks,Ne:()=>gs,SJ:()=>ps,OC:()=>ms,cw:()=>bs});var s=r(30276),n=r(58600),i=r(83733),o=r(28420),a=r(89702),u=r(62738),c=r(37728),l=r(92102),h=r(95602),f=r(11486),d=r(46755),p=r(85485),g=r(61369),m=r(6517),b=r(5583),y=r(49942),F=r(83845),_=r(34321),v=r(57964),I=(r(38961),r(53533));const S=Symbol.for("effect/Micro/runSymbol");g.D_,globalThis.Error,F.FX,v.pG,v.kb,v.FG,v.OC;const w=Symbol.for("effect/Micro/Env"),k=Symbol.for("effect/Micro/EnvRef"),Y={[w]:{_R:g.D_},pipe(){return(0,I.t)(this,arguments)}},N=e=>{const t=Object.create(Y);return t.refs=e,t},T=(0,g.XY)(2,((e,t)=>t.key in e.refs?e.refs[t.key]:t.initial)),E=(0,g.XY)(3,((e,t,r)=>{const s=Object.assign(Object.create(null),e.refs);return s[t.key]=r,N(s)})),O={[k]:k},x=(e,t)=>(0,m.V)(e,(()=>{const r=Object.create(O);return r.key=e,r.initial=t(),r})),X=x("effect/Micro/currentAbortController",(()=>{})),R=x("effect/Micro/currentAbortSignal",(()=>{})),M=x("effect/Micro/currentContext",(()=>a.Ie()));c.MS,g.D_,g.D_,g.D_,Symbol.iterator,"setImmediate"in globalThis&&globalThis.setImmediate;var A=r(45914),D=r(77948),P=r(56572),C=r(55040),j=r(28202),W=r(71108),B=r(68481),q=r(8197),z=r(14969),L=r(42927),H=r(72620);const J=(e,t,r,s)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return H.uPR(H.D$Q,(e=>"unbounded"===e?r():e>1?s(e):t()));default:return e>1?s(e):t()}},$=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r();case"inherit":return H.uPR(H.D$Q,(e=>"unbounded"===e||e>1?r():t()));default:return e>1?r():t()}};var V=r(57846),K=r(20808),U=r(44862),G=r(72572),Z=r(32628),Q=r(24285),ee=r(44402),te=r(89391),re=r(8977),se=r(65123),ne=r(43977),ie=r(67337);const oe=Symbol.for("effect/MetricKeyType"),ae="effect/MetricKeyType/Counter",ue=Symbol.for(ae),ce=Symbol.for("effect/MetricKeyType/Frequency"),le=Symbol.for("effect/MetricKeyType/Gauge"),he="effect/MetricKeyType/Histogram",fe=Symbol.for(he),de=Symbol.for("effect/MetricKeyType/Summary"),pe={_In:e=>e,_Out:e=>e};class ge{incremental;bigint;[oe]=pe;[ue]=ue;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=ie.Yj(ae)}_hash;[ie.HR](){return this._hash}[ne.HR](e){return be(e)}pipe(){return(0,I.t)(this,arguments)}}ie.HR,ne.HR,ie.HR,ne.HR;class me{boundaries;[oe]=pe;[fe]=fe;constructor(e){this.boundaries=e,this._hash=(0,g.Fs)(ie.Yj(he),ie.kg(ie.tW(this.boundaries)))}_hash;[ie.HR](){return this._hash}[ne.HR](e){return ye(e)&&ne.aI(this.boundaries,e.boundaries)}pipe(){return(0,I.t)(this,arguments)}}ie.HR,ne.HR;const be=e=>(0,P.i5)(e,ue),ye=e=>(0,P.i5)(e,fe),Fe=Symbol.for("effect/MetricKey"),_e={_Type:e=>e},ve=n.bt(ne.aI);class Ie{name;keyType;description;tags;[Fe]=_e;constructor(e,t,r,s=[]){this.name=e,this.keyType=t,this.description=r,this.tags=s,this._hash=(0,g.Fs)(ie.Yj(this.name+this.description),ie.kg(ie.tW(this.keyType)),ie.kg(ie.YO(this.tags)))}_hash;[ie.HR](){return this._hash}[ne.HR](e){return Se(e)&&this.name===e.name&&ne.aI(this.keyType,e.keyType)&&ne.aI(this.description,e.description)&&ve(this.tags,e.tags)}pipe(){return(0,I.t)(this,arguments)}}const Se=e=>(0,P.i5)(e,Fe),we=(0,g.XY)(2,((e,t)=>0===t.length?e:new Ie(e.name,e.keyType,e.description,n.KC(e.tags,t))));var ke=r(58762),Ye=r(14349),Ne=r(84073),Te=r(4676);const Ee=Symbol.for("effect/MetricState"),Oe="effect/MetricState/Counter",xe=Symbol.for(Oe),Xe="effect/MetricState/Frequency",Re=Symbol.for(Xe),Me="effect/MetricState/Gauge",Ae=Symbol.for(Me),De="effect/MetricState/Histogram",Pe=Symbol.for(De),Ce="effect/MetricState/Summary",je=Symbol.for(Ce),We={_A:e=>e};class Be{count;[Ee]=We;[xe]=xe;constructor(e){this.count=e}[ie.HR](){return(0,g.Fs)(ie.tW(Oe),ie.kg(ie.tW(this.count)),ie.PO(this))}[ne.HR](e){return $e(e)&&this.count===e.count}pipe(){return(0,I.t)(this,arguments)}}const qe=n.bt(ne.aI);class ze{occurrences;[Ee]=We;[Re]=Re;constructor(e){this.occurrences=e}_hash;[ie.HR](){return(0,g.Fs)(ie.Yj(Xe),ie.kg(ie.YO(n.Ts(this.occurrences.entries()))),ie.PO(this))}[ne.HR](e){return Ve(e)&&qe(n.Ts(this.occurrences.entries()),n.Ts(e.occurrences.entries()))}pipe(){return(0,I.t)(this,arguments)}}class Le{value;[Ee]=We;[Ae]=Ae;constructor(e){this.value=e}[ie.HR](){return(0,g.Fs)(ie.tW(Me),ie.kg(ie.tW(this.value)),ie.PO(this))}[ne.HR](e){return Ke(e)&&this.value===e.value}pipe(){return(0,I.t)(this,arguments)}}class He{buckets;count;min;max;sum;[Ee]=We;[Pe]=Pe;constructor(e,t,r,s,n){this.buckets=e,this.count=t,this.min=r,this.max=s,this.sum=n}[ie.HR](){return(0,g.Fs)(ie.tW(De),ie.kg(ie.tW(this.buckets)),ie.kg(ie.tW(this.count)),ie.kg(ie.tW(this.min)),ie.kg(ie.tW(this.max)),ie.kg(ie.tW(this.sum)),ie.PO(this))}[ne.HR](e){return Ue(e)&&ne.aI(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,I.t)(this,arguments)}}class Je{error;quantiles;count;min;max;sum;[Ee]=We;[je]=je;constructor(e,t,r,s,n,i){this.error=e,this.quantiles=t,this.count=r,this.min=s,this.max=n,this.sum=i}[ie.HR](){return(0,g.Fs)(ie.tW(Ce),ie.kg(ie.tW(this.error)),ie.kg(ie.tW(this.quantiles)),ie.kg(ie.tW(this.count)),ie.kg(ie.tW(this.min)),ie.kg(ie.tW(this.max)),ie.kg(ie.tW(this.sum)),ie.PO(this))}[ne.HR](e){return Ge(e)&&this.error===e.error&&ne.aI(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return(0,I.t)(this,arguments)}}const $e=e=>(0,P.i5)(e,xe),Ve=e=>(0,P.i5)(e,Re),Ke=e=>(0,P.i5)(e,Ae),Ue=e=>(0,P.i5)(e,Pe),Ge=e=>(0,P.i5)(e,je),Ze=Symbol.for("effect/MetricHook"),Qe={_In:e=>e,_Out:e=>e},et=e=>({[Ze]:Qe,pipe(){return(0,I.t)(this,arguments)},...e}),tt=BigInt(0),rt=(e,t,r)=>{const s=r.length;if(!n.iI(t))return n.Ie();const i=t[0],o=t.slice(1),a=st(e,s,D.dv(),0,i,r),u=n.of(a);return o.forEach((t=>{u.push(st(e,s,a.value,a.consumed,t,a.rest))})),n.Tj(u,(e=>[e.quantile,e.value]))},st=(e,t,r,s,i,o)=>{let a=e,u=t,c=r,l=s,h=i,f=o,d=e,p=t,g=r,m=s,b=i,y=o;for(;;){if(!n.iI(f))return{quantile:h,value:D.dv(),consumed:l,rest:[]};if(1===h)return{quantile:h,value:D.zN(n.Rm(f)),consumed:l+f.length,rest:[]};const e=n.Ln(f,(e=>e<=f[0])),t=h*u,r=a/2*t,s=l+e[0].length,i=Math.abs(s-t);if(s<t-r)d=a,p=u,g=n.d5(f),m=s,b=h,y=e[1],a=d,u=p,c=g,l=m,h=b,f=y;else{if(s>t+r)return{quantile:h,value:c,consumed:l,rest:f};switch(c._tag){case"None":d=a,p=u,g=n.d5(f),m=s,b=h,y=e[1],a=d,u=p,c=g,l=m,h=b,f=y;continue;case"Some":if(i<Math.abs(t-c.value)){d=a,p=u,g=n.d5(f),m=s,b=h,y=e[1],a=d,u=p,c=g,l=m,h=b,f=y;continue}return{quantile:h,value:D.zN(c.value),consumed:l,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},nt=Symbol.for("effect/MetricPair"),it={_Type:e=>e},ot=(e,t)=>({[nt]:it,metricKey:e,metricState:t,pipe(){return(0,I.t)(this,arguments)}}),at=Symbol.for("effect/MetricRegistry");class ut{[at]=at;map=Ye.Ie();snapshot(){const e=[];for(const[t,r]of this.map)e.push(ot(t,r.get()));return e}get(e){const t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){if(be(e.keyType))return this.getCounter(e);if(r=e.keyType,(0,P.i5)(r,le))return this.getGauge(e);if((e=>(0,P.i5)(e,ce))(e.keyType))return this.getFrequency(e);if(ye(e.keyType))return this.getHistogram(e);if((e=>(0,P.i5)(e,de))(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}var r;return t}getCounter(e){let t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){const r=(e=>{let t=e.keyType.bigint?tt:0;const r=e.keyType.incremental?e.keyType.bigint?e=>e>=tt:e=>e>=0:e=>!0;return et({get:()=>new Be(t),update:e=>{r(e)&&(t+=e)}})})(e);(0,g.Fs)(this.map,Ye.zy(e))||(0,g.Fs)(this.map,Ye.hZ(e,r)),t=r}return t}getFrequency(e){let t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){const r=(e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);return et({get:()=>new ze(t),update:e=>{const r=t.get(e)??0;t.set(e,r+1)}})})(e);(0,g.Fs)(this.map,Ye.zy(e))||(0,g.Fs)(this.map,Ye.hZ(e,r)),t=r}return t}getGauge(e){let t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){const r=((e,t)=>{let r=t;return et({get:()=>new Le(r),update:e=>{r=e}})})(0,e.keyType.bigint?BigInt(0):0);(0,g.Fs)(this.map,Ye.zy(e))||(0,g.Fs)(this.map,Ye.hZ(e,r)),t=r}return t}getHistogram(e){let t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){const r=(e=>{const t=e.keyType.boundaries.values,r=t.length,s=new Uint32Array(r+1),i=new Float32Array(r);let o=0,a=0,u=Number.MAX_VALUE,c=Number.MIN_VALUE;(0,g.Fs)(t,n.di(Te.pH),n.Tj(((e,t)=>{i[t]=e})));const l=()=>{const e=n.CN(r);let t=0;for(let n=0;n<r;n++){const r=i[n];t+=s[n],e[n]=[r,t]}return e};return et({get:()=>{return e={buckets:l(),count:o,min:u,max:c,sum:a},new He(e.buckets,e.count,e.min,e.max,e.sum);var e},update:e=>{let t=0,n=r;for(;t!==n;){const r=Math.floor(t+(n-t)/2);e<=i[r]?n=r:t=r,n===t+1&&(e<=i[t]?n=t:t=n)}s[t]=s[t]+1,o+=1,a+=e,e<u&&(u=e),e>c&&(c=e)}})})(e);(0,g.Fs)(this.map,Ye.zy(e))||(0,g.Fs)(this.map,Ye.hZ(e,r)),t=r}return t}getSummary(e){let t=(0,g.Fs)(this.map,Ye.Jt(e),D.Y6);if(null==t){const r=(e=>{const{error:t,maxAge:r,maxSize:s,quantiles:i}=e.keyType,o=(0,g.Fs)(i,n.di(Te.pH)),a=n.CN(s);let u=0,c=0,l=0,h=Number.MAX_VALUE,f=Number.MIN_VALUE;const d=e=>{const i=[];let u=0;for(;u!==s-1;){const t=a[u];if(null!=t){const[s,n]=t,o=Ne.ne(e-s);Ne.An(o,Ne.v_)&&o<=r&&i.push(n)}u+=1}return rt(t,o,n.di(i,Te.pH))};return et({get:()=>{return e={error:t,quantiles:d(Date.now()),count:c,min:h,max:f,sum:l},new Je(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var e},update:([e,t])=>((e,t)=>{s>0&&(u+=1,a[u%s]=[t,e]),c+=1,l+=e,e<h&&(h=e),e>f&&(f=e)})(e,t)})})(e);(0,g.Fs)(this.map,Ye.zy(e))||(0,g.Fs)(this.map,Ye.hZ(e,r)),t=r}return t}}const ct=Symbol.for("effect/Metric"),lt={_Type:e=>e,_In:e=>e,_Out:e=>e},ht=(0,m.V)(Symbol.for("effect/Metric/globalMetricRegistry"),(()=>new ut)),ft=function(e,t,r){const s=Object.assign((e=>H.Mim(e,(e=>yt(s,e)))),{[ct]:lt,keyType:e,unsafeUpdate:t,unsafeValue:r,register(){return this.unsafeValue([]),this},pipe(){return(0,I.t)(this,arguments)}});return s},dt=(e,t)=>pt(((e,t)=>new Ie(e,(e=>new ge(e?.incremental??!1,e?.bigint??!1))(t),D.k$(t?.description)))(e,t)),pt=e=>{let t;const r=new WeakMap,s=s=>{if(0===s.length)return void 0!==t||(t=ht.get(e)),t;let n=r.get(s);return void 0!==n||(n=ht.get(we(e,s)),r.set(s,n)),n};return ft(e.keyType,((e,t)=>s(t).update(e)),(e=>s(e).get()))},gt=(e,t,r)=>pt(((e,t,r)=>new Ie(e,(e=>new me(e))(t),D.k$(r)))(e,t,r)),mt=(0,g.XY)(3,((e,t,r)=>bt(e,[ke.L8(t,r)]))),bt=(0,g.XY)(2,((e,t)=>ft(e.keyType,((r,s)=>e.unsafeUpdate(r,n.KC(t,s))),(r=>e.unsafeValue(n.KC(t,r)))))),yt=(0,g.XY)(2,((e,t)=>H.uPR(H.b1P,(r=>H.OH5((()=>e.unsafeUpdate(t,r))))))),Ft="effect/MetricBoundaries",_t=Symbol.for(Ft);class vt{values;[_t]=_t;constructor(e){this.values=e,this._hash=(0,g.Fs)(ie.Yj(Ft),ie.kg(ie.YO(this.values)))}_hash;[ie.HR](){return this._hash}[ne.HR](e){return It(e)&&ne.aI(this.values,e.values)}pipe(){return(0,I.t)(this,arguments)}}const It=e=>(0,P.i5)(e,_t),St=e=>{const t=(0,g.Fs)(e,n.u2(o.of(Number.POSITIVE_INFINITY)),n.Qq);return new vt(t)},wt=e=>(0,g.Fs)(n.Y6(e.count-1,(t=>e.start*Math.pow(e.factor,t))),o.Iv,St);var kt=r(89706),Yt=r(37540),Nt=r(2146),Tt=r(66932),Et=r(35021),Ot=r(45779),xt=r(11635),Xt=r(281),Rt=r(89542),Mt=r(61324),At=r(88961),Dt=r(76273);Ot.cL,xt.PL,Xt.r_,Rt.ys,Mt.os,At.dh,Dt.zo;const Pt=Ot.L8,Ct=(Ot.cA,Ot.iv,Ot.J2,Ot.zI,Ot.Gg,Ot.QZ,Ot.pd,Ot.yo,Ot.Q$,Ot.yU,"Empty"),jt="AddSupervisor",Wt="RemoveSupervisor",Bt="AndThen",qt={_tag:Ct},zt=(e,t)=>({_tag:Bt,first:e,second:t}),Lt=(e,t)=>ne.aI(e,t)?Et.dv:Et.K0(e)?Lt(e.left,t).zip(Lt(e.right,t)):e,Ht=e=>ne.aI(e,Et.dv)?y.Ie():Et.K0(e)?(0,g.Fs)(Ht(e.left),y.KC(Ht(e.right))):y.L8(e),Jt=Pt({empty:qt,patch:(e,t)=>((e,t)=>{let r=e,s=t;for(;o.J_(s);){const e=o.v4(s);switch(e._tag){case Ct:s=o.Rx(s);break;case jt:r=r.zip(e.supervisor),s=o.Rx(s);break;case Wt:r=Lt(r,e.supervisor),s=o.Rx(s);break;case Bt:s=o.Hs(e.first)(o.Hs(e.second)(o.Rx(s)))}}return r})(t,o.of(e)),combine:zt,diff:(e,t)=>{if(ne.aI(e,t))return qt;const r=Ht(e),s=Ht(t),n=(0,g.Fs)(s,y.iv(r),y.TS(qt,((e,t)=>zt(e,{_tag:jt,supervisor:t})))),i=(0,g.Fs)(r,y.iv(s),y.TS(qt,((e,t)=>zt(e,{_tag:Wt,supervisor:t}))));return zt(n,i)}});var $t=r(27514),Vt=r(53563);const Kt=dt("effect_fiber_started",{incremental:!0}),Ut=dt("effect_fiber_active"),Gt=dt("effect_fiber_successes",{incremental:!0}),Zt=dt("effect_fiber_failures",{incremental:!0}),Qt=mt(gt("effect_fiber_lifetimes",wt({start:.5,factor:2,count:35})),"time_unit","milliseconds"),er="Continue",tr="Yield",rr={_E:e=>e,_A:e=>e},sr=e=>{throw new Error(`BUG: FiberRuntime - ${F.ZK(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},nr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),ir=(0,m.V)("effect/internal/fiberRuntime/yieldedOpChannel",(()=>({currentOp:null}))),or={[kt.Gj]:(e,t,r)=>(0,s.sn)((()=>t.effect_instruction_i1(r))),OnStep:(e,t,r)=>H.xtk(H.xtk(r)),[kt.du]:(e,t,r)=>(0,s.sn)((()=>t.effect_instruction_i2(r))),[kt.Ni]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),Tt.In(e._runtimeFlags)&&e.isInterrupted()?H.cbD(e.getInterruptedCause()):H.xtk(r)),[kt.mM]:(e,t,r)=>((0,s.sn)((()=>t.effect_instruction_i2(r))),(0,s.sn)((()=>t.effect_instruction_i0()))?(e.pushStack(t),(0,s.sn)((()=>t.effect_instruction_i1()))):H.rIH)},ar={[ee.VH]:(e,t,r,s)=>(e.processNewInterruptSignal(s.cause),Tt.In(t)?H.cbD(s.cause):r),[ee.yo]:(e,t,r,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[ee.dT]:(e,t,r,s)=>(s.onFiber(e,p.yk(t)),r),[ee.FR]:(e,t,r,s)=>H.qIB(H.m9E(),(()=>r))};class ur{[Q.QV]=Q.GP;[Q.sA]=rr;pipe(){return(0,I.t)(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,r){if(this._runtimeFlags=r,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(Ms),this._scheduler=this.getFiberRef(W.X_),Tt.qg(r)){const e=this.getFiberRef(H.b1P);Kt.unsafeUpdate(1,e),Ut.unsafeUpdate(1,e)}this._tracer=a.Jt(this.getFiberRef(U.qJ),$t.Ez)}id(){return this._fiberId}resume(e){this.tell(ee.U(e))}get status(){return this.ask(((e,t)=>t))}get runtimeFlags(){return this.ask(((e,t)=>p.$L(t)?e._runtimeFlags:t.runtimeFlags))}scope(){return re.$N(this)}get children(){return this.ask((e=>Array.from(e.getChildren())))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(H.LGt)}fiberRefs(){return this.ask((e=>e.getFiberRefs()))}ask(e){return H.DYE((()=>{const t=H.MIt(this._fiberId);return this.tell(ee.Ry(((r,s)=>{H.q_p(t,H.OH5((()=>e(r,s))))}))),H.gn0(t)}))}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return H.bIC((e=>{const t=t=>e(H.PyW(t));return this.tell(ee.Ry(((e,r)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)}))),H.OH5((()=>this.tell(ee.Ry(((e,r)=>{e.removeObserver(t)})))))}),this.id())}get inheritAll(){return H.$we(((e,t)=>{const r=e.id(),s=e.getFiberRefs(),n=t.runtimeFlags,i=this.getFiberRefs(),o=te.rl(s,r,i);e.setFiberRefs(o);const a=e.getFiberRef(Rs),u=(0,g.Fs)(Tt.Ui(n,a),j.HN(Tt._n),j.HN(Tt.rS));return H.$QS(u)}))}get poll(){return H.OH5((()=>D.k$(this._exitValue)))}unsafePoll(){return this._exitValue}interruptAsFork(e){return H.OH5((()=>this.tell(ee.CW(q.G(e)))))}unsafeInterruptAsFork(e){this.tell(ee.CW(q.G(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter((t=>t!==e))}getFiberRefs(){return this.setFiberRef(Rs,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=te.Rt(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=te.aI(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=a.Jt(this.getFiberRef(U.qJ),$t.Ez),this._supervisor=this.getFiberRef(Ms),this._scheduler=this.getFiberRef(W.X_)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=er;const r=globalThis[Q.qV];globalThis[Q.qV]=this;try{for(;t===er;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Q.qV]=r}this._queue.length>0&&!this._running?(this._running=!0,t===tr?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(H.QPU))}drainQueueWhileRunning(e,t){let r=t;for(;this._queue.length>0;){const t=this._queue.splice(0,1)[0];r=ar[t._tag](this,e,r,t)}return r}isInterrupted(){return!q.Im(this.getFiberRef(H.LGt))}addInterruptedCause(e){const t=this.getFiberRef(H.LGt);this.setFiberRef(H.LGt,q.il(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(const t of this._children)t.tell(ee.CW(q.G(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let t=!1;const r=()=>{const r=e.next();return r.done?H.OH5((()=>{t=!0})):H.NLW(r.value.await)};return H.iMI({while:()=>!t,body:r,step:()=>{}})}return null}reportExitValue(e){if(Tt.qg(this._runtimeFlags)){const t=this.getFiberRef(H.b1P),r=this.id().startTimeMillis,s=Date.now();switch(Qt.unsafeUpdate(s-r,t),Ut.unsafeUpdate(-1,t),e._tag){case kt._l:Gt.unsafeUpdate(1,t);break;case kt.N9:Zt.unsafeUpdate(1,t)}}if("Failure"===e._tag){const t=this.getFiberRef(H.bRS);q.t9(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(Fr)}log(e,t,r){const s=D.Ru(r)?r.value:this.getFiberRef(H.w6U),n=this.getFiberRef(cr);if(_.MM(n,s))return;const i=this.getFiberRef(H.krO),o=this.getFiberRef(H.Umi),u=this.getLoggers(),c=this.getFiberRefs();if(y.Ej(u)>0){const r=a.Jt(this.getFiberRef(U.qJ),z.hV),n=new Date(r.unsafeCurrentTimeMillis());for(const r of u)r.log({fiberId:this.id(),logLevel:s,message:e,cause:t,context:c,spans:i,annotations:o,date:n})}}evaluateMessageWhileSuspended(e){switch(e._tag){case ee.FR:return tr;case ee.VH:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(H.cbD(e.cause)),this._asyncInterruptor=null),er;case ee.yo:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),er;case ee.dT:return e.onFiber(this,null!==this._exitValue?p.Vw:p.IU(this._runtimeFlags,this._asyncBlockingOn)),er;default:return sr(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=Tt.In(this._runtimeFlags)&&this.isInterrupted()?H.cbD(this.getInterruptedCause()):e;for(;null!==t;){const e=t,r=this.runLoop(e);if(r===nr){const e=ir.currentOp;ir.currentOp=null,e._op===kt.u4?Tt.Ps(this._runtimeFlags)?(this.tell(ee.m9()),this.tell(ee.U(H.x5l)),t=null):t=H.x5l:e._op===kt.ZO&&(t=null)}else{this._runtimeFlags=(0,g.Fs)(this._runtimeFlags,Tt.sS(Tt.rS));const e=this.interruptAllChildren();null!==e?t=H.qIB(e,(()=>r)):(0===this._queue.length?this.setExitValue(r):this.tell(ee.U(r)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(ee.U(e));else{this._running=!0;const t=globalThis[Q.qV];globalThis[Q.qV]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Q.qV]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(ee.U(e))}patchRuntimeFlags(e,t){const r=Tt.F6(e,t);return globalThis[Q.qV]=this,this._runtimeFlags=r,r}initiateAsync(e,t){let r=!1;const s=e=>{r||(r=!0,this.tell(ee.U(e)))};Tt.In(e)&&(this._asyncInterruptor=s);try{t(s)}catch(e){s(H.ATB(q.F_(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==kt.JJ)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==kt.Gj&&e._op!==kt.mM)return e;e=this.popStack()}}[kt.tA](e){return H.TjK(H.U8_(H.Fi1),(t=>a.$v(t,e)))}Left(e){return H.fJG(e.left)}None(e){return H.fJG(new H.kJg)}Right(e){return H.xtk(e.right)}Some(e){return H.xtk(e.value)}Micro(e){return H.t04((t=>{const r=(()=>{const e=new AbortController,t=Object.create(null);return t[X.key]=e,t[R.key]=e.signal,N(t)})().pipe(E(M,this.getFiberRef(H.Fi1)));let s=t;return e[S](r,(e=>{if("Right"===e._tag)return s(H.xtk(e.right));switch(e.left._tag){case"Interrupt":return s(H.cbD(q.G(h.dv)));case"Fail":return s(H.fJG(e.left.error));case"Die":return s(H.F_Q(e.left.defect))}})),H.bIC((e=>{s=t=>{e(H.rIH)},T(r,X).abort()}))}))}[kt.EF](e){const t=(0,s.sn)((()=>e.effect_instruction_i0())),r=this.getNextSuccessCont();return void 0!==r?(r._op in or||sr(r),or[r._op](this,r,t)):(ir.currentOp=H.xtk(t),nr)}[kt._l](e){const t=e,r=this.getNextSuccessCont();return void 0!==r?(r._op in or||sr(r),or[r._op](this,r,t.effect_instruction_i0)):(ir.currentOp=t,nr)}[kt.N9](e){const t=e.effect_instruction_i0,r=this.getNextFailCont();if(void 0===r)return ir.currentOp=H.cbD(t),nr;switch(r._op){case kt.JJ:case kt.du:return Tt.In(this._runtimeFlags)&&this.isInterrupted()?H.cbD(q.el(t)):(0,s.sn)((()=>r.effect_instruction_i1(t)));case"OnStep":return Tt.In(this._runtimeFlags)&&this.isInterrupted()?H.cbD(q.el(t)):H.xtk(H.cbD(t));case kt.Ni:return this.patchRuntimeFlags(this._runtimeFlags,r.patch),Tt.In(this._runtimeFlags)&&this.isInterrupted()?H.cbD(q.il(t,this.getInterruptedCause())):H.cbD(t);default:sr(r)}}[kt.mm](e){return(0,s.sn)((()=>e.effect_instruction_i0(this,p.yk(this._runtimeFlags))))}Blocked(e){const t=this.getFiberRefs(),r=this._runtimeFlags;if(this._steps.length>0){const s=[],n=this._steps[this._steps.length-1];let i=this.popStack();for(;i&&"OnStep"!==i._op;)s.push(i),i=this.popStack();this.setFiberRefs(n.refs),this._runtimeFlags=n.flags;const o=d.Ui(n.refs,t),a=Tt.Ui(n.flags,r);return H.xtk(H.Z5i(e.effect_instruction_i0,H.$we((t=>{for(;s.length>0;)t.pushStack(s.pop());return t.setFiberRefs(d.F6(t.id(),t.getFiberRefs())(o)),t._runtimeFlags=Tt.F6(a)(t._runtimeFlags),e.effect_instruction_i1}))))}return H.FcF((t=>H.qIB(Wr(H.UFt(e.effect_instruction_i0)),(()=>t(e.effect_instruction_i1)))))}RunBlocked(e){return(e=>H.QZV(B.Bq(e),(e=>Pr(B.iG(e),(([e,t])=>{const r=new Map,s=[];for(const e of t){s.push(o.h3(e));for(const t of e)r.set(t.request,t)}const n=s.flat();return H.woH(Js(e.runAll(s),n,(()=>n.forEach((e=>{e.listeners.interrupted=!0})))),L.v,r)}),!1,!1))))(e.effect_instruction_i0)}[kt.NM](e){const t=e.effect_instruction_i0,r=this._runtimeFlags,n=Tt.F6(r,t);if(Tt.In(n)&&this.isInterrupted())return H.cbD(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),e.effect_instruction_i1){const t=Tt.Ui(n,r);return this.pushStack(new H.yPL(t,e)),(0,s.sn)((()=>e.effect_instruction_i1(r)))}return H.x5l}[kt.Gj](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[kt.JJ](e){return this.pushStack(e),e.effect_instruction_i0}[kt.du](e){return this.pushStack(e),e.effect_instruction_i0}[kt.ZO](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),ir.currentOp=e,nr}[kt.u4](e){return this.isYielding=!1,ir.currentOp=e,nr}[kt.mM](e){const t=e.effect_instruction_i0,r=e.effect_instruction_i1;return t()?(this.pushStack(e),r()):H.x5l}[kt.kK](e){return(0,s.sn)((()=>e.commit()))}runLoop(e){let t=e;for(this.currentOpCount=0;;){if(this._runtimeFlags&Tt.zb&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;const e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;const r=t;t=H.qIB(H.m9E({priority:e}),(()=>r))}}try{if("_op"in t&&t._op in this||sr(t),t=this._tracer.context((()=>Vt.M()!==t[c.$n]._V?H.GSS(`Cannot execute an Effect versioned ${t[c.$n]._V} with a Runtime of version ${Vt.M()}`):this[t._op](t)),this),t===nr){const e=ir.currentOp;return e._op===kt.u4||e._op===kt.ZO?nr:(ir.currentOp=null,e._op===kt._l||e._op===kt.N9?e:H.cbD(q.F_(e)))}}catch(e){t=H.k6R(e)?H.cbD(e.cause):H.OTT(e)?H.cbD(q.il(q.F_(e),q.G(h.dv))):H.F_Q(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}const cr=(0,m.V)("effect/FiberRef/currentMinimumLogLevel",(()=>H.QID(_.Al("Info")))),lr=e=>se.rY((t=>{const r=f.Fh(t.context,U.qJ);a.Jt(r,G.MG).unsafe.log(e.log(t))})),hr=e=>se.rY((t=>{const r=f.Fh(t.context,U.qJ);a.Jt(r,G.MG).unsafe.error(e.log(t))})),fr=(0,m.V)(Symbol.for("effect/Logger/defaultLogger"),(()=>lr(se.oz))),dr=(0,m.V)(Symbol.for("effect/Logger/jsonLogger"),(()=>lr(se.Rz))),pr=(0,m.V)(Symbol.for("effect/Logger/logFmtLogger"),(()=>lr(se.mE))),gr=(0,m.V)(Symbol.for("effect/Logger/prettyLogger"),(()=>se.xW())),mr=(0,m.V)(Symbol.for("effect/Logger/structuredLogger"),(()=>lr(se.SZ))),br=(0,m.V)(Symbol.for("effect/Logger/tracerLogger"),(()=>se.rY((({annotations:e,cause:t,context:r,fiberId:s,logLevel:n,message:i})=>{const o=D.qI(te.Jt(r,H.Fi1),a.om($t.Te)),u=D.Tj(te.Jt(r,U.qJ),(e=>a.Jt(e,z.hV)));if("None"===o._tag||"ExternalSpan"===o.value._tag||"None"===u._tag)return;const c=Object.fromEntries(b.Tj(e,F.ZK));c["effect.fiberId"]=h.CB(s),c["effect.logLevel"]=n.label,null!==t&&"Empty"!==t._tag&&(c["effect.cause"]=q.j9(t)),o.value.event(String(i),u.value.unsafeCurrentTimeNanos(),c)})))),yr=e=>se.Tc(e,(e=>{const t=D.qI(te.Jt(e.context,H.Fi1),a.om($t.Te));return"None"===t._tag?e:{...e,annotations:(0,g.Fs)(e.annotations,b.hZ("effect.traceId",t.value.traceId),b.hZ("effect.spanId",t.value.spanId),"Span"===t.value._tag?b.hZ("effect.spanName",t.value.name):g.D_)}})),Fr=(0,m.V)(Symbol.for("effect/FiberRef/currentLoggers"),(()=>H._Pd(y.L8(fr,br)))),_r=(0,g.XY)(3,((e,t,r)=>H.qIB(_s,(s=>{let n=[];const i=H.DYE((()=>{if(0===n.length)return H.rIH;const e=n;return n=[],r(e)}));return H.FcF((r=>(0,g.Fs)(K.yy(t),H.aNH(i),K.i4,r,Wr,H.qIB((e=>H.iLB(s,H.OLv(e)))),H.aNH(wr((()=>i))),H.as(se.rY((t=>{n.push(e.log(t))}))))))})))),vr=function(){if("string"==typeof arguments[0])return Ts(H.Umi,b.hZ(arguments[0],arguments[1]));const e=Object.entries(arguments[0]);return Ts(H.Umi,b.Tk((t=>{for(let r=0;r<e.length;r++){const[s,n]=e[r];b.hZ(t,s,n)}return t})))},Ir=(0,g.XY)((e=>H.yw5(e[0])),((e,t)=>H.rfi(H.Mim(e,(e=>wr((r=>t(e,r)))))))),Sr=(0,g.XY)((e=>H.yw5(e[0])),((e,t)=>Hs(e,wr((e=>t(e)))))),wr=e=>H.$we((t=>{const r=t.getFiberRefs(),s=t._runtimeFlags;return H.qIB(_s,(t=>H.Uio(t,(t=>H.$we((n=>{const i=n.getFiberRefs(),o=n._runtimeFlags,a=d.Ui(i,r),u=Tt.Ui(o,s),c=d.Ui(r,i);return n.setFiberRefs(d.F6(a,n.id(),r)),Hs(H.cay(e(t),u),H.OH5((()=>{n.setFiberRefs(d.F6(c,n.id(),n.getFiberRefs()))})))}))))))})),kr=e=>H.woH(H.CdZ,D.zN(re.gm))(e),Yr=Symbol.for("effect/Effect/existsPar/found"),Nr=(0,g.XY)((e=>P.xZ(e[0])&&!H.yw5(e[0])),((e,t,r)=>$(r?.concurrency,(()=>H.DYE((()=>Tr(e[Symbol.iterator](),0,t)))),(()=>H.tvg(Ar(e,((e,r)=>H.tDT(t(e,r),{onTrue:()=>H.fJG(Yr),onFalse:()=>H.rIH})),r),{onFailure:e=>e===Yr?H.PyW(!0):H.fJG(e),onSuccess:()=>H.PyW(!1)}))))),Tr=(e,t,r)=>{const s=e.next();return s.done?H.PyW(!1):(0,g.Fs)(H.qIB(r(s.value,t),(s=>s?H.PyW(s):Tr(e,t+1,r))))},Er=(0,g.XY)((e=>P.xZ(e[0])&&!H.yw5(e[0])),((e,t,r)=>{const s=r?.negate?(e,r)=>H.TjK(t(e,r),i.AU):t;return $(r?.concurrency,(()=>H.DYE((()=>n.Ts(e).reduceRight(((e,t,r)=>H.OYO(e,H.DYE((()=>s(t,r))),((e,r)=>r?[t,...e]:e))),H.OH5((()=>new Array)))))),(()=>H.TjK(Ar(e,((e,t)=>H.TjK(s(e,t),(t=>t?D.zN(e):D.dv()))),r),n.Yz)))})),Or=(e,t)=>{const[r,s]=(e=>{if(Array.isArray(e)||P.xZ(e))return[e,D.dv()];const t=Object.keys(e),r=t.length;return[t.map((t=>e[t])),D.zN((e=>{const s={};for(let n=0;n<r;n++)s[t[n]]=e[n];return s}))]})(e);return"validate"===t?.mode?((e,t,r)=>{const s=[];for(const t of e)s.push(H.gPK(t));return H.qIB(Ar(s,g.D_,{concurrency:r?.concurrency,batching:r?.batching}),(e=>{const s=D.dv(),n=e.length,i=new Array(n),o=new Array(n);let a=!1;for(let t=0;t<n;t++){const r=e[t];"Left"===r._tag?(i[t]=D.zN(r.left),a=!0):(o[t]=r.right,i[t]=s)}return a?"Some"===t._tag?H.fJG(t.value(i)):H.fJG(i):r?.discard?H.rIH:"Some"===t._tag?H.PyW(t.value(o)):H.PyW(o)}))})(r,s,t):"either"===t?.mode?((e,t,r)=>{const s=[];for(const t of e)s.push(H.gPK(t));return r?.discard?Ar(s,g.D_,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):H.TjK(Ar(s,g.D_,{concurrency:r?.concurrency,batching:r?.batching}),(e=>"Some"===t._tag?t.value(e):e))})(r,s,t):!0!==t?.discard&&"Some"===s._tag?H.TjK(Ar(r,g.D_,t),s.value):Ar(r,g.D_,t)},xr=e=>t=>Or(t,e),Xr=(e,t)=>H.TjK(Or(n.Ts(e).map(H.NS5),t),n.x1((e=>H.CoE(e)?D.zN(e.effect_instruction_i0):D.dv()))),Rr=(0,g.XY)(2,((e,t)=>Array.from({length:t},(()=>e)))),Mr=(0,g.XY)((e=>H.yw5(e[0])),((e,t,r)=>Or(Rr(e,t),r))),Ar=(0,g.XY)((e=>P.xZ(e[0])),((e,t,r)=>H.$we((s=>{const n=!0===r?.batching||"inherit"===r?.batching&&s.getFiberRef(H.pX6);return r?.discard?J(r.concurrency,(()=>es(l.il)((r=>n?Pr(e,((e,s)=>r(t(e,s))),!0,!1,1):H.QZV(e,((e,s)=>r(t(e,s))))))),(()=>es(l._7)((r=>Pr(e,((e,s)=>r(t(e,s))),n,!1)))),(r=>es(l._K(r))((s=>Pr(e,((e,r)=>s(t(e,r))),n,!1,r))))):J(r?.concurrency,(()=>es(l.il)((r=>n?Cr(e,1,((e,s)=>r(t(e,s))),!0):H.CFK(e,((e,s)=>r(t(e,s))))))),(()=>es(l._7)((r=>Dr(e,((e,s)=>r(t(e,s))),n)))),(r=>es(l._K(r))((s=>Cr(e,r,((e,r)=>s(t(e,r))),n)))))})))),Dr=(e,t,r)=>H.DYE((()=>{const s=n.Ts(e),i=new Array(s.length);return H.aNH(Pr(s,((e,r)=>H.qIB(t(e,r),(e=>H.OH5((()=>i[r]=e))))),r,!1),H.PyW(i))})),Pr=(e,t,r,s,n)=>H.FcF((i=>H.sK9((o=>H.$we((a=>{let u=Array.from(e).reverse(),c=u.length;if(0===c)return H.rIH;let l=0,h=!1;const f=n?Math.min(u.length,n):u.length,d=new Set,p=new Array,g=new Array,m=new Array,b=new Array,y=()=>{const e=p.filter((({exit:e})=>"Failure"===e._tag)).sort(((e,t)=>e.index<t.index?-1:e.index===t.index?0:1)).map((({exit:e})=>e));return 0===e.length&&e.push(H.x5l),e},F=(e,t=!1)=>{const r=H.rfi(o(e)),s=zr(r,a,a._runtimeFlags,re.gm);return a._scheduler.scheduleTask((()=>{t&&s.unsafeInterruptAsFork(a.id()),s.resume(r)}),0),s},_=()=>{s||(c-=u.length,u=[]),h=!0,d.forEach((e=>{e._scheduler.scheduleTask((()=>{e.unsafeInterruptAsFork(a.id())}),0)}))},v=r?H.PMw:H.NS5,I=F(H.bIC((e=>{const s=(e,t)=>{"Blocked"===e._op?b.push(e):(p.push({index:t,exit:e}),"Failure"!==e._op||h||_())},o=()=>{if(u.length>0){const f=u.pop();let _=l++;const I=()=>{const e=u.pop();return _=l++,H.qIB(H.m9E(),(()=>H.qIB(v(i(t(e,_))),S)))},S=e=>u.length>0&&(s(e,_),u.length>0)?I():H.PyW(e),w=H.qIB(v(i(t(f,_))),S),k=F(w);g.push(k),d.add(k),h&&k._scheduler.scheduleTask((()=>{k.unsafeInterruptAsFork(a.id())}),0),k.addObserver((t=>{let i;if(i="Failure"===t._op?t:t.effect_instruction_i0,m.push(k),d.delete(k),s(i,_),p.length===c)e(H.PyW(D.WL(H.Q9S(y(),{parallel:!0}),(()=>H.x5l))));else if(b.length+p.length===c){const t=b.map((e=>e.effect_instruction_i0)).reduce(B.eM);e(H.PyW(H.Z5i(t,Pr([D.WL(H.Q9S(y(),{parallel:!0}),(()=>H.x5l)),...b.map((e=>e.effect_instruction_i1))],(e=>e),r,!0,n))))}else o()}))}};for(let e=0;e<f;e++)o()})));return H.NLW(H.cfM(H.Bqz(i(Q.fj(I))),H.Wtn({onFailure:()=>{_();const e=b.length+1,t=Math.min("number"==typeof n?n:b.length,b.length),r=Array.from(b);return H.bIC((s=>{const n=[];let i=0,o=0;const a=(t,o)=>a=>{n[t]=a,i++,i===e&&s(D.n4(H.Q9S(n,{parallel:!0}))),r.length>0&&o&&u()},u=()=>{F(r.pop(),!0).addObserver(a(o,!0)),o++};I.addObserver(a(o,!1)),o++;for(let e=0;e<t;e++)u()}))},onSuccess:()=>H.CFK(m,(e=>e.inheritAll))})))})))))),Cr=(e,t,r,s)=>H.DYE((()=>{const i=n.Ts(e),o=new Array(i.length);return H.aNH(Pr(i,((e,t)=>H.TjK(r(e,t),(e=>o[t]=e))),s,!1,t),H.PyW(o))})),jr=e=>H.$we(((t,r)=>H.PyW(qr(e,t,r.runtimeFlags)))),Wr=e=>Hr(e,re.gm),Br=(0,g.XY)(2,((e,t)=>jr(H.S5A(e,(e=>{const r=q.vE(e);switch(r._tag){case"Left":return t(r.left);case"Right":return H.ATB(r.right)}}))))),qr=(e,t,r,s=null)=>{const n=Lr(e,t,r,s);return n.resume(e),n},zr=(e,t,r,s=null)=>Lr(e,t,r,s),Lr=(e,t,r,s=null)=>{const n=h.$N(),i=t.getFiberRefs(),o=te.BG(i,n),a=new ur(n,o,r),u=te.Fh(o,H.Fi1),c=a._supervisor;return c.onStart(u,e,D.zN(t),a),a.addObserver((e=>c.onEnd(e,a))),(null!==s?s:(0,g.Fs)(t.getFiberRef(H.CdZ),D.WL((()=>t.scope())))).add(r,a),a},Hr=(e,t)=>H.$we(((r,s)=>H.PyW(qr(e,r,s.runtimeFlags,t)))),Jr=(0,g.XY)((e=>P.Tn(e[2])),((e,t,r,s)=>$(s?.concurrency,(()=>n.Ts(e).reduce(((e,t,s)=>H.OYO(e,t,((e,t)=>r(e,t,s)))),H.PyW(t))),(()=>H.qIB(C.L8(t),(t=>H.qIB(Ar(e,((e,s)=>H.qIB(e,(e=>C.yo(t,(t=>r(t,e,s)))))),s),(()=>C.Jt(t))))))))),$r=(0,g.XY)((e=>P.xZ(e[0])),((e,t,r)=>(0,g.Fs)(Ar(e,((e,r)=>H.gPK(t(e,r))),r),H.TjK((e=>H.rTm(e,g.D_)))))),Vr=(0,g.XY)((e=>P.xZ(e[0])),((e,t,r)=>H.qIB($r(e,t,{concurrency:r?.concurrency,batching:r?.batching}),(([e,t])=>0===e.length?r?.discard?H.rIH:H.PyW(t):H.fJG(e))))),Kr=e=>{const t=o.Ts(e);if(!o.J_(t))return H.Kbz((()=>new H.nAV("Received an empty collection of effects")));const r=o.v4(t),s=o.Rx(t),i=e=>(0,g.Fs)(Q.zq(e[1]),H.as(e[0]));return(0,g.Fs)(H.WW4(),H.qIB((e=>(0,g.Fs)(C.L8(s.length),H.qIB((t=>H.FcF((a=>(0,g.Fs)(jr(H.Inz(r)),H.qIB((r=>(0,g.Fs)(s,H.CFK((e=>jr(H.Inz(e)))),H.TjK((e=>o.Iv(e))),H.TjK((e=>(0,g.Fs)(e,o.Hs(r)))),H.Mim((r=>(0,g.Fs)(r,n.TS(H.rIH,((s,n)=>(0,g.Fs)(s,H.aNH((0,g.Fs)(Q.gt(n),H.qIB(Ur(r,n,e,t)),jr,H.NLW)))))))),H.qIB((t=>(0,g.Fs)(a((0,g.Fs)(u.Tx(e),H.qIB(i))),H.nAr((()=>(0,g.Fs)(t,n.TS(H.rIH,((e,t)=>(0,g.Fs)(e,H.piH(H.OLv(t)))))))))))))))))))))))},Ur=(e,t,r,s)=>i=>H.dDX(i,{onFailure:e=>(0,g.Fs)(C.JP(s,(t=>[0===t?(0,g.Fs)(H.FIO(r,e),H.NLW):H.rIH,t-1])),H.Bqz),onSuccess:s=>(0,g.Fs)(H.syF(r,[s,t]),H.qIB((r=>r?(0,g.Fs)(o.Ts(e),n.TS(H.rIH,((e,r)=>r===t?e:(0,g.Fs)(e,H.piH(H.OLv(r)))))):H.rIH)))}),Gr=(0,g.XY)((e=>P.xZ(e[0])&&!H.yw5(e[0])),((e,t,r,s)=>$(s?.concurrency,(()=>n.Ts(e).reduce(((e,t,s)=>H.OYO(e,t,((e,t)=>r(e,t,s)))),t)),(()=>H.DYE((()=>(0,g.Fs)(Jr([t,...e],D.dv(),((e,t,s)=>{switch(e._tag){case"None":return D.zN(t);case"Some":return D.zN(r(e.value,t,s))}}),s),H.TjK((e=>{switch(e._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return e.value}}))))))))),Zr=e=>H.d_m((t=>D.YW(a.om(t,Fs),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return H.qIB(H.Z$R(t,l._7),(t=>ws(e,t)))}}}))),Qr=e=>t=>H.d_m((r=>D.YW(a.om(r,Fs),{onNone:()=>t,onSome:r=>"ParallelN"===r.strategy._tag&&r.strategy.parallelism===e?t:H.qIB(H.Z$R(r,l._K(e)),(e=>ws(t,e)))}))),es=e=>t=>H.d_m((r=>D.YW(a.om(r,Fs),{onNone:()=>t(g.D_),onSome:r=>{const s="Parallel"===e._tag?Zr:"Sequential"===e._tag?ss:Qr(e.parallelism);switch(r.strategy._tag){case"Parallel":return s(t(Zr));case"Sequential":return s(t(ss));case"ParallelN":return s(t(Qr(r.strategy.parallelism)))}}}))),ts=e=>H.qIB(Fs,e),rs=e=>H.qIB(Ss(),(t=>ks(e,t))),ss=e=>H.d_m((t=>D.YW(a.om(t,Fs),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return H.qIB(H.Z$R(t,l.il),(t=>ws(e,t)))}}}))),ns=(e,t)=>is([ke.L8(e,t)]),is=e=>Ts(H.b1P,(t=>n.KC(t,e))),os=(0,g.XY)(2,((e,t)=>H.jGc(Ss(),(r=>H.qIB(ws(e,r),t)),((e,t)=>H.vDJ(e,t))))),as=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r)=>us(e,t,((e,t)=>[e,t]),r))),us=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r,s)=>H.Bqz(bs(H.NS5(e),H.NS5(t),((e,t)=>H.wnO(e,t,{onSuccess:r,onFailure:(e,t)=>s?.concurrent?q._7(e,t):q.il(e,t)})),s)))),cs=(0,g.XY)((e=>P.xZ(e[0])),((e,t,r)=>H.UUz(Ar(e,((e,r)=>H.UUz(t(e,r))),r)))),ls=e=>Ts(U.qJ,a.WQ(z.hV,e)),hs=e=>Ts(U.qJ,a.WQ(Yt.k_,e)),fs=e=>Ts(U.qJ,a.WQ(V.Am,e)),ds=e=>ts((t=>H.qIB(H.Z$R(t,Z.il),(t=>(0,g.Fs)(e,ws(t),H.TjK((e=>[H.g1G((e=>H.vDJ(t,H._sz(e)))),e]))))))),ps=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r)=>bs(e,t,((e,t)=>[e,t]),r))),gs=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r)=>!0===r?.concurrent||void 0!==r?.batching&&!1!==r.batching?bs(e,t,((e,t)=>e),r):H.piH(e,t))),ms=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r)=>!0===r?.concurrent||void 0!==r?.batching&&!1!==r.batching?bs(e,t,((e,t)=>t),r):H.aNH(e,t))),bs=(0,g.XY)((e=>H.yw5(e[1])),((e,t,r,s)=>H.TjK(Or([e,t],{concurrency:s?.concurrent?2:1,batching:s?.batching}),(([e,t])=>r(e,t))))),ys=e=>e===j.Ie?H.rIH:(0,g.Fs)(H.m$m,H.qIB((t=>{const r=Tt.F6(t,e),s=Tt.Ui(r,t);return(0,g.Fs)(H.$QS(e),H.aNH(wr((()=>H.$QS(s)))),H.NLW)})),H.rfi),Fs=a.Io("effect/Scope"),_s=Fs,vs={[H.kWD]:H.kWD,[H.APi]:H.APi,pipe(){return(0,I.t)(this,arguments)},fork(e){return H.OH5((()=>{const t=Is(e);if("Closed"===this.state._tag)return t.state=this.state,t;const r=e=>t.close(e);return this.state.finalizers.add(r),((e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)})(t,(e=>H.OH5((()=>{"Open"===this.state._tag&&this.state.finalizers.delete(r)})))),t}))},close(e){return H.DYE((()=>{if("Closed"===this.state._tag)return H.rIH;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},0===t.length?H.rIH:Z.Gp(this.strategy)?(0,g.Fs)(H.CFK(t,(t=>H.NS5(t(e)))),H.qIB((e=>(0,g.Fs)(H.Q9S(e),D.Tj(H.Hox),D.WL((()=>H.x5l)))))):Z.K7(this.strategy)?(0,g.Fs)(Dr(t,(t=>H.NS5(t(e))),!1),H.qIB((e=>(0,g.Fs)(H.Q9S(e,{parallel:!0}),D.Tj(H.Hox),D.WL((()=>H.x5l)))))):(0,g.Fs)(Cr(t,this.strategy.parallelism,(t=>H.NS5(t(e))),!1),H.qIB((e=>(0,g.Fs)(H.Q9S(e,{parallel:!0}),D.Tj(H.Hox),D.WL((()=>H.x5l))))))}))},addFinalizer(e){return H.DYE((()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),H.rIH)))}},Is=(e=Z.il)=>{const t=Object.create(vs);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},Ss=(e=Z.il)=>H.OH5((()=>Is(e))),ws=(0,g.XY)(2,((e,t)=>H.kyh(e,a.h1(a.L8(Fs,t))))),ks=(0,g.XY)(2,((e,t)=>(0,g.Fs)(e,ws(t),H.cfM((e=>t.close(e)))))),Ys=e=>H.sH6(e,{differ:Jt,fork:qt}),Ns=(0,g.XY)(2,((e,t)=>H.NLW(Ir(H.qIB(H.U8_(e),(r=>H.as(H.Ecz(e,t),r))),(t=>H.Ecz(e,t)))))),Ts=(0,g.XY)(2,((e,t)=>H.uPR(e,(r=>Ns(e,t(r)))))),Es=(e,t)=>Os((()=>H.QID(e,t))),Os=e=>Ir(H.Mim(H.OH5(e),(e=>H.tNQ(e,g.D_))),(e=>H.PNH(e))),xs=e=>Os((()=>H.bzD(e))),Xs=e=>Os((()=>H.nlF(e))),Rs=H.nlF(Tt.dv),Ms=Ys(Et.dv),As=e=>H.NLW(Q.gt(Ds(e))),Ds=e=>({[Q.QV]:Q.GP,id:()=>n.Ts(e).reduce(((e,t)=>h.kg(e,t.id())),h.dv),await:H.NS5(Dr(e,(e=>H.Bqz(e.await)),!1)),children:H.TjK(Dr(e,(e=>e.children),!1),n.Bq),inheritAll:H.QZV(e,(e=>e.inheritAll)),poll:H.TjK(H.CFK(e,(e=>e.poll)),n.XK(D.zN(H.xtk(new Array)),((e,t)=>{switch(t._tag){case"None":return D.dv();case"Some":switch(e._tag){case"None":return D.dv();case"Some":return D.zN(H.wnO(t.value,e.value,{onSuccess:(e,t)=>[e,...t],onFailure:q._7}))}}}))),interruptAsFork:t=>H.QZV(e,(e=>e.interruptAsFork(t))),pipe(){return(0,I.t)(this,arguments)}}),Ps=e=>H.NLW(Wr(H.OLv(e))),Cs=e=>Q.fj(Ds(e)),js=e=>Ir(H.PyW(e),H.OLv),Ws=(0,g.XY)(3,((e,t,r)=>zs(e,t,{onSelfWin:(e,t)=>H.qIB(e.await,(s=>{switch(s._tag){case kt._l:return H.qIB(e.inheritAll,(()=>r.onSelfDone(s,t)));case kt.N9:return r.onSelfDone(s,t)}})),onOtherWin:(e,t)=>H.qIB(e.await,(s=>{switch(s._tag){case kt._l:return H.qIB(e.inheritAll,(()=>r.onOtherDone(s,t)));case kt.N9:return r.onOtherDone(s,t)}}))}))),Bs=e=>H.FcF((t=>H.g1G((r=>H.qIB(Wr(t(e)),(e=>(0,g.Fs)(t(Q.fj(e)),H.nAr((()=>(0,g.Fs)(e,Q.UX(r))))))))))),qs=(0,g.XY)(2,((e,t)=>H.g1G((r=>Ws(e,t,{onSelfDone:(e,t)=>H.dDX(e,{onFailure:e=>(0,g.Fs)(Q.fj(t),K.aW((t=>q._7(e,t)))),onSuccess:e=>(0,g.Fs)(t,H._tB(r),H.as(e))}),onOtherDone:(e,t)=>H.dDX(e,{onFailure:e=>(0,g.Fs)(Q.fj(t),K.aW((t=>q._7(t,e)))),onSuccess:e=>(0,g.Fs)(t,H._tB(r),H.as(e))})}))))),zs=(0,g.XY)(3,((e,t,r)=>H.$we(((s,n)=>{const i=n.runtimeFlags,o=A.L8(!0),a=Lr(e,s,i,r.selfScope),u=Lr(t,s,i,r.otherScope);return H.bIC((s=>{a.addObserver((()=>Ls(a,u,r.onSelfWin,o,s))),u.addObserver((()=>Ls(u,a,r.onOtherWin,o,s))),a.startFork(e),u.startFork(t)}),h.kg(a.id(),u.id()))})))),Ls=(e,t,r,s,n)=>{A.Tc(!0,!1)(s)&&n(r(e,t))},Hs=(0,g.XY)(2,((e,t)=>H.FcF((r=>H.khu(r(e),{onFailure:e=>H.khu(t,{onFailure:t=>H.ATB(q.il(e,t)),onSuccess:()=>H.ATB(e)}),onSuccess:e=>H.as(t,e)}))))),Js=(e,t,r)=>H.g1G((s=>H.qIB(H.qIB(Wr(H.Inz(e)),(e=>H.bIC((s=>{const n=t.map((e=>e.listeners.count)),i=()=>{n.every((e=>0===e))&&t.every((e=>"Pending"===e.result.state.current._tag||!("Done"!==e.result.state.current._tag||!H.h0c(e.result.state.current.effect)||"Failure"!==e.result.state.current.effect._tag||!q.fT(e.result.state.current.effect.cause))))&&(o.forEach((e=>e())),r?.(),s(H.OLv(e)))};e.addObserver((e=>{o.forEach((e=>e())),s(e)}));const o=t.map(((e,t)=>{const r=e=>{n[t]=e,i()};return e.listeners.addObserver(r),()=>e.listeners.removeObserver(r)}));return i(),H.OH5((()=>{o.forEach((e=>e()))}))})))),(()=>H.DYE((()=>{const e=t.flatMap((e=>e.state.completed?[]:[e]));return H.QZV(e,(e=>(0,Nt.My)(e.request,H._sz(s))))})))))),$s=(0,g.XY)(2,((e,t)=>H.uPR(L.v,(r=>H.DYE((()=>{const s=n.Ts(t).flatMap((e=>r.has(e)?[r.get(e)]:[]));return Js(e,s)})))))),Vs=(e,t)=>(t=$t.ZA(t),H.rfi(H.$we((r=>{const s=a.$v(r.getFiberRef(H.Fi1),Fs),n=K.xI(r,e,t),i=r.getFiberRef(H.QYw),o=a.Jt(r.getFiberRef(U.qJ),z.hV);return H.as(H.Uio(s,(e=>K.ex(n,e,o,i))),n)})))),Ks=e=>Ts(U.qJ,a.WQ($t.Ez,e)),Us=function(){const e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],r=$t.ZA(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return H.qIB(Vs(t,$t.ZA(r)),(t=>K.Pf(e,$t.Te,t)))}return e=>H.qIB(Vs(t,$t.ZA(r)),(t=>K.Pf(e,$t.Te,t)))}},8977:(e,t,r)=>{r.d(t,{$N:()=>c,gm:()=>l});var s=r(95602),n=r(6517),i=r(44402);const o=Symbol.for("effect/FiberScope");class a{[o]=o;fiberId=s.dv;roots=new Set;add(e,t){this.roots.add(t),t.addObserver((()=>{this.roots.delete(t)}))}}class u{fiberId;parent;[o]=o;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(i.Ry((e=>{e.addChild(t),t.addObserver((()=>{e.removeChild(t)}))})))}}const c=e=>new u(e.id(),e),l=(0,n.V)(Symbol.for("effect/FiberScope/Global"),(()=>new a))},28565:(e,t,r)=>{r.d(t,{eY:()=>E,jT:()=>Q,oE:()=>de,Ie:()=>P,bV:()=>ee,jO:()=>G,pb:()=>fe,x1:()=>pe,i8:()=>ge,qI:()=>ce,jJ:()=>le,Ts:()=>j,Jt:()=>q,Zd:()=>z,zy:()=>H,Fp:()=>J,Im:()=>B,Fu:()=>W,HP:()=>K,L8:()=>C,Tj:()=>ue,JP:()=>ne,qt:()=>re,Nt:()=>se,Tk:()=>te,TS:()=>he,TF:()=>oe,kg:()=>ae,hZ:()=>$,Ej:()=>Z,KC:()=>ie,$v:()=>L,zu:()=>U});var s=r(43977),n=r(61369),i=r(67337),o=r(83845),a=r(77948),u=r(53533),c=r(56572);const l=Math.pow(2,5),h=l-1,f=l/2,d=l/4;function p(e,t){return t>>>e&h}function g(e){return 1<<e}function m(e,t){return r=e&t-1,r=(r=(858993459&(r-=r>>1&1431655765))+(r>>2&858993459))+(r>>4)&252645135,127&(r+=r>>8)+(r>>16);var r}function b(e,t,r,s){let n=s;if(!e){const e=s.length;n=new Array(e);for(let t=0;t<e;++t)n[t]=s[t]}return n[t]=r,n}function y(e,t,r){const s=r.length-1;let n=0,i=0,o=r;if(e)n=i=t;else for(o=new Array(s);n<t;)o[i++]=r[n++];for(++n;n<=s;)o[i++]=r[n++];return e&&(o.length=s),o}class F{_tag="EmptyNode";modify(e,t,r,s,n,i){const o=r(a.dv());return a.$I(o)?new F:(++i.value,new I(e,s,n,o))}}function _(e){return(0,c.$J)(e,"EmptyNode")}function v(e,t){return!_(e)&&t===e.edit}class I{edit;hash;key;value;_tag="LeafNode";constructor(e,t,r,s){this.edit=e,this.hash=t,this.key=r,this.value=s}modify(e,t,r,n,i,o){if((0,s.aI)(i,this.key)){const t=r(this.value);return t===this.value?this:a.$I(t)?(--o.value,new F):v(this,e)?(this.value=t,this):new I(e,n,i,t)}const u=r(a.dv());return a.$I(u)?this:(++o.value,N(e,t,this.hash,this,n,new I(e,n,i,u)))}}class S{edit;hash;children;_tag="CollisionNode";constructor(e,t,r){this.edit=e,this.hash=t,this.children=r}modify(e,t,r,s,n,i){if(s===this.hash){const t=v(this,e),s=this.updateCollisionList(t,e,this.hash,this.children,r,n,i);return s===this.children?this:s.length>1?new S(e,this.hash,s):s[0]}const o=r(a.dv());return a.$I(o)?this:(++i.value,N(e,t,this.hash,this,s,new I(e,s,n,o)))}updateCollisionList(e,t,r,n,i,o,u){const c=n.length;for(let l=0;l<c;++l){const c=n[l];if("key"in c&&(0,s.aI)(o,c.key)){const s=c.value,h=i(s);return h===s?n:a.$I(h)?(--u.value,y(e,l,n)):b(e,l,new I(t,r,o,h),n)}}const l=i(a.dv());return a.$I(l)?n:(++u.value,b(e,c,new I(t,r,o,l),n))}}class w{edit;mask;children;_tag="IndexedNode";constructor(e,t,r){this.edit=e,this.mask=t,this.children=r}modify(e,t,r,s,n,i){const o=this.mask,a=this.children,u=p(t,s),c=g(u),l=m(o,c),h=o&c,d=v(this,e);if(!h){const h=(new F).modify(e,t+5,r,s,n,i);return h?a.length>=f?function(e,t,r,s,n){const i=[];let o=s,a=0;for(let e=0;o;++e)1&o&&(i[e]=n[a++]),o>>>=1;return i[t]=r,new k(e,a+1,i)}(e,u,h,o,a):new w(e,o|c,function(e,t,r,s){const n=s.length;if(e){let e=n;for(;e>=t;)s[e--]=s[e];return s[t]=r,s}let i=0,o=0;const a=new Array(n+1);for(;i<t;)a[o++]=s[i++];for(a[t]=r;i<n;)a[++o]=s[i++];return a}(d,l,h,a)):this}const I=a[l],S=I.modify(e,t+5,r,s,n,i);if(I===S)return this;let Y,N=o;if(_(S)){if(N&=~c,!N)return new F;if(a.length<=2&&(_(T=a[1^l])||"LeafNode"===T._tag||"CollisionNode"===T._tag))return a[1^l];Y=y(d,l,a)}else Y=b(d,l,S,a);var T;return d?(this.mask=N,this.children=Y,this):new w(e,N,Y)}}class k{edit;size;children;_tag="ArrayNode";constructor(e,t,r){this.edit=e,this.size=t,this.children=r}modify(e,t,r,s,n,i){let o=this.size;const a=this.children,u=p(t,s),c=a[u],l=(c||new F).modify(e,t+5,r,s,n,i);if(c===l)return this;const h=v(this,e);let f;if(_(c)&&!_(l))++o,f=b(h,u,l,a);else if(!_(c)&&_(l)){if(--o,o<=d)return function(e,t,r,s){const n=new Array(t-1);let i=0,o=0;for(let e=0,t=s.length;e<t;++e)if(e!==r){const t=s[e];t&&!_(t)&&(n[i++]=t,o|=1<<e)}return new w(e,o,n)}(e,o,u,a);f=b(h,u,new F,a)}else f=b(h,u,l,a);return h?(this.size=o,this.children=f,this):new k(e,o,f)}}function Y(e,t,r,s,n,i){if(r===n)return new S(e,r,[i,s]);const o=p(t,r),a=p(t,n);if(o===a)return t=>new w(e,g(o)|g(a),[t]);{const t=o<a?[s,i]:[i,s];return new w(e,g(o)|g(a),t)}}function N(e,t,r,s,n,i){let o,a=t;for(;;){const t=Y(e,a,r,s,n,i);if("function"!=typeof t){let e=t;for(;null!=o;)e=o.value(e),o=o.previous;return e}o={value:t,previous:o},a+=5}}const T="effect/HashMap",E=Symbol.for(T),O={[E]:E,[Symbol.iterator](){return new X(this,((e,t)=>[e,t]))},[i.HR](){let e=i.tW(T);for(const t of this)e^=(0,n.Fs)(i.tW(t[0]),i.kg(i.tW(t[1])));return i.PO(this,e)},[s.HR](e){if(W(e)){if(e._size!==this._size)return!1;for(const t of this){const r=(0,n.Fs)(e,z(t[0],i.tW(t[0])));if(a.$I(r))return!1;if(!s.aI(t[1],r.value))return!1}return!0}return!1},toString(){return(0,o.GP)(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(o.U2)}},[o.FX](){return this.toJSON()},pipe(){return(0,u.t)(this,arguments)}},x=(e,t,r,s)=>{const n=Object.create(O);return n._editable=e,n._edit=t,n._root=r,n._size=s,n};class X{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=M(this.map._root,this.f,void 0)}next(){if(a.$I(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=R(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new X(this.map,this.f)}}const R=e=>e?A(e[0],e[1],e[2],e[3],e[4]):a.dv(),M=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return a.Ru(e.value)?a.zN({value:t(e.key,e.value.value),cont:r}):R(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=e.children;return A(s.length,s,0,t,r)}default:return R(r)}},A=(e,t,r,s,n)=>{for(;r<e;){const i=t[r++];if(i&&!_(i))return M(i,s,[e,t,r,s,n])}return R(n)},D=x(!1,0,new F,0),P=()=>D,C=(...e)=>j(e),j=e=>{const t=Q(P());for(const r of e)$(t,r[0],r[1]);return ee(t)},W=e=>(0,c.i5)(e,E),B=e=>e&&_(e._root),q=n.XY(2,((e,t)=>z(e,t,i.tW(t)))),z=n.XY(3,((e,t,r)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return s.aI(t,n.key)?n.value:a.dv();case"CollisionNode":if(r===n.hash){const e=n.children;for(let r=0,n=e.length;r<n;++r){const n=e[r];if("key"in n&&s.aI(t,n.key))return n.value}}return a.dv();case"IndexedNode":{const e=g(p(i,r));if(n.mask&e){n=n.children[m(n.mask,e)],i+=5;break}return a.dv()}case"ArrayNode":if(n=n.children[p(i,r)],n){i+=5;break}return a.dv();default:return a.dv()}})),L=n.XY(2,((e,t)=>{const r=z(e,t,i.tW(t));if(a.$I(r))throw new Error("Expected map to contain key");return r.value})),H=n.XY(2,((e,t)=>a.Ru(z(e,t,i.tW(t))))),J=n.XY(3,((e,t,r)=>a.Ru(z(e,t,r)))),$=n.XY(3,((e,t,r)=>re(e,t,(()=>a.zN(r))))),V=n.XY(3,((e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:x(e._editable,e._edit,t,r))),K=e=>new X(e,(e=>e)),U=e=>new X(e,((e,t)=>t)),G=e=>new X(e,((e,t)=>[e,t])),Z=e=>e._size,Q=e=>x(!0,e._edit+1,e._root,e._size),ee=e=>(e._editable=!1,e),te=n.XY(2,((e,t)=>{const r=Q(e);return t(r),ee(r)})),re=n.XY(3,((e,t,r)=>se(e,t,i.tW(t),r))),se=n.XY(4,((e,t,r,s)=>{const i={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,s,r,t,i);return(0,n.Fs)(e,V(o,i.value))})),ne=n.XY(3,((e,t,r)=>re(e,t,a.Tj(r)))),ie=n.XY(2,((e,t)=>{const r=Q(e);return le(t,((e,t)=>$(r,t,e))),ee(r)})),oe=n.XY(2,((e,t)=>re(e,t,a.dv))),ae=n.XY(2,((e,t)=>te(e,(e=>{for(const r of t)oe(r)(e)})))),ue=n.XY(2,((e,t)=>he(e,P(),((e,r,s)=>$(e,s,t(r,s)))))),ce=n.XY(2,((e,t)=>he(e,P(),((e,r,s)=>te(e,(e=>le(t(r,s),((t,r)=>$(e,r,t))))))))),le=n.XY(2,((e,t)=>he(e,void 0,((e,r,s)=>t(r,s))))),he=n.XY(3,((e,t,r)=>{const s=e._root;if("LeafNode"===s._tag)return a.Ru(s.value)?r(t,s.value.value,s.key):t;if("EmptyNode"===s._tag)return t;const n=[s.children];let i;for(;i=n.pop();)for(let e=0,s=i.length;e<s;){const s=i[e++];s&&!_(s)&&("LeafNode"===s._tag?a.Ru(s.value)&&(t=r(t,s.value.value,s.key)):n.push(s.children))}return t})),fe=n.XY(2,((e,t)=>te(P(),(r=>{for(const[s,n]of e)t(n,s)&&$(r,s,n)})))),de=e=>pe(e,n.D_),pe=n.XY(2,((e,t)=>te(P(),(r=>{for(const[s,n]of e){const e=t(n,s);a.Ru(e)&&$(r,s,e.value)}})))),ge=n.XY(2,((e,t)=>{for(const r of e)if(t(r[1],r[0]))return a.zN(r);return a.dv()}))},22167:(e,t,r)=>{r.d(t,{E$:()=>x,Ej:()=>w,HS:()=>I,Ie:()=>m,KC:()=>X,L$:()=>R,L8:()=>y,Si:()=>v,TF:()=>E,TS:()=>P,Tj:()=>M,Tk:()=>N,Ts:()=>b,WQ:()=>T,bV:()=>Y,fi:()=>p,iv:()=>O,jB:()=>j,jJ:()=>D,jT:()=>k,oC:()=>h,pb:()=>C,qI:()=>A,zN:()=>_,zu:()=>S,zx:()=>d,zy:()=>F});var s=r(43977),n=r(61369),i=r(67337),o=r(83845),a=r(53533),u=r(56572),c=r(28565);const l="effect/HashSet",h=Symbol.for(l),f={[h]:h,[Symbol.iterator](){return c.HP(this._keyMap)},[i.HR](){return i.PO(this,i.kg(i.tW(this._keyMap))(i.tW(l)))},[s.HR](e){return!!p(e)&&c.Ej(this._keyMap)===c.Ej(e._keyMap)&&s.aI(this._keyMap,e._keyMap)},toString(){return(0,o.GP)(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(o.U2)}},[o.FX](){return this.toJSON()},pipe(){return(0,a.t)(this,arguments)}},d=e=>{const t=Object.create(f);return t._keyMap=e,t},p=e=>(0,u.i5)(e,h),g=d(c.Ie()),m=()=>g,b=e=>{const t=k(m());for(const r of e)T(t,r);return Y(t)},y=(...e)=>{const t=k(m());for(const r of e)T(t,r);return Y(t)},F=(0,n.XY)(2,((e,t)=>c.zy(e._keyMap,t))),_=(0,n.XY)(2,((e,t)=>{let r=!1;for(const s of e)if(r=t(s),r)break;return r})),v=(0,n.XY)(2,((e,t)=>!_(e,(e=>!t(e))))),I=(0,n.XY)(2,((e,t)=>v(e,(e=>F(t,e))))),S=e=>c.HP(e._keyMap),w=e=>c.Ej(e._keyMap),k=e=>d(c.jT(e._keyMap)),Y=e=>(e._keyMap._editable=!1,e),N=(0,n.XY)(2,((e,t)=>{const r=k(e);return t(r),Y(r)})),T=(0,n.XY)(2,((e,t)=>e._keyMap._editable?(c.hZ(t,!0)(e._keyMap),e):d(c.hZ(t,!0)(e._keyMap)))),E=(0,n.XY)(2,((e,t)=>e._keyMap._editable?(c.TF(t)(e._keyMap),e):d(c.TF(t)(e._keyMap)))),O=(0,n.XY)(2,((e,t)=>N(e,(e=>{for(const r of t)E(e,r)})))),x=(0,n.XY)(2,((e,t)=>N(m(),(r=>{for(const s of t)F(s)(e)&&T(s)(r)})))),X=(0,n.XY)(2,((e,t)=>N(m(),(r=>{D(e,(e=>T(r,e)));for(const e of t)T(r,e)})))),R=(0,n.XY)(2,((e,t)=>F(e,t)?E(e,t):T(e,t))),M=(0,n.XY)(2,((e,t)=>N(m(),(r=>{D(e,(e=>{const s=t(e);F(r,s)||T(r,s)}))})))),A=(0,n.XY)(2,((e,t)=>N(m(),(r=>{D(e,(e=>{for(const s of t(e))F(r,s)||T(r,s)}))})))),D=(0,n.XY)(2,((e,t)=>c.jJ(e._keyMap,((e,r)=>t(r))))),P=(0,n.XY)(3,((e,t,r)=>c.TS(e._keyMap,t,((e,t,s)=>r(e,s))))),C=(0,n.XY)(2,((e,t)=>N(m(),(r=>{const s=S(e);let n;for(;!(n=s.next()).done;){const e=n.value;t(e)&&T(r,e)}})))),j=(0,n.XY)(2,((e,t)=>{const r=S(e);let s;const n=k(m()),i=k(m());for(;!(s=r.next()).done;){const e=s.value;t(e)?T(n,e):T(i,e)}return[Y(i),Y(n)]}))},86881:(e,t,r)=>{r.d(t,{Lc:()=>T,mH:()=>O,sw:()=>He,Mu:()=>Je,jq:()=>D,H7:()=>C,LT:()=>P,h9:()=>W,uP:()=>B,_O:()=>H,F_:()=>q,Kb:()=>z,vf:()=>L,up:()=>Ge,Ie:()=>xe,XE:()=>J,fJ:()=>$,AT:()=>K,pV:()=>U,gO:()=>V,wo:()=>se,Eq:()=>oe,_1:()=>ae,q1:()=>ie,qI:()=>G,Bq:()=>Z,pn:()=>Q,uS:()=>ee,Nf:()=>re,AC:()=>te,Xx:()=>ue,pL:()=>X,IW:()=>x,ql:()=>ce,sk:()=>ne,vh:()=>M,Tj:()=>le,xm:()=>he,YW:()=>de,D$:()=>fe,Bj:()=>pe,h1:()=>ge,Um:()=>me,Qg:()=>be,NW:()=>ye,le:()=>Fe,Cv:()=>_e,Gt:()=>We,S5:()=>Be,L5:()=>ve,z8:()=>Ne,P1:()=>we,qA:()=>Ye,dm:()=>ke,eu:()=>Te,Py:()=>Ee,Or:()=>Oe,DY:()=>Xe,OH:()=>Re,Jc:()=>Me,Mi:()=>Ae,sF:()=>De,Ly:()=>Pe,Qf:()=>Ce,Yp:()=>je,$M:()=>A,vM:()=>ze,A2:()=>Le,hq:()=>Ve,fR:()=>$e,OY:()=>qe});var s=r(20634),n=r(31651),i=r(89702),o=r(84073),a=r(46755),u=r(61369),c=r(5583),l=r(53533),h=r(56572),f=r(30714),d=r(90544),p=r(8993),g=r(20808),m=r(72620),b=r(12164),y=r(60356),F=r(89706);const _="Fresh",v="FromEffect",I="ProvideMerge";var S=r(61974),w=r(3611),k=r(66932),Y=r(23180),N=r(27514);const T=Symbol.for("effect/Layer"),E={[T]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return(0,l.t)(this,arguments)}},O=Symbol.for("effect/Layer/MemoMap"),x=e=>(0,h.i5)(e,T),X=e=>e._tag===_;class R{ref;[O];constructor(e){this.ref=e,this[O]=O}getOrElseMemoize(e,t){return(0,u.Fs)(Y.Gt(this.ref,(r=>{const s=r.get(e);if(void 0!==s){const[e,n]=s,i=(0,u.Fs)(e,m.qIB((([e,t])=>(0,u.Fs)(g.Bz(e),m.as(t)))),m.cfM(m.Wtn({onFailure:()=>m.rIH,onSuccess:()=>m.Uio(t,n)})));return m.PyW([i,r])}return(0,u.Fs)(S.L8(0),m.qIB((s=>(0,u.Fs)(m.WW4(),m.qIB((n=>(0,u.Fs)(S.L8((()=>m.rIH)),m.TjK((i=>{const o=m.FcF((o=>(0,u.Fs)(y.RW(),m.qIB((a=>(0,u.Fs)(o(m.qIB(j(e,a,!0),(e=>g.Ek(e(this))))),m.NS5,m.qIB((o=>{switch(o._tag){case F.N9:return(0,u.Fs)(m.FIO(n,o.effect_instruction_i0),m.aNH(m.vDJ(a,o)),m.aNH(m.ATB(o.effect_instruction_i0)));case F._l:return(0,u.Fs)(S.hZ(i,(e=>(0,u.Fs)(m.vDJ(a,e),m.iK2(S.JP(s,(e=>[1===e,e-1]))),m.NLW))),m.aNH(S.yo(s,(e=>e+1))),m.aNH(m.Uio(t,(t=>(0,u.Fs)(m.OH5((()=>r.delete(e))),m.aNH(S.Jt(i)),m.qIB((e=>e(t))))))),m.aNH(m.syF(n,o.effect_instruction_i0)),m.as(o.effect_instruction_i0[1]))}})))))))),a=[(0,u.Fs)(m.gn0(n),m.cfM(m.dDX({onFailure:()=>m.rIH,onSuccess:()=>S.yo(s,(e=>e+1))}))),e=>(0,u.Fs)(S.Jt(i),m.qIB((t=>t(e))))];return[o,X(e)?r:r.set(e,a)]})))))))))})),m.Bqz)}}const M=m.DYE((()=>m.TjK(b.PJ(new Map),(e=>new R(e))))),A=()=>new R(b.Do(new Map)),D=e=>y.NB((t=>P(e,t))),P=(0,u.XY)(2,((e,t)=>m.qIB(M,(r=>m.qIB(j(e,t),(e=>e(r))))))),C=(0,u.XY)(3,((e,t,r)=>m.qIB(j(e,r),(e=>e(t))))),j=(e,t,r=!1)=>{const s=e;switch(s._tag){case"Locally":return m.OH5((()=>e=>s.f(e.getOrElseMemoize(s.self,t))));case"ExtendScope":return m.OH5((()=>e=>y.NB((t=>e.getOrElseMemoize(s.layer,t)))));case"Fold":return m.OH5((()=>e=>(0,u.Fs)(e.getOrElseMemoize(s.layer,t),m.khu({onFailure:r=>e.getOrElseMemoize(s.failureK(r),t),onSuccess:r=>e.getOrElseMemoize(s.successK(r),t)}))));case"Fresh":return m.OH5((()=>e=>(0,u.Fs)(s.layer,P(t))));case"FromEffect":return r?m.OH5((()=>e=>s.effect)):m.OH5((()=>r=>r.getOrElseMemoize(e,t)));case"Provide":return m.OH5((()=>e=>(0,u.Fs)(e.getOrElseMemoize(s.first,t),m.qIB((r=>(0,u.Fs)(e.getOrElseMemoize(s.second,t),m.PpN(r)))))));case"Scoped":return r?m.OH5((()=>e=>y.v_(s.effect,t))):m.OH5((()=>r=>r.getOrElseMemoize(e,t)));case"Suspend":return m.OH5((()=>e=>e.getOrElseMemoize(s.evaluate(),t)));case"ProvideMerge":return m.OH5((()=>e=>(0,u.Fs)(e.getOrElseMemoize(s.first,t),m.OYO(e.getOrElseMemoize(s.second,t),s.zipK))));case"ZipWith":return m.OH5((()=>e=>(0,u.Fs)(e.getOrElseMemoize(s.first,t),y.cw(e.getOrElseMemoize(s.second,t),s.zipK,{concurrent:!0}))))}},W=(0,u.XY)(2,((e,t)=>de(e,{onFailure:t,onSuccess:Oe}))),B=(0,u.XY)(2,((e,t)=>fe(e,{onFailure:t,onSuccess:Oe}))),q=e=>K(s.F_(e)),z=e=>U((()=>s.F_(e()))),L=e=>le(e,(()=>i.Ie())),H=()=>re(m._OA()),J=e=>{const t=Object.create(E);return t._tag="ExtendScope",t.layer=e,t},$=e=>K(s.fJ(e)),V=e=>U((()=>s.fJ(e()))),K=e=>re(m.ATB(e)),U=e=>re(m.pVV(e)),G=(0,u.XY)(2,((e,t)=>de(e,{onFailure:$,onSuccess:t}))),Z=(0,u.XY)(2,((e,t)=>G(e,i.Jt(t)))),Q=e=>{const t=Object.create(E);return t._tag=_,t.layer=e,t},ee=(0,u.XY)(2,((e,t)=>{const r=i.dz(e),s=r?e:t,n=r?t:e;return re(m.TjK(n,(e=>i.L8(s,e))))})),te=e=>re(m.TjK(e,(()=>i.Ie())));function re(e){const t=Object.create(E);return t._tag=v,t.effect=e,t}const se=(0,u.XY)(3,((e,t,r)=>ne(e,m.woH(t,r)))),ne=(0,u.XY)(2,((e,t)=>{const r=Object.create(E);return r._tag="Locally",r.self=e,r.f=t,r})),ie=(0,u.XY)(3,((e,t,r)=>ne(e,m.q1t(t,r)))),oe=(e,t)=>ke(y.Eq(e,t)),ae=(e,t)=>ke(y._1(e,t)),ue=(e,t,r)=>re(m.TjK(e,(e=>i.L8(t,r(e))))),ce=e=>y.sZ(m.aNH(y.NB((t=>(0,u.Fs)(e,P(t)))),m.ZmZ)),le=(0,u.XY)(2,((e,t)=>G(e,(e=>Oe(t(e)))))),he=(0,u.XY)(2,((e,t)=>W(e,(e=>V((()=>t(e))))))),fe=(0,u.XY)(2,((e,{onFailure:t,onSuccess:r})=>{const s=Object.create(E);return s._tag="Fold",s.layer=e,s.failureK=t,s.successK=r,s})),de=(0,u.XY)(2,((e,{onFailure:t,onSuccess:r})=>fe(e,{onFailure:e=>{const r=s.vE(e);switch(r._tag){case"Left":return t(r.left);case"Right":return K(r.right)}},onSuccess:r}))),pe=e=>y.NB((t=>m.TjK(g.Bj(P(e,t)),re))),ge=(0,u.XY)(2,((e,t)=>qe(e,t,((e,t)=>i.h1(e,t))))),me=(...e)=>{let t=e[0];for(let r=1;r<e.length;r++)t=ge(t,e[r]);return t},be=e=>W(e,(e=>q(e))),ye=(0,u.XY)(2,((e,t)=>W(e,t))),Fe=e=>ge(H(),e),_e=(0,u.XY)(4,((e,t,r,s)=>le(e,(e=>i.L8(r,s(i.$v(e,t))))))),ve=(0,u.XY)(2,((e,t)=>Xe((()=>{const r=i.Io("effect/Layer/retry/{ state: unknown }");return(0,u.Fs)(Ee(r,{state:t.initial}),G((s=>Ie(e,t,r,(0,u.Fs)(s,i.Jt(r)).state))))})))),Ie=(e,t,r,s)=>(0,u.Fs)(e,W((n=>(0,u.Fs)(Se(t,r,n,s),G((s=>Q(Ie(e,t,r,(0,u.Fs)(s,i.Jt(r)).state)))))))),Se=(e,t,r,s)=>ee(t,(0,u.Fs)(n.Ru,m.qIB((t=>(0,u.Fs)(e.step(t,r,s),m.qIB((([e,s,i])=>f.$L(i)?m.fJG(r):(0,u.Fs)(n.yy(o.ne(d.ni(i.intervals)-t)),m.as({state:e}))))))))),we=(0,u.XY)(2,((e,t)=>{const r=i.dz(e),s=r?e:t,n=r?t:e;return Ye(m.TjK(n,(e=>i.L8(s,e))))})),ke=e=>Ye((0,u.Fs)(e,m.as(i.Ie()))),Ye=e=>{const t=Object.create(E);return t._tag="Scoped",t.effect=e,t},Ne=Ye(m.TjK(y.Q5(y.RW(),((e,t)=>e.close(t))),(e=>i.L8(p.HG,e)))),Te=e=>ee(e,e),Ee=(0,u.XY)(2,((e,t)=>{const r=i.dz(e),s=r?e:t,n=r?t:e;return re(m.PyW(i.L8(s,n)))})),Oe=e=>re(m.PyW(e)),xe=Oe(i.Ie()),Xe=e=>{const t=Object.create(E);return t._tag="Suspend",t.evaluate=e,t},Re=(0,u.XY)(2,((e,t)=>{const r=i.dz(e),s=r?e:t,n=r?t:e;return re(m.OH5((()=>i.L8(s,n()))))})),Me=e=>re(m.OH5(e)),Ae=(0,u.XY)(2,((e,t)=>G(e,(e=>re(m.as(t(e),e)))))),De=(0,u.XY)(2,((e,t)=>W(e,(e=>re(m.qIB(t(e),(()=>m.fJG(e)))))))),Pe=(0,u.XY)(2,((e,t)=>B(e,(e=>re(m.qIB(t(e),(()=>m.ATB(e)))))))),Ce=e=>(0,u.Fs)(y.NB((t=>P(e,t))),m.qIB((e=>(0,u.Fs)(w.fA(),m.PpN(e))))),je=(0,u.XY)(2,((e,t)=>m.qIB(y.NB((r=>C(e,t,r))),(e=>(0,u.Fs)(w.fA(),m.PpN(e)))))),We=(0,u.XY)(2,((e,t)=>Xe((()=>{const r=Object.create(E);return r._tag="Provide",r.first=Object.create(E,{_tag:{value:I,enumerable:!0},first:{value:H(),enumerable:!0},second:{value:t},zipK:{value:(e,t)=>(0,u.Fs)(e,i.h1(t))}}),r.second=e,r})))),Be=(0,u.XY)(2,((e,t)=>{const r=Object.create(E);return r._tag=I,r.first=t,r.second=We(e,t),r.zipK=(e,t)=>(0,u.Fs)(e,i.h1(t)),r})),qe=(0,u.XY)(3,((e,t,r)=>Xe((()=>{const s=Object.create(E);return s._tag="ZipWith",s.first=e,s.second=t,s.zipK=r,s})))),ze=e=>{const t=i.Io("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return G(ee(t,e),(e=>i.Jt(e,t)))},Le=e=>{const t=i.Io("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return G(we(t,e),(e=>i.Jt(e,t)))},He=(0,u.XY)((e=>x(e[0])),(function(){const e=arguments;return ie(e[0],m.Umi,"string"==typeof e[1]?c.hZ(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,r])=>c.hZ(e,t,r)),t))})),Je=(0,u.XY)((e=>x(e[0])),(function(){const e=arguments;return ie(e[0],m.BzD,"string"==typeof e[1]?c.hZ(e[1],e[2]):t=>Object.entries(e[1]).reduce(((e,[t,r])=>c.hZ(e,t,r)),t))})),$e=function(){const e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],r=N.ZA(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return Le(m.TjK(r?.onEnd?m.Mim(y.Rd(t,r),(e=>y.U9((t=>r.onEnd(e,t))))):y.Rd(t,r),(t=>Ve(e,t))))}return e=>Le(m.TjK(r?.onEnd?m.Mim(y.Rd(t,r),(e=>y.U9((t=>r.onEnd(e,t))))):y.Rd(t,r),(t=>Ve(e,t))))},Ve=(0,u.XY)(2,((e,t)=>We(e,Oe(i.L8(N.Te,t))))),Ke=(0,u.XY)(2,((e,t)=>m.jGc(y.RW(),(r=>m.qIB(P(t,r),(t=>m.$1l(e,t)))),((e,t)=>m.vDJ(e,t))))),Ue=(0,u.XY)(2,((e,t)=>{const r=a.Ui(w.KD.fiberRefs,t.fiberRefs),s=k.Ui(w.KD.runtimeFlags,t.runtimeFlags);return m.FcF((n=>m.$we((o=>{const u=o.getFiberRef(m.Fi1),c=o.getFiberRefs(),l=a.F6(o.id(),c)(r),h=o._runtimeFlags,f=k.F6(s)(h),d=a.Ui(l,c),p=k.Ui(f,h);return o.setFiberRefs(l),o._runtimeFlags=f,y.ye(m.$1l(n(e),i.h1(u,t.context)),m.$we((e=>(e.setFiberRefs(a.F6(e.id(),e.getFiberRefs())(d)),e._runtimeFlags=k.F6(p)(e._runtimeFlags),m.rIH))))}))))})),Ge=(0,u.XY)(2,((e,t)=>x(t)?Ke(e,t):i.aE(t)?m.$1l(e,t):Ue(e,t)))},8624:(e,t,r)=>{r.d(t,{$5:()=>v,EJ:()=>d,GG:()=>g,Pg:()=>F,Tg:()=>b,Z1:()=>f,cL:()=>I,cm:()=>y,dl:()=>h,e2:()=>_,j3:()=>p,mv:()=>S,vl:()=>m});var s=r(89702),n=r(61369),i=r(49942),o=r(72620),a=r(60356),u=r(86881),c=r(66932),l=(r(48464),r(27514));const h=e=>u.dm(a.Eq(a.UO,e)),f=(0,n.XY)(2,((e,t)=>o.woH(a.UO,t)(e))),d=e=>u.dm(a._1(a.RZ,i.WQ(e))),p=e=>u.vM(o.TjK(e,d)),g=e=>u.A2(o.TjK(e,d)),m=e=>u.dm(a._1(a.RZ,i.TF(e))),b=(0,n.XY)(2,((e,t)=>u.qI(m(e),(()=>d(t))))),y=(0,n.XY)(2,((e,t)=>u.qI(m(e),(()=>p(t))))),F=(0,n.XY)(2,((e,t)=>u.qI(m(e),(()=>g(t))))),_=(c.Zd,c._n,c.zb,c.sd,c.rS,c.Zd,c._n,c.zb,c.sd,c.rS,e=>u.dm(a.Ek(e))),v=e=>u.Or(s.L8(l.Te,e)),I=(e,t)=>(t=l.ZA(t),u.P1(l.Te,t?.onEnd?o.Mim(a.Rd(e,t),(e=>a.U9((r=>t.onEnd(e,r))))):a.Rd(e,t))),S=e=>u.dm(a.i4(e))},65123:(e,t,r)=>{r.d(t,{Li:()=>I,OH:()=>N,Py:()=>Y,Rz:()=>P,SZ:()=>A,Tc:()=>v,Tj:()=>S,aN:()=>O,bQ:()=>k,dv:()=>w,jj:()=>B,mE:()=>M,oz:()=>x,pi:()=>E,rY:()=>F,xW:()=>U,y4:()=>b,yU:()=>T,zQ:()=>_});var s=r(58600),n=r(89702),i=r(11486),o=r(61369),a=r(5583),u=r(83845),c=r(89425),l=r(4971),h=r(77948),f=r(53533),d=r(8197),p=r(44862),g=r(72572),m=r(78908);const b=Symbol.for("effect/Logger"),y={_Message:e=>e,_Output:e=>e},F=e=>({[b]:y,log:e,pipe(){return(0,f.t)(this,arguments)}}),_=(0,o.XY)(2,((e,t)=>F((r=>e.log({...r,message:t(r.message)}))))),v=(0,o.XY)(2,((e,t)=>F((r=>e.log(t(r)))))),I=(0,o.XY)(2,((e,t)=>F((r=>t(r.logLevel)?h.zN(e.log(r)):h.dv())))),S=(0,o.XY)(2,((e,t)=>F((r=>t(e.log(r)))))),w={[b]:y,log:o.Yi,pipe(){return(0,f.t)(this,arguments)}},k=e=>({[b]:y,log:({message:t})=>e(t),pipe(){return(0,f.t)(this,arguments)}}),Y=e=>k((()=>e)),N=e=>k(e),T=(0,o.XY)(2,((e,t)=>F((r=>[e.log(r),t.log(r)])))),E=(0,o.XY)(2,((e,t)=>S(T(e,t),(e=>e[0])))),O=(0,o.XY)(2,((e,t)=>S(T(e,t),(e=>e[1])))),x=F((({annotations:e,cause:t,date:r,fiberId:n,logLevel:i,message:h,spans:f})=>{const p=r.getTime();let g=[`timestamp=${r.toISOString()}`,`level=${i.label}`,`fiber=${m.CB(n)}`].join(" ");const b=s.D8(h);for(let e=0;e<b.length;e++){const t=u.ZK(b[e]);t.length>0&&(g+=" message=",g=R(t,g))}if(null!=t&&"Empty"!==t._tag&&(g+=" cause=",g=R(d.j9(t,{renderErrorCause:!0}),g)),c.ae(f)){g+=" ";let e=!0;for(const t of f)e?e=!1:g+=" ",g+=(0,o.Fs)(t,l.X(p))}if(a.Ej(e)>0){g+=" ";let t=!0;for(const[r,s]of e)t?t=!1:g+=" ",g+=C(r),g+="=",g=R(u.ZK(s),g)}return g})),X=/^[^\s"=]+$/,R=(e,t)=>t+(e.match(X)?e:`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`),M=F((({annotations:e,cause:t,date:r,fiberId:n,logLevel:i,message:l,spans:h})=>{const f=r.getTime();let p=[`timestamp=${r.toISOString()}`,`level=${i.label}`,`fiber=${m.CB(n)}`].join(" ");const g=s.D8(l);for(let e=0;e<g.length;e++){const t=u.ZK(g[e],0);t.length>0&&(p+=" message=",p=j(t,p))}if(null!=t&&"Empty"!==t._tag&&(p+=" cause=",p=j(d.j9(t,{renderErrorCause:!0}),p)),c.ae(h)){p+=" ";let e=!0;for(const t of h)e?e=!1:p+=" ",p+=(0,o.Fs)(t,W(f))}if(a.Ej(e)>0){p+=" ";let t=!0;for(const[r,s]of e)t?t=!1:p+=" ",p+=C(r),p+="=",p=j(u.ZK(s,0),p)}return p})),A=F((({annotations:e,cause:t,date:r,fiberId:n,logLevel:i,message:o,spans:u})=>{const l=r.getTime(),h={},f={};if(a.Ej(e)>0)for(const[t,r]of e)h[t]=D(r);if(c.ae(u))for(const e of u)f[e.label]=l-e.startTime;const p=s.D8(o);return{message:1===p.length?D(p[0]):p.map(D),logLevel:i.label,timestamp:r.toISOString(),cause:d.Im(t)?void 0:d.j9(t,{renderErrorCause:!0}),annotations:h,spans:f,fiberId:m.CB(n)}})),D=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},P=S(A,u.hL),C=e=>e.replace(/[\s="]/g,"_"),j=(e,t)=>{return t+(e.match(X)?e:(r=e,JSON.stringify(r)));var r},W=e=>t=>`${C(t.label)}=${e-t.startTime}ms`,B=e=>"object"==typeof e&&null!=e&&b in e,q=(e,...t)=>{let r="";for(let e=0;e<t.length;e++)r+=`[${t[e]}m`;return r+e+"[0m"},z=(e,...t)=>e,L={None:[],All:[],Trace:["90"],Debug:["34"],Info:["32"],Warning:["33"],Error:["31"],Fatal:["101","30"]},H={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},J=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,$="object"==typeof{env:{NODE_ENV:"production"}}.stdout&&null!=={env:{NODE_ENV:"production"}}.stdout&&!0==={env:{NODE_ENV:"production"}}.stdout.isTTY,V="object"==typeof window,K="object"==typeof self&&null!==self&&"function"==typeof self.constructor&&self.constructor.name.includes("Worker"),U=e=>{const t=e?.mode??"auto",r="browser"===("auto"===t?V||K?"browser":"tty":t),s="boolean"==typeof e?.colors?e.colors:$||r,n=e?.formatDate??J;return r?Z({colors:s,formatDate:n}):G({colors:s,formatDate:n,stderr:!0===e?.stderr})},G=e=>{const t="isBun"in{env:{NODE_ENV:"production"}}&&!0==={env:{NODE_ENV:"production"}}.isBun,r=e.colors&&$?q:z;return F((({annotations:o,cause:u,context:l,date:h,fiberId:f,logLevel:b,message:y,spans:F})=>{const _=i.Fh(l,p.qJ),v=n.Jt(_,g.MG).unsafe,I=!0===e.stderr?v.error:v.log,S=s.D8(y);let w=r(`[${e.formatDate(h)}]`,"37")+` ${r(b.label,...L[b._tag])}`+` (${m.CB(f)})`;if(c.ae(F)){const e=h.getTime(),t=W(e);for(const e of F)w+=" "+t(e)}w+=":";let k=0;if(S.length>0){const e=D(S[0]);"string"==typeof e&&(w+=" "+r(e,"1","36"),k++)}if(I(w),t||v.group(),d.Im(u)||I(d.j9(u,{renderErrorCause:!0})),k<S.length)for(;k<S.length;k++)I(S[k]);if(a.Ej(o)>0)for(const[e,t]of o)I(r(`${e}:`,"1","37"),t);t||v.groupEnd()}))},Z=e=>{const t=e.colors?"%c":"";return F((({annotations:r,cause:o,context:u,date:l,fiberId:h,logLevel:f,message:b,spans:y})=>{const F=i.Fh(u,p.qJ),_=n.Jt(F,g.MG).unsafe,v=s.D8(b);let I=`${t}[${e.formatDate(l)}]`;const S=[];if(e.colors&&S.push("color:gray"),I+=` ${t}${f.label}${t} (${m.CB(h)})`,e.colors&&S.push(H[f._tag],""),c.ae(y)){const e=l.getTime(),t=W(e);for(const e of y)I+=" "+t(e)}I+=":";let w=0;if(v.length>0){const r=D(v[0]);"string"==typeof r&&(I+=` ${t}${r}`,e.colors&&S.push("color:deepskyblue"),w++)}if(_.groupCollapsed(I,...S),d.Im(o)||_.error(d.j9(o,{renderErrorCause:!0})),w<v.length)for(;w<v.length;w++)_.log(v[w]);if(a.Ej(r)>0)for(const[t,s]of r)e.colors?_.log(`%c${t}:`,"color:gray",s):_.log(`${t}:`,s);_.groupEnd()}))}},58762:(e,t,r)=>{r.d(t,{L8:()=>l});var s=r(43977),n=r(67337),i=r(53533),o=r(56572);const a="effect/MetricLabel",u=Symbol.for(a);class c{key;value;[u]=u;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=n.Yj(a+this.key+this.value)}[n.HR](){return this._hash}[s.HR](e){return h(e)&&this.key===e.key&&this.value===e.value}pipe(){return(0,i.t)(this,arguments)}}const l=(e,t)=>new c(e,t),h=e=>(0,o.i5)(e,u)},93904:(e,t,r)=>{r.d(t,{AV:()=>o,Ai:()=>n,FG:()=>m,G3:()=>s,GE:()=>c,PS:()=>u,RY:()=>h,Rc:()=>l,Yj:()=>f,db:()=>d,dr:()=>i,ky:()=>g,l_:()=>p,su:()=>a});const s="BracketOut",n="Bridge",i="ConcatAll",o="Emit",a="Ensuring",u="Fail",c="Fold",l="FromEffect",h="PipeTo",f="Provide",d="Read",p="Succeed",g="SucceedNow",m="Suspend"},55451:(e,t,r)=>{r.d(t,{SX:()=>s,T7:()=>n,u4:()=>i});const s="Continue",n="Close",i="Yield"},1980:(e,t,r)=>{r.d(t,{P:()=>s,n:()=>n});const s="Done",n="Await"},9507:(e,t,r)=>{r.d(t,{AV:()=>n,PC:()=>s,Rc:()=>i,db:()=>o});const s="Done",n="Emit",i="FromEffect",o="Read"},60827:(e,t,r)=>{r.d(t,{L:()=>s,o:()=>n});const s="PullAfterNext",n="PullAfterAllEnqueued"},70052:(e,t,r)=>{r.d(t,{X:()=>n,g:()=>s});const s="ContinuationK",n="ContinuationFinalizer"},27576:(e,t,r)=>{r.d(t,{R:()=>n,i:()=>s});const s="Pending",n="Done"},89706:(e,t,r)=>{r.d(t,{EF:()=>l,Gj:()=>a,JJ:()=>o,N9:()=>i,NM:()=>f,Ni:()=>m,ZO:()=>s,_l:()=>c,du:()=>u,kK:()=>n,mM:()=>d,mm:()=>p,tA:()=>h,u4:()=>g});const s="Async",n="Commit",i="Failure",o="OnFailure",a="OnSuccess",u="OnSuccessAndFailure",c="Success",l="Sync",h="Tag",f="UpdateRuntimeFlags",d="While",p="WithRuntime",g="Yield",m="RevertFlags"},8578:(e,t,r)=>{r.d(t,{$I:()=>p,Ru:()=>g,dv:()=>m,oL:()=>d,zN:()=>b});var s=r(43977),n=r(67337),i=r(83845),o=r(56572),a=r(68498);const u=Symbol.for("effect/Option"),c={...a.MS,[u]:{_A:e=>e},[i.FX](){return this.toJSON()},toString(){return(0,i.GP)(this.toJSON())}},l=Object.assign(Object.create(c),{_tag:"Some",_op:"Some",[s.HR](e){return d(e)&&g(e)&&s.aI(this.value,e.value)},[n.HR](){return n.PO(this,n.kg(n.tW(this._tag))(n.tW(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:(0,i.U2)(this.value)}}}),h=n.tW("None"),f=Object.assign(Object.create(c),{_tag:"None",_op:"None",[s.HR]:e=>d(e)&&p(e),[n.HR]:()=>h,toJSON(){return{_id:"Option",_tag:this._tag}}}),d=e=>(0,o.i5)(e,u),p=e=>"None"===e._tag,g=e=>"Some"===e._tag,m=Object.create(f),b=e=>{const t=Object.create(l);return t.value=e,t}},99752:(e,t,r)=>{r.d(t,{QA:()=>C,yW:()=>A,Dn:()=>D,kc:()=>P,Uj:()=>W,f0:()=>j});var s=r(84073),n=r(61369),i=r(6517),o=r(68481),a=r(89702),u=r(62738),c=r(57964),l=r(43977),h=r(96949),f=r(67337),d=r(14349),p=r(66775),g=r(45914),m=r(77948),b=r(56572),y=r(20808),F=r(72620),_=r(34951),v=r(78908);const I=(e,t,r,s)=>_.w3({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:s}),S=(e,t)=>_.w3({_tag:"Pending",key:e,deferred:t}),w=Symbol.for("effect/Cache/MapKey");class k{current;[w]=w;previous=void 0;next=void 0;constructor(e){this.current=e}[f.HR](){return(0,n.Fs)(f.tW(this.current),f.kg(f.tW(this.previous)),f.kg(f.tW(this.next)),f.PO(this))}[l.HR](e){return this===e||N(e)&&l.aI(this.current,e.current)&&l.aI(this.previous,e.previous)&&l.aI(this.next,e.next)}}const Y=e=>new k(e),N=e=>(0,b.i5)(e,w);class T{head=void 0;tail=void 0;add(e){if(e!==this.tail)if(void 0===this.tail)this.head=e,this.tail=e;else{const t=e.previous,r=e.next;void 0!==r&&(e.next=void 0,void 0!==t?(t.next=r,r.previous=t):(this.head=r,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}remove(){const e=this.head;if(void 0!==e){const t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}const E=Symbol.for("effect/Cache"),O={_Key:e=>e,_Error:e=>e,_Value:e=>e},x=e=>({loadedMillis:e});class X{capacity;context;fiberId;lookup;timeToLive;[E]=O;cacheState;constructor(e,t,r,s,n){this.capacity=e,this.context=t,this.fiberId=r,this.lookup=s,this.timeToLive=n,this.cacheState={map:d.Ie(),keys:new T,accesses:p.dT(),updating:g.L8(!1),hits:0,misses:0}}get(e){return F.TjK(this.getEither(e),c.h1)}get cacheStats(){return F.OH5((()=>({hits:this.cacheState.hits,misses:this.cacheState.misses,size:d.Ej(this.cacheState.map)})))}getOption(e){return F.DYE((()=>m.YW(d.Jt(this.cacheState.map,e),{onNone:()=>{const t=Y(e);return this.trackAccess(t),this.trackMiss(),F.PyW(m.dv())},onSome:e=>this.resolveMapValue(e)})))}getOptionComplete(e){return F.DYE((()=>m.YW(d.Jt(this.cacheState.map,e),{onNone:()=>{const t=Y(e);return this.trackAccess(t),this.trackMiss(),F.PyW(m.dv())},onSome:e=>this.resolveMapValue(e,!0)})))}contains(e){return F.OH5((()=>d.zy(this.cacheState.map,e)))}entryStats(e){return F.OH5((()=>{const t=d.Jt(this.cacheState.map,e);if(m.Ru(t))switch(t.value._tag){case"Complete":{const e=t.value.entryStats.loadedMillis;return m.zN(x(e))}case"Pending":return m.dv();case"Refreshing":{const e=t.value.complete.entryStats.loadedMillis;return m.zN(x(e))}}return m.dv()}))}getEither(e){return F.DYE((()=>{const t=e;let r,s,n=m.Y6(d.Jt(this.cacheState.map,t));return void 0===n&&(s=u.$N(this.fiberId),r=Y(t),d.zy(this.cacheState.map,t)?n=m.Y6(d.Jt(this.cacheState.map,t)):d.hZ(this.cacheState.map,t,S(r,s))),void 0===n?(this.trackAccess(r),this.trackMiss(),F.TjK(this.lookupValueOf(e,s),c.pG)):F.qIB(this.resolveMapValue(n),m.YW({onNone:()=>this.getEither(e),onSome:e=>F.PyW(c.kb(e))}))}))}invalidate(e){return F.OH5((()=>{d.TF(this.cacheState.map,e)}))}invalidateWhen(e,t){return F.OH5((()=>{const r=d.Jt(this.cacheState.map,e);m.Ru(r)&&"Complete"===r.value._tag&&"Success"===r.value.exit._tag&&t(r.value.exit.value)&&d.TF(this.cacheState.map,e)}))}get invalidateAll(){return F.OH5((()=>{this.cacheState.map=d.Ie()}))}refresh(e){return y.RK((t=>F.DYE((()=>{const r=e,s=u.$N(this.fiberId);let i=m.Y6(d.Jt(this.cacheState.map,r));if(void 0===i&&(d.zy(this.cacheState.map,r)?i=m.Y6(d.Jt(this.cacheState.map,r)):d.hZ(this.cacheState.map,r,S(Y(r),s))),void 0===i)return F.NLW(this.lookupValueOf(e,s));switch(i._tag){case"Complete":if(this.hasExpired(t,i.timeToLiveMillis)){const t=m.Y6(d.Jt(this.cacheState.map,r));return l.aI(t,i)&&d.TF(this.cacheState.map,r),F.NLW(this.get(e))}return(0,n.Fs)(this.lookupValueOf(e,s),y.z7((()=>{const e=m.Y6(d.Jt(this.cacheState.map,r));if(l.aI(e,i)){const e=((e,t)=>_.w3({_tag:"Refreshing",deferred:e,complete:t}))(s,i);return d.hZ(this.cacheState.map,r,e),!0}return!1})),F.NLW);case"Pending":case"Refreshing":return u.Tx(i.deferred)}}))))}set(e,t){return y.RK((r=>F.OH5((()=>{const n=r.unsafeCurrentTimeMillis(),i=e,o=h.Py(t),a=I(Y(i),o,x(n),n+s.kE(s.D4(this.timeToLive(o))));d.hZ(this.cacheState.map,i,a)}))))}get size(){return F.OH5((()=>d.Ej(this.cacheState.map)))}get values(){return F.OH5((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e}))}get entries(){return F.OH5((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e}))}get keys(){return F.OH5((()=>{const e=[];for(const t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e}))}resolveMapValue(e,t=!1){return y.RK((r=>{switch(e._tag){case"Complete":return this.trackAccess(e.key),this.hasExpired(r,e.timeToLiveMillis)?(d.TF(this.cacheState.map,e.key.current),F.PyW(m.dv())):(this.trackHit(),F.TjK(e.exit,m.zN));case"Pending":return this.trackAccess(e.key),this.trackHit(),t?F.PyW(m.dv()):F.TjK(u.Tx(e.deferred),m.zN);case"Refreshing":return this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(r,e.complete.timeToLiveMillis)?t?F.PyW(m.dv()):F.TjK(u.Tx(e.deferred),m.zN):F.TjK(e.complete.exit,m.zN)}}))}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(p.x(this.cacheState.accesses,e),g.Tc(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){const t=p.wt(this.cacheState.accesses,p.r_);t===p.r_?e=!1:this.cacheState.keys.add(t)}let t=d.Ej(this.cacheState.map);for(e=t>this.capacity;e;){const r=this.cacheState.keys.remove();void 0!==r?d.zy(this.cacheState.map,r.current)&&(d.TF(this.cacheState.map,r.current),t-=1,e=t>this.capacity):e=!1}g.hZ(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return y.RK((r=>F.DYE((()=>{const i=e;return(0,n.Fs)(this.lookup(e),F.PpN(this.context),F.NS5,F.qIB((e=>{const n=r.unsafeCurrentTimeMillis(),o=x(n),a=I(Y(i),e,o,n+s.kE(s.D4(this.timeToLive(e))));return d.hZ(this.cacheState.map,i,a),F.aNH(u.Vw(t,e),e)})),F.nAr((()=>F.aNH(u.G(t),F.OH5((()=>{d.TF(this.cacheState.map,i)}))))))}))))}}var R=r(60356),M=r(2146);const A=(0,i.V)(Symbol.for("effect/FiberRef/currentCache"),(()=>{return F.QID((e=()=>F.TjK(F.WW4(),(e=>({listeners:new M.qR,handle:e}))),t=()=>(0,s.YA)(60),new X(65536,a.Ie(),v.dv,e,(e=>s.D4(t())))));var e,t})),D=(0,i.V)(Symbol.for("effect/FiberRef/currentCacheEnabled"),(()=>F.QID(!1))),P=(e,t)=>F.qIB(F.yw5(t)?t:F.PyW(t),(t=>F.g1G((r=>{const s=new Proxy(e,{});return F.uPR(D,(e=>{if(e){const e=F.uPR(A,(n=>F.qIB(n.getEither(s),(i=>{switch(i._tag){case"Left":return i.left.listeners.interrupted?F.qIB(n.invalidateWhen(s,(e=>e.handle===i.left.handle)),(()=>e)):(i.left.listeners.increment(),F.FcF((e=>F.qIB(F.NS5(F.Z5i(o.Ie,e(F.gn0(i.left.handle)))),(e=>(i.left.listeners.decrement(),e))))));case"Right":return i.right.listeners.increment(),F.FcF((e=>F.qIB(F.NS5(F.Z5i(o.J0(t,o.lq({request:s,result:i.right.handle,listeners:i.right.listeners,ownerId:r,state:{completed:!1}})),e(F.gn0(i.right.handle)))),(()=>(i.right.listeners.decrement(),F.gn0(i.right.handle))))))}}))));return e}const n=new M.qR;return n.increment(),F.qIB(F.WW4(),(e=>(0,R.ye)(F.Z5i(o.J0(t,o.lq({request:s,result:e,listeners:n,ownerId:r,state:{completed:!1}})),F.gn0(e)),F.OH5((()=>n.decrement())))))}))})))),C=(e,t)=>F.uPR(D,(r=>r?F.uPR(A,(r=>F.qIB(r.getEither(e),(e=>{switch(e._tag){case"Left":return F.rIH;case"Right":return F.$1O(e.right.handle,t)}})))):F.rIH)),j=(0,n.XY)(2,((e,t)=>F.woH(e,D,t))),W=(0,n.XY)(2,((e,t)=>F.woH(e,A,t)))},90788:(e,t,r)=>{r.d(t,{$Q:()=>P,A3:()=>K,AH:()=>g,Bg:()=>k,Ej:()=>M,Es:()=>_,FV:()=>C,GR:()=>F,Im:()=>D,Iz:()=>V,KA:()=>G,Ke:()=>N,L8:()=>O,Ld:()=>w,Mm:()=>Y,ON:()=>J,_K:()=>m,aK:()=>p,bN:()=>R,dT:()=>E,e6:()=>d,gZ:()=>S,h0:()=>H,iI:()=>q,mX:()=>$,n_:()=>j,p2:()=>T,s:()=>L,tz:()=>B,uq:()=>A,wt:()=>z,x:()=>W,xE:()=>U});var s=r(58600),n=r(28420),i=r(61369),o=r(66775),a=r(45914),u=r(77948),c=r(53533),l=r(56572),h=r(72620),f=r(60356);const d=Symbol.for("effect/QueueEnqueue"),p=Symbol.for("effect/QueueDequeue"),g=Symbol.for("effect/QueueStrategy"),m=Symbol.for("effect/BackingQueue"),b={_A:e=>e},y={_A:e=>e},F={_In:e=>e},_={_Out:e=>e};class v{queue;takers;shutdownHook;shutdownFlag;strategy;[d]=F;[p]=_;constructor(e,t,r,s,n){this.queue=e,this.takers=t,this.shutdownHook=r,this.shutdownFlag=s,this.strategy=n}pipe(){return(0,c.t)(this,arguments)}capacity(){return this.queue.capacity()}get size(){return h.DYE((()=>h.h9N(this.unsafeSize(),(()=>h.GaK))))}unsafeSize(){return a.Jt(this.shutdownFlag)?u.dv():u.zN(this.queue.length()-o.Bw(this.takers)+this.strategy.surplusSize())}get isEmpty(){return h.TjK(this.size,(e=>e<=0))}get isFull(){return h.TjK(this.size,(e=>e>=this.capacity()))}get shutdown(){return h.rfi(h.$we((e=>((0,i.Fs)(this.shutdownFlag,a.hZ(!0)),(0,i.Fs)(f.Kd(se(this.takers),(t=>h.bdM(t,e.id())),!1,!1),h.aNH(this.strategy.shutdown),h.iK2(h.syF(this.shutdownHook,void 0)),h.NLW)))))}get isShutdown(){return h.OH5((()=>a.Jt(this.shutdownFlag)))}get awaitShutdown(){return h.gn0(this.shutdownHook)}isActive(){return!a.Jt(this.shutdownFlag)}unsafeOffer(e){if(a.Jt(this.shutdownFlag))return!1;let t;if(0===this.queue.length()){const r=(0,i.Fs)(this.takers,o.wt(o.r_));r!==o.r_?(te(r,e),t=!0):t=!1}else t=!1;if(t)return!0;const r=this.queue.offer(e);return oe(this.strategy,this.queue,this.takers),r}offer(e){return h.DYE((()=>{if(a.Jt(this.shutdownFlag))return h.GaK;let t;if(0===this.queue.length()){const r=(0,i.Fs)(this.takers,o.wt(o.r_));r!==o.r_?(te(r,e),t=!0):t=!1}else t=!1;if(t)return h.PyW(!0);const r=this.queue.offer(e);return oe(this.strategy,this.queue,this.takers),r?h.PyW(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)}))}offerAll(e){return h.DYE((()=>{if(a.Jt(this.shutdownFlag))return h.GaK;const t=s.Ts(e),r=0===this.queue.length()?s.Ts(ne(this.takers,t.length)):s.Ie,[o,u]=(0,i.Fs)(t,s.gI(r.length));for(let e=0;e<r.length;e++){const t=r[e],s=o[e];te(t,s)}if(0===u.length)return h.PyW(!0);const c=this.queue.offerAll(u);return oe(this.strategy,this.queue,this.takers),n.Im(c)?h.PyW(!0):this.strategy.handleSurplus(c,this.queue,this.takers,this.shutdownFlag)}))}get take(){return h.$we((e=>{if(a.Jt(this.shutdownFlag))return h.GaK;const t=this.queue.poll(o.r_);if(t!==o.r_)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),h.PyW(t);{const t=h.MIt(e.id());return(0,i.Fs)(h.DYE((()=>((0,i.Fs)(this.takers,o.x(t)),oe(this.strategy,this.queue,this.takers),a.Jt(this.shutdownFlag)?h.GaK:h.gn0(t)))),h.nAr((()=>h.OH5((()=>ie(this.takers,t))))))}}))}get takeAll(){return h.DYE((()=>a.Jt(this.shutdownFlag)?h.GaK:h.OH5((()=>{const e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),n.Ts(e)}))))}takeUpTo(e){return h.DYE((()=>a.Jt(this.shutdownFlag)?h.GaK:h.OH5((()=>{const t=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),n.Ts(t)}))))}takeBetween(e,t){return h.DYE((()=>I(this,e,t,n.Ie())))}}const I=(e,t,r,s)=>r<t?h.PyW(s):(0,i.Fs)(J(e,r),h.qIB((o=>{const a=t-o.length;return 1===a?(0,i.Fs)(L(e),h.TjK((e=>(0,i.Fs)(s,n.u2(o),n.BC(e))))):a>1?(0,i.Fs)(L(e),h.qIB((t=>I(e,a-1,r-o.length-1,(0,i.Fs)(s,n.u2(o),n.BC(t)))))):h.PyW((0,i.Fs)(s,n.u2(o)))}))),S=e=>w(e)&&k(e),w=e=>(0,l.i5)(e,d),k=e=>(0,l.i5)(e,p),Y=e=>(0,i.Fs)(h.OH5((()=>o.Mm(e))),h.qIB((e=>O(X(e),K())))),N=e=>(0,i.Fs)(h.OH5((()=>o.Mm(e))),h.qIB((e=>O(X(e),U())))),T=e=>(0,i.Fs)(h.OH5((()=>o.Mm(e))),h.qIB((e=>O(X(e),G())))),E=()=>(0,i.Fs)(h.OH5((()=>o.dT())),h.qIB((e=>O(X(e),U())))),O=(e,t)=>(0,i.Fs)(h.WW4(),h.TjK((r=>((e,t,r,s,n)=>new v(e,t,r,s,n))(e,o.dT(),r,a.L8(!1),t))));class x{mutable;[m]=y;constructor(e){this.mutable=e}poll(e){return o.wt(this.mutable,e)}pollUpTo(e){return o.KK(this.mutable,e)}offerAll(e){return o.iI(this.mutable,e)}offer(e){return o.x(this.mutable,e)}capacity(){return o.bN(this.mutable)}length(){return o.Bw(this.mutable)}}const X=e=>new x(e),R=e=>e.capacity(),M=e=>e.size,A=e=>e.isFull,D=e=>e.isEmpty,P=e=>e.isShutdown,C=e=>e.awaitShutdown,j=e=>e.shutdown,W=(0,i.XY)(2,((e,t)=>e.offer(t))),B=(0,i.XY)(2,((e,t)=>e.unsafeOffer(t))),q=(0,i.XY)(2,((e,t)=>e.offerAll(t))),z=e=>h.TjK(e.takeUpTo(1),n.d5),L=e=>e.take,H=e=>e.takeAll,J=(0,i.XY)(2,((e,t)=>e.takeUpTo(t))),$=(0,i.XY)(3,((e,t,r)=>e.takeBetween(t,r))),V=(0,i.XY)(2,((e,t)=>e.takeBetween(t,t))),K=()=>new Z,U=()=>new Q,G=()=>new ee;class Z{[g]=b;putters=o.dT();surplusSize(){return o.Bw(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!o.Im(this.putters)&&!o.Im(e);){const t=o.wt(e,void 0),r=o.wt(this.putters,void 0);r[2]&&te(r[1],!0),te(t,r[0])}}get shutdown(){return(0,i.Fs)(h.ABT,h.qIB((e=>(0,i.Fs)(h.OH5((()=>se(this.putters))),h.qIB((t=>f.Kd(t,(([t,r,s])=>s?(0,i.Fs)(h.bdM(r,e),h.NLW):h.rIH),!1,!1)))))))}handleSurplus(e,t,r,s){return h.$we((n=>{const o=h.MIt(n.id());return(0,i.Fs)(h.DYE((()=>(this.unsafeOffer(e,o),this.unsafeOnQueueEmptySpace(t,r),oe(this,t,r),a.Jt(s)?h.GaK:h.gn0(o)))),h.nAr((()=>h.OH5((()=>this.unsafeRemove(o))))))}))}unsafeOnQueueEmptySpace(e,t){let r=!0;for(;r&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){const s=(0,i.Fs)(this.putters,o.wt(o.r_));if(s===o.r_)r=!1;else{const r=e.offer(s[0]);r&&s[2]?te(s[1],!0):r||re(this.putters,(0,i.Fs)(se(this.putters),n.Hs(s))),oe(this,e,t)}}}unsafeOffer(e,t){const r=s.Ts(e);for(let e=0;e<r.length;e++){const s=r[e];e===r.length-1?(0,i.Fs)(this.putters,o.x([s,t,!0])):(0,i.Fs)(this.putters,o.x([s,t,!1]))}}unsafeRemove(e){re(this.putters,(0,i.Fs)(se(this.putters),n.pb((([,t])=>t!==e))))}}class Q{[g]=b;surplusSize(){return 0}get shutdown(){return h.rIH}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,r,s){return h.PyW(!1)}unsafeOnQueueEmptySpace(e,t){}}class ee{[g]=b;surplusSize(){return 0}get shutdown(){return h.rIH}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,r,s){return h.OH5((()=>(this.unsafeOffer(t,e),oe(this,t,r),!0)))}unsafeOnQueueEmptySpace(e,t){}unsafeOffer(e,t){const r=t[Symbol.iterator]();let s,n=!0;for(;!(s=r.next()).done&&n;){if(0===e.capacity())return;e.poll(o.r_),n=e.offer(s.value)}}}const te=(e,t)=>h.q_p(e,h.PyW(t)),re=(e,t)=>(0,i.Fs)(e,o.iI(t)),se=e=>(0,i.Fs)(e,o.KK(Number.POSITIVE_INFINITY)),ne=(e,t)=>(0,i.Fs)(e,o.KK(t)),ie=(e,t)=>{re(e,(0,i.Fs)(se(e),n.pb((e=>t!==e))))},oe=(e,t,r)=>{let s=!0;for(;s&&0!==t.length();){const a=(0,i.Fs)(r,o.wt(o.r_));if(a!==o.r_){const u=t.poll(o.r_);u!==o.r_?(te(a,u),e.unsafeOnQueueEmptySpace(t,r)):re(r,(0,i.Fs)(se(r),n.Hs(a))),s=!0}else s=!1}s&&0===t.length()&&!o.Im(r)&&e.onCompleteTakersWithEmptyQueue(r)}},37540:(e,t,r)=>{r.d(t,{L8:()=>p,k_:()=>l,p1:()=>c});var s=r(28420),n=r(89702),i=r(61369),o=r(67337),a=r(30276),u=r(72620);const c=Symbol.for("effect/Random"),l=n.Io("effect/Random");class h{seed;[c]=c;PRNG;constructor(e){this.seed=e,this.PRNG=new a.Cz(e)}get next(){return u.OH5((()=>this.PRNG.number()))}get nextBoolean(){return u.TjK(this.next,(e=>e>.5))}get nextInt(){return u.OH5((()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER)))}nextRange(e,t){return u.TjK(this.next,(r=>(t-e)*r+e))}nextIntBetween(e,t){return u.OH5((()=>this.PRNG.integer(t-e)+e))}shuffle(e){return f(e,(e=>this.nextIntBetween(0,e)))}}const f=(e,t)=>u.DYE((()=>(0,i.Fs)(u.OH5((()=>Array.from(e))),u.qIB((e=>{const r=[];for(let t=e.length;t>=2;t-=1)r.push(t);return(0,i.Fs)(r,u.QZV((r=>(0,i.Fs)(t(r),u.TjK((t=>d(e,r-1,t)))))),u.as(s.Ts(e)))}))))),d=(e,t,r)=>{const s=e[t];return e[t]=e[r],e[r]=s,e},p=e=>new h(o.tW(e))},61974:(e,t,r)=>{r.d(t,{$N:()=>y,C2:()=>m,JP:()=>_,Jt:()=>p,L8:()=>d,Ru:()=>b,VH:()=>k,VO:()=>l,_c:()=>F,gH:()=>w,hZ:()=>g,lF:()=>S,ll:()=>c,ni:()=>v,s$:()=>f,yo:()=>I});var s=r(61369),n=r(45914),i=r(77948),o=r(53533),a=r(20209),u=r(72620);const c=Symbol.for("effect/Ref"),l={_A:e=>e};class h{ref;[c]=l;[a.ii];constructor(e){this.ref=e,this[a.ii]=a.ii,this.get=u.OH5((()=>n.Jt(this.ref)))}get;modify(e){return u.OH5((()=>{const t=n.Jt(this.ref),[r,s]=e(t);return t!==s&&n.hZ(s)(this.ref),r}))}pipe(){return(0,o.t)(this,arguments)}}const f=e=>new h(n.L8(e)),d=e=>u.OH5((()=>f(e))),p=e=>e.get,g=(0,s.XY)(2,((e,t)=>e.modify((()=>[void 0,t])))),m=(0,s.XY)(2,((e,t)=>e.modify((e=>[e,t])))),b=(0,s.XY)(2,((e,t)=>e.modify((e=>[e,t(e)])))),y=(0,s.XY)(2,((e,t)=>e.modify((e=>{const r=t(e);switch(r._tag){case"None":return[e,e];case"Some":return[e,r.value]}})))),F=(0,s.XY)(2,((e,t)=>e.modify((()=>[t,t])))),_=(0,s.XY)(2,((e,t)=>e.modify(t))),v=(0,s.XY)(3,((e,t,r)=>e.modify((e=>{const s=r(e);switch(s._tag){case"None":return[t,e];case"Some":return s.value}})))),I=(0,s.XY)(2,((e,t)=>e.modify((e=>[void 0,t(e)])))),S=(0,s.XY)(2,((e,t)=>e.modify((e=>{const r=t(e);return[r,r]})))),w=(0,s.XY)(2,((e,t)=>e.modify((e=>[void 0,i.YW(t(e),{onNone:()=>e,onSome:e=>e})])))),k=(0,s.XY)(2,((e,t)=>e.modify((e=>{const r=t(e);switch(r._tag){case"None":return[e,e];case"Some":return[r.value,r.value]}}))))},2146:(e,t,r)=>{r.d(t,{AT:()=>y,My:()=>g,Py:()=>F,V5:()=>p,VK:()=>f,Xs:()=>d,fJ:()=>b,ks:()=>l,of:()=>h,pD:()=>u,qR:()=>_,tx:()=>m});var s=r(61369),n=r(56572),i=r(42927),o=r(72620),a=r(68498);const u=Symbol.for("effect/Request"),c={...a.KE,[u]:{_E:e=>e,_A:e=>e}},l=e=>(0,n.i5)(e,u),h=()=>e=>Object.assign(Object.create(c),e),f=e=>t=>{const r=Object.assign(Object.create(c),t);return r._tag=e,r},d=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=c,e}(),p=e=>class extends d{_tag=e},g=(0,s.XY)(2,((e,t)=>o.uPR(i.v,(r=>o.OH5((()=>{if(r.has(e)){const s=r.get(e);s.state.completed||(s.state.completed=!0,o.q_p(s.result,t))}})))))),m=(0,s.XY)(2,((e,t)=>o.tvg(t,{onFailure:t=>g(e,o.Rkt(t)),onSuccess:t=>g(e,o.xtk(t))}))),b=(0,s.XY)(2,((e,t)=>g(e,o.Rkt(t)))),y=(0,s.XY)(2,((e,t)=>g(e,o.cbD(t)))),F=(0,s.XY)(2,((e,t)=>g(e,o.xtk(t))));class _{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach((e=>e(this.count)))}decrement(){this.count--,this.observers.forEach((e=>e(this.count)))}}},3611:(e,t,r)=>{r.d(t,{$Q:()=>z,B5:()=>k,C9:()=>Z,En:()=>V,FZ:()=>Y,HZ:()=>G,Ib:()=>K,Js:()=>R,KD:()=>q,Kv:()=>J,L8:()=>j,LP:()=>D,MN:()=>ee,NV:()=>A,Pf:()=>$,RU:()=>X,VE:()=>B,VK:()=>O,Vk:()=>P,a1:()=>se,ej:()=>re,fA:()=>W,mq:()=>T,o$:()=>H,r_:()=>L,vI:()=>w,w$:()=>Q,wg:()=>te,xo:()=>U});var s=r(43977),n=r(89702),i=r(96949),o=r(99571),a=r(95602),u=r(11486),c=r(61369),l=r(83845),h=r(77948),f=r(53533),d=r(56572),p=r(71108),g=r(8993),m=r(8197),b=r(72620),y=r(32628),F=r(60356),_=r(8977),v=r(89706),I=r(66932),S=r(35021);const w=e=>(t,r)=>{const n=a.$N(),i=[[b.Fi1,[[n,e.context]]]];r?.scheduler&&i.push([p.X_,[[n,r.scheduler]]]);let o=u.vG(e.fiberRefs,{entries:i,forkAs:n});r?.updateRefs&&(o=r.updateRefs(o,n));const c=new F.d7(n,o,e.runtimeFlags);let l=t;r?.scope&&(l=b.qIB(g.Zy(r.scope,y.il),(e=>b.aNH(b.iLB(e,b.g1G((e=>(0,s.aI)(e,c.id())?b.rIH:b._tB(c,e)))),b.cfM(t,(t=>g.VN(e,t)))))));const f=c._supervisor;return f!==S.dv&&(f.onStart(e.context,l,h.dv(),c),c.addObserver((e=>f.onEnd(e,c)))),_.gm.add(e.runtimeFlags,c),!1===r?.immediate?c.resume(l):c.start(l),c},k=e=>(t,r={})=>{const s=w(e)(t,r);return r.onExit&&s.addObserver((e=>{r.onExit(e)})),(t,r)=>k(e)((0,c.Fs)(s,o.yS(t??a.dv)),{...r,onExit:r?.onExit?e=>r.onExit(i.Bq(e)):void 0})},Y=e=>t=>{const r=A(e)(t);if("Failure"===r._tag)throw X(r.effect_instruction_i0);return r.effect_instruction_i0};class N extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const T=e=>d.$J(e,"AsyncFiberException")&&"fiber"in e,E=Symbol.for("effect/Runtime/FiberFailure"),O=Symbol.for("effect/Runtime/FiberFailure/Cause");class x extends Error{[E];[O];constructor(e){super(),this[E]=E,this[O]=e;const t=m.Yu(e);if(t.length>0){const e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,void 0!==this.message&&0!==this.message.length||(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[O].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[l.FX](){return this.toString()}}const X=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new x(e);return Error.stackTraceLimit=t,r},R=e=>d.i5(e,E),M=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return b.Rkt(t.left);case"Right":return b.xtk(t.right);case"Some":return b.xtk(t.value);case"None":return b.Rkt(b.kJg())}},A=e=>t=>{const r=M(t);if(r)return r;const s=new p.pX,n=w(e)(t,{scheduler:s});s.flush();const i=n.unsafePoll();if(i)return i;throw(e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new N(e);return Error.stackTraceLimit=t,r})(n)},D=e=>(t,r)=>P(e)(t,r).then((e=>{switch(e._tag){case v._l:return e.effect_instruction_i0;case v.N9:throw X(e.effect_instruction_i0)}})),P=e=>(t,r)=>new Promise((s=>{const n=M(t);n&&s(n);const i=w(e)(t);i.addObserver((e=>{s(e)})),void 0!==r?.signal&&(r.signal.aborted?i.unsafeInterruptAsFork(i.id()):r.signal.addEventListener("abort",(()=>{i.unsafeInterruptAsFork(i.id())}),{once:!0}))}));class C{context;runtimeFlags;fiberRefs;constructor(e,t,r){this.context=e,this.runtimeFlags=t,this.fiberRefs=r}pipe(){return(0,f.t)(this,arguments)}}const j=e=>new C(e.context,e.runtimeFlags,e.fiberRefs),W=()=>b.$we(((e,t)=>b.PyW(new C(e.getFiberRef(b.Fi1),t.runtimeFlags,e.getFiberRefs())))),B=I.L8(I._n,I.Zd,I.sd),q=j({context:n.Ie(),runtimeFlags:B,fiberRefs:u.Ie()}),z=(0,c.XY)(2,((e,t)=>j({context:e.context,runtimeFlags:t(e.runtimeFlags),fiberRefs:e.fiberRefs}))),L=(0,c.XY)(2,((e,t)=>z(e,I.b8(t)))),H=(0,c.XY)(2,((e,t)=>z(e,I.sS(t)))),J=(0,c.XY)(2,((e,t)=>j({context:t(e.context),runtimeFlags:e.runtimeFlags,fiberRefs:e.fiberRefs}))),$=(0,c.XY)(3,((e,t,r)=>J(e,n.WQ(t,r)))),V=(0,c.XY)(2,((e,t)=>j({context:e.context,runtimeFlags:e.runtimeFlags,fiberRefs:t(e.fiberRefs)}))),K=(0,c.XY)(3,((e,t,r)=>V(e,u.aI({fiberId:a.dv,fiberRef:t,value:r})))),U=(0,c.XY)(2,((e,t)=>V(e,u.Q2(t)))),G=k(q),Z=w(q),Q=D(q),ee=P(q),te=Y(q),re=A(q),se=e=>b.DYE((()=>{let t;return b.qIB(b.WW4(),(r=>b.qIB(W(),(s=>b.FcF((n=>b.aNH(F.Zy(n(b.khu(e((e=>k(s)(b._ig(e,r)))),{onFailure:e=>b.FIO(r,e),onSuccess:e=>(t=e,b.rIH)}))),n(b.nAr(b.gn0(r),(()=>t??b.rIH))))))))))}))},66932:(e,t,r)=>{r.d(t,{F6:()=>N,In:()=>m,L8:()=>F,Ps:()=>d,Tx:()=>E,Ui:()=>Y,Vh:()=>k,YW:()=>b,Zd:()=>l,_n:()=>o,b8:()=>p,dv:()=>_,hY:()=>T,qB:()=>w,qg:()=>v,rS:()=>c,sS:()=>g,sd:()=>u,zb:()=>a});var s=r(61369),n=r(45779),i=r(48464);const o=1,a=2,u=4,c=16,l=32,h=[0,o,a,u,c,l],f=e=>{switch(e){case l:return"CooperativeYielding";case c:return"WindDown";case u:return"RuntimeMetrics";case a:return"OpSupervision";case o:return"Interruption";case 0:return"None"}},d=e=>y(e,l),p=(0,s.XY)(2,((e,t)=>e&~t)),g=(0,s.XY)(2,((e,t)=>e|t)),m=e=>b(e)&&!S(e),b=e=>y(e,o),y=(0,s.XY)(2,((e,t)=>!!(e&t))),F=(...e)=>e.reduce(((e,t)=>e|t),0),_=F(0),v=e=>y(e,u),I=e=>new Set(h.filter((t=>y(e,t)))),S=e=>y(e,c),w=e=>I(i.vu(e)&i.Sn(e)),k=e=>I(i.vu(e)&~i.Sn(e)),Y=(0,s.XY)(2,((e,t)=>i.L8(e^t,t))),N=(0,s.XY)(2,((e,t)=>e&(i.B8(i.vu(t))|i.Sn(t))|i.vu(t)&i.Sn(t))),T=e=>`RuntimeFlagsPatch(enabled = (${Array.from(w(e)).map((e=>f(e))).join(", ")}), disabled = (${Array.from(k(e)).map((e=>f(e))).join(", ")}))`,E=n.L8({empty:i.Ie,diff:(e,t)=>Y(e,t),combine:(e,t)=>i.hg(t)(e),patch:(e,t)=>N(t,e)})},48464:(e,t,r)=>{r.d(t,{$m:()=>f,B8:()=>_,DI:()=>F,HN:()=>g,Ie:()=>u,Im:()=>h,L8:()=>a,Ol:()=>d,Sn:()=>o,WP:()=>m,b8:()=>l,d6:()=>p,gP:()=>b,hg:()=>y,sS:()=>c,vu:()=>i});var s=r(61369);const n=255,i=e=>e&n,o=e=>e>>8&n,a=(e,t)=>(e&n)+((t&e&n)<<8),u=a(0,0),c=e=>a(e,e),l=e=>a(e,0),h=e=>0===e,f=(0,s.XY)(2,((e,t)=>!!(i(e)&t))),d=(0,s.XY)(2,((e,t)=>!!(o(e)&t))),p=(0,s.XY)(2,((e,t)=>!(!(i(e)&t)||o(e)&t))),g=(0,s.XY)(2,((e,t)=>a(i(e)&~t,o(e)))),m=(0,s.XY)(2,((e,t)=>a(i(e)|i(t),o(e)&o(t)))),b=(0,s.XY)(2,((e,t)=>a(i(e)|i(t),o(e)|o(t)))),y=(0,s.XY)(2,((e,t)=>e|t)),F=e=>a(o(e),_(i(e))),_=e=>~e>>>0&n},80561:(e,t,r)=>{r.d(t,{rk:()=>U,NU:()=>V,VN:()=>re,Y4:()=>se,hg:()=>ne,y8:()=>ie,as:()=>oe,NL:()=>ae,FX:()=>ue,z6:()=>ce,ab:()=>le,vt:()=>he,IE:()=>fe,Fh:()=>de,Mc:()=>pe,wu:()=>ge,tB:()=>me,Zz:()=>be,U9:()=>gr,BW:()=>ve,SD:()=>Ie,mK:()=>Se,Nw:()=>we,ol:()=>ke,iq:()=>Ye,xA:()=>Ne,Bd:()=>Oe,p0:()=>xe,gP:()=>Xe,k$:()=>Re,vk:()=>mr,ye:()=>Me,EV:()=>Ae,$_:()=>De,Zu:()=>Pe,i4:()=>br,_E:()=>Ce,Ht:()=>je,Xx:()=>We,cf:()=>Be,D_:()=>qe,y$:()=>ze,SV:()=>Le,et:()=>Je,q3:()=>$e,sn:()=>Ve,g7:()=>te,Tj:()=>Ke,Uc:()=>Te,$E:()=>Ee,WK:()=>Ue,zQ:()=>ye,ky:()=>Fe,K7:()=>_e,cM:()=>Ge,y1:()=>Ze,Nb:()=>Qe,u1:()=>et,Oo:()=>yr,le:()=>tt,Pp:()=>rt,Pf:()=>st,oG:()=>nt,$y:()=>it,Vf:()=>ot,O5:()=>at,FP:()=>ut,fE:()=>ct,t5:()=>lt,TS:()=>ht,GH:()=>ft,g2:()=>or,Mj:()=>ir,Xu:()=>dt,yj:()=>pt,uw:()=>gt,H_:()=>lr,nn:()=>cr,eF:()=>mt,Av:()=>dr,mg:()=>fr,Qn:()=>yt,ji:()=>Ft,ds:()=>Fr,Py:()=>_t,OH:()=>vt,EM:()=>It,NZ:()=>St,t8:()=>wt,KC:()=>kt,q2:()=>Yt,RY:()=>Nt,GE:()=>Tt,m$:()=>Et,HI:()=>Ot,jB:()=>xt,O9:()=>Xt,vm:()=>Rt,v:()=>Mt,ph:()=>At,Ix:()=>Dt,pi:()=>Pt,aN:()=>Ct,OY:()=>jt});var s=r(28420),n=r(31651),i=r(89702),o=r(58600),a=r(57964),u=r(43977),c=r(35309),l=r(61369),h=r(67337),f=r(83845),d=r(4676),p=r(53533),g=r(56572),m=r(43216);const b=Symbol.for("effect/Cron"),y={[b]:b,[u.HR](e){return F(e)&&Y(this,e)},[h.HR](){return(0,l.Fs)(h.YO(o.Ts(this.minutes)),h.kg(h.YO(o.Ts(this.hours))),h.kg(h.YO(o.Ts(this.days))),h.kg(h.YO(o.Ts(this.months))),h.kg(h.YO(o.Ts(this.weekdays))),h.PO(this))},toString(){return(0,f.GP)(this.toJSON())},toJSON(){return{_id:"Cron",minutes:o.Ts(this.minutes),hours:o.Ts(this.hours),days:o.Ts(this.days),months:o.Ts(this.months),weekdays:o.Ts(this.weekdays)}},[f.FX](){return this.toJSON()},pipe(){return(0,p.t)(this,arguments)}},F=e=>(0,g.i5)(e,b),_=Symbol.for("effect/Cron/errors/ParseError"),v={_tag:"ParseError",[_]:_},I=(e,t)=>{const r=Object.create(v);return r.message=e,void 0!==t&&(r.input=t),r},S=c.L8(((e,t)=>k(e.minutes,t.minutes)&&k(e.hours,t.hours)&&k(e.days,t.days)&&k(e.months,t.months)&&k(e.weekdays,t.weekdays))),w=c.YO(c.ai),k=(e,t)=>w(o.Ts(e),o.Ts(t)),Y=(0,l.XY)(2,((e,t)=>S(e,t))),N={segment:"minute",min:0,max:59},T={segment:"hour",min:0,max:23},E={segment:"day",min:1,max:31},O={segment:"month",min:1,max:12,aliases:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}},x={segment:"weekday",min:0,max:6,aliases:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},X=(e,t)=>{const r=t.max-t.min+1,s=new Set,n=e.split(",");for(const i of n){const[n,o]=R(i);if("*"===n&&void 0===o)return a.pG(new Set);if(void 0!==o){if(!Number.isInteger(o))return a.kb(I("Expected step value to be a positive integer",e));if(o<1)return a.kb(I("Expected step value to be greater than 0",e));if(o>t.max)return a.kb(I(`Expected step value to be less than ${t.max}`,e))}if("*"===n)for(let e=t.min;e<=t.max;e+=o??1)s.add(e);else{const[r,i]=M(n,t.aliases);if(!Number.isInteger(r))return a.kb(I("Expected a positive integer",e));if(r<t.min||r>t.max)return a.kb(I(`Expected a value between ${t.min} and ${t.max}`,e));if(void 0===i)s.add(r);else{if(!Number.isInteger(i))return a.kb(I("Expected a positive integer",e));if(i<t.min||i>t.max)return a.kb(I(`Expected a value between ${t.min} and ${t.max}`,e));if(r>i)return a.kb(I("Invalid value range",e));for(let e=r;e<=i;e+=o??1)s.add(e)}}if(s.size>=r)return a.pG(new Set)}return a.pG(s)},R=e=>{const t=e.indexOf("/");return-1!==t?[e.slice(0,t),Number(e.slice(t+1))]:[e,void 0]},M=(e,t)=>{const r=e.indexOf("-");return-1!==r?[A(e.slice(0,r),t),A(e.slice(r+1),t)]:[A(e,t),void 0]};function A(e,t){return t?.[e.toLocaleLowerCase()]??Number(e)}var D=r(84073),P=r(77948),C=r(44862),j=r(37540);j.p1;const W=C.K2;C.vz,C.cF,C.BQ,C.HO,C.k4,C.Gx,j.k_,j.L8;var B=r(30714),q=r(79100),z=r(90544),L=r(8197),H=r(20808),J=r(72620),$=r(61974);const V=Symbol.for("effect/Schedule"),K=e=>(0,g.i5)(e,V),U=Symbol.for("effect/ScheduleDriver"),G={_Out:e=>e,_In:e=>e,_R:e=>e},Z={_Out:e=>e,_In:e=>e,_R:e=>e};class Q{initial;step;[V]=G;constructor(e,t){this.initial=e,this.step=t}pipe(){return(0,p.t)(this,arguments)}}class ee{schedule;ref;[U]=Z;constructor(e,t){this.schedule=e,this.ref=t}get state(){return J.TjK($.Jt(this.ref),(e=>e[1]))}get last(){return J.qIB($.Jt(this.ref),(([e,t])=>{switch(e._tag){case"None":return J.gOk((()=>new J.kJg));case"Some":return J.PyW(e.value)}}))}get reset(){return $.hZ(this.ref,[P.dv(),this.schedule.initial])}next(e){return(0,l.Fs)(J.TjK($.Jt(this.ref),(e=>e[1])),J.qIB((t=>(0,l.Fs)(n.Ru,J.qIB((r=>(0,l.Fs)(J.DYE((()=>this.schedule.step(r,e,t))),J.qIB((([e,t,s])=>{const n=$.hZ(this.ref,[P.zN(t),e]);if(B.$L(s))return J.aNH(n,J.fJG(P.dv()));const i=z.ni(s.intervals)-r;return i<=0?J.as(n,t):(0,l.Fs)(n,J.aNH(H.yy(D.ne(i))),J.as(t))})))))))))}}const te=(e,t)=>new Q(e,t),re=(0,l.XY)(2,((e,t)=>se(e,(e=>J.OH5((()=>t(e))))))),se=(0,l.XY)(2,((e,t)=>Qe(e,((e,r)=>J.TjK(t(e),(e=>D.cz(r,D.D4(e)))))))),ne=(0,l.XY)(2,((e,t)=>Ke(ie(e,t),a.h1))),ie=(0,l.XY)(2,((e,t)=>te([e.initial,t.initial,!0],((r,s,n)=>n[2]?J.qIB(e.step(r,s,n[0]),(([e,i,o])=>B.$L(o)?J.TjK(t.step(r,s,n[1]),(([t,r,s])=>[[e,t,!1],a.pG(r),s])):J.PyW([[e,n[1],!0],a.kb(i),o]))):J.TjK(t.step(r,s,n[1]),(([e,t,r])=>[[n[0],e,!1],a.pG(t),r])))))),oe=(0,l.XY)(2,((e,t)=>Ke(e,(()=>t)))),ae=e=>Ke(e,l.Yi),ue=(0,l.XY)(2,((e,t)=>te([e.initial,t.initial],((r,[s,n],i)=>J.OYO(e.step(r,s,i[0]),t.step(r,n,i[1]),(([e,t,r],[s,n,i])=>{if(B.Wk(r)&&B.Wk(i)){const o=(0,l.Fs)(r.intervals,z.KC(i.intervals));return[[e,s],[t,n],B.c3(o)]}return[[e,s],[t,n],B.Vw]})))))),ce=(0,l.XY)(2,((e,t)=>le(e,((e,r)=>J.OH5((()=>t(e,r))))))),le=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([e,r,n])=>B.$L(n)?J.PyW([e,r,B.Vw]):J.TjK(t(s,r),(t=>t?[e,r,n]:[e,r,B.Vw])))))))),he=()=>fe(qe()),fe=e=>ht(e,s.Ie(),((e,t)=>(0,l.Fs)(e,s.BC(t)))),de=e=>fe(nt(e)),pe=e=>fe(it(e)),ge=e=>fe(ut(e)),me=e=>fe(ct(e)),be=(0,l.XY)(2,((e,t)=>te([e.initial,t.initial],((r,s,n)=>J.qIB(e.step(r,s,n[0]),(([e,s,i])=>J.TjK(t.step(r,s,n[1]),(([t,r,s])=>B.$L(i)||B.$L(s)?[[e,t],r,B.Vw]:[[e,t],r,B.c3((0,l.Fs)(i.intervals,z.T9(s.intervals)))])))))))),ye=(0,l.XY)(2,((e,t)=>_e(e,(e=>J.OH5((()=>t(e))))))),Fe=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.kyh(e.step(r,s,n),t))))),_e=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(t(s),(t=>e.step(r,t,n))))))),ve=e=>{const t=F(e)?a.pG(e):(e=>{const t=e.split(" ").filter(m.J_);if(5!==t.length)return a.kb(I("Invalid number of segments in cron expression",e));const[r,s,n,i,u]=t;return a.Q7({minutes:X(r,N),hours:X(s,T),days:X(n,E),months:X(i,O),weekdays:X(u,x)}).pipe(a.Tj((e=>(({days:e,hours:t,minutes:r,months:s,weekdays:n})=>{const i=Object.create(y);return i.minutes=new Set(o.di(r,d.pH)),i.hours=new Set(o.di(t,d.pH)),i.days=new Set(o.di(e,d.pH)),i.months=new Set(o.di(s,d.pH)),i.weekdays=new Set(o.di(n,d.pH)),i})(e))))})(e);return te([!0,[Number.MIN_SAFE_INTEGER,0,0]],((e,r,[s,n])=>{if(e<n[0])return J.PyW([[!1,n],[n[1],n[2]],B.ob(q.L8(n[1],n[2]))]);if(a.OC(t))return J.F_Q(t.left);const i=t.right,o=new Date(e);let u;u=s&&((e,t)=>{const{days:r,hours:s,minutes:n,months:i,weekdays:o}=e,a=t.getMinutes();if(0!==n.size&&!n.has(a))return!1;const u=t.getHours();if(0!==s.size&&!s.has(u))return!1;const c=t.getMonth()+1;if(0!==i.size&&!i.has(c))return!1;if(0===r.size&&0===o.size)return!0;const l=t.getDate();if(0===o.size)return r.has(l);const h=t.getDay();return 0===r.size?o.has(h):r.has(l)||o.has(h)})(i,o)?e:((e,t)=>{const{days:r,hours:s,minutes:n,months:i,weekdays:o}=e,a=0!==n.size,u=0!==s.size,c=0!==r.size,l=0!==i.size,h=0!==o.size,f=t?new Date(t.getTime()):new Date;f.setMinutes(f.getMinutes()+1),f.setSeconds(0),f.setMilliseconds(0);const d=new Date(f).setFullYear(f.getFullYear()+8);for(;f.getTime()<=d;)if(!l||i.has(f.getMonth()+1)){if(c&&h){if(!r.has(f.getDate())&&!o.has(f.getDay())){f.setDate(f.getDate()+1),f.setHours(0),f.setMinutes(0);continue}}else if(c){if(!r.has(f.getDate())){f.setDate(f.getDate()+1),f.setHours(0),f.setMinutes(0);continue}}else if(h&&!o.has(f.getDay())){f.setDate(f.getDate()+1),f.setHours(0),f.setMinutes(0);continue}if(!u||s.has(f.getHours())){if(!a||n.has(f.getMinutes()))return f;f.setMinutes(f.getMinutes()+1)}else f.setHours(f.getHours()+1),f.setMinutes(0)}else f.setMonth(f.getMonth()+1),f.setDate(1),f.setHours(0),f.setMinutes(0);throw new Error("Unable to find next cron date")})(i,o).getTime();const c=zt(u),l=Lt(u),h=q.L8(c,l);return J.PyW([[!1,[u,c,l]],[c,l],B.ob(h)])}))},Ie=e=>te([Number.NEGATIVE_INFINITY,0],((t,r,s)=>{if(!Number.isInteger(e)||e<1||31<e)return J.Kbz((()=>new J.nAV(`Invalid argument in: dayOfMonth(${e}). Must be in range 1...31`)));const n=s[1],i=Zt(t,e,0===n),o=Kt(i),a=Ut(i),u=q.L8(o,a);return J.PyW([[a,n+1],n,B.ob(u)])})),Se=e=>te([Number.MIN_SAFE_INTEGER,0],((t,r,s)=>{if(!Number.isInteger(e)||e<1||7<e)return J.Kbz((()=>new J.nAV(`Invalid argument in: dayOfWeek(${e}). Must be in range 1 (Monday)...7 (Sunday)`)));const n=s[1],i=Gt(t,e,0===n),o=Kt(i),a=Ut(i),u=q.L8(o,a);return J.PyW([[a,n+1],n,B.ob(u)])})),we=(0,l.XY)(2,((e,t)=>ke(e,(e=>J.OH5((()=>t(e))))))),ke=(0,l.XY)(2,((e,t)=>Qe(e,((e,r)=>t(r))))),Ye=e=>re(e,(e=>e)),Ne=e=>te(e.initial,((t,r,s)=>(0,l.Fs)(e.step(t,r,s),J.qIB((([e,r,s])=>B.$L(s)?J.PyW([e,D.v_,s]):J.PyW([e,D.ne(z.ni(s.intervals)-t),s])))))),Te=(0,l.XY)(2,((e,{onInput:t,onOutput:r})=>Ke(ye(e,t),r))),Ee=(0,l.XY)(2,((e,{onInput:t,onOutput:r})=>Ue(_e(e,t),r))),Oe=e=>(0,l.Fs)($.L8([P.dv(),e.initial]),J.TjK((t=>new ee(e,t)))),xe=e=>{const t=D.D4(e),r=D.kE(t);return te(!0,((e,s,n)=>J.PyW(n?[!1,t,B.ob(q.Pl(e+r))]:[!1,D.v_,B.Vw])))},Xe=(0,l.XY)(2,((e,t)=>kt(e,t))),Re=(0,l.XY)(3,((e,t,r)=>Yt(e,t,r))),Me=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([e,r,s])=>B.$L(s)?J.as(t,[e,r,s]):J.PyW([e,r,s]))))))),Ae=(e,t=2)=>{const r=D.D4(e);return Ye(Ke(br,(e=>D.Hn(r,Math.pow(t,e)))))},De=e=>{const t=D.D4(e);return Ye((0,l.Fs)(wt([t,t],(([e,t])=>[t,D.cz(e,t)])),Ke((e=>e[0]))))},Pe=e=>{const t=D.D4(e),r=D.kE(t);return te([P.dv(),0],((e,s,[n,i])=>J.OH5((()=>{switch(n._tag){case"None":return[[P.zN([e,e+r]),i+1],i,B.ob(q.Pl(e+r))];case"Some":{const[s,o]=n.value,a=e>o+r,c=u.aI(t,D.v_)?t:D.ne(r-(e-s)%r),l=u.aI(c,D.v_)?t:c,h=a?e:e+D.kE(l);return[[P.zN([s,h]),i+1],i,B.ob(q.Pl(h))]}}}))))},Ce=e=>xe(e),je=(e,...t)=>te([[e,...t].map((e=>D.D4(e))),!0],((e,t,[r,s])=>J.OH5((()=>{if(s){const t=r[0],s=q.Pl(e+D.kE(t));return r.length>=2?[[r.slice(1),!0],t,B.ob(s)]:[[[t,...r.slice(1)],!1],t,B.ob(s)]}return[[r,!1],D.v_,B.Vw]})))),We=e=>Ke(qe(),e),Be=e=>te([Number.NEGATIVE_INFINITY,0],((t,r,s)=>{if(!Number.isInteger(e)||e<0||23<e)return J.Kbz((()=>new J.nAV(`Invalid argument in: hourOfDay(${e}). Must be in range 0...23`)));const n=s[1],i=Vt(t,e,0===n),o=Jt(i),a=$t(i),u=q.L8(o,a);return J.PyW([[a,n+1],n,B.ob(u)])})),qe=()=>te(void 0,((e,t,r)=>J.PyW([r,t,B.ob(q.Pl(e))]))),ze=(0,l.XY)(2,((e,t)=>Le(e,t,z.y$))),Le=(0,l.XY)(3,((e,t,r)=>te([e.initial,t.initial],((s,n,i)=>(0,l.Fs)(J.OYO(e.step(s,n,i[0]),t.step(s,n,i[1]),((e,t)=>[e,t])),J.qIB((([[s,i,o],[a,u,c]])=>B.Wk(o)&&B.Wk(c)?He(e,t,n,s,i,o.intervals,a,u,c.intervals,r):J.PyW([[s,a],[i,u],B.Vw])))))))),He=(e,t,r,s,n,i,o,a,u,c)=>{const h=c(i,u);return z.J_(h)?J.PyW([[s,o],[n,a],B.c3(h)]):(0,l.Fs)(i,z.Xe(u))?J.qIB(e.step(z._N(i),r,s),(([s,n,i])=>B.$L(i)?J.PyW([[s,o],[n,a],B.Vw]):He(e,t,r,s,n,i.intervals,o,a,u,c))):J.qIB(t.step(z._N(u),r,o),(([o,a,u])=>B.$L(u)?J.PyW([[s,o],[n,a],B.Vw]):He(e,t,r,s,n,i,o,a,u.intervals,c)))},Je=e=>$e(e,{min:.8,max:1.2}),$e=(0,l.XY)(2,((e,t)=>{const{max:r,min:s}=Object.assign({min:.8,max:1.2},t);return ke(e,(e=>J.TjK(W,(t=>{const n=D.kE(e),i=n*s*(1-t)+n*r*t;return D.ne(i)}))))})),Ve=e=>{const t=D.D4(e);return Ye(Ke(br,(e=>D.Hn(t,e+1))))},Ke=(0,l.XY)(2,((e,t)=>Ue(e,(e=>J.OH5((()=>t(e))))))),Ue=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([e,r,s])=>J.TjK(t(r),(t=>[e,t,s])))))))),Ge=e=>te([Number.MIN_SAFE_INTEGER,0],((t,r,s)=>{if(!Number.isInteger(e)||e<0||59<e)return J.Kbz((()=>new J.nAV(`Invalid argument in: minuteOfHour(${e}). Must be in range 0...59`)));const n=s[1],i=Ht(t,e,0===n),o=zt(i),a=Lt(i),u=q.L8(o,a);return J.PyW([[a,n+1],n,B.ob(u)])})),Ze=(0,l.XY)(2,((e,t)=>Qe(e,((e,r)=>J.OH5((()=>t(e,r))))))),Qe=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([e,s,n])=>{if(B.$L(n))return J.PyW([e,s,n]);const i=n.intervals,o=q.Ej(q.L8(r,z.ni(i)));return J.TjK(t(s,o),(t=>{const n=D.D4(t),o=z.ni(i),a=r+D.kE(n),u=a-o,c=Math.max(0,z._N(i)+u),l=q.L8(a,c);return[e,s,B.ob(l)]}))})))))),et=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([e,r,s])=>J.as(t(r,s),[e,r,s]))))))),tt=e=>te(e.initial,((t,r,s)=>(0,l.Fs)(e.step(t,r,s),J.TjK((([e,t,s])=>[e,r,s]))))),rt=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.PpN(e.step(r,s,n),t))))),st=(0,l.XY)(3,((e,t,r)=>te(e.initial,((s,n,o)=>J.d_m((a=>J.PpN(e.step(s,n,o),i.WQ(a,t,r)))))))),nt=e=>Nt(qe(),e),it=e=>Tt(qe(),e),ot=e=>Et(Ke(qe(),e),P.Ru),at=e=>{const t=D.D4(e);return Mt(mr,(e=>D.Xe(e,t)))},ut=e=>Xt(qe(),e),ct=e=>Rt(qe(),e),lt=e=>Mt(br,(t=>t<e)),ht=(0,l.XY)(3,((e,t,r)=>ft(e,t,((e,t)=>J.OH5((()=>r(e,t))))))),ft=(0,l.XY)(3,((e,t,r)=>te([e.initial,t],((t,s,[n,i])=>J.qIB(e.step(t,s,n),(([e,t,s])=>B.$L(s)?J.PyW([[e,i],i,s]):J.TjK(r(i,t),(t=>[[e,t],i,s])))))))),dt=e=>ht(e,0,((e,t)=>e+1)),pt=(0,l.XY)(2,((e,t)=>{const r=D.D4(t);return(0,l.Fs)(e,ze(mr),gt((([,e])=>D.An(e,r))),Ke((e=>e[0])))})),gt=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.qIB(e.step(r,s,n),(([n,i,o])=>t(i)?e.step(r,s,e.initial):J.PyW([n,i,o]))))))),mt=(0,l.XY)(3,((e,t,r)=>(0,l.Fs)(bt(e,t,s.Ts(r),e.initial,s.Ie()),J.TjK((e=>s.BE(e)))))),bt=(e,t,r,n,i)=>{if(!s.J_(r))return J.PyW(i);const o=s.v4(r),a=s.Rx(r);return J.qIB(e.step(t,o,n),(([t,r,n])=>B.$L(n)?J.OH5((()=>(0,l.Fs)(i,s.Hs(r)))):bt(e,z.ni(n.intervals),a,t,s.Hs(i,r))))},yt=e=>te([Number.NEGATIVE_INFINITY,0],((t,r,s)=>{if(!Number.isInteger(e)||e<0||59<e)return J.Kbz((()=>new J.nAV(`Invalid argument in: secondOfMinute(${e}). Must be in range 0...59`)));const n=s[1],i=qt(t,e,0===n),o=Wt(i),a=Bt(i),u=q.L8(o,a);return J.PyW([[a,n+1],n,B.ob(u)])})),Ft=e=>re(br,(()=>e)),_t=e=>Ke(br,(()=>e)),vt=e=>Ke(br,e),It=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.aNH(t(s),e.step(r,s,n)))))),St=(0,l.XY)(2,((e,t)=>te(e.initial,((r,s,n)=>J.Mim(e.step(r,s,n),(([,e])=>t(e))))))),wt=(e,t)=>te(e,((e,r,s)=>J.OH5((()=>[t(s),s,B.ob(q.Pl(e))])))),kt=(0,l.XY)(2,((e,t)=>Yt(e,t,z.KC))),Yt=(0,l.XY)(3,((e,t,r)=>te([e.initial,t.initial],((s,n,i)=>J.OYO(e.step(s,n,i[0]),t.step(s,n,i[1]),(([e,t,s],[n,i,o])=>{if(B.$L(s)&&B.$L(o))return[[e,n],[t,i],B.Vw];if(B.$L(s)&&B.Wk(o))return[[e,n],[t,i],B.c3(o.intervals)];if(B.Wk(s)&&B.$L(o))return[[e,n],[t,i],B.c3(s.intervals)];if(B.Wk(s)&&B.Wk(o)){const a=r(s.intervals,o.intervals);return[[e,n],[t,i],B.c3(a)]}throw new Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),Nt=(0,l.XY)(2,((e,t)=>ce(e,((e,r)=>!t(e))))),Tt=(0,l.XY)(2,((e,t)=>le(e,((e,r)=>H.ze(t(e)))))),Et=(0,l.XY)(2,((e,t)=>ce(e,((e,r)=>!t(r))))),Ot=(0,l.XY)(2,((e,t)=>le(e,((e,r)=>H.ze(t(r)))))),xt=(0,l.XY)(2,((e,t)=>Pt(e,at(t)))),Xt=(0,l.XY)(2,((e,t)=>ce(e,((e,r)=>t(e))))),Rt=(0,l.XY)(2,((e,t)=>le(e,((e,r)=>t(e))))),Mt=(0,l.XY)(2,((e,t)=>ce(e,((e,r)=>t(r))))),At=(0,l.XY)(2,((e,t)=>le(e,((e,r)=>t(r))))),Dt=e=>{const t=D.D4(e),r=D.kE(t);return te([P.dv(),0],((e,t,[s,n])=>{switch(s._tag){case"None":return J.PyW([[P.zN(e),n+1],n,B.ob(q.Pl(e+r))]);case"Some":return J.PyW([[P.zN(s.value),n+1],n,B.ob(q.Pl(e+(r-(e-s.value)%r)))])}}))},Pt=(0,l.XY)(2,((e,t)=>Ke(ze(e,t),(e=>e[0])))),Ct=(0,l.XY)(2,((e,t)=>Ke(ze(e,t),(e=>e[1])))),jt=(0,l.XY)(3,((e,t,r)=>Ke(ze(e,t),(([e,t])=>r(e,t))))),Wt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0).getTime()},Bt=e=>{const t=new Date(Wt(e));return t.setSeconds(t.getSeconds()+1)},qt=(e,t,r)=>{const s=new Date(e);if(s.getSeconds()===t&&r)return e;if(s.getSeconds()<t)return s.setSeconds(t);const n=new Date(s.setSeconds(t));return n.setTime(n.getTime()+6e4)},zt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0).getTime()},Lt=e=>{const t=new Date(zt(e));return t.setMinutes(t.getMinutes()+1)},Ht=(e,t,r)=>{const s=new Date(e);if(s.getMinutes()===t&&r)return e;if(s.getMinutes()<t)return s.setMinutes(t);const n=new Date(s.setMinutes(t));return n.setTime(n.getTime()+36e5)},Jt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0).getTime()},$t=e=>{const t=new Date(Jt(e));return t.setHours(t.getHours()+1)},Vt=(e,t,r)=>{const s=new Date(e);if(s.getHours()===t&&r)return e;if(s.getHours()<t)return s.setHours(t);const n=new Date(s.setHours(t));return n.setTime(n.getTime()+864e5)},Kt=e=>{const t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime()},Ut=e=>{const t=new Date(Kt(e));return t.setDate(t.getDate()+1)},Gt=(e,t,r)=>{const s=new Date(e);if(s.getDay()===t&&r)return e;const n=(7+t-s.getDay())%7;return s.setDate(s.getDate()+(0===n?7:n))},Zt=(e,t,r)=>{const s=new Date(e);return s.getDate()===t&&r?e:s.getDate()<t?s.setDate(t):Qt(e,t,1)},Qt=(e,t,r)=>{const s=new Date(e),n=new Date(s.setDate(t));if(new Date(n.setMonth(n.getMonth()+r)).getDate()===t){const s=new Date(e),n=new Date(s.setDate(t));return n.setMonth(n.getMonth()+r)}return Qt(e,t,r+1)},er=Symbol.for("effect/Schedule/ScheduleDefect");class tr{error;[er];constructor(e){this.error=e,this[er]=er}}const rr=e=>J.h9N(e,(e=>J.F_Q(new tr(e)))),sr=e=>J.uPo(e,(e=>P.YW(L.I6(e,(e=>{return L.VY(e)&&(t=e.defect,(0,g.i5)(t,er))?P.zN(e.defect):P.dv();var t})),{onNone:()=>J.ATB(e),onSome:e=>J.fJG(e.error)}))),nr=(0,l.XY)(2,((e,t)=>or(e,t,((e,t)=>J.fJG(e))))),ir=(0,l.XY)(2,((e,t)=>{if(K(t))return nr(e,t);const r=t.schedule??tt(br),s=t.while?Rt(r,(e=>{const r=t.while(e);return"boolean"==typeof r?J.PyW(r):rr(r)})):r,n=t.until?Tt(s,(e=>{const r=t.until(e);return"boolean"==typeof r?J.PyW(r):rr(r)})):s,i=t.times?ze(n,lt(t.times)):n;return sr(nr(e,i))})),or=(0,l.XY)(3,((e,t,r)=>J.qIB(Oe(t),(t=>J.tvg(e,{onFailure:e=>r(e,P.dv()),onSuccess:s=>ar(e,t,r,s)}))))),ar=(e,t,r,s)=>J.tvg(t.next(s),{onFailure:()=>J.QgK(t.last),onSuccess:s=>J.tvg(e,{onFailure:e=>r(e,P.zN(s)),onSuccess:s=>ar(e,t,r,s)})}),ur=(0,l.XY)(2,((e,t)=>lr(e,t,((e,t)=>J.fJG(e))))),cr=(0,l.XY)(2,((e,t)=>{if(K(t))return ur(e,t);const r=t.schedule??br,s=t.while?Rt(r,(e=>{const r=t.while(e);return"boolean"==typeof r?J.PyW(r):rr(r)})):r,n=t.until?Tt(s,(e=>{const r=t.until(e);return"boolean"==typeof r?J.PyW(r):rr(r)})):s,i=t.times?ze(n,lt(t.times)):n;return sr(ur(e,i))})),lr=(0,l.XY)(3,((e,t,r)=>J.qIB(Oe(t),(t=>hr(e,t,r))))),hr=(e,t,r)=>J.h9N(e,(s=>J.tvg(t.next(s),{onFailure:()=>(0,l.Fs)(t.last,J.QgK,J.qIB((e=>r(s,e)))),onSuccess:()=>hr(e,t,r)}))),fr=(0,l.XY)(2,((e,t)=>dr(e,void 0,t))),dr=(0,l.XY)(3,((e,t,r)=>J.qIB(Oe(r),(r=>pr(e,t,r))))),pr=(e,t,r)=>J.tvg(r.next(t),{onFailure:()=>J.QgK(r.last),onSuccess:()=>J.qIB(e,(t=>pr(e,t,r)))}),gr=wt(0,(e=>e+1)),mr=te(P.dv(),((e,t,r)=>{switch(r._tag){case"None":return J.PyW([P.zN(e),D.v_,B.ob(q.Pl(e))]);case"Some":return J.PyW([P.zN(r.value),D.ne(e-r.value),B.ob(q.Pl(e))])}})),br=wt(0,(e=>e+1)),yr=ae(lt(1)),Fr=ae(lt(0))},38961:(e,t,r)=>{r.d(t,{B:()=>s});class s{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new s(this.self)}}},48960:(e,t,r)=>{r.d(t,{A2:()=>jt,AT:()=>Se,AU:()=>Te,Cm:()=>ae,DY:()=>N,E1:()=>Xe,Ef:()=>ot,FF:()=>Je,F_:()=>G,GS:()=>Z,H0:()=>it,HV:()=>pt,H_:()=>We,Hd:()=>le,Hr:()=>U,IH:()=>fe,K7:()=>V,Kb:()=>Q,NW:()=>vt,N_:()=>Wt,Nh:()=>P,O4:()=>St,OH:()=>At,OO:()=>R,OY:()=>Lt,PB:()=>A,PD:()=>ct,Pp:()=>It,Py:()=>Xt,R3:()=>De,S_:()=>Tt,Sh:()=>st,Si:()=>_e,TW:()=>S,Tj:()=>mt,U9:()=>Jt,US:()=>Le,Uy:()=>Mt,VQ:()=>xe,WD:()=>Ht,WK:()=>bt,WU:()=>qe,WW:()=>C,Wg:()=>$e,XM:()=>D,Ze:()=>ne,Zg:()=>W,Zm:()=>_t,_O:()=>me,_U:()=>E,a$:()=>Ft,aN:()=>zt,as:()=>T,ay:()=>Vt,bY:()=>se,cs:()=>Et,cz:()=>Rt,d5:()=>ft,d_:()=>ye,fJ:()=>ve,fV:()=>Nt,ft:()=>Be,gJ:()=>ht,gO:()=>Ie,gv:()=>ie,hi:()=>Me,jJ:()=>tt,jZ:()=>te,jj:()=>ue,kB:()=>$t,kR:()=>Ye,l_:()=>Ue,m$:()=>ze,mY:()=>dt,n:()=>Fe,nC:()=>Ne,o6:()=>J,oA:()=>Ct,oU:()=>Ge,pD:()=>He,pV:()=>we,pb:()=>wt,pi:()=>qt,pr:()=>Pt,q$:()=>rt,q0:()=>ee,q5:()=>re,qI:()=>et,qd:()=>ut,rb:()=>K,s:()=>Dt,sx:()=>be,sz:()=>ge,ts:()=>ke,uS:()=>at,uW:()=>q,ul:()=>x,vZ:()=>M,wV:()=>kt,wm:()=>gt,xQ:()=>Yt,xm:()=>yt,xs:()=>L,yU:()=>Bt,ye:()=>pe,zN:()=>j,zQ:()=>$});var s=r(58600),n=r(20634),i=r(28420),o=r(31651),a=r(84073),u=r(55519),c=r(57964),l=r(96949),h=r(61369),f=r(5583),d=r(49942),p=r(77948),g=r(53533),m=r(56572),b=r(80677),y=r(35446),F=r(55040),_=r(83136),v=r(30961),I=r(29064);const S=Symbol.for("effect/Sink"),w={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};class k{channel;[S]=w;constructor(e){this.channel=e}pipe(){return(0,g.t)(this,arguments)}}const Y=e=>(0,m.i5)(e,S),N=e=>new k(I.DY((()=>Pt(e())))),T=(0,h.XY)(2,((e,t)=>(0,h.Fs)(e,mt((()=>t))))),E=()=>new k(O(i.Ie())),O=e=>I.u({onInput:t=>O((0,h.Fs)(e,i.u2(t))),onFailure:I.AT,onDone:()=>I.Py(e)}),x=e=>N((()=>ot(X(e,i.Ie())))),X=(e,t)=>I.u({onInput:r=>{const[s,n]=i.gI(r,e);return s.length<e?X(e-s.length,i.u2(t,s)):i.Im(n)?I.Py(i.u2(t,s)):I.qI(I.M9(n),(()=>I.Py(i.u2(t,s))))},onFailure:I.AT,onDone:()=>I.Py(t)}),R=e=>L(e,{initial:i.Ie(),while:h.ue,body:(e,t)=>(0,h.Fs)(e,i.BC(t))}),M=(e,t)=>(0,h.Fs)(Be(f.Ie(),((r,s)=>(0,h.Fs)(s,i.TS(r,((r,s)=>{const n=e(s),i=(0,h.Fs)(r,f.zy(n))?t((0,h.Fs)(r,f.$v(n)),s):s;return(0,h.Fs)(r,f.hZ(n,i))})))))),A=(e,t,r)=>Je({initial:f.Ie(),maxCost:e,cost:(e,r)=>(0,h.Fs)(e,f.zy(t(r)))?0:1,body:(e,s)=>{const n=t(s),i=(0,h.Fs)(e,f.zy(n))?r((0,h.Fs)(e,f.$v(n)),s):s;return(0,h.Fs)(e,f.hZ(n,i))}}),D=()=>Be(d.Ie(),((e,t)=>(0,h.Fs)(t,i.TS(e,((e,t)=>(0,h.Fs)(e,d.WQ(t))))))),P=e=>Je({initial:d.Ie(),maxCost:e,cost:(e,t)=>d.zy(e,t)?0:1,body:(e,t)=>d.WQ(e,t)}),C=e=>(0,h.Fs)(Te([i.Ie(),!0],(e=>e[1]),(([t,r],s)=>[(0,h.Fs)(t,i.BC(s)),!e(s)])),mt((e=>e[0]))),j=e=>(0,h.Fs)(De([i.Ie(),!0],(e=>e[1]),(([t,r],s)=>(0,h.Fs)(e(s),u.map((e=>[(0,h.Fs)(t,i.BC(s)),!e]))))),mt((e=>e[0]))),W=e=>ot(B(e,i.Ie())),B=(e,t)=>I.$5({onInput:r=>{const[n,o]=(0,h.Fs)(i.h3(r),s.Ln(e));return 0===o.length?B(e,(0,h.Fs)(t,i.u2(i.Iv(n)))):(0,h.Fs)(I.M9(i.Iv(o)),_.aN(I.Py((0,h.Fs)(t,i.u2(i.Iv(n))))))},onFailure:I.fJ,onDone:()=>I.Py(t)}),q=e=>ot(z(e,i.Ie())),z=(e,t)=>I.$5({onInput:r=>(0,h.Fs)(I.uS((0,h.Fs)(r,u.takeWhile(e),u.map(i.Iv))),I.qI((s=>{const n=(0,h.Fs)(r,i.gv(s.length));return i.Im(n)?z(e,(0,h.Fs)(t,i.u2(s))):(0,h.Fs)(I.M9(n),_.aN(I.Py((0,h.Fs)(t,i.u2(s)))))}))),onFailure:I.fJ,onDone:()=>I.Py(t)}),L=(0,h.XY)(2,((e,t)=>{const r=(0,h.Fs)(F.L8(i.Ie()),u.zip(F.L8(!1))),s=(0,h.Fs)(I.uS(r),I.qI((([r,s])=>{const n=I.$5({onInput:e=>(0,h.Fs)(I.M9(e),I.qI((()=>n))),onFailure:I.fJ,onDone:e=>(0,h.Fs)(I.uS(F.hZ(s,!0)),_.as(e))});return(0,h.Fs)(n,I.WK(_.yO(r)),I.WK(H(e,r,s,t.initial,t.while,t.body)))})));return new k(s)})),H=(e,t,r,s,n,o)=>(0,h.Fs)(Pt(e),_.$t,_.JE({onFailure:I.fJ,onSuccess:([a,u])=>n(u)?(0,h.Fs)(I.uS(F.hZ(t,i.Bq(a))),I.qI((()=>(0,h.Fs)(I.uS(F.Jt(r)),I.qI((c=>{const l=o(s,u);return c?(0,h.Fs)(I.M9(i.Bq(a)),_.as(l)):H(e,t,r,l,n,o)})))))):(0,h.Fs)(I.M9(i.Bq(a)),_.as(s))})),J=e=>new k((0,h.Fs)(I.ye(Pt(e)),_.Tj((([e,t])=>[t,i.Bq(e)])))),$=(0,h.XY)(2,((e,t)=>(0,h.Fs)(e,K(i.Tj(t))))),V=(0,h.XY)(2,((e,t)=>U(e,(e=>u.map(u.forEach(e,(e=>t(e))),i.Iv))))),K=(0,h.XY)(2,((e,t)=>{const r=I.$5({onInput:e=>(0,h.Fs)(I.M9(t(e)),I.qI((()=>r))),onFailure:I.fJ,onDone:I.Py});return new k((0,h.Fs)(r,I.WK(Pt(e))))})),U=(0,h.XY)(2,((e,t)=>{const r=I.$5({onInput:e=>(0,h.Fs)(I.uS(t(e)),I.qI(I.M9),I.qI((()=>r))),onFailure:I.fJ,onDone:I.Py});return new k((0,h.Fs)(r,_.tw(Pt(e))))})),G=e=>Se(n.F_(e)),Z=e=>Se(n.F_(new n.Al(e))),Q=e=>we((()=>n.F_(e()))),ee=(0,h.XY)(2,((e,t)=>mt($(e,t.onInput),t.onDone))),te=(0,h.XY)(2,((e,t)=>bt(V(e,t.onInput),t.onDone))),re=(0,h.XY)(2,((e,t)=>mt(K(e,t.onInput),t.onDone))),se=(0,h.XY)(2,((e,t)=>bt(U(e,t.onInput),t.onDone))),ne=new k(_.Ze(_.As())),ie=e=>N((()=>new k(oe(e)))),oe=e=>I.$5({onInput:t=>{const r=(0,h.Fs)(t,i.gv(e)),s=Math.max(e-t.length,0);return i.Im(t)||s>0?oe(s):(0,h.Fs)(I.M9(r),_.aN(_.As()))},onFailure:I.fJ,onDone:()=>I.rI}),ae=e=>new k((0,h.Fs)(Pt(le((t=>!e(t)))),_.tw(Pt(ie(1))))),ue=e=>N((()=>new k(ce(e)))),ce=e=>I.$5({onInput:t=>(0,h.Fs)(t,u.dropUntil(e),u.map((t=>0===t.length?ce(e):(0,h.Fs)(I.M9(i.Iv(t)),_.aN(_.As())))),_.oA),onFailure:I.fJ,onDone:()=>I.rI}),le=e=>new k(he(e)),he=e=>I.$5({onInput:t=>{const r=(0,h.Fs)(t,i.Hd(e));return i.Im(r)?he(e):(0,h.Fs)(I.M9(r),_.aN(_.As()))},onFailure:I.fJ,onDone:I.B6}),fe=e=>N((()=>new k(de(e)))),de=e=>I.$5({onInput:t=>(0,h.Fs)(t,u.dropWhile(e),u.map((t=>0===t.length?de(e):(0,h.Fs)(I.M9(i.Iv(t)),_.aN(_.As())))),_.oA),onFailure:I.fJ,onDone:()=>I.rI}),pe=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(e,Pt,_.ye(t))))),ge=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(e,Pt,I.sz(t))))),me=()=>at(u.context()),be=e=>(0,h.Fs)(me(),mt(e)),ye=e=>(0,h.Fs)(me(),bt(e)),Fe=e=>new k(_.oA((0,h.Fs)(u.contextWith((t=>Pt(e(t))))))),_e=e=>Te(!0,h.D_,((t,r)=>t&&e(r))),ve=e=>new k(I.fJ(e)),Ie=e=>new k(I.gO(e)),Se=e=>new k(I.AT(e)),we=e=>new k(I.pV(e)),ke=e=>t=>(0,h.Fs)(t,K(i.pb(e))),Ye=(0,h.XY)(2,((e,t)=>U(e,(e=>u.map(u.filter(e,t),i.Iv))))),Ne=(0,h.XY)(2,((e,t)=>{const r=(0,h.Fs)(I.uS((0,h.Fs)(F.L8(i.Ie()),u.zip(F.L8(!1)))),I.qI((([r,s])=>{const n=I.$5({onInput:e=>(0,h.Fs)(I.M9(e),I.qI((()=>n))),onFailure:I.fJ,onDone:e=>(0,h.Fs)(I.uS(F.hZ(s,!0)),_.as(e))}),o=_.JE(I.ye(Pt(e)),{onFailure:I.fJ,onSuccess:([e,n])=>(0,h.Fs)(I.uS(t(n)),I.qI((t=>(0,h.Fs)(I.uS(F.hZ(r,i.Bq(e))),_.aN((0,h.Fs)(I.uS(F.Jt(s)),I.qI((r=>t?(0,h.Fs)(I.M9(i.Bq(e)),_.as(p.zN(n))):r?(0,h.Fs)(I.M9(i.Bq(e)),_.as(p.dv())):o))))))))});return(0,h.Fs)(n,I.WK(_.yO(r)),I.WK(o))})));return new k(r)})),Te=(e,t,r)=>N((()=>new k(Ee(e,t,r)))),Ee=(e,t,r)=>t(e)?I.$5({onInput:s=>{const[n,o]=Oe(e,s,t,r,0,s.length);return i.J_(o)?(0,h.Fs)(I.M9(o),_.as(n)):Ee(n,t,r)},onFailure:I.fJ,onDone:()=>I.B6(e)}):I.B6(e),Oe=(e,t,r,s,n,o)=>{if(n===o)return[e,i.Ie()];const a=s(e,(0,h.Fs)(t,i.$v(n)));return r(a)?Oe(a,t,r,s,n+1,o):[a,(0,h.Fs)(t,i.gv(n+1))]},xe=(0,h.XY)(2,((e,t)=>{const r=(0,h.Fs)(Pt(e),I.ye,_.JE({onFailure:e=>Pt(t.onFailure(e)),onSuccess:([e,r])=>I.DY((()=>{const s={ref:(0,h.Fs)(e,i.pb(i.J_))},n=(0,h.Fs)(I.OH((()=>{const e=s.ref;return s.ref=i.Ie(),e})),I.qI((e=>_.xs(e)))),o=_.As(),a=(0,h.Fs)(n,_.aN(o),I.WK(Pt(t.onSuccess(r))));return I.qI(I.ye(a),(([e,t])=>(0,h.Fs)(I.Py(s.ref),I.qI(_.xs),_.aN(_.xs(e)),_.as(t))))}))}));return new k(r)})),Xe=(e,t,r)=>N((()=>new k(Re(e,t,r)))),Re=(e,t,r)=>t(e)?I.$5({onInput:s=>Re(r(e,s),t,r),onFailure:I.fJ,onDone:()=>I.B6(e)}):I.B6(e),Me=(e,t,r)=>N((()=>new k(Ae(e,t,r)))),Ae=(e,t,r)=>t(e)?I.$5({onInput:s=>(0,h.Fs)(I.uS(r(e,s)),I.qI((e=>Ae(e,t,r)))),onFailure:I.fJ,onDone:()=>I.B6(e)}):I.B6(e),De=(e,t,r)=>N((()=>new k(Pe(e,t,r)))),Pe=(e,t,r)=>t(e)?I.$5({onInput:s=>(0,h.Fs)(I.uS(Ce(e,s,t,r)),I.qI((([e,s])=>(0,h.Fs)(s,p.YW({onNone:()=>Pe(e,t,r),onSome:t=>(0,h.Fs)(I.M9(t),_.as(e))}))))),onFailure:I.fJ,onDone:()=>I.B6(e)}):I.B6(e),Ce=(e,t,r,s)=>je(e,t,0,t.length,r,s),je=(e,t,r,s,n,o)=>r===s?u.succeed([e,p.dv()]):(0,h.Fs)(o(e,(0,h.Fs)(t,i.$v(r))),u.flatMap((e=>n(e)?je(e,t,r+1,s,n,o):u.succeed([e,p.zN((0,h.Fs)(t,i.gv(r+1)))])))),We=(e,t)=>dt(Te(e,h.ue,t)),Be=(e,t)=>Xe(e,h.ue,t),qe=(e,t)=>dt(Me(e,h.ue,t)),ze=(e,t)=>De(e,h.ue,t),Le=(e,t,r)=>(0,h.Fs)(Te([e,0],(e=>e[1]<t),(([e,t],s)=>[r(e,s),t+1])),mt((e=>e[0]))),He=(e,t,r)=>(0,h.Fs)(De([e,0],(e=>e[1]<t),(([e,t],s)=>(0,h.Fs)(r(e,s),u.map((e=>[e,t+1]))))),mt((e=>e[0]))),Je=e=>$e({...e,decompose:i.of}),$e=e=>N((()=>new k(Ve(e.initial,0,!1,e.maxCost,e.cost,e.decompose,e.body)))),Ve=(e,t,r,s,n,o,a)=>I.$5({onInput:u=>{const[c,l,f,d]=Ke(u,0,e,t,r,s,n,o,a);return i.J_(d)?(0,h.Fs)(I.M9(d),_.aN(I.B6(c))):t>s?I.B6(c):Ve(c,l,f,s,n,o,a)},onFailure:I.fJ,onDone:()=>I.B6(e)}),Ke=(e,t,r,s,n,o,a,u,c)=>{if(t===e.length)return[r,s,n,i.Ie()];const l=(0,h.Fs)(e,i.$v(t)),f=s+a(r,l);if(f<=o)return Ke(e,t+1,c(r,l),f,!0,o,a,u,c);const d=u(l);if(d.length<=1&&!n)return[c(r,l),f,!0,(0,h.Fs)(e,i.gv(t+1))];if(d.length<=1&&n)return[r,s,n,(0,h.Fs)(e,i.gv(t))];const p=(0,h.Fs)(d,i.u2((0,h.Fs)(e,i.gv(t+1))));return Ke(p,0,r,s,n,o,a,u,c)},Ue=e=>N((()=>new k(Ze(e.initial,e.maxCost,e.cost,e.decompose,e.body,0,!1)))),Ge=e=>Ue({...e,decompose:e=>u.succeed(i.of(e))}),Ze=(e,t,r,s,n,o,a)=>I.$5({onInput:u=>(0,h.Fs)(I.uS(Qe(e,t,r,s,n,u,a,o,0)),I.qI((([e,a,u,c])=>i.J_(c)?(0,h.Fs)(I.M9(c),_.aN(I.B6(e))):o>t?I.B6(e):Ze(e,t,r,s,n,a,u)))),onFailure:I.fJ,onDone:()=>I.B6(e)}),Qe=(e,t,r,s,n,o,a,c,l)=>{if(l===o.length)return u.succeed([e,c,a,i.Ie()]);const f=(0,h.Fs)(o,i.$v(l));return(0,h.Fs)(r(e,f),u.map((e=>c+e)),u.flatMap((d=>d<=t?(0,h.Fs)(n(e,f),u.flatMap((e=>Qe(e,t,r,s,n,o,!0,d,l+1)))):(0,h.Fs)(s(f),u.flatMap((p=>{if(p.length<=1&&!a)return(0,h.Fs)(n(e,f),u.map((e=>[e,d,!0,(0,h.Fs)(o,i.gv(l+1))])));if(p.length<=1&&a)return u.succeed([e,c,a,(0,h.Fs)(o,i.gv(l))]);const g=(0,h.Fs)(p,i.u2((0,h.Fs)(o,i.gv(l+1))));return Qe(e,t,r,s,n,g,a,c,0)}))))))},et=(0,h.XY)(2,((e,t)=>xe(e,{onFailure:ve,onSuccess:t}))),tt=e=>{const t=I.u({onInput:r=>(0,h.Fs)(I.uS(u.forEach(r,(t=>e(t)),{discard:!0})),I.qI((()=>t))),onFailure:I.AT,onDone:()=>I.rI});return new k(t)},rt=e=>{const t=I.u({onInput:r=>(0,h.Fs)(I.uS(e(r)),I.qI((()=>t))),onFailure:I.AT,onDone:()=>I.rI});return new k(t)},st=e=>{const t=I.u({onInput:r=>nt(e,r,0,r.length,t),onFailure:I.AT,onDone:()=>I.rI});return new k(t)},nt=(e,t,r,s,n)=>r===s?n:(0,h.Fs)(I.uS(e((0,h.Fs)(t,i.$v(r)))),I.qI((o=>o?nt(e,t,r+1,s,n):I.M9((0,h.Fs)(t,i.gv(r))))),_.h9((e=>(0,h.Fs)(I.M9((0,h.Fs)(t,i.gv(r))),_.aN(I.fJ(e)))))),it=e=>{const t=I.$5({onInput:r=>(0,h.Fs)(I.uS(e(r)),I.qI((e=>e?t:I.rI))),onFailure:I.fJ,onDone:()=>I.rI});return new k(t)},ot=e=>new k(e),at=e=>new k(I.uS(e)),ut=(e,t)=>ht(e,t),ct=e=>new k(_.A2((0,h.Fs)(e,u.map(lt)))),lt=e=>I.$5({onInput:t=>_.JE(I.uS(e(p.zN(t))),{onFailure:([e,t])=>c.YW(e,{onLeft:e=>(0,h.Fs)(I.M9(t),_.aN(I.fJ(e))),onRight:e=>(0,h.Fs)(I.M9(t),_.aN(I.B6(e)))}),onSuccess:()=>lt(e)}),onFailure:I.fJ,onDone:()=>_.JE(I.uS(e(p.dv())),{onFailure:([e,t])=>c.YW(e,{onLeft:e=>(0,h.Fs)(I.M9(t),_.aN(I.fJ(e))),onRight:e=>(0,h.Fs)(I.M9(t),_.aN(I.B6(e)))}),onSuccess:()=>I.uS(u.dieMessage("BUG: Sink.fromPush - please report an issue at https://github.com/Effect-TS/effect/issues"))})}),ht=(e,t)=>t?.shutdown?jt(u.map(u.acquireRelease(u.succeed(e),y.n_),ht)):rt((t=>(0,h.Fs)(y.iI(e,t)))),ft=()=>Te(p.dv(),p.$I,((e,t)=>p.YW(e,{onNone:()=>p.zN(t),onSome:()=>e}))),dt=e=>new k(_.Ze(Pt(e))),pt=()=>Be(p.dv(),((e,t)=>p.NW(i.HV(t),(()=>e)))),gt=e=>new k(I.DY((()=>I.M9(e)))),mt=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),_.Tj(t))))),bt=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),_.WK(t))))),yt=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),_.xm(t))))),Ft=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),_.Hq(i.Tj(t)))))),_t=at(u.never),vt=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),_.NW((()=>Pt(t()))))))),It=(0,h.XY)(2,((e,t)=>new k((0,h.Fs)(Pt(e),I.Pp(t))))),St=(0,h.XY)(2,((e,t)=>(0,h.Fs)(e,wt(t),mt(c.h1)))),wt=(0,h.XY)((e=>Y(e[1])),((e,t,r)=>kt(e,{other:t,onSelfDone:e=>v.RS(u.map(e,c.kb)),onOtherDone:e=>v.RS(u.map(e,c.pG)),capacity:r?.capacity??16}))),kt=(0,h.XY)(2,((e,t)=>{const r=u.gen((function*(r){const s=yield*r(b.Mm(t?.capacity??16)),n=yield*r(_.sw(s)),i=yield*r(_.sw(s)),o=_.bk(s),a=(0,h.Fs)(n,I.WK(Pt(e)),_.XQ({other:(0,h.Fs)(i,I.WK(Pt(t.other))),onSelfDone:t.onSelfDone,onOtherDone:t.onOtherDone})),c=_.XQ(o,{other:a,onSelfDone:e=>v.jD((e=>u.suspend((()=>e)))),onOtherDone:e=>v.RS(u.suspend((()=>e)))});return new k(c)}));return jt(r)})),Yt=(0,h.XY)(2,((e,t)=>(0,h.Fs)(e,Nt(t,h.D_)))),Nt=(0,h.XY)(3,((e,t,r)=>{const s=(0,h.Fs)(e,Pt,_.h9((e=>p.YW(t(e),{onNone:()=>I.pV((()=>n.F_(r(e)))),onSome:I.fJ}))));return new k(s)})),Tt=e=>Te(!1,(e=>!e),((t,r)=>t||e(r))),Et=(0,h.XY)(2,((e,t)=>{const r=(0,h.Fs)(I.uS(F.L8(i.Ie())),I.qI((r=>(0,h.Fs)(Ot(!1,r,t),_.tw(Pt(e)),I.ye,I.qI((([e,t])=>(0,h.Fs)(I.uS(F.Jt(r)),I.qI((r=>(0,h.Fs)(I.M9((0,h.Fs)(r,i.u2(i.Bq(e)))),_.aN(I.Py(t))))))))))));return new k(r)})),Ot=(e,t,r)=>I.u({onInput:s=>{if(i.Im(s))return Ot(e,t,r);if(e){const e=xt(s,r);if(-1===e)return _.aN(I.M9(s),Ot(!0,t,r));const[n,o]=i.gI(s,e);return _.aN(I.M9(n),I.uS(F.hZ(t,o)))}const n=xt(s,r,1);if(-1===n)return _.aN(I.M9(s),Ot(!0,t,r));const[o,a]=(0,h.Fs)(s,i.gI(Math.max(n,1)));return _.aN(I.M9(o),I.uS(F.hZ(t,a)))},onFailure:I.AT,onDone:I.Py}),xt=(e,t,r=0)=>{const s=e[Symbol.iterator]();let n,i=0,o=-1;for(;o<0&&(n=s.next())&&!n.done;){const e=n.value;i>=r&&t(e)&&(o=i),i+=1}return o},Xt=e=>new k(I.Py(e)),Rt=Be(0,((e,t)=>e+i.TS(t,0,((e,t)=>e+t)))),Mt=(0,h.XY)(3,((e,t,r)=>{const s=(0,h.Fs)(I.uS(t),I.qI((s=>(0,h.Fs)(e,Pt,I.qI((e=>(0,h.Fs)(I.uS(t),_.Tj((t=>[e,r(s,t)])))))))));return new k(s)})),At=e=>new k(I.OH(e)),Dt=e=>(0,h.Fs)(Xe(i.Ie(),(t=>t.length<e),((e,t)=>(0,h.Fs)(e,i.u2(t)))),et((t=>{const[r,s]=(0,h.Fs)(t,i.gI(e));return new k((0,h.Fs)(I.M9(s),_.aN(I.B6(r))))}))),Pt=e=>u.isEffect(e)?Pt(at(e)):e.channel,Ct=e=>new k(_.oA((0,h.Fs)(e,u.map((e=>Pt(e)))))),jt=e=>new k(_.A2((0,h.Fs)(e,u.map((e=>Pt(e)))))),Wt=e=>(0,h.Fs)(e,Mt(o.Ru,((e,t)=>a.ne(t-e)))),Bt=(0,h.XY)((e=>Y(e[1])),((e,t,r)=>Lt(e,t,((e,t)=>[e,t]),r))),qt=(0,h.XY)((e=>Y(e[1])),((e,t,r)=>Lt(e,t,((e,t)=>e),r))),zt=(0,h.XY)((e=>Y(e[1])),((e,t,r)=>Lt(e,t,((e,t)=>t),r))),Lt=(0,h.XY)((e=>Y(e[1])),((e,t,r,s)=>s?.concurrent?kt(e,{other:t,onSelfDone:l.YW({onFailure:e=>v.RS(u.failCause(e)),onSuccess:e=>v.jD(l.YW({onFailure:u.failCause,onSuccess:t=>u.succeed(r(e,t))}))}),onOtherDone:l.YW({onFailure:e=>v.RS(u.failCause(e)),onSuccess:e=>v.jD(l.YW({onFailure:u.failCause,onSuccess:t=>u.succeed(r(t,e))}))})}):et(e,(e=>mt(t,(t=>r(e,t))))))),Ht=e=>new k(e),Jt=Be(0,((e,t)=>e+t.length)),$t=N((()=>{const e=[];return(0,h.Fs)(Be(void 0,((t,r)=>i.Tj(r,(t=>{e.push(String(t))})))),mt((()=>e.join(""))))})),Vt=(0,h.Fs)(Wt(ne),mt((e=>e[1])))},18428:(e,t,r)=>{r.d(t,{sAj:()=>Be,Do:()=>Yo,O4p:()=>Pe,Qku:()=>Ue,ZjH:()=>qe,pYz:()=>ze,Q56:()=>Le,QDe:()=>He,NbH:()=>Je,mtG:()=>$e,as:()=>Ve,a1b:()=>Ge,bGY:()=>Ze,oIE:()=>No,JrD:()=>To,Baj:()=>Qe,mqN:()=>et,Bgl:()=>tt,hYI:()=>rt,AEl:()=>st,ra8:()=>nt,dWW:()=>it,h9N:()=>ft,uPo:()=>dt,_Oy:()=>pt,RJ2:()=>gt,KuX:()=>mt,loE:()=>bt,AoS:()=>yt,YaF:()=>Ft,B53:()=>_t,vJM:()=>Oo,VNK:()=>vt,pl8:()=>It,kg7:()=>wt,c$M:()=>kt,xWs:()=>Yt,KOB:()=>Nt,_OA:()=>Qt,sxi:()=>er,d_m:()=>tr,EHx:()=>rr,$An:()=>Tt,KBS:()=>Et,DyF:()=>Ot,NJm:()=>xt,sg1:()=>Xt,g7H:()=>xo,F_Q:()=>Rt,GSS:()=>At,Kbz:()=>Mt,u3U:()=>Dt,ZBY:()=>jt,So8:()=>Wt,Zen:()=>Bt,tID:()=>qt,gvV:()=>zt,gc8:()=>Lt,Cmk:()=>Ht,jjj:()=>Jt,HdH:()=>$t,IHh:()=>Vt,gPK:()=>Kt,Iex:()=>Ut,wxB:()=>Xo,yeE:()=>Gt,szT:()=>Zt,g7Y:()=>sr,fJG:()=>nr,ATB:()=>or,pVV:()=>ar,gOk:()=>ir,pbD:()=>ur,ODK:()=>cr,x1Q:()=>lr,E8K:()=>hr,mAd:()=>fr,PdO:()=>dr,PkA:()=>pr,I6j:()=>gr,nCM:()=>mr,qIB:()=>br,Bqz:()=>_r,B$Z:()=>vr,kjI:()=>Ir,WmK:()=>Sr,U5d:()=>wr,_pT:()=>kr,i4r:()=>Yr,zrT:()=>Nr,EfB:()=>Tr,u7q:()=>Or,P$i:()=>xr,bT0:()=>Xr,TYd:()=>Rr,uS6:()=>Mr,v7O:()=>Ar,VL_:()=>Ro,Tsr:()=>Pr,ipe:()=>Cr,b1S:()=>jr,qdp:()=>Dr,OBL:()=>Wr,gJc:()=>Br,fph:()=>zr,VQg:()=>Lr,agF:()=>qr,naR:()=>Jr,zDy:()=>$r,yTQ:()=>Vr,_Q_:()=>Ur,eBu:()=>Kr,ZWH:()=>Gr,nIh:()=>Zr,CCl:()=>Qr,A7h:()=>es,eV2:()=>ss,S67:()=>ns,P47:()=>is,ft:()=>ts,fNz:()=>rs,rLs:()=>We,nlf:()=>os,zMU:()=>Eo,L8n:()=>as,TjK:()=>us,OMK:()=>cs,JUj:()=>ls,UcN:()=>hs,bsU:()=>fs,qTV:()=>ds,H7O:()=>ps,Y4$:()=>gs,by4:()=>ms,sbx:()=>bs,TMJ:()=>Fs,JX6:()=>ys,xm_:()=>_s,aWS:()=>vs,kyh:()=>sn,fPX:()=>yr,h1I:()=>Is,Um7:()=>Ss,KJo:()=>ws,ahT:()=>ks,VxE:()=>Ys,XQi:()=>Ns,kBx:()=>Ts,ZmZ:()=>Es,ER8:()=>xs,S5A:()=>Os,QgK:()=>Xs,kS9:()=>Rs,NWQ:()=>Ms,Ggq:()=>As,xS7:()=>Ds,hRE:()=>Ps,UZM:()=>Cs,tDI:()=>js,DM4:()=>Ws,EnV:()=>Bs,BG1:()=>qs,gF$:()=>zs,FSO:()=>Ls,jBG:()=>Js,s9b:()=>$s,zY:()=>Hs,W7X:()=>Vs,tyW:()=>Ks,U5Q:()=>Us,Hs9:()=>Gs,PpN:()=>Zs,pR7:()=>Qs,PfK:()=>en,c7E:()=>tn,FS:()=>rn,rGZ:()=>nn,Vdx:()=>an,y17:()=>on,Bsl:()=>un,xQX:()=>hn,fVI:()=>fn,uxO:()=>dn,vyB:()=>pn,EPo:()=>gn,lwS:()=>mn,QcF:()=>bn,QqF:()=>Sn,$Gu:()=>yn,TAT:()=>Fn,Nh$:()=>_n,l1Z:()=>vn,w6K:()=>In,L5P:()=>wn,eFU:()=>kn,sZ3:()=>Yn,TrK:()=>Nn,KEl:()=>Tn,vbZ:()=>En,ies:()=>On,pk9:()=>xn,C2R:()=>Xn,az_:()=>Rn,feR:()=>Mn,uL9:()=>An,lPw:()=>Dn,o1d:()=>Pn,bht:()=>Cn,NUv:()=>jn,S8c:()=>Wn,JSQ:()=>Bn,rhH:()=>qn,eKg:()=>zn,p9$:()=>Ln,RXz:()=>Hn,XW_:()=>Jn,wEr:()=>$n,$eh:()=>Vn,OlJ:()=>Kn,M__:()=>Un,pqB:()=>Gn,SQs:()=>Zn,J8u:()=>si,Szv:()=>Qn,bqT:()=>ei,_aP:()=>ti,ovR:()=>ri,P1j:()=>ni,p2R:()=>ui,I1p:()=>ci,zNS:()=>ii,Dfo:()=>oi,qUc:()=>ai,lDo:()=>li,uzs:()=>fi,p7P:()=>hi,PyW:()=>di,DYE:()=>gi,OH5:()=>pi,saZ:()=>mi,O6g:()=>bi,QKh:()=>yi,NpH:()=>Fi,v6:()=>_i,Mim:()=>vi,Bio:()=>Ii,sFT:()=>Si,Ly1:()=>wi,dW9:()=>ki,nFR:()=>Yi,EH3:()=>Ni,ioe:()=>Oi,wRz:()=>xi,ANz:()=>Xi,ny8:()=>Ri,nHM:()=>Mi,pr8:()=>Er,bk5:()=>Di,VlR:()=>Pi,TEV:()=>Ci,RlJ:()=>ji,olw:()=>Wi,tiA:()=>Bi,ior:()=>qi,QCN:()=>zi,t8s:()=>Li,AyW:()=>Hi,b0H:()=>Ji,c13:()=>$i,oAg:()=>Ki,A2M:()=>Ui,bUZ:()=>Gi,rIH:()=>Vi,z7s:()=>Zi,lsS:()=>Qi,uGN:()=>eo,iK2:()=>to,fRP:()=>ro,yU6:()=>so,xrQ:()=>io,MAb:()=>oo,hVW:()=>ao,YG:()=>uo,VpO:()=>co,oHA:()=>lo,qrH:()=>ho,fWh:()=>fo,_tq:()=>no,Fnq:()=>po,QMs:()=>go,LiC:()=>mo,piH:()=>bo,aNH:()=>yo,OYO:()=>Fo,Yir:()=>_o,y4y:()=>vo,fFn:()=>Io,FwQ:()=>So,n8y:()=>wo});var s=r(20634),n=r(28420),i=r(31651),o=r(89702),a=r(62738),u=r(84073),c=r(55519),l=r(57964),h=r(43977),f=r(96949),d=r(99571),p=r(61369),g=r(86780),m=r(30961);m.ai;const b=m.RS,y=m.jD;m.Ce,m.Ll,m.YW;var F=r(77948),_=r(53533),v=r(56572),I=r(80677),S=r(35446),w=r(55040),k=r(3611);const Y=k.vI,N=(k.NV,k.FZ),T=(k.B5,k.LP,k.Vk),E=k.KD;k.VE,k.L8,k.VK,k.mq,k.Js,k.RU,k.$Q,k.o$,k.r_,k.Kv,k.Pf,k.En,k.Ib,k.xo;var O=r(27652),x=r(8993);const X={_tag:"Left"},R={_tag:"Right"},M={_tag:"Both"},A={_tag:"Either"},D=M;var P=r(22859),C=r(83136),j=r(35679),W=r(91816),B=r(53845),q=r(29064),z=r(91276);class L{capacity;array;size=0;current=0;constructor(e){this.capacity=e,this.array=Array.from({length:e},p.MN)}head(){return F.k$(this.array[this.current])}lastOrNull(){if(0===this.size)return;const e=0===this.current?this.array.length-1:this.current-1;return this.array[e]??void 0}put(e){this.array[this.current]=e,this.increment()}dropLast(){this.size>0&&(this.decrement(),this.array[this.current]=void 0)}toChunk(){const e=this.current-this.size,t=e<0?[...this.array.slice(this.capacity+e,this.capacity),...this.array.slice(0,this.current)]:this.array.slice(e,this.current);return n.Ts(t)}increment(){this.size<this.capacity&&(this.size+=1),this.current=(this.current+1)%this.capacity}decrement(){this.size-=1,this.current>0?this.current-=1:this.current=this.capacity-1}}var H=r(48960);const J="NotStarted",$="Previous",V="Current",K={_tag:J},U=e=>{const t={chunk(e){return this(c.succeed(e))},die(e){return this(c.die(e))},dieMessage(e){return this(c.dieMessage(e))},done(e){return this(c.suspend((()=>f.Uc(e,{onFailure:F.zN,onSuccess:n.of}))))},end(){return this(c.fail(F.dv()))},fail(e){return this(c.fail(F.zN(e)))},fromEffect(e){return this(c.mapBoth(e,{onFailure:F.zN,onSuccess:n.of}))},fromEffectChunk(e){return this((0,p.Fs)(e,c.mapError(F.zN)))},halt(e){return this(c.failCause((0,p.Fs)(e,s.Tj(F.zN))))},single(e){return this(c.succeed(n.of(e)))}};return Object.assign(e,t)},G=Symbol.for("effect/Stream/Handoff"),Z="Empty",Q="Full",ee=e=>({_tag:Z,notifyConsumer:e}),te=(e,t)=>({_tag:Q,value:e,notifyProducer:t}),re=(e,t)=>r=>{switch(r._tag){case Z:return e(r.notifyConsumer);case Q:return t(r.value,r.notifyProducer)}},se={_A:e=>e},ne=()=>(0,p.Fs)(a.L8(),c.flatMap((e=>w.L8(ee(e)))),c.map((e=>({[G]:se,ref:e})))),ie=(0,p.XY)(2,((e,t)=>c.flatMap(a.L8(),(r=>c.flatten(w.JP(e.ref,(s=>(0,p.Fs)(s,re((e=>[c.zipRight(a.Py(e,void 0),a.Tx(r)),te(t,r)]),((r,n)=>[c.flatMap(a.Tx(n),(()=>(0,p.Fs)(e,ie(t)))),s])))))))))),oe=e=>c.flatMap(a.L8(),(t=>c.flatten(w.JP(e.ref,(r=>(0,p.Fs)(r,re((t=>[c.flatMap(a.Tx(t),(()=>oe(e))),r]),((e,r)=>[c.as(a.Py(r,void 0),e),ee(t)])))))))),ae="Emit",ue="Halt",ce="End",le=e=>({_tag:ae,elements:e}),he=e=>({_tag:ue,cause:e}),fe=e=>({_tag:ce,reason:e}),de=()=>c.fail(F.dv()),pe=e=>c.mapError(c.failCause(e),F.zN),ge="ScheduleEnd",me="UpstreamEnd",be={_tag:ge},ye={_tag:me},Fe="DrainLeft",_e="DrainRight",ve="PullBoth",Ie="PullLeft",Se="PullRight",we={_tag:Fe},ke={_tag:_e},Ye={_tag:ve},Ne=e=>({_tag:Ie,rightChunk:e}),Te=e=>({_tag:Se,leftChunk:e}),Ee="PullBoth",Oe="PullLet",xe="PullRight",Xe={_tag:Ee},Re=e=>({_tag:Oe,rightChunk:e}),Me=e=>({_tag:xe,leftChunk:e});var Ae=r(99688),De=r(27514);const Pe=Symbol.for("effect/Stream"),Ce={_R:e=>e,_E:e=>e,_A:e=>e};class je{channel;[Pe]=Ce;constructor(e){this.channel=e}pipe(){return(0,_.t)(this,arguments)}}const We=e=>(0,v.i5)(e,Pe)||c.isEffect(e),Be=4096,qe=e=>vt(ze(e)),ze=e=>{const t=e=>q.$5({onInput:r=>{const s=n.u2(e,r);return q.qI(q.M9(s),(()=>t(s)))},onFailure:q.fJ,onDone:()=>q.rI});return new je(q.WK(Er(e),t(n.Ie())))},Le=(e,t)=>ni(c.acquireRelease(e,t)),He=(0,p.XY)(2,((e,t)=>Je(e,t,O.i4))),Je=(0,p.XY)(3,((e,t,r)=>lr($e(e,t,r),(e=>l.YW(e,{onLeft:F.dv,onRight:F.zN}))))),$e=(0,p.XY)(3,((e,t,r)=>{const i=c.all([ne(),w.L8(be),w.L8(n.Ie()),O.Bd(r),w.L8(!1),w.L8(!1)]);return(0,p.Fs)(Mr(i),br((([r,i,o,a,u,h])=>{const f=q.u({onInput:e=>q.qI(q.uS((0,p.Fs)(r,ie(le(e)),c.when((()=>n.J_(e))))),(()=>f)),onFailure:e=>q.uS(ie(r,he(e))),onDone:()=>q.uS(ie(r,fe(ye)))}),g=(0,p.Fs)(w.C2(o,n.Ie()),c.flatMap((e=>n.J_(e)?(0,p.Fs)(w.hZ(u,!0),c.zipRight(c.succeed((0,p.Fs)(q.M9(e),q.qI((()=>g)))))):(0,p.Fs)(oe(r),c.map((e=>{switch(e._tag){case ae:return(0,p.Fs)(q.uS(w.hZ(u,!0)),C.aN(q.M9(e.elements)),C.aN(q.uS(w.Jt(h))),q.qI((e=>e?q.rI:g)));case ue:return q.AT(e.cause);case ce:return e.reason._tag===ge?(0,p.Fs)(w.Jt(u),c.map((e=>e?q.uS((0,p.Fs)(w.hZ(i,be),c.zipRight(w.hZ(h,!0)))):(0,p.Fs)(q.uS((0,p.Fs)(w.hZ(i,be),c.zipRight(w.hZ(h,!0)))),q.qI((()=>g))))),C.oA):(0,p.Fs)(w.hZ(i,e.reason),c.zipRight(w.hZ(h,!0)),q.uS)}}))))),C.oA),m=e=>a.next(e),b=(e,a,f)=>{const y=(0,p.Fs)(w.hZ(u,!1),c.zipRight(w.hZ(h,!1)),c.zipRight((0,p.Fs)(g,C.tw(H.pr(t)),q.ye,j.eF,c.forkIn(f)))),_=(e,t,r)=>(0,p.Fs)(w.hZ(o,n.Bq(e)),c.zipRight(c.map(w.Jt(i),(e=>{switch(e._tag){case ge:return(0,p.Fs)(c.all([w.Jt(u),y,(0,p.Fs)(m(F.zN(t)),c.forkIn(f))]),c.map((([e,s,i])=>{const o=(0,p.Fs)(r,F.YW({onNone:()=>n.of(l.pG(t)),onSome:e=>n.L8(l.pG(t),l.kb(e))}));return e?(0,p.Fs)(q.M9(o),q.qI((()=>b(s,i,f)))):b(s,i,f)})),C.oA);case me:return(0,p.Fs)(w.Jt(u),c.map((e=>e?q.M9(n.of(l.pG(t))):q.rI)),C.oA)}}))),C.oA);return C.oA(c.raceWith(d.fj(e),d.fj(a),{onSelfDone:(e,t)=>(0,p.Fs)(d.G(a),c.zipRight((0,p.Fs)(c.suspend((()=>e)),c.map((([e,t])=>_(e,t,F.dv())))))),onOtherDone:(t,n)=>c.matchCauseEffect(c.suspend((()=>t)),{onFailure:t=>l.YW(s.vE(t),{onLeft:()=>(0,p.Fs)(r,ie(fe(be)),c.forkDaemon,c.zipRight((0,p.Fs)(d.fj(e),c.map((([e,t])=>_(e,t,F.dv())))))),onRight:t=>(0,p.Fs)(r,ie(he(t)),c.forkDaemon,c.zipRight((0,p.Fs)(d.fj(e),c.map((([e,t])=>_(e,t,F.dv()))))))}),onSuccess:t=>(0,p.Fs)(r,ie(fe(be)),c.forkDaemon,c.zipRight((0,p.Fs)(d.fj(e),c.map((([e,r])=>_(e,r,F.zN(t)))))))})}))};return Ui((0,p.Fs)(e,Er,q.WK(f),j.eF,c.forkScoped,c.zipRight((0,p.Fs)(g,C.tw(H.pr(t)),q.ye,j.eF,c.forkScoped,c.flatMap((e=>(0,p.Fs)(c.forkScoped(m(F.dv())),c.flatMap((t=>(0,p.Fs)(c.scope,c.map((r=>new je(b(e,t,r))))))))))))))})))})),Ve=(0,p.XY)(2,((e,t)=>us(e,(()=>t)))),Ke=e=>{if("unbounded"===e)return S.dT();if("number"==typeof e||void 0===e)return S.Mm(e??16);switch(e.strategy){case"dropping":return S.Ke(e.bufferSize??16);case"sliding":return S.p2(e.bufferSize??16);default:return S.Mm(e.bufferSize??16)}},Ue=(e,t)=>c.acquireRelease(Ke(t),(e=>S.n_(e))).pipe(c.flatMap((t=>c.runtime().pipe(c.flatMap((r=>c.sync((()=>{const n=T(r);return e(U((e=>Ae.OB(e).pipe(c.flatMap((e=>S.x(t,e))),c.asVoid,n).then((e=>{if(f.N6(e)&&!s.fT(e.cause))throw s.iw(e.cause)})))))})))),c.map((e=>{const r=S.s(t).pipe(c.flatMap((e=>Ae.Vw(e))),c.match({onFailure:e=>q.uS(S.n_(t)).pipe(C.aN(F.YW(e,{onNone:()=>q.rI,onSome:e=>q.fJ(e)}))),onSuccess:e=>q.M9(e).pipe(q.qI((()=>r)))}),C.oA);return Tr(r).pipe(Gt(e??c.void))}))))),Ui),Ge=(e,t)=>(0,p.Fs)(c.acquireRelease(Ke(t),(e=>S.n_(e))),c.flatMap((t=>(0,p.Fs)(c.runtime(),c.flatMap((r=>(0,p.Fs)(e(U((e=>(0,p.Fs)(Ae.OB(e),c.flatMap((e=>S.x(t,e))),c.asVoid,T(r)).then((e=>{if(f.N6(e)&&!s.fT(e.cause))throw s.iw(e.cause)}))))),c.map((()=>{const e=(0,p.Fs)(S.s(t),c.flatMap(Ae.Vw),c.match({onFailure:e=>(0,p.Fs)(q.uS(S.n_(t)),C.aN(F.YW(e,{onNone:()=>q.rI,onSome:q.fJ}))),onSuccess:t=>(0,p.Fs)(q.M9(t),q.qI((()=>e)))}),C.oA);return e})))))))),C.A2,Tr),Ze=(e,t)=>(0,p.Fs)(c.acquireRelease(Ke(t),(e=>S.n_(e))),c.flatMap((t=>(0,p.Fs)(c.runtime(),c.flatMap((r=>(0,p.Fs)(e(U((e=>(0,p.Fs)(Ae.OB(e),c.flatMap((e=>S.x(t,e))),c.asVoid,T(r)).then((e=>{if(f.N6(e)&&!s.fT(e.cause))throw s.iw(e.cause)}))))),c.zipRight(w.L8(!1)),c.flatMap((e=>(0,p.Fs)(w.Jt(e),c.map((r=>r?de():(0,p.Fs)(S.s(t),c.flatMap(Ae.Vw),c.onError((()=>(0,p.Fs)(w.hZ(e,!0),c.zipRight(S.n_(t))))))))))))))))),ni,br(mn)),Qe=(0,p.XY)(3,((e,t,r)=>gi((()=>{const s=e=>q.$5({onInput:r=>{if(e.length+r.length>=t){const[s,o]=(0,p.Fs)(r,n.gI(t-e.length));return i((0,p.Fs)(e,n.u2(s)),o)}return s((0,p.Fs)(e,n.u2(r)))},onFailure:q.fJ,onDone:()=>i(e,n.Ie())}),i=(e,t)=>q.WK(C.aN(q.M9(t),C.As()),Er(r(e)));return new je((0,p.Fs)(Er(e),C.tw(s(n.Ie()))))})))),et=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,rt(t,r),c.map((e=>e.map((e=>kr(Br(e,{shutdown:!0}))))))))),tt=(0,p.XY)(2,((e,t)=>c.map(Di(e,t),(e=>kr(Dr(e)))))),rt=(0,p.XY)(3,((e,t,r)=>c.flatMap(Ai(r),(r=>(0,p.Fs)(c.all(Array.from({length:t},(()=>I.B1(r)))),c.tap((()=>c.forkScoped(Hn(e,r))))))))),st=(0,p.XY)(2,((e,t)=>c.map(Di(e,t),I.B1))),nt=(0,p.XY)(2,((e,t)=>{if("unbounded"===t.capacity)return lt(e);if("dropping"===t.strategy)return ut(e,t.capacity);if("sliding"===t.strategy)return ct(e,t.capacity);const r=ji(e,t);return new je(C.A2(c.map(r,(e=>{const t=(0,p.Fs)(q.uS(S.s(e)),q.qI(f.YW({onFailure:e=>(0,p.Fs)(s.Ki(e),F.YW({onNone:()=>q.rI,onSome:q.AT})),onSuccess:e=>q.qI(q.M9(n.of(e)),(()=>t))})));return t}))))})),it=(0,p.XY)(2,((e,t)=>{if("dropping"===t.strategy)return ot(e,t.capacity);if("sliding"===t.strategy)return at(e,t.capacity);const r=Ci(e,t);return new je(C.A2(c.map(r,(e=>{const t=(0,p.Fs)(q.uS(S.s(e)),q.qI(Ae.YW({onEnd:()=>q.rI,onFailure:q.AT,onSuccess:e=>(0,p.Fs)(q.M9(e),q.qI((()=>t)))})));return t}))))})),ot=(0,p.XY)(2,((e,t)=>{const r=c.acquireRelease(S.Ke(t),(e=>S.n_(e)));return new je(ht(r,Er(e)))})),at=(0,p.XY)(2,((e,t)=>{const r=c.acquireRelease(S.p2(t),(e=>S.n_(e)));return new je(ht(r,Er(e)))})),ut=(0,p.XY)(2,((e,t)=>{const r=c.acquireRelease(S.Ke(t),(e=>S.n_(e)));return new je(ht(r,Er(un(1)(e))))})),ct=(0,p.XY)(2,((e,t)=>{const r=c.acquireRelease(S.p2(t),(e=>S.n_(e)));return new je(ht(r,Er((0,p.Fs)(e,un(1)))))})),lt=e=>{const t=Ci(e,{strategy:"unbounded"});return new je(C.A2(c.map(t,(e=>{const t=(0,p.Fs)(q.uS(S.s(e)),q.qI(Ae.YW({onEnd:()=>q.rI,onFailure:q.AT,onSuccess:e=>q.qI(q.M9(e),(()=>t))})));return t}))))},ht=(e,t)=>{const r=(e,t)=>{const s=r=>(0,p.Fs)(w.Jt(t),c.tap(a.Tx),c.zipRight(a.L8()),c.flatMap((s=>(0,p.Fs)(S.x(e,[r,s]),c.zipRight(w.hZ(t,s)),c.zipRight(a.Tx(s))))),c.asVoid,q.uS);return q.u({onInput:s=>(0,p.Fs)(a.L8(),c.flatMap((r=>(0,p.Fs)(S.x(e,[Ae.iv(s),r]),c.flatMap((e=>(0,p.Fs)(w.hZ(t,r),c.when((()=>e)))))))),c.asVoid,q.uS,q.qI((()=>r(e,t)))),onFailure:e=>s(Ae.AT(e)),onDone:()=>s(Ae._N)})};return C.A2((0,p.Fs)(e,c.flatMap((e=>(0,p.Fs)(a.L8(),c.tap((e=>a.Py(e,void 0))),c.flatMap((s=>(0,p.Fs)(w.L8(s),c.flatMap((s=>(0,p.Fs)(t,q.WK(r(e,s)),j.M_,c.forkScoped))),c.as((e=>{const t=(0,p.Fs)(q.uS(S.s(e)),q.qI((([e,r])=>C.aN(q.uS(a.Py(r,void 0)),Ae.YW(e,{onEnd:()=>q.rI,onFailure:q.AT,onSuccess:e=>(0,p.Fs)(q.M9(e),q.qI((()=>t)))})))));return t})(e))))))))))},ft=(0,p.XY)(2,((e,t)=>dt(e,(e=>l.YW(s.vE(e),{onLeft:t,onRight:or}))))),dt=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),q.uP((e=>Er(t(e)))))))),pt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ft((e=>(0,p.Fs)(t(e),F.WL((()=>nr(e))))))))),gt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,dt((e=>(0,p.Fs)(t(e),F.WL((()=>or(e))))))))),mt=(0,p.XY)(3,((e,t,r)=>ft(e,(e=>"_tag"in e&&e._tag===t?r(e):nr(e))))),bt=(0,p.XY)(2,((e,t)=>ft(e,(e=>{const r=Object.keys(t);return"_tag"in e&&r.includes(e._tag)?t[e._tag](e):nr(e)})))),yt=e=>(0,p.Fs)(e,Ft(((e,t)=>h.aI(t)(e)))),Ft=(0,p.XY)(2,((e,t)=>{const r=e=>q.u({onInput:s=>{const[i,o]=n.TS(s,[e,n.Ie()],(([e,r],s)=>F.Ru(e)&&t(e.value,s)?[F.zN(s),r]:[F.zN(s),(0,p.Fs)(r,n.BC(s))]));return q.qI(q.M9(o),(()=>r(i)))},onFailure:q.AT,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(r(F.dv()))))})),_t=(0,p.XY)(2,((e,t)=>{const r=e=>q.u({onInput:s=>(0,p.Fs)(s,c.reduce([e,n.Ie()],(([e,r],s)=>F.Ru(e)?(0,p.Fs)(t(e.value,s),c.map((e=>e?[F.zN(s),r]:[F.zN(s),(0,p.Fs)(r,n.BC(s))]))):c.succeed([F.zN(s),(0,p.Fs)(r,n.BC(s))]))),q.uS,q.qI((([e,t])=>(0,p.Fs)(q.M9(t),q.qI((()=>r(e))))))),onFailure:q.AT,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(r(F.dv()))))})),vt=e=>(0,p.Fs)(e,fs(n.of)),It=(0,p.XY)(2,((e,t)=>vr(t(vt(e))))),St=e=>c.catchAll(c.asSome(e),(e=>"None"===e._tag?c.succeedNone:c.fail(e.value))),wt=(0,p.XY)(4,((e,t,r,n)=>{const i=(e,t)=>(0,p.Fs)(q.uS(oe(t)),C.aN(q.u({onInput:r=>q.qI(q.uS((0,p.Fs)(e,ie(f.Py(r)))),(()=>i(e,t))),onFailure:t=>q.uS(ie(e,f.AT((0,p.Fs)(t,s.Tj(F.zN))))),onDone:()=>q.qI(q.uS(ie(e,f.fJ(F.dv()))),(()=>i(e,t)))})));return new je(C.A2(c.gen((function*(s){const o=yield*s(ne()),a=yield*s(ne()),u=yield*s(ne()),l=yield*s(ne());yield*s(Er(e),C.Hh(C.xs),q.WK(i(o,u)),j.M_,c.forkScoped),yield*s(Er(t),C.Hh(C.xs),q.WK(i(a,l)),j.M_,c.forkScoped);const h=(0,p.Fs)(u,ie(void 0),c.zipRight((0,p.Fs)(oe(o),c.flatMap((e=>c.suspend((()=>e))))))),f=(0,p.Fs)(l,ie(void 0),c.zipRight((0,p.Fs)(oe(a),c.flatMap((e=>c.suspend((()=>e)))))));return Er($i(r,(e=>c.flatMap(n(e,h,f),St))))}))))})),kt=(0,p.XY)(4,((e,t,r,s)=>{const n=(e,t)=>C.aN(q.uS(oe(t)),q.u({onInput:r=>q.qI(q.uS((0,p.Fs)(e,ie(Ae.iv(r)))),(()=>n(e,t))),onFailure:t=>q.uS(ie(e,Ae.AT(t))),onDone:()=>q.uS(ie(e,Ae._N))}));return new je((0,p.Fs)(c.all([ne(),ne(),ne(),ne()]),c.tap((([t,r,s])=>(0,p.Fs)(Er(e),q.WK(n(t,s)),j.M_,c.forkScoped))),c.tap((([e,r,s,i])=>(0,p.Fs)(Er(t),q.WK(n(r,i)),j.M_,c.forkScoped))),c.map((([e,t,n,i])=>{const o=(0,p.Fs)(n,ie(void 0),c.zipRight((0,p.Fs)(oe(e),c.flatMap(Ae.Vw)))),a=(0,p.Fs)(i,ie(void 0),c.zipRight((0,p.Fs)(oe(t),c.flatMap(Ae.Vw))));return Er(Ji(r,(e=>c.flatMap(s(e,o,a),St))))})),C.A2))})),Yt=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.aN(Er(t)))))),Nt=e=>gi((()=>(0,p.Fs)(e,n.TS(Ut,((e,t)=>Yt(t)(e)))))),Tt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,xt(t,((e,t)=>[e,t]))))),Et=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,xt(t,((e,t)=>e))))),Ot=(0,p.XY)(2,((e,t)=>br(e,(()=>t)))),xt=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,br((e=>(0,p.Fs)(t,us((t=>r(e,t))))))))),Xt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(B.L(),c.flatMap((r=>c.transplant((s=>(0,p.Fs)(ne(),c.map((o=>{const a=e=>(0,p.Fs)(i.yy(t),c.as(e),c.fork,s,c.map((e=>l((e=>({_tag:$,fiber:e}))(e))))),u=q.u({onInput:e=>F.YW(n.HV(e),{onNone:()=>u,onSome:e=>q.qI(q.uS(ie(o,le(n.of(e)))),(()=>u))}),onFailure:e=>q.uS(ie(o,he(e))),onDone:()=>q.uS(ie(o,fe(ye)))}),l=e=>{switch(e._tag){case J:return(0,p.Fs)(oe(o),c.map((e=>{switch(e._tag){case ae:return C.oA(a(e.elements));case ue:return q.AT(e.cause);case ce:return q.rI}})),C.oA);case $:return C.oA(c.raceWith(d.fj(e.fiber),oe(o),{onSelfDone:(e,t)=>f.YW(e,{onFailure:e=>(0,p.Fs)(d.G(t),c.as(q.AT(e))),onSuccess:e=>c.succeed((0,p.Fs)(q.M9(e),q.qI((()=>l({_tag:V,fiber:t})))))}),onOtherDone:(e,t)=>f.YW(e,{onFailure:e=>(0,p.Fs)(d.G(t),c.as(q.AT(e))),onSuccess:e=>{switch(e._tag){case ae:return(0,p.Fs)(d.G(t),c.zipRight(a(e.elements)));case ue:return(0,p.Fs)(d.G(t),c.as(q.AT(e.cause)));case ce:return(0,p.Fs)(d.fj(t),c.map((e=>(0,p.Fs)(q.M9(e),C.aN(q.rI)))))}}})}));case V:return(0,p.Fs)(d.fj(e.fiber),c.map((e=>{switch(e._tag){case ae:return C.oA(a(e.elements));case ue:return q.AT(e.cause);case ce:return q.rI}})),C.oA)}},h=(0,p.Fs)(C.lX(r),q.WK(u),j.eF,c.forkScoped,c.as((0,p.Fs)(l(K),q.wO(r))),C.A2);return new je((0,p.Fs)(Er(e),q.WK(h)))}))))))),Ki))),Rt=e=>Mr(c.die(e)),Mt=e=>Mr(c.dieSync(e)),At=e=>Mr(c.dieMessage(e)),Dt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(a.L8(),c.flatMap((r=>(0,p.Fs)(e,jt({maximumLag:t.maximumLag,decide:e=>c.flatMap(a.Tx(r),(t=>t(e)))}),c.flatMap((e=>(0,p.Fs)(c.all(n.Tj(n.y1(0,t.size-1),(t=>c.map(e,(([e,r])=>[[e,t],r]))))),c.map(n.Iv),c.flatMap((e=>{const[s,i]=n.XK(e,[new Map,n.Ie()],(([e,t],[r,s])=>[e.set(r[0],r[1]),(0,p.Fs)(t,n.Hs(s))]));return(0,p.Fs)(a.Py(r,(e=>c.map(t.decide(e),(e=>t=>(0,p.Fs)(e(s.get(t))))))),c.as(Array.from(i)))}))))))))))),Pt={ref:0},Ct=()=>{const e=Pt.ref;return Pt.ref=e+1,e},jt=(0,p.XY)(2,((e,t)=>Wt(e,t.maximumLag,t.decide,(()=>c.void)))),Wt=(0,p.XY)(4,((e,t,r,i)=>(0,p.Fs)(c.acquireRelease(w.L8(new Map),((e,t)=>(0,p.Fs)(w.Jt(e),c.flatMap((e=>(0,p.Fs)(e.values(),c.forEach(S.n_))))))),c.flatMap((o=>c.gen((function*(a){const u=yield*a(c.makeSemaphore(1)),l=yield*a(w.L8((0,p.Fs)(S.Mm(t),c.flatMap((e=>{const t=Ct();return(0,p.Fs)(w.yo(o,(r=>r.set(t,e))),c.as([t,e]))}))))),h=e=>u.withPermits(1)((0,p.Fs)(w.hZ(l,(0,p.Fs)(S.Mm(1),c.tap((t=>S.x(t,e))),c.flatMap((e=>{const t=Ct();return(0,p.Fs)(w.yo(o,(r=>r.set(t,e))),c.as(P.L8(t,e)))})))),c.zipRight((0,p.Fs)(w.Jt(o),c.flatMap((t=>(0,p.Fs)(n.Ts(t.values()),c.forEach((t=>(0,p.Fs)(S.x(t,e),c.catchSomeCause((e=>s.fT(e)?F.zN(c.void):F.dv())))))))))),c.zipRight(i(e)),c.asVoid));return yield*a(e,Wn((e=>(0,p.Fs)(r(e),c.flatMap((t=>(0,p.Fs)(w.Jt(o),c.flatMap((r=>(0,p.Fs)(r.entries(),c.reduce(n.Ie(),((r,[i,o])=>t(i)?(0,p.Fs)(S.x(o,f.Py(e)),c.matchCauseEffect({onFailure:e=>s.fT(e)?c.succeed((0,p.Fs)(r,n.Hs(i))):c.failCause(e),onSuccess:()=>c.succeed(r)})):c.succeed(r))),c.flatMap((e=>n.J_(e)?(0,p.Fs)(w.yo(o,(t=>{for(const r of e)t.delete(r);return t}))):c.void)))))))),c.asVoid))),c.matchCauseEffect({onFailure:e=>h(f.AT((0,p.Fs)(e,s.Tj(F.zN)))),onSuccess:()=>h(f.fJ(F.dv()))}),c.forkScoped),u.withPermits(1)(c.flatten(w.Jt(l)))}))))))),Bt=e=>new je(C.Ze(Er(e))),qt=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Mr(a.L8()),br((r=>(0,p.Fs)(ni((0,p.Fs)(t,Wn((()=>c.void)),c.catchAllCause((e=>a.AT(r,e))),c.forkScoped)),Ot((0,p.Fs)(e,is(r))))))))),zt=(0,p.XY)(2,((e,t)=>{const r=e=>q.$5({onInput:t=>{const s=(0,p.Fs)(t,n.gv(e)),i=Math.max(0,e-t.length);return n.Im(t)||i>0?r(i):(0,p.Fs)(q.M9(s),C.aN(C.As()))},onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),C.tw(r(t))))})),Lt=(0,p.XY)(2,((e,t)=>t<=0?Zr():gi((()=>{const r=new L(t),s=q.$5({onInput:e=>{const t=(0,p.Fs)(e,n.x1((e=>{const t=r.head();return r.put(e),t})));return(0,p.Fs)(q.M9(t),q.qI((()=>s)))},onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),C.tw(s)))})))),Ht=(0,p.XY)(2,((e,t)=>zt($t(e,(e=>!t(e))),1))),Jt=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>(0,p.Fs)(c.dropUntil(e,t),c.map(n.Iv),c.map((e=>n.Im(e)?q.DY((()=>r)):(0,p.Fs)(q.M9(e),C.aN(C.As())))),C.oA),onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),C.tw(r)))})),$t=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>{const s=n.Hd(e,t);return n.Im(s)?q.DY((()=>r)):C.aN(q.M9(s),C.As())},onFailure:q.fJ,onDone:q.B6});return new je(C.tw(Er(e),r))})),Vt=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>(0,p.Fs)(c.dropWhile(e,t),c.map(n.Iv),c.map((e=>n.Im(e)?q.DY((()=>r)):C.aN(q.M9(e),C.As()))),C.oA),onFailure:q.fJ,onDone:()=>q.rI});return new je(C.tw(Er(e),r))})),Kt=e=>(0,p.Fs)(e,us(l.pG),ft((e=>as(l.kb(e))))),Ut=new je(q.M9(n.Ie())),Gt=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.ye(t))))),Zt=(0,p.XY)(2,((e,t)=>new je(q.sz(Er(e),t)))),Qt=()=>Mr(c.context()),er=e=>(0,p.Fs)(Qt(),us(e)),tr=e=>(0,p.Fs)(Qt(),ys(e)),rr=e=>(0,p.Fs)(Qt(),br(e)),sr=e=>Bt(Mr(e)),nr=e=>Ar(c.fail(F.zN(e))),ir=e=>Ar(c.failSync((()=>F.zN(e())))),or=e=>Mr(c.failCause(e)),ar=e=>Mr(c.failCauseSync(e)),ur=(0,p.XY)(2,((e,t)=>fs(e,n.pb(t)))),cr=(0,p.XY)(2,((e,t)=>{const r=e=>{const s=e.next();return s.done?q.u({onInput:e=>r(e[Symbol.iterator]()),onFailure:q.AT,onDone:q.Py}):(0,p.Fs)(t(s.value),c.map((t=>t?(0,p.Fs)(q.M9(n.of(s.value)),q.qI((()=>r(e)))):r(e))),C.oA)};return new je(q.DY((()=>(0,p.Fs)(Er(e),q.WK(r(n.Ie()[Symbol.iterator]()))))))})),lr=(0,p.XY)(2,((e,t)=>fs(e,n.x1(t)))),hr=(0,p.XY)(2,((e,t)=>gi((()=>{const r=e=>{const s=e.next();return s.done?q.u({onInput:e=>r(e[Symbol.iterator]()),onFailure:q.AT,onDone:q.Py}):(0,p.Fs)(t(s.value),F.YW({onNone:()=>c.sync((()=>r(e))),onSome:c.map((t=>q.qI(q.M9(n.of(t)),(()=>r(e)))))}),C.oA)};return new je((0,p.Fs)(Er(e),q.WK(r(n.Ie()[Symbol.iterator]()))))})))),fr=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>{const s=n.mA(e,t);return s.length===e.length?(0,p.Fs)(q.M9(s),q.qI((()=>r))):q.M9(s)},onFailure:q.fJ,onDone:q.Py});return new je((0,p.Fs)(Er(e),C.tw(r)))})),dr=(0,p.XY)(2,((e,t)=>gi((()=>{const r=e=>{const s=e.next();return s.done?q.u({onInput:e=>r(e[Symbol.iterator]()),onFailure:q.AT,onDone:q.Py}):C.oA(F.YW(t(s.value),{onNone:()=>c.succeed(q.rI),onSome:c.map((t=>q.qI(q.M9(n.of(t)),(()=>r(e)))))}))};return new je((0,p.Fs)(Er(e),C.tw(r(n.Ie()[Symbol.iterator]()))))})))),pr=e=>Le(c.void,(()=>e)),gr=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>F.YW(n.i8(e,t),{onNone:()=>r,onSome:e=>q.M9(n.of(e))}),onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(r)))})),mr=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>(0,p.Fs)(c.findFirst(e,t),c.map(F.YW({onNone:()=>r,onSome:e=>q.M9(n.of(e))})),C.oA),onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(r)))})),br=(0,p.XY)((e=>We(e[0])),((e,t,r)=>{const s=r?.bufferSize??16;return r?.switch?yr(r?.concurrency,(()=>Fr(e,1,s,t)),(r=>Fr(e,r,s,t))):yr(r?.concurrency,(()=>new je(C.Hh(Er(e),(e=>(0,p.Fs)(e,n.Tj((e=>Er(t(e)))),n.TS(q.rI,((e,t)=>(0,p.Fs)(e,C.aN(t))))))))),(s=>new je((0,p.Fs)(Er(e),C.Hh(C.xs),C.ZZ((e=>Er(t(e))),r)))))})),yr=(e,t,r)=>{switch(e){case void 0:return t();case"unbounded":return r(Number.MAX_SAFE_INTEGER);default:return e>1?r(e):t()}},Fr=(0,p.XY)(4,((e,t,r,s)=>new je((0,p.Fs)(Er(e),C.Hh(C.xs),C.ZZ((e=>Er(s(e))),{concurrency:t,mergeStrategy:W.$u(),bufferSize:r}))))),_r=(0,p.XY)((e=>We(e[0])),((e,t)=>br(e,p.D_,t))),vr=e=>{const t=q.u({onInput:e=>q.qI(C.xs(e),(()=>t)),onFailure:q.AT,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(t)))},Ir=(0,p.XY)((e=>We(e[0])),((e,t)=>t?.unordered?br(e,(e=>Mr(e)),{concurrency:t.concurrency}):yr(t?.concurrency,(()=>ys(e,p.D_)),(t=>new je((0,p.Fs)(Er(e),C.Hh(C.xs),C.XV(p.D_,t),C.Hq(n.of))))))),Sr=e=>{const t=q.u({onInput:e=>((e,t)=>{const[r,i]=(0,p.Fs)(e,n.cs((e=>!f.oJ(e)))),o=(0,p.Fs)(n.d5(i),F.YW({onNone:()=>t,onSome:f.YW({onFailure:e=>F.YW(s.Ki(e),{onNone:()=>q.rI,onSome:q.AT}),onSuccess:()=>q.rI})}));return(0,p.Fs)(q.M9((0,p.Fs)(r,n.x1((e=>f.oJ(e)?F.zN(e.value):F.dv())))),q.qI((()=>o)))})(e,t),onFailure:e=>q.AT(e),onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(t)))},wr=e=>(0,p.Fs)(e,us(n.Ts),vr),kr=e=>vr(Sr((0,p.Fs)(e,us((e=>e.exit))))),Yr=e=>new je(C.ZD(Er(e))),Nr=(e,t)=>(0,p.Fs)(c.acquireRelease(c.sync((()=>e[Symbol.asyncIterator]())),(e=>e.return?c.promise((async()=>e.return())):c.void)),c.map((e=>bn((0,p.Fs)(c.tryPromise({try:async()=>e.next(),catch:e=>F.zN(t(e))}),c.flatMap((e=>e.done?c.fail(F.dv()):c.succeed(e.value))))))),Ui),Tr=e=>new je(e),Er=e=>{if("channel"in e)return e.channel;if(c.isEffect(e))return Er(Mr(e));throw new TypeError("Expected a Stream.")},Or=e=>new je(n.Im(e)?q.rI:q.M9(e)),xr=(e,t)=>{if(t?.scoped){const r=c.map(I.B1(e),Xr);return t.shutdown?c.map(r,Gt(I.n_(e))):r}const r=br(ni(I.B1(e)),Xr);return t?.shutdown?Gt(r,I.n_(e)):r},Xr=(e,t)=>(0,p.Fs)(S.s(e),c.catchAllCause((t=>(0,p.Fs)(S.$Q(e),c.flatMap((e=>e&&s.fT(t)?de():pe(t)))))),mn,t?.shutdown?Gt(S.n_(e)):p.D_),Rr=(...e)=>(0,p.Fs)(Pr(e),br(Or)),Mr=e=>(0,p.Fs)(e,c.mapError(F.zN),Ar),Ar=e=>new je(C.oA(c.match(e,{onFailure:F.YW({onNone:()=>q.rI,onSome:q.fJ}),onSuccess:e=>q.M9(n.of(e))}))),Dr=(e,t)=>{const r=t?.maxChunkSize??Be;if(t?.scoped){const s=c.map(I.B1(e),(e=>Br(e,{maxChunkSize:r,shutdown:!0})));return t.shutdown?c.map(s,Gt(I.n_(e))):s}const s=br(ni(I.B1(e)),(e=>Br(e,{maxChunkSize:r})));return t?.shutdown?Gt(s,I.n_(e)):s},Pr=e=>gi((()=>n.yL(e)?Or(e):jr(e[Symbol.iterator]()))),Cr=e=>(0,p.Fs)(e,c.map(Pr),Ki),jr=(e,t=Be)=>(0,p.Fs)(c.sync((()=>{let r=[];const s=e=>(0,p.Fs)(c.sync((()=>{let i=e.next();if(1===t)return i.done?q.rI:(0,p.Fs)(q.M9(n.of(i.value)),q.qI((()=>s(e))));r=[];let o=0;for(;!1===i.done&&(r.push(i.value),o+=1,!(o>=t));)i=e.next();return o>0?(0,p.Fs)(q.M9(n.Iv(r)),q.qI((()=>s(e)))):q.rI})),C.oA);return new je(s(e))})),Ki),Wr=e=>(0,p.Fs)(e,c.map(mn),Ui),Br=(e,t)=>(0,p.Fs)(S.mX(e,1,t?.maxChunkSize??Be),c.catchAllCause((t=>(0,p.Fs)(S.$Q(e),c.flatMap((e=>e&&s.fT(t)?de():pe(t)))))),mn,t?.shutdown?Gt(S.n_(e)):p.D_),qr=e=>(0,p.Fs)(O.Bd(e),c.map((e=>bn(e.next(void 0)))),Ki),zr=(e,t)=>Ui(c.map(c.acquireRelease(c.sync((()=>e().getReader())),(e=>c.promise((()=>e.cancel())))),(e=>bn(c.flatMap(c.tryPromise({try:()=>e.read(),catch:e=>F.zN(t(e))}),(({done:e,value:t})=>e?c.fail(F.dv()):c.succeed(t))))))),Lr=(e,t,r=4096)=>Ui(c.map(c.acquireRelease(c.sync((()=>e().getReader({mode:"byob"}))),(e=>c.promise((()=>e.cancel())))),(e=>ft(Yr(Hr(e,t,r)),(e=>(0,v.$J)(e,"EOF")?Ut:nr(e)))))),Hr=(e,t,r)=>{const s=new ArrayBuffer(r);return Ls(0,(r=>c.flatMap(c.tryPromise({try:()=>e.read(new Uint8Array(s,r,s.byteLength-r)),catch:e=>t(e)}),(({done:e,value:t})=>{if(e)return c.fail({_tag:"EOF"});const n=r+t.byteLength;return c.succeed([t,n>=s.byteLength?F.dv():F.zN(n)])}))))},Jr=(0,p.XY)(2,((e,t)=>{const r=e=>q.u({onInput:s=>{const[i,o]=((e,r)=>{if(n.Im(r))return[e,n.Ie()];const s=[];let i,o=0,a=0,u=n.Ie();switch(e._tag){case"Some":{const c=e.value;i=c[0];let l=!0;for(;l&&a<r.length;){const e=n.$v(r,a),u=t(e);if(!h.aI(i,u)){const e=c[1],t=n.Iv(Array.from(r).slice(o,a)),h=n.u2(e,t);s.push([i,h]),i=u,o=a,l=!1}a+=1}l&&(u=c[1]);break}case"None":i=t(n.$v(r,a)),a+=1}for(;a<r.length;){const e=n.$v(r,a),u=t(e);h.aI(i,u)||(s.push([i,n.Iv(Array.from(r).slice(o,a))]),i=u,o=a),a+=1}const c=n.u2(u,n.Iv(Array.from(r).slice(o,a))),l=n.Iv(s);return[F.zN([i,c]),l]})(e,s);return n.Im(o)?r(i):q.qI(q.M9(o),(()=>r(i)))},onFailure:t=>F.YW(e,{onNone:()=>q.AT(t),onSome:e=>q.qI(q.M9(n.of(e)),(()=>q.AT(t)))}),onDone:t=>F.YW(e,{onNone:()=>q.B6(t),onSome:e=>q.qI(q.M9(n.of(e)),(()=>q.B6(t)))})});return new je(C.tw(Er(e),r(F.dv())))})),$r=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,un(t),vt))),Vr=(0,p.XY)(3,((e,t,r)=>Je(e,H.ul(t),O.ji(r)))),Kr=(0,p.XY)(2,((e,t)=>{const r=e=>(0,p.Fs)(d.wt(e),c.map(F.YW({onNone:()=>q.$5({onInput:t=>q.qI(q.M9(t),(()=>r(e))),onFailure:q.fJ,onDone:()=>q.rI}),onSome:f.YW({onFailure:q.AT,onSuccess:()=>q.rI})})),C.oA);return new je((0,p.Fs)(c.forkScoped(t),c.map((t=>(0,p.Fs)(Er(e),q.WK(r(t))))),C.A2))})),Ur=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Kr(i.yy(t))))),Gr=(0,p.XY)(2,((e,t)=>{const r=(0,p.Fs)(a.wt(t),c.map(F.YW({onNone:()=>q.$5({onInput:e=>(0,p.Fs)(q.M9(e),q.qI((()=>r))),onFailure:q.fJ,onDone:()=>q.rI}),onSome:e=>C.oA(c.match(e,{onFailure:q.fJ,onSuccess:()=>q.rI}))})),C.oA);return new je((0,p.Fs)(Er(e),q.WK(r)))})),Zr=()=>new je(C.As()),Qr=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,es(t,Yr(as(!0,!1)))))),es=(0,p.XY)(3,((e,t,r)=>{const s=e=>q.u({onInput:t=>q.qI(q.uS(ie(e,Ae.of(t))),(()=>s(e))),onFailure:t=>q.uS(ie(e,Ae.AT(t))),onDone:()=>q.uS(ie(e,Ae._N))});return new je(C.A2((0,p.Fs)(ne(),c.zip(ne()),c.tap((([t])=>(0,p.Fs)(Er(e),C.Hh(C.xs),q.WK(s(t)),j.M_,c.forkScoped))),c.tap((([e,r])=>(0,p.Fs)(Er(t),C.Hh(C.xs),q.WK(s(r)),j.M_,c.forkScoped))),c.map((([e,t])=>{const s=(r,n)=>q.u({onInput:i=>i&&!r?(0,p.Fs)(q.uS(oe(e)),q.qI(Ae.YW({onEnd:()=>n?q.rI:s(!0,n),onFailure:q.AT,onSuccess:e=>(0,p.Fs)(q.M9(e),q.qI((()=>s(r,n))))}))):i||n?s(r,n):(0,p.Fs)(q.uS(oe(t)),q.qI(Ae.YW({onEnd:()=>r?q.rI:s(r,!0),onFailure:q.AT,onSuccess:e=>(0,p.Fs)(q.M9(e),q.qI((()=>s(r,n))))}))),onFailure:q.AT,onDone:()=>q.rI});return(0,p.Fs)(Er(r),C.Hh(C.xs),q.WK(s(!1,!1)))})))))})),ts=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.tw(q.DY((()=>{const e=r=>q.u({onInput:s=>{const i=[];let o=r;for(const e of s)o?(o=!1,i.push(e)):(i.push(t),i.push(e));return(0,p.Fs)(q.M9(n.Iv(i)),q.qI((()=>e(o))))},onFailure:q.AT,onDone:()=>q.rI});return e(!0)}))))))),rs=(0,p.XY)(2,((e,{end:t,middle:r,start:s})=>(0,p.Fs)(as(s),Yt((0,p.Fs)(e,ts(r))),Yt(as(t))))),ss=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ns(i.yy(t))))),ns=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.S6(t))))),is=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.P4(t))))),os=(e,t)=>Li(e,(e=>F.zN([e,t(e)]))),as=(...e)=>Pr(e),us=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.Hq(n.Tj(t)))))),cs=(0,p.XY)(3,((e,t,r)=>{const s=e=>q.$5({onInput:t=>{const[i,o]=n.OM(t,e,r);return q.qI(q.M9(o),(()=>s(i)))},onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),q.WK(s(t))))})),ls=(0,p.XY)(3,((e,t,r)=>gi((()=>{const s=e=>q.$5({onInput:t=>(0,p.Fs)(c.suspend((()=>{const i=[];return(0,p.Fs)(t,c.reduce(e,((e,t)=>(0,p.Fs)(r(e,t),c.flatMap((([e,t])=>{return(0,p.Fs)((r=t,c.sync((()=>{i.push(r)}))),c.as(e));var r}))))),c.match({onFailure:e=>0!==i.length?C.aN(q.M9(n.Iv(i)),q.fJ(e)):q.fJ(e),onSuccess:e=>q.qI(q.M9(n.Iv(i)),(()=>s(e)))}))})),C.oA),onFailure:q.fJ,onDone:()=>q.rI});return new je((0,p.Fs)(Er(e),C.tw(s(t))))})))),hs=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,_s(t.onFailure),us(t.onSuccess)))),fs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.Hq(t))))),ds=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.qp(t))))),ps=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,gs((e=>n.Ts(t(e))))))),gs=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,fs(n.qI(t))))),ms=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ys(t),gs(p.D_)))),bs=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ys((e=>(0,p.Fs)(t(e),c.map(n.Ts)))),gs(p.D_)))),ys=(0,p.XY)(2,((e,t)=>{const r=e=>{const s=e.next();if(s.done)return q.u({onInput:e=>r(e[Symbol.iterator]()),onFailure:q.AT,onDone:q.Py});{const i=s.value;return C.oA(c.map(t(i),(t=>q.qI(q.M9(n.of(t)),(()=>r(e))))))}};return new je((0,p.Fs)(Er(e),q.WK(q.DY((()=>r(n.Ie()[Symbol.iterator]()))))))})),Fs=(0,p.XY)(3,((e,t,r)=>new je((0,p.Fs)(Er(e),C.Hh(C.xs),C.XV(r,t),C.Hq(n.of))))),_s=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.xm(t))))),vs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.aW(t))))),Is=(0,p.XY)((e=>We(e[1])),((e,t,r)=>Ns(e,t,{onSelf:p.D_,onOther:p.D_,haltStrategy:r?.haltStrategy}))),Ss=(0,p.XY)((e=>Symbol.iterator in e[0]),((e,t)=>_r(Pr(e),t))),ws=(0,p.XY)(2,((e,t)=>Ns(e,t,{onSelf:l.kb,onOther:l.pG}))),ks=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Is(Bt(t))))),Ys=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Bt(e),Is(t)))),Ns=(0,p.XY)(3,((e,t,r)=>{const s=r.haltStrategy?(e=>{switch(e){case"left":return X;case"right":return R;case"both":return M;case"either":return A;default:return e}})(r.haltStrategy):D,n=e=>t=>e||!f.oJ(t)?b(c.suspend((()=>t))):y((e=>c.suspend((()=>e))));return new je(C.XQ(Er(us(e,r.onSelf)),{other:Er(us(t,r.onOther)),onSelfDone:n("Either"===s._tag||"Left"===s._tag),onOtherDone:n("Either"===s._tag||"Right"===s._tag)}))})),Ts=e=>kn(e,H.kB),Es=Mr(c.never),Os=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,dt((e=>Mr((0,p.Fs)(t(e),c.zipRight(c.failCause(e))))))))),xs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),q.sz((e=>f.oJ(e)?t():c.void)))))),Xs=e=>(0,p.Fs)(e,Rs(p.D_)),Rs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.kS(t))))),Ms=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.NW((()=>Er(t()))))))),As=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,us(l.kb),Ms((()=>(0,p.Fs)(t(),us(l.pG))))))),Ds=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Ms((()=>ir(t)))))),Ps=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Cs((()=>n.of(t())))))),Cs=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,js((()=>new je(q.M9(t()))))))),js=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>n.Im(e)?q.DY((()=>r)):(0,p.Fs)(q.M9(e),C.aN(C.As())),onFailure:q.fJ,onDone:()=>q.DY((()=>Er(t())))});return new je((0,p.Fs)(Er(e),q.WK(r)))})),Ws=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Ms((()=>pi(t)))))),Bs=(e,t)=>qs(e,(e=>{const r=t(e);return[n.of(r[0]),r[1]]})),qs=(e,t)=>{const r=e=>{const s=t(e);return F.YW(s[1],{onNone:()=>C.aN(q.M9(s[0]),q.rI),onSome:e=>q.qI(q.M9(s[0]),(()=>r(e)))})};return new je(q.DY((()=>r(e))))},zs=(e,t)=>{const r=e=>C.oA(c.map(t(e),(([e,t])=>F.YW(t,{onNone:()=>C.aN(q.M9(e),q.rI),onSome:t=>q.qI(q.M9(e),(()=>r(t)))}))));return new je(q.DY((()=>r(e))))},Ls=(e,t)=>zs(e,(e=>(0,p.Fs)(t(e),c.map((([e,t])=>[n.of(e),t]))))),Hs=(0,p.XY)(2,((e,t)=>{const r="Emit",s="Halt";return(0,p.Fs)(a.L8(),c.flatMap((n=>(0,p.Fs)(ne(),c.map((i=>{const o=H.VQ(H.o6(t),{onFailure:e=>H.aN(H.uS(a.fJ(n,e)),H.fJ(e)),onSuccess:([e,t])=>{const o=q.u({onInput:e=>q.qI(q.uS(ie(i,{_tag:r,elements:e})),(()=>o)),onFailure:e=>C.aN(q.uS(ie(i,{_tag:s,cause:e})),q.AT(e)),onDone:e=>C.aN(q.uS(ie(i,{_tag:"End"})),q.rI)});return H.Ef((0,p.Fs)(q.uS(a.Py(n,e)),C.aN(q.uS((0,p.Fs)(i,ie({_tag:r,elements:t})))),C.aN(o)))}}),u=(0,p.Fs)(oe(i),c.map((e=>{switch(e._tag){case r:return(0,p.Fs)(q.M9(e.elements),q.qI((()=>u)));case s:return q.AT(e.cause);case"End":return q.rI}})),C.oA);return(0,p.Fs)(e,wi((e=>a.AT(n,e))),kn(o),c.forkScoped,c.zipRight(a.Tx(n)),c.map((e=>[e,new je(u)])))}))))),c.flatten)})),Js=(0,p.XY)((e=>"function"==typeof e[1]),((e,t,r)=>$s(e,(e=>c.succeed(t(e)?l.kb(e):l.pG(e))),r))),$s=(0,p.XY)((e=>"function"==typeof e[1]),((e,t,r)=>(0,p.Fs)(ys(e,t),Dt({size:2,maximumLag:r?.bufferSize??16,decide:l.YW({onLeft:()=>c.succeed((e=>0===e)),onRight:()=>c.succeed((e=>1===e))})}),c.flatMap((([e,t])=>c.succeed([lr(Sr(Br(e,{shutdown:!0})),(e=>l.YW(e,{onLeft:F.zN,onRight:F.dv}))),lr(Sr(Br(t,{shutdown:!0})),(e=>l.YW(e,{onLeft:F.dv,onRight:F.zN})))])))))),Vs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.tw(H.pr(t)))))),Ks=(0,p.XY)(2,((e,t)=>new je(q.WK(Er(e),t)))),Us=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),C.tw(t))))),Gs=(0,p.XY)(2,((e,t)=>new je(C.aN(q.M9(t),Er(e))))),Zs=(0,p.XY)(2,((e,t)=>new je((0,p.Fs)(Er(e),q.Pp(t))))),Qs=(0,p.XY)(2,((e,t)=>new je(C.A2((0,p.Fs)(g.jq(t),c.map((t=>(0,p.Fs)(Er(e),q.Pp(t))))))))),en=(0,p.XY)(3,((e,t,r)=>tn(e,t,c.succeed(r)))),tn=(0,p.XY)(3,((e,t,r)=>rn(e,t,Mr(r)))),rn=(0,p.XY)(3,((e,t,r)=>rr((s=>br(r,(r=>(0,p.Fs)(e,Zs(o.WQ(s,t,r))))))))),sn=(0,p.XY)(2,((e,t)=>rr((r=>(0,p.Fs)(e,Zs(t(r))))))),nn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Qs((0,p.Fs)(g._O(),g.h1(t)))))),on=(e,t,r=Be)=>gi((()=>{if(e>t)return Ut;const s=(e,t,r)=>{const i=t-e+1;return i>r?(0,p.Fs)(q.M9(n.y1(e,e+r-1)),q.qI((()=>s(e+r,t,r)))):q.M9(n.y1(e,e+i-1))};return new je(s(e,t,r))})),an=(...e)=>a.L8().pipe(c.map((t=>{let r=null;return Ss(e.map(((e,s)=>e.pipe(_i((()=>null===r?(r=s,a.dz(t,f.rI),!0):r===s)),ns(a.Tx(t).pipe(c.flatMap((()=>r===s?c.never:c.void))))))),{concurrency:e.length})})),Ki),un=(0,p.XY)(2,((e,t)=>gi((()=>{const r=Math.max(t,1),s=cn(new ln(r),r);return new je((0,p.Fs)(Er(e),q.WK(s)))})))),cn=(e,t)=>q.u({onInput:r=>{if(r.length===t&&e.isEmpty())return q.qI(q.M9(r),(()=>cn(e,t)));if(r.length>0){const s=[];let i,o=0;for(;o<r.length;){for(;o<r.length&&void 0===i;)i=e.write((0,p.Fs)(r,n.$v(o))),o+=1;void 0!==i&&(s.push(i),i=void 0)}return q.qI(C.f4(...s),(()=>cn(e,t)))}return q.DY((()=>cn(e,t)))},onFailure:t=>C.aN(e.emitIfNotEmpty(),q.AT(t)),onDone:()=>e.emitIfNotEmpty()});class ln{n;builder=[];pos=0;constructor(e){this.n=e}isEmpty(){return 0===this.pos}write(e){if(this.builder.push(e),this.pos+=1,this.pos===this.n){const e=n.Iv(this.builder);return this.builder=[],this.pos=0,e}}emitIfNotEmpty(){return 0!==this.pos?q.M9(n.Iv(this.builder)):q.rI}}const hn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,fn(t,p.D_)))),fn=(0,p.XY)(3,((e,t,r)=>new je(C.h9(Er(e),(e=>F.YW(t(e),{onNone:()=>q.AT(s.F_(r(e))),onSome:q.fJ})))))),dn=(0,p.XY)(2,((e,t)=>lr(yn(e,t),(e=>l.YW(e,{onLeft:F.dv,onRight:F.zN}))))),pn=e=>bn((0,p.Fs)(e,c.mapError(F.zN))),gn=e=>mn((0,p.Fs)(e,c.mapError(F.zN))),mn=e=>Ji(e,(e=>(0,p.Fs)(c.map(e,(t=>F.zN([t,e]))),c.catchAll(F.YW({onNone:()=>c.succeed(F.dv()),onSome:c.fail}))))),bn=e=>mn((0,p.Fs)(e,c.map(n.of))),yn=(0,p.XY)(2,((e,t)=>In(e,t,{onElement:e=>l.pG(e),onSchedule:l.kb}))),Fn=(0,p.XY)(2,((e,t)=>lr(_n(e,t,{onElement:e=>F.zN(e),onSchedule:F.dv}),p.D_))),_n=(0,p.XY)(3,((e,t,r)=>{const s=(0,p.Fs)(O.Bd(t),c.map((e=>{const t=e=>F.YW(n.d5(e),{onNone:()=>i,onSome:t=>C.aN(q.M9(n.of(r.onElement(t))),s((0,p.Fs)(e,n.gv(1)),t))}),s=(i,o)=>{const a=(0,p.Fs)(e.next(o),c.as((0,p.Fs)(q.M9(n.of(r.onElement(o))),q.qI((()=>s(i,o)))))),u=(0,p.Fs)(e.last,c.orDie,c.flatMap((s=>(0,p.Fs)(e.reset,c.map((()=>(0,p.Fs)(q.M9(n.of(r.onSchedule(s))),C.aN(t(i)))))))));return(0,p.Fs)(a,c.orElse((()=>u)),C.oA)},i=q.$5({onInput:t,onFailure:q.fJ,onDone:()=>q.rI});return i})),C.oA);return new je((0,p.Fs)(Er(e),q.WK(s)))})),vn=e=>new je(C.ZD(q.M9(n.of(e)))),In=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(O.Bd(t),c.map((t=>{const s=(0,p.Fs)(t.last,c.orDie,c.map(r.onSchedule)),i=(0,p.Fs)(e,us(r.onElement),Er),o=C.oA(c.match(t.next(void 0),{onFailure:()=>q.rI,onSuccess:()=>(0,p.Fs)(i,C.aN((0,p.Fs)(s,c.map((e=>(0,p.Fs)(q.M9(n.of(e)),q.qI((()=>o))))),C.oA)))}));return new je((0,p.Fs)(i,C.aN(o)))})),Ki))),Sn=(e,t)=>br(Mr(c.zip(e,O.Bd(t))),(([t,r])=>Yt(di(t),$i(t,(t=>c.matchEffect(r.next(t),{onFailure:c.succeed,onSuccess:()=>c.map(e,(e=>F.zN([e,e])))})))))),wn=(0,p.XY)(2,((e,t)=>Ki(c.map(O.Bd(t),(t=>{const r=ft(e,(e=>Ki(c.matchEffect(t.next(e),{onFailure:()=>c.fail(e),onSuccess:()=>c.succeed((0,p.Fs)(r,vi((()=>t.reset))))}))));return r}))))),kn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Er(e),C.tw(H.pr(t)),C.KE))),Yn=e=>(0,p.Fs)(e,kn(H._U())),Nn=e=>(0,p.Fs)(e,kn(H.U9)),Tn=e=>(0,p.Fs)(e,kn(H.Ze)),En=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,An(t,p.ue,r),c.scoped))),On=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,Dn(t,p.ue,r),c.scoped))),xn=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,An(t,p.ue,r)))),Xn=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,Dn(t,p.ue,r)))),Rn=(0,p.XY)(4,((e,t,r,s)=>(0,p.Fs)(e,An(t,r,s),c.scoped))),Mn=(0,p.XY)(4,((e,t,r,s)=>(0,p.Fs)(e,Dn(t,r,s),c.scoped))),An=(0,p.XY)(4,((e,t,r,s)=>(0,p.Fs)(e,Un(H.AU(t,r,s))))),Dn=(0,p.XY)(4,((e,t,r,s)=>(0,p.Fs)(e,Un(H.R3(t,r,s))))),Pn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,kn(H.jJ(t))))),Cn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,kn(H.q$(t))))),jn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Un(H.q$(t))))),Wn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Un(H.jJ(t))))),Bn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,kn(H.Sh(t))))),qn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Un(H.Sh(t))))),zn=e=>(0,p.Fs)(e,kn(H.d5())),Ln=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Jn(t)))),Hn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Vn(t)))),Jn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Vn(t),c.scoped))),$n=(0,p.XY)(2,((e,t)=>{const r=q.u({onInput:e=>q.qI(q.uS(S.iI(t,n.Tj(e,f.Py))),(()=>r)),onFailure:e=>q.uS(S.x(t,f.AT(s.Tj(e,F.zN)))),onDone:()=>q.uS(S.x(t,f.fJ(F.dv())))});return(0,p.Fs)(q.WK(Er(e),r),C.Ze,j.M_,c.asVoid)})),Vn=(0,p.XY)(2,((e,t)=>{const r=q.u({onInput:e=>q.qI(q.M9(Ae.iv(e)),(()=>r)),onFailure:e=>q.M9(Ae.AT(e)),onDone:()=>q.M9(Ae._N)});return(0,p.Fs)(q.WK(Er(e),r),C.qp((e=>S.x(t,e))),C.Ze,j.M_,c.asVoid)})),Kn=e=>(0,p.Fs)(e,kn(H.HV())),Un=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Er(e),C.tw(H.pr(t)),C.Ze,j.M_))),Gn=e=>(0,p.Fs)(e,kn(H.cz)),Zn=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,si(t,((e,t)=>c.succeed(r(e,t))))))),Qn=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ei(((e,r)=>c.succeed(t(e,r))))))),ei=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,ls(F.dv(),((e,r)=>{switch(e._tag){case"None":return c.succeed([F.zN(r),r]);case"Some":return(0,p.Fs)(t(e.value,r),c.map((e=>[F.zN(e),e])))}}))))),ti=(0,p.XY)(2,((e,t)=>lr(ri(e,t,{onElement:F.zN,onSchedule:F.dv}),p.D_))),ri=(0,p.XY)(3,((e,t,r)=>{const s=(e,t)=>{const i=t.next();return i.done?q.u({onInput:t=>s(e,t[Symbol.iterator]()),onFailure:q.AT,onDone:q.B6}):C.oA(c.matchEffect(e.next(i.value),{onFailure:()=>(0,p.Fs)(e.last,c.orDie,c.map((o=>(0,p.Fs)(q.M9(n.L8(r.onElement(i.value),r.onSchedule(o))),q.qI((()=>s(e,t)))))),c.zipLeft(e.reset)),onSuccess:()=>c.succeed((0,p.Fs)(q.M9(n.of(r.onElement(i.value))),q.qI((()=>s(e,t)))))}))};return new je((0,p.Fs)(q.uS(O.Bd(t)),q.qI((t=>(0,p.Fs)(Er(e),q.WK(s(t,n.Ie()[Symbol.iterator]())))))))})),si=(0,p.XY)(3,((e,t,r)=>new je((0,p.Fs)(q.M9(n.of(t)),q.qI((()=>Er((0,p.Fs)(e,ls(t,((e,t)=>(0,p.Fs)(r(e,t),c.map((e=>[e,e]))))))))))))),ni=e=>new je(C.ye(C.P1((0,p.Fs)(e,c.map(n.of))),c.void)),ii=e=>(0,p.Fs)(e,_s(F.zN),ai((()=>F.dv()))),oi=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,us(F.WL(t))))),ai=(0,p.XY)(2,((e,t)=>ys(e,F.YW({onNone:()=>c.failSync(t),onSome:c.succeed})))),ui=(0,p.XY)(2,((e,t)=>ci(e,t,1))),ci=(0,p.XY)(3,((e,t,r)=>t<=0||r<=0?Rt(new s.nA("Invalid bounds - `chunkSize` and `stepSize` must be greater than zero")):new je(q.DY((()=>{const s=new L(t),i=(e,i)=>{if(e<t){const e=s.toChunk(),t=n.Im(e)?n.Ie():n.of(e);return(0,p.Fs)(q.M9(t),q.qI((()=>i)))}const o=e-(e-t)%r;if(o===e)return i;const a=e-(o-t+r),u=(0,p.Fs)(s.toChunk(),n.O6(a)),c=n.Im(u)?n.Ie():n.of(u);return(0,p.Fs)(q.M9(c),q.qI((()=>i)))},o=e=>q.u({onInput:i=>q.qI(q.M9(n.x1(i,((n,i)=>{s.put(n);const o=e+i+1;return o<t||(o-t)%r>0?F.dv():F.zN(s.toChunk())}))),(()=>o(e+i.length))),onFailure:t=>i(e,q.AT(t)),onDone:()=>i(e,q.rI)});return(0,p.Fs)(Er(e),q.WK(o(0)))}))))),li=(0,p.XY)(2,((e,t)=>{const r=(e,i)=>{const[o,a]=(0,p.Fs)(e,n.u2(i),n.cs(t));return n.Im(o)||n.Im(a)?s((0,p.Fs)(o,n.u2((0,p.Fs)(a,n.gv(1))))):(0,p.Fs)(q.M9(n.of(o)),q.qI((()=>r(n.Ie(),(0,p.Fs)(a,n.gv(1))))))},s=e=>q.$5({onInput:t=>r(e,t),onFailure:q.fJ,onDone:()=>n.Im(e)?q.rI:F.$I((0,p.Fs)(e,n.i8(t)))?C.aN(q.M9(n.of(e)),q.rI):C.aN(r(n.Ie(),e),q.rI)});return new je((0,p.Fs)(Er(e),q.WK(s(n.Ie()))))})),hi=(0,p.XY)(2,((e,t)=>{const r=(e,s)=>q.u({onInput:i=>{let o;const[a,u]=(0,p.Fs)(i,n.TS([(0,p.Fs)(e,F.WL((()=>n.Ie()))),s],(([e,r],s)=>{const i=(0,p.Fs)(e,n.BC(s));return r<t.length&&h.aI(s,(0,p.Fs)(t,n.$v(r)))?r+1===t.length?(void 0===o&&(o=[]),o.push((0,p.Fs)(i,n.s(i.length-t.length))),[n.Ie(),0]):[i,r+1]:[i,h.aI(s,(0,p.Fs)(t,n.$v(0)))?1:0]}))),c=void 0===o?n.Ie():n.Iv(o);return q.qI(q.M9(c),(()=>r(n.J_(a)?F.zN(a):F.dv(),u)))},onFailure:t=>F.YW(e,{onNone:()=>q.AT(t),onSome:e=>C.aN(q.M9(n.of(e)),q.AT(t))}),onDone:t=>F.YW(e,{onNone:()=>q.Py(t),onSome:e=>C.aN(q.M9(n.of(e)),q.Py(t))})});return new je((0,p.Fs)(Er(e),q.WK(r(F.dv(),0))))})),fi=e=>Ks(e,C.uz()),di=e=>Or(n.of(e)),pi=e=>gi((()=>Or(n.of(e())))),gi=e=>new je(q.DY((()=>Er(e())))),mi=(0,p.XY)(2,((e,t)=>{if(!Number.isInteger(t))return Rt(new s.nA(`${t} must be an integer`));const r=e=>q.$5({onInput:t=>{const s=(0,p.Fs)(t,n.s(Math.min(e,Number.POSITIVE_INFINITY))),i=Math.max(0,e-s.length);return i>0?(0,p.Fs)(q.M9(s),q.qI((()=>r(i)))):q.M9(s)},onFailure:q.fJ,onDone:q.Py});return new je((0,p.Fs)(Er(e),C.tw(0<t?r(t):q.rI)))})),bi=(0,p.XY)(2,((e,t)=>t<=0?Ut:new je((0,p.Fs)(c.succeed(new L(t)),c.map((t=>{const r=q.$5({onInput:e=>{for(const r of e)t.put(r);return r},onFailure:q.fJ,onDone:()=>(0,p.Fs)(q.M9(t.toChunk()),C.aN(q.rI))});return(0,p.Fs)(Er(e),q.WK(r))})),C.oA)))),yi=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>{const s=(0,p.Fs)(e,n.v6((e=>!t(e)))),i=(0,p.Fs)(e,n.gv(s.length),n.s(1));return n.Im(i)?(0,p.Fs)(q.M9(s),q.qI((()=>r))):q.M9((0,p.Fs)(s,n.u2(i)))},onFailure:q.fJ,onDone:q.Py});return new je((0,p.Fs)(Er(e),C.tw(r)))})),Fi=(0,p.XY)(2,((e,t)=>{const r=e=>{const s=e.next();return s.done?q.u({onInput:e=>r(e[Symbol.iterator]()),onFailure:q.AT,onDone:q.Py}):(0,p.Fs)(t(s.value),c.map((t=>t?q.M9(n.of(s.value)):(0,p.Fs)(q.M9(n.of(s.value)),q.qI((()=>r(e)))))),C.oA)};return new je((0,p.Fs)(Er(e),q.WK(r(n.Ie()[Symbol.iterator]()))))})),_i=(0,p.XY)(2,((e,t)=>{const r=q.$5({onInput:e=>{const s=(0,p.Fs)(e,n.v6(t));return s.length===e.length?(0,p.Fs)(q.M9(s),q.qI((()=>r))):q.M9(s)},onFailure:q.fJ,onDone:q.Py});return new je((0,p.Fs)(Er(e),C.tw(r)))})),vi=(0,p.XY)(2,((e,t)=>ys(e,(e=>c.as(t(e),e))))),Ii=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Si(t.onFailure),vi(t.onSuccess)))),Si=(0,p.XY)(2,((e,t)=>ft(e,(e=>Mr(c.zipRight(t(e),c.fail(e))))))),wi=(0,p.XY)(2,((e,t)=>{const r=q.u({onInput:e=>q.qI(q.M9(e),(()=>r)),onFailure:e=>q.uS(c.zipRight(t(e),c.failCause(e))),onDone:q.B6});return new je((0,p.Fs)(Er(e),q.WK(r)))})),ki=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Mr(c.all([S.Mm(1),a.L8()])),br((([r,s])=>{const n=kr(Br(r,{maxChunkSize:1})),i=q.u({onInput:e=>(0,p.Fs)(q.uS(S.x(r,Ae.iv(e))),q.Qr({onFailure:()=>q.qI(q.M9(e),(()=>C.As())),onSuccess:()=>q.qI(q.M9(e),(()=>i))})),onFailure:e=>(0,p.Fs)(q.uS(S.x(r,Ae.AT(e))),q.Qr({onFailure:()=>q.AT(e),onSuccess:()=>q.AT(e)})),onDone:()=>(0,p.Fs)(q.uS(S.x(r,Ae._N)),q.Qr({onFailure:()=>q.rI,onSuccess:()=>q.rI}))});return(0,p.Fs)(new je((0,p.Fs)(q.WK(Er(e),i),C.ye(c.zipRight(c.forkDaemon(S.x(r,Ae._N)),a.Tx(s))))),Is(sr((0,p.Fs)(kn(n,t),c.ensuring(c.zipRight(S.n_(r),a.Py(s,void 0)))))))}))))),Yi=(0,p.XY)(2,((e,t)=>Ni(e,{...t,cost:e=>c.succeed(t.cost(e))}))),Ni=(0,p.XY)(2,((e,t)=>"enforce"===t.strategy?Ti(e,t.cost,t.units,t.duration,t.burst??0):Ei(e,t.cost,t.units,t.duration,t.burst??0))),Ti=(e,t,r,s,n)=>{const o=(e,a)=>q.u({onInput:l=>(0,p.Fs)(t(l),c.zip(i.Ru),c.map((([t,i])=>{const c=(i-a)/u.kE(s),h=e+c*r,f=r+n<0?Number.POSITIVE_INFINITY:r+n,d=h<0?f:Math.min(h,f);return t<=d?(0,p.Fs)(q.M9(l),q.qI((()=>o(d-t,i)))):o(e,a)})),C.oA),onFailure:q.AT,onDone:()=>q.rI}),a=(0,p.Fs)(i.Ru,c.map((e=>o(r,e))),C.oA);return new je((0,p.Fs)(Er(e),C.tw(a)))},Ei=(e,t,r,s,n)=>{const o=(e,a)=>q.u({onInput:l=>(0,p.Fs)(t(l),c.zip(i.Ru),c.map((([t,c])=>{const h=(c-a)/u.kE(s),f=e+h*r,d=r+n<0?Number.POSITIVE_INFINITY:r+n,g=(f<0?d:Math.min(f,d))-t,m=g>=0?0:-g/r,b=u.ne(Math.max(0,m*u.kE(s)));return u.MM(b,u.v_)?(0,p.Fs)(q.uS(i.yy(b)),C.aN(q.M9(l)),q.qI((()=>o(g,c)))):q.qI(q.M9(l),(()=>o(g,c)))})),C.oA),onFailure:q.AT,onDone:()=>q.rI}),a=(0,p.Fs)(i.Ru,c.map((e=>o(r,e))),C.oA);return new je((0,p.Fs)(Er(e),C.tw(a)))},Oi=e=>((e,t)=>Sn(c.succeed(void 0),t))(0,O.ji(e)),xi=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Pi(e),c.map(c.timeoutFail({onTimeout:()=>F.dv(),duration:t})),Wr))),Xi=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,Mi(r,ir(t))))),Ri=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(Pi(e),c.map(c.timeoutFailCause({onTimeout:()=>s.Tj(t(),F.zN),duration:r})),Wr))),Mi=(0,p.XY)(3,((e,t,r)=>{const n=new s.Al("Stream Timeout");return(0,p.Fs)(e,Ri((()=>s.F_(n)),t),gt((e=>s.VY(e)&&s.Mr(e.defect)&&void 0!==e.defect.message&&"Stream Timeout"===e.defect.message?F.zN(r):F.dv())))})),Ai=e=>{if("number"==typeof e)return I.Mm(e);if("unbounded"===e.capacity)return I.dT({replay:e.replay});switch(e.strategy){case"dropping":return I.Ke(e);case"sliding":return I.p2(e);default:return I.Mm(e)}},Di=(0,p.XY)(2,((e,t)=>(0,p.Fs)(c.acquireRelease(Ai(t),(e=>I.n_(e))),c.tap((t=>(0,p.Fs)(e,Hn(t),c.forkScoped)))))),Pi=e=>c.map(C.Vl(Er(e)),(e=>(0,p.Fs)(e,c.mapError(F.zN),c.flatMap(l.YW({onLeft:()=>c.fail(F.dv()),onRight:c.succeed}))))),Ci=(0,p.XY)((e=>We(e[0])),((e,t)=>c.tap(c.acquireRelease("unbounded"===t?.strategy?S.dT():"dropping"===t?.strategy?S.Ke(t.capacity??2):"sliding"===t?.strategy?S.p2(t.capacity??2):S.Mm(t?.capacity??2),(e=>S.n_(e))),(t=>c.forkScoped(Vn(e,t)))))),ji=(0,p.XY)((e=>We(e[0])),((e,t)=>c.tap(c.acquireRelease(S.Mm(t?.capacity??2),(e=>S.n_(e))),(t=>c.forkScoped($n(e,t)))))),Wi=(0,p.XY)((e=>We(e[0])),((e,t)=>qi(e,E,t))),Bi=(0,p.XY)((e=>We(e[0])),((e,t)=>c.map(c.runtime(),(r=>qi(e,r,t))))),qi=(0,p.XY)((e=>We(e[0])),((e,t,r)=>{const s=N(t),i=Y(t);let o,a;return new ReadableStream({start(t){a=s(x.L8()),o=(0,p.Fs)(Pi(e),x.X$(a),s,c.tap((e=>c.sync((()=>{n.Tj(e,(e=>{t.enqueue(e)}))})))),c.tapErrorCause((()=>x.VN(a,f.rI))),c.catchTags({None:()=>c.sync((()=>{t.close()})),Some:e=>c.sync((()=>{t.error(e.value)}))}),c.asVoid)},pull:()=>new Promise((e=>{i(o,{scope:a}).addObserver((t=>e()))})),cancel:()=>new Promise((e=>{i(x.VN(a,f.rI)).addObserver((t=>e()))}))},r?.strategy)})),zi=(0,p.XY)(2,((e,t)=>{const r=q.DY((()=>{const r={ref:n.Ie()},s={ref:!1},i=q.DY((()=>{const e=r.ref;return n.Im(e)?q.$5({onInput:e=>(0,p.Fs)(q.M9(e),q.qI((()=>i))),onFailure:q.fJ,onDone:q.B6}):(r.ref=n.Ie(),(0,p.Fs)(C.xs(e),q.qI((()=>i))))})),o=e=>{const t=r.ref,s=n.u2(t,n.pb(e,(e=>0!==e.length)));return r.ref=s,s},a=q.$5({onInput:e=>q.qI(q.M9(e),(()=>a)),onFailure:q.fJ,onDone:e=>C.aN(q.OH((()=>{s.ref=!0})),q.B6(e))}),u=(0,p.Fs)(t,H.pr,q.ye,q.qI((([e,t])=>(0,p.Fs)(q.Py([s.ref,o(e)]),q.qI((([e,r])=>{const s=e&&n.Im(r)?q.rI:u;return(0,p.Fs)(q.M9(n.of(t)),q.qI((()=>s)))}))))));return(0,p.Fs)(Er(e),q.WK(a),q.WK(i),C.tw(u))}));return new je(r)})),Li=(e,t)=>Hi(e,(e=>(0,p.Fs)(t(e),F.Tj((([e,t])=>[n.of(e),t]))))),Hi=(e,t)=>{const r=e=>F.YW(t(e),{onNone:()=>q.rI,onSome:([e,t])=>q.qI(q.M9(e),(()=>r(t)))});return new je(q.DY((()=>r(e))))},Ji=(e,t)=>gi((()=>{const r=e=>C.oA(c.map(t(e),F.YW({onNone:()=>q.rI,onSome:([e,t])=>q.qI(q.M9(e),(()=>r(t)))})));return new je(r(e))})),$i=(e,t)=>Ji(e,(e=>(0,p.Fs)(t(e),c.map(F.Tj((([e,t])=>[n.of(e),t])))))),Vi=di(void 0),Ki=e=>_r(Mr(e)),Ui=e=>_r(ni(e)),Gi=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,sn((e=>(0,p.Fs)(e,o.WQ(t,r((0,p.Fs)(e,o.$v(t)))))))))),Zi=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,to(c.sync(t))))),Qi=(e,t)=>eo(t)(c.sync(e)),eo=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Mr(e),br((e=>(0,p.Fs)(t(e),F.WL((()=>Ut)))))))),to=(0,p.XY)(2,((e,t)=>(0,p.Fs)(Mr(t),br((t=>t?e:Ut))))),ro=function(){const e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],r=De.ZA(e?arguments[2]:arguments[1]);if(e){const e=arguments[0];return new je(C.fR(Er(e),t,r))}return e=>new je(C.fR(Er(e),t,r))},so=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Fo(t,((e,t)=>[e,t]))))),no=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,Fo(t,((e,t)=>[...e,t]))))),io=(0,p.XY)(2,((e,t)=>fo(e,{other:t.other,onSelf:e=>[e,t.defaultOther],onOther:e=>[t.defaultSelf,e],onBoth:(e,t)=>[e,t]}))),oo=(0,p.XY)(3,((e,t,r)=>fo(e,{other:t,onSelf:p.D_,onOther:()=>r,onBoth:e=>e}))),ao=(0,p.XY)(3,((e,t,r)=>fo(e,{other:t,onSelf:()=>r,onOther:p.D_,onBoth:(e,t)=>t}))),uo=(0,p.XY)(2,((e,t)=>ho(e,{other:t.other,onSelf:e=>[e,t.defaultOther],onOther:e=>[t.defaultSelf,e],onBoth:(e,t)=>[e,t],order:t.order}))),co=(0,p.XY)(2,((e,t)=>ho(e,{other:t.other,onSelf:p.D_,onOther:()=>t.defaultSelf,onBoth:e=>e,order:t.order}))),lo=(0,p.XY)(2,((e,t)=>ho(e,{other:t.other,onSelf:()=>t.defaultOther,onOther:p.D_,onBoth:(e,t)=>t,order:t.order}))),ho=(0,p.XY)(2,((e,t)=>{const r=(e,i,o)=>{switch(e._tag){case Fe:return(0,p.Fs)(i,c.match({onFailure:f.fJ,onSuccess:e=>f.Py([n.Tj(e,(([e,r])=>[e,t.onSelf(r)])),we])}));case _e:return(0,p.Fs)(o,c.match({onFailure:f.fJ,onSuccess:e=>f.Py([n.Tj(e,(([e,r])=>[e,t.onOther(r)])),ke])}));case ve:return(0,p.Fs)(St(i),c.zip(St(o),{concurrent:!0}),c.matchEffect({onFailure:e=>c.succeed(f.fJ(F.zN(e))),onSuccess:([e,a])=>F.Ru(e)&&F.Ru(a)?n.Im(e.value)&&n.Im(a.value)?r(Ye,i,o):n.Im(e.value)?r(Ne(a.value),i,o):n.Im(a.value)?r(Te(e.value),i,o):c.succeed(f.Py(s(e.value,a.value))):F.Ru(e)&&F.$I(a)?n.Im(e.value)?r(we,i,o):c.succeed(f.Py([(0,p.Fs)(e.value,n.Tj((([e,r])=>[e,t.onSelf(r)]))),we])):F.$I(e)&&F.Ru(a)?n.Im(a.value)?r(ke,i,o):c.succeed(f.Py([(0,p.Fs)(a.value,n.Tj((([e,r])=>[e,t.onOther(r)]))),ke])):c.succeed(f.fJ(F.dv()))}));case Ie:return c.matchEffect(i,{onFailure:F.YW({onNone:()=>c.succeed(f.Py([(0,p.Fs)(e.rightChunk,n.Tj((([e,r])=>[e,t.onOther(r)]))),ke])),onSome:e=>c.succeed(f.fJ(F.zN(e)))}),onSuccess:t=>n.Im(t)?r(Ne(e.rightChunk),i,o):c.succeed(f.Py(s(t,e.rightChunk)))});case Se:return c.matchEffect(o,{onFailure:F.YW({onNone:()=>c.succeed(f.Py([n.Tj(e.leftChunk,(([e,r])=>[e,t.onSelf(r)])),we])),onSome:e=>c.succeed(f.fJ(F.zN(e)))}),onSuccess:t=>n.Im(t)?r(Te(e.leftChunk),i,o):c.succeed(f.Py(s(e.leftChunk,t)))})}},s=(e,r)=>{const s=(e,t)=>t<e.length-1,i=[];let o,a=0,u=0,c=(0,p.Fs)(e,n.$v(a)),l=(0,p.Fs)(r,n.$v(u)),h=c[0],f=c[1],d=l[0],g=l[1],m=!0;for(;m;){const b=t.order(h,d);if(0===b)i.push([h,t.onBoth(f,g)]),s(e,a)&&s(r,u)?(a+=1,u+=1,c=(0,p.Fs)(e,n.$v(a)),l=(0,p.Fs)(r,n.$v(u)),h=c[0],f=c[1],d=l[0],g=l[1]):s(e,a)?(o=Te((0,p.Fs)(e,n.gv(a+1))),m=!1):s(r,u)?(o=Ne((0,p.Fs)(r,n.gv(u+1))),m=!1):(o=Ye,m=!1);else if(b<0)if(i.push([h,t.onSelf(f)]),s(e,a))a+=1,c=(0,p.Fs)(e,n.$v(a)),h=c[0],f=c[1];else{const e=[];for(e.push(l);s(r,u);)u+=1,l=(0,p.Fs)(r,n.$v(u)),e.push(l);o=Ne(n.Iv(e)),m=!1}else if(i.push([d,t.onOther(g)]),s(r,u))u+=1,l=(0,p.Fs)(r,n.$v(u)),d=l[0],g=l[1];else{const t=[];for(t.push(c);s(e,a);)a+=1,c=(0,p.Fs)(e,n.$v(a)),t.push(c);o=Te(n.Iv(t)),m=!1}}return[n.Iv(i),o]};return kt(e,t.other,Ye,r)})),fo=(0,p.XY)(2,((e,t)=>{const r=(e,i,o)=>{switch(e._tag){case Fe:return c.matchEffect(i,{onFailure:e=>c.succeed(f.fJ(e)),onSuccess:e=>c.succeed(f.Py([n.Tj(e,t.onSelf),we]))});case _e:return c.matchEffect(o,{onFailure:e=>c.succeed(f.fJ(e)),onSuccess:e=>c.succeed(f.Py([n.Tj(e,t.onOther),ke]))});case ve:return(0,p.Fs)(St(i),c.zip(St(o),{concurrent:!0}),c.matchEffect({onFailure:e=>c.succeed(f.fJ(F.zN(e))),onSuccess:([e,a])=>F.Ru(e)&&F.Ru(a)?n.Im(e.value)&&n.Im(a.value)?r(Ye,i,o):n.Im(e.value)?r(Ne(a.value),i,o):n.Im(a.value)?r(Te(e.value),i,o):c.succeed(f.Py(s(e.value,a.value,t.onBoth))):F.Ru(e)&&F.$I(a)?c.succeed(f.Py([n.Tj(e.value,t.onSelf),we])):F.$I(e)&&F.Ru(a)?c.succeed(f.Py([n.Tj(a.value,t.onOther),ke])):c.succeed(f.fJ(F.dv()))}));case Ie:return c.matchEffect(i,{onFailure:F.YW({onNone:()=>c.succeed(f.Py([n.Tj(e.rightChunk,t.onOther),ke])),onSome:e=>c.succeed(f.fJ(F.zN(e)))}),onSuccess:a=>n.Im(a)?r(Ne(e.rightChunk),i,o):n.Im(e.rightChunk)?r(Te(a),i,o):c.succeed(f.Py(s(a,e.rightChunk,t.onBoth)))});case Se:return c.matchEffect(o,{onFailure:F.YW({onNone:()=>c.succeed(f.Py([n.Tj(e.leftChunk,t.onSelf),we])),onSome:e=>c.succeed(f.fJ(F.zN(e)))}),onSuccess:a=>n.Im(a)?r(Te(e.leftChunk),i,o):n.Im(e.leftChunk)?r(Ne(a),i,o):c.succeed(f.Py(s(e.leftChunk,a,t.onBoth)))})}},s=(e,t,r)=>{const[s,i]=ko(e,t,r);switch(i._tag){case"Left":return n.Im(i.left)?[s,Ye]:[s,Te(i.left)];case"Right":return n.Im(i.right)?[s,Ye]:[s,Ne(i.right)]}};return kt(e,t.other,Ye,r)})),po=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,mo(t,((e,t)=>[e,t]))))),go=(...e)=>{if(0===e.length)return Ut;if(1===e.length)return us(e[0],(e=>[e]));const[t,...r]=e;return mo(t,go(...r),((e,t)=>[e,...t]))},mo=(0,p.XY)(3,((e,t,r)=>{const s=e=>(0,p.Fs)(e,c.flatMap((t=>n.Im(t)?s(e):c.succeed(t))));return(0,p.Fs)(Pi(e),c.map(s),c.zip((0,p.Fs)(Pi(t),c.map(s))),c.flatMap((([e,t])=>(0,p.Fs)(Ar(c.raceWith(e,t,{onSelfDone:(e,t)=>(0,p.Fs)(c.suspend((()=>e)),c.zipWith(d.fj(t),((e,t)=>[e,t,!0]))),onOtherDone:(e,t)=>(0,p.Fs)(c.suspend((()=>e)),c.zipWith(d.fj(t),((e,t)=>[t,e,!1])))})),br((([s,i,o])=>(0,p.Fs)(Mr(w.L8([n.tt(s),n.tt(i)])),br((a=>(0,p.Fs)(Or(o?(0,p.Fs)(i,n.Tj((e=>r(n.tt(s),e)))):(0,p.Fs)(s,n.Tj((e=>r(e,n.tt(i)))))),Yt((0,p.Fs)(bn(e),ws(bn(t)),ys(l.YW({onLeft:e=>(0,p.Fs)(w.JP(a,(([t,s])=>[(0,p.Fs)(e,n.Tj((e=>r(e,s)))),[n.tt(e),s]]))),onRight:e=>(0,p.Fs)(w.JP(a,(([t,s])=>[(0,p.Fs)(e,n.Tj((e=>r(t,e)))),[t,n.tt(e)]])))})),br(Or))))))))),Pi))),Wr)})),bo=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,_o(t,((e,t)=>e.length>t.length?[(0,p.Fs)(e,n.s(t.length)),l.kb((0,p.Fs)(e,n.s(t.length)))]:[e,l.pG((0,p.Fs)(t,n.gv(e.length)))]))))),yo=(0,p.XY)(2,((e,t)=>(0,p.Fs)(e,_o(t,((e,t)=>e.length>t.length?[t,l.kb((0,p.Fs)(e,n.s(t.length)))]:[(0,p.Fs)(t,n.s(e.length)),l.pG((0,p.Fs)(t,n.gv(e.length)))]))))),Fo=(0,p.XY)(3,((e,t,r)=>(0,p.Fs)(e,_o(t,((e,t)=>ko(e,t,r)))))),_o=(0,p.XY)(3,((e,t,r)=>{const s=(e,t,r)=>{switch(e._tag){case Ee:return(0,p.Fs)(St(t),c.zip(St(r),{concurrent:!0}),c.matchEffect({onFailure:e=>c.succeed(f.fJ(F.zN(e))),onSuccess:([e,o])=>F.Ru(e)&&F.Ru(o)?n.Im(e.value)&&n.Im(o.value)?s(Xe,t,r):n.Im(e.value)?s(Re(o.value),t,r):n.Im(o.value)?s(Me(e.value),t,r):c.succeed(f.Py(i(e.value,o.value))):c.succeed(f.fJ(F.dv()))}));case Oe:return c.matchEffect(t,{onFailure:e=>c.succeed(f.fJ(e)),onSuccess:o=>n.Im(o)?s(Re(e.rightChunk),t,r):n.Im(e.rightChunk)?s(Me(o),t,r):c.succeed(f.Py(i(o,e.rightChunk)))});case xe:return c.matchEffect(r,{onFailure:e=>c.succeed(f.fJ(e)),onSuccess:o=>n.Im(o)?s(Me(e.leftChunk),t,r):n.Im(e.leftChunk)?s(Re(o),t,r):c.succeed(f.Py(i(e.leftChunk,o)))})}},i=(e,t)=>{const[s,i]=r(e,t);switch(i._tag){case"Left":return n.Im(i.left)?[s,Xe]:[s,Me(i.left)];case"Right":return n.Im(i.right)?[s,Xe]:[s,Re(i.right)]}};return(0,p.Fs)(e,kt(t,Xe,s))})),vo=e=>(0,p.Fs)(e,cs(0,((e,t)=>[e+1,[t,e]]))),Io=e=>{const t=e=>q.u({onInput:r=>{const[s,i]=n.OM(r,e,((e,t)=>[F.zN(t),(0,p.Fs)(e,F.Tj((e=>[e,t])))])),o=n.x1(i,(e=>F.Ru(e)?F.zN([e.value[0],F.zN(e.value[1])]):F.dv()));return q.qI(q.M9(o),(()=>t(s)))},onFailure:q.AT,onDone:()=>F.YW(e,{onNone:()=>q.rI,onSome:e=>C.aN(q.M9(n.of([e,F.dv()])),q.rI)})});return new je((0,p.Fs)(Er(e),C.tw(t(F.dv()))))},So=e=>(0,p.Fs)(e,cs(F.dv(),((e,t)=>[F.zN(t),[e,t]]))),wo=e=>(0,p.Fs)(Io(So(e)),us((([[e,t],r])=>[e,t,(0,p.Fs)(r,F.Tj((e=>e[1])))]))),ko=(e,t,r)=>e.length>t.length?[(0,p.Fs)(e,n.s(t.length),n.OY(t,r)),l.kb((0,p.Fs)(e,n.gv(t.length)))]:[(0,p.Fs)(e,n.OY((0,p.Fs)(t,n.s(e.length)),r)),l.pG((0,p.Fs)(t,n.gv(e.length)))],Yo=di({}),No=(0,p.XY)((e=>"string"!=typeof e[0]),((e,t,r,s)=>br(e,(e=>us(r(e),(r=>({...e,[t]:r})))),s))),To=z.Jr(us),Eo=z.zM(us),Oo=e=>new je(e),xo=(0,p.XY)((e=>We(e[0])),((e,t="utf-8")=>gi((()=>{const r=new TextDecoder(t);return us(e,(e=>r.decode(e)))})))),Xo=e=>gi((()=>{const t=new TextEncoder;return us(e,(e=>t.encode(e)))})),Ro=(e,t,r)=>Ue((s=>{let i=[],o=!1;function a(e){i.push(e),o||(o=!0,queueMicrotask((()=>{const e=i;i=[],o=!1,s.chunk(n.Iv(e))})))}return e.addEventListener(t,a,r),c.sync((()=>e.removeEventListener(t,a,r)))}),"unbounded")},35021:(e,t,r)=>{r.d(t,{K0:()=>h,dv:()=>m,u4:()=>g});var s=r(61369),n=r(6517),i=r(56572),o=r(72620);const a=Symbol.for("effect/Supervisor"),u={_T:e=>e};class c{underlying;value0;[a]=u;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,r,s){this.underlying.onStart(e,t,r,s)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new c(this,(0,s.Fs)(this.value,o.TjK(e)))}zip(e){return new l(this,e)}}class l{left;right;_tag="Zip";[a]=u;constructor(e,t){this.left=e,this.right=t}get value(){return o.yU6(this.left.value,this.right.value)}onStart(e,t,r,s){this.left.onStart(e,t,r,s),this.right.onStart(e,t,r,s)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new c(this,(0,s.Fs)(this.value,o.TjK(e)))}zip(e){return new l(this,e)}}const h=e=>(0,i.i5)(e,a)&&(0,i.$J)(e,"Zip");class f{[a]=u;fibers=new Set;get value(){return o.OH5((()=>Array.from(this.fibers)))}onStart(e,t,r,s){this.fibers.add(s)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new c(this,(0,s.Fs)(this.value,o.TjK(e)))}zip(e){return new l(this,e)}onRun(e,t){return e()}}class d{effect;[a]=u;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,r,s){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new c(this,(0,s.Fs)(this.value,o.TjK(e)))}zip(e){return new l(this,e)}onRun(e,t){return e()}}const p=()=>new f,g=o.OH5(p),m=(0,n.V)("effect/Supervisor/none",(()=>{return e=o.rIH,new d(e);var e}))},99688:(e,t,r)=>{r.d(t,{AT:()=>m,OB:()=>b,Vw:()=>p,YW:()=>y,_K:()=>f,_N:()=>g,iv:()=>d,of:()=>F});var s=r(20634),n=r(28420),i=r(55519),o=r(96949),a=r(61369),u=r(77948),c=r(53533);const l=Symbol.for("effect/Take"),h={_A:e=>e,_E:e=>e};class f{exit;[l]=h;constructor(e){this.exit=e}pipe(){return(0,c.t)(this,arguments)}}const d=e=>new f(o.Py(e)),p=e=>i.suspend((()=>e.exit)),g=new f(o.fJ(u.dv())),m=e=>new f(o.AT((0,a.Fs)(e,s.Tj(u.zN)))),b=e=>i.matchCause(e,{onFailure:e=>u.YW(s.Ki(e),{onNone:()=>g,onSome:m}),onSuccess:d}),y=(0,a.XY)(2,((e,{onEnd:t,onFailure:r,onSuccess:n})=>o.YW(e.exit,{onFailure:e=>u.YW(s.Ki(e),{onNone:t,onSome:r}),onSuccess:n}))),F=e=>new f(o.Py(n.of(e)))},27514:(e,t,r)=>{r.d(t,{Ez:()=>o,L8:()=>i,Te:()=>a,Tz:()=>n,Vv:()=>l,ZA:()=>f,uV:()=>h});var s=r(89702);const n=Symbol.for("effect/Tracer"),i=e=>({[n]:n,...e}),o=s.Io("effect/Tracer"),a=s.Io("effect/ParentSpan"),u=function(){return function(e){let t="";for(let r=0;r<e;r++)t+="abcdef0123456789".charAt(Math.floor(16*Math.random()));return t}}();class c{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,r,s,n,i){this.name=e,this.parent=t,this.context=r,this.links=s,this.startTime=n,this.kind=i,this.status={_tag:"Started",startTime:n},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:u(32),this.spanId=u(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,r){this.events.push([e,t,r??{}])}}const l=i({span:(e,t,r,s,n,i)=>new c(e,t,r,s,n,i),context:e=>e()}),h=e=>({_tag:"ExternalSpan",spanId:e.spanId,traceId:e.traceId,sampled:e.sampled??!0,context:e.context??s.Ie()}),f=e=>{if(!1===e?.captureStackTrace)return e;if(void 0!==e?.captureStackTrace&&"boolean"!=typeof e.captureStackTrace)return e;const t=Error.stackTraceLimit;Error.stackTraceLimit=3;const r=new Error;Error.stackTraceLimit=t;let s=!1;return{...e,captureStackTrace:()=>{if(!1!==s)return s;if(void 0!==r.stack){const e=r.stack.split("\n");if(void 0!==e[3])return s=e[3].trim(),s}}}}},53563:(e,t,r)=>{r.d(t,{M:()=>s});const s=()=>"3.5.7"}}]);