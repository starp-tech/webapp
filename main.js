(()=>{var e={130512:(e,t,n)=>{var r,o;r=[n(535149),n(449377),n(477983),n(412082),n(470072),n(936665),n(964657),n(490320)],void 0===(o=function(e,t,r,o,i,a,l,u){"use strict";var d=n(124994);e=d(e),t=d(t),o=d(o),i=d(i);var c="@font-face {\n  src: url("+o.default+");\n  font-family: Ionicons;\n}",s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=c:s.appendChild(document.createTextNode(c)),document.head.appendChild(s),(0,u.initUserData)().then((function(){(0,l.createRoot)(document.getElementById("root")).render((0,a.createElement)(i.default))}))}.apply(t,r))||(e.exports=o)},470072:(e,t,n)=>{var r,o;r=[t,n(442932),n(936665),n(742907),n(595991),n(200117),n(490320),n(304285),n(926488),n(956199),n(971956),n(642233),n(323817)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,o=y(o),i=y(i),a=y(a),l=y(l),i.default.ignoreAllLogs();var v=Object.assign({},s.MD3DarkTheme,{fonts:(0,s.configureFonts)({config:{default:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:"400",letterSpacing:.5,lineHeight:22,fontSize:20}},isV3:!0})});t.default=function(){var e=(0,c.useUserData)(),t=e.userDataState,i=e.userDataDispatch;return o.default.createElement(p.Provider,{store:f.store},o.default.createElement(m.QueryClientProvider,{client:u.queryClient},o.default.createElement(d.UserCtx.Provider,{value:u.UserData},o.default.createElement(d.UserDataState.Provider,{value:t},o.default.createElement(d.UserDataDispatch.Provider,{value:i},o.default.createElement(r.SafeAreaProvider,null,o.default.createElement(s.PaperProvider,{theme:v},o.default.createElement(o.default.Fragment,null,o.default.createElement("style",{type:"text/css"},"\n                    @font-face {\n                      font-family: 'MaterialCommunityIcons';\n                      src: url("+n(227846)+") format('truetype');\n                    }\n                  "),o.default.createElement(o.default.Fragment,null)),o.default.createElement(l.default,null))))))))}}.apply(t,r))||(e.exports=o)},946679:(e,t,n)=>{var r,o;r=[t,n(29293),n(732780),n(595991)],void 0===(o=function(e,r,o,i){"use strict";var a,l=n(124994);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createBlobDB=void 0,r=l(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=l(i);(function(){var e=(0,r.default)((function*(){a=yield o.openDatabaseAsync("blobDB7"),yield a.execAsync("\n    DROP TABLE IF EXISTS blobs;\n    CREATE TABLE IF NOT EXISTS blobs (id INTEGER PRIMARY KEY NOT NULL, data BLOB, parent VARCHAR);\n  ")}))})(),t.createBlobDB=function(){var e=(0,r.default)((function*(){return{writeBlob:function(){var e=(0,r.default)((function*(e,t){return yield a.runAsync("INSERT INTO blobs (parent, data) VALUES (?, ?)",e,t)}));return function(t,n){return e.apply(this,arguments)}}(),readBlobs:function(){var e=(0,r.default)((function*(e){var t=yield a.getAllAsync("SELECT * FROM blobs WHERE parent = ? ORDER BY id ASC limit 1000",[e]),n="DELETE FROM blobs WHERE id IN ("+t.map((function(e){return e.id})).join(",")+")";return yield a.runAsync(n),t}));return function(t){return e.apply(this,arguments)}}()}}));return function(){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=o)},614820:(e,t,n)=>{var r,o;r=[t,n(29293),n(527723),n(616392),n(630389)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.sendChatMessage=t.getPublicMessages=t.genMnemonic=t.createNewParty=void 0,r=l(r),i=l(i);var u=t.sendChatMessage=function(){var e=(0,r.default)((function*(e,t,n,r){void 0===r&&(r={});var a=yield(0,o.getUserData)(),l={id:i.default.v4(),text:t,userId:a.id,chatId:e,folderId:e,messageStatus:"sent",userName:a.name,createdAt:(new Date).valueOf()},u=Object.assign({},l,r),d=yield(0,o.createDBConn)(e,n);return yield(0,o.writeItem)(u,d),u}));return function(t,n,r,o){return e.apply(this,arguments)}}(),d=(t.getPublicMessages=function(){var e=(0,r.default)((function*(e,t,n,r){void 0===n&&(n=15),void 0===r&&(r=0);try{var i,a,l,u,d=yield(0,o.getById)(e);(d&&d.mnemonic||t)&&(u=yield(0,o.createDBConn)(e,(null==d?void 0:d.mnemonic)||t,!0));var c=null==(i=u)?void 0:i.createQuery((function(t){return t.selectFrom("item").selectAll().where("chatId","=",e).orderBy("createdAt","desc").limit(n).offset(r)})),s=c&&(yield null==(a=u)?void 0:a.loadQuery(c));return null==s||null==(l=s.rows)?void 0:l.map((function(e){return e.item}))}catch(f){console.error("getPublicMessages error",f)}return[]}));return function(t,n,r,o){return e.apply(this,arguments)}}(),t.createNewParty=function(){var e=(0,r.default)((function*(e){console.info("createNewParty",e);var t=yield(0,o.getUserData)(),n=e.id,r=Object.assign({},e,{id:n,authorId:t.id,authorName:t.name,isContact:!0,mnemonic:d()});yield(0,o.writeItem)(r);return yield u(n,t.name+" has created chat "+e.name,r.mnemonic,{system:!0}),r}));return function(t){return e.apply(this,arguments)}}(),t.genMnemonic=function(){return[a.faker.animal.bird().split(" ").join("").toLowerCase(),a.faker.animal.bird().split(" ").join("").toLowerCase(),a.faker.color.human().split(" ").join("").toLowerCase(),a.faker.color.human().split(" ").join("").toLowerCase(),a.faker.color.human().split(" ").join("").toLowerCase(),a.faker.animal.fish().split(" ").join("").toLowerCase(),a.faker.animal.fish().split(" ").join("").toLowerCase(),a.faker.animal.fish().split(" ").join("").toLowerCase(),a.faker.animal.insect().split(" ").join("").toLowerCase(),a.faker.hacker.noun().split(" ").join("").toLowerCase(),a.faker.hacker.noun().split(" ").join("").toLowerCase(),a.faker.hacker.noun().split(" ").join("").toLowerCase()].join(" ")})}.apply(t,r))||(e.exports=o)},527723:(e,t,n)=>{var r,o;r=[t,n(585715),n(29293),n(616392),n(246326),n(93442),n(609209),n(595991),n(323817)],void 0===(o=function(e,r,o,i,a,l,u,d,c){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.writeItem=t.queryClient=t.initDatabaseRecord=t.indexAllFoldersForDB=t.getUserData=t.getPublicFolderContent=t.getFoldersByType=t.getFolderContent=t.getById=t.findByOriginalId=t.findBy=t.evolu=t.defaultDBName=t.dbSocket=t.dbMnemoCons=t.createDBConn=void 0,r=s(r),o=s(o),i=s(i),d=s(d);var f=t.queryClient=new c.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}}}),p=(0,a.database)({item:l.ItemTable}),m={};window.dbConns=m;var y=t.dbMnemoCons={},v=t.defaultDBName="starpy2",g=t.createDBConn=function(e,n,r){if(void 0===e&&(e=""+v),m[e])return m[e];if(n&&y[n])return y[n];var i={name:e,syncUrl:"https://db.starpy.me",enableWebsocketConnection:!0};n&&(i.mnemonic=n);var l=(0,a.createEvolu)(p,i);return e===v&&l.socket.then((function(e){t.dbSocket=e,console.info("dbSocket",e)})),m[e]=l,n&&(y[n]=l),!0===r?new Promise((function(t){b(l).then((function(){return t(l)})),l.subscribeSyncState((0,o.default)((function*(){"SyncStateIsSynced"===l.getSyncState()._tag&&(h[e]||(h[e]=!0),f.refetchQueries("folderContent_"+e),b(l))})))})):l},h={},b=t.indexAllFoldersForDB=function(){var e=(0,o.default)((function*(e){try{var t=null==e?void 0:e.createQuery((function(e){return e.selectFrom("item").selectAll().where("mnemonic","is not",null).where("isDeleted","is",null)})),n=(yield null==e?void 0:e.loadQuery(t)).rows.map(function(){var t=(0,o.default)((function*(t){var n=Object.assign({},t,t.item);n.isDeleted||(h[n.id]||(h[n.id]=!0,m[n.id]=e),n.isAuction&&f.refetchQueries("auction_"+n.id),yield f.refetchQueries("folderContent_"+n.id))}));return function(e){return t.apply(this,arguments)}}()).filter((function(e){return e}));yield Promise.all(n)}catch(r){console.error(r)}}));return function(t){return e.apply(this,arguments)}}(),w=(t.getUserData=function(){var e=(0,o.default)((function*(e){var t;e||(e=null==(t=localStorage)?void 0:t.getItem("authToken"));var n=yield I("userDoc",!0),o=(0,r.default)(n,1)[0],i=yield I("isDevice",!0);return Object.assign({},o,{},{devices:i})}));return function(t){return e.apply(this,arguments)}}(),t.getFolderContent=function(){var e=(0,o.default)((function*(e){var t,n,r=yield S(e),o=F;r&&r.mnemonic&&(o=yield g(e,r.mnemonic,!0));var i=null==(t=o)?void 0:t.createQuery((function(t){return t.selectFrom("item").selectAll().where("folderId","=",e).where("isDeleted","is",null).orderBy("orderId","asc").orderBy("lastUpdated","desc")}));return(yield null==(n=o)?void 0:n.loadQuery(i)).rows.map((function(e){return e.item}))}));return function(t){return e.apply(this,arguments)}}()),E=(t.getPublicFolderContent=function(){var e=(0,o.default)((function*(e){return w(e)}));return function(t){return e.apply(this,arguments)}}(),t.getFoldersByType=function(){var e=(0,o.default)((function*(e){var t=null==F?void 0:F.createQuery((function(t){return t.selectFrom("item").selectAll().where("folderType","=",e).where("folderId","is",null).where("isDeleted","is",null)}));return(yield null==F?void 0:F.loadQuery(t)).rows.map((function(e){return e.item}))}));return function(t){return e.apply(this,arguments)}}()),P=t.writeItem=function(){var e=(0,o.default)((function*(e,t){var n,r=new URL(null==(n=window)||null==(n=n.location)?void 0:n.toString()).searchParams.get("parentFolderId");if(e.folderId||r){var o=yield S(e.folderId||r);o&&o.mnemonic&&(t=yield g(e.folderId,o.mnemonic),(e.isFolder||e.isEditorLayer||e.isEditorProject)&&(e.mnemonic=o.mnemonic,m[e.id]=t,!0),(e.isMediaNew||e.isEncoderProject)&&(e.extractor="wt"))}console.info("writeItem data",e);var i=yield(t||F).createOrUpdate("item",{id:e.id,title:e.title,name:e.name,item:e,isFolder:e.isFolder,isContact:e.isContact,isMediaNew:e.isMediaNew,isDevice:e.isDevice,userDoc:e.userDoc,folderId:e.folderId,folderType:e.folderType,chatId:e.chatId,createdAt:e.createdAt,isDeleted:e.isDeleted,isEditorProject:e.isDeleted,isEditorLayer:e.isDeleted,orderId:e.orderId||1,mediaId:e.mediaId,auctionId:e.auctionId,mnemonic:e.mnemonic,lastUpdated:(new Date).valueOf()});return e.mnemonic&&e.isFolder&&!t&&(console.info("create a new index for a new folder"),t=yield g(e.id,e.mnemonic,!0)),i}));return function(t,n){return e.apply(this,arguments)}}(),I=(t.findByOriginalId=function(){var e=(0,o.default)((function*(e){return I("originalId",e)}));return function(t){return e.apply(this,arguments)}}(),t.findBy=function(){var e=(0,o.default)((function*(e,t){var n=null==F?void 0:F.createQuery((function(n){return n.selectFrom("item").selectAll().where(e,"=",t)})),r=yield null==F?void 0:F.loadQuery(n);return console.info("findBy",r),r.rows.map((function(e){return e.item}))}));return function(t,n){return e.apply(this,arguments)}}()),S=t.getById=function(){var e=(0,o.default)((function*(e,t){var n,r,i,a,l,u,d=F;if(t&&!(d=m[t])&&e!==t){var c=yield S(t);d=null!=c&&c.mnemonic?yield g(c.id,c.mnemonic):F}var s=null==(n=d)?void 0:n.createQuery((function(t){return t.selectFrom("item").selectAll().where("id","=",e)})),f=yield null==(r=d)?void 0:r.loadQuery(s),p=null==f||null==(i=f.row)?void 0:i.item;if((null!=(a=p)&&a.isFolder||null!=(l=p)&&l.isEditorLayer||null!=(u=p)&&u.isEditorProject)&&!m[p.id]&&p.mnemonic&&(m[p]=d),!p&&""!==e&&void 0!==e&&null!==e&&m[e]&&e!==t)return yield S(e,e);if(!p){var y=yield Promise.all(Object.keys(m).map(function(){var e=(0,o.default)((function*(e){return yield m[e].loadQuery(s)}));return function(t){return e.apply(this,arguments)}}())),v=y.filter((function(e){return e.rows.length})).flat();console.info("i",y,v),v.length&&(p=v[0].row.item)}return p}));return function(t,n){return e.apply(this,arguments)}}(),F=(t.initDatabaseRecord=function(){var e=(0,o.default)((function*(e,t,n){var r,o;if(!n&&(console.info("checking for database record for initial db ",v),(o=yield E(u.FolderType.database)).length)){var a=o.find((function(e){return e.mnemonic===t}));if(a)return a}var l=i.default.v4().toString(),d={id:l,title:e+"_"+l,mnemonic:t,isDatabase:!0,folderType:u.FolderType.database,date:(new Date).valueOf(),added:(new Date).valueOf().toString(),orderId:(null==(r=o)?void 0:r.length)+1||2,userId:"super"};return yield P(d,n)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.evolu=g())}.apply(t,r))||(e.exports=o)},419377:(e,t,n)=>{var r,o;r=[t,n(29293),n(527723),n(609209)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.getDatabases=void 0,r=a(r);t.getDatabases=function(){var e=(0,r.default)((function*(){try{o.evolu&&(yield(0,o.initDatabaseRecord)("starpy2",o.evolu.getOwner().mnemonic))}catch(e){console.error(e)}return yield(0,o.getFoldersByType)(i.FolderType.database)}));return function(){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=o)},93442:(e,t,n)=>{var r,o;r=[t,n(191714),n(869262)],void 0===(o=function(e,n,r){"use strict";function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.ItemTable=void 0;var i=(n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(n)).Struct({foo:n.String,bar:n.Boolean}),a=(0,r.id)("Item");t.ItemTable=(0,r.table)({id:a,name:r.String1000,title:r.String1000,isCompleted:r.SqliteBoolean,item:i,isMediaNew:r.SqliteBoolean,isContact:r.SqliteBoolean,folderId:r.String1000,isDevice:r.SqliteBoolean,isFolder:r.SqliteBoolean,folderType:r.String1000,userDoc:r.SqliteBoolean,chatId:r.String1000,orderId:r.String1000,mediaId:r.String1000,auctionId:r.String1000,lastUpdated:r.String1000,isEditorProject:r.SqliteBoolean,isEditorLayer:r.SqliteBoolean,isDatabase:r.SqliteBoolean,mnemonic:r.String1000})}.apply(t,r))||(e.exports=o)},782080:(e,t,n)=>{var r,o;r=[n,t,n(41132),n(29293),n(595991),n(320293),n(677294),n(636969),n(41229),n(488794)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(r,"__esModule",{value:!0}),t.toBlobURL=t.getTotalTime=t.getProjectMedia=t.getNextActiveProjectMedia=t.getActiveProjectLayer=t.genRenderCmd=t.genExecTime=t.genExecCmd=t.fetchFile=t.execEncode=t.encodeProject=t.encodeMedia=t.cancelEncoding=t.FFmpeg=void 0,o=f(o),i=f(i),a=f(a),s=m(s);var y,v,g,h,b,w={},E=t.cancelEncoding=function(){try{y.terminate()}catch(e){}},P=function(){var e=(0,i.default)((function*(e){v||(g=yield new Promise((function(e,t){return n.e(884).then((function(){var t=[n(325884)];(function(t){return e(m(t))}).apply(null,t)})).catch(t.bind(this))})),t.fetchFile=h=g.fetchFile,t.toBlobURL=b=g.toBlobURL,t.FFmpeg=v=(yield new Promise((function(e,t){return n.e(46).then((function(){var t=[n(944046)];(function(t){return e(m(t))}).apply(null,t)})).catch(t.bind(this))}))).FFmpeg),y=new v,window.ffmpeg=y,y.on("log",(function(e){var t=e.message;console.log("ffmpeg",t)})),y.on("progress",(function(t){console.info("ffmpeg progress",t),e&&e(t||0)})),yield y.load({coreURL:yield b(u.ffMpegWasmBaseUrl+"/ffmpeg-core.js","text/javascript"),wasmURL:yield b(u.ffMpegWasmBaseUrl+"/ffmpeg-core.wasm","application/wasm")})}));return function(t){return e.apply(this,arguments)}}(),I=t.encodeMedia=function(){var e=(0,i.default)((function*(e,t,n){var r=e.isCopy||(null==e?void 0:e.id),o=Object.assign({},e,{id:r}),i=r+"_"+(null==e?void 0:e.filename),a=e.encoding,c=(null==a?void 0:a.lastUpdated)||0;console.info("cachedId",c);var s=i+(".output."+c+"."+((null==a?void 0:a.output)||"mp4"));try{if(w[r])return w[r];if(0===c)return w[r]=yield(0,l.getFileOpfs)(o),w[r];var f=yield window.navigator.storage.getDirectory(u.appDirectory),p=yield f.getDirectoryHandle(o.folderId),m=yield p.getFileHandle(r+"_"+s),y=yield null==m?void 0:m.getFile();if(y)return w[r]=URL.createObjectURL(y),w[r]}catch(b){console.error("get cache error",b)}E(),yield P(t);try{var v;try{v=yield(0,l.getFileOpfs)(o)}catch(b){console.info("file not found locally downloading",b);var g=yield(0,d.downloadFileById)(o.id,o.folderId,t&&function(e){return t({progress:e,time:0})});if(console.info("dlFIle",g),v=URL.createObjectURL(yield g.getFile()),0===c)return I(e,t,n)}var h=D(o,n);yield S({files:[i],encoded:[v],outFileId:s,execCmd:h,mediaOut:o})}catch(b){console.error("ffmpeg error ",b)}}));return function(t,n,r){return e.apply(this,arguments)}}(),S=t.execEncode=function(){var e=(0,i.default)((function*(e){console.info("execEncode",e);try{var t,n=e.outFileId;try{yield Promise.all(e.encoded.map(function(){var t=(0,i.default)((function*(t,n){var r=e.files[n],o=yield h(t);yield y.writeFile(r,o)}));return function(e,n){return t.apply(this,arguments)}}()))}catch(u){throw console.error("load files in ffmpeg error",u),u}console.info("after loading files into ffmpeg",e.execCmd);var r=yield y.exec(e.execCmd);console.info("after exec",r,n);var o=yield y.readFile(n);console.info("after processing",o),o.name=n;var a=yield null==(t=yield(0,l.writeFileOpfs)(e.mediaOut,o))?void 0:t.getFile();return w[e.mediaOut.id]=URL.createObjectURL(a),console.info("cachedMedia for project",w[e.mediaOut.id]),w[e.mediaOut.id]}catch(u){console.error("encodeProject error",u)}}));return function(t){return e.apply(this,arguments)}}(),F=(t.encodeProject=function(){var e=(0,i.default)((function*(e,t,n,r,o){try{var i,a=F(e,t,n),l=(e.id,a.files.filter((function(e){return"-i"!==e})));console.info("encodeProject",e,t,n,a);null==(i=e.editor)||i.lastUpdated;var u=yield Promise.all(a.medias.map((function(e){return I(e,(function(t){console.info("encoding media",e.id,t),r&&r(t)}),n)})));console.info("encoded",u,l,a.execCmd),E(),yield P(r),a.files=l,a.encoded=u,a.mediaOut=e,yield S(a)}catch(d){console.error("encodeproject error",d)}}));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),t.genRenderCmd=function(e,t,n){var r,i,a,l,u;if(void 0===(null==e?void 0:e.id)||(null==t?void 0:t.length)<1)return{execCmd:[],medias:[],files:[]};var d=e.id+"_"+e.title,c=e.editor,s=d+(".output."+((null==c?void 0:c.lastUpdated)||0)+"."+((null==c?void 0:c.output)||"mp4")),f=window.navigator.hardwareConcurrency.toString(),p=null!=c&&c.code&&""!=c.code[0]?c.code.filter((function(e){return""!==e})).map((function(e){return e.trim().replace(/[\r\n]+/gm,"").trim()})):[],m=null==t?void 0:t.map((function(e){var t;return null==e||null==(t=e.media)?void 0:t.map((function(t){return Object.assign({},t,{layer:e})}))})).flat().filter((function(e){return e})).filter((function(e){return!e.isContact})),y=(null==m?void 0:m.map((function(e){var t,n;return["-i",(null==e?void 0:e.id)+"_"+(null==e?void 0:e.filename)+".output."+((null==e||null==(t=e.encoding)?void 0:t.lastUpdated)||0)+"."+((null==e||null==(n=e.encoding)?void 0:n.output)||"mp4")]})).flat())||[],v=null==t?void 0:t.reduce((function(e,t){var n;return!0===e?e:!(null!=(n=t.editor)&&n.muted)}),!1),g=null==t?void 0:t.reduce((function(e,t){var n;return!0===e?e:!(null!=(n=t.editor)&&n.videoDisabled)}),!1),h=v?"[a_concat]":"",b=v?["-map",h]:[],w=g?"[v_concat]":"",E=g?["-map",w]:[],P=(null==e||null==(r=e.editor)?void 0:r.aspectRatio)||"16/9",I="scale="+((null==c?void 0:c.width)||1280)+":"+((null==c?void 0:c.height)||720)+",setdar="+P,S=(null==m?void 0:m.map((function(e,t){var n,r,o,i,a="["+t+":v]trim=start="+((null==e?void 0:e.encoding.start)||0)+":end="+parseInt((null==e||null==(n=e.encoding)?void 0:n.end)||(null==e?void 0:e.duration))+",setpts=PTS-STARTPTS,"+I+"[v"+t+"]",l="["+t+":a]atrim=start="+((null==e?void 0:e.encoding.start)||0)+":end="+parseInt((null==e||null==(r=e.encoding)?void 0:r.end)||(null==e?void 0:e.duration))+",asetpts=PTS-STARTPTS[a"+t+"]",u=a+", \n"+l;return null!=e&&null!=(o=e.layer)&&null!=(o=o.editor)&&o.muted&&(u=a),null!=e&&null!=(i=e.layer)&&null!=(i=i.editor)&&i.videoDisabled&&(u=l),u})))||[],F=(null==m?void 0:m.filter((function(e){var t;return!0!==(null==e||null==(t=e.layer)||null==(t=t.editor)?void 0:t.videoDisabled)})).length)||1,D=(null==m?void 0:m.filter((function(e){var t;return!0!==(null==e||null==(t=e.layer)||null==(t=t.editor)?void 0:t.muted)})).length)||1,O=((null==m||null==(i=m.map((function(e,t){var n;if(!0!==(null==(n=e.layer)||null==(n=n.editor)?void 0:n.videoDisabled))return"[v"+t+"]"})))?void 0:i.filter((function(e){return e})).join(""))||"")+"concat=n="+F+":v=1:a=0"+w+";\n"+(((null==m||null==(a=m.map((function(e,t){var n;if(!0!==(null==(n=e.layer)||null==(n=n.editor)?void 0:n.muted))return"[a"+t+"]"})))||null==(a=a.filter((function(e){return e})))?void 0:a.join(""))||"")+"concat=n="+D+":v=0:a=1"+h);return S.push(O),{execCmd:[].concat((0,o.default)(y),["-crf",(null==c||null==(l=c.compressionLevel)?void 0:l.toString())||"20","-threads",f,"-filter_complex",""+S.join(";\n"),"-preset",(null==c?void 0:c.preset)||"veryfast","-movflags","+faststart"],(0,o.default)(p),E,b,["-r",(null==c||null==(u=c.framerate)?void 0:u.toString())||"30",""+s]),medias:m,files:y,outFileId:s}}),D=t.genExecCmd=function(e,t){var n;if(void 0===(null==e?void 0:e.id))return[];var r=e.id+"_"+e.filename,i=e.encoding,a=r+(".output."+((null==i?void 0:i.lastUpdated)||0)+"."+((null==i?void 0:i.output)||"mp4")),l=window.navigator.hardwareConcurrency.toString(),u=null!=i&&i.code&&""!=i.code[0]?i.code.filter((function(e){return""!==e})).map((function(e){return e.trim().replace(/[\r\n]+/gm,"").trim()})):[],d=t?[]:["-ss",O((null==i?void 0:i.start)||0),"-to",O((null==i?void 0:i.end)||(null==e?void 0:e.duration))];return["-i",""+r,"-crf",(null==i||null==(n=i.compressionLevel)?void 0:n.toString())||"20","-threads",l,"-filter_complex","scale="+((null==i?void 0:i.width)||e.width)+"x"+((null==i?void 0:i.height)||e.height),"-preset",(null==i?void 0:i.preset)||"veryfast","-movflags","+faststart"].concat(d,(0,o.default)(u),[""+a])},O=t.genExecTime=function(e,t){var n=parseInt(e,10),r=parseInt(n/60,10),o=parseInt(n-60*r,10);return 1===r.toString().length&&(r="0"+r),1===o.toString().length&&(o="0"+o),""+(t?"":"00:")+r+(t?",":":")+o},M=t.getActiveProjectLayer=function(e,t){for(var n,r,o=0,i=0;void 0===(null==(a=n)?void 0:a.id);){var a,l,u;if(r=e[o],o>e.length+1)throw console.error("layers",e,o),"no_layer_found";if(void 0!==(null==(l=r)?void 0:l.id))if(!0!==(null==(u=r)||null==(u=u.editor)?void 0:u.videoDisabled))n=r.media.reduce((function(e,n){var r,o;return e.id?e:(e+=((null==n||null==(r=n.encoding)?void 0:r.end)||(null==n?void 0:n.duration))-((null==n||null==(o=n.encoding)?void 0:o.start)||0))>=t?n:(i=e,e)}),0),o++;else o++;else o++}return{offset:i,layer:r,activeLayer:o,activeMedia:n}},A=t.getNextActiveProjectMedia=function(e,t,n){var r,o,i=t+(((null==n||null==(r=n.encoding)?void 0:r.end)||(null==n?void 0:n.duration))-((null==n||null==(o=n.encoding)?void 0:o.start)||0))+1,a=M(e,i);return console.info("nextPosition",i,a),a},T=t.getTotalTime=function(e){return e.reduce((function(e,t){var n,r=null==(n=t.media)?void 0:n.reduce((function(e,t){var n,r;return e+=((null==t||null==(n=t.encoding)?void 0:n.end)||(null==t?void 0:t.duration))-((null==t||null==(r=t.encoding)?void 0:r.start)||0)}),0);return r?e>r?e:r>e?r:void 0:e}),0)};t.getProjectMedia=function(){var e=(0,i.default)((function*(e,t,n){var r,o=M(e,t),a=o.offset,l=o.layer,u=o.activeLayer,d=o.activeMedia,c=t-a+parseFloat((null==d?void 0:d.encoding.start)||0),s=T(e);console.info("getProjectMedia offset",c,t,a,d.encoding.start,null==d?void 0:d.id);var f=function(){var t=(0,i.default)((function*(){var t=I(d,n,!0);return new Promise((function(n){t.then(function(){var t=(0,i.default)((function*(t){n(t);try{var r=A(e,a,d);r&&(yield I(r.activeMedia,(function(){}),!0))}catch(o){console.error("prepare next video error",o)}}));return function(e){return t.apply(this,arguments)}}())}))}));return function(){return t.apply(this,arguments)}}();return{url:void 0!==(null==d?void 0:d.id)?yield f():null,currentPosition:c,muted:null==l||null==(r=l.editor)?void 0:r.muted,activeMedia:d,totalTime:s,offset:a,activeLayer:u}}));return function(t,n,r){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=o)},320293:(e,t,n)=>{var r,o;r=[t,n(29293),n(553344),n(642958),n(488794),n(595991),n(527723),n(636969),n(758976),n(946679),n(467940),n(801132)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function g(e,t,n,r){return h.apply(this,arguments)}function h(){return(h=(0,i.default)((function*(e,t,n,r){for(var i=t;i<r;){var a=Buffer.from(yield(0,o.default)(f.FileSystem.readFileChunk(e,i,n,"base64")),"base64");i+=n,yield a}}))).apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),t.streamFile=t.saveFileToData=t.removeObject=t.getFileStats=t.getFileReaderOpfs=t.getFileOpfs=t.exportFile=t.checkFolderMobile=t._appendBuffer=t.DocumentPicker=void 0,t.streamFileChunks=g,t.writeFileOpfs=void 0,r=m(r),o=m(o),i=m(i),a=v(a),l=m(l),c=v(c);t.streamFile=function e(t,n,o,i){var a,l=g(t,n,o,i),u=(a=l,new ReadableStream({pull:function(){var e=(0,r.default)((function*(e){var t=yield a.next(),n=t.value;t.done?e.close():e.enqueue(n)}));return function(t){return e.apply(this,arguments)}}()}));return u.clone=function(){return e(t,n,o,i)},u},t.checkFolderMobile=function(){var e=(0,r.default)((function*(e){try{var t=yield a.readDirectoryAsync(e);t&&0!==t.length||(yield a.makeDirectoryAsync(e))}catch(n){yield a.makeDirectoryAsync(e)}}));return function(t){return e.apply(this,arguments)}}(),t.writeFileOpfs=function(){var e=(0,r.default)((function*(e,t){var n=yield window.navigator.storage.getDirectory(),r=yield n.getDirectoryHandle(e.folderId,{create:!0}),o=e.id+"_"+t.name,i=yield r.getFileHandle(o,{create:!0}),a=yield i.createWritable();return yield a.write(t),yield a.close(),e.isDownloaded||(e.isDownloaded=!0,yield(0,u.writeItem)(e)),i}));return function(t,n){return e.apply(this,arguments)}}(),t.getFileStats=function(){var e=(0,r.default)((function*(e){return yield w(e)}));return function(t){return e.apply(this,arguments)}}(),t.removeObject=function(){var e=(0,r.default)((function*(e){try{var t=yield window.navigator.storage.getDirectory();if(e.isMediaNew){var n=e,r=n.id+"_"+n.filename;(yield t.getDirectoryHandle(n.folderId)).removeEntry(r)}else t.removeEntry(e.id,{recursive:!0})}catch(o){console.error("delete file rror",o)}}));return function(t){return e.apply(this,arguments)}}();var b=t.getFileOpfs=function(){var e=(0,r.default)((function*(e){try{console.info("get file",e.id);var t=yield w(e);if("string"===typeof t)return t;if(!t)throw"no_file_found";return URL.createObjectURL(t)}catch(n){throw n}}));return function(t){return e.apply(this,arguments)}}(),w=(t.exportFile=function(){var e=(0,r.default)((function*(e){var t=yield b(e),n=document.createElement("a");n.style="display:none;",document.body.appendChild(n),n.download=e.filename,n.href=t,n.click()}));return function(t){return e.apply(this,arguments)}}(),t.getFileReaderOpfs=function(){var e=(0,r.default)((function*(e){try{var t=e.id+"_"+e.filename,n=yield window.navigator.storage.getDirectory(),r=yield n.getDirectoryHandle(e.folderId,{create:!0}),o=yield r.getFileHandle(t);return yield null==o?void 0:o.getFile()}catch(i){}}));return function(t){return e.apply(this,arguments)}}()),E={},P={},I={},S=t.saveFileToData=function(){var e=(0,r.default)((function*(e,t,n){if(console.info("save ",e,n,I[e]),P[e])return P[e].then((function(){return S(e,t,n)}));P[e]=new Promise(function(){var n=(0,r.default)((function*(n,o){try{var i=(yield(0,s.createBlobDB)()).readBlobs,a=yield i(e),l=a.map((function(e){return e.data})),u=l.reduce((function(e,t){return F(e,Uint8Array.from(t))}),new Uint8Array);E[e]?E[e]+=a.length:E[e]=a.length,console.info("save file to data",e,u.length,a.length,l.length),console.info("current chunk on saving file",E[e]);var c=(0,d.getBlobForArrayBuffer)(u.buffer);c.name=e;var p=new FileReader;p.onload=(0,r.default)((function*(){try{var e=p.result.replace("data:blob;base64,","");yield f.FileSystem.appendFile(t.replace("file://",""),e,"base64"),n(null)}catch(i){var r=(null==i?void 0:i.message)||i;console.error("fs worker err",r),o(r)}})),p.readAsDataURL(c)}catch(m){P[e]=null,console.error("fs worker err",(null==m?void 0:m.message)||m),o((null==m?void 0:m.message)||m)}}));return function(e,t){return n.apply(this,arguments)}}()),yield P[e],I[e]?I[e].push(n):I[e]=[n],P[e]=null}));return function(t,n,r){return e.apply(this,arguments)}}(),F=t._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n};t.DocumentPicker={pickSingle:function(){var e=(0,r.default)((function*(){return new Promise(function(){var e=(0,r.default)((function*(e){var t=document.getElementById("fileInput");null==t||t.click(),null==t||t.addEventListener("change",(0,r.default)((function*(){var n;if(null!=t&&null!=(n=t.files)&&n.length){var r,o=null==t||null==(r=t.files)?void 0:r[0],i={file:o,type:null==o?void 0:o.type,title:null==o?void 0:o.name,name:null==o?void 0:o.name,extractor:"local",size:null==o?void 0:o.size,originalId:(null==o?void 0:o.name)+(null==o?void 0:o.size)};return e(i)}})))}));return function(t){return e.apply(this,arguments)}}())}));return function(){return e.apply(this,arguments)}}()}}.apply(t,r))||(e.exports=o)},490320:(e,t,n)=>{var r,o;r=[t,n(29293),n(677294),n(527723),n(748524),n(614820),n(320293),n(102578),n(595991),n(190946)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var p={UserData:!0,initUserData:!0,publicPartyPref:!0,deleteById:!0,setOpenItem:!0,removeFile:!0,downloadFile:!0,getUnreadMessages:!0,extractMedia:!0,evolu:!0,createDBConn:!0};function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}t.UserData=void 0,Object.defineProperty(e,"createDBConn",{enumerable:!0,get:function(){return i.createDBConn}}),t.downloadFile=t.deleteById=void 0,Object.defineProperty(e,"evolu",{enumerable:!0,get:function(){return i.evolu}}),t.setOpenItem=t.removeFile=t.publicPartyPref=t.initUserData=t.getUnreadMessages=t.extractMedia=void 0,r=f(r),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))})),Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))})),Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))})),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(d),c=f(c);o.domain;var y=t.UserData={user:{id:"test",name:"test"},isEditingFolder:{},colors:o.colors,searchItems:[],currentFolderIds:{}};t.initUserData=function(){var e=(0,r.default)((function*(){try{var e;y.user=yield(0,s.doInitialMigration)(i.writeItem,i.getUserData);var t=(null==(e=d.designName)?void 0:e.replace(/[^\w\s]/gi,""))||"unknown_agent",n=d.osName||"unknown_os",r=d.brand||"web";console.info("browserName",r);var o=t+n+r,a=yield(0,i.getById)(o);if(!a||!a.manufacturer){var l={id:o,manufacturer:r,isDevice:!0,userAgent:t,createdAt:(new Date).valueOf(),model:r,os:n,platform:"web"};console.info(l),yield(0,i.writeItem)(l)}console.info("initUserData",y)}catch(u){console.error("initUserData Error",u)}}));return function(){return e.apply(this,arguments)}}(),t.publicPartyPref=function(){},t.deleteById=function(e){},t.setOpenItem=function(){},t.removeFile=function(){},t.downloadFile=function(){},t.getUnreadMessages=function(){},t.extractMedia=function(){var e=(0,r.default)((function*(e){var t,n,r=yield(0,a.getWT)(e);return console.info("onMedia",r),{url:r.magnetURI,title:r.name,originalId:r.infoHash,id:r.infoHash,filename:r.files[0].name,extractor:"wt",isFolder:!!(r.files&&(null==(t=r.files)?void 0:t.length)>-1)||void 0,files:r.files&&(null==(n=r.files)?void 0:n.length)>-1?r.files:void 0}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=o)},748524:(e,t,n)=>{var r,o;r=[t,n(29293),n(320293),n(636969),n(782080),n(527723),n(869262)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var c={recursiveShare:!0,shareFolder:!0,startUpMediaSharing:!0,getMediaAndEnq:!0,enqMedia:!0};t.startUpMediaSharing=t.shareFolder=t.recursiveShare=t.getMediaAndEnq=t.enqMedia=void 0,r=d(r),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var s=t.recursiveShare=function(){var e=(0,r.default)((function*(e){if(e.isDownloaded)try{return void(0,i.shareFileToWT)(e.id,e.folderId)}catch(n){}if(e.isFolder||e.isEditorProject||e.isEditorLayer){var t=yield(0,l.getFolderContent)(e.id);yield Promise.all(t.map(s))}else;}));return function(t){return e.apply(this,arguments)}}(),f=(t.shareFolder=function(){var e=(0,r.default)((function*(e){yield(0,l.getFolderContent)(e.id)}));return function(t){return e.apply(this,arguments)}}(),t.startUpMediaSharing=function(){var e=(0,r.default)((function*(){try{(yield l.evolu).createQuery((function(e){return e.selectFrom("item").selectAll().where("isFolder","=",(0,u.cast)(!0)).where("mnemonic","is not",null).orderBy("createdAt","desc")}))}catch(e){console.error("startUpMediaSharing error",e)}}));return function(){return e.apply(this,arguments)}}(),t.getMediaAndEnq=function(){var e=(0,r.default)((function*(e,t){var n=yield(0,l.getById)(e);return console.info("playing media",n),"local"===n.extractor&&(n.url=yield(0,o.getFileOpfs)(n)),f(n,t)}));return function(t,n){return e.apply(this,arguments)}}(),t.enqMedia=function(){var e=(0,r.default)((function*(e,t){return playMediaLink(e.url,e.currentPosition,t)}));return function(t,n){return e.apply(this,arguments)}}())}.apply(t,r))||(e.exports=o)},935095:(e,t,n)=>{var r,o;r=[t,n(29293),n(595991),n(421702)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.providerCloud=t.provider=t.maticId=void 0,t.requestAccounts=function(){return f.apply(this,arguments)},t.sendMatic=function(e,t,n,r){return s.apply(this,arguments)},t.switchNet=u,r=a(r),o=a(o);var l=t.maticId="0x89";function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r.default)((function*(e){void 0===e&&(e=""+l),yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}))).apply(this,arguments)}var c=t.provider=new i.ethers.EtherscanProvider("matic","7JUYWWYGE3HA26QBJQ2Y5AGRZDZRPDUJFE");t.providerCloud=new i.ethers.AlchemyProvider("matic","alcht_neMEQZIacGItzL30PS4QlWiEwlw6Z9");function s(){return(s=(0,r.default)((function*(e,t,n,r){var o;void 0===r&&(r={}),yield u();var a={from:e,to:t,value:i.ethers.parseEther(n.toString()).toString(16),data:(new i.ethers.AbiCoder).encode(["string"],[JSON.stringify(r)]),gasLimit:"0x76c0",gasPrice:null==(o=(yield c.getFeeData()).gasPrice)?void 0:o.toString(16)};console.info("txparams",a);var l=yield window.ethereum.request({method:"eth_sendTransaction",params:[a]});return console.info("new transaction",l),l}))).apply(this,arguments)}function f(){return(f=(0,r.default)((function*(){return yield u(),yield window.ethereum.request({method:"eth_requestAccounts"})}))).apply(this,arguments)}}.apply(t,r))||(e.exports=o)},380662:(e,t,n)=>{var r,o;r=[t,n(585715),n(29293),n(595991)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.decryptAesKey=function(e,t){return v.apply(this,arguments)},t.decryptPayload=function(e,t,n){return g.apply(this,arguments)},t.encryptAesKey=function(e,t){return h.apply(this,arguments)},t.encryptPayload=function(e,t){return b.apply(this,arguments)},t.generateAesKey=function(){return m.apply(this,arguments)},t.generateNewKeyPair=function(e){return s.apply(this,arguments)},r=a(r),o=a(o),i=a(i);var l={name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},u={name:"RSA-OAEP"},d={name:"AES-GCM",length:256},c={name:"AES-GCM"};function s(){return(s=(0,o.default)((function*(e){var t=yield window.crypto.subtle.generateKey(l,!0,["encrypt","decrypt"]);return{publicKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.publicKey)),privateKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.privateKey))}}))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,o.default)((function*(e){return new Promise((function(t){var n=new Blob([e]),o=new FileReader;o.onload=function(e){var n=o.result.split(","),i=(0,r.default)(n,2),a=(i[0],i[1]);t(a)},o.readAsDataURL(n)}))}))).apply(this,arguments)}function m(){return(m=(0,o.default)((function*(){var e=yield window.crypto.subtle.generateKey(d,!0,["encrypt","decrypt"]);return{kp:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",e)),key:e}}))).apply(this,arguments)}function y(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function v(){return(v=(0,o.default)((function*(e,t){try{var n=yield window.crypto.subtle.importKey("jwk",t,l,!0,["decrypt"]),r=(new TextEncoder,y(e)),o=yield window.crypto.subtle.decrypt(u,n,r),i=(new TextDecoder).decode(o,{});return yield window.crypto.subtle.importKey("jwk",JSON.parse(i),d,!0,["encrypt","decrypt"])}catch(a){throw console.error("decryptkey error",a),a}}))).apply(this,arguments)}function g(){return(g=(0,o.default)((function*(e,t,n){var r=y(n),o=y(t),i=yield window.crypto.subtle.decrypt(Object.assign({},c,{iv:r}),e,o);return(new TextDecoder).decode(i)}))).apply(this,arguments)}function h(){return(h=(0,o.default)((function*(e,t){var n=yield window.crypto.subtle.importKey("jwk",t,l,!0,["encrypt"]),r=(new TextEncoder).encode(e);return f(yield window.crypto.subtle.encrypt(u,n,r))}))).apply(this,arguments)}function b(){return(b=(0,o.default)((function*(e,t){try{var n=(new TextEncoder).encode(t),r=window.crypto.getRandomValues(new Uint8Array(12)),o=yield window.crypto.subtle.encrypt(Object.assign({},c,{iv:r}),e,n);return{encryptedPayload:yield f(o),iv:yield f(r.buffer)}}catch(i){throw console.error("encrypt payload err",i),i}}))).apply(this,arguments)}}.apply(t,r))||(e.exports=o)},361278:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.niceBytes=t.getBrowserName=void 0;t.getBrowserName=function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;if(e)return"opera";if("undefined"!==typeof window.InstallTrigger)return"firefox";if(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!==typeof window.safari&&window.safari.pushNotification).toString())return"apple-safari";var t=!!window.document.documentMode;return t?"microsoft-internet-explorer":t||!window.StyleMedia?window.chrome?"google-chrome":window.isChrome&&-1!=window.navigator.userAgent.indexOf("Edg")?"microsoft-edge":(window.isChrome||e)&&!!window.CSS?"blink":void 0:"microsoft-edge"};var n=["bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];t.niceBytes=function(e){for(var t=0,r=parseInt(e,10)||0;r>=1024&&++t;)r/=1024;return r.toFixed(r<10&&t>0?1:0)+" "+n[t]}}.apply(t,[t]))||(e.exports=n)},636969:(e,t,n)=>{var r,o;r=[n,t,n(29293),n(595991),n(488794),n(527723),n(320293),n(946679)],void 0===(o=function(e,r,o,i,a,l,u,d){"use strict";var c=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}Object.defineProperty(r,"__esModule",{value:!0}),t.shareFileToWT=t.getWT=t.getVideoWT=t.getBlobForArrayBuffer=t.getArrayBufferForBlob=t.downloadFileByMedia=t.downloadFileById=void 0,o=c(o),i=c(i),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a);var f,p,m={iceServers:[{urls:["stun:turn.starpy.me","turn:turn.starpy.me"],username:"username1",credential:"password1"}],sdpSemantics:"unified-plan",bundlePolicy:"max-bundle",iceCandidatePoolSize:1,iceTransportPolicy:"relay"},y=["wss://media.starpy.me"],v=function(){var e=(0,o.default)((function*(){(f=new WebTorrent({tracker:{rtcConfig:m,announce:y},announce:y})).on("error",(function(e){console.error("mediaclient err: "+e.message)}));var e=function(){var e=(0,o.default)((function*(e){var t=e.active||e.waiting||e.installing;yield new Promise((function(e){var n=function(t){p=t;var n="activated"===t.state;return n&&(console.info("after load worker"),f.loadWorker(t,e)),n};n(t)||p.addEventListener("statechange",(function(e){var t=e.target;return n(t)}))}))}));return function(t){return e.apply(this,arguments)}}(),t=yield new Promise(function(){var t=(0,o.default)((function*(t){var n=yield navigator.serviceWorker.register("/sw.min.js");yield e(n)}));return function(e){return t.apply(this,arguments)}}());return t}));return function(){return e.apply(this,arguments)}}();v();t.downloadFileById=function(){var e=(0,o.default)((function*(e,t,n){var r=yield(0,l.getById)(e,t);if("wt"===(null==r?void 0:r.extractor)){var o,i;if(g[e])o=g[e];else{var a=yield E(r);o=a.torrent,i=a.stream}o.on("download",(function(e){n&&n(o.progress)}));var d=yield(yield fetch(i)).arrayBuffer(),c=new File([d],r.filename);return yield(0,u.writeFileOpfs)(r,c)}}));return function(t,n,r){return e.apply(this,arguments)}}(),t.downloadFileByMedia=function(){var e=(0,o.default)((function*(e,t){var n=e.id;if("wt"===(null==e?void 0:e.extractor)){var r,o;if(g[n])r=g[n];else{var i=yield E(e);r=i.torrent,o=i.stream}r.on("download",(function(e){t&&t(r.progress)}));var a=yield(yield fetch(o)).arrayBuffer(),l=new File([a],e.filename);return yield(0,u.writeFileOpfs)(e,l)}}));return function(t,n){return e.apply(this,arguments)}}();var g={},h={},b={},w=function(){var e=(0,o.default)((function*(e,t,n){var r,i,a,l=n?e.files.find((function(e){return e.name||e.filename===n})):e.files.find((function(e){return function(e){var t,n,r,o;return(null==e||null==(t=e.name)?void 0:t.endsWith(".mp4"))||(null==e||null==(n=e.name)?void 0:n.endsWith(".webm"))||(null==e||null==(r=e.name)?void 0:r.endsWith(".mkv"))||(null==e||null==(o=e.name)?void 0:o.endsWith(".mov"))}(e)}));if(!l&&null!=(r=e.files)&&r.length&&(l=e.files[0]),h[l.name])return h[l.name];if(b[l.name])return yield b[l.name];if(null==(i=l)||!i.name)throw new Error("no_file_found_in_metadata");return console.info("file name found",null==(a=l)?void 0:a.name),b[l.name]=new Promise(function(){var e=(0,o.default)((function*(e,t){try{var n;null==(n=l)||n.getStreamURL((function(n,r){if(n)return t(n);e(r)}))}catch(r){b[l.name]=void 0,console.error("get stream err",r)}}));return function(t,n){return e.apply(this,arguments)}}()).catch((function(e){b[l.name]=void 0,console.error("get stream url error",e)})),h[l.name]=yield b[l.name],console.info("after stream url",h[l.name]),h[l.name]}));return function(t,n,r){return e.apply(this,arguments)}}(),E=t.getVideoWT=function(){var e=(0,o.default)((function*(e,t){return new Promise(function(){var n=(0,o.default)((function*(n,r){try{if(g[e.id])return void n({stream:yield w(g[e.id],e,t),torrent:g[e.id]});var o="torrent.file."+e.id,i=null!=e&&e.torrentFile?new File([Uint8Array.from(Object.values(e.torrentFile)).buffer],o):(null==e?void 0:e.torrentFile)&&Uint8Array.from(Object.values(e.torrentFile));console.info("torrentFile",i),f.add(i||e.url,(function(o){try{g[e.id]=o,console.info("after mediaclient add",e.filename,o),w(o,e,t).then((function(e){return n({stream:e,torrent:o})})).catch((function(e){return r(e)}))}catch(i){console.error("getVideoWT err",i),r(i)}}))}catch(a){console.error("get video wt err",a),r(a)}}));return function(e,t){return n.apply(this,arguments)}}())}));return function(t,n){return e.apply(this,arguments)}}(),P=(t.getWT=function(){var e=(0,o.default)((function*(e){return yield new Promise(function(){var t=(0,o.default)((function*(t,n){f.add(e,function(){var e=(0,o.default)((function*(e){return t(e)}));return function(t){return e.apply(this,arguments)}}())}));return function(e,n){return t.apply(this,arguments)}}())}));return function(t){return e.apply(this,arguments)}}(),{}),I=(t.shareFileToWT=function(){var e=(0,o.default)((function*(e,t){try{var n=yield(0,l.getById)(e,t);if(n.infoHash&&P[n.infoHash]||P[e])return void console.info("issharing already",P);n.infoHash&&(P[n.infoHash]=!0),P[e]=!0;var r=yield(0,u.getFileReaderOpfs)(n);if(console.info("filepath",r),console.info("share file wt",r),!r)throw"no_file";F(r,y,n)}catch(o){console.error("shareFileToWt err",o)}}));return function(t,n){return e.apply(this,arguments)}}(),function(e){}),S={code:"function anonymous(file,announce,media){const{mediaClient,onProgress,writeItem}=this.__closure;new Promise(function(resolve,reject){try{mediaClient.seed(file,{announce:announce,onProgress:onProgress},async function(wt){try{console.info('after wt create',wt);if(media.extractor==='wt'&&media.url&&media.url.search('file://')===-1)return resolve(media);media.torrentFile=wt.torrentFile;media.url=wt.magnetURI;media.infoHash=wt.infoHash;media.extractor='wt';media.isDownloaded=true;await writeItem(media);resolve(media);}catch(err){console.error('create wt err',err);reject(err);}});}catch(err){console.error('create wt err',err);reject(err);}});}"},F=function(){var e=function(e,t,n){new Promise((function(r,i){try{f.seed(e,{announce:t,onProgress:I},function(){var e=(0,o.default)((function*(e){try{if(console.info("after wt create",e),"wt"===n.extractor&&n.url&&-1===n.url.search("file://"))return r(n);n.torrentFile=e.torrentFile,n.url=e.magnetURI,n.infoHash=e.infoHash,n.extractor="wt",n.isDownloaded=!0,yield(0,l.writeItem)(n),r(n)}catch(t){console.error("create wt err",t),i(t)}}));return function(t){return e.apply(this,arguments)}}())}catch(a){console.error("create wt err",a),i(a)}}))};return e.__closure={mediaClient:f,onProgress:I,writeItem:l.writeItem},e.__workletHash=2113387270167,e.__initData=S,e}()}.apply(t,r))||(e.exports=o)},200117:(e,t,n)=>{var r,o;r=[t,n(936665),n(106283),n(201319),n(951647),n(477983),n(385054),n(956199)],void 0===(o=function(e,r,o,i,a,l,u,d){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=c(r),o=c(o),a=c(a);t.default=function(){return r.default.createElement(l.GestureHandlerRootView,{style:{width:"100%",height:"100%"}},r.default.createElement(i.NavigationContainer,{theme:d.MD3DarkTheme,linking:u.linking,fallback:r.default.createElement(o.default,null,"Loading...")},r.default.createElement(a.default,null)))}}.apply(t,r))||(e.exports=o)},126592:(e,t,n)=>{var r,o;r=[t,n(29293),n(201319),n(936665),n(573929),n(323817),n(490320),n(654967),n(956199),n(445783),n(665245),n(11881)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.AuctionPage=function(){var e,t=(0,o.useRoute)().params.auctionId,n=(0,l.useQuery)("UserData",(function(){return(0,u.getUserData)()})),m=(0,l.useQuery)("auction_"+t,(0,r.default)((function*(){return yield(0,u.getById)(t,t)}))),y=m.data,v=!n.isFetched||!m.isFetched,g=null==n?void 0:n.data,h=!v&&(null==g?void 0:g.id)===(null==y?void 0:y.userId),b=!v&&(null==g?void 0:g.id)===(null==y?void 0:y.winnerId),w=!v&&void 0!==(null==y?void 0:y.encryptedKey),E=!v&&void 0!==(null==y?void 0:y.winnerPaymentTransactionId),P=null==y?void 0:y.isClosed,I=(0,p.useAppSelector)((function(e){return e.auction.downloadProgress})),S=I?"Downloading "+parseInt((100*I).toString(),10)+"%":"Download",F=(0,s.useAuctionActions)(t,y,g),D=F.createBid,O=F.closeAuction,M=F.currentBid,A=F.payForAuction,T=F.downloadAuctionMedia,_=F.releaseDownload,x=F.auctionTransaction,C=x?((null==(e=x.receipt)?void 0:e.status)||0)+" Confirmation":"Waiting For Confirmation";return(0,f.useRouteAuction)(y,v),i.default.createElement(a.default,{style:{width:"100%",height:"100%"}},i.default.createElement(a.default,{style:{width:"100%",height:"40%"}},v?i.default.createElement(c.ActivityIndicator,null):i.default.createElement(c.List.Section,null,i.default.createElement(c.List.Item,{title:"Auction Name",description:null==y?void 0:y.title}),i.default.createElement(c.List.Item,{title:"Author Name",description:null==y?void 0:y.authorName}),i.default.createElement(c.List.Item,{title:"Auction Current Bid",description:M||(null==y?void 0:y.minPrice)}),i.default.createElement(c.List.Item,{title:"Auction Minimum Step",description:null==y?void 0:y.minStep}),i.default.createElement(c.List.Item,{title:"Auction Minimum Price",description:null==y?void 0:y.minPrice})),!h&&!P&&i.default.createElement(c.Button,{icon:"plus",onPress:D,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},"Make A Bid"),h&&!P&&i.default.createElement(c.Button,{icon:"clipboard-check",onPress:O,mode:"outlined",style:{top:16,right:16,position:"absolute"}},"Close Auction"),b&&!E&&i.default.createElement(c.Button,{icon:"currency-usd",onPress:A,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},"Pay"),b&&w&&i.default.createElement(c.Button,{icon:"file",onPress:T,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},S),h&&E&&i.default.createElement(c.Button,{icon:"file",onPress:_,mode:"outlined",disabled:!x||w,style:{bottom:16,right:16,position:"absolute"}},"Release File"),P&&i.default.createElement(c.Chip,{style:{top:16,right:16,position:"absolute"},icon:"clipboard-check"}," ","Auction Closed"," "),P&&E&&i.default.createElement(c.Chip,{style:{top:50,right:16,position:"absolute"},icon:"timer-cog-outline"},C)),i.default.createElement(a.default,{style:{width:"100%",height:"60%"}},i.default.createElement(d.default,{params:{user:g,contact:y},chatId:t})))},r=m(r),i=m(i),a=m(a),d=m(d)}.apply(t,r))||(e.exports=o)},559287:(e,t,n)=>{var r,o,i=n(936665);r=[t,n(573929),n(11881),n(242468),n(956199)],void 0===(o=function(e,r,o,a,l){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BidDialogBody=function(){var e=(0,o.useAppDispatch)(),t=(0,o.useAppSelector)((function(e){return e.auction.bidAmount}));(0,o.useAppSelector)((function(e){return e.auction.bidWallet}));return i.createElement(r.default,{style:{width:"100%",height:"auto"}},i.createElement(l.TextInput,{label:"Bid Amount",style:{width:"100%"},keyboardType:"number-pad",value:t.toString(),onChangeText:function(t){return e((0,a.setBidAmount)(parseFloat(t)))},mode:"outlined"}))},r=u(r)}.apply(t,r))||(e.exports=o)},374275:(e,t,n)=>{var r,o,i=n(936665);r=[t,n(29293),n(956199),n(935095),n(11881),n(242468),n(323817)],void 0===(o=function(e,r,o,a,l,u,d){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.MetamaskAccountsButton=function(e){var t=e.type,n=(0,l.useAppDispatch)(),c=(0,d.useMutation)((0,r.default)((function*(){var e=yield(0,a.requestAccounts)();console.info("accounts"),"bid"===t&&n((0,u.setBidWallet)(e[0])),"sell"===t&&n((0,u.setAuctionWallet)(e[0])),"pay"===t&&n((0,u.setPayWallet)(e[0]))})));return i.createElement(o.Button,{icon:"wallet",mode:"outlined",onPress:function(){return c.mutateAsync()}},"Show Metamask Wallets")},r=c(r)}.apply(t,r))||(e.exports=o)},292188:(e,t,n)=>{var r,o,i=n(936665);r=[t,n(573929),n(11881),n(242468),n(956199),n(374275)],void 0===(o=function(e,r,o,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.PayDialogBody=function(){var e=(0,o.useAppDispatch)(),t=(0,o.useAppSelector)((function(e){return e.auction.payWallet})),n=(0,o.useAppSelector)((function(e){return e.auction.winnerPrice}));return i.createElement(r.default,{style:{width:"100%",height:"auto"}},i.createElement(l.Text,null,"As the winner you need to pay ",n," Matik to receive the media file"),i.createElement(l.TextInput,{label:"Payment Crypto Wallet",style:{width:"100%"},keyboardType:"number-pad",value:t,onChangeText:function(t){return e((0,a.setPayWallet)(t))},mode:"outlined"}),i.createElement(u.MetamaskAccountsButton,{type:"pay"}))},r=d(r)}.apply(t,r))||(e.exports=o)},917264:(e,t,n)=>{var r,o;r=[t,n(936665),n(573929),n(956199),n(11881),n(242468),n(374275)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.SellDialogBody=function(){var e=(0,a.useAppDispatch)(),t=(0,a.useAppSelector)((function(e){return e.auction.newAuctionName})),n=(0,a.useAppSelector)((function(e){return e.auction.newAuctionPrice})),d=(0,a.useAppSelector)((function(e){return e.auction.newAuctionWallet})),c="Auction name",s="Auction ERC20 Wallet",f="Minimum Price in Matic";return r.default.createElement(o.default,{style:{width:"100%",height:"auto"}},r.default.createElement(i.TextInput,{placeholder:c,label:c,style:{width:"100%"},value:t,onChangeText:function(t){return e((0,l.setAuctioName)(t))},mode:"outlined"}),r.default.createElement(i.TextInput,{label:f,placeholder:f,style:{width:"100%"},keyboardType:"number-pad",value:n.toString(),onChangeText:function(t){return e((0,l.setAuctionPrice)(parseFloat(t)))},mode:"outlined"}),r.default.createElement(i.TextInput,{label:s,placeholder:s,style:{width:"100%"},value:d,onChangeText:function(t){return e((0,l.setAuctionWallet)(t))},mode:"outlined"}),r.default.createElement(u.MetamaskAccountsButton,{type:"sell"}))},r=d(r),o=d(o)}.apply(t,r))||(e.exports=o)},226632:(e,t,n)=>{var r,o;r=[t,n(936665),n(654967),n(323817),n(486568),n(201319),n(490320),n(609209),n(272679),n(573929),n(140558),n(98860),n(64964),n(10872)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=v(r),o=v(o),s=v(s),f=v(f),m=v(m);t.default=function(e){var t=e.isEmbed,n=(0,l.useRoute)().params,v=n.chatId,g=(0,i.useQuery)("UserData",(function(){return(0,u.getUserData)()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onError:function(e){console.error("on get contact error",e)}}),h=(0,i.useQuery)("contact_"+v,(function(){return(0,u.getById)(v)}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onError:function(e){console.error("on get contact error",e)}}),b=!g.isFetched||!h.isFetched,w=null==h?void 0:h.data,E=null==g?void 0:g.data,P=(0,f.default)().width,I=(null==n?void 0:n.parentFolderId)||(null==n?void 0:n.parentFolderId)||w&&w.folderId,S=(0,c.useFolder)(I,u.getFolderContent,u.getById,d.FolderType.contact);(0,a.useRouteContact)(w,b,E,n);var F=!(P>700&&!t);return r.default.createElement(s.default,{style:{width:"100%",height:"100%",flexDirection:"row",backgroundColor:"black"}},F?null:r.default.createElement(p.FolderNavigator,{folderType:d.FolderType.contact,renderContent:function(e){var t=e.item;return r.default.createElement(m.default,{i:t,key:t.id,dataHook:S,styles:y.styles,width:F?P:P/100*70})},parentFolderId:I,parentFolderHook:S}),r.default.createElement(s.default,{style:{width:F?"100%":"70%"}},r.default.createElement(o.default,{params:{user:E,contact:w},chatId:v})))}}.apply(t,r))||(e.exports=o)},654967:(e,t,n)=>{var r,o;r=[t,n(585715),n(94634),n(936665),n(573929),n(315648),n(595991),n(304285),n(390323),n(956199),n(236952),n(10872)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=m(r),o=m(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),a=m(a),l=m(l),u=m(u);t.default=function(e){var t=e.chatId,n=e.params.user,u=(0,c.useMessages)(t),m=u.messages,y=u.sendMessage,v=u.nextPage,g=u.isLoadingEarlier,h=(0,i.useContext)(d.UserCtx),b=(0,s.useTheme)(),w=(0,i.useRef)(),E=b.colors.surface;return i.default.createElement(a.default,{style:{backgroundColor:h.colors.backgroundColor,height:"100%",width:"100%",flexDirection:"row"}},i.default.createElement(f.GiftedChat,{scrollToBottom:!0,renderLoading:function(){return i.default.createElement(s.ActivityIndicator,{size:72})},messages:m.map((function(e){return Object.assign({},e,{_id:e.id,user:{_id:e.userId,name:e.userName}})})),onSend:function(e){var t,n=(0,r.default)(e,1)[0];return t=n.text,y(t)},user:{_id:null==n?void 0:n.id,avatar:null==n?void 0:n.photo},renderBubble:function(e){return i.default.createElement(f.Bubble,(0,o.default)({},e,{textStyle:{left:{color:p.textAccentColor}},wrapperStyle:{right:{backgroundColor:"#871e69",alignSelf:"auto",maxWidth:"60%"},left:{backgroundColor:"#344868",alignSelf:"auto",maxWidth:"60%"}}}))},timeTextStyle:{},renderAvatar:function(e){var t;return i.default.createElement(f.GiftedAvatar,(0,o.default)({},e,{user:null==e||null==(t=e.currentMessage)?void 0:t.user,avatarStyle:{backgroundColor:"transparent",borderWidth:1,borderColor:E}}))},listViewProps:{scrollEventThrottle:400,onEndReached:function(){console.info("on end of chat reached",g),!0!==g&&v()}},isLoadingEarlier:g,loadEarlier:!0,onLoadEarlier:function(){return v()},renderLoadEarlier:function(e){return i.default.createElement(a.default,{style:{height:100,width:"100%"}},e.isLoadingEarlier?i.default.createElement(s.ActivityIndicator,{size:32}):i.default.createElement(a.default,{style:{height:100}}))},renderChatEmpty:function(){return i.default.createElement(a.default,{style:{transform:[{scaleY:-1}]}},i.default.createElement(s.List.Item,{left:function(e){return i.default.createElement(s.List.Icon,(0,o.default)({},e,{color:p.textAccentColor,icon:"lock"}))},titleStyle:{color:p.textAccentColor},title:"Decrypting Messages..."}),i.default.createElement(s.ProgressBar,{indeterminate:!0,visible:!0}))},renderInputToolbar:function(e){return i.default.createElement(f.InputToolbar,(0,o.default)({},e,{containerStyle:{backgroundColor:"black",borderColor:"gray"},primaryStyle:{borderColor:"white"},renderComposer:function(e){return i.default.createElement(f.Composer,(0,o.default)({ref:w},e,{textInputStyle:{color:p.textAccentColor,padding:10},multiline:!0,textInputAutoFocus:!0,textInputProps:Object.assign({},e.textInputProps,{blurOnSubmit:!0,onSubmitEditing:function(t){var n;e.text&&e.onSend&&e.onSend([{text:null==(n=e.text)?void 0:n.trim()}],!0);setTimeout((function(){t.nativeEvent.target.focus()}),300)}})}))},renderSend:function(e){return i.default.createElement(l.default,{onPress:function(){e.onSend([{text:e.text}],!0)}},i.default.createElement(s.List.Icon,(0,o.default)({style:{padding:10}},e,{icon:"send"})))}}))},placeholder:"Write your message",showUserAvatar:!1}))}}.apply(t,r))||(e.exports=o)},818031:(e,t,n)=>{var r,o;r=[t,n(936665),n(42542),n(975906),n(490320)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),i=l(i);t.default=(0,r.memo)((function(){var e=(0,o.useContacts)(a.getFoldersByType,a.getFolderContent,a.writeItem);return r.default.createElement(i.default,{dataHook:e})}))}.apply(t,r))||(e.exports=o)},5173:(e,t,n)=>{var r,o;r=[t,n(94634),n(936665),n(573929),n(818031)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=l(r),o=l(o),i=l(i),a=l(a);t.default=function(e){return o.default.createElement(i.default,{style:{height:"100%",width:"100%"}},o.default.createElement(i.default,null,o.default.createElement(a.default,(0,r.default)({},e,{showPublicParty:!0}))))}}.apply(t,r))||(e.exports=o)},10872:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.textAccentColor=t.styles=void 0;t.styles={container:{flex:1,paddingTop:0,marginTop:0},item:{paddingTop:15,paddingLeft:5,fontSize:12,height:160,color:"black",width:80},tinyLogo:{marginTop:2,width:22,height:22},scroll:{height:"100%",display:"flex",position:"relative",backgroundColor:"black",width:"100%"},icon:{paddingLeft:10}},t.textAccentColor="#b4c0d1"}.apply(t,[t]))||(e.exports=n)},149519:(e,t,n)=>{var r,o;r=[t,n(29293),n(936665),n(595991),n(573929),n(140558),n(956199),n(323817),n(790970),n(928963),n(470020),n(477983),n(490320),n(226632),n(480761)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v){"use strict";var g=n(124994);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=g(i),a=g(a),l=g(l),c=g(c),s=g(s),f=g(f),y=g(y);t.default=(0,o.memo)((function(e){var t=e.projectId,n=e.height,i=e.routeParams,g=(0,u.useTheme)(),h=(0,d.useQuery)(["projectdata",t],(0,r.default)((function*(){return yield(0,m.getById)(t)})),{enabled:!!t}),b=(0,o.useRef)(),w=h.data,E=(0,d.useQuery)(["projectLayers",t],(0,r.default)((function*(){var e=yield(0,m.getFolderContent)(t),n=yield Promise.all(e.map(function(){var e=(0,r.default)((function*(e){return Object.assign({},e,{media:yield(0,m.getFolderContent)(null==e?void 0:e.id)})}));return function(t){return e.apply(this,arguments)}}()));return n}))),P=(0,l.default)().width,I=null==E?void 0:E.data,S=P<700||!1;return S?o.default.createElement(a.default,{style:{margin:0,padding:0,display:"flex"},className:"video-banner"},o.default.createElement(u.Banner,{visible:!!t,theme:g,style:{backgroundColor:"black",padding:0,margin:0,width:P,marginHorizontal:0,paddingHorizontal:0,overflow:"hidden",display:"flex",flexDirection:"row"},contentStyle:{width:P,flex:1,height:"100%",padding:0,margin:0,display:"flex",flexDirection:"row",alignItems:"stretch",overflow:"hidden",marginHorizontal:0,paddingHorizontal:0}},o.default.createElement(a.default,{style:{width:"100%",height:S?n/2.5:n/2,borderLeftWidth:S?0:1,borderRightWidth:S?0:1,margin:0,padding:0,borderLeftColor:"rgb(73, 69, 79)",borderRightColor:"rgb(73, 69, 79)",display:"flex"},key:2},o.default.createElement(f.default,{video2:b,projectId:t,mediaRes:w,layers:I}),o.default.createElement(v.EditorPlayControls,null)))):o.default.createElement(a.default,{style:{margin:0,display:"flex"},className:"video-banner"},o.default.createElement(u.Divider,null),o.default.createElement(u.Banner,{visible:!!t,theme:g,style:{backgroundColor:"black",padding:0,margin:0,height:"100%",overflow:"hidden",display:"flex",flexDirection:"row"},contentStyle:{width:"100%",height:"100%",maxWidth:"auto",padding:0,margin:0,display:"flex",flexDirection:"row",alignItems:"stretch",overflow:"hidden"}},o.default.createElement(a.default,{style:{display:"flex",flexDirection:"row",width:"100%",height:"100%"}},o.default.createElement(p.ScrollView,{style:{width:"24%",height:n/2,display:"flex",marginRight:5},key:1,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},o.default.createElement(s.default,{projectId:t,mediaRes:w,video2:b,layers:I,projectQuery:h,writeItem:m.writeItem})),o.default.createElement(a.default,{style:{width:"50%",height:n/2,borderLeftWidth:1,borderRightWidth:1,borderLeftColor:"rgb(73, 69, 79)",borderRightColor:"rgb(73, 69, 79)",display:"flex"},key:2},o.default.createElement(f.default,{video2:b,projectId:t,mediaRes:w,layers:I})),o.default.createElement(a.default,{style:{width:"24%",height:n/2,display:"flex"},key:3},(null==i?void 0:i.encoder)&&o.default.createElement(c.default,{params:i}),(null==i?void 0:i.chatId)&&o.default.createElement(y.default,null)))),o.default.createElement(u.Divider,null))}))}.apply(t,r))||(e.exports=o)},614880:(e,t,n)=>{var r,o;r=[t,n(936665),n(477983),n(11881),n(638608),n(794465),n(140558),n(573929)],void 0===(o=function(e,r,o,i,a,l,u,d){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=c(r),l=c(l),u=c(u),d=c(d);t.default=function(){var e=(0,i.useAppDispatch)(),t=(0,i.useAppSelector)((function(e){return e.editor.caretPosition})),n=(0,u.default)(),c=n.width,s=n.height,f=new l.default.Value(0),p=l.default.event([{nativeEvent:{translationX:f}}],{listener:function(e){},useNativeDriver:!0});return r.default.createElement(d.default,{style:{cursor:"pointer",height:0}},r.default.createElement(o.PanGestureHandler,{onGestureEvent:p,onHandlerStateChange:function(n){if(n.nativeEvent.oldState===o.State.ACTIVE){var r=n.nativeEvent.translationX,i=t+r;return i<0&&(i=0),f.setOffset(i),f.setValue(0),e((0,a.setCaretPosition)(i)),i}}},r.default.createElement(l.default.View,{style:[{width:50,opacity:.5,height:s/2,justifyContent:"center",alignItems:"center",backgroundColor:"red",cursor:"pointer"},{transform:[{translateX:f.interpolate({inputRange:[0,c],outputRange:[t,c],extrapolate:"extend"})}]}]})))}}.apply(t,r))||(e.exports=o)},256435:(e,t,n)=>{var r,o;r=[t,n(29293),n(201319),n(11881),n(794465),n(573929),n(323817),n(477983),n(956199),n(936665)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=f(r),a=f(a),l=f(l),s=f(s);t.default=function(e){var t,n,f=e.item,p=e.onDragEnd,m=e.onDragStart,y=e.index,v=e.layerIndex,g=e.writeItem,h=e.parentDataHook,b=(0,o.useNavigation)(),w=(0,o.useRoute)(),E=((0,u.useQueryClient)(),(0,i.useAppSelector)((function(e){return e.editor})).pixelsPerSecond),P=(w.params.projectId,(((null==f?void 0:f.duration)||0)-1)*E),I=(null==(t=f.encoding)?void 0:t.start)||0,S=(null==(n=f.encoding)?void 0:n.end)||f.duration,F=S?(S-I)*E:P,D=new a.default.Value(F),O=(0,u.useMutation)((function(e){return g(e)})),M=(a.default.event([{nativeEvent:{translationX:D}}],{listener:function(e){},useNativeDriver:!0}),y+v),A=M%2?"darkcyan":"green";M%3>1&&(A="darkslateblue");var T=function(){var e=(0,r.default)((function*(){h.onRemoveFolder(f)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.default)((function*(e){if(e.nativeEvent.oldState===d.State.ACTIVE){var t,n,r=D._value;r>P&&(r=P),r<40&&(r=40),D._value!==r&&D.setValue(r),f.encoding||(f.encoding={}),(r/=E)<(null==(t=f.encoding)?void 0:t.start)&&(r+=null==(n=f.encoding)?void 0:n.start),f.encoding.end=r,yield O.mutateAsync(f)}}));return function(t){return e.apply(this,arguments)}}();return s.default.createElement(l.default,{key:f.id,style:{height:68,position:"relative"}},s.default.createElement(a.default.View,{style:{width:f.isContact?75:D.interpolate({inputRange:[I,P],outputRange:[I,P],extrapolate:"clamp"}),height:"100%",top:0,padding:0,margin:0,left:f.currentPosition?E*f.currentPosition:0,position:f.currentPosition?"absolute":"relative",backgroundColor:A,zIndex:2,borderWidth:f.id===w.params.encoder||f.id===w.params.chatId?1:0,borderRadius:f.isContact?100:0,borderColor:"white"}},!f.isContact&&s.default.createElement(s.default.Fragment,null,s.default.createElement(d.PanGestureHandler,{onHandlerStateChange:_},s.default.createElement(l.default,{style:{position:"absolute",left:0,bottom:0,transform:[{rotate:"90deg"}],cursor:"pointer",zIndex:100}},s.default.createElement(c.List.Icon,{icon:"resize-bottom-right",style:{padding:0,margin:0}}))),s.default.createElement(d.PanGestureHandler,{onHandlerStateChange:_},s.default.createElement(l.default,{style:{position:"absolute",right:0,bottom:0,cursor:"pointer",zIndex:100}},s.default.createElement(c.List.Icon,{icon:"resize-bottom-right",style:{padding:0,margin:0}})))),s.default.createElement(c.List.Item,{onPress:function(){return b.setParams(Object.assign({},w.params,{encoder:!f.isContact&&f.id,chatId:f.isContact&&f.id}))},style:{height:"100%"},title:f.isContact?"":f.title,right:function(){var e,t;return s.default.createElement(s.default.Fragment,null,!f.isContact&&s.default.createElement(d.TouchableOpacity,{onPressIn:m,onPressOut:p,style:{pointerEvents:"auto"}},s.default.createElement(c.IconButton,{size:18,icon:"drag"})),f.isContact&&s.default.createElement(c.Avatar.Text,{size:30,label:[null==(e=f.title)?void 0:e.split(" ")[0][0],null==(t=f.title)?void 0:t.split(" ")[1][0]].join(""),style:{marginLeft:-10,marginTop:8,backgroundColor:"transparent"}}),s.default.createElement(c.IconButton,{size:18,icon:"delete",onPress:T}))}})))}}.apply(t,r))||(e.exports=o)},928963:(e,t,n)=>{var r,o;r=[t,n(29293),n(94634),n(585715),n(936665),n(304701),n(573929),n(140558),n(767146),n(595991),n(956199),n(609209),n(748524),n(11881),n(638608),n(323817),n(858542),n(796541),n(268444),n(490320)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h,b,w,E){"use strict";var P=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=P(r),o=P(o),i=P(i),a=S(a),l=P(l),u=P(u),d=P(d),c=P(c),s=P(s),h=P(h),w=S(w);t.default=function(e){var t=e.mediaRes,n=e.video2,s=e.layers,P=e.projectQuery,I=(0,y.useAppDispatch)(),S=(0,y.useAppSelector)((function(e){return e.editor.caretPosition})),F=(0,y.useAppSelector)((function(e){return e.editor.scrollPosition})),D=(0,y.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),O=(0,y.useAppSelector)((function(e){return e.editor.activeLayer})),M=(0,y.useAppSelector)((function(e){return e.editor.isPlaying})),A=(0,y.useAppSelector)((function(e){return e.editor.isRendering})),T=(0,y.useAppSelector)((function(e){return e.editor.renderOutputURL})),_=(0,y.useAppSelector)((function(e){return e.editor.renderProgress})),x=(0,y.useAppSelector)((function(e){return e.editor.ffmpegLogs})),C=(0,y.useAppSelector)((function(e){return e.editor.ffmpegError})),j=null!=s&&s.length?(0,m.getTotalTime)(s):0,k=(0,a.useState)(!1),L=(0,i.default)(k,2),B=L[0],R=L[1],W=(0,d.default)().width,N=(0,a.useRef)(),z=(S+F)/D,U=12,H=120,Q=.24*W-50,V=(0,a.useState)(!1),K=(0,i.default)(V,2),q=K[0],J=K[1],G=(0,a.useState)(!1),Y=(0,i.default)(G,2),X=Y[0],Z=Y[1],$=Object.keys(p.FFMpegOutputType),ee=(0,m.genRenderCmd)(t,s,!0).execCmd.join("\n"),te=function(){J(!1),Z(!1)},ne=(0,g.useMutation)((function(e){return(0,E.writeItem)(e)}),{onSuccess:function(){console.info("after writing project"),P.refetch()}}),re=(0,a.useCallback)((function(e){var t,r,o;if("ArrowLeft"===e.code){var i,a;if(null==(i=n.current)||!i.paused)null==(a=n.current)||a.pause();console.info("arrowLeft, caretPosition, scrollPosition",S,F),I(S>0?(0,v.setCaretPosition)(S-5):(0,v.setScrollPosition)(F-5))}if("ArrowRight"===e.code){var l,u;if(null==(l=n.current)||!l.paused)null==(u=n.current)||u.pause();console.info("arrowRight, caretPosition, scrollPosition",S,F),I((0,v.setCaretPosition)(S+5))}"Space"===e.code&&(null!=(t=n.current)&&t.paused?null==(r=n.current)||r.play():null==(o=n.current)||o.pause())}),[S,F]);(0,a.useEffect)((function(){document.onkeyup=function(e){return re(e)}}),[re]);var oe=function(e,n){var r=t,o=!["start","end"].includes(e);["width","height","start","end","framerate"].includes(e)&&isNaN(n)?console.info("invalid type"):(r.editor||(r.editor={}),r.editor[e]=n,o&&(r.editor.lastUpdated=(new Date).valueOf()),ne.mutateAsync(r),te())};return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.List.Item,{left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"clock"}))},title:(0,m.genExecTime)(z),right:function(e){return a.default.createElement(f.IconButton,(0,o.default)({},e,{size:U,icon:M?"pause":"play",onPress:function(){var e;!0===(null==n||null==(e=n.current)?void 0:e.paused)?(I((0,v.setActiveLayer)({activeLayerId:O,caretPosition:S,scrollPosition:F})),null==n||n.current.play()):null==n||n.current.pause()}}))}}),a.default.createElement(f.Divider,{key:"divinputrender"}),a.default.createElement(f.Button,{icon:"movie",style:{pointerEvents:"auto",cursor:"pointer"},onPress:(0,r.default)((function*(){I((0,v.setIsRendering)(!0));var e=yield(0,m.encodeProject)(t,s,!1,(function(e){return I((0,v.setRenderProgress)(e))}),(function(e){return I((0,v.addNewLogLine)(e))}));I((0,v.setRenderUrl)(e)),I((0,v.setIsRendering)(!1))})),loading:A,disabled:A,mode:"outlined"},A?"Rendering project: "+parseInt((100*_).toString(),10)+"%":C?"Render Project (Error! check logs)":"Render Project"),a.default.createElement(f.Divider,{key:"divinputdownload"}),T&&a.default.createElement("a",{href:T,download:!0,style:{width:"100%"}},a.default.createElement(f.Button,{icon:"film",style:{pointerEvents:"auto",cursor:"pointer",width:"100%"},mode:"outlined"},"Download video")),a.default.createElement(f.Divider,{key:"div01"}),a.default.createElement(f.List.Item,{key:"start",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"clock-plus"}))},titleStyle:{fontSize:U},title:"Start",right:function(e){return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:0,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return oe("start",parseInt(e,10))}}))}}),a.default.createElement(f.Divider,{key:"div7"}),a.default.createElement(f.List.Item,{key:"end",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"clock-minus"}))},titleStyle:{fontSize:U},title:"End",right:function(e){return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:(0,m.genExecTime)(j)||0,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return oe("end",parseInt(e,10))}}))}}),a.default.createElement(f.Divider,{key:"div3"}),a.default.createElement(f.List.Item,{key:"width",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"ruler"}))},title:"Width",titleStyle:{fontSize:U},right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:null==t||null==(n=t.editor)?void 0:n.width,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return oe("width",parseInt(e,10))}}))}}),a.default.createElement(f.Divider,{key:"div2"}),a.default.createElement(f.List.Item,{key:"height",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"ruler"}))},title:"Height",titleStyle:{fontSize:U},right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:null==t||null==(n=t.editor)?void 0:n.height,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return oe("height",parseInt(e,10))}}))}}),a.default.createElement(f.Divider,{key:"divaspect"}),a.default.createElement(f.List.Item,{key:"aspect",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"aspect-ratio"}))},titleStyle:{fontSize:U},title:"Aspect Ratio",right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:(null==t||null==(n=t.editor)?void 0:n.aspectRatio)||"16/9",style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"default",onChangeText:function(e){return oe("aspectRatio",e)}}))}}),a.default.createElement(f.Divider,{key:"divrate"}),a.default.createElement(f.List.Item,{key:"frames",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"movie-roll"}))},titleStyle:{fontSize:U},title:"Frame Rate",right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.TextInput,{dense:!0,mode:"outlined",value:(null==t||null==(n=t.editor)?void 0:n.framerate)||30,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return oe("framerate",parseInt(e,10))}}))}}),a.default.createElement(f.Divider,{key:"div1"}),a.default.createElement(f.List.Item,{key:"output",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"file-export"}))},title:"Output",titleStyle:{fontSize:U},right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.Menu,{visible:q,onDismiss:te,anchor:a.default.createElement(f.Button,{mode:"outlined",onPress:function(){return J(!0)}},null==t||null==(n=t.editor)?void 0:n.output)},a.default.createElement(a.default.Fragment,null,$.map((function(e){return a.default.createElement(f.Menu.Item,{key:e,onPress:function(){return oe("output",e)},title:e})})))))}}),a.default.createElement(f.Divider,{key:"divPreset"}),a.default.createElement(f.List.Item,{key:"preset",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{style:{fontSize:U},icon:"file-export"}))},title:"Preset",titleStyle:{fontSize:U},right:function(e){var n;return a.default.createElement(u.default,{style:{width:H}},a.default.createElement(f.Menu,{visible:X,onDismiss:te,anchor:a.default.createElement(f.Button,{mode:"outlined",onPress:function(){return Z(!0)}},null==t||null==(n=t.editor)?void 0:n.preset)},a.default.createElement(a.default.Fragment,null,Object.keys(p.FFMpegPreset).map((function(e){return a.default.createElement(f.Menu.Item,{key:e,onPress:function(){return oe("preset",e)},title:e})})))))}}),a.default.createElement(f.Divider,{key:"divinputcode2"}),a.default.createElement(f.Button,{icon:"code-brackets",onPress:function(){return R(!B)}},"Show FFMpeg Code"),!0===B?a.default.createElement(u.default,null,a.default.createElement(f.Divider,{key:"divinputcode"}),a.default.createElement(f.List.Item,{key:"code",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{icon:"code-brackets"}))},title:"",titleStyle:{fontSize:U},onPress:function(){var e;return null==N||null==(e=N.current)?void 0:e.focus()},right:function(e){var n;return a.default.createElement(l.default,{style:{width:Q,zIndex:10}},a.default.createElement(w.default,{className:"codeEditor",ref:N,style:{fontSize:U,inputLineHeight:U,highlighterLineHeight:U,marginLeft:0},language:"bash",syntaxStyle:w.CodeEditorSyntaxStyles.xonokai,initialValue:(null==(n=t.editor)||null==(n=n.code)?void 0:n.join(","))||"",onChange:function(e){var n;e!==(null==(n=t.editor)||null==(n=n.code)?void 0:n.join(","))&&oe("code",e.split(","))},autoFocus:!1,showLineNumbers:!0}))}}),a.default.createElement(f.Divider,{key:"divoutputcode"}),ee&&a.default.createElement(f.List.Item,{key:"output_code",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{icon:"code-tags"}))},title:"",onPress:function(){return c.default.setString(ee)},titleStyle:{fontSize:U},right:function(){return a.default.createElement(u.default,{style:{width:Q}},a.default.createElement(h.default,{language:"bash",style:b.xonokai,fontSize:U,pointerEvents:!0,scroll:!0,highlighter:"prism"},ee)," ")}}),a.default.createElement(f.Divider,{key:"divlogs"}),ee&&a.default.createElement(f.List.Item,{key:"output_logs",left:function(e){return a.default.createElement(f.List.Icon,(0,o.default)({},e,{icon:"code-parentheses"}))},title:"",onPress:function(){return c.default.setString(x)},titleStyle:{fontSize:U},right:function(){return a.default.createElement(u.default,{style:{width:Q,pointerEvents:"auto"}},a.default.createElement(h.default,{language:"bash",style:b.xonokai,customStyle:{pointerEvents:"auto",userSelect:"all"},fontSize:U,userSelect:!0,pointerEvents:!0,scroll:!0,highlighter:"prism"},x)," ")}}),a.default.createElement(f.Divider,{key:"div8"})):null)}}.apply(t,r))||(e.exports=o)},732678:(e,t,n)=>{var r,o;r=[t,n(94634),n(443693),n(29293),n(936665),n(573929),n(140558),n(272679),n(609209),n(956199),n(419546),n(477983),n(11881),n(616392),n(490320),n(941784),n(256435)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h){"use strict";var b=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorLayerBodyComponent=function(e){var t=(0,m.useAppDispatch)(),n=(0,d.useFolder)(e.folderId,v.getFolderContent,(function(t){return(0,v.getById)(t,e.parentFolderId)}),c.FolderType.editor,v.writeItem),o=n.folder,u=null==o?void 0:o.editor,p=(0,m.useAppSelector)((function(e){return e.editor.showComments})),b=void 0!==(null==o?void 0:o.id)&&(null==u?void 0:u.isCommentLayer);if(b&&!p)return a.default.createElement(a.default.Fragment,null);var w=function(){var r=(0,i.default)((function*(){var r,o=yield v.DocumentPicker.pickSingle({presentationStyle:"fullScreen"});if(console.info("pickerResult",o,n.folder),o){var i=o.uri,a=e.folderId,l={id:y.default.v4().toString(),url:i,title:o.name,originalId:o.name,filename:o.name,fileType:o.type,folderId:a,userId:e.userId,date:(new Date).valueOf(),isMediaNew:!1,isEncoderProject:!0,type:o.file.type,size:o.file.size,extractor:null!=(r=n.folder)&&r.mnemonic?"wt":"local"};t((0,g.startOnboarding)({file:o.file,media:l}))}}));return function(){return r.apply(this,arguments)}}(),E=n.folderContent;return a.default.createElement(l.default,{style:{display:"flex",flexDirection:"row"}},a.default.createElement(l.default,{style:{width:"80%",display:"flex",flexDirection:"row"}},!b&&void 0!==E&&a.default.createElement(a.default.Fragment,null,a.default.createElement(f.default,{horizontal:!0,renderItem:function(t){var r=t.item,o=t.onDragEnd,i=t.onDragStart,l=t.index;return a.default.createElement(h.default,{onDragEnd:o,onDragStart:i,item:r,index:l,layerIndex:e.layerIndex,writeItem:v.writeItem,parentDataHook:n})},keyExtractor:function(e){return e.id||e.date.toString()},data:E,onReordered:n.onReordered,style:{width:"100%"},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1}),a.default.createElement(s.List.Item,{title:"Add Content",titleStyle:{fontSize:14},style:{pointerEvents:"auto"},onPress:function(){return w()},right:function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.IconButton,(0,r.default)({},e,{icon:"plus",onPress:function(){return w()},mode:"outlined"})))}})),b&&void 0!==E&&a.default.createElement(a.default.Fragment,null,null==E?void 0:E.map((function(t,r){return a.default.createElement(h.default,{item:t,index:r,layerIndex:e.layerIndex,writeItem:v.writeItem,parentDataHook:n})})),a.default.createElement(s.List.Item,{title:"",titleStyle:{fontSize:14},style:{pointerEvents:"auto",height:68}}))))},t.EditorLayerHeaderComponent=function(e){var t=(0,d.useFolder)(e.folderId,v.getFolderContent,(function(t){return(0,v.getById)(t,e.parentFolderId)}),c.FolderType.editor,v.writeItem),n=(0,u.default)().width<700,f=t.folder,y=null==f?void 0:f.editor,g=(0,m.useAppSelector)((function(e){return e.editor.showComments})),h=function(){var e=(0,i.default)((function*(e){yield(0,v.writeItem)(Object.assign({},t.folder,{editor:Object.assign({},y||{},(0,o.default)({},e,!y||!0!==y[e]))})),t.folderData.refetch()}));return function(t){return e.apply(this,arguments)}}(),b=function(e){return h("muted")},w=function(e){return h("videoDisabled")},E=void 0!==(null==f?void 0:f.id)&&(null==y?void 0:y.isCommentLayer);if(E&&!g)return a.default.createElement(a.default.Fragment,null);var P=function(n){return void 0===n&&(n={}),a.default.createElement(l.default,{style:{flexDirection:"row",padding:0}},a.default.createElement(s.IconButton,(0,r.default)({},n,{size:I,icon:null!=y&&y.muted?"volume-off":"volume-high",mode:"outlined",onPress:b})),a.default.createElement(s.IconButton,(0,r.default)({size:I},n,{mode:"outlined",icon:null!=y&&y.videoDisabled?"video-off":"video",onPress:w})),a.default.createElement(s.IconButton,(0,r.default)({size:I},n,{icon:"delete",onPress:(0,i.default)((function*(){yield t.onRemoveFolder({id:e.folderId}),e.parentHook.folderContentQuery.refetch()})),mode:"outlined"})))},I=n?10:14;return a.default.createElement(l.default,{style:{display:"flex",flexDirection:"row",height:68}},a.default.createElement(l.default,{style:{width:"100%"}},a.default.createElement(s.Divider,null),a.default.createElement(s.List.Item,{title:function(){var r;return n?a.default.createElement(P,null):a.default.createElement(p.TouchableOpacity,{onPressIn:e.onDragStart,onPressOut:e.onDragEnd,style:{pointerEvents:"auto"}},a.default.createElement(s.Text,{style:{fontSize:14}},null==(r=t.folder)?void 0:r.title))},right:function(e){return n?null:E?a.default.createElement(s.IconButton,(0,r.default)({size:I},e,{mode:"outlined",icon:"forum"})):a.default.createElement(P,null)}})))},r=b(r),o=b(o),i=b(i),a=b(a),l=b(l),u=b(u),f=b(f),y=b(y),h=b(h)}.apply(t,r))||(e.exports=o)},480761:(e,t,n)=>{var r,o;r=[t,n(29293),n(94634),n(936665),n(956199),n(490320),n(11881),n(638608),n(140558)],void 0===(o=function(e,r,o,i,a,l,u,d,c){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorPlayControls=function(){var e=(0,c.default)().width,t=(0,u.useAppDispatch)(),n=(0,u.useAppSelector)((function(e){return e.editor.caretPosition})),s=(0,u.useAppSelector)((function(e){return e.editor.scrollPosition})),f=(0,u.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),p=(0,u.useAppSelector)((function(e){return e.editor.isPlaying})),m=(0,u.useAppSelector)((function(e){return e.editor.activeLayer})),y=(n+s)/f;return i.default.createElement(a.List.Item,{style:{width:e,height:50,position:"absolute",bottom:0,left:0,backgroundColor:"transparent",zIndex:1e4},left:function(e){return i.default.createElement(a.List.Icon,(0,o.default)({},e,{icon:"clock"}))},title:(0,l.genExecTime)(y),right:function(e){return i.default.createElement(a.IconButton,(0,o.default)({},e,{mode:"contained",icon:p?"pause":"play",onPress:(0,r.default)((function*(){try{!1===p?(console.info("start play"),t((0,d.setActiveLayer)({activeLayerId:m,caretPosition:n,scrollPosition:s})),t((0,d.setIsPlaying)(!0))):t((0,d.setIsPlaying)(!1))}catch(e){console.error(e)}}))}))}})},r=s(r),o=s(o),i=s(i),c=s(c)}.apply(t,r))||(e.exports=o)},356410:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(936665),n(573929),n(140558),n(701577),n(272679),n(609209),n(201319),n(956199),n(419546),n(477983),n(11881),n(638608),n(616392),n(323817),n(490320),n(614880),n(732678)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h,b,w,E){"use strict";var P=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=P(r),o=P(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),a=P(a),l=P(l),u=P(u),p=P(p),g=P(g),w=P(w);var S=c.FolderType.editor;t.default=function(e){var t=(0,l.default)().width,n=t<700,P=(0,s.useRoute)(),I=e.userId,F=(0,y.useAppSelector)((function(e){return e.editor.scrollPosition})),D=(0,y.useAppSelector)((function(e){return e.editor.scrollParams})),O=P.params,M=O.projectId,A=O.parentFolderId,T=(0,i.useCallback)((function(e){return(0,b.getById)(e,A)}),[A]),_=(0,y.useAppDispatch)(),x=(0,d.useFolder)(M,b.getFolderContent,T,c.FolderType.editor,b.writeItem);(0,i.useEffect)((function(){return console.info("reset"),_((0,v.setIsPlaying)(!1)),_((0,v.setScrollPosition)(0)),_((0,v.setCaretPosition)(0)),function(){_((0,v.setIsPlaying)(!1)),_((0,v.setScrollPosition)(0)),_((0,v.setCaretPosition)(0))}}),[M]);var C=(0,h.useMutation)((function(e){return(0,b.writeItem)(e)})),j=function(){var e=(0,o.default)((function*(){var e,t={id:g.default.v4().toString(),title:"Layer"+parseInt(x.folderContent.length+1),folderId:M,userId:I,isEditorLayer:!0,orderId:x.folderContent.length+1,folderType:S,isFolder:!1,date:(new Date).valueOf(),mnemonic:null==(e=x.folder)?void 0:e.mnemonic};yield C.mutateAsync(t),x.folderContentQuery.refetch()}));return function(){return e.apply(this,arguments)}}(),k=(0,i.useRef)(),L=n?"60%":"80%",B=n?"40%":"20%";return i.default.createElement(m.ScrollView,{style:{width:t,height:"100%",position:"absolute"},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},i.default.createElement(a.default,{style:{display:"flex",flexDirection:"column"}},i.default.createElement(a.default,{style:{width:"100%",flexDirection:"row"}},i.default.createElement(a.default,{style:{width:B}},void 0!==x.folderContent&&i.default.createElement(p.default,{renderItem:function(t){var n=t.item,o=t.onDragEnd,a=t.onDragStart,l=t.index;return i.default.createElement(E.EditorLayerHeaderComponent,(0,r.default)({},e,{key:n.id,onDragEnd:o,onDragStart:a,folderId:n.id,layerIndex:l,parentHook:x,parentFolderId:A}))},keyExtractor:function(e){return e.id||e.date.toString()},data:x.folderContent,onReordered:function(){var e=(0,o.default)((function*(e,t){yield x.onReordered(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1})),i.default.createElement(m.ScrollView,{horizontal:!0,style:{width:L,display:"flex",flexDirection:"row",height:"100%"},onScroll:function(e){_((0,v.setScrollPosition)(e.nativeEvent.contentOffset.x))},ref:function(e){var t,n,r;k.current=e;var o=null==k||null==(t=k.current)?void 0:t.clientWidth,i=null==(n=k.current)?void 0:n.scrollWidth;D.totalScroll===i&&D.totalWidth===o||_((0,v.setScrollParams)({totalWidth:o,totalScroll:i})),null==k||null==(r=k.current)||r.scrollTo({x:F})},scrollEventThrottle:50,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},i.default.createElement(u.default,{renderItem:function(t){var n=t.item,o=t.index;return i.default.createElement(E.EditorLayerBodyComponent,(0,r.default)({},e,{key:n.id,folderId:n.id,layerIndex:o,parentFolderId:A}))},keyExtractor:function(e){return e.id||e.date.toString()},getItem:x.getContentItem,getItemCount:x.getContentCount,data:x.folderContent,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1}))),i.default.createElement(a.default,{style:{width:B}},i.default.createElement(f.Divider,null),i.default.createElement(f.List.Item,{titleStyle:{fontSize:14},onPress:function(){return j()},right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.IconButton,(0,r.default)({},e,{icon:"plus",mode:"outlined"})))}})),i.default.createElement(a.default,{style:{width:L,position:"absolute",height:0,left:B}},i.default.createElement(w.default,null))))}}.apply(t,r))||(e.exports=o)},801175:(e,t,n)=>{var r,o;r=[t,n(29293),n(585715),n(936665),n(956199),n(11881),n(638608),n(490320),n(323817),n(616392),n(595991),n(140558)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=e.projectId,n=e.routeParams.encoder,f=(0,l.useAppDispatch)(),m=(0,c.useQueryClient)(),y=(0,l.useAppSelector)((function(e){return e.editor.caretPosition})),v=(0,l.useAppSelector)((function(e){return e.editor.scrollPosition})),g=(0,l.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),h=(0,l.useAppSelector)((function(e){return e.editor.showComments})),b=(0,p.default)().width<700||!1,w=(0,l.useAppSelector)((function(e){return e.editor.showEditor})),E=(y+v)/g,P=(0,i.useState)(!1),I=(0,o.default)(P,2),S=I[0],F=I[1],D=(0,i.useState)(!1),O=(0,o.default)(D,2),M=O[0],A=O[1],T=(0,c.useQuery)(["projectLayersToolbar",t],(0,r.default)((function*(){var e=yield(0,d.getFolderContent)(t),n=yield Promise.all(e.map(function(){var e=(0,r.default)((function*(e){return Object.assign({},e,{media:yield(0,d.getFolderContent)(null==e?void 0:e.id)})}));return function(t){return e.apply(this,arguments)}}()));return n}))),_=T.data,x=function(){var e=(0,r.default)((function*(){yield T.refetch(),yield m.refetchQueries(["folderData_"+t],{}),yield m.refetchQueries(["folderContent_"+t]),yield m.refetchQueries(["project_"+t]),yield m.refetchQueries(["projectLayers",t]),yield m.refetchQueries(["encodedMedia",t]),yield m.refetchQueries(["folderContent_"+t+"_comments"]);var e=null==_?void 0:_.map((function(e){return e.id}));if(console.info("project.folders",e),null!=e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];m.refetchQueries(["folderContent_"+r])}}));return function(){return e.apply(this,arguments)}}(),C=function(e){var t="+"===e?1.25*g:.75*g;t<.5&&(t=.5),f((0,u.setPixelsPerSecond)(t))},j=function(){var e=(0,r.default)((function*(){if(!S){F(!0);try{var e=yield(0,d.getById)(n,t);e.isCopy=e.isCopy||e.id,e.id=s.default.v4().toString(),e.orderId+=1,e.createdAt=(new Date).valueOf().toString(),console.info("click copy",{encoder:n,currentPosition:E,item:e}),yield(0,d.writeItem)(e),yield m.refetchQueries(["projectLayers",t]),yield m.refetchQueries(["folderContent_"+e.folderId]),yield x()}catch(r){console.error("oncClickCopy",r)}F(!1)}}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.default)((function*(){if(!S){F(!0);try{var e=(0,d.getActiveProjectLayer)(_,E),r=yield(0,d.getById)(n,t),o=E-e.offset+(r.encoding.start||0),i=JSON.parse(JSON.stringify(Object.assign({},r)));i.isCopy=r.isCopy||r.id,i.id=s.default.v4().toString(),i.orderId-=1,i.encoding.start=o,i.encoding.end=r.encoding.end||r.duration||0,i.createdAt=(new Date).valueOf().toString(),r.encoding.end=o,yield(0,d.writeItem)(r),yield(0,d.writeItem)(i),yield x()}catch(a){console.error("oncClickCut",a)}F(!1)}}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.default)((function*(){try{if(S)return;F(!0),yield x()}catch(e){console.error("onClickRefresh",e)}F(!1)}));return function(){return e.apply(this,arguments)}}(),B=function(){return f((0,u.setShowComments)(!h))},R=function(){var e=(0,r.default)((function*(){var e,n=yield(0,d.getUserData)(),r=s.default.v4().toString(),o=null==(e=_[0])?void 0:e.mnemonic,i={id:r,partyId:r,userId:n.id,title:n.name,currentPosition:E,isContact:!0,isParty:!0,authorName:n.name,name:n.name,mnemonic:o,folderId:t+"_comments",isFolder:!0,duration:10,encoding:{start:0,end:10}};yield(0,d.createNewParty)(i),yield x(),console.info(o),yield(0,d.sendChatMessage)(i.id,n.name+" has created comment",o,{system:!0})}));return function(){return e.apply(this,arguments)}}();return i.default.createElement(i.default.Fragment,null,b?i.default.createElement(a.Menu,{visible:M,onDismiss:function(){return A(!1)},anchor:i.default.createElement(a.Appbar.Action,{icon:"dots-grid",onPress:function(){return A(!0)}})},i.default.createElement(a.Menu.Item,{leadingIcon:"refresh",title:"Refresh",disabled:S,onPress:function(){return L()}}),i.default.createElement(a.Menu.Item,{leadingIcon:"comment-plus",title:"Add comment",onPress:function(){return R()}}),i.default.createElement(a.Menu.Item,{title:"Toggle comments",leadingIcon:h?"comment-eye":"comment-eye-outline",onPress:function(){return B()}}),i.default.createElement(a.Menu.Item,{title:"Magnify timeline",leadingIcon:"magnify-plus-outline",onPress:function(){return C("+")}}),i.default.createElement(a.Menu.Item,{title:"Scale timeline",leadingIcon:"magnify-minus-outline",onPress:function(){return C("-")}}),w&&i.default.createElement(a.Menu.Item,{title:"Cut Content",disabled:S,leadingIcon:"content-cut",onPress:function(){return k()}}),w&&i.default.createElement(a.Menu.Item,{title:"Copy Content",disabled:S,leadingIcon:"content-copy",onPress:function(){return j()}})):i.default.createElement(i.default.Fragment,null,i.default.createElement(a.Appbar.Action,{icon:"refresh",disabled:S,onPress:function(){return L()}}),h?i.default.createElement(a.Appbar.Action,{icon:"comment-plus",onPress:function(){return R()}}):null,i.default.createElement(a.Appbar.Action,{icon:h?"comment-eye":"comment-eye-outline",onPress:function(){return B()}}),i.default.createElement(a.Appbar.Action,{icon:"magnify-plus-outline",onPress:function(){return C("+")}}),i.default.createElement(a.Appbar.Action,{icon:"magnify-minus-outline",onPress:function(){return C("-")}}),w&&i.default.createElement(a.Appbar.Action,{disabled:S,icon:"content-cut",onPress:function(){return k()}}),w&&i.default.createElement(a.Appbar.Action,{disabled:S,icon:"content-copy",onPress:function(){return j()}})))},r=m(r),o=m(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),s=m(s),f=m(f),p=m(p)}.apply(t,r))||(e.exports=o)},470020:(e,t,n)=>{var r,o;r=[t,n(29293),n(936665),n(595991),n(569944),n(140558),n(956199),n(323817),n(748524),n(11881),n(201319),n(638608),n(788387)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m){"use strict";var y=n(124994);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=y(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=y(i),a=y(a),l=y(l);var g=a.default.create({video:{width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0},chip:{fontSize:18}});t.default=function(e){var t,n,i,a,m=e.video2,y=e.mediaRes,v=e.layers,h=e.projectId,b=(0,s.useAppDispatch)(),w=(0,s.useAppSelector)((function(e){return e.editor.encoderProgress})),E=(0,s.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),P=(0,s.useAppSelector)((function(e){return e.editor.videoCaretPosition})),I=(0,s.useAppSelector)((function(e){return e.editor.videoScrollPosition})),S=((0,o.useRef)(),(0,s.useAppSelector)((function(e){return e.editor.isPlaying}))),F=(0,s.useAppSelector)((function(e){return e.editor.canScroll})),D=(0,s.useAppSelector)((function(e){return e.editor.scroll})),O=(0,s.useAppSelector)((function(e){return e.editor.activeLayer})),M=(0,f.useIsFocused)(),A=(P+I)/E||0,T=(0,d.useQuery)(["encodedMedia",h,A,O],(0,r.default)((function*(){return yield(0,c.getProjectMedia)(v,A,(function(e){return b((0,p.setEncoderProgress)(e.progress))}))})),{enabled:!(void 0===(null==y?void 0:y.id)||null==v||!v.length||!M),keepPreviousData:!1,onSuccess:function(){var e;console.info("after query"),null!=m&&m.current&&(m.current.currentPosition=(null==(e=T.data)?void 0:e.currentPosition)||0)}}),_=(null==(t=T.data)?void 0:t.currentPosition)||0,x=(null==(n=T.data)?void 0:n.offset)||0,C=(0,o.useCallback)((function(e,t){try{var n,r,o,i,a=(x||0)+e-((null==(n=T.data)?void 0:n.activeMedia.encoding.start)||0);if(a>=(null==(r=T.data)?void 0:r.totalTime))null==(i=m.current)||i.pause(),b((0,p.setIsPlaying)(!1));var l=a*E,u=null==(o=(0,c.getActiveProjectLayer)(v,a))||null==(o=o.activeMedia)?void 0:o.id,d=u&&u!==O,s=0,f=P;if(!t){if(F){var y=l-D;if(console.info("offset",y,D,l),y>0){var g=l-y;console.info("diff",g,y,D,l),s=g,f=y}else s=l-P}else f=l;b((0,p.setIsPlaying)(!0)),b((0,p.setCaretPosition)(f)),b((0,p.setScrollPosition)(s))}t&&S&&b((0,p.setIsPlaying)(!1)),d&&b((0,p.setActiveLayer)({activeLayerId:u,scrollPosition:s,caretPosition:f}))}catch(h){console.error("ontimeupdate rr",h)}}),[T,F,S,v,x]),j=(0,l.default)();return j.width,j.height,o.default.createElement(o.default.Fragment,null,w&&1!==w||T.isFetching?o.default.createElement(u.ProgressBar,{style:{height:"100%",width:"100%",position:"absolute",top:0},progress:w}):o.default.createElement(o.default.Fragment,null,o.default.createElement("video",{controls:!1,style:g.video,src:(null==(i=T.data)?void 0:i.url)||"",muted:null==(a=T.data)?void 0:a.muted,ref:function(e){e&&(e.currentTime=_,m.current=e,S&&e.play())},onPlaying:function(e){b((0,p.setIsPlaying)(!0))},onPause:function(e){b((0,p.setIsPlaying)(!1))},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){return C(e.nativeEvent.target.currentTime,e.nativeEvent.target.paused)}})))}}.apply(t,r))||(e.exports=o)},603791:(e,t,n)=>{var r,o;r=[t,n(29293),n(936665),n(756933),n(569944),n(573929),n(956199),n(323817),n(490320),n(11881),n(201319),n(361278),n(379241)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m){"use strict";var y=n(124994);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n,a=e.projectId,y=e.height,v=e.folderId,h=(0,s.useAppDispatch)(),b=(0,s.useAppSelector)((function(e){return e.encoder})),w=(0,u.useTheme)(),E=((0,d.useQueryClient)(),(0,d.useQuery)(["projectdata",a],(0,r.default)((function*(){return yield(0,c.getById)(a,v)})),{enabled:!!a})),P=(0,f.useIsFocused)(),I=E.data,S=(0,d.useQuery)(["localMedia",a],(0,r.default)((function*(){if(null!=I&&I.id){var e;try{e=yield(0,c.getFileOpfs)(I)}catch(t){console.error(t)}return"wt"!==I.extractor||e||(e=yield(0,c.getVideoWT)(I)),e}})),{enabled:!(!E.isFetched||!P||void 0===(null==I?void 0:I.id))}),F=(0,d.useQuery)(["encodedMedia",a],(0,r.default)((function*(){return(null==I?void 0:I.id)&&(0,c.encodeMedia)(I,(function(e){return h((0,m.setEncoderProgress)(e.progress))}))})),{enabled:!(!E.isFetched||!P||void 0===(null==I?void 0:I.id))}),D=(0,d.useQuery)(["encodedFileSize",a],(0,r.default)((function*(){var e;return F.data?null==(e=(yield fetch(F.data,{cache:"no-cache"})).headers.get("Content-Length"))?void 0:e.toString():"0"})),{enabled:!!(!E.isFetching&&P&&F.data&&F.data.search("blob")>-1),retry:!1}),O=E.isFetching||S.isFetching;console.info("encodedFileSize",D.data);var M=S.data,A=(0,o.useRef)(),T=(0,o.useRef)();if(!I)return o.default.createElement(u.ActivityIndicator,{size:72});return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Divider,null),o.default.createElement(u.Banner,{visible:!!a,theme:w,style:{backgroundColor:"black",padding:0,margin:0},contentStyle:{width:"100%",height:"100%",maxWidth:"auto",padding:0,margin:0}},o.default.createElement(l.default,{style:{width:"50%",height:y/2,borderRightWidth:1,borderRightColor:"rgb(73, 69, 79)"}},o.default.createElement(u.Text,{style:{textAlign:"left",zIndex:10}},o.default.createElement(u.Chip,{textStyle:g.chip},"Before: ",(null==I?void 0:I.size)&&(0,p.niceBytes)(I.size))),O?o.default.createElement(u.ActivityIndicator,{size:72}):null,a&&!O&&P?o.default.createElement("video",{controls:!0,style:g.video,onPlaying:function(e){var t=e.nativeEvent.target.currentTime;window.video1=e.nativeEvent.target,A.current&&(A.current.currentTime=t),A.current&&A.current.paused&&A.current.play()},onPause:function(e){var t=e.nativeEvent.target.currentTime;A.current&&(A.current.currentTime=t),A.current&&!A.current.paused&&A.current.pause()},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){var t=e.nativeEvent.target,n=t.currentTime,r=t.paused;A.current&&r&&(A.current.currentTime=n)},ref:T,src:M}):null),o.default.createElement(l.default,{style:{width:"50%",height:y/2,borderLeftWidth:1,borderLeftColor:"rgb(73, 69, 79)"}},F.isFetching?o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Text,{style:{textAlign:"right",zIndex:10}}," "),o.default.createElement(u.ProgressBar,{style:{height:"100%",position:"absolute",top:-25},progress:b.encoderProgress}),o.default.createElement(l.default,{style:{position:"absolute",top:"40%",display:"flex",width:"100%"}},o.default.createElement(u.Text,{style:{textAlign:"center",color:"coral"}},"Loading"," ",parseFloat(Math.abs(100*b.encoderProgress)).toFixed(2),"%"))):o.default.createElement(u.Text,{style:{textAlign:"right",zIndex:10}},o.default.createElement(u.Chip,{textStyle:g.chip},"After:"," ",!D.isFetching&&D.data&&(0,p.niceBytes)(D.data)),o.default.createElement("a",{href:F.data,download:!0},o.default.createElement(u.Chip,{textStyle:g.chip,onPress:function(){}},"Download"))),a&&!F.isFetching&&P?o.default.createElement(o.default.Fragment,null,"mp4"===(null==I||null==(t=I.encoding)?void 0:t.output)&&o.default.createElement("video",{controls:!0,style:g.video,onPlaying:function(e){var t,n;null!=(t=T.current)&&t.paused&&(null==(n=T.current)||n.play())},onPause:function(e){var t,n;null!=(t=T.current)&&t.paused||null==(n=T.current)||n.pause()},ref:A,src:F.data}),"gif"===(null==I||null==(n=I.encoding)?void 0:n.output)&&o.default.createElement(i.default,{source:{uri:F.data},resizeMode:"contain",style:g.video})):null)),o.default.createElement(u.Divider,null))},r=y(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=y(i),a=y(a),l=y(l);var g=a.default.create({video:{width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0},chip:{fontSize:18}})}.apply(t,r))||(e.exports=o)},790970:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(585715),n(936665),n(304701),n(573929),n(140558),n(956199),n(323817),n(490320),n(201319),n(609209),n(477983),n(858542),n(796541),n(268444)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h){"use strict";var b=n(124994);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=b(r),o=b(o),i=b(i),a=E(a),l=b(l),u=b(u),d=b(d),v=b(v),h=E(h);t.default=(0,a.memo)((function(e){var t=(0,p.useRoute)(),n=(0,s.useQueryClient)(),b=(0,a.useState)(!1),w=(0,i.default)(b,2),E=w[0],P=w[1],I=t.params;console.info("params",I);var S=I||{},F=S.projectId,D=S.encoder,O=S.folderId,M=S.parentFolderId;D&&(F=D);var A=(0,s.useQuery)("project_"+F,(0,o.default)((function*(){return yield(0,f.getById)(F,M||O)}))),T=A.data;console.info("projectData",T);var _=(0,a.useRef)(),x=(0,a.useRef)(),C=(0,d.default)().width,j=e.codeWidth||C-200,k=(0,s.useMutation)(function(){var e=(0,o.default)((function*(e){var t=yield(0,f.writeItem)(e);return clearTimeout(_.current),_.current=setTimeout((function(){n.refetchQueries({queryKey:["folderContent_"+(null==T?void 0:T.folderId)]}),n.refetchQueries({queryKey:["projectdata",F]}),n.resetQueries({queryKey:["encodedMedia",F],exact:!0}),n.resetQueries({queryKey:["encodedFileSize",F],exact:!0}),n.resetQueries({queryKey:["encodedFileSize",F],exact:!0}),A.refetch()}),1e3),t}));return function(t){return e.apply(this,arguments)}}()),L=(0,a.useState)(!1),B=(0,i.default)(L,2),R=B[0],W=B[1],N=(0,a.useState)(!1),z=(0,i.default)(N,2),U=z[0],H=z[1],Q=Object.keys(m.FFMpegOutputType),V=function(){W(!1),H(!1)},K=function(e,t){var n=T,r=!["start","end","soundVolume"].includes(e);["width","compressionLevel","height","start","end","soundVolume"].includes(e)&&isNaN(t)?console.info("invalid type"):""!==t&&(n.encoding||(n.encoding={}),n.encoding[e]=t,console.info(n),r&&(n.encoding.lastUpdated=(new Date).valueOf()),k.mutateAsync(n),V())};if(A.isFetching)return a.default.createElement(c.ActivityIndicator,{size:72});var q=(0,f.genExecCmd)(T).join("\n"),J=12,G=120;return a.default.createElement(y.ScrollView,{showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},a.default.createElement(c.Divider,{key:"div00"}),a.default.createElement(c.List.Item,{key:"info",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"information"}))},title:null==T?void 0:T.title}),a.default.createElement(c.Divider,{key:"div01"}),a.default.createElement(c.List.Item,{key:"start",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"clock-plus"}))},title:"Start",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:(null==T||null==(t=T.encoding)?void 0:t.start)||0,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("start",parseFloat(e))}}))}}),a.default.createElement(c.Divider,{key:"div7"}),a.default.createElement(c.List.Item,{key:"end",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"clock-minus"}))},title:"End ("+(null==T?void 0:T.duration)+")",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:(null==T||null==(t=T.encoding)?void 0:t.end)||(null==T?void 0:T.duration),style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("end",parseFloat(e))}}))}}),a.default.createElement(c.Divider,{key:"div4"}),a.default.createElement(c.List.Item,{key:"cl",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"zip-box"}))},title:"Compression",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:null==T||null==(t=T.encoding)?void 0:t.compressionLevel,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("compressionLevel",parseInt(e,10))}}))}}),a.default.createElement(c.Divider,{key:"divvolume"}),a.default.createElement(c.List.Item,{key:"volume",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"zip-box"}))},title:"Sound Volume",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:(null==T||null==(t=T.encoding)?void 0:t.soundVolume)||100,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("soundVolume",parseInt(e,10))}}))}}),a.default.createElement(c.Divider,{key:"div3"}),a.default.createElement(c.List.Item,{key:"width",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"ruler"}))},title:"Width("+(null==T?void 0:T.width)+")",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:null==T||null==(t=T.encoding)?void 0:t.width,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("width",parseInt(e,10))}}))}}),a.default.createElement(c.Divider,{key:"div2"}),a.default.createElement(c.List.Item,{key:"height",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"ruler"}))},title:"Height("+(null==T?void 0:T.height)+")",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.TextInput,{dense:!0,mode:"outlined",value:null==T||null==(t=T.encoding)?void 0:t.height,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return K("height",parseInt(e,10))}}))}}),a.default.createElement(c.Divider,{key:"div1"}),a.default.createElement(c.List.Item,{key:"output",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"file-export"}))},title:"Output",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.Menu,{visible:R,onDismiss:V,anchor:a.default.createElement(c.Button,{mode:"outlined",onPress:function(){return W(!0)}},null==T||null==(t=T.encoding)?void 0:t.output)},a.default.createElement(a.default.Fragment,null,Q.map((function(e){return a.default.createElement(c.Menu.Item,{key:e,onPress:function(){return K("output",e)},title:e})})))))}}),a.default.createElement(c.Divider,{key:"div"}),a.default.createElement(c.List.Item,{key:"preset",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"cog"}))},title:"Preset",titleStyle:{fontSize:J},right:function(e){var t;return a.default.createElement(u.default,{style:{width:G}},a.default.createElement(c.Menu,{visible:U,onDismiss:V,anchor:a.default.createElement(c.Button,{mode:"outlined",onPress:function(){return H(!0)}},null==T||null==(t=T.encoding)?void 0:t.preset)},a.default.createElement(a.default.Fragment,null,Object.keys(m.FFMpegPreset).map((function(e){return a.default.createElement(c.Menu.Item,{key:e,onPress:function(){return K("preset",e)},title:e})})))))}}),!0===E?a.default.createElement(u.default,null,a.default.createElement(c.Divider,{key:"div5"}),a.default.createElement(c.List.Item,{key:"code",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"code-brackets"}))},title:"",titleStyle:{fontSize:J},onPress:function(){var e;return null==x||null==(e=x.current)?void 0:e.focus()},right:function(e){var t;return a.default.createElement(l.default,{style:{width:j,zIndex:10}},a.default.createElement(h.default,{className:"codeEditor",ref:x,style:{fontSize:J,inputLineHeight:J,highlighterLineHeight:J,display:"flex"},language:"bash",syntaxStyle:h.CodeEditorSyntaxStyles.xonokai,initialValue:(null==T||null==(t=T.encoding)||null==(t=t.code)?void 0:t.join(","))||"",onChange:function(e){var t;e!==(null==T||null==(t=T.encoding)||null==(t=t.code)?void 0:t.join(","))&&K("code",e.split(","))},autoFocus:!1,showLineNumbers:!0}))}}),a.default.createElement(c.Divider,{key:"div6"}),q&&a.default.createElement(c.List.Item,{key:"output_code",left:function(e){return a.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"code-tags"}))},title:"",titleStyle:{fontSize:J},right:function(){return a.default.createElement(u.default,{style:{width:j}},a.default.createElement(v.default,{language:"bash",style:g.xonokai,highlighter:"prism",fontSize:J},q)," ")}}),a.default.createElement(c.Divider,{key:"div8"})):null,a.default.createElement(c.Button,{icon:"code-brackets",onPress:function(){return P(!E)}},"Show FFMpeg Code"))}))}.apply(t,r))||(e.exports=o)},975906:(e,t,n)=>{var r,o;r=[t,n(936665),n(304701),n(569944),n(573929),n(140558),n(701577),n(576409),n(956199),n(201319)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=f(r),o=f(o),i=f(i),a=f(a),l=f(l),u=f(u),d=f(d);t.default=function(e){var t=e.dataHook,n=(0,l.default)(),f=n.height,p=n.width>700?80:0,m=n.width-p,y=(0,s.useNavigation)(),v=t.folders,g=t.currentFolderId,h=t.getItem,b=t.getItemCount,w=t.isEditingFolder,E=t.currentFolderEditorName,P=t.setFolderEditorName,I=t.folderNameInputRef,S=t.onFolderActionPress,F=t.loadingContent,D=t.loadingFolders,O=t.onRemoveFolder,M=t.abortEditFolder,A=i.default.create({container:{flex:1,paddingTop:0,marginTop:0},item:{paddingLeft:5,fontSize:12,height:120,color:"black",width:"100%"},tinyLogo:{marginTop:2,width:22,height:22},scroll:{height:f-55,display:"flex",position:"relative",backgroundColor:"black",marginTop:0,width:"100%"},icon:{paddingLeft:10}});return D?r.default.createElement(c.ActivityIndicator,{size:72}):r.default.createElement(o.default,{style:Object.assign({},A.scroll)},r.default.createElement(u.default,{onEndReached:function(){console.info("onEndReached")},data:v,initialNumToRender:100,renderItem:function(e){return function(e){return r.default.createElement(a.default,{style:{width:m},key:e.id},r.default.createElement(d.default,{key:e.id,folder:Object.assign({},e,{isOpen:e.id===g&&!w,isInfoOpen:e.id===w}),styles:A,abortEditFolder:M,folderNameInputRef:I,iconColor:"black",iconSize:30,width:m,isLoadingContent:g===e.id&&F,isOpen:e.id===g,currentFolderEditorName:E,setFolderEditorName:P,onFolderPress:function(){y.navigate({name:"Folder",params:{folderId:e.id,title:e.title,mnemonic:e.mnemonic,userId:e.userId}})},onShareFolder:function(){return t.onShareFolder(e)},onFolderActionPress:function(){return S(e.id)},onRemoveFolder:function(){return O(e)}},e.id!==g||w?null:r.default.createElement(a.default,{style:{width:m,height:"auto"}})))}(e.item)},keyExtractor:function(e){return e.id||e.date.toString()},getItemCount:b,getItem:h,getItemLayout:function(e,t){return{length:50,offset:50*t,index:t}}}))}}.apply(t,r))||(e.exports=o)},98860:(e,t,n)=>{var r,o;r=[t,n(936665),n(573929),n(701577),n(140558),n(696974),n(956199),n(975906)],void 0===(o=function(e,r,o,i,a,l,u,d){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.FolderNavigator=void 0,r=c(r),o=c(o),i=c(i),a=c(a),d=c(d);t.FolderNavigator=function(e){var t,n=e.parentFolderId,c=e.parentFolderHook,s=e.renderContent,f=e.folderType,p=(0,l.useFolders)(f,!1),m=(0,a.default)().height;return r.default.createElement(o.default,{style:{width:"30%",height:"100%"}},n?null:r.default.createElement(d.default,{dataHook:p}),n?r.default.createElement(r.default.Fragment,null,c.folderContentQuery.isFetching||c.isLoadingFolder||null==(t=c.folderContent)||!t.length?r.default.createElement(u.ActivityIndicator,{size:72}):r.default.createElement(i.default,{onEndReached:function(){console.info("onEndReached")},scrollEnabled:!0,style:{height:m},data:c.folderContent,pagingEnabled:!0,initialNumToRender:1e3,renderItem:s,keyExtractor:function(e){return e.id||e.date.toString()},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,getItemCount:c.getContentCount,getItem:c.getContentItem,onScrollToTop:function(){},getItemLayout:function(e,t){return{length:130,offset:130*t,index:t}}})):null)}}.apply(t,r))||(e.exports=o)},979090:(e,t,n)=>{var r,o;r=[t,n(936665),n(304701),n(573929),n(140558),n(595991),n(419546),n(64964),n(272679),n(956199),n(201319),n(490320),n(98860),n(318195)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),o=v(o),i=v(i),a=v(a),l=v(l),u=v(u),d=v(d);t.default=(0,r.memo)((function(e){var t=e.folderType,n=(0,f.useIsFocused)(),l=(0,a.default)(),v=l.height,g=l.width,h=!(g>700),b=(0,f.useRoute)().params,w=b.folderId,E=b.mnemonic,P=b.title,I=b.userId,S=(0,c.useFolder)(w,p.getFolderContent,p.getById,t,p.writeItem,E,P,I),F=S.folderContent,D=S.isLoadingFolder,O=(S.isLoadingFolderContent,S.folderData,S.folderContentQuery),M=S.folder,A=S.onReordered,T=S.addMedia,_=(null==b?void 0:b.parentFolderId)||M&&M.folderId||null;_===w&&(_=null);var x=(0,c.useFolder)(_,p.getFolderContent,p.getById,t,p.writeItem),C=y.styles;if(C.item.width=g-80,C.scroll.height=v-65,C.scroll.marginTop=0,!n)return r.default.createElement(r.default.Fragment,null);var j=function(e){var t=e.item,n=e.onDragEnd,o=e.onDragStart;return r.default.createElement(d.default,{i:t,key:t.id,dataHook:S,styles:C,width:h?g:g/100*70,onDragStart:o,onDragEnd:n})};return r.default.createElement(o.default,null,r.default.createElement(i.default,{style:{height:"100%",width:"100%",flexDirection:"row"}},h?null:r.default.createElement(m.FolderNavigator,{parentFolderId:_,parentFolderHook:x,renderContent:j,folderType:t}),D||O.isFetching||void 0===F?r.default.createElement(s.ActivityIndicator,{size:72}):r.default.createElement(u.default,{renderItem:j,keyExtractor:function(e){return(null==e?void 0:e.id)||(null==e?void 0:e.date.toString())},style:{width:"100%",height:v,paddingBottom:50},data:F,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,scrollEnabled:!0,ListEmptyComponent:function(){return r.default.createElement(s.List.Item,{title:"Create your first project",left:function(){return r.default.createElement(s.IconButton,{icon:"creation",mode:"outlined"})},style:{padding:10},onPress:function(){return T()}})},onReordered:A})))}))}.apply(t,r))||(e.exports=o)},757539:(e,t,n)=>{var r,o;r=[t,n(94634),n(936665),n(956199),n(201319)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=l(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o);t.default=(0,o.memo)((function(e){var t=e.i,n=e.width,l=(0,a.useRoute)().params,u=(0,a.useNavigation)(),d=(null==l?void 0:l.chatId)===t.id,c=t,s=t.name||t.id,f=d?"chat":"chat-outline",p=d?o.default.createElement(o.default.Fragment,null):null;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.List.Accordion,{style:{width:n},expanded:d,title:s,onPress:function(){u.navigate({name:"Chat",params:{chatId:c.id,name:c.name,parentFolderId:c.folderId,mnemonic:c.mnemonic}})},left:function(e){return o.default.createElement(i.List.Icon,(0,r.default)({},e,{icon:f}))},right:function(){return o.default.createElement(o.default.Fragment,null)}},p),o.default.createElement(i.Divider,null))}))}.apply(t,r))||(e.exports=o)},64964:(e,t,n)=>{var r,o;r=[t,n(936665),n(140558),n(442939),n(757539),n(576409),n(465736),n(201319),n(11881),n(569243)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=f(r),o=f(o),i=f(i),a=f(a),l=f(l),u=f(u);var p=!1;t.default=function(e){var t=(0,c.useAppDispatch)(),n=e.dataHook,f=e.styles,m=e.i,y=e.onDragEnd,v=e.onDragStart,g=(0,d.useNavigation)(),h=(0,d.useRoute)().params,b=null==h?void 0:h.folderId,w=(0,o.default)().width>700?80:0,E=e.width-w,P=function(){return t((0,s.setFolderMenuItemId)({itemId:m.id}))},I=function(){return t((0,s.setFolderMenuItemId)({itemId:void 0}))};if(m.isMediaNew){var S=n,F=S.onMediaPress,D=S.onRemoveMediaPress,O=S.onDownloadMediaPress,M=S.onCopyLinkPress,A=S.onEditMediaPress,T=S.isLoadingMedia,_=S.onRemoveFile,x=S.currentContentId,C=S.currentMediaId,j=S.onExportFile,k=S.onSellPress;return r.default.createElement(i.default,{key:m.id,i:m,width:E,onMediaPress:F,onRemoveMediaPress:function(){return D(m.id)},onDownloadMediaPress:O,onCopyLinkPress:M,onEditMediaPress:A,onDragEnd:y,onDragStart:v,onSellPress:k,showMenu:P,hideMenu:I,onExportFile:function(){return j(m.id)},onRemoveFile:function(){return _(m.id)},itemLoading:!(m.id!==C||!T)&&C,isOpen:m.id===x,isPlaying:m.id===C&&!T,enableMove:p})}if(m.isEncoderProject||m.isEditorProject)return r.default.createElement(u.default,{item:m,folderType:n.folderType,onRemoveFolder:function(){return n.onRemoveFolder(m)}});if(m.isContact)return r.default.createElement(a.default,{key:m.id,i:m,width:E});if(m.isFolder){var L=n,B=L.onRemoveFolder,R=L.isEditingFolder,W=L.onFolderActionPress,N=L.setFolderEditorName,z=L.currentFolderEditorName,U=L.folderNameInputRef,H=L.abortEditFolder,Q=L.onShareFolder;return r.default.createElement(l.default,{key:m.id,folder:Object.assign({},m,{isInfoOpen:m.id===R,isOpen:m.id===b}),styles:f,setFolderEditorName:N,currentFolderEditorName:z,folderNameInputRef:U,iconColor:"black",iconSize:30,enableMove:p,width:E,onDragEnd:y,onDragStart:v,showMenu:P,hideMenu:I,isOpen:m.id===b,onRemoveFolder:function(){return B(m)},onShareFolder:function(){return Q(m)},onFolderActionPress:function(){return W(m.id)},onFolderPress:function(){return g.navigate({name:"Folder",params:{folderId:m.id,title:m.title,parentFolderId:m.folderId,mnemonic:m.mnemonic,userId:m.userId}})},isSecondLevel:!0,abortEditFolder:function(){return H()}},m.id===b?r.default.createElement(r.default.Fragment,null):null)}return r.default.createElement(r.default.Fragment,null)}}.apply(t,r))||(e.exports=o)},576409:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(936665),n(573929),n(677294),n(956199),n(477983),n(11881),n(490320),n(569243)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f){"use strict";var p=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=p(r),o=p(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),a=p(a);t.default=function(e){var t=e.folder,n=e.width,p=e.onFolderPress,m=e.onRemoveFolder,y=e.onFolderActionPress,v=e.isSecondLevel,g=e.children,h=e.isOpen,b=e.isLoadingContent,w=e.currentFolderEditorName,E=e.folderNameInputRef,P=e.setFolderEditorName,I=e.abortEditFolder,S=e.onShareFolder,F=e.onDragStart,D=e.onDragEnd,O=e.showMenu,M=e.hideMenu,A=(0,u.useTheme)(),T=t.isOpen?"folder-open":"folder-outline",_=t.isInfoOpen?"checkbox-outline":"pencil-outline",x=!1;l.defaultFolders.includes(t.id)&&(x=!0,_="star"),t.mnemonic&&(T=t.isOpen?"folder-network":"folder-network-outline"),t.isInfoOpen&&(T="arrow-left-circle");var C={pointerEvents:"auto",padding:h?5:0,paddingTop:15},j=(0,c.useAppDispatch)(),k=(0,c.useAppSelector)((function(e){return e.ui.folderItemMenuOpen===t.id}));(0,i.useMemo)((function(){t.isInfoOpen&&P(t.title)}),[t.isInfoOpen]);var L=function(){var e=(0,o.default)((function*(){m&&(yield m(t))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,o.default)((function*(){x||(y&&(yield y(t,v)),setTimeout((function(){var e;null==E||null==(e=E.current)||e.focus()}),300))}));return function(){return e.apply(this,arguments)}}(),R=function(e){return b?i.default.createElement(u.ActivityIndicator,{style:{paddingLeft:20}}):i.default.createElement(d.TouchableOpacity,{onPress:function(){return p(t,v)},style:C},i.default.createElement(u.List.Icon,(0,r.default)({},e,{icon:T})))};return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Divider,null),g?i.default.createElement(u.List.Accordion,{expanded:h,title:t.title,style:{width:n},left:R,right:function(){return i.default.createElement(i.default.Fragment,null)},onPress:function(){return p(t,v)},theme:A},g):i.default.createElement(u.List.Item,{style:{width:n},title:function(e){var n=e.ellipsizeMode,r=e.color,o=e.fontSize;return i.default.createElement(i.default.Fragment,null,t.isInfoOpen?i.default.createElement(u.TextInput,{mode:"outlined",style:{height:50,width:"100%",pointerEvents:"auto"},placeholder:"new folder name",theme:A,value:w,ref:E,onChangeText:P,left:i.default.createElement(u.TextInput.Icon,{onPress:function(){return I&&I(t)},icon:T}),right:i.default.createElement(u.TextInput.Icon,{onPress:B,icon:_}),autoFocus:!0,id:"test-input"}):i.default.createElement(d.TouchableOpacity,{style:{pointerEvents:"auto"},onPress:function(){return p(t,v)}},i.default.createElement(a.default,{style:{}},i.default.createElement(u.Text,{ellipsizeMode:n,style:{color:r,fontSize:o},numberOfLines:2},t.title))))},left:t.isInfoOpen?function(){return i.default.createElement(i.default.Fragment,null)}:R,right:function(e){return i.default.createElement(a.default,{style:{flexDirection:"row",flexWrap:"wrap"}},x||t.isInfoOpen?null:i.default.createElement(i.default.Fragment,null,i.default.createElement(d.TouchableOpacity,{onPressIn:F,onPressOut:D,style:{pointerEvents:"auto"}},i.default.createElement(u.IconButton,{icon:"dots-grid"})),i.default.createElement(u.Menu,{anchor:i.default.createElement(u.IconButton,{icon:"dots-vertical",onPress:O}),style:{marginTop:50},visible:k,onDismiss:M},i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Menu.Item,{leadingIcon:"heart",title:"Share All Media",onPress:function(){return j((0,f.setFolderMenuItemId)({itemId:void 0})),(0,s.recursiveShare)(t),void j((0,f.setToastText)("All folder files have been shared"))}}),i.default.createElement(u.Divider,null)),i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Menu.Item,{leadingIcon:"share",title:"Share Folder",onPress:function(){return S&&S(t)}}),i.default.createElement(u.Divider,null)),i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Menu.Item,{leadingIcon:_,title:"Edit Folder",onPress:B}),i.default.createElement(u.Divider,null)),i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Menu.Item,{leadingIcon:"delete",title:"Delete Folder",onPress:L})))))},theme:A}))}}.apply(t,r))||(e.exports=o)},442939:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(936665),n(573929),n(569944),n(756933),n(477983),n(11881),n(956199),n(323817),n(748524),n(841530),n(942626)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=v(r),o=v(o),i=v(i),a=v(a),l=v(l),u=v(u);var g=l.default.create({container:{flex:1},row:{flexDirection:"row"},column:{flexDirection:"column"},customTitle:{alignItems:"center",justifyContent:"space-between"},additionalPadding:{paddingTop:8},image:{width:"100%",height:"auto",opacity:.6,position:"absolute",resizeMode:"cover",zIndex:-1,flex:1}});t.default=function(e){var t=e.i,n=e.itemLoading,l=e.width,v=e.onMediaPress,h=e.onRemoveMediaPress,b=e.onDownloadMediaPress,w=e.onCopyLinkPress,E=(e.onEditMediaPress,e.isPlaying),P=e.onDragEnd,I=e.onDragStart,S=e.showMenu,F=e.hideMenu,D=e.onRemoveFile,O=e.onExportFile,M=(0,y.useAuction)().onSellPress,A=(0,c.useAppDispatch)(),T=(0,s.useTheme)(),_=t.id===n,x=function(){return v(t)},C=function(){var e=(0,o.default)((function*(){return h(t)}));return function(){return e.apply(this,arguments)}}(),j=(function(){var e=(0,o.default)((function*(){return w(t.id)}))}(),function(){var e=(0,o.default)((function*(){return M(t.id,t.folderId)}));return function(){return e.apply(this,arguments)}}()),k=(0,c.useAppSelector)((function(e){return e.fs.downloadingProgress[t.id]})),L=(0,c.useAppSelector)((function(e){return e.ui.folderItemMenuOpen===t.id})),B=(0,c.useAppSelector)((function(e){return e.fs.sharing[t.id]})),R=(0,f.useQuery)(["isDownloaded",t.id,t.isDownloaded],(0,o.default)((function*(){try{var e=yield(0,p.getFileStats)(t);if(e){var n=t.size/100;return parseFloat(e.size/n).toFixed(2)}return!1}catch(r){return!1}})),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,staleTime:1/0}),W=null==R?void 0:R.data,N=function(){var e=(0,o.default)((function*(){return W?null:b(t.id)}));return function(){return e.apply(this,arguments)}}(),z=(t.thumbnail,E?"stop-circle-outline":"play-circle-outline");R.isFetched;var U=t.extractor.toLowerCase();"wt"===U&&(U="folder-network"),"local"===U&&(U="file");var H=100,Q={pointerEvents:"auto",paddingTop:30},V=k?"Downloading "+parseInt((100*k).toString(),10)+"%":"Download";return W&&(V="Downloaded "+W+"%"),i.default.createElement(a.default,{style:{width:l,height:H}},i.default.createElement(s.List.Item,{style:{height:H,zIndex:2,position:"absolute",width:l},left:function(e){return i.default.createElement(d.TouchableOpacity,{onPress:x,style:Q},i.default.createElement(s.List.Icon,(0,r.default)({},e,{icon:_?function(){return i.default.createElement(s.ActivityIndicator,{animating:!0,theme:T})}:z})))},right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(d.TouchableOpacity,{onPressIn:I,onPressOut:P,style:{pointerEvents:"auto"}},i.default.createElement(s.IconButton,{icon:"dots-grid"})),i.default.createElement(s.Menu,{anchor:i.default.createElement(s.IconButton,{icon:"dots-vertical",onPress:S}),style:{marginTop:50},visible:L,onDismiss:F},W&&i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Menu.Item,{leadingIcon:"share",title:"Export File",onPress:O}),i.default.createElement(s.Divider,null)),W&&i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Menu.Item,{leadingIcon:"file",title:"Delete File",onPress:D}),i.default.createElement(s.Divider,null)),i.default.createElement(s.Menu.Item,{leadingIcon:"currency-usd",title:"Sell Item",onPress:j}),i.default.createElement(s.Menu.Item,{leadingIcon:"delete",title:"Delete Item",onPress:C})))},title:function(e){var n=e.ellipsizeMode,r=e.color,o=e.fontSize;return i.default.createElement(a.default,{style:[g.container,g.row,g.customTitle]},i.default.createElement(s.Text,{ellipsizeMode:n,style:{color:r,fontSize:o},numberOfLines:2},t.title))},description:function(e){var n=e.ellipsizeMode,r=e.color,o=e.fontSize;return i.default.createElement(a.default,{style:[g.container,g.column]},i.default.createElement(s.Text,{numberOfLines:1,ellipsizeMode:n,style:{color:r,fontSize:o}},t.description),i.default.createElement(a.default,{style:[g.container,g.row,g.additionalPadding,{gap:10}]},i.default.createElement(s.Chip,{icon:"file",onPress:N,style:{height:30},textStyle:{fontSize:o}},V),W&&i.default.createElement(s.Chip,{icon:B?"heart":"network",onPress:function(){B||(A((0,m.setSharing)({itemId:t.id,status:!0})),(0,p.shareFileToWT)(t.id,t.folderId))},style:{height:30},textStyle:{fontSize:o}},B?"Sharing":"Share")))}}),t.thumbnail?i.default.createElement(u.default,{source:{uri:t.thumbnail,cache:"force-cache"},resizeMethod:"resize",resizeMode:"cover",style:Object.assign({},g.image,{height:H,width:l}),imageStyle:Object.assign({},g.image,{height:H,width:l})}):null,i.default.createElement(s.Divider,null))}}.apply(t,r))||(e.exports=o)},465736:(e,t,n)=>{var r,o;r=[t,n(936665),n(956199),n(609209),n(201319)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=l(r);t.default=function(e){var t=e.item,n=e.folderType,l=e.onRemoveFolder,u=(0,a.useNavigation)(),d=n===i.FolderType.encoder?"EncoderProject":"EditorProject",c=n===i.FolderType.editor?"film":"matrix";return r.default.createElement(r.default.Fragment,null,r.default.createElement(o.Divider,null),r.default.createElement(o.List.Item,{style:{padding:19},title:t.title,onPress:function(){u.navigate({name:d,params:{projectId:t.id,mnemonic:t.mnemonic,parentFolderId:t.folderId}})},left:function(){return r.default.createElement(o.List.Icon,{icon:c})},right:function(){return r.default.createElement(o.IconButton,{icon:"delete",onPress:function(){return l(t)}})}}))}}.apply(t,r))||(e.exports=o)},318195:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.styles=void 0;t.styles={container:{flex:1,paddingTop:0,marginTop:0},item:{paddingTop:15,paddingLeft:5,fontSize:12,height:160,color:"black",width:80},tinyLogo:{marginTop:2,width:22,height:22},scroll:{height:65,display:"flex",position:"relative",backgroundColor:"black",width:"100%",marginTop:0},icon:{paddingLeft:10}}}.apply(t,[t]))||(e.exports=n)},203744:(e,t,n)=>{var r,o;r=[t,n(936665),n(573929),n(782976)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),o=a(o),i=a(i);t.default=(0,r.memo)((function(){return r.default.createElement(o.default,{style:{height:"100%",width:"100%"}},r.default.createElement(o.default,null,r.default.createElement(i.default,null)))}))}.apply(t,r))||(e.exports=o)},562543:(e,t,n)=>{var r,o;r=[t,n(29293),n(936665),n(756933),n(595991),n(573929),n(140558),n(956199),n(323817),n(748524),n(201319),n(492933),n(11881),n(788387)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=e.height,n=e.mediaPlayer,a=(0,d.useTheme)(),y=(0,m.useAppDispatch)(),v=n.currentMediaId,g=n.currentMedia,h=null==g?void 0:g.fileType,b=(null==h?void 0:h.search("image"))>-1,w=(0,u.default)().width,E=(0,f.useIsFocused)(),P=g,I=(0,c.useMutation)(function(){var e=(0,r.default)((function*(e){}));return function(t){return e.apply(this,arguments)}}(),{retry:!1}),S=(0,c.useQuery)("wtMedia_"+v,(0,r.default)((function*(){var e;try{e=yield(0,s.getFileOpfs)(P)}catch(t){}return e||(e=(yield(0,s.getVideoWT)(P)).stream),y((0,p.loaded)({actionType:p.MediaActionType.loaded,mediaId:v})),e})),{enabled:!!E,refetchOnMount:!0}),F=S.isLoading,D=null==S?void 0:S.data,O=(null==P?void 0:P.currentPosition)||0,M=w<700,A=M?t/4:t/2;(0,o.useRef)();return o.default.createElement(o.default.Fragment,null,o.default.createElement(d.Banner,{visible:!!v,theme:a,style:{backgroundColor:"black",padding:0,margin:0,width:w,height:A,position:"static",top:0,left:0,right:0,bottom:0},contentStyle:{width:M?w:"100%",height:A,padding:0,margin:0}},o.default.createElement(l.default,{style:{width:M?w:"100%",height:A-40,position:"relative"}},b&&v&&D&&o.default.createElement(i.default,{style:{height:A},resizeMethod:"scale",imageStyle:{resizeMode:"contain"},source:{uri:D}}),!b&&v&&D?o.default.createElement("video",{controls:!0,style:{width:"100%",height:"100%",objectFit:"contain"},onPlaying:function(e){var t=e.nativeEvent.target.currentTime;I.mutateAsync(t),y((0,p.togglePause)({pause:!1,actionType:p.MediaActionType.pause}))},onPause:function(e){y((0,p.togglePause)({pause:!0,actionType:p.MediaActionType.pause}))},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){var t=e.nativeEvent.target.currentTime;t>5&&t-O>5&&!I.isLoading&&I.mutateAsync(t)},onResize:function(){console.info("resize")},onLoadedData:function(e){n.isMediaPaused||e.nativeEvent.target.play()},ref:function(e){e&&e.paused&&e.currentTime},src:D},o.default.createElement("track",{label:"language one",kind:"subtitles",srcLang:"en",default:!0})):null,F?o.default.createElement(d.ActivityIndicator,{style:{position:"relative",flexBasis:"auto"},size:72}):null,o.default.createElement(d.IconButton,{style:{position:"absolute",cursor:"pointer",right:0,top:0,pointerEvents:"auto",zIndex:1e5},icon:"close",mode:"outlined",size:25,onPress:function(){return n.onMediaPress("")}}))),o.default.createElement(d.Divider,null))},r=v(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=v(i),a=v(a),l=v(l),u=v(u)}.apply(t,r))||(e.exports=o)},782976:(e,t,n)=>{var r,o;r=[t,n(936665),n(362551),n(975906),n(490320)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),i=l(i);t.default=(0,r.memo)((function(){var e=(0,o.useMedia)(a.getFoldersByType,a.getFolderContent,a.writeItem);return r.default.createElement(i.default,{dataHook:e})}))}.apply(t,r))||(e.exports=o)},951647:(e,t,n)=>{var r,o;r=[t,n(936665),n(73904),n(756134),n(442932),n(121277),n(227764),n(250884),n(595991),n(140558),n(610063),n(41324),n(560859),n(337554),n(205099),n(902076),n(11881),n(569243),n(195434),n(503584)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h,b,w,E){"use strict";var P=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=P(r),i=P(i),u=P(u),c=P(c),s=P(s),f=P(f);var I=(0,l.createDrawerNavigator)(),S=(0,o.createMaterialBottomTabNavigator)(),F=(0,g.createNativeStackNavigator)(),D=(0,d.createFileStack)(),O=(0,p.createChatStack)(),M=(0,m.createSettings)(),A=(0,y.createEncoder)(),T=(0,v.createEditor)(),_=function(){var e=(0,s.default)(),t=(0,h.useAppDispatch)(),n=(0,h.useAppSelector)((function(e){return e.ui.isTabBarHidden}));(0,w.useKeyboardDispatcher)();var o=function(e){try{var n,r,o,i,a=(null==e||null==(n=e.data)||null==(n=n.state)?void 0:n.routes[(null==e||null==(r=e.data.state)?void 0:r.index)||0])||{},l=null==a||null==(o=a.state)?void 0:o.routes[(null==a||null==(i=a.state)?void 0:i.index)||0],u=a.name,d=null==l?void 0:l.name,c=null==l?void 0:l.params;t((0,b.setCurrentPage)({currentPage:d,params:c,parentName:u}))}catch(s){}};return e.width>700?r.default.createElement(a.SafeAreaInsetsContext.Consumer,null,(function(e){var t=e||{left:0,right:0},n=t.left,a=t.right,l=80+Math.max(n,a);return r.default.createElement(I.Navigator,{screenOptions:{drawerStyle:{width:l},drawerPosition:"left",drawerType:"permanent"},detachInactiveScreens:!0,defaultStatus:"open",screenListeners:{state:function(e){return o(e)}},drawerContent:function(e){return r.default.createElement(f.default,e)}},r.default.createElement(I.Screen,{name:"FilesTab",component:D,options:{headerShown:!1,drawerIcon:function(e){var t=e.color;e.size;return r.default.createElement(i.default,{name:"folder-outline",color:t,size:24})},title:"Files"}}),r.default.createElement(I.Screen,{name:"ContactsTab",component:O,options:{headerShown:!1,title:"Contacts"}}),r.default.createElement(I.Screen,{name:"EncoderTab",component:A,options:{headerShown:!1,title:"Encoder"}}),r.default.createElement(I.Screen,{name:"EditorTab",component:T,options:{headerShown:!1,title:"Editor"}}),r.default.createElement(I.Screen,{name:"SettingsTab",component:M,options:{headerShown:!1,drawerIcon:function(e){var t=e.color;e.size;return r.default.createElement(i.default,{name:"people-outline",color:t,size:24})},title:"Contacts"}}))})):r.default.createElement(S.Navigator,{barStyle:{display:n?"none":"flex"},screenListeners:{state:function(e){return o(e)}}},r.default.createElement(S.Screen,{name:"FilesTab",options:{tabBarLabel:"Files",tabBarIcon:"folder"},component:D}),r.default.createElement(S.Screen,{name:"ContactsTab",component:O,options:{tabBarLabel:"Contacts",tabBarIcon:"contacts"}}),r.default.createElement(S.Screen,{name:"EditorTab",component:T,options:{tabBarLabel:"Editor",tabBarIcon:"scissors-cutting"}}),r.default.createElement(S.Screen,{name:"SettingsTab",options:{tabBarLabel:"Settings",tabBarIcon:"cog"},component:M}))};t.default=function(){return r.default.createElement(F.Navigator,{screenOptions:{header:function(e){return r.default.createElement(u.default,e)}}},r.default.createElement(F.Screen,{name:E.RootStackName,component:_,options:{orientation:"portrait",freezeOnBlur:!0}}))}}.apply(t,r))||(e.exports=o)},227764:(e,t,n)=>{var r,o;r=[t,n(585715),n(29293),n(936665),n(956199),n(595991),n(140558),n(11881),n(616392),n(304285),n(609209),n(323817),n(490320),n(220774),n(630172),n(788387),n(471236)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h){"use strict";var b=n(124994);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n=e.options;(0,i.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){yield g.Audio.setAudioModeAsync({allowsRecordingIOS:!1,interruptionModeIOS:g.InterruptionModeIOS.DuckOthers,playsInSilentModeIOS:!0,staysActiveInBackground:!0,interruptionModeAndroid:g.InterruptionModeAndroid.DuckOthers,shouldDuckAndroid:!1})}));return function(){return e.apply(this,arguments)}}();e()}),[]);var l=(0,a.useTheme)(),b=(0,p.useQueryClient)(),w=(0,i.useState)(""),E=(0,r.default)(w,2),P=E[0],I=E[1],S=(0,u.default)(),F=S.width,D=S.height,O=(0,d.useAppSelector)((function(e){return e.ui.editingMode})),M=(0,i.useContext)(s.UserDataState),A=(0,p.useQuery)("UserData",(function(){return(0,m.getUserData)()})),T=null==A||null==(t=A.data)?void 0:t.id,_=(0,i.useState)(!1),x=(0,r.default)(_,2),C=x[0],j=x[1],k=(0,p.useMutation)((function(e){return(0,m.writeItem)(e)}),{retry:!0}),L=(0,d.useAppSelector)((function(e){return e.ui.params})),B=(0,d.useAppSelector)((function(e){return e.ui.folderType})),R=(null==L?void 0:L.folderId)||(null==L?void 0:L.parentFolderId),W="new_"+B,N=m.encoderProjectTypes.includes(B),z=function(){var e=(0,o.default)((function*(){if((-1!==P.search("http")||-1!==P.search("magnet"))&&(console.info(P),!0!==C)){j(!0),setTimeout((function(){j(!1)}),2e4);var e=yield(0,m.extractMedia)(P);if(e&&e.id){var t=e.id;try{var n=Object.assign({},e,{originalId:t,id:c.default.v4().toString(),folderId:R||W,userId:M.user.id,date:(new Date).valueOf(),isMediaNew:!0,isFolder:!(!e.files||!e.files.length)||void 0,files:e.files&&e.files.map((function(e){return{name:e.name,size:e.length}}))});yield k.mutateAsync(n),yield b.refetchQueries({queryKey:"folderContent_"+n.folderId}),I("")}catch(r){console.error("extractLink",r)}}j(!1)}}));return function(){return e.apply(this,arguments)}}();(0,i.useMemo)((function(){z()}),[P]);var U=F>700&&!0;h.addFolderPlaceholder;"party"===O&&h.chatPlacehoder;"search"===O&&"type to search";return i.default.createElement(i.default.Fragment,null,i.default.createElement(a.Appbar.Header,{theme:l},i.default.createElement(h.NavInput,{options:n,folderId:R,isLocked:C,searchValue:P,setSearch:I}),i.default.createElement(v.Actions,{showFullSearchBar:U,isEncoderProject:N,userId:T}),U?i.default.createElement(a.Searchbar,{loading:C,mode:"bar",placeholder:B===f.FolderType.contact?h.searchContactsPlaceholderText:h.defaulPlaceHolderText,theme:l,style:{height:40,width:300},inputStyle:{paddingBottom:14},value:P,onChangeText:I}):null),i.default.createElement(y.BannerContainer,{userId:T,isEncoderProject:N,height:D}))},r=b(r),o=b(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),l=b(l),u=b(u),c=b(c)}.apply(t,r))||(e.exports=o)},530091:(e,t,n)=>{var r,o;r=[t,n(936665),n(569944),n(140558),n(956199),n(11881),n(569243)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChooseDialog=void 0,r=d(r),o=d(o),i=d(i);t.ChooseDialog=function(){var e=(0,l.useAppDispatch)(),t=(0,l.useAppSelector)((function(e){return e.ui.appDialogOnSelectLeftt})),n=(0,l.useAppSelector)((function(e){return e.ui.appDialogOnSelectRight})),o=(0,a.useTheme)(),d=(0,i.default)(),s=d.width,f=(d.height,(0,l.useAppSelector)((function(e){return e.ui.appDialogVisible}))),p=(0,l.useAppSelector)((function(e){return e.ui.appDialogBody})),m=(0,l.useAppSelector)((function(e){return e.ui.appDialogTitle})),y=(0,l.useAppSelector)((function(e){return e.ui.appDialogIcon})),v=function(){return e((0,u.setAppDialogParams)({appDialogVisible:!1,appDialogBody:void 0,appDialogControls:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogOnSelectLeftt:void 0,appDialogOnSelectRight:void 0}))};return r.default.createElement(a.Portal,null,r.default.createElement(a.Dialog,{theme:o,style:{width:"80%",height:"auto",maxWidth:400,maxHeight:400,left:(s-400)/2},onDismiss:v,visible:f},r.default.createElement(a.Dialog.Icon,{icon:y}),r.default.createElement(a.Dialog.Title,{style:c.title},m),p&&r.default.createElement(a.Dialog.Content,null,"string"===typeof p?r.default.createElement(a.Text,{style:{width:"100%",padding:20}},p):r.default.createElement(p,null)),r.default.createElement(a.Dialog.Actions,null,r.default.createElement(a.Button,{onPress:t||v,mode:"outlined",style:{padding:5}},"Disagree"),r.default.createElement(a.Button,{onPress:n,mode:"outlined",style:{padding:5}},"Agree"))))};var c=o.default.create({title:{textAlign:"center"}})}.apply(t,r))||(e.exports=o)},192021:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(585715),n(936665),n(477983),n(956199),n(323817),n(677294),n(609209),n(11881),n(941784),n(748524),n(201319),n(361278),n(616392),n(490320),n(595991),n(788387)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h,b,w){"use strict";var E=n(124994);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n,b=e.userId,E=e.folderType,P=e.hideMedialModal,D=e.folderId,O=e.routeName,M=e.projectId,A=e.isEncoderProject,T=(0,u.useTheme)(),_=(0,d.useQueryClient)(),x=(0,f.useAppSelector)((function(e){return e.upload})),C=(0,f.useAppDispatch)(),j=(0,y.useNavigation)(),k=x.modalVisible,L=x.file,B=x.media,R=x.uploadToCloud,W=x.shareToWT,N=(x.encryption,x.fileUploadProgress),z=x.isUploadInProgress,U=(null==B?void 0:B.id)+"-"+(null==B?void 0:B.filename),H=(null==(t=localStorage)||t.getItem("authToken"),(0,d.useMutation)((function(e){return(0,h.writeItem)(e)}))),Q=(0,a.useState)({}),V=(0,i.default)(Q,2),K=V[0],q=V[1],J=(0,d.useMutation)((function(){return{}}),{retry:function(e){if(e<4)return!0}}),G=(0,d.useMutation)((function(e){return(0,m.writeFileOpfs)(Object.assign({},e,K),L)})),Y=H.isLoading||J.isLoading,X=W;"wt"===(null==B?void 0:B.extractor)&&(X=!0);var Z=function(){var e=(0,o.default)((function*(){try{var e,t=JSON.parse(JSON.stringify(B)),n=K.width,r=K.height,o=K.duration-1;console.info("routeName",O,"folderType",E),t.isDownloaded=!0;var i=yield(0,h.getById)(t.folderId);if(i||(i=yield(0,h.getById)(t.folderId,D)),console.info("project folder",i,D,t.folderId),null!=(e=i)&&e.mnemonic&&(X=!0),E===s.FolderType.editor&&"EditorProject"!==O){var a,l,u;console.info("creating a new editor project from file");var d={id:g.default.v4().toString(),title:t.title,userId:b,isEditorProject:!0,folderType:E,folderId:D,orderId:1,isFolder:!1,editor:{length:6e4,width:n,height:r,preset:I,output:S,lastUpdated:(new Date).valueOf(),compressionLevel:F,code:[]},mnemonic:null==(a=i)?void 0:a.mnemonic,date:(new Date).valueOf()};yield H.mutateAsync(d);var f={id:g.default.v4().toString(),title:"Layer 1",folderId:d.id,userId:b,isEditorLayer:!0,orderId:1,folderType:E,isFolder:!1,date:(new Date).valueOf(),editor:{videoDisabled:!1,muted:!1},mnemonic:null==(l=i)?void 0:l.mnemonic};yield H.mutateAsync(f);var y={id:d.id+"_comments",title:"Comments",folderId:d.id,userId:b,isEditorLayer:!0,orderId:1,folderType:E,isFolder:!1,date:(new Date).valueOf(),editor:{videoDisabled:!0,muted:!0,isCommentLayer:!0},mnemonic:null==(u=i)?void 0:u.mnemonic};yield H.mutateAsync(y),t.folderId=f.id,t.isMediaNew=A,t.isEncoderProject=A,t.encoding={end:o,width:n,height:r,preset:I,output:S,compressionLevel:F}}E===s.FolderType.editor&&(t.encoding={end:o,width:n,height:r,preset:I,output:S,compressionLevel:F}),console.info("foldertype saveitem",E,t),yield G.mutateAsync(t),yield H.mutateAsync(Object.assign({},t,K));try{X&&(0,m.shareFileToWT)(t.id,t.folderId)}catch(w){console.error("share to wt error",w)}if(R){C((0,p.setUploadInProgress)(!0)),C((0,p.setMediaModalVisible)(!1)),yield J.mutateAsync();var v=c.cdndomain+b+"/"+U;t.webpage_url=v,t.hasCloud=!0,t.extractor="cloud",t.url=v,console.info("after upload File Mutation",t)}yield _.refetchQueries({queryKey:["folderContent_"+t.folderId]}),yield _.refetchQueries({queryKey:["folderContent_"+D]}),yield _.refetchQueries({queryKey:["projectLayers",M]}),yield _.refetchQueries({queryKey:["encodedMedia",M]}),C((0,p.setUploadInProgress)(!1)),C((0,p.setMediaModalVisible)(!1)),D||j.navigate("Folder",{folderId:t.folderId})}catch(w){console.error("media upload modal error",w)}}));return function(){return e.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Banner,{theme:T,visible:z},a.default.createElement(u.Card.Title,{titleStyle:{fontSize:20},title:"Uploading file",subtitle:null==B?void 0:B.filename,left:function(e){return a.default.createElement(u.Avatar.Icon,(0,r.default)({},e,{icon:"file"}))}}),a.default.createElement(u.Divider,null),a.default.createElement(u.ProgressBar,{animatedValue:(null==N?void 0:N.progress)||0})),a.default.createElement(u.Portal,null,a.default.createElement(u.Modal,{visible:k,onDismiss:P,theme:T,style:{padding:20}},a.default.createElement(u.Card,null,a.default.createElement(u.Card.Title,{titleStyle:{fontSize:20},title:"Adding a new file",subtitle:"Please confirm",left:function(e){return a.default.createElement(u.Avatar.Icon,(0,r.default)({},e,{icon:"file"}))}}),a.default.createElement(u.Divider,null),a.default.createElement(l.GestureHandlerRootView,{style:{height:"70%"}},a.default.createElement(l.ScrollView,null,a.default.createElement(u.Card.Content,null,a.default.createElement(u.List.Section,null,a.default.createElement(u.List.Item,{title:"Filename",description:null==B?void 0:B.filename}),a.default.createElement(u.List.Item,{title:"Format",description:null==B?void 0:B.type}),a.default.createElement(u.List.Item,{title:"Duration",description:null==K?void 0:K.duration}),a.default.createElement(u.List.Item,{title:"Width",description:null==K?void 0:K.width}),a.default.createElement(u.List.Item,{title:"Height",description:null==K?void 0:K.height}),a.default.createElement(u.List.Item,{title:"Size",description:(0,v.niceBytes)(null==B||null==(n=B.size)?void 0:n.toString())}),a.default.createElement(u.List.Item,{title:"FolderId",description:null==B?void 0:B.folderId}),L?a.default.createElement("video",{style:{display:"none"},src:URL.createObjectURL(L),onLoadedMetadata:function(e){q({width:e.nativeEvent.target.videoWidth,height:e.nativeEvent.target.videoHeight,duration:e.nativeEvent.target.duration})}}):a.default.createElement(w.Video,{source:{uri:null==B?void 0:B.url},onLoad:function(e){},onReadyForDisplay:function(e){console.info("metaLoaded",e),q({width:e.naturalSize.width,height:e.naturalSize.height,duration:e.status.durationMillis/1e3})}}))))),a.default.createElement(u.Divider,null),a.default.createElement(u.Card.Actions,{style:{height:"auto"}},a.default.createElement(u.Button,{disabled:Y,onPress:P},"Cancel"),a.default.createElement(u.Button,{loading:H.isLoading,onPress:Z},"Confirm"))))))},r=E(r),o=E(o),i=E(i),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),g=E(g),b=E(b);var I=s.FFMpegPreset.superfast,S=s.FFMpegOutputType.mp4,F=20}.apply(t,r))||(e.exports=o)},825179:(e,t,n)=>{var r,o;r=[t,n(956199),n(11881),n(569243),n(936665)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ToastDialog=function(){var e=(0,o.useAppSelector)((function(e){return e.ui.toastText})),t=(0,o.useAppSelector)((function(e){return e.ui.toastIcon})),n=(0,o.useAppDispatch)(),l=(0,r.useTheme)(),u=void 0!==e;return a.default.createElement(r.Portal,null,a.default.createElement(r.Snackbar,{theme:l,visible:u,icon:t,onDismiss:function(){return n((0,i.setToastText)(void 0))}},e))},a=l(a)}.apply(t,r))||(e.exports=o)},630172:(e,t,n)=>{var r,o;r=[t,n(29293),n(616392),n(936665),n(956199),n(11881),n(941784),n(609209),n(801175),n(490320),n(569243)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f){"use strict";var p=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.Actions=function(e){var t=e.showFullSearchBar,n=e.isEncoderProject,p=e.userId,m=(0,l.useAppDispatch)(),y=(0,l.useAppSelector)((function(e){return e.ui.params})),v=(0,l.useAppSelector)((function(e){return e.ui.folderType})),g=(0,l.useAppSelector)((function(e){return e.ui.currentPage})),h=null==y?void 0:y.projectId,b=null==y?void 0:y.folderId,w=void 0!==(0,l.useAppSelector)((function(e){return e.ui.editingMode}));console.info("isEditing",w);var E=[d.FolderType.media,d.FolderType.editor,d.FolderType.encoder].includes(v),P=v!==d.FolderType.settings,I="EditorProject"===g,S="new_"+v;I&&(E=!1,P=!1);var F=function(){var e=(0,r.default)((function*(){var e=yield s.DocumentPicker.pickSingle({presentationStyle:"fullScreen"});if(console.info("pickerResult",e),e){var t=e.uri,r=b||S;console.info("isEncoderProject",n);var i={id:o.default.v4().toString(),url:t,title:e.name,originalId:e.name,filename:e.name,fileType:e.type,folderId:r,userId:p,date:(new Date).valueOf(),isMediaNew:!n,isEncoderProject:n,type:e.file.type,size:e.file.size,extractor:"local"};m((0,u.startOnboarding)({file:e.file,media:i}))}}));return function(){return e.apply(this,arguments)}}();return i.default.createElement(i.default.Fragment,null,"Databases"===g?i.default.createElement(a.Appbar.Action,{icon:"database-plus",onPress:function(){m((0,f.setEditingMode)("database"))}}):null,P&&!w?i.default.createElement(a.Tooltip,{title:"Create a folder"},i.default.createElement(a.Appbar.Action,{icon:"folder-plus",onPress:function(){m((0,f.setEditingMode)("folder"))}})):null,I&&i.default.createElement(c.default,{projectId:h,routeParams:y}),w||"contact"!==v?null:i.default.createElement(a.Tooltip,{title:"Create a chat"},i.default.createElement(a.Appbar.Action,{icon:"chat-plus",onPress:function(){m((0,f.setEditingMode)("party"))}})),E&&!w?i.default.createElement(a.Tooltip,{title:"Select a file"},i.default.createElement(a.Appbar.Action,{icon:"file-plus",onPress:function(){return F()}})):null,t||w?null:i.default.createElement(a.Appbar.Action,{icon:"magnify",onPress:function(){m((0,f.setEditingMode)("search"))}}))},r=p(r),o=p(o),i=p(i),c=p(c)}.apply(t,r))||(e.exports=o)},852840:(e,t,n)=>{var r,o;r=[t,n(936665),n(956199),n(503584),n(11881),n(201319)],void 0===(o=function(e,r,o,i,a,l){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BackButton=function(e){var t=e.folder,n=(0,l.useNavigation)(),u=(0,a.useAppSelector)((function(e){return e.ui.params})),d=(0,a.useAppSelector)((function(e){return e.ui.parentName})),c=null==u?void 0:u.folderId,s=(null==u?void 0:u.parentFolderId)||(null==t?void 0:t.folderId);return r.default.createElement(o.Appbar.Action,{icon:"chevron-left",onPress:function(){var e={folderId:s,mnemonic:-1===(null==s?void 0:s.search("new_"))?null==t?void 0:t.mnemonic:void 0,title:null==t?void 0:t.title};console.info({folderParams:e}),e.folderId&&e.folderId!==c?n.navigate(i.RootStackName,{screen:d,params:{screen:"Folder",params:e}}):n.navigate(i.RootStackName,{screen:d,params:{screen:i.RootScreens[d],params:void 0}})}})},r=u(r)}.apply(t,r))||(e.exports=o)},220774:(e,t,n)=>{var r,o;r=[t,n(936665),n(465454),n(11881),n(941784),n(149519),n(603791),n(192021),n(562543),n(573929),n(530091),n(825179)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BannerContainer=function(e){var t=e.userId,n=e.isEncoderProject,m=e.height,y=(0,i.useAppSelector)((function(e){return e.ui.params})),v=(0,i.useAppSelector)((function(e){return e.ui.folderType})),g=(0,i.useAppSelector)((function(e){return e.ui.currentPage})),h=null==y?void 0:y.projectId,b=null==y?void 0:y.folderId,w=null==y?void 0:y.parentFolderId,E=(0,i.useAppDispatch)(),P=(0,o.useMediaPlayer)();return r.default.createElement(s.default,{style:{padding:0,margin:0}},r.default.createElement(d.default,{projectId:h,userId:t,folderType:v,hideMedialModal:function(){E((0,a.cancel)())},folderId:b||w,routeName:g,isEncoderProject:n}),P.currentMediaId?r.default.createElement(c.default,{height:m,mediaPlayer:P}):null,"EncoderProject"===g?r.default.createElement(u.default,{projectId:h,height:m,folderId:b||w}):null,"EditorProject"===g?r.default.createElement(l.default,{projectId:h,height:m,routeParams:y,folderId:b||w}):null,r.default.createElement(f.ChooseDialog,null),r.default.createElement(p.ToastDialog,null))},r=m(r),l=m(l),u=m(u),d=m(d),c=m(c),s=m(s)}.apply(t,r))||(e.exports=o)},471236:(e,t,n)=>{var r,o;r=[t,n(29293),n(585715),n(936665),n(956199),n(318401),n(573929),n(11881),n(616392),n(852840),n(569243),n(490320),n(201319),n(323817)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.NavInput=function(e){var t,n=e.options,v=e.folderId,g=e.isLocked,w=e.searchValue,E=e.setSearch,P=(0,y.useQueryClient)(),I=(0,m.useNavigation)(),S=(0,d.useAppSelector)((function(e){return e.ui.params})),F=(0,d.useAppSelector)((function(e){return e.ui.folderType})),D=(0,d.useAppDispatch)(),O=(0,d.useAppSelector)((function(e){return e.ui.isEditing})),M=(0,d.useAppSelector)((function(e){return e.ui.editingMode})),A=(0,i.useState)(""),T=(0,o.default)(A,2),_=T[0],x=T[1],C=(0,d.useAppSelector)((function(e){return e.ui.currentPage})),j=(0,y.useQuery)("UserData",(function(){return(0,p.getUserData)()})),k=null==j||null==(t=j.data)?void 0:t.id,L=(0,a.useTheme)(),B=(0,y.useMutation)((function(e){return(0,p.writeItem)(e)}),{retry:!0}),R=(0,y.useQuery)("folderData_"+v,(0,r.default)((function*(){return yield(0,p.getById)(v)})),{retry:!0,enabled:!!v}).data,W=(0,d.useAppSelector)((function(e){return e.ui.isBackEnabled})),N="new_"+F,z=(null==S?void 0:S.name)||(null==S?void 0:S.title)||(0,l.getHeaderTitle)(n,C),U=h;"party"===M&&(U=b);"search"===M&&(U="type to search");var H=function(){var e=(0,r.default)((function*(){console.info("mode",M);try{switch(M){case"party":console.info("createNewParty");var e=k+"_"+c.default.v4(),t=yield(0,p.createNewParty)({id:e,name:_,partyId:e,folderId:v||N});I.navigate("Chat",{chatId:e,name:_,mnemonic:t.mnemonic,parentFolderId:v||N}),console.info("createNewParty done",t);break;case"folder":var n={id:"folder_"+c.default.v4()+"_"+k,title:_,isFolder:!0,date:(new Date).valueOf(),userId:k,folderType:F,folderId:v};yield B.mutateAsync(n);break;case"search":D((0,f.setEditingMode)(void 0))}}catch(r){console.error("onClickExtra err",r)}return v?yield P.refetchQueries({queryKey:"folderContent_"+v}):yield P.refetchQueries({queryKey:"folders_"+F}),D((0,f.setEditingMode)(void 0)),!0}));return function(){return e.apply(this,arguments)}}(),Q=O&&"database"!==M;return i.default.createElement(i.default.Fragment,null,!Q&&W?i.default.createElement(s.BackButton,{folder:R}):null,Q?null:i.default.createElement(a.Appbar.Content,{title:z,theme:L,style:{paddingLeft:W?0:15}}),Q?i.default.createElement(u.default,{style:{width:"100%"}},i.default.createElement(a.TextInput,{placeholder:U,onChangeText:function(e){return"search"===M?E(e):x(e)},style:{width:"100%",textAlignVertical:"bottom",lineHeight:30,padding:10,height:40},theme:L,value:"search"===M?w:_,left:i.default.createElement(a.TextInput.Icon,{style:{marginTop:20},icon:"arrow-left-circle",onPress:function(){D((0,f.setEditingMode)(void 0))}}),autoFocus:!0,maxLength:100,right:i.default.createElement(a.TextInput.Icon,{style:{marginTop:20},onPress:H,icon:"check-circle",loading:g})})):null)},t.searchContactsPlaceholderText=t.defaulPlaceHolderText=t.chatPlacehoder=t.addFolderPlaceholder=void 0,r=v(r),o=v(o),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),u=v(u),c=v(c);t.defaulPlaceHolderText="type to search your collection";var h=t.addFolderPlaceholder="Type name of the folder",b=(t.searchContactsPlaceholderText="type to search your contacts",t.chatPlacehoder="Type name of the new chat")}.apply(t,r))||(e.exports=o)},610063:(e,t,n)=>{var r,o;r=[t,n(94634),n(936665),n(569944),n(121277),n(956199)],void 0===(o=function(e,r,o,i,a,l){"use strict";var u=n(124994);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=u(r),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),i=u(i);var c=[{label:"Media",focusedIcon:"folder",unfocusedIcon:"folder-outline",key:0,screen:"FilesTab"},{label:"Chat",focusedIcon:"forum",unfocusedIcon:"forum-outline",key:1,screen:"ContactsTab"},{label:"Encode\nCompress",focusedIcon:"state-machine",unfocusedIcon:"state-machine",key:2,screen:"EncoderTab"},{label:"Video\nEditor",focusedIcon:"scissors-cutting",unfocusedIcon:"scissors-cutting",key:3,screen:"EditorTab"},{label:"Settings",focusedIcon:"cog",unfocusedIcon:"cog-outline",key:4,screen:"SettingsTab"}];var s=i.default.create({drawerContent:{flex:1},preference:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:12,paddingHorizontal:16},v3Preference:{height:56,paddingHorizontal:28},badge:{alignSelf:"center"},collapsedSection:{marginTop:16,fontSize:12},annotation:{marginHorizontal:24,marginVertical:6}});t.default=function(e){var t=e.navigation,n=e.state.index,i=(0,l.useTheme)();return o.createElement(a.DrawerContentScrollView,{alwaysBounceVertical:!1,style:[s.drawerContent,{backgroundColor:i.colors.surface}],showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},o.createElement(o.Fragment,null,c.map((function(e,i){return o.createElement(l.Drawer.Section,{style:s.collapsedSection,key:e.key},o.createElement(l.Drawer.CollapsedItem,(0,r.default)({},e,{key:e.key,active:n===i,onPress:function(){t.navigate(e.screen)}})))}))))}}.apply(t,r))||(e.exports=o)},240218:(e,t,n)=>{var r,o;r=[t,n(585715),n(94634),n(29293),n(936665),n(956199),n(323817),n(573929),n(767146),n(527723),n(419377),n(11881),n(569243),n(490320)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e){var t,n=e.db,r=(e.totalLength,e.showMnemonic),c=null==(t=s.evolu.getOwner())?void 0:t.mnemonic,f=n.mnemonic===c,p=n.mnemonic,m=(0,u.useMutation)((0,i.default)((function*(){try{s.dbMnemoCons[p]||(yield(0,s.createDBConn)(n.title,n.mnemonic,!0)),yield(0,s.initDatabaseRecord)("previous",c,s.dbMnemoCons[p])}catch(e){console.error(e)}s.evolu.restoreOwner(n.mnemonic)})));return a.default.createElement(l.List.Item,{key:n.id,left:function(e){return a.default.createElement(l.List.Icon,(0,o.default)({},e,{icon:"database"}))},right:function(e){return a.default.createElement(a.default.Fragment,null,!f&&a.default.createElement(l.Button,(0,o.default)({},e,{icon:"archive-arrow-down",mode:"outlined",onPress:function(){m.mutateAsync()}}),"Switch"),a.default.createElement(l.Button,(0,o.default)({},e,{icon:"eye",mode:"outlined",onPress:function(){return r(n)}}),"Show"))},description:a.default.createElement(d.default,{style:{gap:10,flexDirection:"row"}},a.default.createElement(l.Chip,null,""+new Date(n.date).toDateString()),f&&a.default.createElement(l.Chip,{style:{backgroundColor:"green"}},"Current")),title:""+n.title})}Object.defineProperty(e,"__esModule",{value:!0}),t.DatabaseItemComponent=h,t.default=function(){var e=(0,u.useQuery)("Databases",(function(){return(0,f.getDatabases)()}),{refetchOnWindowFocus:!1}),t=e.isLoading,n=e.data,o=(0,a.useState)(void 0),d=(0,r.default)(o,2),v=d[0],g=d[1],b=(0,a.useState)(""),w=(0,r.default)(b,2),E=w[0],P=w[1],I=(0,a.useState)(""),S=(0,r.default)(I,2),F=S[0],D=S[1],O=function(e){return g(e.mnemonic)},M=(0,u.useMutation)((0,i.default)((function*(){return console.info("createdb"),yield(0,s.initDatabaseRecord)(E,F)})),{onSuccess:function(){T((0,m.setEditingMode)(void 0)),e.refetch()}}),A=(0,p.useAppSelector)((function(e){return"database"===e.ui.editingMode})),T=(0,p.useAppDispatch)();return t?a.default.createElement(l.ActivityIndicator,{size:72}):a.default.createElement(a.default.Fragment,null,a.default.createElement(l.List.Section,null,null==n?void 0:n.map((function(e){return a.default.createElement(h,{db:e,totalLength:n.length,showMnemonic:O})}))),a.default.createElement(l.Dialog,{style:{maxWidth:500},visible:void 0!==v,onDismiss:function(){return g(void 0)}},a.default.createElement(l.Dialog.Title,null,"Mnemonic"),a.default.createElement(l.Dialog.Content,null,a.default.createElement(l.Text,null,v)),a.default.createElement(l.Dialog.Actions,null,a.default.createElement(l.Button,{icon:"clipboard",onPress:function(){return c.default.setString(v),g(void 0)}},"Copy"))),a.default.createElement(l.Dialog,{visible:A,style:{maxWidth:500},onDismiss:function(){return T((0,m.setEditingMode)(void 0))}},a.default.createElement(l.Dialog.Title,null,"Create a new Database"),a.default.createElement(l.Dialog.Content,null,a.default.createElement(l.TextInput,{label:"Database Name",value:E,onChangeText:P}),a.default.createElement(l.TextInput,{label:"Database Mnemonic",value:F,onChangeText:D})),a.default.createElement(l.Dialog.Actions,null,a.default.createElement(l.Button,{key:"close",icon:"close",onPress:function(){T((0,m.setEditingMode)(void 0))}},"Cancel"),a.default.createElement(l.Button,{key:"matrix",icon:"matrix",onPress:function(){D((0,y.genMnemonic)())}},"Generate New Mnemonic"),a.default.createElement(l.Button,{key:"check",icon:"check",disabled:E.length<3||12!==F.split(" ").length,onPress:function(){return M.mutateAsync()},loading:M.isLoading},"Save"))))},r=v(r),o=v(o),i=v(i),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),d=v(d),c=v(c)}.apply(t,r))||(e.exports=o)},357741:(e,t,n)=>{var r,o;r=[t,n(94634),n(936665),n(956199),n(323817),n(573929)],void 0===(o=function(e,r,o,i,a,l){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.useQuery)("UserData",(function(){return e.getUserData()}),{refetchOnWindowFocus:!1}),n=t.isLoading,u=t.data;return n?o.default.createElement(i.ActivityIndicator,{size:72}):o.default.createElement(i.List.Section,null,u.devices.map((function(e){return o.default.createElement(l.default,{key:e.id},"unknown"!==e.id&&e.manufacturer?o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Divider,null),o.default.createElement(i.List.Item,{key:e.id,left:function(t){return o.default.createElement(i.List.Icon,(0,r.default)({},t,{icon:e.manufacturer.toLowerCase()}))},right:function(e){return o.default.createElement(i.List.Icon,(0,r.default)({},e,{icon:"logout"}))},description:"Created: "+new Date(e.createdAt).toDateString(),title:e.model.replace(new RegExp("-")," ")+" on "+e.platform}),o.default.createElement(i.Divider,null)):null)})))},r=u(r),o=u(o),l=u(l)}.apply(t,r))||(e.exports=o)},77:(e,t,n)=>{var r,o;r=[t,n(94634),n(29293),n(585715),n(936665),n(573929),n(569944),n(769799),n(595991),n(323817),n(956199),n(201319),n(490320),n(11881),n(569243)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v){"use strict";var g=n(124994);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),o=g(o),i=g(i),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),l=g(l),u=g(u),d=g(d),c=g(c);var b=u.default.create({container:{flex:1},row:{flexDirection:"row"},column:{flexDirection:"column"},customTitle:{alignItems:"center",justifyContent:"space-between"},additionalPadding:{paddingTop:8},image:{width:"100%",height:"auto",opacity:.6,position:"absolute",resizeMode:"cover",zIndex:-1,flex:1}});t.default=function(){var e=(0,s.useQuery)("UserData",(function(){return(0,m.getUserData)()})),t=e.isLoading,n=(0,p.useNavigation)(),u=e.data,c=(0,y.useAppDispatch)(),g=(0,y.useAppSelector)((function(e){return e.ui.isEditingProfile})),h=(0,a.useState)(""),w=(0,i.default)(h,2),E=w[0],P=w[1],I=(0,a.useState)(""),S=(0,i.default)(I,2),F=S[0],D=S[1],O=function(){c((0,v.setIsEditingProfile)(!0)),P(null==u?void 0:u.name),D(null==u?void 0:u.description)},M=(0,s.useMutation)((0,o.default)((function*(){var e=u;e.name=E,e.description=F,yield(0,m.writeItem)(e)}))),A=function(){M.mutateAsync().then((0,o.default)((function*(){yield e.refetch(),c((0,v.setIsEditingProfile)(!1))})))},T=g?"check-outline":"pencil-outline",_={pointerEvents:"auto",paddingTop:20},x=(0,f.useTheme)();return a.default.createElement(l.default,{style:{height:"100%",width:"100%"}},t?a.default.createElement(f.ActivityIndicator,{animating:!0,size:72}):a.default.createElement(a.default.Fragment,null,a.default.createElement(f.List.Section,null,a.default.createElement(f.List.Item,{theme:x,title:g?null:null==u?void 0:u.name,style:{height:g?160:"auto"},left:function(e){return a.default.createElement(f.Avatar.Text,{style:e.style,label:(null==u?void 0:u.name)&&(null==u?void 0:u.name.split(" ").map((function(e){return e[0]})))||"",size:72})},description:function(e){var t=e.ellipsizeMode,n=e.color,r=e.fontSize;return a.default.createElement(l.default,{style:[b.container,b.column]},g?a.default.createElement(a.default.Fragment,null,a.default.createElement(f.TextInput,{theme:x,mode:"outlined",onChangeText:P,value:E}),a.default.createElement(f.TextInput,{theme:x,mode:"outlined",onChangeText:D,value:F})):a.default.createElement(f.Text,{theme:x,numberOfLines:1,ellipsizeMode:t,style:{color:n,fontSize:r}},null==u?void 0:u.description),a.default.createElement(l.default,{style:[b.container,b.row,b.additionalPadding]},null,a.default.createElement(f.Chip,{icon:"web",onPress:function(){},style:{height:30}},"WEB")))},right:function(e){return a.default.createElement(d.default,{style:_,onPress:g?A:O},a.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:T})))}}),a.default.createElement(f.Divider,null),a.default.createElement(f.List.Item,{onPress:function(){return n.navigate("Devices")},title:"Devices",left:function(e){return a.default.createElement(f.List.Icon,{icon:"devices",style:e.style})}}),a.default.createElement(f.Divider,null),a.default.createElement(f.List.Item,{onPress:function(){return n.navigate("Databases")},title:"Databases",left:function(e){return a.default.createElement(f.List.Icon,{icon:"database",style:e.style})}}),a.default.createElement(f.Divider,null))))}}.apply(t,r))||(e.exports=o)},125076:(e,t,n)=>{var r,o;r=[t,n(936665)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.UserDataState=t.UserDataDispatch=t.UserCtx=t.PeerCtx=t.PartyCtx=t.MediaCtx=t.LocalCtx=t.LoadingContext=void 0;t.PeerCtx=(0,n.createContext)(null),t.MediaCtx=(0,n.createContext)(null),t.PartyCtx=(0,n.createContext)(null),t.UserCtx=(0,n.createContext)(null),t.LocalCtx=(0,n.createContext)(null),t.LoadingContext=(0,n.createContext)(!1),t.UserDataState=(0,n.createContext)(null),t.UserDataDispatch=(0,n.createContext)(null)}.apply(t,r))||(e.exports=o)},304285:(e,t,n)=>{var r,o;r=[t,n(125076)],void 0===(o=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}.apply(t,r))||(e.exports=o)},677294:(e,t,n)=>{var r,o;r=[t,n(609209)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.userDocKey=t.publicPartyPref=t.migrationKey=t.loaderURI=t.googleDocumentKey=t.ffMpegWasmBaseUrl=t.encoderProjectTypes=t.domain=t.defaultFolders=t.dbID=t.contactPrefix=t.colors=t.cdndomain=t.appDirectory=t.MEDIA=void 0;var r=t.migrationKey="afanassii25662",o=(t.dbID=r,t.userDocKey="userDoc",t.domain="https://www.starpy.me/",t.cdndomain="https://cdn.starpy.me/",t.contactPrefix="contact_",t.publicPartyPref="public_party_");t.ffMpegWasmBaseUrl="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd",t.appDirectory="starp",t.encoderProjectTypes=[n.FolderType.encoder,n.FolderType.editor],t.googleDocumentKey="google_document",t.defaultFolders=["demo","new","nearby",o,"tutorial","new_editor","new_media","new_chat","new_encoder"],t.loaderURI="https://raw.githubusercontent.com/AboutReact/sampleresource/master/old_logo.png",t.MEDIA=[{id:"sintel",title:"Sintel",thumbnail:"https://starpy.me/webapp/sintel.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10&dn=Sintel&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fsintel.torrent"},{id:"tears",title:"Tears of Steel",thumbnail:"https://starpy.me/webapp/tearsOfSteel.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:209c8226b299b308beaf2b9cd3fb49212dbd13ec&dn=Tears+of+Steel&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Ftears-of-steel.torrent"},{id:"cosmoslaundromat",title:"Cosmos Laundromat",thumbnail:"https://starpy.me/webapp/cosmosLaundromat.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:c9e15763f722f23e98a29decdfae341b98d53056&dn=Cosmos+Laundromat&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fcosmos-laundromat.torrent"},{id:"bbb",title:"Big Buck Bunny",thumbnail:"https://starpy.me/webapp/bigBuckBunny.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:dd8255ecdc7ca55fb0bbf81323d87062db1f6d1c&dn=Big+Buck+Bunny&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fbig-buck-bunny.torrent"}],t.colors={textColor:"white",backgroundColor:"black",mediaItemTextColor:"palegoldenrod",mediaBackgroundColor:"#2b2b2b",mediaBorderColor:"black",navTextColor:"#e1d76a",navInactiveColor:"#585858",folderColor:"#585858",folderTextColor:"black",deleteBackgroundColor:"red",deleteTextColor:"black",navBorderColor:"#585858",contactItemBackgroundColor:"#2b2b2b",contactItemTitleColor:"#e1d76a",contactItemOnlineColor:"green",theme:"dark",currentUserColor:"#585858",remoteUserColor:"cornflowerblue"}}.apply(t,r))||(e.exports=o)},190946:(e,t,n)=>{var r,o;r=[t,n(41132),n(29293),n(677294),n(630389),n(616392),n(609209)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var c={createUser:!0,createNewUser:!0,doInitialMigration:!0};t.doInitialMigration=t.createUser=t.createNewUser=void 0,r=d(r),o=d(o),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),l=d(l);var s={id:"folder01",title:"My First Folder",isFolder:!0},f=t.createUser=function(){var e=(0,o.default)((function*(){var e=a.faker.image.cats(),t=a.faker.name.fullName(),n=a.faker.animal.cat(),r="19"+new Date(a.faker.date.birthdate()).getFullYear(),o=l.default.v4().toString();return{handle:"@"+(t+n+r).replace(/[^A-Z0-9]+/gi,""),photo:e,name:t,description:n,year:r,id:o,idHash:o,userDoc:!0,version:i.migrationKey,prevVersion:""}}));return function(){return e.apply(this,arguments)}}(),p=t.createNewUser=function(){var e=(0,o.default)((function*(e){try{var t=yield f();return console.info("==== creating temp user ====",t),yield e(t),t}catch(n){console.error("==== error on creating a new user ====",n)}}));return function(t){return e.apply(this,arguments)}}();t.doInitialMigration=function(){var e=(0,o.default)((function*(e,t){console.info("==== do migration ====");try{var n=yield t();if(console.info("initialMigrationUserCheck",n),n&&n.id)return n;n&&n.id||(n=yield p(e));var a=n.id;yield Promise.all([e(Object.assign({},s,{title:"Demo",id:"demo",folderType:u.FolderType.media,date:(new Date).toISOString(),userId:a}))].concat((0,r.default)(i.MEDIA.map(function(){var t=(0,o.default)((function*(t){return e(Object.assign({},t,{isMediaNew:!0,folderId:"demo",date:(new Date).valueOf()}))}));return function(e){return t.apply(this,arguments)}}()))))}catch(l){console.error("====migration err===",l)}console.info("==== after migration ====")}));return function(t,n){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=o)},942626:(e,t,n)=>{var r,o;r=[t,n(29293),n(11881),n(490320),n(609209),n(569243),n(323817),n(616392),n(917264),n(263459),n(201319),n(242468)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p){"use strict";var m=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useAuction=function(){var e=(0,o.useAppDispatch)(),t=(0,f.useNavigation)(),n=(0,s.useCloseDialog)().closeDialog,m=(0,o.useAppSelector)((function(e){return e.auction})),y=m.newAuctionName,v=m.newAuctionPrice,g=m.newAuctionWallet,h=m.newAuctionBetStep,b=(0,u.useMutation)(function(){var e=(0,r.default)((function*(e){var t=yield(0,i.getUserData)(),n=d.default.v4().toString(),r=JSON.parse(JSON.stringify(e));delete r.url,delete r.torrentFile,r.isAuctionMedia=!0;var o={id:n,mediaId:e.id,minPrice:v,title:y,isFolder:!0,date:(new Date).valueOf(),mnemonic:(0,i.genMnemonic)(),wallet:g,userId:t.id,minStep:h,authorName:t.name,isAuction:!0,folderType:a.FolderType.auction,orderId:1,media:r};if(console.info("newAuction",o),""===o.wallet)throw"invalid_wallet";return yield(0,i.writeItem)(o),yield(0,i.writeItem)(Object.assign({},o,{folderId:n})),yield(0,i.sendChatMessage)(n,t.name+" has created auction "+y,o.mnemonic,{system:!0}),o}));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){var n=e.id,r=e.mnemonic,o=e.title;return t.navigate("Auction",{auctionId:n,mnemonic:r,title:o})}}),w=function(){var o=(0,r.default)((function*(o,a){e((0,l.setFolderMenuItemId)({itemId:void 0})),e((0,p.setAuctionPrice)(.1)),e((0,p.setAuctionBetStep)(.1));var u=yield(0,i.getById)(o,a);e((0,p.setAuctioName)(u.filename));var d=yield(0,i.findBy)("mediaId",o);if(d.length){var s=d[0],f=s.id,m=s.mnemonic,y=s.title;t.navigate("Auction",{auctionId:f,mnemonic:m,title:y})}else e((0,l.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Sell Media",appDialogIcon:"currency-btc",appDialogOnSelectRight:function(){var e=(0,r.default)((function*(){b.mutateAsync(u),n()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:c.SellDialogBody,appDialogControls:void 0}))}));return function(e,t){return o.apply(this,arguments)}}();return{onSellPress:w}},r=m(r),d=m(d)}.apply(t,r))||(e.exports=o)},445783:(e,t,n)=>{var r,o;r=[t,n(585715),n(29293),n(323817),n(559287),n(11881),n(242468),n(569243),n(609209),n(263459),n(490320),n(272679),n(936665),n(292188),n(935095),n(616392),n(380662),n(421702)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g,h,b){"use strict";var w=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useAuctionActions=function(e,t,n){var w=(0,l.useAppDispatch)(),E=(0,s.useCloseDialog)().closeDialog,P=(0,p.useFolder)(e,void 0,void 0,c.FolderType.auction,void 0,null==t?void 0:t.mnemonic).folderContent,I=(0,m.useMemo)((function(){var e;if(!P||null==P||!P.length)return 0;var t=P.filter((function(e){return e.isBid}));return null!=t&&t.length?null==(e=t.sort((function(e,t){return t.amount-e.amount})))?void 0:e[0]:void 0}),[P]),S=(0,i.useQuery)("auction_trx_"+e,(0,o.default)((function*(){var e=t.winnerPaymentTransactionId;console.info("trxId",e);var n=yield v.provider.getTransaction(e);return n&&(n.block=yield n.getBlock(),n.receipt=yield v.provider.getTransactionReceipt(e)),console.info("trx",n,t),n})),{refetchInterval:2e4,enabled:void 0!==(null==t?void 0:t.winnerPaymentTransactionId)}),F=S.data,D=null==I?void 0:I.amount,O=(0,l.useAppSelector)((function(e){return e.auction.bidWallet})),M=(0,l.useAppSelector)((function(e){return e.auction.bidAmount})),A=(0,i.useMutation)((0,o.default)((function*(){if(isNaN(M))console.error("invalid amount",M);else if(M<t.minStep+t.minPrice)console.error("bid too low",M,t.minStep+t.minPrice);else if(D&&M<D)console.error("bid less than current bid",M,D);else{var r=n.name;yield(0,f.sendChatMessage)(e,r+" has created a bid of "+M,t.mnemonic,{system:!0,isBid:!0,wallet:O,amount:M})}}))),T=(0,i.useMutation)((0,o.default)((function*(){var r=n.name,o=D?r+" has closed the auction with the winning bid of "+D:r+" has closed this auction without a winner";yield(0,f.sendChatMessage)(e,o,t.mnemonic,{system:!0,isBid:!0,wallet:O,amount:M}),t.isClosed=!0,t.winnerId=I.userId,t.winnerPrice=D,yield(0,f.writeItem)(t)})));(0,m.useMemo)((function(){if(null!=t&&t.minStep){var e=t.minPrice,n=t.minStep,r=void 0!==D?parseFloat(n)+parseFloat(D):parseFloat(e)+parseFloat(n);w((0,u.setBidAmount)(parseFloat(parseFloat(r).toFixed(2))))}}),[D,t]);var _=(0,l.useAppSelector)((function(e){return e.auction.payWallet})),x=(0,i.useMutation)((0,o.default)((function*(){try{var n=g.default.v4().toString(),r=yield(0,h.generateNewKeyPair)(),o={id:n,auctionId:e,keyPair:r,folderId:"auction_keys",isKeyPair:!0},i=r.publicKey;yield(0,f.writeItem)(o),console.info("auction.wallet",t,t.wallet);var a=yield(0,v.sendMatic)(_,t.wallet,t.winnerPrice,{publicKey:i});t.winnerPaymentTransactionId=a,yield(0,f.writeItem)(Object.assign({},t,{winnerPaymentTransactionId:a}))}catch(l){console.error("pay err",l)}}))),C=(0,i.useMutation)((0,o.default)((function*(){var e=(new b.ethers.AbiCoder).decode(["string"],null==F?void 0:F.data);console.info("pubKeyData",e);var n=JSON.parse(e[0]),r=JSON.parse(n.publicKey);console.info("pubkey",r);var o=yield(0,f.getById)(t.mediaId,t.media.folderId);if(console.info("mediaOriginal",o),!o)throw"no_media_original_found";var i=yield(0,h.generateAesKey)(),a=yield(0,h.encryptAesKey)(i.kp,r),l=yield(0,h.encryptPayload)(i.key,JSON.stringify(o)),u=l.encryptedPayload,d=l.iv;t.encryptedPayload=u,t.ivb=d,t.encryptedKey=a,yield(0,f.writeItem)(t),yield(0,f.shareFileToWT)(o.id,o.folderId),console.info("auction",t)}))),j=function(){var n=(0,o.default)((function*(){var n=yield(0,f.findBy)("auctionId",e),o=(0,r.default)(n,1)[0];console.info("downloadAuctionMedia",t,o);var i=t.encryptedKey,a=t.encryptedPayload,l=t.ivb,d=yield(0,h.decryptAesKey)(i,o.keyPair.privateKey);console.info("decrypted aes key",d);var c=yield(0,h.decryptPayload)(d,a,l),s=JSON.parse(c);console.info("decrypted payload",c),s.folderId="new_media",yield(0,f.writeItem)(s);var p=!1;yield(0,f.downloadFileByMedia)(s,(function(e){console.info("download progress",e),w((0,u.setDownloadProgress)(e)),1===e&&(console.info("finished"),p||(p=!0,(0,f.exportFile)(s)))}))}));return function(){return n.apply(this,arguments)}}();return{createBid:function(){w((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Create Bid",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,o.default)((function*(){yield A.mutateAsync(),E()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:a.BidDialogBody,appDialogControls:void 0}))},closeAuction:function(){w((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Close Auction",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,o.default)((function*(){yield T.mutateAsync(),E()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"The auction will be closed and the winner will be assigned",appDialogControls:void 0}))},currentBid:D,payForAuction:function(){w((0,u.setWinnerPrice)(t.winnerPrice)),w((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Pay For Auction",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,o.default)((function*(){yield x.mutateAsync(),E()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:y.PayDialogBody,appDialogControls:void 0}))},downloadAuctionMedia:j,releaseDownload:function(){w((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Release File",appDialogIcon:"cloud-upload",appDialogOnSelectRight:function(){var e=(0,o.default)((function*(){yield C.mutateAsync(),E()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"The auction file will be released and the winner will be able to download",appDialogControls:void 0}))},auctionTransaction:S.data}},r=w(r),o=w(o),g=w(g)}.apply(t,r))||(e.exports=o)},263459:(e,t,n)=>{var r,o;r=[t,n(11881),n(569243)],void 0===(o=function(e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.useCloseDialog=function(){var e=(0,n.useAppDispatch)();return{closeDialog:function(){return e((0,r.setAppDialogParams)({appDialogVisible:!1,appDialogBody:void 0,appDialogControls:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogOnSelectLeftt:void 0,appDialogOnSelectRight:void 0}))}}}}.apply(t,r))||(e.exports=o)},42542:(e,t,n)=>{var r,o;r=[t,n(29293),n(696974),n(609209)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useContacts=void 0,r=a(r);t.useContacts=function(e,t,n){var a=function(){var t=(0,r.default)((function*(){return yield e(i.FolderType.contact)}));return function(){return t.apply(this,arguments)}}(),l=function(){var e=(0,r.default)((function*(e){return yield t(e)}));return function(t){return e.apply(this,arguments)}}();return(0,o.useFolders)(i.FolderType.contact,a,l,n)}}.apply(t,r))||(e.exports=o)},272679:(e,t,n)=>{var r,o;r=[t,n(585715),n(29293),n(323817),n(465454),n(936665),n(304285),n(926488),n(11881),n(201319),n(767146),n(490320),n(941784),n(616392),n(569243),n(263459)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f,p,m,y,v,g){"use strict";var h=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useFolder=function(e,t,n,h,b,w,E,P){var I,S,F,D=(0,g.useCloseDialog)().closeDialog,O=t||p.getFolderContent,M=n||p.getById,A=b||p.writeItem,T=(0,s.useRoute)(),_=(0,a.useMediaPlayer)(e),x=(0,c.useAppDispatch)(),C="folderContent_"+e,j=(0,i.useQueryClient)(),k=(0,i.useQuery)(C,(0,o.default)((function*(){var t,n;try{n=yield M(e)}catch(r){console.error(r)}return!w||!E||null!=(t=n)&&t.id||(n=yield A({id:e,mnemonic:w,title:E,isFolder:!0,folderId:"new_"+h,folderType:h,userId:P})),{folder:n,content:yield O(e)}})),{refetchOnWindowFocus:!0,refetchOnMount:!0}),L=(0,i.useMutation)(function(){var e=(0,o.default)((function*(e){var t,n=yield M(e);try{yield(0,p.removeObject)(n)}catch(o){console.error("removeObject error",o)}if(yield A(Object.assign({},n,{isDeleted:!0})),yield k.refetch(),null!=(t=T.params)&&t.projectId){var r=T.params.projectId;yield j.refetchQueries(["folderData_"+r])}}));return function(t){return e.apply(this,arguments)}}()),B=null==(I=k.data)?void 0:I.content,R=null==(S=k.data)?void 0:S.folder,W=k.isFetching,N=(0,i.useMutation)((function(e){return A(e)})),z=R&&R.files?null==R||null==(F=R.files)?void 0:F.map((function(e){return{id:e,url:e,title:e,filename:e,isMediaNew:!0,folderId:R.id,_id:e,date:R.date,originalId:R.originalId,webpage_url:R.webpage_url,thumbnail:R.thumbnail,extractor:R.extractor}})):[],U=(0,l.useContext)(u.UserDataState),H=(0,l.useContext)(u.UserDataDispatch),Q=U.isEditingFolder[e],V=(0,l.useRef)(null),K=(0,l.useState)(""),q=(0,r.default)(K,2),J=q[0],G=q[1],Y=null==B?void 0:B.find((function(e){return e.id===Q})),X=W||void 0===B?void 0:z.concat(B),Z=(0,i.useMutation)(function(){var e=(0,o.default)((function*(e){return yield A(e)}));return function(t){return e.apply(this,arguments)}}()),$=function(){var e=(0,o.default)((function*(e){console.info("onRemoveFolder",e),x((0,v.setFolderMenuItemId)({itemId:void 0})),x((0,v.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Folder",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,o.default)((function*(){yield L.mutateAsync(e.id),D()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This folder will remain for other users who may have access",appDialogControls:void 0})),console.info("after delete mutation")}));return function(t){return e.apply(this,arguments)}}(),ee=function(){return H({actionType:d.UserDataActionType.setEditingFolder,folderId:void 0,folderType:e})},te=function(t){return H({actionType:d.UserDataActionType.setEditingFolder,folderId:t,folderType:e})},ne=function(){var e=(0,o.default)((function*(e){if(console.info("isEditingFolder: "+(e===Q),e),(null==Y?void 0:Y.id)===e)return Y.title=J,yield Z.mutateAsync(Y),ee(),void(yield k.refetch());te(e)}));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,o.default)((function*(e,t){if(console.info("dragend",e,t),e!==t){X[e].orderId=t+1;var n=X[t]?X[t].orderId=e+1:void 0;yield N.mutateAsync(X[e]),n&&(yield N.mutateAsync(X[t]))}}));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=(0,o.default)((function*(e){x((0,v.setFolderMenuItemId)({itemId:void 0}));var t=e.id,n=e.title,r=e.userId,o=p.domain+"webapp/"+h+"/folder/"+t+"?title="+n+"&userId="+r+"&mnemonic=";if(e.mnemonic){console.info("folder has mnemonic");var i=o+encodeURIComponent(e.mnemonic);console.info(i),f.default.setString(i)}if(!e.mnemonic){var a=(0,p.genMnemonic)();e.mnemonic=a,yield Z.mutateAsync(e);var l=o+encodeURIComponent(a);console.info(l),f.default.setString(l)}x((0,v.setToastText)("Link to folder has been copied"))}));return function(t){return e.apply(this,arguments)}}(),ie=function(){var t=(0,o.default)((function*(){var t=yield p.DocumentPicker.pickSingle({presentationStyle:"fullScreen"});if(console.info("pickerResult",t),t){var n=yield(0,p.getUserData)(),r=t.uri,o=e,i={id:y.default.v4().toString(),url:r,title:t.name,originalId:t.name,filename:t.name,fileType:t.type,folderId:o,userId:n.id,date:(new Date).valueOf(),type:t.file.type,size:t.file.size,extractor:"local"};x((0,m.startOnboarding)({file:t.file,media:i}))}}));return function(){return t.apply(this,arguments)}}();return Object.assign({isLoadingFolderContentError:k.error,isLoadingFolderContent:W,folderContentQuery:k,folder:R,folderContent:X,isEditingFolder:Q,abortEditFolder:ee,folderNameInputRef:V,currentFolderEditorName:J,setFolderEditorName:G,onFolderActionPress:ne,onRemoveFolder:$,onShareFolder:oe,folderType:h,getContentItem:function(e,t){return X[t]},getContentCount:function(){return(null==X?void 0:X.length)||0}},_,{onReordered:re,addMedia:ie})},r=h(r),o=h(o),f=h(f),y=h(y)}.apply(t,r))||(e.exports=o)},696974:(e,t,n)=>{var r,o;r=[t,n(29293),n(585715),n(936665),n(609209),n(767146),n(304285),n(926488),n(323817),n(201319),n(490320)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s,f){"use strict";var p=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useFolders=t.FoldersActionType=void 0,r=p(r),o=p(o),l=p(l);t.FoldersActionType=function(e){return e.edit="edit",e.select="select",e.deselect="deselect",e.abortEdit="abortEdit",e}({}),t.useFolders=function(e,t){var n=(0,s.useRoute)().params,p=null==n?void 0:n.folderId,m=(0,i.useContext)(u.UserDataState),y=(0,i.useContext)(u.UserDataDispatch),v=m.currentFolderIds[e],g=m.isEditingFolder[e],h=(0,i.useRef)(null),b=(0,i.useState)(""),w=(0,o.default)(b,2),E=w[0],P=w[1],I=(0,s.useIsFocused)(),S=(0,c.useQuery)("folders_"+e,(0,r.default)((function*(){var t=yield(0,f.getFoldersByType)(e);return t.find((function(t){return t.id==="new_"+e}))||e===a.FolderType.database||t.unshift({id:"new_"+e,title:"New",isFolder:!0,date:(new Date).valueOf(),userId:"",folderType:e,orderId:0}),t})),{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!0,enabled:!t}),F=S.isFetching,D=(null==S?void 0:S.data)||[{id:"new_"+e,title:"New",isFolder:!0,date:(new Date).valueOf(),userId:"",folderType:e}],O=null==D?void 0:D.find((function(e){return e.id===g})),M=(0,c.useQuery)("folderContent_"+e,(function(){return(0,f.getFolderContent)(v)}),{enabled:!1,retry:!0,refetchOnWindowFocus:!1,enabled:!t}),A=M.isLoading||M.isFetching,T=(null==M?void 0:M.data)||[],_=(0,c.useMutation)(function(){var e=(0,r.default)((function*(e){return yield(0,f.writeItem)({id:e,isDeleted:!0})}));return function(t){return e.apply(this,arguments)}}()),x=(0,c.useMutation)(function(){var e=(0,r.default)((function*(e){return yield(0,f.writeItem)(e)}));return function(t){return e.apply(this,arguments)}}()),C=function(){var t=(0,r.default)((function*(t){y({actionType:d.UserDataActionType.setActiveFolder,folderId:void 0,folderType:e}),v!==t&&y({actionType:d.UserDataActionType.setActiveFolder,folderId:t,folderType:e})}));return function(e){return t.apply(this,arguments)}}(),j=function(t){return y({actionType:d.UserDataActionType.setEditingFolder,folderId:t,folderType:e})},k=function(){return y({actionType:d.UserDataActionType.setEditingFolder,folderId:void 0,folderType:e})},L=function(){var e=(0,r.default)((function*(e){if(console.info("isEditingFolder: "+(e===g),e),(null==O?void 0:O.id)===e)return O.title=E,yield x.mutateAsync(O),k(),void(yield S.refetch());j(e)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.default)((function*(e){console.info("onRemoveFolder",e),yield _.mutateAsync(e.id),yield S.refetch(),console.info("after delete mutation")}));return function(t){return e.apply(this,arguments)}}(),R=function(){var t=(0,r.default)((function*(t){console.info("onShareFolder",t);var n=t.id,r=t.title,o=t.userId,i=f.domain+"webapp/"+e+"/folder/"+n+"?title="+r+"&userId="+o+"&mnemonic=";if(t.mnemonic){console.info("folder has mnemonic");var a=i+encodeURIComponent(t.mnemonic);console.info(a),l.default.setString(a)}if(!t.mnemonic){var u=(0,f.genMnemonic)();t.mnemonic=u,yield x.mutateAsync(t);var d=i+encodeURIComponent(u);console.info(d),l.default.setString(d)}}));return function(e){return t.apply(this,arguments)}}();return{folderType:e,selectFolder:C,currentFolderId:p,getItem:function(e,t){return D[t]},getItemCount:function(){return D.length},getContentItem:function(e,t){return T[t]},getContentCount:function(){return T.length},folderContent:T,loadingContent:A,loadingFolders:F,folders:D,onRemoveFolder:B,editFolder:j,abortEditFolder:k,onShareFolder:R,folderContentQuery:M,currentFolderEditorName:E,setFolderEditorName:P,folderNameInputRef:h,onFolderPress:function(e){C(e)},onFolderActionPress:L,userState:m,userDispatch:y,isFocused:I,isLoadingFolder:S.isLoading,isEditingFolder:g}}}.apply(t,r))||(e.exports=o)},195434:(e,t,n)=>{var r,o;r=[t,n(936665),n(792365),n(11881),n(569243)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useKeyboardDispatcher=function(){var e=(0,i.useAppDispatch)();(0,r.useEffect)((function(){return o.default.addListener("keyboardDidShow",(function(t){return e((0,a.setKeyboardHeight)({keyboardHeight:t.endCoordinates.height}))})),o.default.addListener("keyboardDidHide",(function(){return e((0,a.setKeyboardHeight)({keyboardHeight:0}))})),function(){o.default.removeAllListeners("keyboardDidShow"),o.default.removeAllListeners("keyboardDidHide")}}),[])},o=l(o)}.apply(t,r))||(e.exports=o)},362551:(e,t,n)=>{var r,o;r=[t,n(696974),n(609209),n(465454),n(490320)],void 0===(o=function(e,n,r,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.useMedia=void 0;t.useMedia=function(e,t,a){var l=(0,o.useMediaPlayer)(),u=(0,n.useFolders)(r.FolderType.media,e||i.getFoldersByType,t||i.getFolderContent,a||i.writeItem);return Object.assign({},u,l)}}.apply(t,r))||(e.exports=o)},465454:(e,t,n)=>{var r,o;r=[t,n(29293),n(492933),n(11881),n(490320),n(841530),n(569243),n(323817),n(263459)],void 0===(o=function(e,r,o,i,a,l,u,d,c){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useMediaPlayer=void 0,r=s(r);t.useMediaPlayer=function(e){var t=(0,i.useAppSelector)((function(e){return e.media})),n=(0,c.useCloseDialog)().closeDialog,s=(0,d.useQueryClient)(),f=(0,i.useAppSelector)((function(e){return e.fs.downloadingProgress})),p=(0,i.useAppDispatch)(),m=function(){var e=(0,r.default)((function*(e){console.info("mediapress",e);try{var n=e.id;p((0,o.stop)()),t.currentMediaId!==n&&""!==n&&p((0,o.play)({actionType:o.MediaActionType.play,mediaId:n,media:e}))}catch(r){console.error("mediapress error",r)}}));return function(t){return e.apply(this,arguments)}}(),y=(0,d.useMutation)(function(){var t=(0,r.default)((function*(t){var n=yield(0,a.getById)(t,e);try{yield(0,a.removeObject)(n)}catch(r){console.error("removeObject error",r)}yield(0,a.writeItem)(Object.assign({},n,{isDeleted:!0})),yield s.refetchQueries("folderData_"+e)}));return function(e){return t.apply(this,arguments)}}()),v=(0,d.useMutation)(function(){var t=(0,r.default)((function*(t){var n=yield(0,a.getById)(t,e);try{yield(0,a.removeObject)(n)}catch(r){console.error("removeObject error",r)}yield s.refetchQueries("folderData_"+e),yield s.refetchQueries(["isDownloaded",t,n.isDownloaded])}));return function(e){return t.apply(this,arguments)}}()),g=(0,d.useMutation)(function(){var t=(0,r.default)((function*(t){var n=yield(0,a.getById)(t,e);yield(0,a.exportFile)(n)}));return function(e){return t.apply(this,arguments)}}()),h=function(){var t=(0,r.default)((function*(t){console.info("onDownloadMediaPress",t);var n=t;if(!f[n]){p((0,l.setDownloadingProgress)({itemId:n,progress:.001}));try{yield(0,a.downloadFileById)(t,e,(function(e){return p((0,l.setDownloadingProgress)({itemId:n,progress:e}))}))}catch(r){console.error(r)}p((0,l.setDownloadingProgress)({itemId:t,progress:void 0}))}}));return function(e){return t.apply(this,arguments)}}();return Object.assign({},t,{onMediaPress:m,onRemoveMediaPress:function(e){p((0,u.setFolderMenuItemId)({itemId:void 0})),p((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Media",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield y.mutateAsync(e),n()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This media will be removed for you and other users who may have access",appDialogControls:void 0}))},onDownloadMediaPress:h,onCopyLinkPress:function(e){console.info("onShareMediaPress",e)},onRemoveFile:function(e){p((0,u.setFolderMenuItemId)({itemId:void 0})),p((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Media",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield v.mutateAsync(e),n()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"Only the media file will be removed and only from this device",appDialogControls:void 0}))},onExportFile:function(e){p((0,u.setFolderMenuItemId)({itemId:void 0})),p((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Export Media",appDialogIcon:"share",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield g.mutateAsync(e),n()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This media will be unencrypted and exported to your device",appDialogControls:void 0}))},onEditMediaPress:function(e){console.info("onEditMediaPress",e)}})}}.apply(t,r))||(e.exports=o)},390323:(e,t,n)=>{var r,o;r=[t,n(443693),n(585715),n(29293),n(490320),n(323817),n(201319),n(11881),n(806671)],void 0===(o=function(e,r,o,i,a,l,u,d,c){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useMessages=void 0,r=s(r),o=s(o),i=s(i);t.useMessages=function(e){var t,n=(0,d.useAppSelector)((function(t){return t.chat.loadingPagination[e]})),s=(0,d.useAppDispatch)(),f=(0,u.useRoute)(),p=(0,u.useIsFocused)(),m=(0,u.useNavigation)(),y=f.params,v=null==y?void 0:y.mnemonic,g=(null==y?void 0:y.page)||1,h=(0,l.useQuery)("chatMessages_"+e,(0,i.default)((function*(){var t=yield Promise.all([(0,a.getPublicMessages)(e,v,25*g,0)]);return{messages:(0,o.default)(t,1)[0]}})),{retry:!0,refetchInterval:1e3,enabled:p}),b=h.isFetching||n,w=(0,l.useMutation)(function(){var t=(0,i.default)((function*(t){try{var n=yield(0,a.sendChatMessage)(e,t,v);return yield h.refetch(),n}catch(r){console.error("==== sendMessage error ===",r)}}));return function(e){return t.apply(this,arguments)}}(),{retry:!0}),E=(null==(t=h.data)?void 0:t.messages)||[],P=function(){var t=(0,i.default)((function*(){if(!n){var t=parseInt(g.toString(),10)+1;console.info("nextPage",t,b),s((0,c.setPaginationState)((0,r.default)({},e,!0))),m.dispatch(Object.assign({},u.CommonActions.setParams({page:t}),{source:f.key})),yield h.refetch(),setTimeout((function(){s((0,c.setPaginationState)((0,r.default)({},e,!1)))}),2e3)}}));return function(){return t.apply(this,arguments)}}();return{messages:E,nextPage:P,loadingMessages:b,sendingMessage:w.isLoading,messagesError:h.error,sendMessage:w.mutate,isLoadingEarlier:n}}}.apply(t,r))||(e.exports=o)},665245:(e,t,n)=>{var r,o;r=[t,n(29293),n(323817),n(936665),n(201319)],void 0===(o=function(e,r,o,i,a){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useRouteAuction=void 0,r=l(r);t.useRouteAuction=function(e,t){var n=(0,o.useQueryClient)(),l=(0,a.useRoute)().params,u=l.auctionId,d=l.title,c=l.mnemonic,s=(0,o.useMutation)((0,r.default)((function*(){var e={id:u,isContact:!0,folderId:u,name:d,mnemonic:c};console.info("nauction",e)})),{retry:!0,onSuccess:function(){var e=(0,r.default)((function*(){try{yield n.refetchQueries("auction_"+u),yield n.refetchQueries("current_bid_"+u)}catch(e){console.error("onadd contact error",e)}}));return function(){return e.apply(this,arguments)}}()});(0,i.useMemo)((function(){t||e||s.isLoading||s.mutateAsync().then((0,r.default)((function*(){console.info("after create auction")})))}),[t,e,s])}}.apply(t,r))||(e.exports=o)},486568:(e,t,n)=>{var r,o;r=[t,n(29293),n(323817),n(936665),n(201319),n(490320)],void 0===(o=function(e,r,o,i,a,l){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useRouteContact=void 0,r=u(r);t.useRouteContact=function(e,t,n,u){var d=(0,o.useQueryClient)(),c=(0,a.useNavigation)(),s=(0,a.useRoute)(),f=u||s.params,p=f.chatId,m=f.name,y=f.mnemonic,v="new_contact",g=(0,o.useMutation)((0,r.default)((function*(){var e={id:p,isContact:!0,folderId:v,name:m,mnemonic:y};console.info("ncotanct",e),yield(0,l.writeItem)(e)})),{retry:!0,onSuccess:function(){var e=(0,r.default)((function*(){try{yield d.refetchQueries("contact_"+p),c.navigate("Chat",{chatId:p,name:m,parentFolderId:v,mnemonic:y}),yield(0,l.sendChatMessage)(p,n.name+" has joined",y,{system:!0}),yield d.refetchQueries("folderContent_"+v)}catch(e){console.error("onadd contact error",e)}}));return function(){return e.apply(this,arguments)}}()});(0,i.useMemo)((function(){console.info("useRouteContact Memo",t,e),t||e||g.isLoading||g.mutateAsync().then((0,r.default)((function*(){console.info("after create contact")})))}),[t,e,g])}}.apply(t,r))||(e.exports=o)},801132:(e,t,n)=>{var r,o;r=[t,n(368703)],void 0===(o=function(e,r){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useShare=function(){return{share:function(e){r.default.share({url:e,message:"Share Media"})}}},r=o(r)}.apply(t,r))||(e.exports=o)},926488:(e,t,n)=>{var r,o;r=[t,n(585715),n(443693),n(936665)],void 0===(o=function(e,r,o,i){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useUserData=t.UserDataActionType=void 0,r=a(r),o=a(o);var l=t.UserDataActionType=function(e){return e.setUser="setUser",e.setTheme="setTheme",e.setActiveFolder="setActiveFolder",e.setEditingFolder="setEditingFolder",e.setFolderType="setFolderType",e}({}),u=function(e,t){switch(t.actionType){case l.setUser:return Object.assign({},e,{user:t.userData});case l.setActiveFolder:return Object.assign({},e,{currentFolderIds:Object.assign({},e.currentFolderIds||{},(0,o.default)({},t.folderType,t.folderId)),isEditingFolder:Object.assign({},e.isEditingFolder||{},(0,o.default)({},t.folderType,void 0))});case l.setFolderType:return Object.assign({},e,{currentFolderType:t.folderType});case l.setEditingFolder:return Object.assign({},e,{isEditingFolder:Object.assign({},e.isEditingFolder||{},(0,o.default)({},t.folderType,t.folderId)),currentFolderIds:Object.assign({},e.currentFolderIds||{},(0,o.default)({},t.folderType,t.folderId))});default:return e}};t.useUserData=function(){var e=(0,i.useReducer)(u,{user:{},currentFolderIds:{},colors:{},isEditingFolder:{}}),t=(0,r.default)(e,2);return{userDataState:t[0],userDataDispatch:t[1]}}}.apply(t,r))||(e.exports=o)},41324:(e,t,n)=>{var r,o;r=[t,n(936665),n(29532),n(5173),n(226632),n(609209),n(979090)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createChatStack=void 0,r=d(r),i=d(i),a=d(a),u=d(u);var c=(0,o.createStackNavigator)();t.createChatStack=function(){var e=function(){return r.default.createElement(a.default,null)},t=function(){return r.default.createElement(u.default,{folderType:l.FolderType.contact})},n=function(){return r.default.createElement(i.default,null)};return function(){return r.default.createElement(c.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(c.Screen,{name:"Contacts",component:n,options:{freezeOnBlur:!0}}),r.default.createElement(c.Screen,{name:"Chat",component:e,options:function(e){e.route;return{freezeOnBlur:!0}}}),r.default.createElement(c.Screen,{name:"Folder",component:t,options:function(e){e.route;return{freezeOnBlur:!0}}}))}}}.apply(t,r))||(e.exports=o)},205099:(e,t,n)=>{var r,o;r=[t,n(936665),n(979090),n(609209),n(975906),n(696974),n(356410),n(490320),n(902076)],void 0===(o=function(e,r,o,i,a,l,u,d,c){"use strict";var s=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createEditor=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),o=s(o),a=s(a),u=s(u);var p=i.FolderType.editor,m=(0,c.createNativeStackNavigator)(),y=(0,r.memo)((function(){return r.default.createElement(o.default,{folderType:p})})),v=(0,r.memo)((function(){return r.default.createElement(a.default,{dataHook:(0,l.useFolders)(p,d.getFoldersByType,d.getFolderContent,d.writeItem)})}));t.createEditor=function(){var e=(0,r.memo)((function(){return r.default.createElement(u.default,null)}));return function(){return r.default.createElement(m.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(m.Screen,{name:"EditorProjects",options:{orientation:"portrait"},component:v}),r.default.createElement(m.Screen,{name:"EditorProject",options:{orientation:"all"},component:e}),r.default.createElement(m.Screen,{name:"Folder",options:{orientation:"portrait"},component:y}))}}}.apply(t,r))||(e.exports=o)},337554:(e,t,n)=>{var r,o;r=[t,n(936665),n(29532),n(979090),n(609209),n(975906),n(696974),n(790970),n(201319),n(490320)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createEncoder=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),i=f(i),l=f(l),d=f(d);var m=a.FolderType.encoder,y=(0,o.createStackNavigator)(),v=(0,r.memo)((function(){return r.default.createElement(i.default,{folderType:m})})),g=(0,r.memo)((function(){return r.default.createElement(l.default,{dataHook:(0,u.useFolders)(m,s.getFoldersByType,s.getFolderContent,s.writeItem)})}));t.createEncoder=function(){var e=(0,r.memo)((function(){return r.default.createElement(d.default,{writeItem:s.writeItem,routeParams:(0,c.useRoute)().params})}));return function(){return r.default.createElement(y.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(y.Screen,{name:"EncoderProjects",component:g}),r.default.createElement(y.Screen,{name:"EncoderProject",component:e}),r.default.createElement(y.Screen,{name:"Folder",component:v}))}}}.apply(t,r))||(e.exports=o)},250884:(e,t,n)=>{var r,o;r=[t,n(936665),n(979090),n(203744),n(609209),n(902076),n(126592)],void 0===(o=function(e,r,o,i,a,l,u){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createFileStack=void 0,r=d(r),o=d(o),i=d(i);var c=function(){return r.default.createElement(o.default,{folderType:a.FolderType.media})},s=function(){return r.default.createElement(i.default,null)},f=(0,l.createNativeStackNavigator)();t.createFileStack=function(){return function(){return r.default.createElement(f.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(f.Screen,{name:"Files",options:{orientation:"portrait"},component:s}),r.default.createElement(f.Screen,{name:"Auction",options:{orientation:"portrait"},component:u.AuctionPage}),r.default.createElement(f.Screen,{name:"Folder",options:{orientation:"portrait"},component:c}))}}}.apply(t,r))||(e.exports=o)},560859:(e,t,n)=>{var r,o;r=[t,n(936665),n(29532),n(77),n(357741),n(240218)],void 0===(o=function(e,r,o,i,a,l){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createSettings=void 0,r=u(r),i=u(i),a=u(a),l=u(l);var d=function(e){return r.default.createElement(i.default,e)},c=function(e){return r.default.createElement(a.default,e)},s=function(e){return r.default.createElement(l.default,e)},f=(0,o.createStackNavigator)();t.createSettings=function(){return function(){return r.default.createElement(f.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(f.Screen,{name:"Settings",component:d}),r.default.createElement(f.Screen,{name:"Devices",component:c}),r.default.createElement(f.Screen,{name:"Drive",component:c}),r.default.createElement(f.Screen,{name:"Databases",component:s}))}}}.apply(t,r))||(e.exports=o)},385054:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.linking=void 0;t.linking={prefixes:["starpy://","https://www.starpy.me"],config:{screens:{Starp:{path:"webapp",screens:{FilesTab:{path:"media",screens:{Folder:{path:"folder/:folderId"},Auction:{path:"auction/:auctionId"},Files:{path:"/"}}},SettingsTab:{path:"settings",screens:{Devices:{path:"devices"},Drive:{path:"drive"},Databases:{path:"databases"},Settings:{path:"/"}}},ContactsTab:{path:"contact",screens:{Chat:{path:"chat/:chatId"},Contacts:{path:"/"},Folder:{path:"folder/:folderId"}}},EncoderTab:{path:"encoder",screens:{EncoderProjects:{path:"/"},EncoderProject:{path:"project/:projectId"},Folder:{path:"folder/:folderId"}}},EditorTab:{path:"editor",screens:{EditorProjects:{path:"/"},EditorProject:{path:"project/:projectId"},Folder:{path:"folder/:folderId"}}}}}}}}}.apply(t,[t]))||(e.exports=n)},11881:(e,t,n)=>{var r,o;r=[t,n(642233)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.useAppSelector=t.useAppDispatch=void 0;t.useAppDispatch=n.useDispatch,t.useAppSelector=n.useSelector}.apply(t,r))||(e.exports=o)},242468:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setWinnerPrice=t.setPayWallet=t.setDownloadProgress=t.setBidWallet=t.setBidAmount=t.setAuctionWallet=t.setAuctionPrice=t.setAuctionBetStep=t.setAuctioName=t.setAuctioEndDate=t.default=t.AuctionSlice=void 0;var r=t.AuctionSlice=(0,n.createSlice)({name:"fs",initialState:{newAuctionName:"",newAuctionPrice:.01,newAuctionBetStep:.01,bidAmount:.01,newAuctionEndDate:0,newAuctionWallet:"",bidWallet:"",payWallet:"",winnerPrice:0,payAuctionId:"",downloadProgress:0},reducers:{setAuctioName:function(e,t){var n=t.payload;e.newAuctionName=n},setAuctionPrice:function(e,t){var n=t.payload;e.newAuctionPrice=n},setBidAmount:function(e,t){var n=t.payload;e.bidAmount=n},setBidWallet:function(e,t){var n=t.payload;e.bidWallet=n},setAuctioEndDate:function(e,t){var n=t.payload;e.newAuctionEndDate=n},setAuctionWallet:function(e,t){var n=t.payload;e.newAuctionWallet=n},setPayWallet:function(e,t){var n=t.payload;e.payWallet=n},setWinnerPrice:function(e,t){var n=t.payload;e.winnerPrice=n},setAuctionBetStep:function(e,t){var n=t.payload;e.newAuctionBetStep=n},setDownloadProgress:function(e,t){var n=t.payload;e.downloadProgress=n}}}),o=r.actions;t.setAuctioName=o.setAuctioName,t.setAuctioEndDate=o.setAuctioEndDate,t.setAuctionPrice=o.setAuctionPrice,t.setAuctionWallet=o.setAuctionWallet,t.setAuctionBetStep=o.setAuctionBetStep,t.setBidAmount=o.setBidAmount,t.setBidWallet=o.setBidWallet,t.setPayWallet=o.setPayWallet,t.setWinnerPrice=o.setWinnerPrice,t.setDownloadProgress=o.setDownloadProgress,t.default=r.reducer}.apply(t,r))||(e.exports=o)},806671:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setPaginationState=t.default=t.chatSlice=void 0;var r=t.chatSlice=(0,n.createSlice)({name:"chat",initialState:{loadingPagination:{}},reducers:{setPaginationState:function(e,t){var n=Object.keys(t.payload)[0];e.loadingPagination[n]=t.payload[n]}}});t.setPaginationState=r.actions.setPaginationState,t.default=r.reducer}.apply(t,r))||(e.exports=o)},638608:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setShowEditor=t.setShowComments=t.setScrollPosition=t.setScrollParams=t.setRenderUrl=t.setRenderProgress=t.setPixelsPerSecond=t.setIsRendering=t.setIsPlaying=t.setEncoderProgress=t.setCaretPosition=t.setActiveLayer=t.editorSlice=t.default=t.addNewLogLine=void 0;var r=t.editorSlice=(0,n.createSlice)({name:"editor",initialState:{encoderProgress:0,caretPosition:0,scrollPosition:0,pixelsPerSecond:8,jobs:[],jobsProgress:{},isPlaying:!1,videoCaretPosition:0,videoScrollPosition:0,scrollParams:{totalWidth:0,totalScroll:0},canScroll:!0,activeLayer:"1",prevActiveLayer:"1",scroll:0,totalTime:0,showEditor:!0,showComments:!1,isRendering:!1,renderProgress:0,renderTime:0,ffmpegLogs:"",ffmpegError:!1},reducers:{setEncoderProgress:function(e,t){e.encoderProgress=t.payload},setActiveLayer:function(e,t){!0===e.isPlaying&&(e.videoCaretPosition=t.payload.caretPosition,e.videoScrollPosition=t.payload.scrollPosition,e.activeLayer=t.payload.activeLayerId)},setCaretPosition:function(e,t){e.caretPosition=t.payload,!1===e.isPlaying&&(e.videoCaretPosition=t.payload)},setScrollPosition:function(e,t){e.scrollPosition=t.payload,!1===e.isPlaying&&(e.videoScrollPosition=t.payload)},setPixelsPerSecond:function(e,t){e.pixelsPerSecond=t.payload},createBackgroundRenderJob:function(e,t){e.jobs.push(t.payload)},setJobProgress:function(e,t){e.jobsProgress[t.payload.id]=t.payload.progress},setIsPlaying:function(e,t){e.isPlaying=t.payload,!1===t.payload&&(e.videoCaretPosition=e.caretPosition,e.videoScrollPosition=e.scrollPosition)},setTotalTime:function(e,t){e.totalTime=t.payload},setScrollParams:function(e,t){e.scrollParams=t.payload;var n=e.scrollParams.totalScroll>e.scrollParams.totalWidth,r=e.scrollParams.totalScroll-e.scrollParams.totalWidth;e.canScroll!==n&&!1===e.isPlaying&&(e.canScroll=n),e.scroll===r||isNaN(r)||(e.scroll=r)},setShowEditor:function(e,t){e.showEditor=t.payload},setShowComments:function(e,t){e.showComments=t.payload},setIsRendering:function(e,t){e.isRendering=t.payload,e.isRendering&&(e.ffmpegLogs="",e.ffmpegError=!1)},setRenderUrl:function(e,t){e.renderOutputURL=t.payload},setRenderProgress:function(e,t){e.renderProgress=t.payload.progress,e.renderTime=t.payload.time/1e6,e.caretPosition=e.renderTime*e.pixelsPerSecond,e.videoCaretPosition=e.caretPosition},addNewLogLine:function(e,t){e.ffmpegLogs+="\n"+t.payload,t.payload.toLowerCase().search("error")>-1&&(e.ffmpegError=!0)}}}),o=r.actions;t.setEncoderProgress=o.setEncoderProgress,t.setCaretPosition=o.setCaretPosition,t.setScrollPosition=o.setScrollPosition,t.setPixelsPerSecond=o.setPixelsPerSecond,t.setIsPlaying=o.setIsPlaying,t.setScrollParams=o.setScrollParams,t.setActiveLayer=o.setActiveLayer,t.setShowComments=o.setShowComments,t.setShowEditor=o.setShowEditor,t.setIsRendering=o.setIsRendering,t.setRenderUrl=o.setRenderUrl,t.setRenderProgress=o.setRenderProgress,t.addNewLogLine=o.addNewLogLine,t.default=r.reducer}.apply(t,r))||(e.exports=o)},379241:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setEncoderProgress=t.encoderSlice=t.default=void 0;var r=t.encoderSlice=(0,n.createSlice)({name:"encoder",initialState:{encoderProgress:0},reducers:{setEncoderProgress:function(e,t){e.encoderProgress=t.payload}}});t.setEncoderProgress=r.actions.setEncoderProgress,t.default=r.reducer}.apply(t,r))||(e.exports=o)},841530:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setSharing=t.setDownloadingProgress=t.setDeleteItem=t.default=t.FileSystemSlice=void 0;var r=t.FileSystemSlice=(0,n.createSlice)({name:"fs",initialState:{isDeleting:!1,downloadingProgress:{},sharing:{}},reducers:{setDeleteItem:function(e,t){var n=t.payload.deleteItemId;e.isDeleting=!!n,e.deleteItemId=n},setSharing:function(e,t){var n=t.payload,r=n.itemId,o=n.status;e.sharing[r]=o},setDownloadingProgress:function(e,t){var n=t.payload,r=n.itemId,o=n.progress;e.downloadingProgress[r]=o}}}),o=r.actions;t.setDeleteItem=o.setDeleteItem,t.setDownloadingProgress=o.setDownloadingProgress,t.setSharing=o.setSharing,t.default=r.reducer}.apply(t,r))||(e.exports=o)},492933:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.togglePause=t.stop=t.selectIsPlayingMedia=t.selectIsLoadingMedia=t.selectCurrentMediaId=t.play=t.mediaSlice=t.loaded=t.default=t.MediaActionType=void 0;t.MediaActionType=function(e){return e.stop="stop",e.play="play",e.loaded="loaded",e.pause="pause",e}({});var r=t.mediaSlice=(0,n.createSlice)({name:"media",initialState:{},reducers:{stop:function(e){e.isLoadingMedia=void 0,e.currentMediaId=void 0},play:function(e,t){e.currentMediaId=t.payload.mediaId,e.currentMedia=t.payload.media,e.isLoadingMedia=!0},togglePause:function(e,t){e.isMediaPaused=t.payload.pause},loaded:function(e,t){e.isLoadingMedia=!1,e.isMediaPlaying=!0}}}),o=r.actions;t.stop=o.stop,t.play=o.play,t.loaded=o.loaded,t.togglePause=o.togglePause,t.selectCurrentMediaId=function(e){return e.media.currentMediaId},t.selectIsLoadingMedia=function(e){return e.media.isLoadingMedia},t.selectIsPlayingMedia=function(e){return e.media.isMediaPlaying},t.default=r.reducer}.apply(t,r))||(e.exports=o)},569243:(e,t,n)=>{var r,o;r=[t,n(551427),n(609209)],void 0===(o=function(e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setToastText=t.setToastIcon=t.setKeyboardHeight=t.setIsSigned=t.setIsReady=t.setIsEditingProfile=t.setFolderMenuItemId=t.setEditingMode=t.setCurrentPage=t.setAppDialogParams=t.default=void 0;var o={isTabBarHidden:!1,isKeyboardOpen:!1,keyboardHeight:0,currentPage:"FilesTab",isReady:!1,isSignedIn:!1,params:void 0,isBackEnabled:!1,folderType:r.FolderType.media,isEditing:!1,editingMode:void 0,parentName:"FilesTab",folderItemMenuOpen:void 0,appDialogVisible:!1,appDialogBody:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogControls:void 0,appDialogOnSelectRight:void 0,appDialogOnSelectLeftt:void 0,toastText:void 0,toastIcon:"check-circle",isEditingProfile:!1},i=["Chat","EditorProject","Auction"],a=["Devices","Databases","Drive","Folder","Chat","EncoderProject","EditorProject","Auction"],l=(0,n.createSlice)({name:"ui",initialState:o,reducers:{setCurrentPage:function(e,t){var n=t.payload,o=n.currentPage,l=n.params,u=n.parentName;console.info({currentPage:o,parentName:u}),e.currentPage=o,e.params=l,e.parentName=u,i.includes(o)?e.isTabBarHidden=!0:e.isTabBarHidden=!1,a.includes(o)?e.isBackEnabled=!0:e.isBackEnabled=!1;var d=r.FolderType.media;"FilesTab"===o&&(d=r.FolderType.media),"ContactsTab"===o&&(d=r.FolderType.contact),"ContactsTab"===o&&(d=r.FolderType.contact),"Contacts"===o&&(d=r.FolderType.contact),"Chat"===o&&(d=r.FolderType.contact),"SettingsTab"===o&&(d=r.FolderType.settings),"EncoderTab"===o&&(d=r.FolderType.encoder),"EncoderProject"===o&&(d=r.FolderType.encoder),"EditorTab"===o&&(d=r.FolderType.editor),"EditorProject"===o&&(d=r.FolderType.editor),"Devices"===o&&(d=r.FolderType.settings),"Databases"===o&&(d=r.FolderType.settings),"Drive"===o&&(d=r.FolderType.settings),"Settings"===o&&(d=r.FolderType.settings),"Folder"===o&&("EditorTab"===u&&(d=r.FolderType.editor),"EncoderTab"===u&&(d=r.FolderType.encoder),"ContactsTab"===u&&(d=r.FolderType.contact),"SettingsTab"===u&&(d=r.FolderType.settings),"FilesTab"===u&&(d=r.FolderType.media)),e.folderType=d},setFolderMenuItemId:function(e,t){var n=t.payload.itemId;e.folderItemMenuOpen=n},setAppDialogParams:function(e,t){var n=t.payload,r=n.appDialogVisible,o=n.appDialogBody,i=n.appDialogIcon,a=n.appDialogControls,l=n.appDialogOnSelectLeftt,u=n.appDialogOnSelectRight,d=n.appDialogTitle;e.appDialogVisible=r,e.appDialogBody=o,e.appDialogIcon=i,e.appDialogControls=a,e.appDialogOnSelectLeftt=l,e.appDialogOnSelectRight=u,e.appDialogTitle=d},setToastText:function(e,t){var n=t.payload;e.toastText=n},setToastIcon:function(e,t){var n=t.payload;e.toastIcon=n},setKeyboardHeight:function(e,t){var n=t.payload.keyboardHeight;e.keyboardHeight=n,e.isKeyboardOpen=0!==n},setEditingMode:function(e,t){var n=t.payload;e.editingMode=n,e.isEditing=void 0!==n&&"media"!==n},setIsReady:function(e,t){var n=t.payload;e.isReady=n},setIsSigned:function(e,t){var n=t.payload;e.isSignedIn=n},setIsEditingProfile:function(e,t){var n=t.payload;e.isEditingProfile=n}}}),u=l.actions;t.setCurrentPage=u.setCurrentPage,t.setKeyboardHeight=u.setKeyboardHeight,t.setIsReady=u.setIsReady,t.setIsSigned=u.setIsSigned,t.setEditingMode=u.setEditingMode,t.setFolderMenuItemId=u.setFolderMenuItemId,t.setAppDialogParams=u.setAppDialogParams,t.setToastText=u.setToastText,t.setToastIcon=u.setToastIcon,t.setIsEditingProfile=u.setIsEditingProfile,t.default=l.reducer}.apply(t,r))||(e.exports=o)},941784:(e,t,n)=>{var r,o;r=[t,n(551427)],void 0===(o=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.uploadSlice=t.startOnboarding=t.setUploadToCloud=t.setUploadInProgress=t.setShareToWt=t.setMetaForCloud=t.setMediaModalVisible=t.setFileUploadProgress=t.setEncrypt=t.selectIsPlayingMedia=t.selectIsLoadingMedia=t.selectCurrentMediaId=t.default=t.cancel=void 0;var r={modalVisible:!1,uploadToCloud:!1,persist:!0,shareToWT:!1,encryption:!1,fileUploadProgress:void 0,isUploadInProgress:!1,totalChunks:0},o=t.uploadSlice=(0,n.createSlice)({name:"upload",initialState:r,reducers:{startOnboarding:function(e,t){console.info("start onboarding",t),e.file=t.payload.file,e.media=t.payload.media,e.modalVisible=!0},continue:function(e,t){},cancel:function(e){e.modalVisible=!1},setMediaModalVisible:function(e,t){e.modalVisible=t.payload,t.payload||(e.file=void 0)},setFileUploadProgress:function(e,t){e.fileUploadProgress=t.payload},setUploadInProgress:function(e,t){e.isUploadInProgress=t.payload},setShareToWt:function(e,t){e.shareToWT=t.payload},setUploadToCloud:function(e,t){e.uploadToCloud=t.payload},setEncrypt:function(e,t){e.encryption=t.payload},setMetaForCloud:function(e,t){e.media.webpage_url=t.payload,e.media.hasCloud=!0,e.media.extractor="cloud",e.media.url=t.payload}}}),i=o.actions;t.startOnboarding=i.startOnboarding,t.cancel=i.cancel,t.setMediaModalVisible=i.setMediaModalVisible,t.setFileUploadProgress=i.setFileUploadProgress,t.setUploadInProgress=i.setUploadInProgress,t.setUploadToCloud=i.setUploadToCloud,t.setEncrypt=i.setEncrypt,t.setShareToWt=i.setShareToWt,t.setMetaForCloud=i.setMetaForCloud,t.selectCurrentMediaId=function(e){return e.media.currentMediaId},t.selectIsLoadingMedia=function(e){return e.media.isLoadingMedia},t.selectIsPlayingMedia=function(e){return e.media.isMediaPlaying},t.default=o.reducer}.apply(t,r))||(e.exports=o)},971956:(e,t,n)=>{var r,o;r=[t,n(551427),n(492933),n(941784),n(638608),n(806671),n(841530),n(379241),n(569243),n(242468)],void 0===(o=function(e,r,o,i,a,l,u,d,c,s){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.store=void 0,o=f(o),i=f(i),a=f(a),l=f(l),u=f(u),d=f(d),c=f(c),s=f(s);t.store=(0,r.configureStore)({reducer:{media:o.default,upload:i.default,encoder:d.default,chat:l.default,fs:u.default,editor:a.default,ui:c.default,auction:s.default}})}.apply(t,r))||(e.exports=o)},911352:(e,t)=>{var n;void 0===(n=function(){}.apply(t,[]))||(e.exports=n)},686289:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.ChatMessageType=t.ChatMessageStatus=void 0;t.ChatMessageType=function(e){return e.media="media",e.call="call",e.text="text",e.party_request="party_request",e.party_confirmation="party_confirmation",e.party_start="party_start",e.party_join="party_join",e.party_stop="party_stop",e.party_quit="party_quit",e.party_media="party_media",e.party_stop_media="party_media_stop",e.party_media_pause="party_media_pause",e.party_media_unpause="party_media_unpause",e.party_media_sync="party_media_sync",e}({}),t.ChatMessageStatus=function(e){return e.created="created",e.sent="sent",e.delivered="delivered",e.read="read",e}({})}.apply(t,[t]))||(e.exports=n)},40105:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.FolderType=void 0;t.FolderType=function(e){return e.contact="contact",e.media="media",e.settings="settings",e.encoder="encoder",e.editor="editor",e.database="database",e.auction="auction",e}({})}.apply(t,[t]))||(e.exports=n)},592609:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.FFMpegPreset=t.FFMpegOutputType=void 0;t.FFMpegPreset=function(e){return e.ultrafast="ultrafast",e.superfast="superfast",e.veryfast="veryfast",e.faster="faster",e.fast="fast",e.medium="medium",e}({}),t.FFMpegOutputType=function(e){return e.mp4="mp4",e.gif="gif",e}({})}.apply(t,[t]))||(e.exports=n)},261650:(e,t)=>{var n;void 0===(n=function(){}.apply(t,[]))||(e.exports=n)},609209:(e,t,n)=>{var r,o;r=[t,n(686289),n(592609),n(261650),n(40105),n(911352)],void 0===(o=function(e,n,r,o,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={FTSIndex:!0};t.FTSIndex=void 0,Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(l,t)||t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))})),Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(l,t)||t in e&&e[t]===r[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}}))})),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(l,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(l,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(l,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));t.FTSIndex=function(e){return e.title="titleFTSIndex",e.name="nameFTSIndex",e.text="textFTSIndex",e}({})}.apply(t,r))||(e.exports=o)},503584:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.RootStackName=t.RootScreens=void 0;t.RootStackName="Starp",t.RootScreens={ContactsTab:"Contacts",EditorTab:"EditorProjects",FilesTab:"Files",EncoderTab:"EncoderProjects",SettingsTab:"Settings"}}.apply(t,[t]))||(e.exports=n)},847790:()=>{},698285:()=>{},838664:()=>{},321638:()=>{},192668:()=>{},715340:()=>{},979838:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(c=0;c<e.length;c++){for(var[r,o,i]=e[c],l=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(l=!1,i<a&&(a=i));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,o,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="StarpyApp:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var l,u;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var s=d[c];if(s.getAttribute("src")==r||s.getAttribute("data-webpack")==t+i){l=s;break}}l||(u=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[o];var f=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),u&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n.b=document.baseURI||self.location.href;var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),l=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,o[1](l)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,l,u]=r,d=0;if(a.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(u)var c=u(n)}for(t&&t(r);d<a.length;d++)i=a[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkStarpyApp=self.webpackChunkStarpyApp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[122,588,68],(()=>n(130512)));r=n.O(r)})();
//# sourceMappingURL=main.js.map