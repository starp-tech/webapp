(()=>{var e={400300:(e,t,n)=>{var r,a;r=[n(616297),n(692637),n(709963),n(412082),n(331964),n(296540),n(205338),n(992796)],void 0===(a=function(e,t,r,a,i,o,l,d){"use strict";var u=n(124994);e=u(e),t=u(t),a=u(a),i=u(i);var c="@font-face {\n  src: url("+a.default+");\n  font-family: Ionicons;\n}",f=document.createElement("style");f.type="text/css",f.styleSheet?f.styleSheet.cssText=c:f.appendChild(document.createTextNode(c)),navigator.platform.startsWith("iP")||navigator.platform.startsWith("Mac")&&navigator.maxTouchPoints>4||(document.head.appendChild(f),(0,d.initUserData)().then((function(){(0,l.createRoot)(document.getElementById("root")).render((0,o.createElement)(i.default))})))}.apply(t,r))||(e.exports=a)},331964:(e,t,n)=>{var r,a;r=[t,n(19504),n(296540),n(426903),n(932779),n(199361),n(992796),n(510497),n(428716),n(841051),n(69544),n(961225),n(775942)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,a=y(a),i=y(i),o=y(o),l=y(l),i.default.ignoreAllLogs();var m=Object.assign({},f.MD3DarkTheme,{fonts:(0,f.configureFonts)({config:{default:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif',fontWeight:"400",letterSpacing:.5,lineHeight:22,fontSize:20}},isV3:!0})});t.default=function(){var e=(0,c.useUserData)(),t=e.userDataState,i=e.userDataDispatch;return a.default.createElement(p.Provider,{store:s.store},a.default.createElement(b.QueryClientProvider,{client:d.queryClient},a.default.createElement(u.UserCtx.Provider,{value:d.UserData},a.default.createElement(u.UserDataState.Provider,{value:t},a.default.createElement(u.UserDataDispatch.Provider,{value:i},a.default.createElement(r.SafeAreaProvider,null,a.default.createElement(f.PaperProvider,{theme:m},a.default.createElement(a.default.Fragment,null,a.default.createElement("style",{type:"text/css"},"\n                    @font-face {\n                      font-family: 'MaterialCommunityIcons';\n                      src: url("+n(227846)+") format('truetype');\n                    }\n                  "),a.default.createElement(a.default.Fragment,null)),a.default.createElement(l.default,null))))))))}}.apply(t,r))||(e.exports=a)},14151:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.STARPY_PLUS=void 0,t.useVerifyPremium=function(e){};t.STARPY_PLUS="starpyplus"}.apply(t,[t]))||(e.exports=n)},325640:(e,t,n)=>{var r,a;r=[t,n(29293),n(499151),n(926516),n(361866)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.sendChatMessage=t.getPublicMessages=t.genMnemonic=t.createNewParty=void 0,r=l(r),i=l(i);var d=t.sendChatMessage=function(){var e=(0,r.default)((function*(e,t,n,r){void 0===r&&(r={});var o=yield(0,a.getUserData)(),l={id:i.default.v4(),text:t,userId:o.id,chatId:e,folderId:e,messageStatus:"sent",userName:o.name,createdAt:(new Date).valueOf()},d=Object.assign({},l,r);console.info("send message",d);var u=yield(0,a.createDBConn)(e,n);return yield(0,a.writeItem)(d,u),d}));return function(t,n,r,a){return e.apply(this,arguments)}}(),u=(t.getPublicMessages=function(){var e=(0,r.default)((function*(e,t,n,r){void 0===n&&(n=15),void 0===r&&(r=0);try{var i,o,l,d,u=yield(0,a.getById)(e);(u&&u.mnemonic||t)&&(d=yield(0,a.createDBConn)(e,(null==u?void 0:u.mnemonic)||t,!0));var c=null==(i=d)?void 0:i.createQuery((function(t){return t.selectFrom("item").selectAll().where("chatId","=",e).orderBy("createdAt","desc").limit(n).offset(r)})),f=c&&(yield null==(o=d)?void 0:o.loadQuery(c));return null==f||null==(l=f.rows)?void 0:l.map((function(e){return e.item}))}catch(s){console.error("getPublicMessages error",s)}return[]}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.createNewParty=function(){var e=(0,r.default)((function*(e){console.info("createNewParty",e);var t=yield(0,a.getUserData)(),n=e.id,r=Object.assign({},e,{id:n,authorId:t.id,authorName:t.name,isContact:!0,mnemonic:e.mnemonic||u()});yield(0,a.writeItem)(r);return yield d(n,t.name+" has created chat "+e.name,r.mnemonic,{system:!0}),r}));return function(t){return e.apply(this,arguments)}}(),t.genMnemonic=function(){return[o.faker.animal.bird().split(" ").join("").toLowerCase(),o.faker.animal.bird().split(" ").join("").toLowerCase(),o.faker.color.human().split(" ").join("").toLowerCase(),o.faker.color.human().split(" ").join("").toLowerCase(),o.faker.color.human().split(" ").join("").toLowerCase(),o.faker.animal.fish().split(" ").join("").toLowerCase(),o.faker.animal.fish().split(" ").join("").toLowerCase(),o.faker.animal.fish().split(" ").join("").toLowerCase(),o.faker.animal.insect().split(" ").join("").toLowerCase(),o.faker.hacker.noun().split(" ").join("").toLowerCase(),o.faker.hacker.noun().split(" ").join("").toLowerCase(),o.faker.hacker.noun().split(" ").join("").toLowerCase()].join(" ")})}.apply(t,r))||(e.exports=a)},361507:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(926516),n(499151),n(497111),n(936366),n(714193),n(114390)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.updateSmartServiceUserData=t.uniSwapLink=t.networks=t.networkToContract=t.getUserStorageAddress=t.getStorageAddress=t.getShopServiceAddress=t.getShopService=t.getShopKey=t.getServicePaymentInfo=t.getOrders=t.getOrderById=t.getMyShop=t.getCurrentMetamaskWalletInfo=t.exchangeTokenAddress=t.createSmartService=t.connectToExchangeToken=t.connectToExchangeService=t.connectToExchangeContract=t.checkServiceValid=t.buyServiceSmart=t.buyItemFromShop=t.address0=void 0,r=f(r),a=f(a),i=f(i),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(u);var p=t.exchangeTokenAddress=function(){var e;return b[(null==(e=window.ethereum)?void 0:e.networkVersion)||0]},b=t.networkToContract={80002:"0x8eA0334032c200AeA65Af269d66b0544D06129e4",97:"0x8eA0334032c200AeA65Af269d66b0544D06129e4",137:"0x8eA0334032c200AeA65Af269d66b0544D06129e4",56:"0x8eA0334032c200AeA65Af269d66b0544D06129e4"},y=(t.networks={1:{chainId:"0x1",chainName:"Ethereum Mainnet",nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},rpcUrls:["https://eth.llamarpc.com"],blockExplorerUrls:["https://etherscan.io"]},137:{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-mainnet.infura.io"],blockExplorerUrls:["https://polygonscan.com/"]},324:{chainId:"0x144",chainName:"zkSync Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.era.zksync.io"],blockExplorerUrls:["https://era.zksync.network/"]},56:{chainId:"0x38",chainName:"BNB Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:["https://bsc-dataseed.binance.org/"],blockExplorerUrls:["https://bscscan.com"]},97:{chainId:"0x61",chainName:"BNB Smart Chain Testnet",nativeCurrency:{name:"TBNB",symbol:"TBNB",decimals:18},rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545/"],blockExplorerUrls:["https://testnet.bscscan.com"]},80002:{chainId:"0x13882",chainName:"Polygon Amoy Testnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://rpc-amoy.polygon.technology"],blockExplorerUrls:["https://www.oklink.com/amoy"]}},t.address0="0x0000000000000000000000000000000000000000"),m=(t.uniSwapLink="https://app.uniswap.org/swap?theme=dark&inputCurrency=0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359&outputCurrency=0xD75dc076cDB0E692214371924B6640c545F688C6&chain=polygon",t.connectToExchangeToken=function(){var e=(0,a.default)((function*(){return new u.Contract(p(),d.ExchangeToken__factory.abi,yield(0,l.signer)())}));return function(){return e.apply(this,arguments)}}()),v=(t.getStorageAddress=function(){var e=(0,a.default)((function*(){var e=yield m();return yield e.categories("storage",0)}));return function(){return e.apply(this,arguments)}}(),t.getServicePaymentInfo=function(){var e=(0,a.default)((function*(e){var t=yield h(e),n=yield t.wp(),r=yield(0,l.signer)(),a=new u.Contract(n,d.ERC20__factory.abi,r),i=u.toBigInt(10)**(yield a.decimals()),o=yield t.defaultPrice(),c=u.toNumber(yield t.requiresSubs()),f=u.toNumber(o/i);return{coinName:yield a.symbol(),coinAddress:n,subInterval:c,value:f}}));return function(t){return e.apply(this,arguments)}}(),t.getShopServiceAddress=function(){var e=(0,a.default)((function*(){var e=yield m();return yield e.categories("market",0)}));return function(){return e.apply(this,arguments)}}()),g=(t.getUserStorageAddress=function(){var e=(0,a.default)((function*(){var e=yield m(),t=yield e.categories("storage",0),n=yield h(t);return yield n.userContracts((yield(0,l.signer)()).address)}));return function(){return e.apply(this,arguments)}}(),t.getCurrentMetamaskWalletInfo=function(){var e=(0,a.default)((function*(){var e=yield m(),t=yield(0,l.signer)(),n=yield e.balanceOf(t.address),r=u.toBigInt(10)**(yield e.decimals());return{wallet:t,excdBalance:u.toNumber(n/r)}}));return function(){return e.apply(this,arguments)}}(),t.connectToExchangeContract=function(){var e=(0,a.default)((function*(e){return new u.Contract(e,d.ExchangeContract__factory.abi,yield(0,l.signer)())}));return function(t){return e.apply(this,arguments)}}()),h=t.connectToExchangeService=function(){var e=(0,a.default)((function*(e){return new u.Contract(e,d.ExchangeService__factory.abi,yield(0,l.signer)())}));return function(t){return e.apply(this,arguments)}}(),w=(t.buyItemFromShop=function(){var e=(0,a.default)((function*(e,t){var n,r=yield h(e),a=yield r.wp(),i=yield null==(n=yield(yield r.createBuyItemsContract(t,1,e)).wait(1))?void 0:n.contractAddress,o=yield g(i),d=yield(0,l.sendCoin)(a,i,t);yield o.confirmPurchase();return d}));return function(t,n){return e.apply(this,arguments)}}(),t.checkServiceValid=function(){var e=(0,a.default)((function*(e){try{var t=yield h(e),n=yield t.userContracts((yield(0,l.signer)()).address);return yield t.validateSubscription(n)}catch(r){return!1}}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,a.default)((function*(e,t,n){var r=yield(0,l.signer)(),a=yield m();yield(yield a.createServiceUserContract(n,yield e.wp(),1,yield e.provider(),r.address,0,!1,yield e.requiresSubs(),t,t)).wait(1);var i=yield e.userContracts(r.address);return{contract:yield h(i),contractAddress:i}}));return function(t,n,r){return e.apply(this,arguments)}}()),P=(t.buyServiceSmart=function(){var e=(0,a.default)((function*(e){try{var t=yield h(e),n=yield t.wp(),r=yield(0,l.signer)(),a=new u.Contract(n,l.erc20abi,r),i=yield t.defaultPrice(),o=yield t.requiresSubs(),d=parseInt(u.formatUnits(i,yield a.decimals()),10),c=(new u.AbiCoder).encode(["string"],[JSON.stringify({})]),f=yield t.userContracts(r.address);if(console.info("prevContractAddress",f,r.address),f===y){console.info("previous contract is address zero");var s=yield w(t,e,d),p=s.contract,b=s.contractAddress;yield(0,l.sendCoin)(n,b,i),yield(yield p.activateService(c)).wait(1)}else{var m=yield h(f),v=yield m.defaultPrice(),g=yield m.requiresSubs();if(console.info(v,i,d,g,o),v!==i||g!==o){var P=yield w(t,e,d),E=P.contract,I=P.contractAddress;return yield(0,l.sendCoin)(n,I,i),void(yield(yield E.activateService(c)).wait(1))}(yield m.balanceOfContract())>=i||(yield(0,l.sendCoin)(n,f,i)),yield(yield m.activateService(c)).wait(1)}}catch(S){console.error("buyservicesmart error",S)}}));return function(t){return e.apply(this,arguments)}}(),t.getShopService=function(){var e=(0,a.default)((function*(){var e=yield(0,l.signer)(),t=yield h(yield v()),n=yield t.userContracts(e.address);return{market:t,subContract:n,sig:e}}));return function(){return e.apply(this,arguments)}}()),E=t.getMyShop=function(){var e=(0,a.default)((function*(e){var t=yield h(e);return yield t.services(0)}));return function(t){return e.apply(this,arguments)}}(),I=(t.createSmartService=function(){var e=(0,a.default)((function*(e){var t=yield m(),n=yield P(),r=n.sig,i=n.subContract;try{var o=yield E(i);if(console.info("existing",o),o)return{contract:yield h(o),contractAddress:o}}catch(d){console.error(d)}var l=function(){var n=(0,a.default)((function*(){yield(yield t.createServiceUserContract(1,e.coin,1,r.address,e.operator,parseInt(e.ratings),!1,parseInt(e.subsPrice),e.category,i)).wait(1);var n=yield E(i);return{contract:yield h(n),contractAddress:n}}));return function(){return n.apply(this,arguments)}}();return yield l()}));return function(t){return e.apply(this,arguments)}}(),t.getShopKey=function(){var e=(0,a.default)((function*(){var e=yield(0,o.findBy)("folderId","shop_keys3"),t=(0,r.default)(e,1)[0];t&&t.keyPair||(t={id:i.default.v4().toString(),keyPair:yield(0,c.generateNewKeyPair)(),folderId:"shop_keys3",isKeyPair:!0},yield(0,o.writeItem)(t));return t}));return function(){return e.apply(this,arguments)}}()),S=(t.updateSmartServiceUserData=function(){var e=(0,a.default)((function*(e,t,n,r,a){console.info("shopproducts",t);var i=yield h(e),o=new u.AbiCoder,l={shopProducts:t,ordersPubKey:(yield I()).keyPair.publicKey,shopName:n,shopLogo:r};a&&(l=yield(0,c.encryptWithPassword)(a,JSON.stringify(l))),console.info("shopParams",l);var d=o.encode(["string"],[JSON.stringify(l)]);return yield(yield i.changeUserData(d)).wait(1)}));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),{0:"Created",1:"Locked",2:"Delivered",3:"Release",4:"Inactive"});t.getOrders=function(){var e=(0,a.default)((function*(e){var t=new u.AbiCoder,n=yield h(e),r=yield n.getContracts();console.info(r);var i=yield Promise.all(r.map(function(){var e=(0,a.default)((function*(e){var n={},r={};try{var a=yield g(e),i=u.formatUnits(yield a.state(),0),o=u.formatUnits(yield a.price(),yield a.decimals());try{r=JSON.parse(t.decode(["string"],yield a.buyerData())[0])}catch(l){console.error(l)}return{id:e,state:S[i],price:o,userData:n,contract:a,encData:r,rating:yield a.rating()}}catch(l){return console.error("mapping err",l),{id:e,userData:n,encData:r}}}));return function(t){return e.apply(this,arguments)}}()));return console.info(i),i.reverse()}));return function(t){return e.apply(this,arguments)}}(),t.getOrderById=function(){var e=(0,a.default)((function*(e){var t=new u.AbiCoder,n=(yield I()).keyPair.privateKey,r=yield g(e),a=parseInt(u.formatUnits(yield r.state(),0),10),i=u.formatUnits(yield r.price(),yield r.decimals()),o={},l=JSON.parse(t.decode(["string"],yield r.buyerData())[0]);try{var d=yield(0,c.decryptAesKey)(l.encKey,n),f=l.payload,s=f.encryptedPayload,p=f.iv;o=JSON.parse(yield(0,c.decryptPayload)(d,s,p))}catch(b){console.error(b)}return{id:e,state:S[a],price:i,userData:o,contract:r,encData:l,rating:yield r.rating()}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},497111:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.erc20abi=t.Prices=void 0,t.getTransactionById=function(e){return m.apply(this,arguments)},t.provider=t.maticId=void 0,t.requestAccounts=function(){return y.apply(this,arguments)},t.sendCoin=function(e,t,n){return b.apply(this,arguments)},t.sendMatic=function(e,t,n,r){return s.apply(this,arguments)},t.signer=void 0,t.switchNet=u,r=o(r),a=o(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i);var d=t.maticId="0x89";t.Prices={Cloud:{1:20,12:400},Kiosk:{1:20,12:400},WalletProtection:{1:10,12:400}};function u(e){return c.apply(this,arguments)}function c(){return(c=(0,r.default)((function*(e){void 0===e&&(e=""+d),yield window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e}]})}))).apply(this,arguments)}var f=t.provider={getSigner:function(){return{}}};!function(){try{t.provider=f=new i.BrowserProvider(window.ethereum)}catch(e){console.error("web3 error")}}();t.signer=function(){return f.getSigner()};function s(){return(s=(0,r.default)((function*(e,t,n,r){var a;void 0===r&&(r={}),yield u();var o={from:e,to:t,value:i.parseEther(n.toString()).toString(16),data:(new i.AbiCoder).encode(["string"],[JSON.stringify(r)]),gasLimit:"0x76c0",gasPrice:null==(a=(yield f.getFeeData()).gasPrice)?void 0:a.toString(16)};console.info("txparams",o);var l=yield window.ethereum.request({method:"eth_sendTransaction",params:[o]});return console.info("new transaction",l),l}))).apply(this,arguments)}var p=t.erc20abi=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function transfer(address to, uint amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint amount)"];function b(){return(b=(0,r.default)((function*(e,t,n){var r=new i.Contract(e,p,yield f.getSigner());return console.info(n),(yield(yield r.transfer(t,n)).wait(1)).hash}))).apply(this,arguments)}function y(){return(y=(0,r.default)((function*(){return yield window.ethereum.request({method:"eth_requestAccounts"})}))).apply(this,arguments)}function m(){return(m=(0,r.default)((function*(e){var t=yield f.getTransaction(e);return t&&(t.block=yield t.getBlock(),t.receipt=yield f.getTransactionReceipt(e)),t}))).apply(this,arguments)}}.apply(t,r))||(e.exports=a)},820035:(e,t,n)=>{var r,a;r=[t,n(29293)],void 0===(a=function(e,r){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.pinFileToIPFS=void 0,r=a(r);t.pinFileToIPFS=function(){var e=(0,r.default)((function*(e){var t=new FormData;t.append("file",e);var n=JSON.stringify({name:"File name"});t.append("pinataMetadata",n);var r=JSON.stringify({cidVersion:0});t.append("pinataOptions",r)}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},623318:(e,t,n)=>{var r,a;r=[t,n(29293),n(361507),n(114390)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.decryptPayloadD=void 0,r=o(r);t.decryptPayloadD=function(){var e=(0,r.default)((function*(e){var t=(yield(0,a.getShopKey)()).keyPair.privateKey;try{console.info("encData",e);var n=yield(0,i.decryptAesKey)(e.encKey,t),r=e.payload,o=r.encryptedPayload,l=r.iv;return JSON.parse(yield(0,i.decryptPayload)(n,o,l))}catch(d){console.error(d)}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},114390:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(932779)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createChunks=void 0,t.decryptAesKey=function(e,t){return w.apply(this,arguments)},t.decryptPayload=function(e,t,n){return P.apply(this,arguments)},t.encryptAesKey=function(e,t){return E.apply(this,arguments)},t.encryptPayload=function(e,t){return I.apply(this,arguments)},t.encryptPayloadRaw=function(e,t){return S.apply(this,arguments)},t.encryptWithPassword=function(e,t){return D.apply(this,arguments)},t.generateAesKey=function(){return h.apply(this,arguments)},t.generateNewKeyPair=function(e){return b.apply(this,arguments)},t.generateNewPSSPair=function(e){return y.apply(this,arguments)},t.getHexFromArrayBuffer=m,t.getHexFromFile=function(e){return v.apply(this,arguments)},t.getKeyMaterial=T,t.hashData=function(e,t){return O.apply(this,arguments)},t.hexToArrayBuffer=g,t.maxSize=void 0,t.signData=function(e,t){return M.apply(this,arguments)},t.verifySignature=function(e,t,n){return _.apply(this,arguments)},r=o(r),a=o(a),i=o(i);var l={name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},d={name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},u={name:"RSA-OAEP"},c={name:"AES-GCM",length:256},f={name:"AES-GCM"},s={name:"RSA-PSS",saltLength:32},p=t.maxSize=10485760;function b(){return(b=(0,a.default)((function*(e){var t=yield window.crypto.subtle.generateKey(l,!0,["encrypt","decrypt"]);return{publicKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.publicKey)),privateKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.privateKey))}}))).apply(this,arguments)}function y(){return(y=(0,a.default)((function*(e){var t=yield window.crypto.subtle.generateKey(d,!0,["sign","verify"]);return{publicKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.publicKey)),privateKey:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",t.privateKey))}}))).apply(this,arguments)}function m(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function v(){return(v=(0,a.default)((function*(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){for(var e=new Uint8Array(this.result),n=new Array(e.length),r=e.length;r--;)n[r]=(e[r]<16?"0":"")+e[r].toString(16);e=null,t(n.join(""))})),n.readAsArrayBuffer(e)}))}))).apply(this,arguments)}function g(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)})))}function h(){return(h=(0,a.default)((function*(){var e=yield window.crypto.subtle.generateKey(c,!0,["encrypt","decrypt"]);return{kp:JSON.stringify(yield window.crypto.subtle.exportKey("jwk",e)),key:e}}))).apply(this,arguments)}function w(){return(w=(0,a.default)((function*(e,t){try{var n=yield window.crypto.subtle.importKey("jwk",t,l,!0,["decrypt"]),r=g(e),a=yield window.crypto.subtle.decrypt(u,n,r);console.info("decryptedKey",a);var i=new TextDecoder,o=JSON.parse(i.decode(a,{}));return console.info("textdecoder decode",o),yield window.crypto.subtle.importKey("jwk",o,c,!0,["encrypt","decrypt"])}catch(d){throw console.error("decryptkey error",d),d}}))).apply(this,arguments)}function P(){return(P=(0,a.default)((function*(e,t,n){var r=g(n),a=g(t),i=yield window.crypto.subtle.decrypt(Object.assign({},f,{iv:r}),e,a);return(new TextDecoder).decode(i)}))).apply(this,arguments)}function E(){return(E=(0,a.default)((function*(e,t){var n=yield window.crypto.subtle.importKey("jwk",t,l,!0,["encrypt"]),r=(new TextEncoder).encode(e);return m(yield window.crypto.subtle.encrypt(u,n,r))}))).apply(this,arguments)}function I(){return(I=(0,a.default)((function*(e,t){try{var n=(new TextEncoder).encode(t),r=window.crypto.getRandomValues(new Uint8Array(12)),a=yield window.crypto.subtle.encrypt(Object.assign({},f,{iv:r}),e,n);return{encryptedPayload:m(a),buffer:a,iv:m(r.buffer)}}catch(i){throw console.error("encrypt payload err",i),i}}))).apply(this,arguments)}function S(){return(S=(0,a.default)((function*(e,t){try{var n=window.crypto.getRandomValues(new Uint8Array(12)),r=yield window.crypto.subtle.encrypt(Object.assign({},f,{iv:n}),e,t);return{encryptedPayload:m(r),buffer:r,iv:m(n.buffer)}}catch(a){throw console.error("encrypt payload err",a),a}}))).apply(this,arguments)}function O(){return O=(0,a.default)((function*(e,t){void 0===e&&(e="SHA-256");var n=(new TextEncoder).encode(t);return m(yield window.crypto.subtle.digest(e,n))})),O.apply(this,arguments)}function _(){return(_=(0,a.default)((function*(e,t,n){console.info("verify with key",e);var r=yield window.crypto.subtle.importKey("jwk",e,d,!0,["verify"]),a=(new TextEncoder).encode(n),i=g(t);return yield window.crypto.subtle.verify(s,r,i,a)}))).apply(this,arguments)}function M(){return(M=(0,a.default)((function*(e,t){var n=yield window.crypto.subtle.importKey("jwk",e,d,!0,["sign"]),r=(new TextEncoder).encode(t);return m(yield window.crypto.subtle.sign(s,n,r))}))).apply(this,arguments)}function T(e){var t=new TextEncoder;return window.crypto.subtle.importKey("raw",t.encode(e),"PBKDF2",!1,["deriveBits","deriveKey"])}t.createChunks=function(e){for(var t=p,n=0,r=e.size,a=[];n<r;){var i=n+t;a.push(e.slice(n,i)),n=i}return console.info("total chunks: "+a.length+" for file "+e.name),a};function D(){return(D=(0,a.default)((function*(e,t){var n=yield T(e),r=window.crypto.getRandomValues(new Uint8Array(12)),a=window.crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder,o=(new TextDecoder,yield window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]));return{encrypted:m(yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,i.encode(t))),iv:m(r),salt:m(a)}}))).apply(this,arguments)}}.apply(t,r))||(e.exports=a)},379961:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.AccessControl__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];(t.AccessControl__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},24556:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IAccessControl__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"}];(t.IAccessControl__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},294542:(e,t,n)=>{var r,a;r=[t,n(379961),n(24556)],void 0===(a=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AccessControl__factory",{enumerable:!0,get:function(){return t.AccessControl__factory}}),Object.defineProperty(e,"IAccessControl__factory",{enumerable:!0,get:function(){return n.IAccessControl__factory}})}.apply(t,r))||(e.exports=a)},244959:(e,t,n)=>{var r,a;r=[t,n(294542),n(795776),n(828469),n(65565)],void 0===(a=function(e,n,r,a,i){"use strict";function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.utils=t.token=t.interfaces=t.access=void 0,n=l(n),t.access=n,r=l(r),t.interfaces=r,a=l(a),t.token=a,i=l(i),t.utils=i}.apply(t,r))||(e.exports=a)},362106:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC1155Errors__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"}];(t.IERC1155Errors__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},902012:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC20Errors__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"}];(t.IERC20Errors__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},242006:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC721Errors__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"}];(t.IERC721Errors__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},790156:(e,t,n)=>{var r,a;r=[t,n(362106),n(902012),n(242006)],void 0===(a=function(e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"IERC1155Errors__factory",{enumerable:!0,get:function(){return t.IERC1155Errors__factory}}),Object.defineProperty(e,"IERC20Errors__factory",{enumerable:!0,get:function(){return n.IERC20Errors__factory}}),Object.defineProperty(e,"IERC721Errors__factory",{enumerable:!0,get:function(){return r.IERC721Errors__factory}})}.apply(t,r))||(e.exports=a)},795776:(e,t,n)=>{var r,a;r=[t,n(790156)],void 0===(a=function(e,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.draftIerc6093Sol=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n),t.draftIerc6093Sol=n}.apply(t,r))||(e.exports=a)},412472:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ERC20__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];(t.ERC20__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},723437:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC20__factory=void 0,r=o(r),a=o(a);var l=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];(t.IERC20__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},434001:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC20Metadata__factory=void 0,r=o(r),a=o(a);var l=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];(t.IERC20Metadata__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},210131:(e,t,n)=>{var r,a;r=[t,n(434001)],void 0===(a=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"IERC20Metadata__factory",{enumerable:!0,get:function(){return t.IERC20Metadata__factory}})}.apply(t,r))||(e.exports=a)},244792:(e,t,n)=>{var r,a;r=[t,n(210131),n(412472),n(723437)],void 0===(a=function(e,n,r,a){"use strict";function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ERC20__factory",{enumerable:!0,get:function(){return r.ERC20__factory}}),Object.defineProperty(e,"IERC20__factory",{enumerable:!0,get:function(){return a.IERC20__factory}}),t.extensions=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n),t.extensions=n}.apply(t,r))||(e.exports=a)},828469:(e,t,n)=>{var r,a;r=[t,n(244792)],void 0===(a=function(e,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.erc20=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n),t.erc20=n}.apply(t,r))||(e.exports=a)},65565:(e,t,n)=>{var r,a;r=[t,n(840821)],void 0===(a=function(e,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.introspection=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n),t.introspection=n}.apply(t,r))||(e.exports=a)},497575:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ERC165__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];(t.ERC165__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},615966:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(714193)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.IERC165__factory=void 0,r=o(r),a=o(a);var l=[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}];(t.IERC165__factory=(0,a.default)((function e(){(0,r.default)(this,e)}),null,[{key:"createInterface",value:function(){return new i.Interface(l)}},{key:"connect",value:function(e,t){return new i.Contract(e,l,t)}}])).abi=l}.apply(t,r))||(e.exports=a)},840821:(e,t,n)=>{var r,a;r=[t,n(497575),n(615966)],void 0===(a=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ERC165__factory",{enumerable:!0,get:function(){return t.ERC165__factory}}),Object.defineProperty(e,"IERC165__factory",{enumerable:!0,get:function(){return n.IERC165__factory}})}.apply(t,r))||(e.exports=a)},166943:(e,t,n)=>{var r,a;r=[t,n(244959)],void 0===(a=function(e,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.contracts=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n),t.contracts=n}.apply(t,r))||(e.exports=a)},681170:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(512475),n(728452),n(432395),n(863072),n(829511),n(714193)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e,t,n){return t=(0,d.default)(t),(0,o.default)(e,p()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}Object.defineProperty(e,"__esModule",{value:!0}),t.ExchangeContract__factory=void 0,r=f(r),a=f(a),i=f(i),o=f(o),l=f(l),d=f(d),u=f(u);var b=[{inputs:[{internalType:"address",name:"exchange_",type:"address"},{internalType:"address",name:"underlyingToken",type:"address"},{internalType:"uint256",name:"exchangeComission",type:"uint256"},{internalType:"uint256",name:"exchangeLockTime",type:"uint256"},{internalType:"uint256",name:"contractValue",type:"uint256"},{internalType:"uint256",name:"burnValue",type:"uint256"},{internalType:"address",name:"buyerAccount",type:"address"},{internalType:"address",name:"payoutAddress_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidState",type:"error"},{inputs:[],name:"OnlyBuyer",type:"error"},{inputs:[],name:"OnlySeller",type:"error"},{inputs:[],name:"_exchange",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_underlying",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyer",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyerData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"cancelPurchase",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"comission",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"confirmDelivery",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"confirmPurchase",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"confirmReceived",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"createdAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"deliveryData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchange_comission",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"paySeller",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"payout",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"payoutAddress",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"percent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"buyerRating",type:"uint256"}],name:"rateSeller",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rating",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"shopUpdated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"state",outputs:[{internalType:"enum ExchangeContract.State",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"wp",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],y="0x60c0604052600c805461ffff60a01b191690556000600d5534801561002357600080fd5b506040516117003803806117008339810160408190526100429161011e565b6001600160a01b03808916608052871660a0819052600980546001600160a01b0319169091179055600486905560058590554260065560008490556100886064856101b1565b6001819055600454610099916101d3565b60028190556000546100ab91906101f0565b600355600892909255600c80546001600160a81b0319166001600160a01b0393841617600160a01b17905560078054919092166001600160a01b03199091161790555050600e805460ff1916905550610203915050565b80516001600160a01b038116811461011957600080fd5b919050565b600080600080600080600080610100898b03121561013b57600080fd5b61014489610102565b975061015260208a01610102565b60408a015160608b015160808c015160a08d0151939a5091985096509450925061017e60c08a01610102565b915061018c60e08a01610102565b90509295985092959890939650565b634e487b7160e01b600052601160045260246000fd5b6000826101ce57634e487b7160e01b600052601260045260246000fd5b500490565b80820281158282048414176101ea576101ea61019b565b92915050565b818103818111156101ea576101ea61019b565b60805160a0516114ae610252600039600081816102b10152818161038a01528181610f110152818161100b01526110c00152600081816103260152818161059e0152610f9801526114ae6000f3fe608060405234801561001057600080fd5b50600436106101ae5760003560e01c80639e01ff2e116100ee578063a6abf16a11610097578063c19d93fb11610071578063c19d93fb14610348578063cf09e0d014610362578063d17c2b541461036b578063e6c7c4561461037e57600080fd5b8063a6abf16a146102f5578063ab460a2614610319578063b9780f331461032157600080fd5b8063a0c97bce116100c8578063a0c97bce146102dc578063a166fdb7146102e4578063a3f8a30a146102ed57600080fd5b80639e01ff2e146102995780639e573665146102ac578063a035b1fe146102d357600080fd5b806363bd1d4a1161015b5780637150d8ae116101355780637150d8ae1461026c57806373f425611461027f57806373fac6f01461028857806380f474f61461029057600080fd5b806363bd1d4a146102455780636d534a141461024e57806370ba11131461026357600080fd5b80635b8d02d71161018c5780635b8d02d7146101f2578063618260451461021d578063623bf83d1461023257600080fd5b80630d668087146101b3578063313ce567146101cf5780633a4b4532146101e9575b600080fd5b6101bc60055481565b6040519081526020015b60405180910390f35b6101d7610386565b60405160ff90911681526020016101c6565b6101bc60025481565b600c54610205906001600160a01b031681565b6040516001600160a01b0390911681526020016101c6565b61023061022b36600461114d565b610411565b005b600954610205906001600160a01b031681565b6101bc60035481565b610256610607565b6040516101c69190611206565b6101bc60015481565b600754610205906001600160a01b031681565b6101bc60085481565b610230610695565b6101bc600d5481565b6102306102a736600461114d565b610710565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b6101bc60005481565b6102306108a8565b6101bc60045481565b610256610ae5565b600c5461030990600160a81b900460ff1681565b60405190151581526020016101c6565b610230610af2565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b600e546103559060ff1681565b6040516101c6919061126a565b6101bc60065481565b610230610379366004611292565b610c96565b6101bc610ed6565b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015610402575060408051601f3d908101601f191682019092526103ff918101906112ab565b60015b61040c5750600090565b919050565b600080600e5460ff16600481111561042b5761042b611254565b146104495760405163baf3f0f760e01b815260040160405180910390fd5b6007546001600160a01b03163314610474576040516386efbb5560e01b815260040160405180910390fd5b6000306001600160a01b031663e6c7c4566040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d891906112d5565b905060005481146105565760405162461bcd60e51b815260206004820152602260248201527f506c656173652073656e6420696e2074686520707572636861736520616d6f7560448201527f6e7400000000000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b600e805460ff19166001179055600b61056f8482611376565b506040517f4791abe10000000000000000000000000000000000000000000000000000000081523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690634791abe190602401600060405180830381600087803b1580156105ea57600080fd5b505af11580156105fe573d6000803e3d6000fd5b50505050505050565b600b8054610614906112ee565b80601f0160208091040260200160405190810160405280929190818152602001828054610640906112ee565b801561068d5780601f106106625761010080835404028352916020019161068d565b820191906000526020600020905b81548152906001019060200180831161067057829003601f168201915b505050505081565b6007546001600160a01b031633146106c0576040516386efbb5560e01b815260040160405180910390fd5b600280600e5460ff1660048111156106da576106da611254565b146106f85760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff1916600417905561070d610f82565b50565b600180600e5460ff16600481111561072a5761072a611254565b146107485760405163baf3f0f760e01b815260040160405180910390fd5b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa15801561079b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107bf91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610819573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061083d9190611435565b6108895760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600e805460ff19166002179055600a6108a28482611376565b50505050565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa1580156108fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091f91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610979573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061099d9190611435565b6109e95760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600280600e5460ff166004811115610a0357610a03611254565b14610a215760405163baf3f0f760e01b815260040160405180910390fd5b600554600654610a319190611457565b421015610acc5760405162461bcd60e51b815260206004820152605260248201527f506c65617365207761697420756e74696c20746865206d6f6e6579206973207260448201527f656c65617365642066726f6d206465706f736974206f7220746865206275796560648201527f7220636f6e6669726d7320726563656976650000000000000000000000000000608482015260a40161054d565b600e805460ff19166004179055610ae1610f82565b5050565b600a8054610614906112ee565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa158015610b45573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b6991906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610bc3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610be79190611435565b610c335760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600180600e5460ff166004811115610c4d57610c4d611254565b14610c6b5760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff19166004179055600754600054610c91916001600160a01b031690610fd3565b505050565b600480600e5460ff166004811115610cb057610cb0611254565b14610cce5760405163baf3f0f760e01b815260040160405180910390fd5b600c54600160a81b900460ff161580610ce75750600d54155b610d335760405162461bcd60e51b815260206004820152601560248201527f526174696e6720697320616c7265616479207365740000000000000000000000604482015260640161054d565b600c546001600160a01b03168215801590610db95750806001600160a01b031663374558126040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d87573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dab91906112d5565b610db6906001611457565b83105b610e2b5760405162461bcd60e51b815260206004820152603160248201527f526174696e672073697a652073686f756c64206265207365742062792074686560448201527f20736572766963652070726f7669646572000000000000000000000000000000606482015260840161054d565b600d8390556040517fbfcd0fc5000000000000000000000000000000000000000000000000000000008152600481018490526001600160a01b0382169063bfcd0fc590602401600060405180830381600087803b158015610e8b57600080fd5b505af1158015610e9f573d6000803e3d6000fd5b5050600c80547fffffffffffffffffffff00ffffffffffffffffffffffffffffffffffffffffff16600160a81b1790555050505050565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815230600482015260009081906001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a0823190602401602060405180830381865afa158015610f58573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f7c91906112d5565b92915050565b600e805460ff19166004179055600254610fbd907f000000000000000000000000000000000000000000000000000000000000000090610fd3565b50600c5460035461070d916001600160a01b0316905b6040517f095ea7b3000000000000000000000000000000000000000000000000000000008152306004820152602481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063095ea7b3906044016020604051808303816000875af115801561105c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110809190611435565b506040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b038481166004830152602482018490527f0000000000000000000000000000000000000000000000000000000000000000169063a9059cbb906044016020604051808303816000875af1158015611109573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061112d9190611435565b5060019392505050565b634e487b7160e01b600052604160045260246000fd5b60006020828403121561115f57600080fd5b813567ffffffffffffffff81111561117657600080fd5b8201601f8101841361118757600080fd5b803567ffffffffffffffff8111156111a1576111a1611137565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156111d0576111d0611137565b6040528181528282016020018610156111e857600080fd5b81602084016020830137600091810160200191909152949350505050565b602081526000825180602084015260005b818110156112345760208186018101516040868401015201611217565b506000604082850101526040601f19601f83011684010191505092915050565b634e487b7160e01b600052602160045260246000fd5b602081016005831061128c57634e487b7160e01b600052602160045260246000fd5b91905290565b6000602082840312156112a457600080fd5b5035919050565b6000602082840312156112bd57600080fd5b815160ff811681146112ce57600080fd5b9392505050565b6000602082840312156112e757600080fd5b5051919050565b600181811c9082168061130257607f821691505b60208210810361132257634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610c9157806000526020600020601f840160051c8101602085101561134f5750805b601f840160051c820191505b8181101561136f576000815560010161135b565b5050505050565b815167ffffffffffffffff81111561139057611390611137565b6113a48161139e84546112ee565b84611328565b6020601f8211600181146113d857600083156113c05750848201515b600019600385901b1c1916600184901b17845561136f565b600084815260208120601f198516915b8281101561140857878501518255602094850194600190920191016113e8565b50848210156114265786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b60006020828403121561144757600080fd5b815180151581146112ce57600080fd5b80820180821115610f7c57634e487b7160e01b600052601160045260246000fdfea26469706673582212201d40811dc8e4d28c088ead892b195cff48ed0e68b8e953c3d79db3581be13f6764736f6c634300081a0033",m=t.ExchangeContract__factory=function(e){function t(){var e;(0,r.default)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=a.length>1?s(this,t,[].concat(a)):s(this,t,[b,y,a[0]]),(0,i.default)(e)}return(0,u.default)(t,e),(0,a.default)(t,[{key:"getDeployTransaction",value:function(e,n,r,a,i,o,u,c,f){return(0,l.default)((0,d.default)(t.prototype),"getDeployTransaction",this).call(this,e,n,r,a,i,o,u,c,f||{})}},{key:"deploy",value:function(e,n,r,a,i,o,u,c,f){return(0,l.default)((0,d.default)(t.prototype),"deploy",this).call(this,e,n,r,a,i,o,u,c,f||{})}},{key:"connect",value:function(e){return(0,l.default)((0,d.default)(t.prototype),"connect",this).call(this,e)}}],[{key:"createInterface",value:function(){return new c.Interface(b)}},{key:"connect",value:function(e,t){return new c.Contract(e,b,t)}}])}(c.ContractFactory);m.bytecode=y,m.abi=b}.apply(t,r))||(e.exports=a)},368567:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(512475),n(728452),n(432395),n(863072),n(829511),n(714193)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e,t,n){return t=(0,d.default)(t),(0,o.default)(e,p()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}Object.defineProperty(e,"__esModule",{value:!0}),t.ExchangeService__factory=void 0,r=f(r),a=f(a),i=f(i),o=f(o),l=f(l),d=f(d),u=f(u);var b=[{inputs:[{internalType:"address",name:"exchange_",type:"address"},{internalType:"address",name:"underlyingToken",type:"address"},{internalType:"address",name:"userAccount",type:"address"},{internalType:"uint256",name:"basePrice",type:"uint256"},{internalType:"address",name:"serviceProvider",type:"address"},{internalType:"uint256",name:"commission",type:"uint256"},{internalType:"address",name:"operator_",type:"address"},{internalType:"uint256",name:"ratingsEnabled_",type:"uint256"},{internalType:"bool",name:"requirePayment_",type:"bool"},{internalType:"uint256",name:"requireSubs_",type:"uint256"},{internalType:"address",name:"originalContract_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"contractAddress",type:"address"}],name:"UserRegistered",type:"event"},{inputs:[],name:"CASHIER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"CONTENT_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DELIVERY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"_exchange",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_underlying",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"activateService",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"autoStakingPercent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"buyerOrders",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"underlyingToken",type:"address"}],name:"changeUnderlying",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"changeUserData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"contracts",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"contractValue",type:"uint256"},{internalType:"uint256",name:"contractDivider",type:"uint256"},{internalType:"address",name:"paymentContract",type:"address"}],name:"createBuyItemsContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"createdAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getContracts",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRatings",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getServices",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastPaymentData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastPaymentDate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"originalContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"provider",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ratings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"ratingsDone",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"ratingsEnabled",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractUser",type:"address"},{internalType:"address",name:"serviceAddress",type:"address"}],name:"registerUserService",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"payout",type:"uint256"},{internalType:"address",name:"payoutAddress",type:"address"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"requiresPayment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"requiresSubs",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"services",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"requiresPayment_",type:"bool"},{internalType:"uint256",name:"requiresSubs_",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],name:"updatePaymentSystem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newRating",type:"uint256"}],name:"updateRatingConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"rating",type:"uint256"}],name:"updateRatings",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"user",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userContracts",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"userData",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"paymentContract",type:"address"}],name:"validateSubscription",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"wp",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],y="0x6080604052600060118190556012805460ff1916905560135534801561002457600080fd5b506040516143e23803806143e28339810160408190526100439161028c565b600180546001600160a01b03199081166001600160a01b038e8116919091179092556003805482168d8416908117909155600580548316909117905560068a90556004805482168c84161790556009805482168a8416179055600b8890556000600c819055600f8054831689851617905560118790556012805460ff19168715151790556013859055601480549092169284169290921790556100e690886101c4565b506101117fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe886101c4565b5061012a6000805160206143c2833981519152886101c4565b506101557f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01886101c4565b50600f5461017b906000805160206143c2833981519152906001600160a01b03166101c4565b50600f546101b3907f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01906001600160a01b03166101c4565b505050505050505050505050610347565b6000828152602081815260408083206001600160a01b038516845290915281205460ff16610266576000838152602081815260408083206001600160a01b03861684529091529020805460ff1916600117905561021e3390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a450600161026a565b5060005b92915050565b80516001600160a01b038116811461028757600080fd5b919050565b60008060008060008060008060008060006101608c8e0312156102ae57600080fd5b6102b78c610270565b9a506102c560208d01610270565b99506102d360408d01610270565b60608d015190995097506102e960808d01610270565b60a08d015190975095506102ff60c08d01610270565b60e08d01516101008e01519196509450801515811461031d57600080fd5b6101208d015190935091506103356101408d01610270565b90509295989b509295989b9093969950565b61406c806103566000396000f3fe608060405234801561001057600080fd5b50600436106103155760003560e01c806375417851116101a7578063b9780f33116100ee578063cf09e0d011610097578063e69e04b311610071578063e69e04b3146106fb578063e6c7c45614610704578063f6df28d01461070c57600080fd5b8063cf09e0d0146106cc578063d547741f146106d5578063e2c345e2146106e857600080fd5b8063bfcd0fc5116100c8578063bfcd0fc51461069e578063c22c4f43146106b1578063c3a2a93a146106c457600080fd5b8063b9780f331461065c578063be07dd561461066f578063bea6998f1461069657600080fd5b80639e57366511610150578063a326d9b71161012a578063a326d9b714610619578063b4f8570414610622578063b7fd96841461063557600080fd5b80639e573665146105eb5780639fe7947b146105fe578063a217fddf1461061157600080fd5b80638cbdd6bd116101815780638cbdd6bd1461059657806391d14854146105ab5780639bd3ba4e146105e257600080fd5b8063754178511461056b5780637aeabb39146105805780637ea0f6cb1461058957600080fd5b8063374558121161026b5780635c71c0df116102145780635ed185ef116101ee5780635ed185ef14610522578063623bf83d146105355780636bb2cd231461054857600080fd5b80635c71c0df146104d35780635d30e84d146104fc5780635e0a02ef1461050f57600080fd5b80634e52126e116102455780634e52126e1461049a5780634f8632ba146104ad578063570ca735146104c057600080fd5b806337455812146104695780633ab7704d14610472578063474da79a1461048757600080fd5b806316a207fc116102cd5780632f2ff15d116102a75780632f2ff15d14610429578063313ce5671461043c57806336568abe1461045657600080fd5b806316a207fc146103be57806320f0d83a146103f3578063248a9ca31461040657600080fd5b80630687b785116102fe5780630687b78514610357578063085d4883146103985780630f82d3a7146103ab57600080fd5b806301ffc9a71461031a57806305fe138b14610342575b600080fd5b61032d6103283660046122cf565b61071f565b60405190151581526020015b60405180910390f35b61035561035036600461232d565b6107b8565b005b61038061036536600461235d565b6017602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610339565b600954610380906001600160a01b031681565b6103556103b936600461237a565b61084e565b6103e57f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc0181565b604051908152602001610339565b6103556104013660046123a8565b61095d565b6103e56104143660046123a8565b60009081526020819052604090206001015490565b61035561043736600461232d565b61096e565b610444610993565b60405160ff9091168152602001610339565b61035561046436600461232d565b610a08565b6103e560115481565b61047a610a59565b60405161033991906123c1565b6103806104953660046123a8565b610ae7565b61032d6104a836600461235d565b610b11565b600454610380906001600160a01b031681565b600f54610380906001600160a01b031681565b6103806104e136600461235d565b6016602052600090815260409020546001600160a01b031681565b6103e561050a3660046123a8565b610f48565b61035561051d36600461241d565b610f69565b610355610530366004612468565b610f8f565b600554610380906001600160a01b031681565b61032d61055636600461235d565b60156020526000908152604090205460ff1681565b61057361105e565b6040516103399190612521565b6103e560075481565b60125461032d9060ff1681565b61059e6110c0565b604051610339919061256d565b61032d6105b936600461232d565b6000918252602082815260408084206001600160a01b0393909316845291905290205460ff1690565b6103e5600c5481565b600354610380906001600160a01b031681565b61038061060c3660046125a5565b611117565b6103e5600081565b6103e560135481565b610355610630366004612468565b61169c565b6103e57fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe81565b600154610380906001600160a01b031681565b6103e57f9abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6f81565b61047a6116d2565b6103556106ac3660046123a8565b6116df565b6103806106bf3660046123a8565b611e31565b610573611e41565b6103e560025481565b6103556106e336600461232d565b611ece565b601454610380906001600160a01b031681565b6103e560065481565b6103e5611ef3565b61035561071a36600461235d565b611f64565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806107b257507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316145b92915050565b7fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe6107e281611f9c565b826107eb611ef3565b101561083e5760405162461bcd60e51b815260206004820181905260248201527f4e6f7420656e6f75676874206d6f6e657920666f72207769746864726177616c60448201526064015b60405180910390fd5b6108488284611fa6565b50505050565b6001546001600160a01b031633146108a85760405162461bcd60e51b815260206004820152600a60248201527f4f6e6c7920746f6b656e000000000000000000000000000000000000000000006044820152606401610835565b6001600160a01b0382811660009081526017602090815260409182902080546001600160a01b03191693851693909317909255513381527f54db7a5cb4735e1aac1f53db512d3390390bb6637bd30ad4bf9fc98667d9b9b9910160405180910390a1600e80546001810182556000919091527fbb7b4a454dc3493923482f07822329ed19e8244eff582cc204f8554c3620c3fd0180546001600160a01b0319166001600160a01b039290921691909117905550565b600061096881611f9c565b50601155565b60008281526020819052604090206001015461098981611f9c565b610848838361209e565b6003546040805163313ce56760e01b815290516000926001600160a01b03169163313ce5679160048083019260209291908290030181865afa9250505080156109f9575060408051601f3d908101601f191682019092526109f6918101906125de565b60015b610a035750600090565b919050565b6001600160a01b0381163314610a4a576040517f6697b23200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b610a548282612148565b505050565b60088054610a6690612601565b80601f0160208091040260200160405190810160405280929190818152602001828054610a9290612601565b8015610adf5780601f10610ab457610100808354040283529160200191610adf565b820191906000526020600020905b815481529060010190602001808311610ac257829003601f168201915b505050505081565b600d8181548110610af757600080fd5b6000918252602090912001546001600160a01b0316905081565b601254600090829060ff161515600103610f3f576000816001600160a01b0316637aeabb396040518163ffffffff1660e01b8152600401602060405180830381865afa158015610b65573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b89919061263b565b118015610c0c57506001546040805163b9780f3360e01b815290516001600160a01b039283169284169163b9780f339160048083019260209291908290030181865afa158015610bdd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c019190612654565b6001600160a01b0316145b8015610ca75750600554604080517f623bf83d00000000000000000000000000000000000000000000000000000000815290516001600160a01b039283169284169163623bf83d9160048083019260209291908290030181865afa158015610c78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c9c9190612654565b6001600160a01b0316145b8015610d155750600654816001600160a01b031663e69e04b36040518163ffffffff1660e01b8152600401602060405180830381865afa158015610cef573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d13919061263b565b145b8015610db05750600954604080517f085d488300000000000000000000000000000000000000000000000000000000815290516001600160a01b039283169284169163085d48839160048083019260209291908290030181865afa158015610d81573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610da59190612654565b6001600160a01b0316145b8015610e2e5750306001600160a01b0316816001600160a01b031663e2c345e26040518163ffffffff1660e01b8152600401602060405180830381865afa158015610dff573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e239190612654565b6001600160a01b0316145b610e7a5760405162461bcd60e51b815260206004820152601060248201527f5061796d656e74207265717569726564000000000000000000000000000000006044820152606401610835565b60135415610f3f57601354816001600160a01b0316637aeabb396040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ec3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ee7919061263b565b610ef19190612687565b4210610f3f5760405162461bcd60e51b815260206004820152601460248201527f537562736372697074696f6e20657870697265640000000000000000000000006044820152606401610835565b50600192915050565b60108181548110610f5857600080fd5b600091825260209091200154905081565b6000610f7481611f9c565b506012805460ff191693151593909317909255601355600655565b6004546001600160a01b03163314610fe95760405162461bcd60e51b815260206004820152600960248201527f4f6e6c79207573657200000000000000000000000000000000000000000000006044820152606401610835565b600654610ff4611ef3565b10156110425760405162461bcd60e51b815260206004820152601960248201527f596f75206e65656420746f2070617920746865207072696365000000000000006044820152606401610835565b42600755600861105282826126e1565b5061105b6121cb565b50565b6060600e8054806020026020016040519081016040528092919081815260200182805480156110b657602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611098575b5050505050905090565b606060108054806020026020016040519081016040528092919081815260200182805480156110b657602002820191906000526020600020905b8154815260200190600101908083116110fa575050505050905090565b600061112282610b11565b50336000908152601660205260409020546001600160a01b03163081148061115157506001600160a01b038116155b61119d5760405162461bcd60e51b815260206004820152601c60248201527f50726576696f7573206f726465722073686f756c642066696e697368000000006044820152606401610835565b600154604080517f32a30d4c00000000000000000000000000000000000000000000000000000000815290516001600160a01b039092169160009183916332a30d4c916004808201926020929091908290030181865afa158015611205573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611229919061263b565b86836001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015611268573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061128c91906125de565b61129790600a612887565b6112a1908a612896565b6112ab91906128ad565b6112b591906128ad565b6005546040517fe31e2cab0000000000000000000000000000000000000000000000000000000081526001600160a01b039182166004820152919250600091889185169063e31e2cab90602401602060405180830381865afa15801561131f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061134391906125de565b61134e90600a612887565b611358908a612896565b61136291906128ad565b6003546040516370a0823160e01b815233600482015291925082916001600160a01b03909116906370a0823190602401602060405180830381865afa1580156113af573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113d3919061263b565b10156114475760405162461bcd60e51b815260206004820152602960248201527f596f75722062616c616e63652073686f756c642068617665207468652072657160448201527f75697265642073756d00000000000000000000000000000000000000000000006064820152608401610835565b6000836001600160a01b03166339a36ea56040518163ffffffff1660e01b8152600401602060405180830381865afa158015611487573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114ab919061263b565b6040517f7b47ec1a000000000000000000000000000000000000000000000000000000008152600481018590529091506001600160a01b03851690637b47ec1a90602401600060405180830381600087803b15801561150957600080fd5b505af115801561151d573d6000803e3d6000fd5b5050600154600554604080517fbb5bc87f0000000000000000000000000000000000000000000000000000000081529051600095506001600160a01b039384169450918316928692908a169163bb5bc87f9160048083019260209291908290030181865afa158015611593573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115b7919061263b565b868833306040516115c7906122c2565b6001600160a01b039889168152968816602088015260408701959095526060860193909352608085019190915260a0840152831660c083015290911660e082015261010001604051809103906000f080158015611628573d6000803e3d6000fd5b5033600090815260166020526040812080546001600160a01b0384166001600160a01b03199182168117909255600d805460018101825593527fd7b6990105719101dabeb77144f2a3385c8033acd3af97e9423a695e81ad1eb5909201805490921617905596505050505050509392505050565b7f9abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6f6116c681611f9c565b600a610a5483826126e1565b600a8054610a6690612601565b60003390506000816001600160a01b0316637150d8ae6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611724573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117489190612654565b905060115460000361177d576001600160a01b0316600090815260166020526040902080546001600160a01b03191690555050565b3360009081526015602052604090205460ff16156117dd5760405162461bcd60e51b815260206004820152601c60248201527f5468697320726174696e6720697320616c7265616479206164646564000000006044820152606401610835565b6001600160a01b038181166000908152601660205260409020541633146118465760405162461bcd60e51b815260206004820152601b60248201527f427579657220686173206120646966666572656e74206f7264657200000000006044820152606401610835565b33600090815260156020908152604091829020805460ff1916600190811790915554825163b9780f3360e01b815292516001600160a01b03918216939186169263b9780f3392600480820193918290030181865afa1580156118ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118d09190612654565b6001600160a01b03161461194c5760405162461bcd60e51b815260206004820152602c60248201527f54686520636f6e74726163742073686f756c64206265206f776e65642062792060448201527f7468652065786368616e676500000000000000000000000000000000000000006064820152608401610835565b306001600160a01b0316826001600160a01b0316635b8d02d76040518163ffffffff1660e01b8152600401602060405180830381865afa158015611994573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119b89190612654565b6001600160a01b031614611a345760405162461bcd60e51b815260206004820152602d60248201527f54686520636f6e74726163742073686f756c64206265206c696e6b656420746f60448201527f20746869732073657276696365000000000000000000000000000000000000006064820152608401610835565b6001546040805163313ce56760e01b815290516001600160a01b0390921691600091839163313ce567916004808201926020929091908290030181865afa158015611a83573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611aa791906125de565b611ab290600a612887565b611abc9086612896565b9050600085118015611ada5750601154611ad7906001612687565b85105b611b4c5760405162461bcd60e51b815260206004820152603160248201527f526174696e672073697a652073686f756c64206265207365742062792074686560448201527f20736572766963652070726f76696465720000000000000000000000000000006064820152608401610835565b6040516370a0823160e01b815230600482015281906001600160a01b038416906370a0823190602401602060405180830381865afa158015611b92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611bb6919061263b565b11611c295760405162461bcd60e51b815260206004820152602d60248201527f546865207365727669636520686173206e6f204558434420746f20706179206660448201527f6f722074686520726174696e67000000000000000000000000000000000000006064820152608401610835565b6004846001600160a01b031663c19d93fb6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611c69573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c8d91906128e5565b6004811115611c9e57611c9e6128cf565b14611ceb5760405162461bcd60e51b815260206004820181905260248201527f526571756972657320696e61637469766520636f6e74726163742073746174656044820152606401610835565b601080546001810182556000919091527f1b6847dc741a1b0cd08d278845f9d819d87b734759afb55fe2de5cb82a9ae6720185905560405163095ea7b360e01b8152306004820152602481018290526001600160a01b0383169063095ea7b3906044016020604051808303816000875af1158015611d6d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d919190612906565b5060405163a9059cbb60e01b81526001600160a01b0384811660048301526024820183905283169063a9059cbb906044016020604051808303816000875af1158015611de1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e059190612906565b5050506001600160a01b0316600090815260166020526040902080546001600160a01b03191690555050565b600e8181548110610af757600080fd5b60607f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01611e6d81611f9c565b600d805480602002602001604051908101604052809291908181526020018280548015611ec357602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611ea5575b505050505091505090565b600082815260208190526040902060010154611ee981611f9c565b6108488383612148565b6003546040516370a0823160e01b815230600482015260009182916001600160a01b03909116906370a0823190602401602060405180830381865afa158015611f40573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b2919061263b565b6000611f6f81611f9c565b50600380546001600160a01b039092166001600160a01b0319928316811790915560058054909216179055565b61105b8133612252565b60035460405163095ea7b360e01b8152306004820152602481018390526000916001600160a01b03169063095ea7b3906044016020604051808303816000875af1158015611ff8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061201c9190612906565b5060035460405163a9059cbb60e01b81526001600160a01b038581166004830152602482018590529091169063a9059cbb906044016020604051808303816000875af1158015612070573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120949190612906565b5060019392505050565b6000828152602081815260408083206001600160a01b038516845290915281205460ff16612140576000838152602081815260408083206001600160a01b03861684529091529020805460ff191660011790556120f83390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45060016107b2565b5060006107b2565b6000828152602081815260408083206001600160a01b038516845290915281205460ff1615612140576000838152602081815260408083206001600160a01b0386168085529252808320805460ff1916905551339286917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45060016107b2565b600060646006546121dc91906128ad565b9050600081600b546121ee9190612896565b9050600082600c546122009190612896565b9050600061220e8284612687565b60065461221b9190612923565b600154909150612234906001600160a01b031684611fa6565b5060095461224b906001600160a01b031682611fa6565b5050505050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff166122be576040517fe2517d3f0000000000000000000000000000000000000000000000000000000081526001600160a01b038216600482015260248101839052604401610835565b5050565b6117008061293783390190565b6000602082840312156122e157600080fd5b81357fffffffff000000000000000000000000000000000000000000000000000000008116811461231157600080fd5b9392505050565b6001600160a01b038116811461105b57600080fd5b6000806040838503121561234057600080fd5b82359150602083013561235281612318565b809150509250929050565b60006020828403121561236f57600080fd5b813561231181612318565b6000806040838503121561238d57600080fd5b823561239881612318565b9150602083013561235281612318565b6000602082840312156123ba57600080fd5b5035919050565b602081526000825180602084015260005b818110156123ef57602081860181015160408684010152016123d2565b506000604082850101526040601f19601f83011684010191505092915050565b801515811461105b57600080fd5b60008060006060848603121561243257600080fd5b833561243d8161240f565b95602085013595506040909401359392505050565b634e487b7160e01b600052604160045260246000fd5b60006020828403121561247a57600080fd5b813567ffffffffffffffff81111561249157600080fd5b8201601f810184136124a257600080fd5b803567ffffffffffffffff8111156124bc576124bc612452565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156124eb576124eb612452565b60405281815282820160200186101561250357600080fd5b81602084016020830137600091810160200191909152949350505050565b602080825282518282018190526000918401906040840190835b818110156125625783516001600160a01b031683526020938401939092019160010161253b565b509095945050505050565b602080825282518282018190526000918401906040840190835b81811015612562578351835260209384019390920191600101612587565b6000806000606084860312156125ba57600080fd5b833592506020840135915060408401356125d381612318565b809150509250925092565b6000602082840312156125f057600080fd5b815160ff8116811461231157600080fd5b600181811c9082168061261557607f821691505b60208210810361263557634e487b7160e01b600052602260045260246000fd5b50919050565b60006020828403121561264d57600080fd5b5051919050565b60006020828403121561266657600080fd5b815161231181612318565b634e487b7160e01b600052601160045260246000fd5b808201808211156107b2576107b2612671565b601f821115610a5457806000526020600020601f840160051c810160208510156126c15750805b601f840160051c820191505b8181101561224b57600081556001016126cd565b815167ffffffffffffffff8111156126fb576126fb612452565b61270f816127098454612601565b8461269a565b6020601f821160018114612743576000831561272b5750848201515b600019600385901b1c1916600184901b17845561224b565b600084815260208120601f198516915b828110156127735787850151825560209485019460019092019101612753565b50848210156127915786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b6001815b60018411156127db578085048111156127bf576127bf612671565b60018416156127cd57908102905b60019390931c9280026127a4565b935093915050565b6000826127f2575060016107b2565b816127ff575060006107b2565b8160018114612815576002811461281f5761283b565b60019150506107b2565b60ff84111561283057612830612671565b50506001821b6107b2565b5060208310610133831016604e8410600b841016171561285e575081810a6107b2565b61286b60001984846127a0565b806000190482111561287f5761287f612671565b029392505050565b600061231160ff8416836127e3565b80820281158282048414176107b2576107b2612671565b6000826128ca57634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052602160045260246000fd5b6000602082840312156128f757600080fd5b81516005811061231157600080fd5b60006020828403121561291857600080fd5b81516123118161240f565b818103818111156107b2576107b261267156fe60c0604052600c805461ffff60a01b191690556000600d5534801561002357600080fd5b506040516117003803806117008339810160408190526100429161011e565b6001600160a01b03808916608052871660a0819052600980546001600160a01b0319169091179055600486905560058590554260065560008490556100886064856101b1565b6001819055600454610099916101d3565b60028190556000546100ab91906101f0565b600355600892909255600c80546001600160a81b0319166001600160a01b0393841617600160a01b17905560078054919092166001600160a01b03199091161790555050600e805460ff1916905550610203915050565b80516001600160a01b038116811461011957600080fd5b919050565b600080600080600080600080610100898b03121561013b57600080fd5b61014489610102565b975061015260208a01610102565b60408a015160608b015160808c015160a08d0151939a5091985096509450925061017e60c08a01610102565b915061018c60e08a01610102565b90509295985092959890939650565b634e487b7160e01b600052601160045260246000fd5b6000826101ce57634e487b7160e01b600052601260045260246000fd5b500490565b80820281158282048414176101ea576101ea61019b565b92915050565b818103818111156101ea576101ea61019b565b60805160a0516114ae610252600039600081816102b10152818161038a01528181610f110152818161100b01526110c00152600081816103260152818161059e0152610f9801526114ae6000f3fe608060405234801561001057600080fd5b50600436106101ae5760003560e01c80639e01ff2e116100ee578063a6abf16a11610097578063c19d93fb11610071578063c19d93fb14610348578063cf09e0d014610362578063d17c2b541461036b578063e6c7c4561461037e57600080fd5b8063a6abf16a146102f5578063ab460a2614610319578063b9780f331461032157600080fd5b8063a0c97bce116100c8578063a0c97bce146102dc578063a166fdb7146102e4578063a3f8a30a146102ed57600080fd5b80639e01ff2e146102995780639e573665146102ac578063a035b1fe146102d357600080fd5b806363bd1d4a1161015b5780637150d8ae116101355780637150d8ae1461026c57806373f425611461027f57806373fac6f01461028857806380f474f61461029057600080fd5b806363bd1d4a146102455780636d534a141461024e57806370ba11131461026357600080fd5b80635b8d02d71161018c5780635b8d02d7146101f2578063618260451461021d578063623bf83d1461023257600080fd5b80630d668087146101b3578063313ce567146101cf5780633a4b4532146101e9575b600080fd5b6101bc60055481565b6040519081526020015b60405180910390f35b6101d7610386565b60405160ff90911681526020016101c6565b6101bc60025481565b600c54610205906001600160a01b031681565b6040516001600160a01b0390911681526020016101c6565b61023061022b36600461114d565b610411565b005b600954610205906001600160a01b031681565b6101bc60035481565b610256610607565b6040516101c69190611206565b6101bc60015481565b600754610205906001600160a01b031681565b6101bc60085481565b610230610695565b6101bc600d5481565b6102306102a736600461114d565b610710565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b6101bc60005481565b6102306108a8565b6101bc60045481565b610256610ae5565b600c5461030990600160a81b900460ff1681565b60405190151581526020016101c6565b610230610af2565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b600e546103559060ff1681565b6040516101c6919061126a565b6101bc60065481565b610230610379366004611292565b610c96565b6101bc610ed6565b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015610402575060408051601f3d908101601f191682019092526103ff918101906112ab565b60015b61040c5750600090565b919050565b600080600e5460ff16600481111561042b5761042b611254565b146104495760405163baf3f0f760e01b815260040160405180910390fd5b6007546001600160a01b03163314610474576040516386efbb5560e01b815260040160405180910390fd5b6000306001600160a01b031663e6c7c4566040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d891906112d5565b905060005481146105565760405162461bcd60e51b815260206004820152602260248201527f506c656173652073656e6420696e2074686520707572636861736520616d6f7560448201527f6e7400000000000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b600e805460ff19166001179055600b61056f8482611376565b506040517f4791abe10000000000000000000000000000000000000000000000000000000081523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690634791abe190602401600060405180830381600087803b1580156105ea57600080fd5b505af11580156105fe573d6000803e3d6000fd5b50505050505050565b600b8054610614906112ee565b80601f0160208091040260200160405190810160405280929190818152602001828054610640906112ee565b801561068d5780601f106106625761010080835404028352916020019161068d565b820191906000526020600020905b81548152906001019060200180831161067057829003601f168201915b505050505081565b6007546001600160a01b031633146106c0576040516386efbb5560e01b815260040160405180910390fd5b600280600e5460ff1660048111156106da576106da611254565b146106f85760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff1916600417905561070d610f82565b50565b600180600e5460ff16600481111561072a5761072a611254565b146107485760405163baf3f0f760e01b815260040160405180910390fd5b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa15801561079b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107bf91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610819573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061083d9190611435565b6108895760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600e805460ff19166002179055600a6108a28482611376565b50505050565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa1580156108fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091f91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610979573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061099d9190611435565b6109e95760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600280600e5460ff166004811115610a0357610a03611254565b14610a215760405163baf3f0f760e01b815260040160405180910390fd5b600554600654610a319190611457565b421015610acc5760405162461bcd60e51b815260206004820152605260248201527f506c65617365207761697420756e74696c20746865206d6f6e6579206973207260448201527f656c65617365642066726f6d206465706f736974206f7220746865206275796560648201527f7220636f6e6669726d7320726563656976650000000000000000000000000000608482015260a40161054d565b600e805460ff19166004179055610ae1610f82565b5050565b600a8054610614906112ee565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa158015610b45573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b6991906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610bc3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610be79190611435565b610c335760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600180600e5460ff166004811115610c4d57610c4d611254565b14610c6b5760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff19166004179055600754600054610c91916001600160a01b031690610fd3565b505050565b600480600e5460ff166004811115610cb057610cb0611254565b14610cce5760405163baf3f0f760e01b815260040160405180910390fd5b600c54600160a81b900460ff161580610ce75750600d54155b610d335760405162461bcd60e51b815260206004820152601560248201527f526174696e6720697320616c7265616479207365740000000000000000000000604482015260640161054d565b600c546001600160a01b03168215801590610db95750806001600160a01b031663374558126040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d87573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dab91906112d5565b610db6906001611457565b83105b610e2b5760405162461bcd60e51b815260206004820152603160248201527f526174696e672073697a652073686f756c64206265207365742062792074686560448201527f20736572766963652070726f7669646572000000000000000000000000000000606482015260840161054d565b600d8390556040517fbfcd0fc5000000000000000000000000000000000000000000000000000000008152600481018490526001600160a01b0382169063bfcd0fc590602401600060405180830381600087803b158015610e8b57600080fd5b505af1158015610e9f573d6000803e3d6000fd5b5050600c80547fffffffffffffffffffff00ffffffffffffffffffffffffffffffffffffffffff16600160a81b1790555050505050565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815230600482015260009081906001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a0823190602401602060405180830381865afa158015610f58573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f7c91906112d5565b92915050565b600e805460ff19166004179055600254610fbd907f000000000000000000000000000000000000000000000000000000000000000090610fd3565b50600c5460035461070d916001600160a01b0316905b6040517f095ea7b3000000000000000000000000000000000000000000000000000000008152306004820152602481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063095ea7b3906044016020604051808303816000875af115801561105c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110809190611435565b506040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b038481166004830152602482018490527f0000000000000000000000000000000000000000000000000000000000000000169063a9059cbb906044016020604051808303816000875af1158015611109573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061112d9190611435565b5060019392505050565b634e487b7160e01b600052604160045260246000fd5b60006020828403121561115f57600080fd5b813567ffffffffffffffff81111561117657600080fd5b8201601f8101841361118757600080fd5b803567ffffffffffffffff8111156111a1576111a1611137565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156111d0576111d0611137565b6040528181528282016020018610156111e857600080fd5b81602084016020830137600091810160200191909152949350505050565b602081526000825180602084015260005b818110156112345760208186018101516040868401015201611217565b506000604082850101526040601f19601f83011684010191505092915050565b634e487b7160e01b600052602160045260246000fd5b602081016005831061128c57634e487b7160e01b600052602160045260246000fd5b91905290565b6000602082840312156112a457600080fd5b5035919050565b6000602082840312156112bd57600080fd5b815160ff811681146112ce57600080fd5b9392505050565b6000602082840312156112e757600080fd5b5051919050565b600181811c9082168061130257607f821691505b60208210810361132257634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610c9157806000526020600020601f840160051c8101602085101561134f5750805b601f840160051c820191505b8181101561136f576000815560010161135b565b5050505050565b815167ffffffffffffffff81111561139057611390611137565b6113a48161139e84546112ee565b84611328565b6020601f8211600181146113d857600083156113c05750848201515b600019600385901b1c1916600184901b17845561136f565b600084815260208120601f198516915b8281101561140857878501518255602094850194600190920191016113e8565b50848210156114265786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b60006020828403121561144757600080fd5b815180151581146112ce57600080fd5b80820180821115610f7c57634e487b7160e01b600052601160045260246000fdfea26469706673582212201d40811dc8e4d28c088ead892b195cff48ed0e68b8e953c3d79db3581be13f6764736f6c634300081a0033a2646970667358221220f0372241cadf287c4bd63f3af492affbc2dac8fda80326397897cc7596a1901064736f6c634300081a00339abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6f",m=t.ExchangeService__factory=function(e){function t(){var e;(0,r.default)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=a.length>1?s(this,t,[].concat(a)):s(this,t,[b,y,a[0]]),(0,i.default)(e)}return(0,u.default)(t,e),(0,a.default)(t,[{key:"getDeployTransaction",value:function(e,n,r,a,i,o,u,c,f,s,p,b){return(0,l.default)((0,d.default)(t.prototype),"getDeployTransaction",this).call(this,e,n,r,a,i,o,u,c,f,s,p,b||{})}},{key:"deploy",value:function(e,n,r,a,i,o,u,c,f,s,p,b){return(0,l.default)((0,d.default)(t.prototype),"deploy",this).call(this,e,n,r,a,i,o,u,c,f,s,p,b||{})}},{key:"connect",value:function(e){return(0,l.default)((0,d.default)(t.prototype),"connect",this).call(this,e)}}],[{key:"createInterface",value:function(){return new c.Interface(b)}},{key:"connect",value:function(e,t){return new c.Contract(e,b,t)}}])}(c.ContractFactory);m.bytecode=y,m.abi=b}.apply(t,r))||(e.exports=a)},856725:(e,t,n)=>{var r,a;r=[t,n(517383),n(334579),n(512475),n(728452),n(432395),n(863072),n(829511),n(714193)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e,t,n){return t=(0,d.default)(t),(0,o.default)(e,p()?Reflect.construct(t,n||[],(0,d.default)(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}Object.defineProperty(e,"__esModule",{value:!0}),t.ExchangeToken__factory=void 0,r=f(r),a=f(a),i=f(i),o=f(o),l=f(l),d=f(d),u=f(u);var b=[{inputs:[{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"contractAddress",type:"address"}],name:"DeliveryRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"CASHIER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PARAMS_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"wrapperAddress",type:"address"}],name:"balanceOfContract",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"burnValue",type:"uint256"}],name:"burnToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"}],name:"categories",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"createExchangeRateDivider",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"contractValue",type:"uint256"},{internalType:"address",name:"wrapperAddress",type:"address"},{internalType:"uint256",name:"contractDivider",type:"uint256"},{internalType:"address",name:"providerAddress",type:"address"},{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"ratingsEnabled",type:"uint256"},{internalType:"bool",name:"requiresPayment",type:"bool"},{internalType:"uint256",name:"requiresSubs",type:"uint256"},{internalType:"string",name:"category",type:"string"},{internalType:"address",name:"originalContract",type:"address"}],name:"createServiceUserContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchangeComission",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchangeLockTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contractAddress",type:"address"}],name:"requestDelivery",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"serviceComission",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"services",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"divider",type:"uint256"},{internalType:"uint256",name:"commission",type:"uint256"},{internalType:"uint256",name:"serviceFee",type:"uint256"}],name:"setParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"transactValue",type:"uint256"},{internalType:"address",name:"wrapperAddress",type:"address"}],name:"withdrawTo",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"wrapperAddress",type:"address"}],name:"wrapperDecimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"}],y="0x60a0604052600160075560026008556203f4806009556002600a5534801561002657600080fd5b506040516166e13803806166e1833981016040819052610045916103da565b8181600361005383826104eb565b50600461006082826104eb565b5050506100948361007561010360201b60201c565b61008090600a6106a6565b61008f90640218711a006106bc565b610108565b61009f600084610147565b506100ca7f4af29447b0b3ab714a8512e6f69c515e9803c066fb6c4e2df49be42a14a63c0d84610147565b506100f57fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe84610147565b505030608052506106e69050565b601290565b6001600160a01b0382166101375760405163ec442f0560e01b8152600060048201526024015b60405180910390fd5b610143600083836101f7565b5050565b60008281526005602090815260408083206001600160a01b038516845290915281205460ff166101ed5760008381526005602090815260408083206001600160a01b03861684529091529020805460ff191660011790556101a53390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45060016101f1565b5060005b92915050565b6001600160a01b03831661022257806002600082825461021791906106d3565b909155506102949050565b6001600160a01b038316600090815260208190526040902054818110156102755760405163391434e360e21b81526001600160a01b0385166004820152602481018290526044810183905260640161012e565b6001600160a01b03841660009081526020819052604090209082900390555b6001600160a01b0382166102b0576002805482900390556102cf565b6001600160a01b03821660009081526020819052604090208054820190555b816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161031491815260200190565b60405180910390a3505050565b634e487b7160e01b600052604160045260246000fd5b600082601f83011261034857600080fd5b81516001600160401b0381111561036157610361610321565b604051601f8201601f19908116603f011681016001600160401b038111828210171561038f5761038f610321565b6040528181528382016020018510156103a757600080fd5b60005b828110156103c6576020818601810151838301820152016103aa565b506000918101602001919091529392505050565b6000806000606084860312156103ef57600080fd5b83516001600160a01b038116811461040657600080fd5b60208501519093506001600160401b0381111561042257600080fd5b61042e86828701610337565b604086015190935090506001600160401b0381111561044c57600080fd5b61045886828701610337565b9150509250925092565b600181811c9082168061047657607f821691505b60208210810361049657634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156104e657806000526020600020601f840160051c810160208510156104c35750805b601f840160051c820191505b818110156104e357600081556001016104cf565b50505b505050565b81516001600160401b0381111561050457610504610321565b610518816105128454610462565b8461049c565b6020601f82116001811461054c57600083156105345750848201515b600019600385901b1c1916600184901b1784556104e3565b600084815260208120601f198516915b8281101561057c578785015182556020948501946001909201910161055c565b508482101561059a5786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b634e487b7160e01b600052601160045260246000fd5b6001815b60018411156105fa578085048111156105de576105de6105a9565b60018416156105ec57908102905b60019390931c9280026105c3565b935093915050565b600082610611575060016101f1565b8161061e575060006101f1565b8160018114610634576002811461063e5761065a565b60019150506101f1565b60ff84111561064f5761064f6105a9565b50506001821b6101f1565b5060208310610133831016604e8410600b841016171561067d575081810a6101f1565b61068a60001984846105bf565b806000190482111561069e5761069e6105a9565b029392505050565b60006106b560ff841683610602565b9392505050565b80820281158282048414176101f1576101f16105a9565b808201808211156101f1576101f16105a9565b608051615fe061070160003960006106800152615fe06000f3fe608060405234801561001057600080fd5b50600436106101e55760003560e01c80635a0ce6761161010f578063b7fd9684116100a2578063d547741f11610071578063d547741f14610457578063dd48087f1461046a578063dd62ed3e1461047d578063e31e2cab146104b657600080fd5b8063b7fd968414610401578063bb5bc87f14610428578063c22c4f4314610431578063c4e2c1e61461044457600080fd5b806391d14854116100de57806391d14854146103a557806395d89b41146103de578063a217fddf146103e6578063a9059cbb146103ee57600080fd5b80635a0ce676146103435780636caa97ac1461035657806370a08231146103695780637b47ec1a1461039257600080fd5b8063248a9ca31161018757806336568abe1161015657806336568abe146102ed57806339a36ea5146103005780634791abe1146103095780634fc620421461031c57600080fd5b8063248a9ca3146102975780632f2ff15d146102ba578063313ce567146102cf57806332a30d4c146102e457600080fd5b8063095ea7b3116101c3578063095ea7b31461023e57806318160ddd1461025157806321bdd60d1461025957806323b872dd1461028457600080fd5b806301ffc9a7146101ea57806306fdde031461021257806308c171da14610227575b600080fd5b6101fd6101f83660046114f3565b6104c9565b60405190151581526020015b60405180910390f35b61021a610562565b6040516102099190611559565b610230600a5481565b604051908152602001610209565b6101fd61024c3660046115ac565b6105f4565b600254610230565b61026c61026736600461168b565b61060c565b6040516001600160a01b039091168152602001610209565b6101fd61029236600461174c565b61083a565b6102306102a536600461178d565b60009081526005602052604090206001015490565b6102cd6102c83660046117a6565b61085e565b005b60125b60405160ff9091168152602001610209565b61023060075481565b6102cd6102fb3660046117a6565b610889565b61023060085481565b6102cd6103173660046117d6565b6108da565b6102307f4af29447b0b3ab714a8512e6f69c515e9803c066fb6c4e2df49be42a14a63c0d81565b6102cd6103513660046117f3565b610acd565b61026c61036436600461181f565b610bf6565b6102306103773660046117d6565b6001600160a01b031660009081526020819052604090205490565b6102cd6103a036600461178d565b610c3d565b6101fd6103b33660046117a6565b60009182526005602090815260408084206001600160a01b0393909316845291905290205460ff1690565b61021a610c4a565b610230600081565b6101fd6103fc3660046115ac565b610c59565b6102307fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe81565b61023060095481565b61026c61043f36600461178d565b610c67565b6101fd610452366004611864565b610c91565b6102cd6104653660046117a6565b610de3565b6102306104783660046117d6565b610e08565b61023061048b3660046118a6565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b6102d26104c43660046117d6565b610e95565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b00000000000000000000000000000000000000000000000000000000148061055c57507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316145b92915050565b606060038054610571906118d4565b80601f016020809104026020016040519081016040528092919081815260200182805461059d906118d4565b80156105ea5780601f106105bf576101008083540402835291602001916105ea565b820191906000526020600020905b8154815290600101906020018083116105cd57829003601f168201915b5050505050905090565b600033610602818585610f02565b5060019392505050565b6000806007548a61061b601290565b61062690600a611a0b565b610630908f611a1a565b61063a9190611a31565b6106449190611a31565b905061064f81610c3d565b60008a61065b8d610e95565b61066690600a611a0b565b610670908f611a1a565b61067a9190611a31565b905060007f00000000000000000000000000000000000000000000000000000000000000008d33848e600a548f8f8f8f8e6040516106b7906114e6565b6106cb9b9a99989796959493929190611a53565b604051809103906000f0801580156106e7573d6000803e3d6000fd5b50600680546001810182556000919091527ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f01805473ffffffffffffffffffffffffffffffffffffffff19166001600160a01b0383161790556040519091508190600b90610756908990611aec565b908152604051602091819003820190208054600181018255600091825291902001805473ffffffffffffffffffffffffffffffffffffffff19166001600160a01b0383811691909117909155861615610828576040517f0f82d3a70000000000000000000000000000000000000000000000000000000081523360048201526001600160a01b038281166024830152879190821690630f82d3a790604401600060405180830381600087803b15801561080e57600080fd5b505af1158015610822573d6000803e3d6000fd5b50505050505b9e9d5050505050505050505050505050565b600033610848858285610f0f565b610853858585610fa0565b506001949350505050565b60008281526005602052604090206001015461087981611018565b6108838383611022565b50505050565b6001600160a01b03811633146108cb576040517f6697b23200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6108d582826110d0565b505050565b6000819050306001600160a01b0316816001600160a01b031663b9780f336040518163ffffffff1660e01b8152600401602060405180830381865afa158015610927573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061094b9190611b08565b6001600160a01b0316146109cb5760405162461bcd60e51b8152602060048201526024808201527f43616e206f6e6c79207265717565737420666f72206f776e656420636f6e747260448201527f616374730000000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b6001816001600160a01b031663c19d93fb6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a0b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a2f9190611b3b565b6004811115610a4057610a40611b25565b14610a8d5760405162461bcd60e51b815260206004820152601e60248201527f5265717569726573206c6f636b656420636f6e7472616374207374617465000060448201526064016109c2565b6040516001600160a01b03831681527f9cf215cc99cf3cb3537c5e3d4e60149dd8442ec3d89b6da547f85550e8c9781e9060200160405180910390a15050565b7f4af29447b0b3ab714a8512e6f69c515e9803c066fb6c4e2df49be42a14a63c0d610af781611018565b60008311610b475760405162461bcd60e51b815260206004820181905260248201527f616c6c20706172616d73206d75737420626520626967676572207468616e203060448201526064016109c2565b60008411610b975760405162461bcd60e51b815260206004820181905260248201527f616c6c20706172616d73206d75737420626520626967676572207468616e203060448201526064016109c2565b60008211610be75760405162461bcd60e51b815260206004820181905260248201527f616c6c20706172616d73206d75737420626520626967676572207468616e203060448201526064016109c2565b50600792909255600855600a55565b8151602081840181018051600b825292820191850191909120919052805482908110610c2157600080fd5b6000918252602090912001546001600160a01b03169150829050565b610c478133611157565b50565b606060048054610571906118d4565b600033610602818585610fa0565b60068181548110610c7757600080fd5b6000918252602090912001546001600160a01b0316905081565b60007fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe610cbd81611018565b6040517f095ea7b30000000000000000000000000000000000000000000000000000000081523060048201526024810185905283906001600160a01b0382169063095ea7b3906044016020604051808303816000875af1158015610d25573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d499190611b5c565b506040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b0387811660048301526024820187905282169063a9059cbb906044016020604051808303816000875af1158015610db2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dd69190611b5c565b5060019695505050505050565b600082815260056020526040902060010154610dfe81611018565b61088383836110d0565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815230600482015260009081906001600160a01b038416906370a0823190602401602060405180830381865afa158015610e6a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e8e9190611b79565b9392505050565b6000816001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015610ef1575060408051601f3d908101601f19168201909252610eee91810190611b92565b60015b61055c57506000919050565b919050565b6108d583838360016111f8565b6001600160a01b0383811660009081526001602090815260408083209386168352929052205460001981146108835781811015610f91576040517ffb8f41b20000000000000000000000000000000000000000000000000000000081526001600160a01b038416600482015260248101829052604481018390526064016109c2565b610883848484840360006111f8565b6001600160a01b038316610fca57604051634b637e8f60e11b8152600060048201526024016109c2565b6001600160a01b03821661100d576040517fec442f05000000000000000000000000000000000000000000000000000000008152600060048201526024016109c2565b6108d58383836112ff565b610c478133611442565b60008281526005602090815260408083206001600160a01b038516845290915281205460ff166110c85760008381526005602090815260408083206001600160a01b03861684529091529020805460ff191660011790556110803390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a450600161055c565b50600061055c565b60008281526005602090815260408083206001600160a01b038516845290915281205460ff16156110c85760008381526005602090815260408083206001600160a01b0386168085529252808320805460ff1916905551339286917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a450600161055c565b81611177826001600160a01b031660009081526020819052604090205490565b116111ea5760405162461bcd60e51b815260206004820152602860248201527f4e6f7420656e6f75676820746f6b656e20696e20796f7572206163636f756e7460448201527f20746f206275726e00000000000000000000000000000000000000000000000060648201526084016109c2565b6111f481836114b0565b5050565b6001600160a01b03841661123b576040517fe602df05000000000000000000000000000000000000000000000000000000008152600060048201526024016109c2565b6001600160a01b03831661127e576040517f94280d62000000000000000000000000000000000000000000000000000000008152600060048201526024016109c2565b6001600160a01b038085166000908152600160209081526040808320938716835292905220829055801561088357826001600160a01b0316846001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516112f191815260200190565b60405180910390a350505050565b6001600160a01b03831661132a57806002600082825461131f9190611bb5565b909155506113b59050565b6001600160a01b03831660009081526020819052604090205481811015611396576040517fe450d38c0000000000000000000000000000000000000000000000000000000081526001600160a01b038516600482015260248101829052604481018390526064016109c2565b6001600160a01b03841660009081526020819052604090209082900390555b6001600160a01b0382166113d1576002805482900390556113f0565b6001600160a01b03821660009081526020819052604090208054820190555b816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161143591815260200190565b60405180910390a3505050565b60008281526005602090815260408083206001600160a01b038516845290915290205460ff166111f4576040517fe2517d3f0000000000000000000000000000000000000000000000000000000081526001600160a01b0382166004820152602481018390526044016109c2565b6001600160a01b0382166114da57604051634b637e8f60e11b8152600060048201526024016109c2565b6111f4826000836112ff565b6143e280611bc983390190565b60006020828403121561150557600080fd5b81357fffffffff0000000000000000000000000000000000000000000000000000000081168114610e8e57600080fd5b60005b83811015611550578181015183820152602001611538565b50506000910152565b6020815260008251806020840152611578816040850160208701611535565b601f01601f19169190910160400192915050565b6001600160a01b0381168114610c4757600080fd5b8035610efd8161158c565b600080604083850312156115bf57600080fd5b82356115ca8161158c565b946020939093013593505050565b8015158114610c4757600080fd5b634e487b7160e01b600052604160045260246000fd5b600082601f83011261160d57600080fd5b813567ffffffffffffffff811115611627576116276115e6565b604051601f8201601f19908116603f0116810167ffffffffffffffff81118282101715611656576116566115e6565b60405281815283820160200185101561166e57600080fd5b816020850160208301376000918101602001919091529392505050565b6000806000806000806000806000806101408b8d0312156116ab57600080fd5b8a35995060208b01356116bd8161158c565b985060408b0135975060608b01356116d48161158c565b965060808b01356116e48161158c565b955060a08b0135945060c08b01356116fb816115d8565b935060e08b013592506101008b013567ffffffffffffffff81111561171f57600080fd5b61172b8d828e016115fc565b92505061173b6101208c016115a1565b90509295989b9194979a5092959850565b60008060006060848603121561176157600080fd5b833561176c8161158c565b9250602084013561177c8161158c565b929592945050506040919091013590565b60006020828403121561179f57600080fd5b5035919050565b600080604083850312156117b957600080fd5b8235915060208301356117cb8161158c565b809150509250929050565b6000602082840312156117e857600080fd5b8135610e8e8161158c565b60008060006060848603121561180857600080fd5b505081359360208301359350604090920135919050565b6000806040838503121561183257600080fd5b823567ffffffffffffffff81111561184957600080fd5b611855858286016115fc565b95602094909401359450505050565b60008060006060848603121561187957600080fd5b83356118848161158c565b925060208401359150604084013561189b8161158c565b809150509250925092565b600080604083850312156118b957600080fd5b82356118c48161158c565b915060208301356117cb8161158c565b600181811c908216806118e857607f821691505b60208210810361190857634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052601160045260246000fd5b6001815b600184111561195f578085048111156119435761194361190e565b600184161561195157908102905b60019390931c928002611928565b935093915050565b6000826119765750600161055c565b816119835750600061055c565b816001811461199957600281146119a3576119bf565b600191505061055c565b60ff8411156119b4576119b461190e565b50506001821b61055c565b5060208310610133831016604e8410600b84101617156119e2575081810a61055c565b6119ef6000198484611924565b8060001904821115611a0357611a0361190e565b029392505050565b6000610e8e60ff841683611967565b808202811582820484141761055c5761055c61190e565b600082611a4e57634e487b7160e01b600052601260045260246000fd5b500490565b6000610160820190506001600160a01b038d1682526001600160a01b038c1660208301526001600160a01b038b1660408301528960608301526001600160a01b03891660808301528760a08301526001600160a01b03871660c08301528560e083015284151561010083015283610120830152611adc6101408301846001600160a01b03169052565b9c9b505050505050505050505050565b60008251611afe818460208701611535565b9190910192915050565b600060208284031215611b1a57600080fd5b8151610e8e8161158c565b634e487b7160e01b600052602160045260246000fd5b600060208284031215611b4d57600080fd5b815160058110610e8e57600080fd5b600060208284031215611b6e57600080fd5b8151610e8e816115d8565b600060208284031215611b8b57600080fd5b5051919050565b600060208284031215611ba457600080fd5b815160ff81168114610e8e57600080fd5b8082018082111561055c5761055c61190e56fe6080604052600060118190556012805460ff1916905560135534801561002457600080fd5b506040516143e23803806143e28339810160408190526100439161028c565b600180546001600160a01b03199081166001600160a01b038e8116919091179092556003805482168d8416908117909155600580548316909117905560068a90556004805482168c84161790556009805482168a8416179055600b8890556000600c819055600f8054831689851617905560118790556012805460ff19168715151790556013859055601480549092169284169290921790556100e690886101c4565b506101117fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe886101c4565b5061012a6000805160206143c2833981519152886101c4565b506101557f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01886101c4565b50600f5461017b906000805160206143c2833981519152906001600160a01b03166101c4565b50600f546101b3907f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01906001600160a01b03166101c4565b505050505050505050505050610347565b6000828152602081815260408083206001600160a01b038516845290915281205460ff16610266576000838152602081815260408083206001600160a01b03861684529091529020805460ff1916600117905561021e3390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a450600161026a565b5060005b92915050565b80516001600160a01b038116811461028757600080fd5b919050565b60008060008060008060008060008060006101608c8e0312156102ae57600080fd5b6102b78c610270565b9a506102c560208d01610270565b99506102d360408d01610270565b60608d015190995097506102e960808d01610270565b60a08d015190975095506102ff60c08d01610270565b60e08d01516101008e01519196509450801515811461031d57600080fd5b6101208d015190935091506103356101408d01610270565b90509295989b509295989b9093969950565b61406c806103566000396000f3fe608060405234801561001057600080fd5b50600436106103155760003560e01c806375417851116101a7578063b9780f33116100ee578063cf09e0d011610097578063e69e04b311610071578063e69e04b3146106fb578063e6c7c45614610704578063f6df28d01461070c57600080fd5b8063cf09e0d0146106cc578063d547741f146106d5578063e2c345e2146106e857600080fd5b8063bfcd0fc5116100c8578063bfcd0fc51461069e578063c22c4f43146106b1578063c3a2a93a146106c457600080fd5b8063b9780f331461065c578063be07dd561461066f578063bea6998f1461069657600080fd5b80639e57366511610150578063a326d9b71161012a578063a326d9b714610619578063b4f8570414610622578063b7fd96841461063557600080fd5b80639e573665146105eb5780639fe7947b146105fe578063a217fddf1461061157600080fd5b80638cbdd6bd116101815780638cbdd6bd1461059657806391d14854146105ab5780639bd3ba4e146105e257600080fd5b8063754178511461056b5780637aeabb39146105805780637ea0f6cb1461058957600080fd5b8063374558121161026b5780635c71c0df116102145780635ed185ef116101ee5780635ed185ef14610522578063623bf83d146105355780636bb2cd231461054857600080fd5b80635c71c0df146104d35780635d30e84d146104fc5780635e0a02ef1461050f57600080fd5b80634e52126e116102455780634e52126e1461049a5780634f8632ba146104ad578063570ca735146104c057600080fd5b806337455812146104695780633ab7704d14610472578063474da79a1461048757600080fd5b806316a207fc116102cd5780632f2ff15d116102a75780632f2ff15d14610429578063313ce5671461043c57806336568abe1461045657600080fd5b806316a207fc146103be57806320f0d83a146103f3578063248a9ca31461040657600080fd5b80630687b785116102fe5780630687b78514610357578063085d4883146103985780630f82d3a7146103ab57600080fd5b806301ffc9a71461031a57806305fe138b14610342575b600080fd5b61032d6103283660046122cf565b61071f565b60405190151581526020015b60405180910390f35b61035561035036600461232d565b6107b8565b005b61038061036536600461235d565b6017602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610339565b600954610380906001600160a01b031681565b6103556103b936600461237a565b61084e565b6103e57f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc0181565b604051908152602001610339565b6103556104013660046123a8565b61095d565b6103e56104143660046123a8565b60009081526020819052604090206001015490565b61035561043736600461232d565b61096e565b610444610993565b60405160ff9091168152602001610339565b61035561046436600461232d565b610a08565b6103e560115481565b61047a610a59565b60405161033991906123c1565b6103806104953660046123a8565b610ae7565b61032d6104a836600461235d565b610b11565b600454610380906001600160a01b031681565b600f54610380906001600160a01b031681565b6103806104e136600461235d565b6016602052600090815260409020546001600160a01b031681565b6103e561050a3660046123a8565b610f48565b61035561051d36600461241d565b610f69565b610355610530366004612468565b610f8f565b600554610380906001600160a01b031681565b61032d61055636600461235d565b60156020526000908152604090205460ff1681565b61057361105e565b6040516103399190612521565b6103e560075481565b60125461032d9060ff1681565b61059e6110c0565b604051610339919061256d565b61032d6105b936600461232d565b6000918252602082815260408084206001600160a01b0393909316845291905290205460ff1690565b6103e5600c5481565b600354610380906001600160a01b031681565b61038061060c3660046125a5565b611117565b6103e5600081565b6103e560135481565b610355610630366004612468565b61169c565b6103e57fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe81565b600154610380906001600160a01b031681565b6103e57f9abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6f81565b61047a6116d2565b6103556106ac3660046123a8565b6116df565b6103806106bf3660046123a8565b611e31565b610573611e41565b6103e560025481565b6103556106e336600461232d565b611ece565b601454610380906001600160a01b031681565b6103e560065481565b6103e5611ef3565b61035561071a36600461235d565b611f64565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167f7965db0b0000000000000000000000000000000000000000000000000000000014806107b257507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff000000000000000000000000000000000000000000000000000000008316145b92915050565b7fff3317e1e0e8c784290b957ee9b65ea8fe96420c4819db463283b95ecbe4a3fe6107e281611f9c565b826107eb611ef3565b101561083e5760405162461bcd60e51b815260206004820181905260248201527f4e6f7420656e6f75676874206d6f6e657920666f72207769746864726177616c60448201526064015b60405180910390fd5b6108488284611fa6565b50505050565b6001546001600160a01b031633146108a85760405162461bcd60e51b815260206004820152600a60248201527f4f6e6c7920746f6b656e000000000000000000000000000000000000000000006044820152606401610835565b6001600160a01b0382811660009081526017602090815260409182902080546001600160a01b03191693851693909317909255513381527f54db7a5cb4735e1aac1f53db512d3390390bb6637bd30ad4bf9fc98667d9b9b9910160405180910390a1600e80546001810182556000919091527fbb7b4a454dc3493923482f07822329ed19e8244eff582cc204f8554c3620c3fd0180546001600160a01b0319166001600160a01b039290921691909117905550565b600061096881611f9c565b50601155565b60008281526020819052604090206001015461098981611f9c565b610848838361209e565b6003546040805163313ce56760e01b815290516000926001600160a01b03169163313ce5679160048083019260209291908290030181865afa9250505080156109f9575060408051601f3d908101601f191682019092526109f6918101906125de565b60015b610a035750600090565b919050565b6001600160a01b0381163314610a4a576040517f6697b23200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b610a548282612148565b505050565b60088054610a6690612601565b80601f0160208091040260200160405190810160405280929190818152602001828054610a9290612601565b8015610adf5780601f10610ab457610100808354040283529160200191610adf565b820191906000526020600020905b815481529060010190602001808311610ac257829003601f168201915b505050505081565b600d8181548110610af757600080fd5b6000918252602090912001546001600160a01b0316905081565b601254600090829060ff161515600103610f3f576000816001600160a01b0316637aeabb396040518163ffffffff1660e01b8152600401602060405180830381865afa158015610b65573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b89919061263b565b118015610c0c57506001546040805163b9780f3360e01b815290516001600160a01b039283169284169163b9780f339160048083019260209291908290030181865afa158015610bdd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c019190612654565b6001600160a01b0316145b8015610ca75750600554604080517f623bf83d00000000000000000000000000000000000000000000000000000000815290516001600160a01b039283169284169163623bf83d9160048083019260209291908290030181865afa158015610c78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c9c9190612654565b6001600160a01b0316145b8015610d155750600654816001600160a01b031663e69e04b36040518163ffffffff1660e01b8152600401602060405180830381865afa158015610cef573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d13919061263b565b145b8015610db05750600954604080517f085d488300000000000000000000000000000000000000000000000000000000815290516001600160a01b039283169284169163085d48839160048083019260209291908290030181865afa158015610d81573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610da59190612654565b6001600160a01b0316145b8015610e2e5750306001600160a01b0316816001600160a01b031663e2c345e26040518163ffffffff1660e01b8152600401602060405180830381865afa158015610dff573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e239190612654565b6001600160a01b0316145b610e7a5760405162461bcd60e51b815260206004820152601060248201527f5061796d656e74207265717569726564000000000000000000000000000000006044820152606401610835565b60135415610f3f57601354816001600160a01b0316637aeabb396040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ec3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ee7919061263b565b610ef19190612687565b4210610f3f5760405162461bcd60e51b815260206004820152601460248201527f537562736372697074696f6e20657870697265640000000000000000000000006044820152606401610835565b50600192915050565b60108181548110610f5857600080fd5b600091825260209091200154905081565b6000610f7481611f9c565b506012805460ff191693151593909317909255601355600655565b6004546001600160a01b03163314610fe95760405162461bcd60e51b815260206004820152600960248201527f4f6e6c79207573657200000000000000000000000000000000000000000000006044820152606401610835565b600654610ff4611ef3565b10156110425760405162461bcd60e51b815260206004820152601960248201527f596f75206e65656420746f2070617920746865207072696365000000000000006044820152606401610835565b42600755600861105282826126e1565b5061105b6121cb565b50565b6060600e8054806020026020016040519081016040528092919081815260200182805480156110b657602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611098575b5050505050905090565b606060108054806020026020016040519081016040528092919081815260200182805480156110b657602002820191906000526020600020905b8154815260200190600101908083116110fa575050505050905090565b600061112282610b11565b50336000908152601660205260409020546001600160a01b03163081148061115157506001600160a01b038116155b61119d5760405162461bcd60e51b815260206004820152601c60248201527f50726576696f7573206f726465722073686f756c642066696e697368000000006044820152606401610835565b600154604080517f32a30d4c00000000000000000000000000000000000000000000000000000000815290516001600160a01b039092169160009183916332a30d4c916004808201926020929091908290030181865afa158015611205573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611229919061263b565b86836001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015611268573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061128c91906125de565b61129790600a612887565b6112a1908a612896565b6112ab91906128ad565b6112b591906128ad565b6005546040517fe31e2cab0000000000000000000000000000000000000000000000000000000081526001600160a01b039182166004820152919250600091889185169063e31e2cab90602401602060405180830381865afa15801561131f573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061134391906125de565b61134e90600a612887565b611358908a612896565b61136291906128ad565b6003546040516370a0823160e01b815233600482015291925082916001600160a01b03909116906370a0823190602401602060405180830381865afa1580156113af573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113d3919061263b565b10156114475760405162461bcd60e51b815260206004820152602960248201527f596f75722062616c616e63652073686f756c642068617665207468652072657160448201527f75697265642073756d00000000000000000000000000000000000000000000006064820152608401610835565b6000836001600160a01b03166339a36ea56040518163ffffffff1660e01b8152600401602060405180830381865afa158015611487573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114ab919061263b565b6040517f7b47ec1a000000000000000000000000000000000000000000000000000000008152600481018590529091506001600160a01b03851690637b47ec1a90602401600060405180830381600087803b15801561150957600080fd5b505af115801561151d573d6000803e3d6000fd5b5050600154600554604080517fbb5bc87f0000000000000000000000000000000000000000000000000000000081529051600095506001600160a01b039384169450918316928692908a169163bb5bc87f9160048083019260209291908290030181865afa158015611593573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115b7919061263b565b868833306040516115c7906122c2565b6001600160a01b039889168152968816602088015260408701959095526060860193909352608085019190915260a0840152831660c083015290911660e082015261010001604051809103906000f080158015611628573d6000803e3d6000fd5b5033600090815260166020526040812080546001600160a01b0384166001600160a01b03199182168117909255600d805460018101825593527fd7b6990105719101dabeb77144f2a3385c8033acd3af97e9423a695e81ad1eb5909201805490921617905596505050505050509392505050565b7f9abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6f6116c681611f9c565b600a610a5483826126e1565b600a8054610a6690612601565b60003390506000816001600160a01b0316637150d8ae6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611724573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117489190612654565b905060115460000361177d576001600160a01b0316600090815260166020526040902080546001600160a01b03191690555050565b3360009081526015602052604090205460ff16156117dd5760405162461bcd60e51b815260206004820152601c60248201527f5468697320726174696e6720697320616c7265616479206164646564000000006044820152606401610835565b6001600160a01b038181166000908152601660205260409020541633146118465760405162461bcd60e51b815260206004820152601b60248201527f427579657220686173206120646966666572656e74206f7264657200000000006044820152606401610835565b33600090815260156020908152604091829020805460ff1916600190811790915554825163b9780f3360e01b815292516001600160a01b03918216939186169263b9780f3392600480820193918290030181865afa1580156118ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118d09190612654565b6001600160a01b03161461194c5760405162461bcd60e51b815260206004820152602c60248201527f54686520636f6e74726163742073686f756c64206265206f776e65642062792060448201527f7468652065786368616e676500000000000000000000000000000000000000006064820152608401610835565b306001600160a01b0316826001600160a01b0316635b8d02d76040518163ffffffff1660e01b8152600401602060405180830381865afa158015611994573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119b89190612654565b6001600160a01b031614611a345760405162461bcd60e51b815260206004820152602d60248201527f54686520636f6e74726163742073686f756c64206265206c696e6b656420746f60448201527f20746869732073657276696365000000000000000000000000000000000000006064820152608401610835565b6001546040805163313ce56760e01b815290516001600160a01b0390921691600091839163313ce567916004808201926020929091908290030181865afa158015611a83573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611aa791906125de565b611ab290600a612887565b611abc9086612896565b9050600085118015611ada5750601154611ad7906001612687565b85105b611b4c5760405162461bcd60e51b815260206004820152603160248201527f526174696e672073697a652073686f756c64206265207365742062792074686560448201527f20736572766963652070726f76696465720000000000000000000000000000006064820152608401610835565b6040516370a0823160e01b815230600482015281906001600160a01b038416906370a0823190602401602060405180830381865afa158015611b92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611bb6919061263b565b11611c295760405162461bcd60e51b815260206004820152602d60248201527f546865207365727669636520686173206e6f204558434420746f20706179206660448201527f6f722074686520726174696e67000000000000000000000000000000000000006064820152608401610835565b6004846001600160a01b031663c19d93fb6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611c69573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611c8d91906128e5565b6004811115611c9e57611c9e6128cf565b14611ceb5760405162461bcd60e51b815260206004820181905260248201527f526571756972657320696e61637469766520636f6e74726163742073746174656044820152606401610835565b601080546001810182556000919091527f1b6847dc741a1b0cd08d278845f9d819d87b734759afb55fe2de5cb82a9ae6720185905560405163095ea7b360e01b8152306004820152602481018290526001600160a01b0383169063095ea7b3906044016020604051808303816000875af1158015611d6d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d919190612906565b5060405163a9059cbb60e01b81526001600160a01b0384811660048301526024820183905283169063a9059cbb906044016020604051808303816000875af1158015611de1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611e059190612906565b5050506001600160a01b0316600090815260166020526040902080546001600160a01b03191690555050565b600e8181548110610af757600080fd5b60607f1b1d6daa0713d43f2f00de83db8637c0bad175a2741c64242b56899ba3dcdc01611e6d81611f9c565b600d805480602002602001604051908101604052809291908181526020018280548015611ec357602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611ea5575b505050505091505090565b600082815260208190526040902060010154611ee981611f9c565b6108488383612148565b6003546040516370a0823160e01b815230600482015260009182916001600160a01b03909116906370a0823190602401602060405180830381865afa158015611f40573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b2919061263b565b6000611f6f81611f9c565b50600380546001600160a01b039092166001600160a01b0319928316811790915560058054909216179055565b61105b8133612252565b60035460405163095ea7b360e01b8152306004820152602481018390526000916001600160a01b03169063095ea7b3906044016020604051808303816000875af1158015611ff8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061201c9190612906565b5060035460405163a9059cbb60e01b81526001600160a01b038581166004830152602482018590529091169063a9059cbb906044016020604051808303816000875af1158015612070573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120949190612906565b5060019392505050565b6000828152602081815260408083206001600160a01b038516845290915281205460ff16612140576000838152602081815260408083206001600160a01b03861684529091529020805460ff191660011790556120f83390565b6001600160a01b0316826001600160a01b0316847f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45060016107b2565b5060006107b2565b6000828152602081815260408083206001600160a01b038516845290915281205460ff1615612140576000838152602081815260408083206001600160a01b0386168085529252808320805460ff1916905551339286917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45060016107b2565b600060646006546121dc91906128ad565b9050600081600b546121ee9190612896565b9050600082600c546122009190612896565b9050600061220e8284612687565b60065461221b9190612923565b600154909150612234906001600160a01b031684611fa6565b5060095461224b906001600160a01b031682611fa6565b5050505050565b6000828152602081815260408083206001600160a01b038516845290915290205460ff166122be576040517fe2517d3f0000000000000000000000000000000000000000000000000000000081526001600160a01b038216600482015260248101839052604401610835565b5050565b6117008061293783390190565b6000602082840312156122e157600080fd5b81357fffffffff000000000000000000000000000000000000000000000000000000008116811461231157600080fd5b9392505050565b6001600160a01b038116811461105b57600080fd5b6000806040838503121561234057600080fd5b82359150602083013561235281612318565b809150509250929050565b60006020828403121561236f57600080fd5b813561231181612318565b6000806040838503121561238d57600080fd5b823561239881612318565b9150602083013561235281612318565b6000602082840312156123ba57600080fd5b5035919050565b602081526000825180602084015260005b818110156123ef57602081860181015160408684010152016123d2565b506000604082850101526040601f19601f83011684010191505092915050565b801515811461105b57600080fd5b60008060006060848603121561243257600080fd5b833561243d8161240f565b95602085013595506040909401359392505050565b634e487b7160e01b600052604160045260246000fd5b60006020828403121561247a57600080fd5b813567ffffffffffffffff81111561249157600080fd5b8201601f810184136124a257600080fd5b803567ffffffffffffffff8111156124bc576124bc612452565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156124eb576124eb612452565b60405281815282820160200186101561250357600080fd5b81602084016020830137600091810160200191909152949350505050565b602080825282518282018190526000918401906040840190835b818110156125625783516001600160a01b031683526020938401939092019160010161253b565b509095945050505050565b602080825282518282018190526000918401906040840190835b81811015612562578351835260209384019390920191600101612587565b6000806000606084860312156125ba57600080fd5b833592506020840135915060408401356125d381612318565b809150509250925092565b6000602082840312156125f057600080fd5b815160ff8116811461231157600080fd5b600181811c9082168061261557607f821691505b60208210810361263557634e487b7160e01b600052602260045260246000fd5b50919050565b60006020828403121561264d57600080fd5b5051919050565b60006020828403121561266657600080fd5b815161231181612318565b634e487b7160e01b600052601160045260246000fd5b808201808211156107b2576107b2612671565b601f821115610a5457806000526020600020601f840160051c810160208510156126c15750805b601f840160051c820191505b8181101561224b57600081556001016126cd565b815167ffffffffffffffff8111156126fb576126fb612452565b61270f816127098454612601565b8461269a565b6020601f821160018114612743576000831561272b5750848201515b600019600385901b1c1916600184901b17845561224b565b600084815260208120601f198516915b828110156127735787850151825560209485019460019092019101612753565b50848210156127915786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b6001815b60018411156127db578085048111156127bf576127bf612671565b60018416156127cd57908102905b60019390931c9280026127a4565b935093915050565b6000826127f2575060016107b2565b816127ff575060006107b2565b8160018114612815576002811461281f5761283b565b60019150506107b2565b60ff84111561283057612830612671565b50506001821b6107b2565b5060208310610133831016604e8410600b841016171561285e575081810a6107b2565b61286b60001984846127a0565b806000190482111561287f5761287f612671565b029392505050565b600061231160ff8416836127e3565b80820281158282048414176107b2576107b2612671565b6000826128ca57634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052602160045260246000fd5b6000602082840312156128f757600080fd5b81516005811061231157600080fd5b60006020828403121561291857600080fd5b81516123118161240f565b818103818111156107b2576107b261267156fe60c0604052600c805461ffff60a01b191690556000600d5534801561002357600080fd5b506040516117003803806117008339810160408190526100429161011e565b6001600160a01b03808916608052871660a0819052600980546001600160a01b0319169091179055600486905560058590554260065560008490556100886064856101b1565b6001819055600454610099916101d3565b60028190556000546100ab91906101f0565b600355600892909255600c80546001600160a81b0319166001600160a01b0393841617600160a01b17905560078054919092166001600160a01b03199091161790555050600e805460ff1916905550610203915050565b80516001600160a01b038116811461011957600080fd5b919050565b600080600080600080600080610100898b03121561013b57600080fd5b61014489610102565b975061015260208a01610102565b60408a015160608b015160808c015160a08d0151939a5091985096509450925061017e60c08a01610102565b915061018c60e08a01610102565b90509295985092959890939650565b634e487b7160e01b600052601160045260246000fd5b6000826101ce57634e487b7160e01b600052601260045260246000fd5b500490565b80820281158282048414176101ea576101ea61019b565b92915050565b818103818111156101ea576101ea61019b565b60805160a0516114ae610252600039600081816102b10152818161038a01528181610f110152818161100b01526110c00152600081816103260152818161059e0152610f9801526114ae6000f3fe608060405234801561001057600080fd5b50600436106101ae5760003560e01c80639e01ff2e116100ee578063a6abf16a11610097578063c19d93fb11610071578063c19d93fb14610348578063cf09e0d014610362578063d17c2b541461036b578063e6c7c4561461037e57600080fd5b8063a6abf16a146102f5578063ab460a2614610319578063b9780f331461032157600080fd5b8063a0c97bce116100c8578063a0c97bce146102dc578063a166fdb7146102e4578063a3f8a30a146102ed57600080fd5b80639e01ff2e146102995780639e573665146102ac578063a035b1fe146102d357600080fd5b806363bd1d4a1161015b5780637150d8ae116101355780637150d8ae1461026c57806373f425611461027f57806373fac6f01461028857806380f474f61461029057600080fd5b806363bd1d4a146102455780636d534a141461024e57806370ba11131461026357600080fd5b80635b8d02d71161018c5780635b8d02d7146101f2578063618260451461021d578063623bf83d1461023257600080fd5b80630d668087146101b3578063313ce567146101cf5780633a4b4532146101e9575b600080fd5b6101bc60055481565b6040519081526020015b60405180910390f35b6101d7610386565b60405160ff90911681526020016101c6565b6101bc60025481565b600c54610205906001600160a01b031681565b6040516001600160a01b0390911681526020016101c6565b61023061022b36600461114d565b610411565b005b600954610205906001600160a01b031681565b6101bc60035481565b610256610607565b6040516101c69190611206565b6101bc60015481565b600754610205906001600160a01b031681565b6101bc60085481565b610230610695565b6101bc600d5481565b6102306102a736600461114d565b610710565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b6101bc60005481565b6102306108a8565b6101bc60045481565b610256610ae5565b600c5461030990600160a81b900460ff1681565b60405190151581526020016101c6565b610230610af2565b6102057f000000000000000000000000000000000000000000000000000000000000000081565b600e546103559060ff1681565b6040516101c6919061126a565b6101bc60065481565b610230610379366004611292565b610c96565b6101bc610ed6565b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015610402575060408051601f3d908101601f191682019092526103ff918101906112ab565b60015b61040c5750600090565b919050565b600080600e5460ff16600481111561042b5761042b611254565b146104495760405163baf3f0f760e01b815260040160405180910390fd5b6007546001600160a01b03163314610474576040516386efbb5560e01b815260040160405180910390fd5b6000306001600160a01b031663e6c7c4566040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d891906112d5565b905060005481146105565760405162461bcd60e51b815260206004820152602260248201527f506c656173652073656e6420696e2074686520707572636861736520616d6f7560448201527f6e7400000000000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b600e805460ff19166001179055600b61056f8482611376565b506040517f4791abe10000000000000000000000000000000000000000000000000000000081523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690634791abe190602401600060405180830381600087803b1580156105ea57600080fd5b505af11580156105fe573d6000803e3d6000fd5b50505050505050565b600b8054610614906112ee565b80601f0160208091040260200160405190810160405280929190818152602001828054610640906112ee565b801561068d5780601f106106625761010080835404028352916020019161068d565b820191906000526020600020905b81548152906001019060200180831161067057829003601f168201915b505050505081565b6007546001600160a01b031633146106c0576040516386efbb5560e01b815260040160405180910390fd5b600280600e5460ff1660048111156106da576106da611254565b146106f85760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff1916600417905561070d610f82565b50565b600180600e5460ff16600481111561072a5761072a611254565b146107485760405163baf3f0f760e01b815260040160405180910390fd5b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa15801561079b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107bf91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610819573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061083d9190611435565b6108895760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600e805460ff19166002179055600a6108a28482611376565b50505050565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa1580156108fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091f91906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610979573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061099d9190611435565b6109e95760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600280600e5460ff166004811115610a0357610a03611254565b14610a215760405163baf3f0f760e01b815260040160405180910390fd5b600554600654610a319190611457565b421015610acc5760405162461bcd60e51b815260206004820152605260248201527f506c65617365207761697420756e74696c20746865206d6f6e6579206973207260448201527f656c65617365642066726f6d206465706f736974206f7220746865206275796560648201527f7220636f6e6669726d7320726563656976650000000000000000000000000000608482015260a40161054d565b600e805460ff19166004179055610ae1610f82565b5050565b600a8054610614906112ee565b600c54604080516305a881ff60e21b815290516001600160a01b039092169182916391d148549183916316a207fc9160048083019260209291908290030181865afa158015610b45573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b6991906112d5565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b1681526004810191909152336024820152604401602060405180830381865afa158015610bc3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610be79190611435565b610c335760405162461bcd60e51b815260206004820152601760248201527f5265737472696374656420746f206f70657261746f722e000000000000000000604482015260640161054d565b600180600e5460ff166004811115610c4d57610c4d611254565b14610c6b5760405163baf3f0f760e01b815260040160405180910390fd5b600e805460ff19166004179055600754600054610c91916001600160a01b031690610fd3565b505050565b600480600e5460ff166004811115610cb057610cb0611254565b14610cce5760405163baf3f0f760e01b815260040160405180910390fd5b600c54600160a81b900460ff161580610ce75750600d54155b610d335760405162461bcd60e51b815260206004820152601560248201527f526174696e6720697320616c7265616479207365740000000000000000000000604482015260640161054d565b600c546001600160a01b03168215801590610db95750806001600160a01b031663374558126040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d87573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dab91906112d5565b610db6906001611457565b83105b610e2b5760405162461bcd60e51b815260206004820152603160248201527f526174696e672073697a652073686f756c64206265207365742062792074686560448201527f20736572766963652070726f7669646572000000000000000000000000000000606482015260840161054d565b600d8390556040517fbfcd0fc5000000000000000000000000000000000000000000000000000000008152600481018490526001600160a01b0382169063bfcd0fc590602401600060405180830381600087803b158015610e8b57600080fd5b505af1158015610e9f573d6000803e3d6000fd5b5050600c80547fffffffffffffffffffff00ffffffffffffffffffffffffffffffffffffffffff16600160a81b1790555050505050565b6040517f70a0823100000000000000000000000000000000000000000000000000000000815230600482015260009081906001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906370a0823190602401602060405180830381865afa158015610f58573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f7c91906112d5565b92915050565b600e805460ff19166004179055600254610fbd907f000000000000000000000000000000000000000000000000000000000000000090610fd3565b50600c5460035461070d916001600160a01b0316905b6040517f095ea7b3000000000000000000000000000000000000000000000000000000008152306004820152602481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063095ea7b3906044016020604051808303816000875af115801561105c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110809190611435565b506040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b038481166004830152602482018490527f0000000000000000000000000000000000000000000000000000000000000000169063a9059cbb906044016020604051808303816000875af1158015611109573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061112d9190611435565b5060019392505050565b634e487b7160e01b600052604160045260246000fd5b60006020828403121561115f57600080fd5b813567ffffffffffffffff81111561117657600080fd5b8201601f8101841361118757600080fd5b803567ffffffffffffffff8111156111a1576111a1611137565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156111d0576111d0611137565b6040528181528282016020018610156111e857600080fd5b81602084016020830137600091810160200191909152949350505050565b602081526000825180602084015260005b818110156112345760208186018101516040868401015201611217565b506000604082850101526040601f19601f83011684010191505092915050565b634e487b7160e01b600052602160045260246000fd5b602081016005831061128c57634e487b7160e01b600052602160045260246000fd5b91905290565b6000602082840312156112a457600080fd5b5035919050565b6000602082840312156112bd57600080fd5b815160ff811681146112ce57600080fd5b9392505050565b6000602082840312156112e757600080fd5b5051919050565b600181811c9082168061130257607f821691505b60208210810361132257634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115610c9157806000526020600020601f840160051c8101602085101561134f5750805b601f840160051c820191505b8181101561136f576000815560010161135b565b5050505050565b815167ffffffffffffffff81111561139057611390611137565b6113a48161139e84546112ee565b84611328565b6020601f8211600181146113d857600083156113c05750848201515b600019600385901b1c1916600184901b17845561136f565b600084815260208120601f198516915b8281101561140857878501518255602094850194600190920191016113e8565b50848210156114265786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b60006020828403121561144757600080fd5b815180151581146112ce57600080fd5b80820180821115610f7c57634e487b7160e01b600052601160045260246000fdfea26469706673582212201d40811dc8e4d28c088ead892b195cff48ed0e68b8e953c3d79db3581be13f6764736f6c634300081a0033a2646970667358221220f0372241cadf287c4bd63f3af492affbc2dac8fda80326397897cc7596a1901064736f6c634300081a00339abc57040bfcfa57b85b08824ec5ac8a2760aa67e3edf2af636feb2f0b09ff6fa2646970667358221220f0b405a6e4ea0c4c1849425aac3e332708a2b11f9b72e3cff4d4dbae0873276564736f6c634300081a0033",m=t.ExchangeToken__factory=function(e){function t(){var e;(0,r.default)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=a.length>1?s(this,t,[].concat(a)):s(this,t,[b,y,a[0]]),(0,i.default)(e)}return(0,u.default)(t,e),(0,a.default)(t,[{key:"getDeployTransaction",value:function(e,n,r,a){return(0,l.default)((0,d.default)(t.prototype),"getDeployTransaction",this).call(this,e,n,r,a||{})}},{key:"deploy",value:function(e,n,r,a){return(0,l.default)((0,d.default)(t.prototype),"deploy",this).call(this,e,n,r,a||{})}},{key:"connect",value:function(e){return(0,l.default)((0,d.default)(t.prototype),"connect",this).call(this,e)}}],[{key:"createInterface",value:function(){return new c.Interface(b)}},{key:"connect",value:function(e,t){return new c.Contract(e,b,t)}}])}(c.ContractFactory);m.bytecode=y,m.abi=b}.apply(t,r))||(e.exports=a)},886947:(e,t,n)=>{var r,a;r=[t,n(681170),n(368567),n(856725)],void 0===(a=function(e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ExchangeContract__factory",{enumerable:!0,get:function(){return t.ExchangeContract__factory}}),Object.defineProperty(e,"ExchangeService__factory",{enumerable:!0,get:function(){return n.ExchangeService__factory}}),Object.defineProperty(e,"ExchangeToken__factory",{enumerable:!0,get:function(){return r.ExchangeToken__factory}})}.apply(t,r))||(e.exports=a)},675259:(e,t,n)=>{var r,a;r=[t,n(166943),n(886947)],void 0===(a=function(e,n,r){"use strict";function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.openzeppelin=t.contracts=void 0,n=i(n),t.openzeppelin=n,r=i(r),t.contracts=r}.apply(t,r))||(e.exports=a)},936366:(e,t,n)=>{var r,a;r=[t,n(675259),n(379961),n(24556),n(362106),n(902012),n(242006),n(412472),n(434001),n(723437),n(497575),n(615966),n(681170),n(368567),n(856725)],void 0===(a=function(e,n,r,a,i,o,l,d,u,c,f,s,p,b,y){"use strict";function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AccessControl__factory",{enumerable:!0,get:function(){return r.AccessControl__factory}}),Object.defineProperty(e,"ERC165__factory",{enumerable:!0,get:function(){return f.ERC165__factory}}),Object.defineProperty(e,"ERC20__factory",{enumerable:!0,get:function(){return d.ERC20__factory}}),Object.defineProperty(e,"ExchangeContract__factory",{enumerable:!0,get:function(){return p.ExchangeContract__factory}}),Object.defineProperty(e,"ExchangeService__factory",{enumerable:!0,get:function(){return b.ExchangeService__factory}}),Object.defineProperty(e,"ExchangeToken__factory",{enumerable:!0,get:function(){return y.ExchangeToken__factory}}),Object.defineProperty(e,"IAccessControl__factory",{enumerable:!0,get:function(){return a.IAccessControl__factory}}),Object.defineProperty(e,"IERC1155Errors__factory",{enumerable:!0,get:function(){return i.IERC1155Errors__factory}}),Object.defineProperty(e,"IERC165__factory",{enumerable:!0,get:function(){return s.IERC165__factory}}),Object.defineProperty(e,"IERC20Errors__factory",{enumerable:!0,get:function(){return o.IERC20Errors__factory}}),Object.defineProperty(e,"IERC20Metadata__factory",{enumerable:!0,get:function(){return u.IERC20Metadata__factory}}),Object.defineProperty(e,"IERC20__factory",{enumerable:!0,get:function(){return c.IERC20__factory}}),Object.defineProperty(e,"IERC721Errors__factory",{enumerable:!0,get:function(){return l.IERC721Errors__factory}}),t.factories=void 0,n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n),t.factories=n}.apply(t,r))||(e.exports=a)},110229:(e,t,n)=>{var r,a;r=[t,n(248389)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.userDocKey=t.publicPartyPref=t.migrationKey=t.loaderURI=t.googleDocumentKey=t.ffMpegWasmBaseUrl=t.encoderProjectTypes=t.domain=t.defaultFolders=t.dbID=t.contactPrefix=t.colors=t.cdndomain=t.appDirectory=t.MEDIA=void 0;var r=t.migrationKey="afanassii25662",a=(t.dbID=r,t.userDocKey="userDoc",t.domain="https://www.starpy.me/",t.cdndomain="https://cdn.starpy.me/",t.contactPrefix="contact_",t.publicPartyPref="public_party_");t.ffMpegWasmBaseUrl="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd",t.appDirectory="starp",t.encoderProjectTypes=[n.FolderType.encoder,n.FolderType.editor],t.googleDocumentKey="google_document",t.defaultFolders=["demo","new","nearby",a,"tutorial","new_editor","new_media","new_chat","new_encoder"],t.loaderURI="https://raw.githubusercontent.com/AboutReact/sampleresource/master/old_logo.png",t.MEDIA=[{id:"sintel",title:"Sintel",thumbnail:"https://starpy.me/webapp/sintel.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10&dn=Sintel&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fsintel.torrent"},{id:"tears",title:"Tears of Steel",thumbnail:"https://starpy.me/webapp/tearsOfSteel.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:209c8226b299b308beaf2b9cd3fb49212dbd13ec&dn=Tears+of+Steel&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Ftears-of-steel.torrent"},{id:"cosmoslaundromat",title:"Cosmos Laundromat",thumbnail:"https://starpy.me/webapp/cosmosLaundromat.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:c9e15763f722f23e98a29decdfae341b98d53056&dn=Cosmos+Laundromat&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fcosmos-laundromat.torrent"},{id:"bbb",title:"Big Buck Bunny",thumbnail:"https://starpy.me/webapp/bigBuckBunny.jpg",folderId:"demo",extractor:"wt",url:"magnet:?xt=urn:btih:dd8255ecdc7ca55fb0bbf81323d87062db1f6d1c&dn=Big+Buck+Bunny&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.fastcast.nz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com&ws=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2F&xs=https%3A%2F%2Fwebtorrent.io%2Ftorrents%2Fbig-buck-bunny.torrent"}],t.colors={textColor:"white",backgroundColor:"black",mediaItemTextColor:"palegoldenrod",mediaBackgroundColor:"#2b2b2b",mediaBorderColor:"black",navTextColor:"#e1d76a",navInactiveColor:"#585858",folderColor:"#585858",folderTextColor:"black",deleteBackgroundColor:"red",deleteTextColor:"black",navBorderColor:"#585858",contactItemBackgroundColor:"#2b2b2b",contactItemTitleColor:"#e1d76a",contactItemOnlineColor:"green",theme:"dark",currentUserColor:"#585858",remoteUserColor:"cornflowerblue"}}.apply(t,r))||(e.exports=a)},499151:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(926516),n(933710),n(140422),n(248389),n(932779),n(775942)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.writeItem=t.queryClient=t.initDatabaseRecord=t.indexAllFoldersForDB=t.getUserData=t.getPublicFolderContent=t.getFoldersByType=t.getFolderContent=t.getById=t.findByOriginalId=t.findBy=t.evolu=t.defaultDBName=t.dbSocket=t.dbMnemoCons=t.createDBConn=void 0,r=f(r),a=f(a),i=f(i),u=f(u);var s=t.queryClient=new c.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}}}),p=(0,o.database)({item:l.ItemTable}),b={},y=t.dbMnemoCons={},m=t.defaultDBName="starpy2",v=t.createDBConn=function(e,n,r){if(void 0===e&&(e=""+m),b[e])return b[e];if(n&&y[n])return y[n];var i={name:e,syncUrl:"https://db.starpy.me",enableWebsocketConnection:!0};n&&(i.mnemonic=n);var l=(0,o.createEvolu)(p,i);return e===m&&l.socket.then((function(e){t.dbSocket=e,console.info("dbSocket",e)})),b[e]=l,n&&(y[n]=l),!0===r?new Promise((function(t){h(l).then((function(){return t(l)})),l.subscribeSyncState((0,a.default)((function*(){"SyncStateIsSynced"===l.getSyncState()._tag&&(g[e]||(g[e]=!0),s.refetchQueries("folderContent_"+e),h(l))})))})):l},g={},h=t.indexAllFoldersForDB=function(){var e=(0,a.default)((function*(e){try{var t=null==e?void 0:e.createQuery((function(e){return e.selectFrom("item").selectAll().where("mnemonic","is not",null).where("isDeleted","is",null)})),n=(yield null==e?void 0:e.loadQuery(t)).rows.map(function(){var t=(0,a.default)((function*(t){var n=Object.assign({},t,t.item);n.isDeleted||(g[n.id]||(g[n.id]=!0,b[n.id]=e),n.isAuction&&s.refetchQueries("auction_"+n.id),n.isEditorProject&&(s.refetchQueries(["projectLayers",n.id]),s.refetchQueries(n.id+"_comments")),s.refetchQueries("folderContent_"+n.id))}));return function(e){return t.apply(this,arguments)}}()).filter((function(e){return e}));yield Promise.all(n)}catch(r){console.error(r)}}));return function(t){return e.apply(this,arguments)}}(),w=(t.getUserData=function(){var e=(0,a.default)((function*(){var e=yield I("userDoc",!0),t=(0,r.default)(e,1)[0],n=yield I("isDevice",!0);return Object.assign({},t,{},{devices:n})}));return function(){return e.apply(this,arguments)}}(),t.getFolderContent=function(){var e=(0,a.default)((function*(e,t){var n,r,a=O;if(t)a=yield v(e,t,!0);else{var i=yield S(e);i&&i.mnemonic&&(a=yield v(e,i.mnemonic,!0))}var o=null==(n=a)?void 0:n.createQuery((function(t){return t.selectFrom("item").selectAll().where("folderId","=",e).where("isDeleted","is",null).orderBy("orderId","asc").orderBy("lastUpdated","desc")}));return(yield null==(r=a)?void 0:r.loadQuery(o)).rows.map((function(e){return e.item}))}));return function(t,n){return e.apply(this,arguments)}}()),P=(t.getPublicFolderContent=function(){var e=(0,a.default)((function*(e){return w(e)}));return function(t){return e.apply(this,arguments)}}(),t.getFoldersByType=function(){var e=(0,a.default)((function*(e,t){var n=void 0!==t?yield v(t,t):O,r=n.createQuery((function(t){return t.selectFrom("item").selectAll().where("folderType","=",e).where("folderId","is",null).where("isDeleted","is",null).orderBy("orderId","asc").orderBy("lastUpdated","desc")})),a=yield null==n?void 0:n.loadQuery(r);return console.info("folders",a.rows,t),a.rows.map((function(e){return e.item}))}));return function(t,n){return e.apply(this,arguments)}}()),E=t.writeItem=function(){var e=(0,a.default)((function*(e,t){var n,r=new URL(null==(n=window)||null==(n=n.location)?void 0:n.toString()).searchParams.get("parentFolderId"),a=e.orderId||1;if(e.mnemonic&&e.isEditorComment)t=yield v(e.folderId,e.mnemonic),a=e.orderId||(yield w(e.folderId,e.mnemonic)).length;else if(e.folderId||r){var i=yield S(e.folderId||r);i&&i.mnemonic&&(t=yield v(e.folderId,i.mnemonic),(e.isFolder||e.isEditorLayer||e.isEditorProject)&&(e.mnemonic=i.mnemonic,b[e.id]=t,!0),(e.isMediaNew||e.isEncoderProject)&&(e.extractor="wt")),a=e.orderId||(yield w(e.folderId)).length}e.orderId=a;var o=yield(t||O).createOrUpdate("item",{id:e.id,title:e.title,name:e.name,item:e,isFolder:e.isFolder,isContact:e.isContact,isMediaNew:e.isMediaNew,isDevice:e.isDevice,userDoc:e.userDoc,folderId:e.folderId,folderType:e.folderType,chatId:e.chatId,createdAt:e.createdAt,isDeleted:e.isDeleted,isEditorProject:e.isDeleted,isEditorLayer:e.isDeleted,orderId:a,mediaId:e.mediaId,auctionId:e.auctionId,mnemonic:e.mnemonic,lastUpdated:(new Date).valueOf()});return e.mnemonic&&e.isFolder&&!t&&(console.info("create a new index for a new folder"),t=yield v(e.id,e.mnemonic,!0)),o}));return function(t,n){return e.apply(this,arguments)}}(),I=(t.findByOriginalId=function(){var e=(0,a.default)((function*(e){return I("originalId",e)}));return function(t){return e.apply(this,arguments)}}(),t.findBy=function(){var e=(0,a.default)((function*(e,t){var n=null==O?void 0:O.createQuery((function(n){return n.selectFrom("item").selectAll().where(e,"=",t)}));return(yield null==O?void 0:O.loadQuery(n)).rows.map((function(e){return e.item}))}));return function(t,n){return e.apply(this,arguments)}}()),S=t.getById=function(){var e=(0,a.default)((function*(e,t){var n,r,i,o,l,d,u=O;if(t&&!(u=b[t])&&e!==t){var c=yield S(t);u=null!=c&&c.mnemonic?yield v(c.id,c.mnemonic):O}var f=null==(n=u)?void 0:n.createQuery((function(t){return t.selectFrom("item").selectAll().where("id","=",e)})),s=yield null==(r=u)?void 0:r.loadQuery(f),p=null==s||null==(i=s.row)?void 0:i.item;if((null!=(o=p)&&o.isFolder||null!=(l=p)&&l.isEditorLayer||null!=(d=p)&&d.isEditorProject)&&!b[p.id]&&p.mnemonic&&(b[p]=u),!p&&""!==e&&void 0!==e&&null!==e&&b[e]&&e!==t)return yield S(e,e);if(!p){var y=yield Promise.all(Object.keys(b).map(function(){var e=(0,a.default)((function*(e){return yield b[e].loadQuery(f)}));return function(t){return e.apply(this,arguments)}}())),m=y.filter((function(e){return e.rows.length})).flat();console.info("i",y,m),m.length&&(p=m[0].row.item)}return p}));return function(t,n){return e.apply(this,arguments)}}(),O=(t.initDatabaseRecord=function(){var e=(0,a.default)((function*(e,t,n){var r,a;if(!n&&(console.info("checking for database record for initial db ",m),(a=yield P(d.FolderType.database)).length)){var o=a.find((function(e){return e.mnemonic===t}));if(o)return o}var l=i.default.v4().toString(),u={id:l,title:e+"_"+l,mnemonic:t,isDatabase:!0,folderType:d.FolderType.database,date:(new Date).valueOf(),added:(new Date).valueOf().toString(),orderId:(null==(r=a)?void 0:r.length)+1||2,userId:"super"};return yield E(u,n)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.evolu=v())}.apply(t,r))||(e.exports=a)},809531:(e,t,n)=>{var r,a;r=[t,n(41132),n(29293),n(110229),n(361866),n(926516),n(248389),n(499151)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var f={createUser:!0,createNewUser:!0,doInitialMigration:!0};t.doInitialMigration=t.createUser=t.createNewUser=void 0,r=c(r),a=c(a),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(f,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),l=c(l);var s={id:"folder01",title:"My First Folder",isFolder:!0},p=t.createUser=function(){var e=(0,a.default)((function*(){var e=o.faker.image.cats(),t=o.faker.name.fullName(),n=o.faker.animal.cat(),r="19"+new Date(o.faker.date.birthdate()).getFullYear(),a=l.default.v4().toString();return{handle:"@"+(t+n+r).replace(/[^A-Z0-9]+/gi,""),photo:e,name:t,description:n,year:r,id:a,idHash:a,userDoc:!0,version:i.migrationKey,prevVersion:""}}));return function(){return e.apply(this,arguments)}}(),b=t.createNewUser=function(){var e=(0,a.default)((function*(e){try{var t=yield p();return console.info("==== creating temp user ====",t),yield e(t),t}catch(n){console.error("==== error on creating a new user ====",n)}}));return function(t){return e.apply(this,arguments)}}();t.doInitialMigration=function(){var e=(0,a.default)((function*(){console.info("==== do migration ====");try{var e=yield(0,u.getUserData)();if(console.info("initialMigrationUserCheck",e),e&&e.id)return e;e&&e.id||(e=yield b(u.writeItem));var t=e.id;yield Promise.all([(0,u.writeItem)(Object.assign({},s,{title:"Demo",id:"demo",folderType:d.FolderType.media,date:(new Date).toISOString(),userId:t}))].concat((0,r.default)(i.MEDIA.map(function(){var e=(0,a.default)((function*(e){return(0,u.writeItem)(Object.assign({},e,{isMediaNew:!0,folderId:"demo",date:(new Date).valueOf()}))}));return function(t){return e.apply(this,arguments)}}()))))}catch(n){console.error("====migration err===",n)}console.info("==== after migration ====")}));return function(){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},539589:(e,t,n)=>{var r,a;r=[t,n(29293),n(499151),n(248389)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.getDatabases=void 0,r=o(r);t.getDatabases=function(){var e=(0,r.default)((function*(){try{a.evolu&&(yield(0,a.initDatabaseRecord)("starpy2",a.evolu.getOwner().mnemonic))}catch(e){console.error(e)}return yield(0,a.getFoldersByType)(i.FolderType.database)}));return function(){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},140422:(e,t,n)=>{var r,a;r=[t,n(554377),n(954347)],void 0===(a=function(e,n,r){"use strict";function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.ItemTable=void 0;var i=(n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n)).Struct({foo:n.String,bar:n.Boolean}),o=(0,r.id)("Item");t.ItemTable=(0,r.table)({id:o,name:r.String1000,title:r.String1000,isCompleted:r.SqliteBoolean,item:i,isMediaNew:r.SqliteBoolean,isContact:r.SqliteBoolean,folderId:r.String1000,isDevice:r.SqliteBoolean,isFolder:r.SqliteBoolean,folderType:r.String1000,userDoc:r.SqliteBoolean,chatId:r.String1000,orderId:r.String1000,mediaId:r.String1000,auctionId:r.String1000,lastUpdated:r.String1000,isEditorProject:r.SqliteBoolean,isEditorLayer:r.SqliteBoolean,isDatabase:r.SqliteBoolean,isAuction:r.SqliteBoolean,mnemonic:r.String1000})}.apply(t,r))||(e.exports=a)},277542:(e,t,n)=>{var r,a;r=[t,n(29293),n(444343),n(826878)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.getTotalTime=t.getProjectMedia=t.getNextActiveProjectMedia=t.getActiveProjectLayer=void 0,r=o(r);var l=t.getActiveProjectLayer=function(e,t,n){var r;void 0===n&&(n="video");for(var a,o=0,l=0;void 0===(null==(d=r)?void 0:d.id);){var d,u,c,f;if(a=e[o],o>e.length+1)throw console.error("layers",e,o),"no_layer_found";if(void 0!==(null==(u=a)?void 0:u.id))if("video"!==n||!0!==(null==(c=a)||null==(c=c.editor)?void 0:c.videoDisabled))if("audio"!==n||!0!==(null==(f=a)||null==(f=f.editor)?void 0:f.muted))r=a.media.reduce((function(e,n){var r,a;return e.id?e:(e+=((null==n||null==(r=n.encoding)?void 0:r.end)||(null==n?void 0:n.duration)||i.defaultVideoDuration)-((null==n||null==(a=n.encoding)?void 0:a.start)||0))>=t?n:(l=e,e)}),0),o++;else o++;else o++;else o++}return{offset:l,layer:a,activeLayer:o,activeMedia:r}},d=t.getNextActiveProjectMedia=function(e,t,n){var r,a,i=((null==n||null==(r=n.encoding)?void 0:r.end)||(null==n?void 0:n.duration))-((null==n||null==(a=n.encoding)?void 0:a.start)||0);return l(e,t+i+1)},u=t.getTotalTime=function(e){return e.reduce((function(e,t){var n,r=null==(n=t.media)?void 0:n.reduce((function(e,t){var n,r;return e+=((null==t||null==(n=t.encoding)?void 0:n.end)||(null==t?void 0:t.duration))-((null==t||null==(r=t.encoding)?void 0:r.start)||0)}),0);return r?e>r?e:r>e?r:void 0:e}),0)};t.getProjectMedia=function(){var e=(0,r.default)((function*(e,t,n){var i,o,c=l(e,t),f=c.offset,s=c.layer,p=c.activeLayer,b=c.activeMedia,y=t-f+parseFloat((null==b?void 0:b.encoding.start)||"0"),m=u(e);console.info("getProjectMedia offset",y,t,f,null==b||null==(i=b.encoding)?void 0:i.start,null==b?void 0:b.id);var v,g,h,w=function(){var t=(0,r.default)((function*(t,i){var o=(0,a.encodeMedia)(t,n,!0);return new Promise((function(n){o.then(function(){var o=(0,r.default)((function*(r){n(r);try{var o=d(e,i,t);o&&(yield(0,a.encodeMedia)(null==o?void 0:o.activeMedia,(function(){}),!0))}catch(l){console.error("prepare next video error",l)}}));return function(e){return o.apply(this,arguments)}}())}))}));return function(e,n){return t.apply(this,arguments)}}(),P=void 0!==(null==b?void 0:b.id)?yield w(b,f):null;try{var E,I,S;h=t-(null==(E=g=l(e,t,"audio"))?void 0:E.offset)+parseFloat((null==(I=g)||null==(I=I.activeMedia)||null==(I=I.encoding)?void 0:I.start)||"0"),v=void 0!==(null==(S=g.activeMedia)?void 0:S.id)?yield w(g.activeMedia,g.offset):void 0}catch(O){console.error("audio layer error",O)}return{url:P,currentPosition:y,muted:null==s||null==(o=s.editor)?void 0:o.muted,activeMedia:b,totalTime:m,offset:f,activeLayer:p,audioLayer:g,audioUrl:v,audioPosition:h}}));return function(t,n,r){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},312515:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(147639),n(731116),n(499151),n(451378),n(964612),n(796725),n(826878),n(803998),n(101173),n(759352),n(415282),n(444343),n(277542)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v){"use strict";var g=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var h={genExecTime:!0,genRenderCmd:!0,getPreviewFromVideo:!0,generateVideoForImage:!0,generateAudioSpectrogram:!0};t.getPreviewFromVideo=t.generateVideoForImage=t.generateAudioSpectrogram=t.genRenderCmd=t.genExecTime=void 0,r=g(r),a=g(a),Object.keys(m).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(h,t)||t in e&&e[t]===m[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}}))})),Object.keys(v).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(h,t)||t in e&&e[t]===v[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}}))}));t.genExecTime=s.genExecTime,t.genRenderCmd=u.genRenderCmd;var w={};t.getPreviewFromVideo=function(){var e=(0,r.default)((function*(e){var t=yield(0,l.getById)(e.id),n=yield(0,i.getFileOpfs)(t),r=t.id+"_"+(0,i.processFileName)(null==t?void 0:t.filename);try{var a,o=r,u=o+".jpeg",f=(0,c.genPreviewFromVideoCmd)({input:o,output:u,width:t.width,height:t.height});yield(0,y.createFFmpeg)((function(){}));var s=yield(0,y.fetchFile)(n);yield y.ffmpeg.writeFile(r,s),console.info("after loading files into ffmpeg",f);var p=yield y.ffmpeg.exec(f);console.info("after exec",p,u);var b=yield y.ffmpeg.readFile(u);console.info("after processing",b),b.name=u;var m=yield null==(a=yield(0,i.writeFileOpfs)(Object.assign({},t,{filename:u}),b))?void 0:a.getFile();return t.image=yield(0,d.getBase64)(m),yield(0,l.writeItem)(t),t.image}catch(v){console.error("generate video from image err",v)}}));return function(t){return e.apply(this,arguments)}}(),t.generateVideoForImage=function(){var e=(0,r.default)((function*(e){console.info("generate video for image",e.filename);var t=e.id+"_"+(0,i.processFileName)(null==e?void 0:e.filename),n=t+".mp4",r=yield(0,i.getFileOpfs)(e);console.info(" opfsFile",r);try{var a;yield(0,y.createFFmpeg)((function(){}));var o=yield(0,y.fetchFile)(r);yield y.ffmpeg.writeFile(t,o);var l=(0,f.genVideoFromImageCmd)({input:t,width:e.width,height:e.height,output:n});console.info("after loading files into ffmpeg",l);var d=yield y.ffmpeg.exec(l);console.info("after exec",d,n);var u=yield y.ffmpeg.readFile(n);console.info("after processing",u),u.name=n,e.filename=e.filename+".mp4";var c=yield null==(a=yield(0,i.writeFileOpfs)(e,u))?void 0:a.getFile();return w[e.id]=URL.createObjectURL(c),console.info("cachedMedia for project",w[e.id]),w[e.id]}catch(s){console.error("generate video from image err",s)}}));return function(t){return e.apply(this,arguments)}}(),t.generateAudioSpectrogram=function(){var e=(0,r.default)((function*(e,t){void 0===t&&(t="big");var n=yield(0,l.getById)(e.id);console.info("generate spectrogram for media",n.filename);var r=n.id+"_"+(0,i.processFileName)(null==n?void 0:n.filename),a=yield(0,i.getFileOpfs)(n),o="big"===t?2:32,u="number"===typeof(null==n?void 0:n.duration)?parseInt(((null==n?void 0:n.duration)&&n.duration*o).toString(),10):1e3;try{var c,f=r,s=f+"."+t+".spectro.png";yield(0,y.createFFmpeg)((function(){}));var b=yield(0,y.fetchFile)(a);yield y.ffmpeg.writeFile(f,b);var m=(0,p.genSpectroGramScript)(f,s,u);console.info("after loading files into ffmpeg",m);var v=yield y.ffmpeg.exec(m);console.info("after exec",v,s);var g=yield y.ffmpeg.readFile(s);console.info("after processing",g),g.name=s;var h=yield null==(c=yield(0,i.writeFileOpfs)(Object.assign({},n,{filename:s}),g))?void 0:c.getFile();return n["audioSpectrogram_"+t]=yield(0,d.getBase64)(h),yield(0,l.writeItem)(n),n["audioSpectrogram_"+t]}catch(w){console.error("generate spectrogram error",w)}}));return function(t,n){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},415282:(e,t,n)=>{var r,a;r=[n,t,n(29293),n(932779),n(110229)],void 0===(a=function(e,r,a,i,o){"use strict";var l,d,u,c,f=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(r,"__esModule",{value:!0}),t.util=t.toBlobURL=t.ffmpeg=t.fetchFile=t.createFFmpeg=t.cancelEncoding=t.FFmpeg=void 0,a=f(a),i=f(i);t.cancelEncoding=function(){try{l.terminate()}catch(e){}},t.createFFmpeg=function(){var e=(0,a.default)((function*(e,r){u||(t.util=d=yield new Promise((function(e,t){return n.e(209).then((function(){var t=[n(996209)];(function(t){return e(p(t))}).apply(null,t)})).catch(t.bind(this))})),t.fetchFile=d.fetchFile,t.toBlobURL=c=d.toBlobURL,t.FFmpeg=u=(yield new Promise((function(e,t){return n.e(349).then((function(){var t=[n(46349)];(function(t){return e(p(t))}).apply(null,t)})).catch(t.bind(this))}))).FFmpeg),t.ffmpeg=l=new u,window.ffmpeg=l,l.on("log",(function(e){var t=e.message;console.log("ffmpeg",t),r&&r(t)})),l.on("progress",(function(t){console.info("ffmpeg progress",t),e&&e(t||0)})),yield l.load({coreURL:yield c(o.ffMpegWasmBaseUrl+"/ffmpeg-core.js","text/javascript"),wasmURL:yield c(o.ffMpegWasmBaseUrl+"/ffmpeg-core.wasm","application/wasm")})}));return function(t,n){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},444343:(e,t,n)=>{var r,a;r=[t,n(41132),n(29293),n(932779),n(147639),n(731116),n(97990),n(415282),n(803998),n(964612),n(826878)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s){"use strict";var p=n(124994);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.genExecCmd=t.execEncode=t.encodeProject=t.encodeMedia=void 0,r=p(r),a=p(a),i=p(i),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(d);var y={},m=t.encodeMedia=function(){var e=(0,a.default)((function*(e,t,n,r,a){void 0===r&&(r="user");var i=e.isCopy||e.id,l=Object.assign({},e,{id:i}),d=(0,o.getFileId)(Object.assign({},e,{id:i})),c=e.encoding,f=(null==c?void 0:c.lastUpdated)||0;console.info("cachedId",f);var s=d+(".output."+f+"."+((null==c?void 0:c.output)||"mp4"));try{if(!i||void 0===i)return;if(y[i])return y[i];if(0===f){y[i]=yield(0,o.getFileOpfs)(l);var p=yield(0,o.countIsDownloaded)(l);return p&&100===parseInt(p.toString(),10)?y[i]:"file_is_not_downloaded"}var b=yield window.navigator.storage.getDirectory(),m=yield b.getDirectoryHandle(l.folderId),h=yield m.getFileHandle(i+"_"+s),w=yield null==h?void 0:h.getFile();if(w)return y[i]=URL.createObjectURL(w),y[i]}catch(S){console.error("get cache error",S)}(0,u.cancelEncoding)(),yield(0,u.createFFmpeg)(t);try{var P;try{P=yield(0,o.getFileOpfs)(l);var E=yield(0,o.countIsDownloaded)(l);if(console.info("percent",E),!E||100!==parseInt(E.toString(),10))return"file_is_not_downloaded";if(!P)return"file_is_not_downloaded"}catch(S){return console.info("err on get encode media",S),l.torrentFile?"file_is_not_downloaded":"file_is_being_processed"}console.info("got file from opfs",P);var I=g(l,n);yield v({files:[d],encoded:[P],outFileId:s,execCmd:I,mediaOut:l,cb:t})}catch(S){console.error("ffmpeg error ",S)}}));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),v=t.execEncode=function(){var e=(0,a.default)((function*(e){console.info("execEncode",e);try{var t=e.outFileId;try{yield Promise.all(e.encoded.map(function(){var t=(0,a.default)((function*(t,n){var r=e.files[n],a=yield(0,u.fetchFile)(t);yield u.ffmpeg.writeFile(r,a)}));return function(e,n){return t.apply(this,arguments)}}()))}catch(d){throw console.error("load files in ffmpeg error",d),d}console.info("after loading files into ffmpeg",e.execCmd);var n=yield u.ffmpeg.exec(e.execCmd);console.info("after exec",n,t);var r=yield u.ffmpeg.readFile(t);console.info("after processing",r),r.name=t;var i=yield(0,o.writeFileOpfs)(Object.assign({},e.mediaOut,{filename:t}),r),l=yield i.getFile();return y[e.mediaOut.id]=URL.createObjectURL(l),console.info("cachedMedia for project",y[e.mediaOut.id]),y[e.mediaOut.id]}catch(d){throw console.error("encodeProject error",d),d}}));return function(t){return e.apply(this,arguments)}}(),g=(t.encodeProject=function(){var e=(0,a.default)((function*(e,t,n,r,a){try{var i=(0,f.genRenderCmd)(e,t,n),o=i.files.filter((function(e){return"-i"!==e}));console.info("encodeProject",e,t,n,i);var l=yield Promise.all(i.medias.map((function(e){return m(e,(function(t){console.info("encoding media",null==e?void 0:e.id,t),r&&r(t)}),n)})));return console.info("encoded",l,o,i.execCmd),(0,u.cancelEncoding)(),yield(0,u.createFFmpeg)(r,a),i.files=o,i.encoded=l.filter((function(e){return e}))||[],i.mediaOut=e,i.cb=r,i.logs=a,yield v(i)}catch(d){throw console.error("encodeproject error",d),d}}));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),t.genExecCmd=function(e,t){if(void 0===(null==e?void 0:e.id))return[];var n=e.id+"_"+(0,o.processFileName)(e.filename),a=e.encoding,i=n+(".output."+((null==a?void 0:a.lastUpdated)||0)+"."+((null==a?void 0:a.output)||"mp4")),l=null!=a&&a.code&&""!=a.code[0]?a.code.filter((function(e){return""!==e})).map((function(e){return e.trim().replace(/[\r\n]+/gm,"").trim()})):[],d=t?[]:["-ss",(0,c.genExecTime)((null==a?void 0:a.start)||0),"-to",(0,c.genExecTime)((null==a?void 0:a.end)||(null==e?void 0:e.duration)||s.defaultVideoDuration)];return["-i",""+n,"-filter_complex","scale="+((null==a?void 0:a.width)||e.width)+"x"+((null==a?void 0:a.height)||e.height),"-preset",(null==a?void 0:a.preset)||"veryfast","-movflags","+faststart"].concat(d,(0,r.default)(l),[""+i])})}.apply(t,r))||(e.exports=a)},803998:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.genExecTime=void 0;t.genExecTime=function(e,t){var n=parseInt(e.toString(),10),r=parseInt((n/60).toString(),10),a=parseInt((n-60*r).toString(),10);return 1===r.toString().length&&(r="0"+r),1===a.toString().length&&(a="0"+a),""+(t?"":"00:")+r+(t?",":":")+a}}.apply(t,[t]))||(e.exports=n)},796725:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.genPreviewFromVideoCmd=void 0;t.genPreviewFromVideoCmd=function(e){var t=e.input,n=e.output;return["-i",t,"-ss","00:00:01.000","-vf","scale="+e.width/2+":"+e.height/2+":force_original_aspect_ratio=decrease","-vframes","1",n]}}.apply(t,[t]))||(e.exports=n)},964612:(e,t,n)=>{var r,a;r=[t,n(41132),n(932779),n(97990),n(147639)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.genRenderCmd=void 0,r=l(r),a=l(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i);t.genRenderCmd=function(e,t,n){var a,i,l,d;if(void 0===(null==e?void 0:e.id)||(null==t?void 0:t.length)<1)return{execCmd:[],medias:[],files:[]};var u=e.id+"_render_",c=e.editor,f=u+(".output."+((null==c?void 0:c.lastUpdated)||0)+"."+((null==c?void 0:c.output)||"mp4")),s=null!=c&&c.code&&""!=c.code[0]?c.code.filter((function(e){return""!==e})).map((function(e){return e.trim().replace(/[\r\n]+/gm,"").trim()})):[],p=null==t?void 0:t.map((function(e){var t;return null==e||null==(t=e.media)?void 0:t.map((function(t){return Object.assign({},t,{layer:e})}))})).flat().filter((function(e){return e})),b=(null==p?void 0:p.map((function(e){var t,n;return["-i",((null==e?void 0:e.isCopy)||(null==e?void 0:e.id))+"_"+(0,o.processFileName)(null==e?void 0:e.filename)+".output."+((null==e||null==(t=e.encoding)?void 0:t.lastUpdated)||0)+"."+((null==e||null==(n=e.encoding)?void 0:n.output)||"mp4")]})).flat())||[],y=null==t?void 0:t.reduce((function(e,t){var n;return!0===e?e:!(null!=(n=t.editor)&&n.muted)}),!1),m=null==t?void 0:t.reduce((function(e,t){var n;return!0===e?e:!(null!=(n=t.editor)&&n.videoDisabled)}),!1),v=y?"[a_concat]":"",g=y?["-map",v]:[],h=m?"[v_concat]":"",w=m?["-map",h]:[],P=c.aspectRatio||"16/9",E=(null==c?void 0:c.width)||1280,I=(null==c?void 0:c.height)||720,S=(null==p?void 0:p.map((function(e,t){var n,r,a,i,o,l="["+t+":v]trim=start="+((null==e?void 0:e.encoding.start)||0)+":end="+parseInt(((null==e||null==(n=e.encoding)?void 0:n.end)||(null==e?void 0:e.duration)).toString())+",setpts=PTS-STARTPTS,"+(null==e||e.width,null==e||e.height,"setdar="+P+",scale="+E+":"+I+":force_original_aspect_ratio=decrease,pad="+E+":"+I+":(ow-iw)/"+(o=[2,2])[0]+":(oh-ih)/"+o[1]+":black,setsar=1[v"+t)+"]",d="["+t+":a]atrim=start="+((null==e?void 0:e.encoding.start)||0)+":end="+parseInt(((null==e||null==(r=e.encoding)?void 0:r.end)||(null==e?void 0:e.duration)).toString())+",asetpts=PTS-STARTPTS[a"+t+"]",u=l+","+d;return null!=e&&null!=(a=e.layer)&&null!=(a=a.editor)&&a.muted&&(u=l),null!=e&&null!=(i=e.layer)&&null!=(i=i.editor)&&i.videoDisabled&&(u=d),u})))||[],O=(null==p?void 0:p.filter((function(e){var t;return!0!==(null==e||null==(t=e.layer)||null==(t=t.editor)?void 0:t.videoDisabled)})).length)||1,_=(null==p?void 0:p.filter((function(e){var t;return!0!==(null==e||null==(t=e.layer)||null==(t=t.editor)?void 0:t.muted)})).length)||0,M=((null==p||null==(a=p.map((function(e,t){var n;if(!0!==(null==e||null==(n=e.layer)||null==(n=n.editor)?void 0:n.videoDisabled))return"[v"+t+"]"})))?void 0:a.filter((function(e){return e})).join(""))||"")+"concat=n="+O+":v=1:a=0"+h,T=_?((null==p||null==(i=p.map((function(e,t){var n;if(!0!==(null==e||null==(n=e.layer)||null==(n=n.editor)?void 0:n.muted))return"[a"+t+"]"})))||null==(i=i.filter((function(e){return e})))?void 0:i.join(""))||"")+"concat=n="+_+":v=0:a=1"+v:void 0,D=M+";"+T;T||(D=M),!M&&T&&(D=T),S.push(D);var j=S.join(";");return{execCmd:[].concat((0,r.default)(b),["-crf",(null==c||null==(l=c.compressionLevel)?void 0:l.toString())||"20","-filter_complex",j,"-aspect",P,"-preset",""+(null==c?void 0:c.preset),"-movflags","+faststart"],(0,r.default)(s),w,g,["-r",(null==c||null==(d=c.framerate)?void 0:d.toString())||"30","-y",""+f]),medias:p,files:b,outFileId:f,encoded:[]}}}.apply(t,r))||(e.exports=a)},101173:(e,t,n)=>{var r,a;r=[t,n(932779)],void 0===(a=function(e,r){"use strict";var a=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.genSpectroGramScript=void 0,r=a(r);t.genSpectroGramScript=function(e,t,n){void 0===n&&(n=2e3);var r=function(e){return e+"x140"}(n);return["-i",e,"-filter_complex","[0:a]aformat=channel_layouts=mono,compand=gain=-1,     showwavespic=s="+r+":colors=black,negate[a];     color=black:"+r+"[c];     [c][a]alphamerge","-vframes","1",t]}}.apply(t,r))||(e.exports=a)},826878:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.genVideoFromImageCmd=t.defaultVideoDuration=void 0;var n=t.defaultVideoDuration=5;t.genVideoFromImageCmd=function(e){var t=e.input,r=e.width,a=e.height,i=e.output;return["-loop","1","-i",t,"-t",n.toString(),"-vf","scale="+r+":"+a+":force_original_aspect_ratio=decrease","-r","1",i]}}.apply(t,[t]))||(e.exports=n)},147639:(e,t,n)=>{var r,a;r=[t,n(29293),n(97990),n(932779),n(612144),n(400908),n(265019),n(358205)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var f={removeObject:!0};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.removeObject=void 0,r=c(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=c(i),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(f,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(f,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))})),Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(f,t)||t in e&&e[t]===d[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))})),Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(f,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))}));t.removeObject=function(){var e=(0,r.default)((function*(e){try{var t=yield window.navigator.storage.getDirectory();if(e.isMediaNew){var n=e,r=(0,o.getFileId)(n);(yield t.getDirectoryHandle(n.folderId)).removeEntry(r)}else t.removeEntry(e.id,{recursive:!0})}catch(a){console.error("delete file rror",a)}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},670676:(e,t,n)=>{var r,a;r=[t,n(29293),n(812640),n(932779)],void 0===(a=function(e,r,a,i){"use strict";var o,l=n(124994);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createBlobDB=void 0,r=l(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=l(i);(function(){var e=(0,r.default)((function*(){o=yield a.openDatabaseAsync("blobDB7"),yield o.execAsync("\n    DROP TABLE IF EXISTS blobs;\n    CREATE TABLE IF NOT EXISTS blobs (id INTEGER PRIMARY KEY NOT NULL, data BLOB, parent VARCHAR);\n  ")}))})(),t.createBlobDB=function(){var e=(0,r.default)((function*(){return{writeBlob:function(){var e=(0,r.default)((function*(e,t){return yield o.runAsync("INSERT INTO blobs (parent, data) VALUES (?, ?)",e,t)}));return function(t,n){return e.apply(this,arguments)}}(),readBlobs:function(){var e=(0,r.default)((function*(e){var t=yield o.getAllAsync("SELECT * FROM blobs WHERE parent = ? ORDER BY id ASC limit 1000",[e]),n="DELETE FROM blobs WHERE id IN ("+t.map((function(e){return e.id})).join(",")+")";return yield o.runAsync(n),t}));return function(t){return e.apply(this,arguments)}}()}}));return function(){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},265019:(e,t,n)=>{var r,a;r=[t,n(29293),n(97990),n(786297),n(645460)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var d={checkFolderMobile:!0};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.checkFolderMobile=void 0,r=l(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));t.checkFolderMobile=function(){var e=(0,r.default)((function*(e){console.info("checkFolderMobile",e);try{var t=yield a.readDirectoryAsync(e);console.info("dirctory exists",t),t||(yield a.makeDirectoryAsync(e))}catch(n){yield a.makeDirectoryAsync(e)}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},786297:(e,t,n)=>{var r,a;r=[t,n(29293),n(553344),n(642958),n(759352)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);function d(e,t,n,r){return u.apply(this,arguments)}function u(){return(u=(0,i.default)((function*(e,t,n,r){for(var i=t;i<r;){var l=c.decode(yield(0,a.default)(o.FileSystem.readFileChunk(e,i,n,"base64")));i+=n,yield l}}))).apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),t.streamFile=void 0,t.streamFileChunks=d,r=l(r),a=l(a),i=l(i);t.streamFile=function e(t,n,a,i){var o,l=d(t,n,a,i),u=(o=l,new ReadableStream({pull:function(){var e=(0,r.default)((function*(e){var t=yield o.next(),n=t.value;t.done?e.close():e.enqueue(n)}));return function(t){return e.apply(this,arguments)}}()}));return u.clone=function(){return e(t,n,a,i)},u};var c={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var t=e.length/4*3,n=new ArrayBuffer(t);return this.decode(e,n),n},removePaddingChars:function(e){return 64==this._keyStr.indexOf(e.charAt(e.length-1))?e.substring(0,e.length-1):e},decode:function(e,t){e=this.removePaddingChars(e),e=this.removePaddingChars(e);var n,r,a,i,o,l,d,u=parseInt(e.length/4*3,10),c=0,f=0;for(n=t?new Uint8Array(t):new Uint8Array(u),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),c=0;c<u;c+=3)r=this._keyStr.indexOf(e.charAt(f++))<<2|(o=this._keyStr.indexOf(e.charAt(f++)))>>4,a=(15&o)<<4|(l=this._keyStr.indexOf(e.charAt(f++)))>>2,i=(3&l)<<6|(d=this._keyStr.indexOf(e.charAt(f++))),n[c]=r,64!=l&&(n[c+1]=a),64!=d&&(n[c+2]=i);return n}}}.apply(t,r))||(e.exports=a)},645460:(e,t,n)=>{var r,a;r=[t,n(29293),n(451378),n(670676),n(759352),n(612144)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.saveFileToData=void 0,r=d(r);var u={},c={},f={},s=(0,i.createBlobDB)(),p=t.saveFileToData=function(){var e=(0,r.default)((function*(e,t,n){var i=(0,l.processFileName)(e);if(c[i])return c[i].then((function(){return p(i,t,n)}));c[i]=new Promise(function(){var e=(0,r.default)((function*(e,n){try{var d=yield(yield s).readBlobs(i),f=d.map((function(e){return e.data})).reduce((function(e,t){return(0,l._appendBuffer)(e,Uint8Array.from(t))}),new Uint8Array);u[i]?u[i]+=d.length:u[i]=d.length;var p=(0,a.getBlobForArrayBuffer)(f.buffer);p.name=i;var b=new FileReader,y=t.replace("file://","");b.onload=(0,r.default)((function*(){try{var t,r="string"===typeof b.result&&(null==(t=b.result)?void 0:t.replace("data:blob;base64,",""));r&&(yield o.FileSystem.appendFile(y,r,"base64")),e(y)}catch(i){var a=(null==i?void 0:i.message)||i;console.error("fs worker err",a),n(a)}})),b.readAsDataURL(p)}catch(m){c[i]=void 0,console.error("fs worker err",(null==m?void 0:m.message)||m),n((null==m?void 0:m.message)||m)}}));return function(t,n){return e.apply(this,arguments)}}()),yield c[i],f[i]?f[i].push(n):f[i]=[n],c[i]=void 0}));return function(t,n,r){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},400908:(e,t,n)=>{var r,a;r=[t,n(29293),n(97990),n(932779),n(759352),n(179360),n(612144)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.getFileStats=t.getFileReaderOpfs=t.getFileOpfs=t.exportFile=t.countIsDownloaded=void 0,r=u(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=u(i);t.exportFile=function(){var e=(0,r.default)((function*(e){var t=yield f(e),n=document.createElement("a");n.style="display:none;",document.body.appendChild(n),n.download=(0,d.processFileName)(e.filename),n.href=t,n.click()}));return function(t){return e.apply(this,arguments)}}();var f=t.getFileOpfs=function(){var e=(0,r.default)((function*(e){try{console.info("get file",e.id,e.filename);var t=yield p(e);if("string"===typeof t)return t;if(!t)throw"no_file_found";return URL.createObjectURL(t)}catch(n){throw n}}));return function(t){return e.apply(this,arguments)}}(),s=t.getFileStats=function(){var e=(0,r.default)((function*(e){var t=yield p(e);if(console.info("getFileStats",e.id,t),t)return t}));return function(t){return e.apply(this,arguments)}}(),p=t.getFileReaderOpfs=function(){var e=(0,r.default)((function*(e){try{var t=(0,d.getFileId)(e),n=yield window.navigator.storage.getDirectory(),r=yield n.getDirectoryHandle(e.folderId,{create:!0}),a=yield r.getFileHandle(t);return yield null==a?void 0:a.getFile()}catch(i){console.error("get file reader error",i)}}));return function(t){return e.apply(this,arguments)}}();t.countIsDownloaded=function(){var e=(0,r.default)((function*(e){try{var t=yield s(e);if(t){var n=e.size/100;return parseInt((t.size/n).toString(),10)}return!1}catch(r){return console.info("isDownloaded error",r),!1}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},612144:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.processFileName=t.getFileId=t._appendBuffer=void 0;var n=t.processFileName=function(e){return e.replace(/[^a-zA-Z0-9_.-]/g,"")};t.getFileId=function(e){return e.id+"_"+n(e.filename)},t._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n}}.apply(t,[t]))||(e.exports=n)},358205:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(97990),n(499151),n(612144),n(265019)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.writeFileOpfs=void 0,r=u(r),a=u(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i);t.writeFileOpfs=function(){var e=(0,r.default)((function*(e,t){console.info("writefile",e,t);var n=yield window.navigator.storage.getDirectory(),r=yield n.getDirectoryHandle(e.folderId,{create:!0}),a=(0,l.getFileId)(e);console.info("write file",a);var i=yield r.getFileHandle(a,{create:!0}),d=yield i.createWritable();return yield d.write(t),yield d.close(),e.isDownloaded||(e.isDownloaded=!0,yield(0,o.writeItem)(e)),i}));return function(t,n){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},992796:(e,t,n)=>{var r,a;r=[t,n(29293),n(110229),n(499151),n(1672),n(325640),n(147639),n(855294),n(932779),n(809531)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var p={UserData:!0,initUserData:!0,publicPartyPref:!0,deleteById:!0,setOpenItem:!0,removeFile:!0,downloadFile:!0,getUnreadMessages:!0,extractMedia:!0,evolu:!0,createDBConn:!0};function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}t.UserData=void 0,Object.defineProperty(e,"createDBConn",{enumerable:!0,get:function(){return i.createDBConn}}),t.downloadFile=t.deleteById=void 0,Object.defineProperty(e,"evolu",{enumerable:!0,get:function(){return i.evolu}}),t.setOpenItem=t.removeFile=t.publicPartyPref=t.initUserData=t.getUnreadMessages=t.extractMedia=void 0,r=s(r),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))})),Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(p,t)||t in e&&e[t]===d[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))})),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(u),c=s(c);var y=t.UserData={user:{id:"test",name:"test"},isEditingFolder:{},colors:a.colors,searchItems:[],currentFolderIds:{}};t.initUserData=function(){var e=(0,r.default)((function*(){try{var e;y.user=yield(0,f.doInitialMigration)();var t=(null==(e=u.designName)?void 0:e.replace(/[^\w\s]/gi,""))||"unknown_agent",n=u.osName||"unknown_os",r=u.brand||"web";console.info("browserName",r);var a=t+n+r,o=yield(0,i.getById)(a);if(!o||!o.manufacturer){var l={id:a,manufacturer:r,isDevice:!0,userAgent:t,createdAt:(new Date).valueOf(),model:r,os:n,platform:"web"};console.info(l),yield(0,i.writeItem)(l)}console.info("initUserData",y)}catch(d){console.error("initUserData Error",d)}}));return function(){return e.apply(this,arguments)}}(),t.publicPartyPref=function(){},t.deleteById=function(e){},t.setOpenItem=function(){},t.removeFile=function(){},t.downloadFile=function(){},t.getUnreadMessages=function(){},t.extractMedia=function(){var e=(0,r.default)((function*(e){var t,n,r=yield(0,o.getWT)(e);return{url:r.magnetURI,title:r.name,originalId:r.infoHash,id:r.infoHash,filename:r.files[0].name,extractor:"wt",isFolder:!!(r.files&&(null==(t=r.files)?void 0:t.length)>-1)||void 0,files:r.files&&(null==(n=r.files)?void 0:n.length)>-1?r.files:void 0}}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},1672:(e,t,n)=>{var r,a;r=[t,n(29293),n(147639),n(885915),n(312515),n(499151),n(954347)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0});var c={recursiveShare:!0,shareFolder:!0,startUpMediaSharing:!0,getMediaAndEnq:!0,enqMedia:!0};t.startUpMediaSharing=t.shareFolder=t.recursiveShare=t.getMediaAndEnq=t.enqMedia=void 0,r=u(r),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(c,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var f=t.recursiveShare=function(){var e=(0,r.default)((function*(e){if(e.isDownloaded)try{(0,i.shareFileToWT)(e.id,e.folderId)}catch(n){}if(e.isFolder||e.isEditorProject||e.isEditorLayer){var t=yield(0,l.getFolderContent)(e.id);yield Promise.all(t.map(f))}else;}));return function(t){return e.apply(this,arguments)}}(),s=(t.shareFolder=function(){var e=(0,r.default)((function*(e){yield(0,l.getFolderContent)(e.id)}));return function(t){return e.apply(this,arguments)}}(),t.startUpMediaSharing=function(){var e=(0,r.default)((function*(){try{(yield l.evolu).createQuery((function(e){return e.selectFrom("item").selectAll().where("isFolder","=",(0,d.cast)(!0)).where("mnemonic","is not",null).orderBy("createdAt","desc")}))}catch(e){console.error("startUpMediaSharing error",e)}}));return function(){return e.apply(this,arguments)}}(),t.getMediaAndEnq=function(){var e=(0,r.default)((function*(e,t){var n=yield(0,l.getById)(e);return console.info("playing media",n),"local"===n.extractor&&(n.url=yield(0,a.getFileOpfs)(n)),s(n,t)}));return function(t,n){return e.apply(this,arguments)}}(),t.enqMedia=function(){var e=(0,r.default)((function*(e,t){return playMediaLink(e.url,e.currentPosition,t)}));return function(t,n){return e.apply(this,arguments)}}())}.apply(t,r))||(e.exports=a)},451378:(e,t,n)=>{var r,a;r=[n,t,n(29293)],void 0===(a=function(e,r,a){"use strict";var i=n(124994);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}Object.defineProperty(r,"__esModule",{value:!0}),t.getArrayBufferForBlob=void 0,t.getBase64=function(e){return d.apply(this,arguments)},t.getBrowserName=t.getBlobForArrayBuffer=void 0,t.initNativeBlobMethods=function(){return u.apply(this,arguments)},t.niceBytes=void 0,a=i(a);t.getBrowserName=function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;if(e)return"opera";if("undefined"!==typeof window.InstallTrigger)return"firefox";if(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!==typeof window.safari&&window.safari.pushNotification).toString())return"apple-safari";var t=!!window.document.documentMode;return t?"microsoft-internet-explorer":t||!window.StyleMedia?window.chrome?"google-chrome":window.isChrome&&-1!=window.navigator.userAgent.indexOf("Edg")?"microsoft-edge":(window.isChrome||e)&&!!window.CSS?"blink":void 0:"microsoft-edge"};var l=["bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];t.niceBytes=function(e){for(var t=0,n=parseInt(e,10)||0;n>=1024&&++t;)n/=1024;return n.toFixed(n<10&&t>0?1:0)+" "+l[t]};function d(){return(d=(0,a.default)((function*(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(r.result)},r.onerror=function(e){console.error("Error: ",e),n(e)}}))}))).apply(this,arguments)}function u(){return(u=(0,a.default)((function*(){var e=yield new Promise((function(e,t){return n.e(252).then((function(){var t=[n(753252)];(function(t){return e(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(t))}).apply(null,t)})).catch(t.bind(this))}));t.getBlobForArrayBuffer=e.getBlobForArrayBuffer,t.getArrayBufferForBlob=e.getArrayBufferForBlob}))).apply(this,arguments)}}.apply(t,r))||(e.exports=a)},349971:(e,t,n)=>{var r,a;r=[n,t,n(29293),n(932779),n(451378),n(889210)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d,u,c=n(124994);Object.defineProperty(r,"__esModule",{value:!0}),t.mediaWorker=t.mediaClient=void 0,a=c(a),i=c(i);var f=function(){var e=(0,a.default)((function*(){var e={tracker:{rtcConfig:l.rtcConfig,announce:l.announce},announce:l.announce};t.mediaClient=d=new WebTorrent(e),d.on("error",(function(e){console.error("mediaclient err: "+e.message)}));var n=function(){var e=(0,a.default)((function*(e){var n=e.active||e.waiting||e.installing;yield new Promise((function(e){var r=function(n){t.mediaWorker=u=n;var r="activated"===n.state;return r&&(console.info("after load worker"),d.loadWorker(n,e)),r};r(n)||u.addEventListener("statechange",(function(e){var t=e.target;return r(t)}))}))}));return function(t){return e.apply(this,arguments)}}(),r=yield new Promise(function(){var e=(0,a.default)((function*(e){var t=yield navigator.serviceWorker.register("/sw.min.js");yield n(t)}));return function(t){return e.apply(this,arguments)}}());return r}));return function(){return e.apply(this,arguments)}}();f()}.apply(t,r))||(e.exports=a)},889210:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.rtcConfig=t.announce=void 0,(t.rtcConfig={iceServers:[{urls:["stun:turn.starpy.me","turn:turn.starpy.me"],username:"username1",credential:"password1"}],bundlePolicy:"max-bundle",iceCandidatePoolSize:1}).sdpSemantics="unified-plan";t.announce=["wss://media.starpy.me"]}.apply(t,[t]))||(e.exports=n)},641156:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(97990),n(499151),n(147639),n(670676),n(349971)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.getWT=t.getVideoWT=t.downloadFileByMedia=t.downloadFileById=void 0,r=c(r),a=c(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i);var s={},p={},b={},y=(t.downloadFileById=function(){var e=(0,r.default)((function*(e,t,n,a){return new Promise(function(){var i=(0,r.default)((function*(i,d){try{var u=yield(0,o.getById)(e,t);if("wt"===(null==u?void 0:u.extractor)){var c,f;if(s[e])c=s[e];else{var p=yield m(u);c=p.torrent,f=p.stream}var y=0;c.on("download",(function(){var e=parseInt((100*c.progress).toString(),10)/100;n&&e>y&&(y=e,n(e))})),c.on("done",(0,r.default)((function*(){var t=(f=yield b[e])&&(yield(yield fetch(f)).arrayBuffer());console.info("blob from stream",t,u,f);var n=t&&new File([t],u.filename),r=n&&(yield(0,l.writeFileOpfs)(u,n));return a&&a(),i(r)})))}}catch(v){console.error("download file error",v),d(v)}}));return function(e,t){return i.apply(this,arguments)}}())}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.downloadFileByMedia=function(){var e=(0,r.default)((function*(e,t){var n=e.id;if("wt"===(null==e?void 0:e.extractor)){var r,a;if(s[n])r=s[n];else{var i=yield m(e);r=i.torrent,a=i.stream}r.on("download",(function(){t&&t(r.progress)}));var o=a&&(yield(yield fetch(a)).arrayBuffer()),d=o&&new File([o],e.filename);return d&&(yield(0,l.writeFileOpfs)(e,d))}}));return function(t,n){return e.apply(this,arguments)}}(),function(){var e=(0,r.default)((function*(e,t,n){var a,i,o=n?e.files.find((function(e){return(e.name||e.filename)===n})):e.files.find((function(e){return function(e){var t,n,r,a;return(null==e||null==(t=e.name)?void 0:t.endsWith(".mp4"))||(null==e||null==(n=e.name)?void 0:n.endsWith(".webm"))||(null==e||null==(r=e.name)?void 0:r.endsWith(".mkv"))||(null==e||null==(a=e.name)?void 0:a.endsWith(".mov"))}(e)}));if(!o&&null!=(a=e.files)&&a.length&&(o=e.files[0]),p[t.id])return p[t.id];if(b[t.id])return yield b[t.id];if(null==(i=o)||!i.name)throw new Error("no_file_found_in_metadata");return b[t.id]=new Promise(function(){var e=(0,r.default)((function*(e,n){try{var r;null==(r=o)||r.getStreamURL((function(t,r){if(t)return n(t);e(r)}))}catch(a){b[t.id]=void 0,console.error("get stream err",a)}}));return function(t,n){return e.apply(this,arguments)}}()).catch((function(e){b[t.id]=void 0,console.error("get stream url error",e)})),p[o.name]=yield b[o.name],console.info("after stream url",p[o.name]),p[o.name]}));return function(t,n,r){return e.apply(this,arguments)}}()),m=t.getVideoWT=function(){var e=(0,r.default)((function*(e,t){return new Promise(function(){var n=(0,r.default)((function*(n,r){try{if(s[e.id])return void n({stream:yield y(s[e.id],e,t),torrent:s[e.id]});var a="torrent.file."+e.id,i=null!=e&&e.torrentFile?new File([Uint8Array.from(Object.values(e.torrentFile)).buffer],a):(null==e?void 0:e.torrentFile)&&Uint8Array.from(Object.values(e.torrentFile));u.mediaClient.add(i||e.url,(function(a){try{s[e.id]=a,console.info("after mediaclient add",e.filename,e.id),y(a,e,t).then((function(e){return n({stream:e,torrent:a})})).catch((function(e){return r(e)}))}catch(i){console.error("getVideoWT err",i),r(i)}}))}catch(o){console.error("get video wt err",o),r(o)}}));return function(e,t){return n.apply(this,arguments)}}())}));return function(t,n){return e.apply(this,arguments)}}();t.getWT=function(){var e=(0,r.default)((function*(e){return yield new Promise(function(){var t=(0,r.default)((function*(t,n){u.mediaClient.add(e,function(){var e=(0,r.default)((function*(e){return t(e)}));return function(t){return e.apply(this,arguments)}}())}));return function(e,n){return t.apply(this,arguments)}}())}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},91209:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(499151),n(147639),n(349971),n(889210)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.startMobileShare=t.shareFileToWT=void 0,r=u(r),a=u(a);var c={},f=(t.startMobileShare=function(){var e=(0,r.default)((function*(e,t,n){console.info("sharing filepath",t);var r=new Blob([],{type:e.fileType,size:e.size}),a=(0,o.streamFile)(t,0,1e6,e.size);return a.length=e.size,r.length=e.size,r.stream=function(){return a},r.name=(0,o.processFileName)(e.filename),f(r,d.announce,e,n)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.shareFileToWT=function(){var e=(0,r.default)((function*(e,t,n){try{var r=yield(0,i.getById)(e,t);if(r.infoHash&&c[r.infoHash]||c[e])return void console.info("issharing already",c);r.infoHash&&(c[r.infoHash]=!0),c[e]=!0;var a=yield(0,o.getFileReaderOpfs)(r);if(!a)throw"no_file_found";if(console.info("share file wt",a),!a)throw"no_file";return f(a,d.announce,r,n)}catch(l){console.error("shareFileToWt err",l)}}));return function(t,n,r){return e.apply(this,arguments)}}(),function(){var e=(0,r.default)((function*(e,t,n,a){return yield new Promise((function(o,d){try{var u=void 0,c=function(){var e=(0,r.default)((function*(e){try{if(u)return;if(u=!0,console.info("after wt create",n.id,n.filename),n.torrentFile)return o(n);n.torrentFile=e.torrentFile,n.url=e.magnetURI,n.infoHash=e.infoHash,n.extractor="wt",yield(0,i.writeItem)(n),o(n)}catch(t){console.error("create wt err",t),d(t)}}));return function(t){return e.apply(this,arguments)}}(),f=function e(){return setTimeout((function(){if(!u){console.info("manualResolve mediaClient.torrents",l.mediaClient.torrents.length,l.mediaClient.torrents.map((function(e){return e.torrentFile})).filter((function(e){return e})).length,l.mediaClient.torrents.map((function(e){return e.files})));var t=l.mediaClient.torrents.find((function(e){return e.files.find((function(e){return e.name===n.filename}))}));t?(console.info("found new torrent",n.id,t.files),c(t)):e()}}),2e3)};l.mediaClient.seed(e,{announce:t,onProgress:function(e){a&&a(e),(e===n.size||e>(null==n?void 0:n.size))&&(console.info("progress done"),f())}},function(){var e=(0,r.default)((function*(e){c(e)}));return function(t){return e.apply(this,arguments)}}())}catch(s){console.error("create wt err",s),d(s)}}))}));return function(t,n,r,a){return e.apply(this,arguments)}}())}.apply(t,r))||(e.exports=a)},885915:(e,t,n)=>{var r,a;r=[t,n(349971),n(91209),n(641156),n(889210)],void 0===(a=function(e,t,n,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))})),Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))})),Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===r[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}}))})),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}))}.apply(t,r))||(e.exports=a)},199361:(e,t,n)=>{var r,a;r=[t,n(296540),n(479231),n(898707),n(543419),n(709963),n(730354),n(841051)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=c(r),a=c(a),o=c(o);t.default=function(){return r.default.createElement(l.GestureHandlerRootView,{style:{width:"100%",height:"100%"}},r.default.createElement(i.NavigationContainer,{theme:u.MD3DarkTheme,linking:d.linking,fallback:r.default.createElement(a.default,null,"Loading...")},r.default.createElement(o.default,null)))}}.apply(t,r))||(e.exports=a)},737012:(e,t,n)=>{var r,a;r=[t,n(29293),n(898707),n(296540),n(863946),n(3469),n(775942),n(992796),n(162427),n(841051),n(428259),n(222481),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.AuctionPage=function(){var e,t=(0,a.useRoute)().params.auctionId,n=(0,d.useQuery)("UserData",(function(){return(0,u.getUserData)()})),y=(0,d.useQuery)("auction_"+t,(0,r.default)((function*(){return yield(0,u.getById)(t,t)}))),m=y.data,v=!n.isFetched||!y.isFetched,g=null==n?void 0:n.data,h=!v&&(null==g?void 0:g.id)===(null==m?void 0:m.userId),w=!v&&(null==g?void 0:g.id)===(null==m?void 0:m.winnerId),P=!v&&void 0!==(null==m?void 0:m.encryptedKey),E=!v&&void 0!==(null==m?void 0:m.winnerPaymentTransactionId),I=null==m?void 0:m.isClosed,S=(0,b.useAppSelector)((function(e){return e.auction.downloadProgress})),O=S?"Downloading "+parseInt((100*S).toString(),10)+"%":"Download",_=(0,s.useAuctionActions)(t,m,g),M=_.createBid,T=_.closeAuction,D=_.currentBid,j=_.payForAuction,C=_.downloadAuctionMedia,F=_.releaseDownload,A=_.auctionTransaction,x=A?((null==(e=A.receipt)?void 0:e.status)||0)+" Confirmation":"Waiting For Confirmation";(0,p.useRouteAuction)(m,v);var k=(0,o.default)().height;return i.default.createElement(l.default,{style:{width:"100%",height:"100%"}},i.default.createElement(l.default,{style:{width:"100%",height:"40%"}},v?i.default.createElement(f.ActivityIndicator,null):i.default.createElement(f.List.Section,null,i.default.createElement(f.List.Item,{title:"Auction Name",description:null==m?void 0:m.title}),i.default.createElement(f.List.Item,{title:"Author Name",description:null==m?void 0:m.authorName}),i.default.createElement(f.List.Item,{title:"Auction Current Bid",description:D||(null==m?void 0:m.minPrice)}),i.default.createElement(f.List.Item,{title:"Auction Minimum Step",description:null==m?void 0:m.minStep}),i.default.createElement(f.List.Item,{title:"Auction Minimum Price",description:null==m?void 0:m.minPrice})),!h&&!I&&i.default.createElement(f.Button,{icon:"plus",onPress:M,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},"Make A Bid"),h&&!I&&i.default.createElement(f.Button,{icon:"clipboard-check",onPress:T,mode:"outlined",style:{top:16,right:16,position:"absolute"}},"Close Auction"),w&&!E&&i.default.createElement(f.Button,{icon:"currency-usd",onPress:j,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},"Pay"),w&&P&&i.default.createElement(f.Button,{icon:"file",onPress:C,mode:"outlined",style:{bottom:16,right:16,position:"absolute"}},O),h&&E&&i.default.createElement(f.Button,{icon:"file",onPress:F,mode:"outlined",disabled:!A||P,style:{bottom:16,right:16,position:"absolute"}},"Release File"),I&&i.default.createElement(f.Chip,{style:{top:16,right:16,position:"absolute"},icon:"clipboard-check"}," ","Auction Closed"," "),I&&E&&i.default.createElement(f.Chip,{style:{top:50,right:16,position:"absolute"},icon:"timer-cog-outline"},x)),i.default.createElement(l.default,{style:{width:"100%",height:"60%"}},i.default.createElement(c.default,{params:{user:g,contact:m},height:k/100*60,chatId:t})))},r=y(r),i=y(i),o=y(o),l=y(l),c=y(c)}.apply(t,r))||(e.exports=a)},55651:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(532005),n(453088),n(841051)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BidDialogBody=function(){var e=(0,i.useAppDispatch)(),t=(0,i.useAppSelector)((function(e){return e.auction.bidAmount}));(0,i.useAppSelector)((function(e){return e.auction.bidWallet}));return r.default.createElement(a.default,{style:{width:"100%",height:"auto"}},r.default.createElement(l.TextInput,{label:"Bid Amount",style:{width:"100%"},keyboardType:"number-pad",value:t.toString(),onChangeText:function(t){return e((0,o.setBidAmount)(parseFloat(t)))},mode:"outlined"}))},r=d(r),a=d(a)}.apply(t,r))||(e.exports=a)},526919:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(841051),n(497111),n(532005),n(453088),n(775942)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.MetamaskAccountsButton=function(e){var t=e.type,n=(0,l.useAppDispatch)(),c=(0,u.useMutation)((0,r.default)((function*(){var e=yield(0,o.requestAccounts)();console.info("accounts"),"bid"===t&&n((0,d.setBidWallet)(e[0])),"sell"===t&&n((0,d.setAuctionWallet)(e[0])),"pay"===t&&n((0,d.setPayWallet)(e[0]))})));return a.default.createElement(i.Button,{icon:"wallet",mode:"outlined",onPress:function(){return c.mutateAsync()}},"Show Metamask Wallets")},r=c(r),a=c(a)}.apply(t,r))||(e.exports=a)},602880:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(532005),n(453088),n(841051),n(526919)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.PayDialogBody=function(){var e=(0,i.useAppDispatch)(),t=(0,i.useAppSelector)((function(e){return e.auction.payWallet})),n=(0,i.useAppSelector)((function(e){return e.auction.winnerPrice}));return r.default.createElement(a.default,{style:{width:"100%",height:"auto"}},r.default.createElement(l.Text,null,"As the winner you need to pay ",n," Matik to receive the media file"),r.default.createElement(l.TextInput,{label:"Payment Crypto Wallet",style:{width:"100%"},value:t,onChangeText:function(t){return e((0,o.setPayWallet)(t))},mode:"outlined"}),r.default.createElement(d.MetamaskAccountsButton,{type:"pay"}))},r=u(r),a=u(a)}.apply(t,r))||(e.exports=a)},724516:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(841051),n(532005),n(453088),n(526919)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.SellDialogBody=function(){var e=(0,o.useAppDispatch)(),t=(0,o.useAppSelector)((function(e){return e.auction.newAuctionName})),n=(0,o.useAppSelector)((function(e){return e.auction.newAuctionPrice})),u=(0,o.useAppSelector)((function(e){return e.auction.newAuctionWallet})),c="Auction name",f="Auction ERC20 Wallet",s="Minimum Price in Matic";return r.default.createElement(a.default,{style:{width:"100%",height:"auto"}},r.default.createElement(i.TextInput,{placeholder:c,label:c,style:{width:"100%"},value:t,onChangeText:function(t){return e((0,l.setAuctioName)(t))},mode:"outlined"}),r.default.createElement(i.TextInput,{label:s,placeholder:s,style:{width:"100%"},keyboardType:"number-pad",value:n.toString(),onChangeText:function(t){return e((0,l.setAuctionPrice)(parseFloat(t)))},mode:"outlined"}),r.default.createElement(i.TextInput,{label:f,placeholder:f,style:{width:"100%"},value:u,onChangeText:function(t){return e((0,l.setAuctionWallet)(t))},mode:"outlined"}),r.default.createElement(d.MetamaskAccountsButton,{type:"sell"}))},r=u(r),a=u(a)}.apply(t,r))||(e.exports=a)},809621:(e,t,n)=>{var r,a;r=[t,n(466379),n(296540),n(863946),n(3469),n(532005),n(536503)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.CameraScreen=function(){var e=(0,a.useRef)(),t=(0,l.useAppSelector)((function(e){return e.camera.cameraFacing})),n=(0,i.default)(),u=n.height,c=n.width;return a.default.createElement(o.default,{style:{backgroundColor:"transparent",position:"relative",width:c,height:u-100,zIndex:1}},a.default.createElement(r.CameraView,{ref:e,facing:t,style:{width:c,height:"100%",top:0,position:"absolute",zIndex:10}},a.default.createElement(d.CameraControls,{camera:e})))},a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=u(i),o=u(o)}.apply(t,r))||(e.exports=a)},536503:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(841051),n(898707),n(522763)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.CameraControls=function(e){var t=e.camera,n=(0,i.useTheme)(),d=(0,o.useRoute)().params,b=d.chatId,y=d.folderId,m=(0,l.useCameraActions)(b||y,t),v=m.stopRecording,g=m.startVideo,h=m.toggleCameraFacing,w=m.makePhoto,P=m.cameraMode,E=m.recording,I=m.selectImage,S=m.switchToPhoto,O=m.switchToVideo,_=n.colors.onSurface,M=n.colors.surface,T=u(_),D=c(n.colors.surface),j=f(n.colors.onPrimary),C=E?"square":"circle",F=Object.assign({},T,{backgroundColor:M}),A=Object.assign({},j,{color:n.colors.primary}),x=E?v:g,k="photo"===P?w:x;return r.default.createElement(a.default,{style:s},r.default.createElement(a.default,{style:p},r.default.createElement(i.IconButton,{mode:"outlined",iconColor:"white",size:32,icon:"orbit-variant",onPress:h}),r.default.createElement(i.IconButton,{mode:"outlined",iconColor:"white",size:48,icon:C,style:{marginTop:0},onPress:k}),r.default.createElement(i.IconButton,{mode:"outlined",iconColor:"white",size:32,icon:"image",onPress:I})),r.default.createElement(a.default,{style:D},r.default.createElement(i.Chip,{style:"photo"===P?T:F,onPress:S},r.default.createElement(i.Text,{style:"photo"===P?j:A},"Camera")),r.default.createElement(i.Chip,{style:"video"===P?T:F,onPress:O},r.default.createElement(i.Text,{style:"video"===P?j:A},"Video"))))},r=d(r),a=d(a);var u=function(e){return{width:100,height:30,borderRadius:30,alignContent:"center",backgroundColor:e,paddingBottom:2}},c=function(e){return{height:150,backgroundColor:e,width:"100%",position:"relative",flexDirection:"row",justifyContent:"center",paddingTop:25,gap:10,marginVertical:15}},f=function(e){return{textAlign:"center",width:65,height:20,color:e,fontWeight:"bold"}},s={height:180,width:"100%",position:"absolute",bottom:0,zIndex:1e3},p={display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",gap:48}}.apply(t,r))||(e.exports=a)},27732:(e,t,n)=>{var r,a;r=[t,n(296540),n(162427),n(775942),n(762844),n(992796),n(248389),n(637843),n(3469),n(863946),n(514288),n(236944),n(176412)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=y(a),c=y(c),f=y(f),p=y(p);t.default=(0,r.memo)((function(e){var t=e.isEmbed,n=e.params,y=e.height,m=n.chatId,v=(0,i.useQuery)("UserData",(function(){return(0,l.getUserData)()}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onError:function(e){console.error("on get contact error",e)}}),g=(0,i.useQuery)("contact_"+m,(function(){return(0,l.getById)(m)}),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,onError:function(e){console.error("on get contact error",e)}}),h=!v.isFetched||!g.isFetched,w=null==g?void 0:g.data,P=null==v?void 0:v.data,E=(0,f.default)().width,I=(null==n?void 0:n.parentFolderId)||(null==n?void 0:n.parentFolderId)||w&&w.folderId,S=(0,u.useFolder)(I,l.getFolderContent,l.getById,d.FolderType.contact);(0,o.useRouteContact)(w,h,P,n);var O=!(E>700&&!t);return r.default.createElement(c.default,{style:{width:"100%",height:"100%",flexDirection:"row",backgroundColor:"black"}},O?null:r.default.createElement(s.FolderNavigator,{folderType:d.FolderType.contact,renderContent:function(e){var t=e.item;return r.default.createElement(p.default,{i:t,key:t.id,dataHook:S,styles:b.styles,width:O?E:E/100*30})},parentFolderId:I,parentFolderHook:S}),r.default.createElement(c.default,{style:{width:O?"100%":"70%",height:"auto"}},r.default.createElement(a.default,{params:{user:P,contact:w},chatId:m,height:y,isEmbeded:t,queryParams:n})))}))}.apply(t,r))||(e.exports=a)},162427:(e,t,n)=>{var r,a;r=[t,n(94634),n(585715),n(296540),n(3469),n(932779),n(863946),n(510497),n(402311),n(841051),n(269852),n(176412),n(875526),n(698085),n(100360),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v){"use strict";var g=n(124994);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),a=g(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),o=g(o),l=g(l),d=g(d);var w={backgroundColor:"transparent",right:65,bottom:80,opacity:1},P={backgroundColor:"transparent",paddingBottom:100,borderBottomWidth:0};t.default=function(e){var t=e.chatId,n=e.params,l=e.height,g=e.isEmbeded,h=e.queryParams,E=n.user,I=(0,c.useMessages)(t,h),S=I.messages,O=I.sendMessage,_=(I.nextPage,I.isLoadingEarlier,(0,i.useContext)(u.UserCtx)),M=(0,f.useTheme)(),T=(0,v.useAppSelector)((function(e){return g?0:e.ui.keyboardHeight})),D=M.colors;(0,m.useChatWebRefresh)();var j=60;j=50;var C=(0,d.default)(),F=C.height,A=C.width,x=l||F,k=x-j-T,R=(0,v.useAppSelector)((function(e){return e.upload.isUploadInProgress})),L=(0,v.useAppSelector)((function(e){return e.media.currentMediaId}));R&&(k-=50),L&&(k-=A<700?x/4:x/2);var B=Object.assign({},P,{height:k,borderColor:D.background}),W={transform:[{scaleY:-1}]};return console.info("chatviewreload"),i.default.createElement(o.default,{style:{backgroundColor:_.colors.backgroundColor,height:k,width:"100%",flexDirection:"row"}},i.default.createElement(s.GiftedChat,{scrollToBottom:!0,renderLoading:function(){return i.default.createElement(f.ActivityIndicator,{size:72})},messages:S.map((function(e){return Object.assign({},e,{_id:e.id,user:{_id:e.userId,name:e.userName}})})),onSend:function(e){var t,n=(0,a.default)(e,1)[0];return t=n.text,O(t)},user:{_id:null==E?void 0:E.id,avatar:null==E?void 0:E.photo},renderBubble:function(e){return i.default.createElement(y.ChatBubble,Object.assign({},e,{bgColor:"#344868",chatId:t}))},timeTextStyle:{},renderAvatar:function(e){return i.default.createElement(i.default.Fragment,null)},listViewProps:{scrollEventThrottle:400},showUserAvatar:!1,showAvatarForEveryMessage:!0,isKeyboardInternallyHandled:!1,messagesContainerStyle:B,renderChatEmpty:function(){return i.default.createElement(o.default,{style:W},i.default.createElement(f.List.Item,{left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{color:p.textAccentColor,icon:"lock"}))},titleStyle:{color:p.textAccentColor},title:"Decrypting Messages..."}),i.default.createElement(f.ProgressBar,{indeterminate:!0,visible:!0}))},scrollToBottomComponent:function(){return i.default.createElement(f.AnimatedFAB,{icon:"arrow-down",label:"\u2800",visible:!0,iconMode:"static",extended:!1})},scrollToBottomStyle:w,renderInputToolbar:function(e){return i.default.createElement(b.ChatInputToolbar,{chatId:t,inputProps:e,isEmbed:g,dynamicHeight:k})},placeholder:"Write your message"}))}}.apply(t,r))||(e.exports=a)},719931:(e,t,n)=>{var r,a;r=[t,n(296540),n(932779),n(3469),n(841051),n(32873),n(532005)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.AttachmentDrawer=function(e){e.makePhoto,e.selectImage;var t=e.selectFile,n=e.bottomDrawerRef,a=(0,o.useTheme)(),u=(0,d.useAppSelector)((function(e){return e.upload.isUploadInProgress}));return r.default.createElement(l.default,{ref:n,initialHeight:200,customStyles:{container:{backgroundColor:a.colors.background}}},r.default.createElement(o.List.Section,null,r.default.createElement(o.List.Item,{title:u?"Import In Progress":"Import Attachment",description:function(){return r.default.createElement(i.default,{style:{flexDirection:"row"}},u?r.default.createElement(o.ActivityIndicator,{size:36}):r.default.createElement(r.default.Fragment,null,!1,r.default.createElement(o.IconButton,{icon:"file",onPress:t,style:{backgroundColor:a.colors.secondary},mode:"contained",iconColor:a.colors.onSecondary})))}})))},r=u(r),a=u(a),i=u(i),l=u(l)}.apply(t,r))||(e.exports=a)},698085:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(269852),n(790241),n(841051),n(92574),n(559850)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.ChatBubble=function(e){var t,n=(0,o.useSharedValue)(1),c=(0,l.useTheme)();e.isPreloader&&(n.value=(0,o.withSequence)((0,o.withTiming)(.2,{duration:500}),(0,o.withTiming)(1,{duration:500})));var f=Object.assign({},c.fonts.bodyMedium,{color:e.isPreloader?"transparent":c.colors.onSurface,margin:0});if(null!=(t=e.currentMessage)&&t.media)e.currentMessage.media.type||e.currentMessage.media.fileType;return a.default.createElement(o.default.View,{style:{opacity:n}},a.default.createElement(i.Bubble,(0,r.default)({},e,{textStyle:{left:f,right:f},renderMessageText:function(e){var t;return a.default.createElement(l.Text,{theme:c},null==(t=e.currentMessage)?void 0:t.text)},renderMessageImage:function(e){return a.default.createElement(d.ChatBubbleImage,e)},renderTime:function(t){return!e.isPreloader&&a.default.createElement(u.ChatBubbleTime,{timeProps:t,chatId:e.chatId})},renderTicks:function(){return null},wrapperStyle:{right:Object.assign({},s,{minWidth:"auto",maxWidth:300,backgroundColor:"#871e69"}),left:Object.assign({},s,{maxWidth:300,backgroundColor:e.bgColor})}})))},r=c(r),a=c(a),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o);var s={alignSelf:"auto",maxWidth:"100%",minHeight:50,marginBottom:48,display:"flex",borderRadius:22,padding:16}}.apply(t,r))||(e.exports=a)},92574:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(269852),n(3469)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChatBubbleImage=function(e){return a.default.createElement(o.default,null,a.default.createElement(i.MessageImage,(0,r.default)({},e,{imageProps:Object.assign({},e.imageProps)})))},r=l(r),a=l(a),o=l(o)}.apply(t,r))||(e.exports=a)},559850:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(841051)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChatBubbleTime=function(e){var t,n,o,l,d,u=e.timeProps,c=(e.chatId,(0,i.useTheme)()),f=u.currentMessage&&new Date(u.currentMessage.createdAt).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hourCycle:"h24"}),s=null==(t=u.currentMessage)?void 0:t.userName,p=null!=(n=u.currentMessage)&&n.received?"check-all":"check",b=null!=(o=u.currentMessage)&&o.received?"green":"white";null!=(l=u.currentMessage)&&l.error&&(p="close",b="red");return r.default.createElement(a.default,{style:{position:"absolute",top:20,height:40}},r.default.createElement(i.Text,{style:{color:c.colors.onSurface,fontSize:c.fonts.labelSmall.fontSize,fontWeight:c.fonts.labelSmall.fontWeight,letterSpacing:c.fonts.labelSmall.letterSpacing,left:"left"===u.position?-14:14,height:40,width:200,textAlign:u.position,overflow:"visible"}},s+", "+f,null!=(d=u.currentMessage)&&d.pending?r.default.createElement(i.ActivityIndicator,{style:{paddingLeft:3,paddingTop:0},size:12}):r.default.createElement(i.Icon,{source:p,size:12,color:b})))},r=o(r),a=o(a)}.apply(t,r))||(e.exports=a)},520937:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(269852),n(841051),n(708875),n(532005)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChatComposer=function(e){var t=e.composerProps,n=e.chatId,u=(0,d.useAppDispatch)(),c=(0,o.useTheme)(),f=(0,d.useAppSelector)((function(e){return e.chat.draftMessage[n]}))||"";return a.default.createElement(i.Composer,(0,r.default)({},t,{placeholder:"Type your message here",onTextChanged:function(e){f!==e&&u((0,l.setDraftMessage)({id:n,content:e}))},placeholderTextColor:c.colors.onSurfaceVariant,text:f,textInputStyle:Object.assign({},c.fonts.default,{color:c.colors.onSurface,overflow:"visible",padding:20,paddingTop:0,paddingLeft:60,paddingRight:60,backgroundColor:c.colors.surface}),multiline:!0,textInputProps:Object.assign({},t.textInputProps)}))},r=u(r),a=u(a)}.apply(t,r))||(e.exports=a)},29221:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(841051),n(649681),n(532005),n(708875)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChatSendButton=function(e){var t=e.sendProps,n=e.chatId,u=(0,i.useTheme)(),c=(0,l.useAppDispatch)(),f=(0,l.useAppSelector)((function(e){return e.chat.draftMessage[n]}));return a.default.createElement(i.IconButton,(0,r.default)({},t,{iconColor:u.colors.onSurface,size:28,style:{right:5,top:-15,position:"absolute",zIndex:10},icon:"send",onPress:function(){t&&t.onSend&&(null==t||t.onSend({text:f},!0)),c((0,d.setDraftMessage)({id:n,content:void 0})),o.default.dismiss()}}))},r=u(r),a=u(a),o=u(o)}.apply(t,r))||(e.exports=a)},875526:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(269852),n(520937),n(29221),n(841051),n(532005),n(139131),n(719931)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChatInputToolbar=function(e){var t=e.inputProps,n=e.chatId,s=(e.isEmbed,(0,u.useAppSelector)((function(e){return e.chat.draftMessage[n]}))),p=(0,d.useTheme)(),b=(0,c.useFileSelectOptions)(n,!0);return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.InputToolbar,(0,r.default)({},t,{containerStyle:{borderTopWidth:0,backgroundColor:p.colors.surface,borderColor:"transparent",minHeight:100,paddingTop:20,height:"auto",margin:0,shadowColor:"transparent",position:"absolute",overflow:"visible",bottom:0},primaryStyle:{borderColor:"transparent",shadowColor:"transparent"},renderComposer:function(e){return a.default.createElement(o.ChatComposer,{chatId:n,composerProps:Object.assign({},e)})},accessoryStyle:{height:50,top:10,position:"absolute"},renderAccessory:function(e){return a.default.createElement(d.IconButton,(0,r.default)({},e,{icon:"plus",iconColor:p.colors.onSurface,size:28,onPress:b.showDrawer}))},renderSend:function(e){return s?a.default.createElement(l.ChatSendButton,{sendProps:Object.assign({},e),chatId:n}):null}})),a.default.createElement(f.AttachmentDrawer,b))},r=s(r),a=s(a)}.apply(t,r))||(e.exports=a)},176412:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.textAccentColor=t.styles=void 0;t.styles={container:{flex:1,paddingTop:0,marginTop:0},item:{paddingTop:15,paddingLeft:5,fontSize:12,height:160,color:"black",width:80},tinyLogo:{marginTop:2,width:22,height:22},scroll:{height:"100%",display:"flex",position:"relative",backgroundColor:"black",width:"100%"},icon:{paddingLeft:10}},t.textAccentColor="#b4c0d1"}.apply(t,[t]))||(e.exports=n)},868975:(e,t,n)=>{var r,a;r=[t,n(296540),n(145776),n(863946),n(3469),n(841051),n(532005),n(275519),n(295176),n(317333),n(27732),n(805310)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.DesktopBanner=function(e){var t=e.routeParams,n=e.projectId,b=(0,i.default)(),y=b.height,m=b.width,v=void 0!==t.encoder||void 0!==t.chatId,g=(0,r.useRef)(),h=y/2,w=(0,d.useAppSelector)((function(e){return e.upload.isUploadInProgress})),P=(0,d.useAppSelector)((function(e){return e.media.currentMediaId})),E=m<700,I=(0,d.useAppSelector)((function(e){return e.editor.isRendering})),S=(0,d.useAppSelector)((function(e){return e.editor.ffmpegError}));I&&(h-=50);S&&(h-=200);w&&(h-=50);P&&(h-=E?y/4:y/2);return r.default.createElement(o.default,{style:{margin:0,display:"flex",width:"100%",height:h,backgroundColor:"black"}},r.default.createElement(l.Divider,null),r.default.createElement(o.default,{style:{display:"flex",flexDirection:"row",width:"100%",height:h}},r.default.createElement(a.default,{style:{width:"24%",height:h,display:"flex",marginRight:5},key:1,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},r.default.createElement(u.default,{projectId:n,video2:g})),r.default.createElement(o.default,{style:{width:v?"45%":"74%",height:h,borderLeftWidth:1,borderRightWidth:1,borderLeftColor:"rgb(73, 69, 79)",borderRightColor:"rgb(73, 69, 79)",position:"relative",display:"flex"},key:2},r.default.createElement(c.default,{video2:g,projectId:n,height:h}),r.default.createElement(f.EditorPlayControls,{width:"100%",projectId:n})),v&&r.default.createElement(o.default,{style:{width:"30%",height:h,display:"flex"},key:3},(null==t?void 0:t.encoder)&&r.default.createElement(p.default,{params:t,isEmbed:!0}),(null==t?void 0:t.chatId)&&r.default.createElement(s.default,{isEmbed:!0,params:t,height:h}))),r.default.createElement(l.Divider,null))},r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=b(a),i=b(i),o=b(o),u=b(u),c=b(c),s=b(s),p=b(p)}.apply(t,r))||(e.exports=a)},697732:(e,t,n)=>{var r,a;r=[t,n(296540),n(932779),n(863946),n(530025),n(868975)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=d(a),i=d(i);t.default=(0,r.memo)((function(e){var t=e.projectId,n=e.routeParams,a=(0,i.default)().width<700||!1;return console.info("editorbanner reload"),a?r.default.createElement(o.MobileBanner,{projectId:t,routeParams:n}):r.default.createElement(l.DesktopBanner,{projectId:t,routeParams:n})}))}.apply(t,r))||(e.exports=a)},530025:(e,t,n)=>{var r,a;r=[t,n(296540),n(863946),n(3469),n(841051),n(27732),n(805310),n(475759),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.MobileBanner=function(e){var t=e.projectId,n=e.routeParams,f=(0,a.default)(),s=f.width,p=f.height,b=p/2,y=void 0!==n.encoder||void 0!==n.chatId,m=(0,c.useAppSelector)((function(e){return e.upload.isUploadInProgress})),v=(0,c.useAppSelector)((function(e){return e.media.currentMediaId})),g=(0,c.useAppSelector)((function(e){return e.editor.isRendering})),h=(0,c.useAppSelector)((function(e){return e.editor.ffmpegError}));g&&(b-=50);h&&(b-=200);m&&(b-=50);v&&(b-=p/4);return r.default.createElement(i.default,{style:{margin:0,padding:0,height:b,display:"flex",backgroundColor:"black"}},r.default.createElement(o.Divider,null),y&&r.default.createElement(i.default,{style:{width:"100%",height:b+100,display:"flex",paddingBottom:100},key:"third_container"},(null==n?void 0:n.encoder)&&r.default.createElement(d.default,{params:n}),(null==n?void 0:n.chatId)&&r.default.createElement(l.default,{isEmbed:!0,params:n,height:b+100})),r.default.createElement(u.MobileLayersBanner,{projectId:t,width:s,height:b,hasSelection:y}))},r=f(r),a=f(a),i=f(i),l=f(l),d=f(d)}.apply(t,r))||(e.exports=a)},475759:(e,t,n)=>{var r,a;r=[t,n(296540),n(145776),n(3469),n(532005),n(275519),n(295176),n(317333)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.MobileLayersBanner=function(e){var t=e.projectId,n=e.width,c=e.height,f=e.hasSelection,s=(0,o.useAppSelector)((function(e){return e.editor.showConfig})),p=(0,r.useRef)();return r.default.createElement(r.default.Fragment,null,s&&r.default.createElement(a.default,{style:{width:n,height:c,display:"flex",marginRight:5},key:"second_container",showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},r.default.createElement(l.default,{projectId:t,video2:p})),!s&&!f&&r.default.createElement(i.default,{style:{width:n,height:c,display:"flex",paddingBottom:100},key:"fourth_container"},r.default.createElement(d.default,{video2:p,projectId:t,height:c}),r.default.createElement(u.EditorPlayControls,{projectId:t})))},r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=c(a),i=c(i),l=c(l),d=c(d)}.apply(t,r))||(e.exports=a)},345972:(e,t,n)=>{var r,a;r=[t,n(296540),n(841051),n(532005),n(142020),n(898707),n(742771)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorControls=function(e){var t=(0,l.useRoute)().params,n=(t.projectId,t.encoder,(0,i.useAppSelector)((function(e){return e.editor.pixelsPerSecond}))),u=(0,i.useAppSelector)((function(e){return e.editor.isOpen})),c=(0,i.useAppSelector)((function(e){return e.ui.keyboardHeight})),f=(0,i.useAppDispatch)(),s=function(e){var t="+"===e?1.25*n:.75*n;t<.5&&(t=.5),t>90&&(t=90),f((0,o.setPixelsPerSecond)(t))};return c>0?null:r.default.createElement(r.default.Fragment,null,void 0!==t.encoder?r.default.createElement(r.default.Fragment,null,r.default.createElement(d.EncoderControls,null)):null,r.default.createElement(a.AnimatedFAB,{style:{position:"absolute",bottom:20,left:20,width:60},icon:u?"arrow-collapse-left":"arrow-collapse-right",onPress:function(){return f((0,o.setIsOpen)(!u))},label:" ",extended:!0}),r.default.createElement(a.AnimatedFAB,{style:{position:"absolute",bottom:20,right:90,width:60},icon:"magnify-plus-outline",onPress:function(){return s("+")},label:" ",extended:!0}),r.default.createElement(a.AnimatedFAB,{style:{position:"absolute",bottom:20,right:20,width:60},icon:"magnify-minus-outline",onPress:function(){return s("-")},label:" ",extended:!0}))},r=u(r)}.apply(t,r))||(e.exports=a)},26593:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(296540),n(841051),n(532005),n(142020),n(992796),n(775942),n(926516),n(932779),n(863946)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=e.projectId,n=e.routeParams,s=(n.encoder,(0,l.useAppDispatch)()),b=(0,c.useQueryClient)(),y=(0,l.useAppSelector)((function(e){return e.editor.caretPosition})),m=(0,l.useAppSelector)((function(e){return e.editor.scrollPosition})),v=(0,l.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),g=(0,l.useAppSelector)((function(e){return e.editor.showConfig})),h=(0,p.default)().width<700||!1,w=(y+m)/v,P=(0,i.useState)(!1),E=(0,a.default)(P,2),I=E[0],S=E[1],O=(0,i.useState)(!1),_=(0,a.default)(O,2),M=(_[0],_[1],(0,c.useQuery)(["projectLayersToolbar",t],(0,r.default)((function*(){var e=yield(0,u.getFolderContent)(t),n=yield Promise.all(e.map(function(){var e=(0,r.default)((function*(e){return Object.assign({},e,{media:yield(0,u.getFolderContent)(null==e?void 0:e.id)})}));return function(t){return e.apply(this,arguments)}}()));return n})))),T=M.data,D=function(){var e=(0,r.default)((function*(){yield M.refetch(),yield b.refetchQueries(["folderData_"+t],{}),yield b.refetchQueries(["folderContent_"+t]),yield b.refetchQueries(["project_"+t]),yield b.refetchQueries(["projectLayers",t]),yield b.refetchQueries(["encodedMedia",t]),yield b.refetchQueries(t+"_comments");var e=null==T?void 0:T.map((function(e){return e.id}));if(console.info("project.folders",e),null!=e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];b.refetchQueries(["folderContent_"+r])}}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.default)((function*(){try{if(I)return;S(!0),yield D()}catch(e){console.error("onClickRefresh",e)}S(!1)}));return function(){return e.apply(this,arguments)}}(),C=function(){var t=(0,r.default)((function*(){var t=yield(0,u.getUserData)(),r=f.default.v4().toString(),a=n.mnemonic;console.info("create contact with mnemonic",a);var i={id:r,partyId:r,userId:t.id,title:t.name,currentPosition:w,isContact:!0,name:t.name,mnemonic:a,isEditorComment:!0,folderId:e.projectId+"_comments"};yield(0,u.createNewParty)(i),yield b.refetchQueries(e.projectId+"_comments")}));return function(){return t.apply(this,arguments)}}();return i.default.createElement(i.default.Fragment,null,h?i.default.createElement(o.Appbar.Action,{icon:g?"cog":"cog-outline",disabled:I,onPress:function(){return s((0,d.setShowConfig)(!g||void 0))}}):i.default.createElement(o.Appbar.Action,{icon:"refresh",disabled:I,onPress:function(){return j()}}),i.default.createElement(o.Appbar.Action,{icon:"comment-plus",onPress:function(){return C()}}))},r=b(r),a=b(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),f=b(f),s=b(s),p=b(p)}.apply(t,r))||(e.exports=a)},742771:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(992796),n(926981),n(898707),n(532005),n(841051),n(775942),n(926516)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EncoderControls=function(){var e=(0,l.useRoute)().params,t=e.projectId,n=e.encoder,s=(0,d.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),p=(0,d.useAppSelector)((function(e){return e.editor.videoCaretPosition})),b=(0,d.useAppSelector)((function(e){return e.editor.videoScrollPosition})),y=(p+b)/s,m=(0,c.useQueryClient)(),v=(0,c.useMutation)((0,r.default)((function*(){try{var e=yield(0,i.getById)(n,t);e.isCopy=e.isCopy||e.id,e.id=f.default.v4().toString(),e.orderId+=1,e.createdAt=(new Date).valueOf().toString(),yield(0,i.writeItem)(e),yield m.refetchQueries(["projectLayers",t]),yield m.refetchQueries(["folderContent_"+e.folderId])}catch(r){console.error("oncClickCopy",r)}}))),g=(0,c.useMutation)((0,r.default)((function*(){try{var e=yield(0,o.getFullLayers)(t),r=(0,i.getActiveProjectLayer)(e,y),a=yield(0,i.getById)(n,t),l=y-r.offset+(a.encoding.start||0),d=l>(null==a?void 0:a.duration)/2;console.info("secondhalf",d);var u=JSON.parse(JSON.stringify(Object.assign({},a)));u.isCopy=a.isCopy||a.id,u.id=f.default.v4().toString(),u.orderId+=1*(d?1:-1),u.encoding.start=l,u.encoding.end=a.encoding.end||a.duration||0,u.createdAt=(new Date).valueOf().toString(),a.encoding.orderId+=d?0:1,a.encoding.end=l,yield(0,i.writeItem)(a),yield(0,i.writeItem)(u),yield m.refetchQueries(["projectLayers",t]),yield m.refetchQueries(["folderContent_"+a.folderId])}catch(c){console.error("oncClickCut",c)}}))),h=g.isLoading||v.isLoading;if(h)return a.default.createElement(a.default.Fragment,null);return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.AnimatedFAB,{icon:"content-cut",style:{position:"absolute",bottom:20,left:90,width:60},onPress:function(){return g.mutateAsync()},label:" ",disabled:h,extended:!0}),a.default.createElement(u.AnimatedFAB,{style:{position:"absolute",bottom:20,left:160,width:60},icon:"content-copy",onPress:function(){return v.mutateAsync()},label:" ",extended:!0,disabled:h}))},r=s(r),a=s(a),f=s(f)}.apply(t,r))||(e.exports=a)},134647:(e,t,n)=>{var r,a;r=[t,n(29293),n(898707),n(532005),n(32261),n(176529),n(932779),n(3469),n(775942),n(709963),n(841051),n(296540)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=b(r),o=b(o),l=b(l),d=b(d),u=b(u),p=b(p);t.default=function(e){var t,n,d,b,y=e.item,m=e.onDragEnd,v=e.onDragStart,g=e.index,h=e.layerIndex,w=e.writeItem,P=e.parentDataHook,E=(0,a.useNavigation)(),I=(0,a.useRoute)(),S=(0,i.useAppSelector)((function(e){return e.editor})).pixelsPerSecond,O=(((null==y?void 0:y.duration)||0)-1)*S,_=(null==(t=y.encoding)?void 0:t.start)||0,M=(null==(n=y.encoding)?void 0:n.end)||y.duration,T=M?(M-_)*S:O,D=new o.default.Value(T),j=(0,c.useMutation)((function(e){return w(e)})),C=o.default.event([{nativeEvent:{translationX:D}}],{listener:function(e){},useNativeDriver:!1}),F=g+h,A=F%2?"darkcyan":"green";F%3>1&&(A="darkslateblue");var x=y.id===(null==(d=I.params)?void 0:d.encoder)||y.id===(null==(b=I.params)?void 0:b.chatId),k=function(){var e=(0,r.default)((function*(e){if(e.nativeEvent.oldState===f.State.ACTIVE){var t,n,r=D._value;r>O&&(r=O),r<40&&(r=40),D._value!==r&&D.setValue(r);var a=JSON.parse(JSON.stringify(y));a.encoding||(a.encoding={}),(r/=S)<(null==(t=y.encoding)?void 0:t.start)&&(r+=null==(n=y.encoding)?void 0:n.start),a.encoding.end=r,console.log("on change duration",r),yield j.mutateAsync(a),yield P.folderContentQuery.refetch()}}));return function(t){return e.apply(this,arguments)}}(),R=(0,i.useAppSelector)((function(e){return e.fs.downloadingProgress[y.id]})),L=y.audioSpectrogram_small;return p.default.createElement(u.default,{key:y.id,style:{height:68,position:"relative"}},p.default.createElement(o.default.View,{style:{width:D.interpolate({inputRange:[_,O],outputRange:[_,O],extrapolate:"clamp"}),height:"100%",top:0,padding:0,margin:0,left:y.currentPosition?S*y.currentPosition:0,position:y.currentPosition?"absolute":"relative",backgroundColor:A,zIndex:2,overflow:"hidden",borderWidth:x?1:0,borderRadius:0,borderColor:"white"}},null,p.default.createElement(f.PanGestureHandler,{onGestureEvent:C,onHandlerStateChange:k},p.default.createElement(u.default,{style:{position:"absolute",right:0,bottom:0,cursor:"pointer",zIndex:100}},p.default.createElement(s.List.Icon,{icon:"resize-bottom-right",style:{padding:0,margin:0}}))),p.default.createElement(s.List.Item,{onPress:function(){return E.setParams(Object.assign({},I.params,{encoder:x?void 0:y.id,chatId:void 0}))},style:{height:"100%",zIndex:10},left:function(){return p.default.createElement(f.TouchableOpacity,{onPressIn:v,onPressOut:m,style:{pointerEvents:"auto"}},p.default.createElement(s.IconButton,{size:18,icon:"drag"}))},title:y.title,right:function(){return p.default.createElement(p.default.Fragment,null)}}),L?p.default.createElement(l.default,{source:{uri:L,cache:"force-cache"},resizeMode:"cover",style:{height:68,width:y.duration*S,position:"absolute",top:0,left:-_*S}}):null,R&&1!==R?p.default.createElement(s.ProgressBar,{style:{width:D,height:68,top:"-100%",position:"absolute",left:0,opacity:.5,zIndex:1e6},progress:R}):null))}}.apply(t,r))||(e.exports=a)},275519:(e,t,n)=>{var r,a;r=[t,n(94634),n(585715),n(296540),n(389385),n(3469),n(863946),n(777782),n(932779),n(841051),n(248389),n(1672),n(532005),n(926981),n(142020),n(775942),n(25442),n(453912),n(170001),n(992796)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P){"use strict";var E=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=E(r),a=E(a),i=S(i),o=E(o),l=E(l),d=E(d),u=E(u),c=E(c),g=E(g),w=S(w);t.default=function(e){var t=e.video2,n=e.projectId,c=(0,b.useAppDispatch)(),E=(0,b.useAppSelector)((function(e){return e.editor.caretPosition})),I=(0,b.useAppSelector)((function(e){return e.editor.scrollPosition})),S=(0,y.useLayers)(n),O=S.layers,_=S.mediaRes,M=S.projectQuery,T=null!=O&&O.length?(0,p.getTotalTime)(O):0,D=(0,i.useState)(!1),j=(0,a.default)(D,2),C=j[0],F=j[1],A=(0,d.default)().width,x=(0,i.useRef)(),k=12,R=120,L=.24*A-50,B=(0,i.useState)(!1),W=(0,a.default)(B,2),N=W[0],z=W[1],U=(0,i.useState)(!1),V=(0,a.default)(U,2),H=V[0],Q=V[1],K=Object.keys(s.FFMpegOutputType),q=(0,p.genRenderCmd)(_,O,!0).execCmd.join("\n"),J=function(){z(!1),Q(!1)},G=(0,b.useAppSelector)((function(e){return e.editor.ffmpegLogs})),X=(0,v.useMutation)((function(e){return(0,P.writeItem)(e)}),{onSuccess:function(){console.info("after writing project"),M.refetch()}}),Y=(0,i.useCallback)((function(e){var n,r,a;if("ArrowLeft"===e.code){var i,o;if(null==(i=t.current)||!i.paused)null==(o=t.current)||o.pause();console.info("arrowLeft, caretPosition, scrollPosition",E,I),c(E>0?(0,m.setCaretPosition)(E-5):(0,m.setScrollPosition)(I-5))}if("ArrowRight"===e.code){var l,d;if(null==(l=t.current)||!l.paused)null==(d=t.current)||d.pause();console.info("arrowRight, caretPosition, scrollPosition",E,I),c((0,m.setCaretPosition)(E+5))}"Space"===e.code&&(null!=(n=t.current)&&n.paused?null==(r=t.current)||r.play():null==(a=t.current)||a.pause())}),[E,I]);(0,i.useEffect)((function(){document.onkeyup=function(e){return Y(e)}}),[Y]);var Z=function(e,t){var n=_,r=!["start","end"].includes(e);["width","height","start","end","framerate"].includes(e)&&isNaN(t)?console.info("invalid type"):(n.editor||(n.editor={}),n.editor[e]=t,r&&(n.editor.lastUpdated=(new Date).valueOf()),X.mutateAsync(n),J())};return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.List.Item,{key:"start",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"clock-plus"}))},titleStyle:{fontSize:k},title:"Start",right:function(e){return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{value:"00:00:00",disabled:!0,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return Z("start",parseInt(e,10))}}))}}),i.default.createElement(f.Divider,{key:"div7"}),i.default.createElement(f.Tooltip,{title:"Controlled by elements on timeline"},i.default.createElement(f.List.Item,{key:"end",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"clock-minus"}))},titleStyle:{fontSize:k},title:"End",right:function(e){return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{disabled:!0,value:(0,p.genExecTime)(T)||0,style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",focusable:!0,onChangeText:function(e){return Z("end",parseInt(e,10))}}))}})),i.default.createElement(f.Divider,{key:"div3"}),i.default.createElement(f.Tooltip,{title:"Requires Premium"},i.default.createElement(f.List.Item,{key:"width",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"ruler"}))},title:"Width",disabled:!0,titleStyle:{fontSize:k},right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{value:null==_||null==(t=_.editor)?void 0:t.width.toString(),style:{textAlign:"right",pointerEvents:"auto"},disabled:!0,focusable:!0,keyboardType:"numeric",onChangeText:function(e){return Z("width",parseInt(e,10))}}))}})),i.default.createElement(f.Divider,{key:"div2"}),i.default.createElement(f.Tooltip,{title:"Requires Premium"},i.default.createElement(f.List.Item,{key:"height",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"ruler"}))},title:"Height",disabled:!0,titleStyle:{fontSize:k},right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{value:null==_||null==(t=_.editor)?void 0:t.height.toString(),style:{textAlign:"right",pointerEvents:"auto"},disabled:!0,focusable:!0,keyboardType:"numeric",onChangeText:function(e){return Z("height",parseInt(e,10))}}))}})),i.default.createElement(f.Divider,{key:"divaspect"}),i.default.createElement(f.Tooltip,{title:"Requires Premium"},i.default.createElement(f.List.Item,{key:"aspect",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"aspect-ratio"}))},disabled:!0,titleStyle:{fontSize:k},title:"Aspect Ratio",onPress:function(){},right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{value:null==_||null==(t=_.editor)?void 0:t.aspectRatio,style:{textAlign:"right"},disabled:!0,onChangeText:function(e){var t;console.info("onchangetext",e),""!==e&&e!==(null==_||null==(t=_.editor)?void 0:t.aspectRatio)&&Z("aspectRatio",e)}}))}})),i.default.createElement(f.Divider,{key:"divrate"}),i.default.createElement(f.List.Item,{key:"frames",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"movie-roll"}))},titleStyle:{fontSize:k},title:"Frame Rate",right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.TextInput,{value:(null==_||null==(t=_.editor)||null==(t=t.framerate)?void 0:t.toString())||"30",style:{textAlign:"right",pointerEvents:"auto",fontSize:14},keyboardType:"numeric",onChangeText:function(e){return Z("framerate",parseInt(e,10))}}))}}),i.default.createElement(f.Divider,{key:"div1"}),i.default.createElement(f.List.Item,{key:"output",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"file-export"}))},title:"Output",titleStyle:{fontSize:k},right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.Menu,{visible:N,onDismiss:J,anchor:i.default.createElement(f.Button,{mode:"outlined",onPress:function(){return z(!0)}},null==_||null==(t=_.editor)?void 0:t.output)},i.default.createElement(i.default.Fragment,null,K.map((function(e){return i.default.createElement(f.Menu.Item,{key:e,onPress:function(){return Z("output",e)},title:e})})))))}}),i.default.createElement(f.Divider,{key:"divPreset"}),i.default.createElement(f.List.Item,{key:"preset",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{style:{fontSize:k},icon:"file-export"}))},title:"Preset",titleStyle:{fontSize:k},right:function(e){var t;return i.default.createElement(l.default,{style:{width:R}},i.default.createElement(f.Menu,{visible:H,onDismiss:J,anchor:i.default.createElement(f.Button,{mode:"outlined",onPress:function(){return Q(!0)}},null==_||null==(t=_.editor)?void 0:t.preset)},i.default.createElement(i.default.Fragment,null,Object.keys(s.FFMpegPreset).map((function(e){return i.default.createElement(f.Menu.Item,{key:e,onPress:function(){return Z("preset",e)},title:e})})))))}}),i.default.createElement(f.Divider,{key:"divinputcode2"}),i.default.createElement(f.Button,{icon:"code-brackets",onPress:function(){return F(!C)}},"Show FFMpeg Code"),!0===C?i.default.createElement(l.default,null,i.default.createElement(f.Divider,{key:"divinputcode"}),i.default.createElement(f.List.Item,{key:"code",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:"code-brackets"}))},title:"",titleStyle:{fontSize:k},onPress:function(){var e;return null==x||null==(e=x.current)?void 0:e.focus()},right:function(e){var t;return i.default.createElement(o.default,{style:{width:L,zIndex:10}},i.default.createElement(w.default,{className:"codeEditor",ref:x,style:{fontSize:k,inputLineHeight:k,highlighterLineHeight:k,marginLeft:0},language:"bash",syntaxStyle:w.CodeEditorSyntaxStyles.xonokai,initialValue:(null==(t=_.editor)||null==(t=t.code)?void 0:t.join(","))||"",onChange:function(e){var t;e!==(null==(t=_.editor)||null==(t=t.code)?void 0:t.join(","))&&Z("code",e.split(","))},autoFocus:!1,showLineNumbers:!0}))}}),i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Divider,{key:"divoutputcode"}),q&&i.default.createElement(f.List.Item,{key:"output_code",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:"code-tags"}))},title:"",onPress:function(){return u.default.setString(q)},titleStyle:{fontSize:k},right:function(){return i.default.createElement(l.default,{style:{width:L}},i.default.createElement(g.default,{language:"bash",style:h.xonokai,fontSize:k,pointerEvents:!0,scroll:!0,highlighter:"prism"},q)," ")}}),i.default.createElement(f.Divider,{key:"divlogs"}),q&&i.default.createElement(f.List.Item,{key:"output_logs",left:function(e){return i.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:"code-parentheses"}))},title:"",onPress:function(){return u.default.setString(G)},titleStyle:{fontSize:k},right:function(){return i.default.createElement(l.default,{style:{width:L,pointerEvents:"auto"}},i.default.createElement(g.default,{language:"bash",style:h.xonokai,customStyle:{pointerEvents:"auto",userSelect:"all"},fontSize:k,userSelect:!0,pointerEvents:!0,scroll:!0,highlighter:"prism"},G)," ")}}),i.default.createElement(f.Divider,{key:"div8"}))):null)}}.apply(t,r))||(e.exports=a)},29582:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(863946),n(898707),n(532005),n(142020),n(697732),n(345972),n(317482)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=s(a),i=s(i),u=s(u);t.default=(0,r.memo)((function(){var e=(0,i.default)().width<700,t=(0,o.useRoute)().params,n=t.projectId,s=(0,l.useAppDispatch)();return(0,r.useEffect)((function(){return s((0,d.setIsPlaying)(!1)),s((0,d.setScrollPosition)(0)),s((0,d.setCaretPosition)(0)),function(){s((0,d.setIsPlaying)(!1)),s((0,d.setScrollPosition)(0)),s((0,d.setCaretPosition)(0))}}),[n]),r.default.createElement(a.default,{style:{display:"flex",flexDirection:"column",gap:0,height:"100%"}},r.default.createElement(a.default,{style:{height:e?"auto":"61%",width:"100%"}},r.default.createElement(u.default,{projectId:n,routeParams:t})),r.default.createElement(f.EditorTimeline,null),r.default.createElement(c.EditorControls,null))}))}.apply(t,r))||(e.exports=a)},820908:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(3469),n(637843),n(248389),n(841051),n(714230),n(992796),n(134647),n(139131),n(719931)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.EditorLayerBodyComponent=function(e){var t=(0,o.useFolder)(e.folderId,c.getFolderContent,(function(t){return(0,c.getById)(t,e.parentFolderId)}),l.FolderType.editor,c.writeItem),n=(0,a.useCallback)((function(){return(0,s.useFileSelectOptions)(e.folderId)}),[e.folderId])(),b=t.folderContent;return a.default.createElement(i.default,{style:{display:"flex",flexDirection:"row",overflow:"hidden"}},a.default.createElement(d.Portal,null,a.default.createElement(p.AttachmentDrawer,n)),a.default.createElement(i.default,{style:{width:"100%",display:"flex",flexDirection:"row",overflow:"hidden"}},a.default.createElement(u.default,{horizontal:!0,renderItem:function(n){var r=n.item,i=n.onDragEnd,o=n.onDragStart,l=n.index;return a.default.createElement(f.default,{onDragEnd:i,onDragStart:o,item:r,index:l,layerIndex:e.layerIndex,writeItem:c.writeItem,parentDataHook:t})},keyExtractor:function(e){return e.id||e.date.toString()},data:b||[],onReordered:t.onReordered,style:{width:"100%"},scrollEnabled:!1,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1}),a.default.createElement(d.List.Item,{title:"Add Content",titleStyle:{fontSize:14},style:{pointerEvents:"auto"},onPress:n.showDrawer,right:function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.IconButton,(0,r.default)({},e,{icon:"plus",onPress:n.showDrawer,mode:"outlined"})))}})))},r=b(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=b(i),u=b(u),f=b(f)}.apply(t,r))||(e.exports=a)},861195:(e,t,n)=>{var r,a;r=[t,n(443693),n(29293),n(296540),n(3469),n(863946),n(637843),n(248389),n(841051),n(709963),n(992796)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s){"use strict";var p=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorLayerHeaderComponent=function(e){var t=(0,d.useFolder)(e.folderId,s.getFolderContent,(function(t){return(0,s.getById)(t,e.parentFolderId)}),u.FolderType.editor,s.writeItem),n=(0,l.default)().width<700,p=t.folder,b=null==p?void 0:p.editor,y=function(){var e=(0,a.default)((function*(e){yield(0,s.writeItem)(Object.assign({},t.folder,{editor:Object.assign({},b||{},(0,r.default)({},e,!b||!0!==b[e]))})),t.folderContentQuery.refetch()}));return function(t){return e.apply(this,arguments)}}(),m=n?12:14;return i.default.createElement(o.default,{style:{display:"flex",flexDirection:"row",height:68,minWidth:300,padding:5,paddingVertical:10}},i.default.createElement(c.Divider,null),i.default.createElement(f.TouchableOpacity,{onPressIn:e.onDragStart,onPressOut:e.onDragEnd,style:{pointerEvents:"auto"}},i.default.createElement(c.IconButton,{size:m,icon:"drag",mode:"outlined"})),i.default.createElement(c.IconButton,{size:m,icon:null!=b&&b.muted?"volume-off":"volume-high",mode:"outlined",onPress:function(e){return y("muted")}}),i.default.createElement(c.IconButton,{size:m,mode:"outlined",icon:null!=b&&b.videoDisabled?"video-off":"video",onPress:function(e){return y("videoDisabled")}}),i.default.createElement(c.IconButton,{size:m,icon:"delete",onPress:(0,a.default)((function*(){yield t.onRemoveFolder({id:e.folderId}),e.parentHook.folderContentQuery.refetch()})),mode:"outlined"}),i.default.createElement(c.Divider,null))},r=p(r),a=p(a),i=p(i),o=p(o),l=p(l)}.apply(t,r))||(e.exports=a)},317221:(e,t,n)=>{var r,a;r=[t,n(820908),n(861195)],void 0===(a=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))})),Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))}.apply(t,r))||(e.exports=a)},812278:(e,t,n)=>{var r,a;r=[t,n(296540),n(709963),n(532005),n(142020),n(32261),n(863946),n(3469)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=c(r),l=c(l),d=c(d),u=c(u);t.default=function(){var e=(0,i.useAppDispatch)(),t=(0,i.useAppSelector)((function(e){return e.editor.caretPosition})),n=(0,d.default)(),c=n.width,f=n.height,s=new l.default.Value(0),p=l.default.event([{nativeEvent:{translationX:s}}],{listener:function(e){},useNativeDriver:!0});return r.default.createElement(u.default,{style:{cursor:"pointer",height:0}},r.default.createElement(a.PanGestureHandler,{onGestureEvent:p,onHandlerStateChange:function(n){if(n.nativeEvent.oldState===a.State.ACTIVE){var r=n.nativeEvent.translationX,i=t+r;return i<0&&(i=0),s.setOffset(i),s.setValue(0),e((0,o.setCaretPosition)(i)),i}}},r.default.createElement(l.default.View,{style:[{width:30,opacity:.5,height:f/2,justifyContent:"center",alignItems:"center",backgroundColor:"red",cursor:"pointer"},{transform:[{translateX:s.interpolate({inputRange:[0,c],outputRange:[t,c],extrapolate:"extend"})}]}]})))}}.apply(t,r))||(e.exports=a)},463131:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(296540),n(532005),n(3469),n(841051),n(775942),n(898707),n(992796)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.EditorRuler=function(){var e=(0,o.useAppSelector)((function(e){return e.editor})).pixelsPerSecond,t=(0,c.useRoute)().params,n=(0,u.useQuery)(t.projectId+"_comments",(0,a.default)((function*(){return yield(0,f.getFolderContent)(t.projectId+"_comments",t.mnemonic)}))).data,s=(0,i.useMemo)((function(){for(var t=b,n=[];n.length<t;){var r=n.length;n.push(r+1)}var a=n.filter((function(t){return e<1?t%60===0:e<2?t%30===0:!(e<4)||t%10===0})),i=e;return e<4&&(i=10*e),e<2&&(i=30*e),e<1&&(i=60*e),[a,i]}),[e]),p=(0,r.default)(s,2),y=p[0],m=p[1],v=(0,c.useNavigation)();return i.default.createElement(l.default,{style:{width:"100%",height:10,top:0,left:0,position:"absolute",display:"flex",flexDirection:"row",gap:m-1,zIndex:1e3}},y.map((function(e){return i.default.createElement(l.default,{key:"increment_"+e,style:{borderColor:"white",borderLeftWidth:1,height:e%2?3:7}},e%5?null:i.default.createElement(d.Text,{style:{position:"absolute",left:m,marginTop:5,fontSize:10}},e))})),null==n?void 0:n.map((function(n){var r=t.chatId===n.id;return i.default.createElement(l.default,{style:{position:"absolute",left:e*(n.currentPosition||n.orderId)}},i.default.createElement(d.Chip,{selected:r,icon:"comment",style:{backgroundColor:"black",borderWidth:r?1:0,borderColor:"white"},showSelectedCheck:!1,showSelectedOverlay:r,key:"comment_"+n.id,onPress:function(){return v.setParams(Object.assign({},t,{encoder:void 0,chatId:t.chatId===n.id?void 0:n.id}))}},i.default.createElement(d.Text,{style:{fontSize:12}},n.name.split(" ").map((function(e){return e[0]})).join(""))))})))},r=s(r),a=s(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),l=s(l);var b=600}.apply(t,r))||(e.exports=a)},317482:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(3469),n(863946),n(932779),n(550847),n(637843),n(248389),n(898707),n(841051),n(714230),n(709963),n(463131),n(532005),n(142020),n(926516),n(775942),n(992796),n(812278),n(317221)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P,E,I){"use strict";var S=n(124994);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.EditorTimeline=function(){var e,t=(0,l.default)().width<700,n=(0,s.useRoute)(),d=null==(e=(0,w.useQuery)("userData",(0,a.default)((function*(){return yield(0,P.getUserData)()}))).data)?void 0:e.id,S=n.params,O=S.projectId,M=S.parentFolderId,T=(0,v.useAppDispatch)(),D=(0,i.useCallback)((function(e){return(0,P.getById)(e,M)}),[M]),j=(0,c.useFolder)(O,P.getFolderContent,D,f.FolderType.editor,P.writeItem),C=(0,v.useAppSelector)((function(e){return e.editor.scrollPosition})),F=(0,v.useAppSelector)((function(e){return e.editor.scrollParams})),A=(0,w.useMutation)((function(e){return(0,P.writeItem)(e)})),x=function(){var e=(0,a.default)((function*(){var e,t,n,r={id:h.default.v4().toString(),title:"Layer"+(((null==(e=j.folderContent)?void 0:e.length)||0)+1),folderId:O,userId:d,isEditorLayer:!0,orderId:((null==(t=j.folderContent)?void 0:t.length)||0)+1,folderType:_,isFolder:!1,date:(new Date).valueOf(),mnemonic:null==(n=j.folder)?void 0:n.mnemonic,editor:{isCommentLayer:!1}};yield A.mutateAsync(r),j.folderContentQuery.refetch()}));return function(){return e.apply(this,arguments)}}(),k=(0,i.useRef)(),R=(0,v.useAppSelector)((function(e){return e.editor.isOpen})),L=t?R?"54%":"90%":"79%",B=t?R?"46%":0:"21%";return i.default.createElement(y.ScrollView,{style:{width:"100%",height:t?"auto":"39%",display:"flex"},showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},i.default.createElement(o.default,{style:{display:"flex",flexDirection:"column"}},i.default.createElement(o.default,{style:{width:"100%",flexDirection:"row"}},i.default.createElement(o.default,{style:{width:B}},void 0!==j.folderContent&&i.default.createElement(b.default,{renderItem:function(e){var t=e.item,n=e.onDragEnd,r=e.onDragStart,a=e.index;return i.default.createElement(I.EditorLayerHeaderComponent,{key:t.id,onDragEnd:n,onDragStart:r,folderId:t.id,layerIndex:a,parentHook:j,parentFolderId:M,projectId:O})},keyExtractor:function(e){return e.id||e.date.toString()},data:j.folderContent,onReordered:function(){var e=(0,a.default)((function*(e,t){yield j.onReordered(e,t)}));return function(t,n){return e.apply(this,arguments)}}(),showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1})),i.default.createElement(y.ScrollView,{horizontal:!0,style:{width:L,display:"flex",flexDirection:"row",height:"100%"},onMomentumScrollEnd:void 0,onScroll:function(e){var t=e.nativeEvent.contentOffset.x;T((0,g.setScrollPosition)(t))},ref:function(e){var t,n,r;k.current=e;var a=null==k||null==(t=k.current)?void 0:t.clientWidth,i=null==(n=k.current)?void 0:n.scrollWidth;F.totalScroll===i&&F.totalWidth===a||T((0,g.setScrollParams)({totalWidth:a,totalScroll:i})),null==k||null==(r=k.current)||r.scrollTo({x:C})},scrollEventThrottle:50,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1},i.default.createElement(m.EditorRuler,null),i.default.createElement(u.default,{renderItem:function(e){var t=e.item,n=e.index;return i.default.createElement(I.EditorLayerBodyComponent,{key:t.id,folderId:t.id,layerIndex:n,parentFolderId:M})},keyExtractor:function(e){return e.id||e.date.toString()},data:j.folderContent,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1}))),i.default.createElement(o.default,{style:{width:B,overflow:"visible"}},i.default.createElement(p.Divider,null),i.default.createElement(p.List.Item,{titleStyle:{fontSize:14},title:"",onPress:function(){return x()},right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(p.IconButton,(0,r.default)({},e,{icon:"plus",mode:"outlined"})))}})),i.default.createElement(o.default,{style:{width:L,position:"absolute",height:0,left:B}},i.default.createElement(E.default,null))))},r=S(r),a=S(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),o=S(o),l=S(l),d=S(d),u=S(u),b=S(b),h=S(h),E=S(E);var _=f.FolderType.editor}.apply(t,r))||(e.exports=a)},502516:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(932779),n(3469),n(532005),n(775942),n(950198),n(1672),n(841051)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorLoader=function(e){e.width;var t,n=e.height,i=e.queryData,s=e.isAudioMissing,p=(e.isVideoMissing,e.refetch),b=(0,l.useAppDispatch)(),y={display:"flex",width:"auto",height:n,flexDirection:"column",alignContent:"center",alignItems:"center",gap:20,paddingTop:n/2-50},m="Download Media",v=(0,d.useMutation)(function(){var e=(0,r.default)((function*(e,t){console.info("onDownloadMediaPress",e);var n=e;b((0,u.setDownloadingProgress)({itemId:n,progress:.01}));try{yield(0,c.downloadFileById)(e,t,(function(e){b((0,u.setDownloadingProgress)({itemId:n,progress:e})),1===e&&setTimeout((function(){return p()}),500)}),(function(){return setTimeout((function(){return p()}),500)}))}catch(r){console.error(r)}}));return function(t,n){return e.apply(this,arguments)}}()),g=s?null==(t=i.audioLayer)?void 0:t.activeMedia:i.activeMedia,h=(0,l.useAppSelector)((function(e){return(null==g?void 0:g.id)&&e.fs.downloadingProgress[null==g?void 0:g.id]})),w=v.mutateAsync;(v.isLoading||"number"===typeof h)&&(m="Downloading Media "+parseInt(100*h,10)+"%");return a.default.createElement(o.default,{style:y},a.default.createElement(f.Text,null,"Media is missing"),a.default.createElement(f.Button,{mode:"outlined",loading:!(!v.isLoading&&!h)||void 0,disabled:!(!v.isLoading&&!h)||void 0,onPress:function(){return w(null==g?void 0:g.id,null==g?void 0:g.folderId)}},m))},r=s(r),a=s(a),i=s(i),o=s(o)}.apply(t,r))||(e.exports=a)},317333:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(841051),n(992796),n(532005),n(142020),n(863946),n(351175),n(775942),n(926981)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.EditorPlayControls=function(e){var t=(0,c.default)().width,n=(0,d.useAppDispatch)(),b=(0,d.useAppSelector)((function(e){return e.editor.caretPosition})),y=(0,d.useAppSelector)((function(e){return e.editor.scrollPosition})),m=(0,d.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),v=(0,d.useAppSelector)((function(e){return e.editor.isPlaying})),g=(0,d.useAppSelector)((function(e){return e.editor.activeLayer})),h=(b+y)/m,w=(0,d.useAppSelector)((function(e){return e.editor.isRendering})),P=(0,s.useQueryClient)(),E=e.projectId,I=function(){return n((0,f.setFolderMenuItemId)({itemId:void 0}))},S=(0,s.useMutation)((0,a.default)((function*(){try{yield P.refetchQueries(["folderData_"+E],{}),yield P.refetchQueries(["folderContent_"+E]),yield P.refetchQueries(["project_"+E]),yield P.refetchQueries(["projectLayers",E]),yield P.refetchQueries(["encodedMedia",E]),yield P.refetchQueries(E+"_comments");var e=yield(0,l.getById)(E),t=yield(0,p.getFullLayers)(E),r=yield(0,l.encodeProject)(e,t,!1,(function(e){return n((0,u.setRenderProgress)(e))}),(function(e){return n((0,u.addNewLogLine)(e))}));n((0,u.setRenderUrl)(r)),n((0,u.setIsRendering)(!1))}catch(a){n((0,u.setRenderingError)(!0))}I()})));return i.default.createElement(o.List.Item,{style:{width:e.width||t,height:70,position:"absolute",bottom:0,backgroundColor:"rgba(0,0,0,0.7)",zIndex:1e4},left:function(e){return i.default.createElement(o.List.Icon,(0,r.default)({},e,{icon:"clock"}))},title:(0,l.genExecTime)(h),right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(o.Button,{icon:"movie",style:{pointerEvents:"auto",cursor:"pointer",height:40},onPress:(0,a.default)((function*(){n((0,u.setIsRendering)(!0)),S.mutateAsync(),I()})),loading:w,disabled:w,mode:"outlined"},w?"Rendering":"Render"),i.default.createElement(o.IconButton,(0,r.default)({},e,{mode:"contained",icon:v?"pause":"play",onPress:(0,a.default)((function*(){try{!1===v?(console.info("start play"),n((0,u.setActiveLayer)({activeLayerId:g,caretPosition:b,scrollPosition:y})),n((0,u.setIsPlaying)(!0))):n((0,u.setIsPlaying)(!1))}catch(e){console.error(e)}}))})))}})},r=b(r),a=b(a),i=b(i),c=b(c)}.apply(t,r))||(e.exports=a)},295176:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(932779),n(355508),n(863946),n(3469),n(841051),n(775942),n(1672),n(532005),n(898707),n(142020),n(160567),n(502516),n(926981)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v){"use strict";var g=n(124994);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=g(i),o=g(o),l=g(l),d=g(d);var w=o.default.create({video:{width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0},chip:{fontSize:18}});t.default=function(e){var t,n,i,o,y,g,h,P,E,I,S,O,_=e.video2,M=e.projectId,T=e.height,D=(0,a.useRef)(),j=(0,s.useAppDispatch)(),C=(0,s.useAppSelector)((function(e){return e.editor.encoderProgress})),F=(0,s.useAppSelector)((function(e){return e.editor.pixelsPerSecond})),A=(0,s.useAppSelector)((function(e){return e.editor.videoCaretPosition})),x=(0,s.useAppSelector)((function(e){return e.editor.videoScrollPosition})),k=(0,v.useLayers)(M),R=k.mediaRes,L=k.layers,B=((0,a.useRef)(),(0,s.useAppSelector)((function(e){return e.editor.isPlaying}))),W=(0,s.useAppSelector)((function(e){return e.editor.canScroll})),N=(0,s.useAppSelector)((function(e){return e.editor.scroll})),z=(0,s.useAppSelector)((function(e){return e.editor.activeLayer})),U=(0,p.useIsFocused)(),V=(A+x)/F||0,H=(0,c.useQuery)(["encodedMedia",M,V,z],(0,r.default)((function*(){return yield(0,f.getProjectMedia)(L,V,(function(e){return j((0,b.setEncoderProgress)(e.progress))}))})),{enabled:!(void 0===(null==R?void 0:R.id)||null==L||!L.length||!U),keepPreviousData:!1,onSuccess:function(){var e;console.info("after query"),null!=_&&_.current&&(_.current.currentPosition=(null==(e=H.data)?void 0:e.currentPosition)||0)}}),Q=(null==(t=H.data)?void 0:t.currentPosition)||0,K=(null==(n=H.data)?void 0:n.offset)||0,q=(0,l.default)().width,J=(0,a.useCallback)((function(e,t){try{var n,r,a,i,o=(K||0)+e-((null==(n=H.data)?void 0:n.activeMedia.encoding.start)||0);if(o>=(null==(r=H.data)?void 0:r.totalTime))null==(i=_.current)||i.pause(),j((0,b.setIsPlaying)(!1));var l=o*F,d=null==(a=(0,f.getActiveProjectLayer)(L,o))||null==(a=a.activeMedia)?void 0:a.id,u=d&&d!==z,c=0,s=A;if(!t){if(W){var p=l-N;if(p>0)c=l-p,s=p;else c=l-A}else s=l;j((0,b.setIsPlaying)(!0)),j((0,b.setCaretPosition)(s)),j((0,b.setScrollPosition)(c))}t&&B&&j((0,b.setIsPlaying)(!1)),u&&j((0,b.setActiveLayer)({activeLayerId:d,scrollPosition:c,caretPosition:s}))}catch(y){console.error("ontimeupdate rr",y)}}),[H,W,B,L,K]),G={display:"flex",width:"auto",height:T,flexDirection:"column",alignContent:"center",alignItems:"center",gap:20,paddingTop:T/2-50},X="Media is missing",Y="file_is_not_downloaded"===(null==(i=H.data)?void 0:i.audioUrl),Z="file_is_not_downloaded"===(null==H||null==(o=H.data)?void 0:o.url);if(Z||Y)return a.default.createElement(m.EditorLoader,{width:q,height:T,queryData:null==H?void 0:H.data,isVideoMissing:Z,isAudioMissing:Y,refetch:H.refetch});console.info("encodedMediaQuery.data?.url",null==(y=H.data)?void 0:y.url);var $="file_is_being_processed"===(null==(g=H.data)?void 0:g.audioUrl),ee="file_is_being_processed"===(null==(h=H.data)?void 0:h.url);if($||ee)return X=$?"Audio is being processed":"Video is being processed",a.default.createElement(d.default,{style:G},a.default.createElement(u.Text,{style:{color:"white",zIndex:10}},X));if(C&&1!==C||H.isFetching)return X="Prerendering",a.default.createElement(d.default,{style:Object.assign({},G,{padding:0})},a.default.createElement(u.Text,{style:{position:"absolute",top:T/2-50,color:"white",zIndex:10}},X));var te=null==H||null==(P=H.data)||null==(P=P.audioLayer)?void 0:P.activeMedia;return a.default.createElement(d.default,{style:{height:T,width:"100%"}},a.default.createElement("video",{controls:!1,style:w.video,src:(null==(E=H.data)?void 0:E.url)||"",muted:null==(I=H.data)?void 0:I.muted,ref:function(e){e&&(e.currentTime=Q,_.current=e,B&&e.play())},onPlaying:function(e){j((0,b.setIsPlaying)(!0))},onPause:function(e){j((0,b.setIsPlaying)(!1))},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){return J(e.nativeEvent.target.currentTime,e.nativeEvent.target.paused)}}),te&&(null==H||null==(S=H.data)?void 0:S.activeMedia.id)!==te.id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("video",{src:(null==(O=H.data)?void 0:O.audioUrl)||"",style:{opacity:0,width:0,height:0},volume:1,controls:!1,muted:!1,ref:function(e){var t;e&&(e.currentTime=null==(t=H.data)?void 0:t.audioPosition,D.current=e,B&&e.play())}})))}}.apply(t,r))||(e.exports=a)},298299:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(38953),n(355508),n(3469),n(841051),n(775942),n(992796),n(532005),n(898707),n(451378),n(120973)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n,o=e.projectId,y=e.height,m=e.folderId,g=(0,f.useAppDispatch)(),h=(0,f.useAppSelector)((function(e){return e.encoder})),w=(0,d.useTheme)(),P=((0,u.useQueryClient)(),(0,u.useQuery)(["projectdata",o],(0,r.default)((function*(){return yield(0,c.getById)(o,m)})),{enabled:!!o})),E=(0,s.useIsFocused)(),I=P.data,S=(0,u.useQuery)(["localMedia",o],(0,r.default)((function*(){if(null!=I&&I.id){var e;try{e=yield(0,c.getFileOpfs)(I)}catch(t){console.error(t)}return"wt"!==I.extractor||e||(e=yield(0,c.getVideoWT)(I)),e}})),{enabled:!(!P.isFetched||!E||void 0===(null==I?void 0:I.id))}),O=(0,u.useQuery)(["encodedMedia",o],(0,r.default)((function*(){return(null==I?void 0:I.id)&&(0,c.encodeMedia)(I,(function(e){return g((0,b.setEncoderProgress)(e.progress))}))})),{enabled:!(!P.isFetched||!E||void 0===(null==I?void 0:I.id))}),_=(0,u.useQuery)(["encodedFileSize",o],(0,r.default)((function*(){var e;return O.data?null==(e=(yield fetch(O.data,{cache:"no-cache"})).headers.get("Content-Length"))?void 0:e.toString():"0"})),{enabled:!!(!P.isFetching&&E&&O.data&&O.data.search("blob")>-1),retry:!1}),M=P.isFetching||S.isFetching;console.info("encodedFileSize",_.data);var T=S.data,D=(0,a.useRef)(),j=(0,a.useRef)();if(!I)return a.default.createElement(d.ActivityIndicator,{size:72});return a.default.createElement(a.default.Fragment,null,a.default.createElement(d.Divider,null),a.default.createElement(d.Banner,{visible:!!o,theme:w,style:{backgroundColor:"black",padding:0,margin:0},contentStyle:{width:"100%",height:"100%",maxWidth:"auto",padding:0,margin:0}},a.default.createElement(l.default,{style:{width:"50%",height:y/2,borderRightWidth:1,borderRightColor:"rgb(73, 69, 79)"}},a.default.createElement(d.Text,{style:{textAlign:"left",zIndex:10}},a.default.createElement(d.Chip,{textStyle:v.chip},"Before: ",(null==I?void 0:I.size)&&(0,p.niceBytes)(I.size))),M?a.default.createElement(d.ActivityIndicator,{size:72}):null,o&&!M&&E?a.default.createElement("video",{controls:!0,style:v.video,onPlaying:function(e){var t=e.nativeEvent.target.currentTime;window.video1=e.nativeEvent.target,D.current&&(D.current.currentTime=t),D.current&&D.current.paused&&D.current.play()},onPause:function(e){var t=e.nativeEvent.target.currentTime;D.current&&(D.current.currentTime=t),D.current&&!D.current.paused&&D.current.pause()},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){var t=e.nativeEvent.target,n=t.currentTime,r=t.paused;D.current&&r&&(D.current.currentTime=n)},ref:j,src:T}):null),a.default.createElement(l.default,{style:{width:"50%",height:y/2,borderLeftWidth:1,borderLeftColor:"rgb(73, 69, 79)"}},O.isFetching?a.default.createElement(a.default.Fragment,null,a.default.createElement(d.Text,{style:{textAlign:"right",zIndex:10}}," "),a.default.createElement(d.ProgressBar,{style:{height:"100%",position:"absolute",top:-25},progress:h.encoderProgress}),a.default.createElement(l.default,{style:{position:"absolute",top:"40%",display:"flex",width:"100%"}},a.default.createElement(d.Text,{style:{textAlign:"center",color:"coral"}},"Loading"," ",parseFloat(Math.abs(100*h.encoderProgress)).toFixed(2),"%"))):a.default.createElement(d.Text,{style:{textAlign:"right",zIndex:10}},a.default.createElement(d.Chip,{textStyle:v.chip},"After:"," ",!_.isFetching&&_.data&&(0,p.niceBytes)(_.data)),a.default.createElement("a",{href:O.data,download:!0},a.default.createElement(d.Chip,{textStyle:v.chip,onPress:function(){}},"Download"))),o&&!O.isFetching&&E?a.default.createElement(a.default.Fragment,null,"mp4"===(null==I||null==(t=I.encoding)?void 0:t.output)&&a.default.createElement("video",{controls:!0,style:v.video,onPlaying:function(e){var t,n;null!=(t=j.current)&&t.paused&&(null==(n=j.current)||n.play())},onPause:function(e){var t,n;null!=(t=j.current)&&t.paused||null==(n=j.current)||n.pause()},ref:D,src:O.data}),"gif"===(null==I||null==(n=I.encoding)?void 0:n.output)&&a.default.createElement(i.default,{source:{uri:O.data},resizeMode:"contain",style:v.video})):null)),a.default.createElement(d.Divider,null))},r=y(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=y(i),o=y(o),l=y(l);var v=o.default.create({video:{width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0},chip:{fontSize:18}})}.apply(t,r))||(e.exports=a)},805310:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(585715),n(296540),n(389385),n(3469),n(863946),n(841051),n(775942),n(992796),n(898707),n(248389),n(709963),n(25442),n(453912),n(170001),n(532005),n(351175),n(730503)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P){"use strict";var E=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=E(r),a=E(a),i=E(i),o=S(o),l=E(l),d=E(d),u=E(u),m=E(m),g=S(g);t.default=(0,o.memo)((function(e){var t=(0,p.useRoute)(),n=(0,f.useQueryClient)(),E=(0,o.useState)(!1),I=(0,i.default)(E,2),S=I[0],O=I[1],_=(null==e?void 0:e.params)||t.params;console.info("params",_);var M=_||{},T=M.projectId,D=M.encoder,j=M.folderId,C=M.parentFolderId;D&&(T=D);var F=(0,f.useQuery)("project_"+T,(0,a.default)((function*(){return yield(0,s.getById)(T,C||j)}))),A=(0,o.useState)(!1),x=(0,i.default)(A,2),k=x[0],R=x[1],L=F.data,B=(0,o.useRef)(),W=(0,o.useRef)(),N=(0,u.default)(),z=N.height,U=N.width,V=e.codeWidth||U-200,H=((0,p.useNavigation)(),(0,f.useMutation)(function(){var e=(0,a.default)((function*(e){var t=yield(0,s.writeItem)(e);return clearTimeout(B.current),B.current=setTimeout((function(){n.refetchQueries({queryKey:"folderContent_"+(null==L?void 0:L.folderId)}),n.refetchQueries({queryKey:["projectdata",T]}),n.resetQueries({queryKey:["encodedMedia",T],exact:!0}),n.resetQueries({queryKey:["encodedFileSize",T],exact:!0}),n.resetQueries({queryKey:["encodedFileSize",T],exact:!0}),F.refetch()}),1e3),t}));return function(t){return e.apply(this,arguments)}}())),Q=(0,P.useCloseDialog)().closeDialog,K=(0,h.useAppDispatch)(),q=function(){var e=(0,a.default)((function*(){K((0,w.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Media",appDialogIcon:"delete",appDialogOnSelectRight:function(){var e=(0,a.default)((function*(){yield H.mutateAsync(Object.assign({},L,{isDeleted:!0})),Q()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This media will be removed from the project",appDialogControls:void 0,appDialogLoading:!1}))}));return function(){return e.apply(this,arguments)}}(),J=(0,o.useState)(!1),G=(0,i.default)(J,2),X=G[0],Y=G[1],Z=(0,o.useState)(!1),$=(0,i.default)(Z,2),ee=$[0],te=$[1],ne=Object.keys(b.FFMpegOutputType),re=function(){Y(!1),te(!1)},ae=function(e,t){console.info("selectvalue",e);var n=L,r=!["start","end","soundVolume"].includes(e);t!==n.encoding[e]&&(["width","compressionLevel","height","start","end","soundVolume"].includes(e)&&isNaN(t)?console.info("invalid type"):""!==t&&(n.encoding||(n.encoding={}),n.encoding[e]=t,console.info(n),r&&(n.encoding.lastUpdated=(new Date).valueOf()),H.mutateAsync(n)))};if(F.isFetching)return o.default.createElement(c.ActivityIndicator,{size:72});var ie=(0,s.genExecCmd)(L).join("\n"),oe=12,le=120;return o.default.createElement(y.ScrollView,{style:{height:z/2},showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},o.default.createElement(c.Divider,{key:"div00"}),o.default.createElement(c.List.Item,{key:"info",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"information"}))},title:null==L?void 0:L.title,right:function(){return o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Menu,{anchor:o.default.createElement(c.IconButton,{icon:"dots-vertical",onPress:function(){return R(!0)}}),style:{marginTop:50},visible:k,onDismiss:function(){return R(!1)}},o.default.createElement(o.default.Fragment,null,o.default.createElement(c.Menu.Item,{leadingIcon:"delete",title:"Delete Item",onPress:q}))))}}),o.default.createElement(c.Divider,{key:"div01"}),o.default.createElement(c.List.Item,{key:"start",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"clock-plus"}))},title:"Start",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.TextInput,{value:(null==L||null==(t=L.encoding)||null==(t=t.start)?void 0:t.toString())||"0",style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return ae("start",parseFloat(e))}}))}}),o.default.createElement(c.Divider,{key:"div7"}),o.default.createElement(c.List.Item,{key:"end",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"clock-minus"}))},title:"End ("+(null==L?void 0:L.duration)+")",titleStyle:{fontSize:oe},right:function(e){var t,n;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.TextInput,{value:null==(t=(null==L||null==(n=L.encoding)?void 0:n.end)||(null==L?void 0:L.duration))?void 0:t.toString(),style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return ae("end",parseFloat(e))}}))}}),o.default.createElement(c.Divider,{key:"divvolume"}),o.default.createElement(c.List.Item,{key:"volume",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"zip-box"}))},title:"Sound Volume",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.TextInput,{value:((null==L||null==(t=L.encoding)?void 0:t.soundVolume)||100).toString(),style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return ae("soundVolume",parseInt(e,10))}}))}}),o.default.createElement(c.Divider,{key:"div3"}),o.default.createElement(c.List.Item,{key:"width",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"ruler"}))},title:"Width("+(null==L?void 0:L.width)+")",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.TextInput,{value:null==L||null==(t=L.encoding)||null==(t=t.width)?void 0:t.toString(),style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return ae("width",parseInt(e,10))}}))}}),o.default.createElement(c.Divider,{key:"div2"}),o.default.createElement(c.List.Item,{key:"height",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"ruler"}))},title:"Height("+(null==L?void 0:L.height)+")",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.TextInput,{value:null==L||null==(t=L.encoding)||null==(t=t.height)?void 0:t.toString(),style:{textAlign:"right",pointerEvents:"auto"},keyboardType:"numeric",onChangeText:function(e){return ae("height",parseInt(e,10))}}))}}),o.default.createElement(c.Divider,{key:"div1"}),o.default.createElement(c.List.Item,{key:"output",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"file-export"}))},title:"Output",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.Menu,{visible:X,onDismiss:re,anchor:o.default.createElement(c.Button,{mode:"outlined",onPress:function(){return Y(!0)}},null==L||null==(t=L.encoding)?void 0:t.output)},o.default.createElement(o.default.Fragment,null,ne.map((function(e){return o.default.createElement(c.Menu.Item,{key:e,onPress:function(){return ae("output",e)},title:e})})))))}}),o.default.createElement(c.Divider,{key:"div"}),o.default.createElement(c.List.Item,{key:"preset",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"cog"}))},title:"Preset",titleStyle:{fontSize:oe},right:function(e){var t;return o.default.createElement(d.default,{style:{width:le}},o.default.createElement(c.Menu,{visible:ee,onDismiss:re,anchor:o.default.createElement(c.Button,{mode:"outlined",onPress:function(){return te(!0)}},null==L||null==(t=L.encoding)?void 0:t.preset)},o.default.createElement(o.default.Fragment,null,Object.keys(b.FFMpegPreset).map((function(e){return o.default.createElement(c.Menu.Item,{key:e,onPress:function(){return ae("preset",e)},title:e})})))))}}),!0===S?o.default.createElement(d.default,null,o.default.createElement(c.Divider,{key:"div5"}),o.default.createElement(c.List.Item,{key:"code",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"code-brackets"}))},title:"",titleStyle:{fontSize:oe},onPress:function(){var e;return null==W||null==(e=W.current)?void 0:e.focus()},right:function(e){var t;return o.default.createElement(l.default,{style:{width:V,zIndex:10}},o.default.createElement(g.default,{className:"codeEditor",ref:W,style:{fontSize:oe,inputLineHeight:oe,highlighterLineHeight:oe,display:"flex"},language:"bash",syntaxStyle:g.CodeEditorSyntaxStyles.xonokai,initialValue:(null==L||null==(t=L.encoding)||null==(t=t.code)?void 0:t.join(","))||"",onChange:function(e){var t;e!==(null==L||null==(t=L.encoding)||null==(t=t.code)?void 0:t.join(","))&&ae("code",e.split(","))},autoFocus:!1,showLineNumbers:!0}))}}),o.default.createElement(c.Divider,{key:"div6"}),ie&&o.default.createElement(c.List.Item,{key:"output_code",left:function(e){return o.default.createElement(c.List.Icon,(0,r.default)({},e,{icon:"code-tags"}))},title:"",titleStyle:{fontSize:oe},right:function(){return o.default.createElement(d.default,{style:{width:V}},o.default.createElement(m.default,{language:"bash",style:v.xonokai,highlighter:"prism",fontSize:oe},ie)," ")}}),o.default.createElement(c.Divider,{key:"div8"})):null,o.default.createElement(c.Button,{icon:"code-brackets",onPress:function(){return O(!S)}},"Show FFMpeg Code"))}))}.apply(t,r))||(e.exports=a)},122694:(e,t,n)=>{var r,a;r=[t,n(296540),n(389385),n(355508),n(863946),n(841051),n(236944),n(714230),n(670655)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=f(r),a=f(a),i=f(i),o=f(o),d=f(d),u=f(u);t.default=function(e){var t=e.dataHook,n=(0,o.default)(),f=n.height,s=n.width>700?80:0,p=n.width-s,b=t.folders,y=t.loadingFolders,m=t.onReordered,v=i.default.create({scroll:{height:f-55,display:"flex",position:"relative",backgroundColor:"black",marginTop:0,width:"100%"}}),g=c.styles;g.item.width="100%",g.scroll.height=f-65,g.scroll.marginTop=0;return y?r.default.createElement(l.ActivityIndicator,{size:72}):r.default.createElement(a.default,{style:Object.assign({},v.scroll)},r.default.createElement(u.default,{renderItem:function(e){var n=e.item,a=e.onDragEnd,i=e.onDragStart;return r.default.createElement(d.default,{i:n,key:n.id,dataHook:t,styles:g,width:p,onDragStart:i,onDragEnd:a})},keyExtractor:function(e){return(null==e?void 0:e.id)||(null==e?void 0:e.date.toString())},style:{width:"100%",height:f,paddingBottom:50},data:b||[],showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,scrollEnabled:!0,onReordered:m}))}}.apply(t,r))||(e.exports=a)},514288:(e,t,n)=>{var r,a;r=[t,n(296540),n(3469),n(863946),n(676834),n(841051),n(122694),n(714230),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.FolderNavigator=void 0,r=f(r),a=f(a),i=f(i),d=f(d),u=f(u);t.FolderNavigator=function(e){var t,n=e.parentFolderId,f=e.parentFolderHook,s=e.renderContent,p=e.folderType,b=(0,o.useFolders)(p,!1),y=(0,i.default)().height,m=(0,c.useAppSelector)((function(e){return void 0!==e.media.currentMediaId}))?y/2:y;return r.default.createElement(a.default,{style:{width:"30%",height:m}},n?null:r.default.createElement(d.default,{dataHook:b}),n?r.default.createElement(r.default.Fragment,null,f.folderContentQuery.isFetching||f.isLoadingFolder||null==(t=f.folderContent)||!t.length?r.default.createElement(l.ActivityIndicator,{size:72}):r.default.createElement(u.default,{onEndReached:function(){console.info("onEndReached")},scrollEnabled:!0,style:{height:m,paddingBottom:100},data:f.folderContent||[],pagingEnabled:!0,initialNumToRender:1e3,renderItem:s,keyExtractor:function(e){return e.id||e.date.toString()},onReordered:f.onReordered,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1})):null)}}.apply(t,r))||(e.exports=a)},3510:(e,t,n)=>{var r,a;r=[t,n(585715),n(296540),n(389385),n(3469),n(863946),n(932779),n(714230),n(236944),n(637843),n(841051),n(898707),n(248389),n(992796),n(514288),n(670655),n(719931),n(139131),n(351175),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P){"use strict";var E=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=E(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=E(i),o=E(o),l=E(l),d=E(d),u=E(u),c=E(c);t.default=(0,a.memo)((function(e){var t=e.folderType,n=(0,P.useAppDispatch)(),d=(0,p.useIsFocused)(),E=(0,l.default)(),I=E.height,S=E.width,O=!(S>700),_=(0,p.useRoute)().params,M=_||{},T=M.mnemonic,D=M.title,j=M.userId;e.mnemonic&&(T=e.mnemonic);var C=(null==e?void 0:e.folderId)||(null==_?void 0:_.folderId),F=(0,P.useAppSelector)((function(e){return e.upload.isUploadInProgress})),A=(0,f.useFolder)(C,y.getFolderContent,y.getById,t,y.writeItem,T,D,j),x=A.folderContent,k=A.folder,R=A.onReordered,L=(null==e?void 0:e.parentFolderId)||(null==_?void 0:_.parentFolderId)||k&&k.folderId||null;L===C&&(L=null);var B=(0,f.useFolder)(L,y.getFolderContent,y.getById,t,y.writeItem,T),W=v.styles;W.item.width=S-80,W.scroll.height=I-65,W.scroll.marginTop=0;var N=(0,h.useFileSelectOptions)(C),z=(0,P.useAppSelector)((function(e){return void 0!==e.media.currentMediaId})),U=(0,a.useState)(0),V=(0,r.default)(U,2),H=V[0],Q=V[1];if(!d)return a.default.createElement(a.default.Fragment,null);var K=function(e,t){return function(n){var r=n.item,i=n.onDragEnd,o=n.onDragStart,l=Object.assign({},W);return l.item.width=e,a.default.createElement(c.default,{i:r,key:r.id,dataHook:t,styles:l,width:e,onDragStart:o,onDragEnd:i})}},q=z?O?I-I/4:I/2:I-(O?140:0);return F&&(q-=100),a.default.createElement(i.default,null,a.default.createElement(o.default,{style:{height:q,width:"100%",flexDirection:"row"}},O?null:a.default.createElement(m.FolderNavigator,{parentFolderId:L,parentFolderHook:B,renderContent:K(O?S:S/100*33,B),folderType:t}),void 0!==x?a.default.createElement(u.default,{renderItem:K(O?S:S/100*70,A),keyExtractor:function(e){return(null==e?void 0:e.id)||(null==e?void 0:e.date.toString())},style:{width:"100%",height:q,paddingBottom:50},initialScrollIndex:H,data:x,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,scrollEnabled:!0,onMomentumScrollEnd:void 0,onScroll:function(e){var t=e.nativeEvent.layoutMeasurement.height,n=e.nativeEvent.contentOffset.y,r=Math.round(n/t);0!==n&&r!==H&&Q(r)},ListEmptyComponent:function(){return a.default.createElement(s.List.Item,{title:"Create your first project",left:function(){return a.default.createElement(s.IconButton,{icon:"creation",mode:"outlined"})},style:{padding:10},onPress:function(){t!==b.FolderType.contact?N.showDrawer():n((0,w.setEditingMode)("party"))}})},onReordered:R}):a.default.createElement(s.ActivityIndicator,{style:{position:"absolute",top:I/3,left:0,right:0},size:72}),a.default.createElement(g.AttachmentDrawer,N)))}))}.apply(t,r))||(e.exports=a)},548079:(e,t,n)=>{var r,a;r=[t,n(296540),n(841051),n(898707),n(532005),n(351175),n(777782),n(992796)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),d=c(d);t.default=(0,r.memo)((function(e){var t=e.i,n=e.width,c=(0,i.useRoute)().params,f=(0,i.useNavigation)(),s=(null==c?void 0:c.chatId)===t.id,p=t,b=t.name||t.id,y=s?"chat":"chat-outline",m=(0,o.useAppDispatch)(),v=function(){f.navigate({name:"Chat",params:{chatId:p.id,name:p.name,parentFolderId:p.folderId,mnemonic:p.mnemonic}})},g=function(){var e=u.domain+"webapp/contact/chat/"+p.id+"?name="+encodeURIComponent(p.name)+"&mnemonic="+encodeURIComponent(p.mnemonic);d.default.setString(e),m((0,l.setToastText)("Link to conversation has been copied: \n"+e))};s&&r.default.createElement(r.default.Fragment,null);return r.default.createElement(r.default.Fragment,null,r.default.createElement(a.List.Item,{style:{width:n},title:b,left:function(e){return r.default.createElement(a.IconButton,{onPress:v,icon:y})},onPress:v,right:function(e){return r.default.createElement(r.default.Fragment,null,r.default.createElement(a.IconButton,{icon:"share",onPress:g}))}}),r.default.createElement(a.Divider,null))}))}.apply(t,r))||(e.exports=a)},236944:(e,t,n)=>{var r,a;r=[t,n(296540),n(863946),n(751215),n(548079),n(618325),n(337996),n(898707),n(532005),n(351175),n(605454)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s){"use strict";var p=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=p(r),a=p(a),i=p(i),o=p(o),l=p(l),d=p(d);var b=!1;t.default=function(e){var t=(0,c.useAppDispatch)(),n=e.dataHook,p=e.styles,y=e.i,m=e.onDragEnd,v=e.onDragStart,g=(0,u.useNavigation)(),h=(0,u.useRoute)().params,w=null==h?void 0:h.folderId,P=(0,a.default)().width>700?80:0,E=e.width-P,I=function(){return t((0,f.setFolderMenuItemId)({itemId:y.id}))},S=function(){return t((0,f.setFolderMenuItemId)({itemId:void 0}))};if(y.isProduct){var O=n,_=O.onMediaPress,M=O.onRemoveMediaPress,T=O.onDownloadMediaPress,D=O.onCopyLinkPress,j=O.onEditMediaPress,C=O.isLoadingMedia,F=O.onRemoveFile,A=O.currentMediaId,x=O.onExportFile;return r.default.createElement(s.ProductItem,{key:y.id,i:y,width:E,onMediaPress:_,onRemoveMediaPress:function(){return M(y.id)},onDownloadMediaPress:T,onCopyLinkPress:D,onEditMediaPress:j,onDragEnd:m,onDragStart:v,showMenu:I,hideMenu:S,onExportFile:function(){return x(y.id)},onRemoveFile:function(){return F(y.id)},itemLoading:!(y.id!==A||!C)&&A,isPlaying:y.id===A&&!C,enableMove:b})}if(y.isMediaNew){var k=n,R=k.onMediaPress,L=k.onRemoveMediaPress,B=k.onDownloadMediaPress,W=k.onCopyLinkPress,N=k.onEditMediaPress,z=k.isLoadingMedia,U=k.onRemoveFile,V=k.currentMediaId,H=k.onExportFile;return r.default.createElement(i.default,{key:y.id,i:y,width:E,onMediaPress:R,onRemoveMediaPress:function(){return L(y.id)},onDownloadMediaPress:B,onCopyLinkPress:W,onEditMediaPress:N,onDragEnd:m,onDragStart:v,showMenu:I,hideMenu:S,onExportFile:function(){return H(y.id)},onRemoveFile:function(){return U(y.id)},itemLoading:!(y.id!==V||!z)&&V,isPlaying:y.id===V&&!z,enableMove:b})}if(y.isEncoderProject||y.isEditorProject)return r.default.createElement(d.default,{item:y,width:E,folderType:n.folderType,onRemoveFolder:function(){return n.onRemoveFolder(y)},onDragEnd:m,onDragStart:v,showMenu:I,hideMenu:S});if(y.isContact)return r.default.createElement(o.default,{key:y.id,i:y,width:E});if(y.isFolder){var Q=n,K=Q.onRemoveFolder,q=Q.onFolderActionPress,J=Q.abortEditFolder,G=Q.onShareFolder;return r.default.createElement(l.default,{key:y.id,folder:Object.assign({},y,{isOpen:y.id===w}),styles:p,iconColor:"black",iconSize:30,enableMove:b,width:E,onDragEnd:m,onDragStart:v,showMenu:I,hideMenu:S,isOpen:y.id===w,onRemoveFolder:function(){return K(y)},onShareFolder:function(){return G(y)},onFolderActionPress:function(){return q(y.id)},onFolderPress:function(){return g.navigate({name:"Folder",params:{folderId:y.id,title:y.title,parentFolderId:y.folderId,mnemonic:y.mnemonic,userId:y.userId}})},isSecondLevel:!0,abortEditFolder:function(){return J(y.id)}},y.id===w?r.default.createElement(r.default.Fragment,null):null)}return r.default.createElement(r.default.Fragment,null)}}.apply(t,r))||(e.exports=a)},618325:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(443693),n(296540),n(3469),n(992796),n(841051),n(709963),n(532005),n(351175),n(26288)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=b(r),a=b(a),i=b(i),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),l=b(l);t.default=function(e){var t=e.folder,n=e.width,b=e.onFolderPress,y=e.onRemoveFolder,m=e.onFolderActionPress,v=e.isSecondLevel,g=e.children,h=e.isOpen,w=e.isLoadingContent,P=e.folderNameInputRef,E=e.abortEditFolder,I=e.onShareFolder,S=e.onDragStart,O=e.onDragEnd,_=e.showMenu,M=e.hideMenu,T=(0,u.useTheme)(),D=t.isOpen?"folder-open":"folder-outline",j=t.isInfoOpen?"checkbox-outline":"pencil-outline",C=!1;d.defaultFolders.includes(t.id)&&(C=!0,j="star"),t.mnemonic&&(D=t.isOpen?"folder-network":"folder-network-outline"),t.isInfoOpen&&(D="arrow-left-circle");var F={pointerEvents:"auto",padding:h?5:0,paddingTop:15},A=(0,f.useAppDispatch)(),x=(0,f.useAppSelector)((function(e){return e.folders.isEditingFolderDraft[t.id]})),k=(0,f.useAppSelector)((function(e){return e.folders.isEditingFolder[t.id]})),R=(0,f.useAppSelector)((function(e){return e.ui.folderItemMenuOpen}))===t.id;(0,o.useMemo)((function(){k&&A((0,p.setEditingFolderName)((0,i.default)({},t.id,t.title)))}),[k]);var L=function(){var e=(0,a.default)((function*(){y&&(yield y(t))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,a.default)((function*(){C||(m&&(yield m(t,v)),setTimeout((function(){var e;null==P||null==(e=P.current)||e.focus()}),300))}));return function(){return e.apply(this,arguments)}}(),W=function(e){return w?o.default.createElement(u.ActivityIndicator,{style:{paddingLeft:20}}):o.default.createElement(c.TouchableOpacity,{onPress:function(){return b(t,v)},style:F},o.default.createElement(u.List.Icon,(0,r.default)({},e,{icon:D})))};return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Divider,null),g?o.default.createElement(u.List.Accordion,{expanded:h,title:t.title,style:{width:n},left:W,right:function(){return o.default.createElement(o.default.Fragment,null)},onPress:function(){return b(t,v)},theme:T},g):o.default.createElement(u.List.Item,{style:{width:n},title:function(e){var n=e.ellipsizeMode,r=e.color,a=e.fontSize;return o.default.createElement(o.default.Fragment,null,k?o.default.createElement(u.TextInput,{mode:"outlined",style:{height:50,width:"100%",pointerEvents:"auto"},placeholder:"new folder name",theme:T,value:x,ref:P,onChangeText:function(e){return A((0,p.setEditingFolderName)((0,i.default)({},t.id,e)))},left:o.default.createElement(u.TextInput.Icon,{onPress:function(){return E&&E(t)},icon:D}),right:o.default.createElement(u.TextInput.Icon,{onPress:B,icon:j}),autoFocus:!0,id:"test-input"}):o.default.createElement(c.TouchableOpacity,{style:{pointerEvents:"auto"},onPress:function(){return b(t,v)}},o.default.createElement(l.default,{style:{}},o.default.createElement(u.Text,{ellipsizeMode:n,style:{color:r,fontSize:a},numberOfLines:2},t.title))))},left:k?function(){return o.default.createElement(o.default.Fragment,null)}:W,right:function(e){return o.default.createElement(l.default,{style:{flexDirection:"row",flexWrap:"wrap"}},C||t.isInfoOpen?null:o.default.createElement(o.default.Fragment,null,o.default.createElement(c.TouchableOpacity,{onPressIn:S,onPressOut:O,style:{pointerEvents:"auto"}},o.default.createElement(u.IconButton,{icon:"dots-grid"})),o.default.createElement(u.Menu,{anchor:o.default.createElement(u.IconButton,{icon:"dots-vertical",onPress:_}),style:{marginTop:50},visible:R,onDismiss:M},o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Menu.Item,{leadingIcon:"heart",title:"Share All Media",onPress:function(){return A((0,s.setFolderMenuItemId)({itemId:void 0})),(0,d.recursiveShare)(t),void A((0,s.setToastText)("All folder files have been shared"))}}),o.default.createElement(u.Divider,null)),o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Menu.Item,{leadingIcon:"share",title:"Share Folder",onPress:function(){return I&&I(t)}}),o.default.createElement(u.Divider,null)),o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Menu.Item,{leadingIcon:j,title:"Edit Folder",onPress:B}),o.default.createElement(u.Divider,null)),o.default.createElement(o.default.Fragment,null,o.default.createElement(u.Menu.Item,{leadingIcon:"delete",title:"Delete Folder",onPress:L})))))},theme:T}))}}.apply(t,r))||(e.exports=a)},751215:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(3469),n(355508),n(38953),n(709963),n(532005),n(841051),n(775942),n(1672),n(950198),n(838430)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y){"use strict";var m=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=t.MediaItemStyles=void 0,r=m(r),a=m(a),i=m(i),o=m(o),l=m(l),d=m(d);var v=t.MediaItemStyles=l.default.create({container:{flex:1},row:{flexDirection:"row"},column:{flexDirection:"column"},customTitle:{alignItems:"center",justifyContent:"space-between"},additionalPadding:{paddingTop:8},image:{width:"100%",height:"auto",opacity:.6,position:"absolute",resizeMode:"cover",zIndex:-1,flex:1}});t.default=function(e){var t=e.i,n=e.itemLoading,l=e.width,m=e.onMediaPress,g=e.onRemoveMediaPress,h=e.onDownloadMediaPress,w=e.isPlaying,P=e.onDragEnd,E=e.onDragStart,I=e.showMenu,S=e.hideMenu,O=e.onRemoveFile,_=e.onExportFile,M=(0,y.useAuction)().onSellPress,T=(0,c.useAppDispatch)(),D=(0,f.useTheme)(),j=t.id===n,C=function(){return m(t)},F=function(){var e=(0,a.default)((function*(){return g(t)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.default)((function*(){return M(t.id,t.folderId)}));return function(){return e.apply(this,arguments)}}(),x=(0,c.useAppSelector)((function(e){return e.fs.downloadingProgress[t.id]})),k=(0,c.useAppSelector)((function(e){return e.ui.folderItemMenuOpen}))===t.id,R=(0,c.useAppSelector)((function(e){return e.fs.sharing[t.id]})),L=(0,s.useQuery)(["isDownloaded",t.id],(0,a.default)((function*(){return yield(0,p.countIsDownloaded)(t)})),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,staleTime:1/0}),B=x&&parseInt((100*x).toString(),10),W=null==L?void 0:L.data;100===B&&(W=100);var N=function(){var e=(0,a.default)((function*(){return W?null:h(t.id)}));return function(){return e.apply(this,arguments)}}(),z=w?"stop-circle-outline":"play-circle-outline";L.isFetched;var U=t.extractor.toLowerCase();"wt"===U&&(U="folder-network"),"local"===U&&(U="file");var V=100,H={pointerEvents:"auto",paddingTop:30},Q=x?"Downloading "+B+"%":"Download";return W&&(Q="Downloaded "+W+"%"),i.default.createElement(o.default,{style:{width:l,height:V}},i.default.createElement(f.List.Item,{style:{height:V,zIndex:2,position:"absolute",width:l},left:function(e){return i.default.createElement(u.TouchableOpacity,{onPress:C,style:H},i.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:j?function(){return i.default.createElement(f.ActivityIndicator,{animating:!0,theme:D})}:z})))},right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.TouchableOpacity,{onPressIn:E,onPressOut:P,style:{pointerEvents:"auto"}},i.default.createElement(f.IconButton,{icon:"dots-grid"})),i.default.createElement(f.Menu,{anchor:i.default.createElement(f.IconButton,{icon:"dots-vertical",onPress:k?S:I}),style:{marginTop:50},visible:k,onDismiss:S},W&&i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Menu.Item,{leadingIcon:"share",title:"Export File",onPress:_}),i.default.createElement(f.Divider,null)),W&&i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Menu.Item,{leadingIcon:"file",title:"Delete File",onPress:O}),i.default.createElement(f.Divider,null)),i.default.createElement(f.Menu.Item,{leadingIcon:"currency-usd",title:"Sell Item",onPress:A}),i.default.createElement(f.Menu.Item,{leadingIcon:"delete",title:"Delete Item",onPress:F}),i.default.createElement(f.Menu.Item,{leadingIcon:"close",title:"Close Menu",onPress:S})))},title:function(e){var n=e.ellipsizeMode,r=e.color,a=e.fontSize;return i.default.createElement(o.default,{style:[v.container,v.row,v.customTitle]},i.default.createElement(f.Text,{ellipsizeMode:n,style:{color:r,fontSize:a},numberOfLines:2},t.title))},description:function(e){var n=e.ellipsizeMode,r=e.color,a=e.fontSize;return i.default.createElement(o.default,{style:[v.container,v.column]},i.default.createElement(f.Text,{numberOfLines:1,ellipsizeMode:n,style:{color:r,fontSize:a}},t.description),i.default.createElement(o.default,{style:[v.container,v.row,v.additionalPadding,{gap:10}]},t.torrentFile?i.default.createElement(f.Chip,{icon:"file",onPress:N,style:{height:30},textStyle:{fontSize:a}},Q):null,W&&t.torrentFile?i.default.createElement(f.Chip,{icon:R?"heart":"network",onPress:function(){R||(T((0,b.setSharing)({itemId:t.id,status:!0})),(0,p.shareFileToWT)(t.id,t.folderId))},style:{height:30},textStyle:{fontSize:a}},R?"Sharing":"Share"):null))}}),t.thumbnail||t.image||t.audioSpectrogram_small?i.default.createElement(d.default,{source:{uri:t.thumbnail||t.image||t.audioSpectrogram_small,cache:"force-cache"},resizeMethod:"resize",resizeMode:"cover",style:Object.assign({},v.image,{height:V,width:l}),imageStyle:Object.assign({},v.image,{height:V,width:l})}):null,i.default.createElement(f.Divider,null))}}.apply(t,r))||(e.exports=a)},605454:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(3469),n(355508),n(38953),n(709963),n(532005),n(841051),n(775942),n(1672),n(950198),n(898707)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y){"use strict";var m=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ProductItem=void 0,r=m(r),a=m(a),i=m(i),o=m(o),l=m(l),d=m(d);var v=l.default.create({container:{flex:1},row:{flexDirection:"row"},column:{flexDirection:"column"},customTitle:{alignItems:"center",justifyContent:"space-between"},additionalPadding:{paddingTop:8},image:{width:"100%",height:"auto",opacity:.6,position:"absolute",resizeMode:"cover",zIndex:-1,flex:1}});t.ProductItem=function(e){var t=e.i,n=e.itemLoading,l=e.width,m=e.onRemoveMediaPress,g=e.onDownloadMediaPress,h=e.isPlaying,w=e.onDragEnd,P=e.onDragStart,E=e.showMenu,I=e.hideMenu,S=e.onRemoveFile,O=e.onExportFile,_=(0,c.useAppDispatch)(),M=(0,f.useTheme)(),T=(0,y.useNavigation)(),D=t.id===n,j=function(){return T.navigate("Product",{productId:t.id,parentFolderId:t.folderId,title:t.title})},C=function(){var e=(0,a.default)((function*(){return m(t)}));return function(){return e.apply(this,arguments)}}(),F=(0,c.useAppSelector)((function(e){return e.fs.downloadingProgress[t.id]})),A=(0,c.useAppSelector)((function(e){return e.ui.folderItemMenuOpen===t.id})),x=(0,c.useAppSelector)((function(e){return e.fs.sharing[t.id]})),k=(0,s.useQuery)(["isDownloaded",t.id,t.isDownloaded],(0,a.default)((function*(){try{var e=yield(0,p.getFileStats)(t);if(e){var n=t.size/100;return parseFloat((e.size/n).toString()).toFixed(2)}return!1}catch(r){return!1}})),{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,staleTime:1/0}),R=null==k?void 0:k.data,L=function(){var e=(0,a.default)((function*(){return R?null:g(t.id)}));return function(){return e.apply(this,arguments)}}(),B=(t.thumbnail,h?"stop-circle-outline":"package-variant");k.isFetched;var W=t.extractor.toLowerCase();"wt"===W&&(W="folder-network"),"local"===W&&(W="file");var N=100,z={pointerEvents:"auto",paddingTop:30},U=F?"Downloading "+parseInt((100*F).toString(),10)+"%":"Download";return R&&(U="Downloaded "+R+"%"),i.default.createElement(o.default,{style:{width:l,height:N}},i.default.createElement(f.List.Item,{style:{height:N,zIndex:2,position:"absolute",width:l},left:function(e){return i.default.createElement(u.TouchableOpacity,{onPress:j,style:z},i.default.createElement(f.List.Icon,(0,r.default)({},e,{icon:D?function(){return i.default.createElement(f.ActivityIndicator,{animating:!0,theme:M})}:B})))},right:function(e){return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.TouchableOpacity,{onPressIn:P,onPressOut:w,style:{pointerEvents:"auto"}},i.default.createElement(f.IconButton,{icon:"dots-grid"})),i.default.createElement(f.Menu,{anchor:i.default.createElement(f.IconButton,{icon:"dots-vertical",onPress:E}),style:{marginTop:50},visible:A,onDismiss:I},R&&i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Menu.Item,{leadingIcon:"share",title:"Export File",onPress:O}),i.default.createElement(f.Divider,null)),R&&i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Menu.Item,{leadingIcon:"file",title:"Delete File",onPress:S}),i.default.createElement(f.Divider,null)),i.default.createElement(f.Menu.Item,{leadingIcon:"delete",title:"Delete Item",onPress:C})))},title:function(e){var n=e.ellipsizeMode,r=e.color,a=e.fontSize;return i.default.createElement(o.default,{style:[v.container,v.row,v.customTitle]},i.default.createElement(f.Text,{ellipsizeMode:n,style:{color:r,fontSize:a},numberOfLines:2},t.title))},description:function(e){var n=e.ellipsizeMode,r=e.color,a=e.fontSize;return i.default.createElement(o.default,{style:[v.container,v.column]},i.default.createElement(f.Text,{numberOfLines:1,ellipsizeMode:n,style:{color:r,fontSize:a}},t.description),i.default.createElement(o.default,{style:[v.container,v.row,v.additionalPadding,{gap:10}]},i.default.createElement(f.Chip,{icon:"file",onPress:L,style:{height:30},textStyle:{fontSize:a}},U),R&&i.default.createElement(f.Chip,{icon:x?"heart":"network",onPress:function(){x||(_((0,b.setSharing)({itemId:t.id,status:!0})),(0,p.shareFileToWT)(t.id,t.folderId))},style:{height:30},textStyle:{fontSize:a}},x?"Sharing":"Share")))}}),t.thumbnail?i.default.createElement(d.default,{source:{uri:t.thumbnail,cache:"force-cache"},resizeMethod:"resize",resizeMode:"cover",style:Object.assign({},v.image,{height:N,width:l}),imageStyle:Object.assign({},v.image,{height:N,width:l})}):null,i.default.createElement(f.Divider,null))}}.apply(t,r))||(e.exports=a)},337996:(e,t,n)=>{var r,a;r=[t,n(296540),n(841051),n(248389),n(898707),n(38953),n(3469),n(532005),n(351175),n(992796),n(709963),n(751215)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=b(r),l=b(l),d=b(d);t.default=function(e){var t=e.item,n=e.folderType,b=e.onRemoveFolder,y=e.width,m=e.onDragEnd,v=e.onDragStart,g=e.showMenu,h=e.hideMenu,w=(0,o.useNavigation)(),P=n===i.FolderType.encoder?"EncoderProject":"EditorProject",E=n===i.FolderType.editor?"film":"matrix",I=(0,u.useAppDispatch)(),S=100,O=(0,u.useAppSelector)((function(e){return e.ui.folderItemMenuOpen}))===t.id;return r.default.createElement(d.default,{style:{width:y,height:S}},r.default.createElement(a.Divider,null),r.default.createElement(a.List.Item,{style:{padding:19,width:y,height:S,zIndex:2},titleMaxFontSizeMultiplier:.5,titleNumberOfLines:2,descriptionNumberOfLines:2,title:t.title,onPress:function(){w.navigate({name:P,params:{projectId:t.id,mnemonic:t.mnemonic,parentFolderId:t.folderId}})},left:function(){return r.default.createElement(a.List.Icon,{icon:E})},right:function(e){return r.default.createElement(d.default,{style:{flexDirection:"row",flexWrap:"wrap"}},r.default.createElement(r.default.Fragment,null,r.default.createElement(s.TouchableOpacity,{onPressIn:v,onPressOut:m,style:{pointerEvents:"auto"}},r.default.createElement(a.IconButton,{icon:"dots-grid"})),r.default.createElement(a.Menu,{anchor:r.default.createElement(a.IconButton,{icon:"dots-vertical",onPress:g}),style:{marginTop:50},visible:O,onDismiss:h},r.default.createElement(r.default.Fragment,null,r.default.createElement(a.Menu.Item,{leadingIcon:"heart",title:"Share All Media",onPress:function(){return I((0,c.setFolderMenuItemId)({itemId:void 0})),(0,f.recursiveShare)(t),void I((0,c.setToastText)("All project files have been shared"))}}),r.default.createElement(a.Divider,null)),r.default.createElement(r.default.Fragment,null,r.default.createElement(a.Menu.Item,{leadingIcon:"delete",title:"Delete Project",onPress:function(){return b(t)}})))))}}),t.thumbnail||t.image?r.default.createElement(l.default,{source:{uri:t.thumbnail||t.image,cache:"force-cache"},resizeMethod:"resize",resizeMode:"cover",style:Object.assign({},p.MediaItemStyles.image,{height:S,width:y}),imageStyle:Object.assign({},p.MediaItemStyles.image,{height:S,width:y})}):null)}}.apply(t,r))||(e.exports=a)},670655:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.styles=void 0;t.styles={container:{flex:1,paddingTop:0,marginTop:0},item:{paddingTop:15,paddingLeft:5,fontSize:12,height:160,color:"black",width:80},tinyLogo:{marginTop:2,width:22,height:22},scroll:{height:65,display:"flex",position:"relative",backgroundColor:"black",width:"100%",marginTop:0},icon:{paddingLeft:10}}}.apply(t,[t]))||(e.exports=n)},543419:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(112572),n(565282),n(19504),n(986737),n(847216),n(24704),n(932779),n(863946),n(891219),n(254168),n(936903),n(427814),n(412959),n(637800),n(532005),n(351175),n(596948),n(451930),n(775942),n(361507)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P,E,I,S){"use strict";var O=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=O(r),a=O(a),o=O(o),u=O(u),f=O(f),s=O(s),p=O(p);var _=(0,d.createDrawerNavigator)(),M=(0,i.createMaterialBottomTabNavigator)(),T=(0,g.createNativeStackNavigator)(),D=(0,c.createFileStack)(),j=(0,b.createChatStack)(),C=(0,y.createSettings)(),F=((0,m.createEncoder)(),(0,v.createEditor)()),A=(0,E.createShopStack)(),x=function(){var e=(0,s.default)(),t=(0,h.useAppDispatch)(),n=(0,h.useAppSelector)((function(e){return e.ui.isTabBarHidden})),i=function(e){try{var n,r,a,i,o=(null==e||null==(n=e.data)||null==(n=n.state)?void 0:n.routes[(null==e||null==(r=e.data.state)?void 0:r.index)||0])||{},l=null==o||null==(a=o.state)?void 0:a.routes[(null==o||null==(i=o.state)?void 0:i.index)||0],d=o.name,u=null==l?void 0:l.name,c=null==l?void 0:l.params;t((0,w.setCurrentPage)({currentPage:u,params:c,parentName:d}))}catch(f){}},d=(0,I.useQuery)("drawerItems",(0,r.default)((function*(){try{var e=!1;try{var t=yield(0,S.getShopServiceAddress)();e=yield(0,S.checkServiceValid)(t)}catch(n){console.error(n)}if(e)return!0}catch(n){console.error("isKioskEnabled err",n)}return!1})),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:15e3});return e.width>700?a.default.createElement(l.SafeAreaInsetsContext.Consumer,null,(function(e){var t=e||{left:0,right:0},n=t.left,r=t.right,l=80+Math.max(n,r);return a.default.createElement(_.Navigator,{screenOptions:{drawerStyle:{width:l},drawerPosition:"left",drawerType:"permanent"},detachInactiveScreens:!0,defaultStatus:"open",screenListeners:{state:function(e){return i(e)}},drawerContent:function(e){return a.default.createElement(p.default,e)}},a.default.createElement(_.Screen,{name:"FilesTab",component:D,options:{headerShown:!1,drawerIcon:function(e){var t=e.color;e.size;return a.default.createElement(o.default,{name:"folder-outline",color:t,size:24})},title:"Files"}}),a.default.createElement(_.Screen,{name:"ContactsTab",component:j,options:{headerShown:!1,title:"Contacts"}}),a.default.createElement(_.Screen,{name:"EditorTab",component:F,options:{headerShown:!1,title:"Editor"}}),a.default.createElement(_.Screen,{name:"SettingsTab",component:C,options:{headerShown:!1,drawerIcon:function(e){var t=e.color;e.size;return a.default.createElement(o.default,{name:"people-outline",color:t,size:24})},title:"Contacts"}}),a.default.createElement(_.Screen,{name:"ShopTab",component:A,options:{headerShown:!1,title:"Shop"}}))})):a.default.createElement(M.Navigator,{barStyle:{display:n?"none":"flex"},screenListeners:{state:function(e){return i(e)}}},a.default.createElement(M.Screen,{name:"FilesTab",options:{tabBarLabel:"Files",tabBarIcon:"folder"},component:D}),a.default.createElement(M.Screen,{name:"ContactsTab",component:j,options:{tabBarLabel:"Chat",tabBarIcon:"forum"}}),a.default.createElement(M.Screen,{name:"EditorTab",component:F,options:{tabBarLabel:"Editor",tabBarIcon:"scissors-cutting"}}),a.default.createElement(M.Screen,{name:"SettingsTab",options:{tabBarLabel:"Settings",tabBarIcon:"cog"},component:C}),!0===d.data&&a.default.createElement(M.Screen,{name:"ShopTab",component:A,options:{tabBarLabel:"Shop",tabBarIcon:"cart"}}))};t.default=function(){return a.default.createElement(T.Navigator,{screenOptions:{header:function(e){return a.default.createElement(u.default,e)}}},a.default.createElement(T.Screen,{name:P.RootStackName,component:x,options:{orientation:"portrait",freezeOnBlur:!0}}))}}.apply(t,r))||(e.exports=a)},847216:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(296540),n(841051),n(932779),n(3469),n(863946),n(532005),n(926516),n(510497),n(248389),n(775942),n(992796),n(662434),n(44400),n(160567),n(403936)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h){"use strict";var w=n(124994);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n=e.options,l=(0,o.useTheme)(),w=(0,b.useQueryClient)(),P=(0,i.useState)(""),E=(0,a.default)(P,2),I=E[0],S=E[1],O=(0,u.default)().width,_=(0,c.useAppSelector)((function(e){return e.ui.editingMode})),M=(0,i.useContext)(s.UserDataState),T=(0,b.useQuery)("UserData",(function(){return(0,y.getUserData)()})),D=null==T||null==(t=T.data)?void 0:t.id,j=(0,i.useState)(!1),C=(0,a.default)(j,2),F=C[0],A=C[1],x=(0,b.useMutation)((function(e){return(0,y.writeItem)(e)}),{retry:!0});(0,i.useEffect)((function(){var e=function(){var e=(0,r.default)((function*(){yield g.Audio.setAudioModeAsync({allowsRecordingIOS:!1,interruptionModeIOS:g.InterruptionModeIOS.DuckOthers,playsInSilentModeIOS:!0,staysActiveInBackground:!0,interruptionModeAndroid:g.InterruptionModeAndroid.DuckOthers,shouldDuckAndroid:!1})}));return function(){return e.apply(this,arguments)}}();e()}),[]);var k=(0,c.useAppSelector)((function(e){return e.ui.params})),R=(0,c.useAppSelector)((function(e){return e.ui.folderType})),L=(null==k?void 0:k.folderId)||(null==k?void 0:k.parentFolderId),B="new_"+R,W=y.encoderProjectTypes.includes(R),N=function(){var e=(0,r.default)((function*(){if((-1!==I.search("http")||-1!==I.search("magnet"))&&(console.info(I),!0!==F)){A(!0),setTimeout((function(){A(!1)}),2e4);var e=yield(0,y.extractMedia)(I);if(e&&e.id){var t=e.id;try{var n=Object.assign({},e,{originalId:t,id:f.default.v4().toString(),folderId:L||B,userId:M.user.id,date:(new Date).valueOf(),isMediaNew:!0,isFolder:!(!e.files||!e.files.length)||void 0,files:e.files&&e.files.map((function(e){return{name:e.name,size:e.length}}))});yield x.mutateAsync(n),yield w.refetchQueries({queryKey:"folderContent_"+n.folderId}),S("")}catch(r){console.error("extractLink",r)}}A(!1)}}));return function(){return e.apply(this,arguments)}}();(0,i.useMemo)((function(){N()}),[I]);var z=O>700&&!0;h.addFolderPlaceholder;"party"===_&&h.chatPlacehoder;"search"===_&&"type to search";return console.info("appnav refresh"),i.default.createElement(d.default,{style:{display:"flex",flexDirection:"column"}},i.default.createElement(o.Appbar.Header,{style:{zIndex:1e3},theme:l},i.default.createElement(h.NavInput,{options:n,folderId:L,isLocked:F,searchValue:I,setSearch:S}),i.default.createElement(v.Actions,{showFullSearchBar:z,isEncoderProject:W,userId:D}),z?i.default.createElement(o.Searchbar,{loading:F,mode:"bar",placeholder:R===p.FolderType.contact?h.searchContactsPlaceholderText:h.defaulPlaceHolderText,theme:l,style:{height:40,width:300},inputStyle:{paddingBottom:14},value:I,onChangeText:S}):null),i.default.createElement(m.BannerContainer,{userId:D,isEncoderProject:W,width:O}))},r=w(r),a=w(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),l=w(l),d=w(d),u=w(u),f=w(f)}.apply(t,r))||(e.exports=a)},931055:(e,t,n)=>{var r,a;r=[t,n(296540),n(355508),n(863946),n(841051),n(532005),n(351175)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ChooseDialog=void 0,r=u(r),a=u(a),i=u(i);t.ChooseDialog=function(){var e=(0,l.useAppDispatch)(),t=(0,l.useAppSelector)((function(e){return e.ui.appDialogOnSelectLeftt})),n=(0,l.useAppSelector)((function(e){return e.ui.appDialogOnSelectRight})),a=(0,o.useTheme)(),u=(0,i.default)(),f=u.width,s=(u.height,(0,l.useAppSelector)((function(e){return e.ui.appDialogVisible}))),p=(0,l.useAppSelector)((function(e){return e.ui.appDialogBody})),b=(0,l.useAppSelector)((function(e){return e.ui.appDialogTitle})),y=(0,l.useAppSelector)((function(e){return e.ui.appDialogIcon})),m=(0,l.useAppSelector)((function(e){return e.ui.appDialogLoading})),v=function(){return e((0,d.setAppDialogParams)({appDialogVisible:!1,appDialogBody:void 0,appDialogControls:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogOnSelectLeftt:void 0,appDialogOnSelectRight:void 0,appDialogLoading:!1}))};return r.default.createElement(o.Portal,null,r.default.createElement(o.Dialog,{theme:a,style:{width:"80%",height:400,maxWidth:400,maxHeight:400,left:(f-400)/2},onDismiss:v,visible:s},r.default.createElement(o.Dialog.Icon,{icon:y}),r.default.createElement(o.Dialog.Title,{style:c.title},b),p&&r.default.createElement(o.Dialog.Content,null,"string"===typeof p?r.default.createElement(o.Text,{style:{width:"100%",padding:20}},p):r.default.createElement(p,null)),r.default.createElement(o.Dialog.Actions,null,r.default.createElement(o.Button,{onPress:t||v,mode:"outlined",loading:m,disabled:m,style:{padding:5}},"Disagree"),r.default.createElement(o.Button,{onPress:n,mode:"outlined",loading:m,disabled:m,style:{padding:5}},"Agree"))))};var c=a.default.create({title:{textAlign:"center"}})}.apply(t,r))||(e.exports=a)},765353:(e,t,n)=>{var r,a;r=[t,n(94634),n(585715),n(296540),n(709963),n(841051),n(451378),n(176529),n(38953),n(932779),n(863946),n(3469),n(160567),n(567501),n(826878),n(532005),n(248389)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g){"use strict";var h=n(124994);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t,n=(0,l.useTheme)(),f=(0,y.useConfirmFile)(e),b=f.confirmFile,h=f.setVideoMeta,w=f.pickerFile,P=f.pickerFileMeta,E=f.mediaModalVisible,I=f.loading,S=f.videoMeta,O=f.fileType,_=f.isImageType,M=f.isVideoType,T=f.isEditorProject,D=f.processingFile,j=f.hasPlus,C=e.hideMedialModal,F=(0,i.useMemo)((function(){var e;return w&&!w.base64?URL.createObjectURL(w):null==(e=(null==w?void 0:w.uri)||(null==P?void 0:P.url))?void 0:e.replace("file://","")}),[null==w?void 0:w.size,null==w?void 0:w.name]),A=(0,s.default)(),x=A.width,k=A.height;(0,i.useMemo)((function(){(null==O?void 0:O.search("image"))>-1&&F&&u.default.getSize(F,(function(e,t){var n="16/9";t>e&&(n="9/16"),h(Object.assign({},S,{width:e,height:t,duration:m.defaultVideoDuration,aspectRatio:n}))}))}),[null==w?void 0:w.size,null==w?void 0:w.name,O,F]);var R=12,L=(0,i.useState)(!1),B=(0,a.default)(L,2),W=B[0],N=B[1],z=(0,i.useState)(!1),U=(0,a.default)(z,2),V=U[0],H=U[1],Q=function(){N(!1),H(!1)},K=(0,v.useAppSelector)((function(e){return(null==P?void 0:P.id)&&e.upload.shareProgress[null==P?void 0:P.id]})),q=j?g.fullOutputTypes:g.outputTypes;return i.default.createElement(p.default,{style:{height:"auto",width:"100%"}},i.default.createElement(l.Banner,{theme:n,visible:D,style:{width:"100%",margin:0,padding:0}},i.default.createElement(l.Card,{style:{borderBlockColor:"transparent",borderRadius:0,borderColor:"transparent",width:"100%",borderWidth:0,shadowColor:"transparent"}},i.default.createElement(l.Card.Title,{style:{width:"100%"},titleStyle:{fontSize:20},title:"Processing file",subtitle:null==P?void 0:P.filename,left:function(e){return i.default.createElement(l.Avatar.Icon,(0,r.default)({},e,{icon:"file"}))}}),i.default.createElement(l.ProgressBar,{animatedValue:K&&1!==K?K:void 0,indeterminate:!K||1===K||void 0,visible:!0}))),i.default.createElement(l.Portal,null,i.default.createElement(l.Modal,{visible:E&&!D,onDismiss:C,theme:n,style:{padding:20,width:x,height:k}},i.default.createElement(l.Card,{style:{height:k}},i.default.createElement(l.Card.Title,{titleStyle:{fontSize:20},title:T?"Creating a New Project ":"Adding a new file",subtitle:"Please confirm",left:function(e){return i.default.createElement(l.Avatar.Icon,(0,r.default)({},e,{icon:"file"}))}}),i.default.createElement(l.Divider,null),i.default.createElement(o.GestureHandlerRootView,{style:{height:k-150}},i.default.createElement(o.ScrollView,null,i.default.createElement(l.Card.Content,null,M&&i.default.createElement(i.default.Fragment,null,i.default.createElement("video",{style:{display:"flex",width:"50%",position:"relative",height:"100%"},controls:!0,src:F,onLoadedMetadata:function(e){var t,n,r;h(Object.assign({},S,{width:null==(t=e.nativeEvent.target)?void 0:t.videoWidth,height:null==(n=e.nativeEvent.target)?void 0:n.videoHeight,duration:null==(r=e.nativeEvent.target)?void 0:r.duration}))}})),!0===_?i.default.createElement(c.default,{style:{height:200,width:"100%",position:"relative",display:"flex"},resizeMethod:"scale",imageStyle:{resizeMode:"contain"},source:{uri:F}}):null,T&&i.default.createElement(l.List.Section,null,i.default.createElement(l.Divider,{key:"divstart"}),i.default.createElement(l.List.Item,{title:"Video Project Settings"}),i.default.createElement(l.Divider,{key:"divtitle"}),i.default.createElement(l.List.Item,{key:"aspect",left:function(e){return i.default.createElement(l.List.Icon,(0,r.default)({},e,{style:{fontSize:R},icon:"information"}))},titleStyle:{fontSize:R},title:"Title",onPress:function(){},description:function(e){return i.default.createElement(p.default,{style:{width:"100%"}},i.default.createElement(l.TextInput,{dense:!0,mode:"outlined",value:S.editorTitle,style:{textAlign:"right"},onChangeText:function(e){h(Object.assign({},S,{editorTitle:e}))}}))}}),i.default.createElement(l.Divider,{key:"divaspect"}),i.default.createElement(l.List.Item,{key:"aspect",left:function(e){return i.default.createElement(l.List.Icon,(0,r.default)({},e,{style:{fontSize:R},icon:"aspect-ratio"}))},title:"Aspect Ratio",titleStyle:{fontSize:R},right:function(e){return i.default.createElement(p.default,{style:{width:120}},i.default.createElement(l.Menu,{visible:V,onDismiss:Q,anchor:i.default.createElement(l.Button,{mode:"outlined",onPress:function(){return H(!0)}},""+((null==S?void 0:S.aspectRatio)||"16/9"))},i.default.createElement(i.default.Fragment,null,g.aspectRatios.map((function(e){return i.default.createElement(l.Menu.Item,{key:e,onPress:function(){h(Object.assign({},S,{aspectRatio:e})),Q()},title:e})})))))}}),i.default.createElement(l.Divider,{key:"divquality2"}),i.default.createElement(l.List.Item,{key:"resolution",left:function(e){return i.default.createElement(l.List.Icon,(0,r.default)({},e,{style:{fontSize:R},icon:"file-export"}))},title:"Output Quality",titleStyle:{fontSize:R},right:function(e){return i.default.createElement(p.default,{style:{width:120}},i.default.createElement(l.Menu,{visible:W,onDismiss:Q,anchor:i.default.createElement(l.Button,{mode:"outlined",onPress:function(){return N(!0)}},""+((null==S?void 0:S.quality)||"HD"))},i.default.createElement(i.default.Fragment,null,q.map((function(e){return i.default.createElement(l.Menu.Item,{key:e,onPress:function(){h(Object.assign({},S,{quality:e})),Q()},title:e})})))))}}),i.default.createElement(l.Divider,{key:"divquality"})),i.default.createElement(l.List.Section,null,i.default.createElement(l.List.Item,{title:"Filename",description:null==P?void 0:P.filename}),i.default.createElement(l.List.Item,{title:"Format",description:null==P?void 0:P.type}),i.default.createElement(l.List.Item,{title:"Duration",description:null==S?void 0:S.duration}),i.default.createElement(l.List.Item,{title:"Width",description:null==S?void 0:S.width}),i.default.createElement(l.List.Item,{title:"Height",description:null==S?void 0:S.height}),i.default.createElement(l.List.Item,{title:"Aspect Ratio",description:null==S?void 0:S.aspectRatio}),i.default.createElement(l.List.Item,{title:"Size",description:(0,d.niceBytes)(null==P||null==(t=P.size)?void 0:t.toString())}),i.default.createElement(l.List.Item,{title:"FolderId",description:null==P?void 0:P.folderId}))))),i.default.createElement(l.Divider,null),i.default.createElement(l.Card.Actions,{style:{height:"auto"}},i.default.createElement(l.Button,{disabled:I,onPress:C},"Cancel"),i.default.createElement(l.Button,{loading:I,onPress:b},I?"Processing":"Confirm"))))))},r=h(r),a=h(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),u=h(u),c=h(c),f=h(f),s=h(s),p=h(p)}.apply(t,r))||(e.exports=a)},891112:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(38953),n(932779),n(3469),n(863946),n(841051),n(775942),n(1672),n(898707),n(964281),n(532005)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=e.height,n=e.mediaPlayer,o=(0,u.useTheme)(),y=(0,b.useAppDispatch)(),m=n.currentMediaId,v=n.currentMedia,g=(null==v?void 0:v.fileType)||(null==v?void 0:v.type)||"",h="image"===(null==g?void 0:g.split("/")[0])||(null==g?void 0:g.search("image"))>-1,w=(0,d.default)().width,P=(0,s.useIsFocused)(),E=v,I=(0,c.useMutation)(function(){var e=(0,r.default)((function*(e){}));return function(t){return e.apply(this,arguments)}}(),{retry:!1}),S=(0,c.useQuery)("wtMedia_"+m,(0,r.default)((function*(){var e,t;try{t=yield(0,f.getFileOpfs)(E)}catch(n){}return!t&&(null==(e=E.url)?void 0:e.search("https://"))>-1&&(t=E.url),t||(t=(yield(0,f.getVideoWT)(E)).stream),"string"===typeof t&&(t=t.replace("file://","")),y((0,p.loaded)({actionType:p.MediaActionType.loaded,mediaId:m})),t})),{enabled:!!P,refetchOnMount:!0}),O=S.isLoading,_=null==S?void 0:S.data,M=(null==E?void 0:E.currentPosition)||0,T=w<700,D=parseInt(T?t/4:t/2,10);(0,a.useRef)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.Banner,{visible:!!m,theme:o,style:{backgroundColor:"black",padding:0,margin:"0 !important",width:w,height:D,position:"static",display:"flex",alignItems:"center",alignContent:"center"},contentStyle:{width:T?w:"100%",height:D,padding:0,margin:"0 !important"}},a.default.createElement(l.default,{style:{width:T?w:"100%",height:D-40,margin:"0 !important",padding:"0 !important",position:"absolute"}},h&&m&&_&&a.default.createElement(i.default,{style:{height:"100%",width:"100%",margin:0,padding:0,top:0,bottom:0,left:0,right:0,position:"absolute"},resizeMethod:"scale",imageStyle:{resizeMode:"contain"},source:{uri:_}}),!h&&m&&_?a.default.createElement(a.default.Fragment,null,a.default.createElement("video",{controls:!0,style:{width:"100%",height:"100%",objectFit:"contain",position:"absolute"},onPlaying:function(e){var t=e.nativeEvent.target.currentTime;I.mutateAsync(t),y((0,p.togglePause)({pause:!1,actionType:p.MediaActionType.pause}))},onPause:function(e){y((0,p.togglePause)({pause:!0,actionType:p.MediaActionType.pause}))},onEnded:function(e){console.info("ended",e)},onTimeUpdate:function(e){var t=e.nativeEvent.target.currentTime;t>5&&t-M>5&&!I.isLoading&&I.mutateAsync(t)},onResize:function(){console.info("resize")},onLoadedData:function(e){n.isMediaPaused||e.nativeEvent.target.play()},ref:function(e){e&&e.paused&&e.currentTime},src:_},a.default.createElement("track",{label:"language one",kind:"subtitles",srcLang:"en",default:!0}))):null,O?a.default.createElement(u.ActivityIndicator,{style:{position:"relative",flexBasis:"auto"},size:72}):null,a.default.createElement(u.IconButton,{style:{position:"absolute",cursor:"pointer",right:0,top:0,pointerEvents:"auto",zIndex:100},icon:"close",mode:"outlined",size:25,onPress:function(){return n.onMediaPress("")}}))),a.default.createElement(u.Divider,null))},r=y(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=y(i),o=y(o),l=y(l),d=y(d)}.apply(t,r))||(e.exports=a)},934326:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(841051),n(532005),n(932779),n(145776),n(142020),n(179360)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.RenderStatusBanner=function(){(0,c.useShare)().share;var e=(0,o.useAppSelector)((function(e){return e.editor.isRendering})),t=(0,o.useAppSelector)((function(e){return e.editor.ffmpegError})),n=(0,o.useAppSelector)((function(e){return e.editor.ffmpegLogs})),l=(0,o.useAppSelector)((function(e){return e.editor.renderOutputURL})),f=(0,o.useAppDispatch)(),s=(0,i.useTheme)(),p=t?"Error":"Rendering";l&&(p="Success");return console.info("error",n),a.default.createElement(i.Banner,{theme:s,visible:e||t||void 0!==l,style:{width:"100%"}},a.default.createElement(i.Card.Title,{style:{width:"100%"},titleStyle:{fontSize:20},title:"Render Status",subtitle:p,left:function(e){return a.default.createElement(i.Avatar.Icon,(0,r.default)({},e,{icon:"movie"}))}}),t&&a.default.createElement(i.Card.Content,null,a.default.createElement(d.default,{style:{height:200},showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},a.default.createElement(i.Text,{style:s.fonts.bodySmall},n))),a.default.createElement(i.Card.Actions,null,(l||t)&&a.default.createElement(i.IconButton,{style:{cursor:"pointer",pointerEvents:"auto",zIndex:100},icon:"close",mode:"outlined",size:25,onPress:function(){f((0,u.setRenderingError)(!1)),f((0,u.setIsRendering)(!1)),f((0,u.setRenderUrl)(void 0))}}),l&&a.default.createElement(i.Button,{icon:"file",mode:"outlined",onPress:function(){var e=document.createElement("a");e.style="display:none;",document.body.appendChild(e),e.download="out.mp4",e.href=l,e.click()}},"Download File")),!t&&!l&&a.default.createElement(i.ProgressBar,{indeterminate:!0,visible:!0}))},r=f(r),a=f(a),l=f(l),d=f(d)}.apply(t,r))||(e.exports=a)},31815:(e,t,n)=>{var r,a;r=[t,n(841051),n(532005),n(351175),n(296540),n(932779)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ToastDialog=function(){var e=(0,a.useAppSelector)((function(e){return e.ui.toastText})),t=(0,a.useAppSelector)((function(e){return e.ui.toastIcon})),n=(0,a.useAppDispatch)(),l=(0,r.useTheme)(),d=void 0!==e;return o.default.createElement(r.Portal,null,o.default.createElement(r.Snackbar,{theme:l,visible:d,style:{bottom:50},icon:t||"close",collapsable:!0,onIconPress:function(){return n((0,i.setToastText)(void 0))},onDismiss:function(){return n((0,i.setToastText)(void 0))}},e))},o=d(o),l=d(l)}.apply(t,r))||(e.exports=a)},44400:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(296540),n(841051),n(532005),n(248389),n(26593),n(351175),n(898707),n(775942),n(932779),n(361507),n(497111),n(719931),n(139131),n(193534)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g){"use strict";var h=n(124994);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.Actions=function(e){var t=e.showFullSearchBar;(0,g.useKeyboardDispatcher)();var n=(0,f.useNavigation)(),p=(0,l.useAppDispatch)(),h=(0,l.useAppSelector)((function(e){return e.ui.params})),w=(0,l.useAppSelector)((function(e){return e.ui.folderType})),P=(0,l.useAppSelector)((function(e){return e.ui.currentPage})),E=(0,l.useAppSelector)((function(e){return e.ui.parentName})),I=null==h?void 0:h.projectId,S=null==h?void 0:h.folderId,O=null==h?void 0:h.shopId,_="ShopTab"===E&&"string"===typeof O,M=void 0!==(0,l.useAppSelector)((function(e){return e.ui.editingMode})),T=[d.FolderType.media,d.FolderType.editor,d.FolderType.encoder,d.FolderType.shop].includes(w),D=w!==d.FolderType.settings,j="EditorProject"===P;j&&(T=!1,D=!1);var C=(0,s.useQuery)("network",(function(){try{if(window.ethereum)return window.ethereum.networkVersion}catch(e){return}})),F=(0,i.useState)(!1),A=(0,a.default)(F,2),x=A[0],k=A[1],R=(0,v.useFileSelectOptions)(S,void 0,!0);return i.default.createElement(i.default.Fragment,null,C.data&&i.default.createElement(o.Tooltip,{title:"Switch Network"},i.default.createElement(o.Menu,{visible:x,onDismiss:function(){return k(!1)},contentStyle:{marginTop:50},anchor:i.default.createElement(o.Button,{icon:"ethereum",onPress:function(){return k(!0)}},b.networks[C.data].chainName)},Object.keys(b.networks).map((function(e){var t=b.networks[e];return i.default.createElement(o.Menu.Item,{key:t.chainId,title:t.chainName,onPress:(0,r.default)((function*(){yield(0,y.switchNet)(t.chainId),k(!1)}))})})))),"Databases"===P?i.default.createElement(o.Appbar.Action,{icon:"database-plus",onPress:function(){p((0,c.setEditingMode)("database"))}}):null,D&&!M?i.default.createElement(o.Tooltip,{title:"Create a folder"},i.default.createElement(o.Appbar.Action,{icon:"folder-plus",onPress:function(){p((0,c.setEditingMode)("folder"))}})):null,j&&i.default.createElement(u.default,{projectId:I,routeParams:h}),_&&i.default.createElement(o.Tooltip,{title:"Open webeditor"},i.default.createElement(o.Appbar.Action,{icon:"web",onPress:function(){return n.navigate("WebEditor")}})),_&&i.default.createElement(o.Tooltip,{title:"Open shop info"},i.default.createElement(o.Appbar.Action,{icon:"cog",onPress:function(){return n.navigate("ShopConfig")}})),_&&i.default.createElement(o.Tooltip,{title:"Open orders"},i.default.createElement(o.Appbar.Action,{icon:"shopping",onPress:function(){return n.navigate("Orders",{orderId:void 0})}})),_&&i.default.createElement(o.Tooltip,{title:"Open payouts"},i.default.createElement(o.Appbar.Action,{icon:"currency-usd",onPress:function(){return n.navigate("Payouts",{shopId:O})}})),M||"contact"!==w?null:i.default.createElement(o.Tooltip,{title:"Create a chat"},i.default.createElement(o.Appbar.Action,{icon:"chat-plus",onPress:function(){p((0,c.setEditingMode)("party"))}})),T&&!M?i.default.createElement(o.Tooltip,{title:"Select a file"},i.default.createElement(o.Appbar.Action,{icon:"file-plus",onPress:R.showDrawer})):null,t||M?null:i.default.createElement(o.Appbar.Action,{icon:"magnify",onPress:function(){p((0,c.setEditingMode)("search"))}}),i.default.createElement(m.AttachmentDrawer,R))},r=h(r),a=h(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),u=h(u),p=h(p)}.apply(t,r))||(e.exports=a)},228116:(e,t,n)=>{var r,a;r=[t,n(296540),n(841051),n(596948),n(532005),n(898707)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BackButton=function(e){var t=e.folder,n=(0,l.useNavigation)(),d=(0,o.useAppSelector)((function(e){return e.ui.params})),u=(0,o.useAppSelector)((function(e){return e.ui.currentPage})),c=(0,o.useAppSelector)((function(e){return e.ui.parentName})),f=null==d?void 0:d.folderId,s=(null==d?void 0:d.parentFolderId)||(null==t?void 0:t.folderId);return r.default.createElement(a.Appbar.Action,{style:{zIndex:100},icon:"chevron-left",onPress:function(){var e=i.RootScreens[c],r={folderId:s,mnemonic:-1===(null==s?void 0:s.search("new_"))?null==t?void 0:t.mnemonic:void 0,title:null==t?void 0:t.title};"ShopTab"==c&&(e="Shops"),"Camera"===u&&null!=d&&d.chatId?n.navigate(i.RootStackName,{screen:c,params:{screen:"Chat",params:d}}):(console.info({folderParams:r}),r.folderId&&r.folderId!==f?n.navigate(i.RootStackName,{screen:c,params:{screen:"Folder",params:r||d}}):n.navigate(i.RootStackName,{screen:c,params:{screen:e,params:void 0}}))}})},r=d(r)}.apply(t,r))||(e.exports=a)},662434:(e,t,n)=>{var r,a;r=[t,n(296540),n(219330),n(532005),n(837436),n(298299),n(765353),n(891112),n(934326),n(863946),n(3469),n(931055),n(31815)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.BannerContainer=function(e){var t=e.userId,n=e.isEncoderProject,y=e.width,m=(0,i.useAppSelector)((function(e){return e.ui.params})),v=(0,i.useAppSelector)((function(e){return e.ui.folderType})),g=(0,i.useAppSelector)((function(e){return e.ui.currentPage})),h=null==m?void 0:m.projectId,w=null==m?void 0:m.folderId,P=null==m?void 0:m.parentFolderId,E=(0,i.useAppDispatch)(),I=(0,i.useAppSelector)((function(e){return e.upload.modalVisible})),S=(0,a.useMediaPlayer)(),O=(0,f.default)().height;return console.info("bannercontainer reload"),r.default.createElement(s.default,{style:{padding:0,margin:0,width:y}},I?r.default.createElement(d.default,{projectId:h,userId:t,folderType:v,hideMedialModal:function(){E((0,o.cancel)())},folderId:w||P,routeName:g,isEncoderProject:n}):null,void 0!==S.currentMediaId?r.default.createElement(u.default,{height:O,mediaPlayer:S}):null,"EncoderProject"===g?r.default.createElement(l.default,{projectId:h,height:O,folderId:w||P}):null,r.default.createElement(c.RenderStatusBanner,null),r.default.createElement(p.ChooseDialog,null),r.default.createElement(b.ToastDialog,null))},r=y(r),l=y(l),d=y(d),u=y(u),f=y(f),s=y(s)}.apply(t,r))||(e.exports=a)},403936:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(296540),n(841051),n(306565),n(3469),n(532005),n(926516),n(228116),n(351175),n(992796),n(898707),n(775942)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y){"use strict";var m=n(124994);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.NavInput=function(e){var t,n=e.options,m=e.folderId,v=e.isLocked,w=e.searchValue,P=e.setSearch,E=(0,y.useQueryClient)(),I=(0,b.useNavigation)(),S=(0,u.useAppSelector)((function(e){return e.ui.params})),O=(0,u.useAppSelector)((function(e){return e.ui.folderType})),_=(0,u.useAppDispatch)(),M=(0,u.useAppSelector)((function(e){return e.ui.isEditing})),T=(0,u.useAppSelector)((function(e){return e.ui.editingMode})),D=(0,i.useState)(""),j=(0,a.default)(D,2),C=j[0],F=j[1],A=(0,u.useAppSelector)((function(e){return e.ui.currentPage})),x=(0,y.useQuery)("UserData",(function(){return(0,p.getUserData)()})),k=null==x||null==(t=x.data)?void 0:t.id,R=(0,o.useTheme)(),L=(0,y.useMutation)((function(e){return(0,p.writeItem)(e)}),{retry:!0}),B=(0,y.useQuery)("folderData_"+m,(0,r.default)((function*(){return yield(0,p.getById)(m)})),{retry:!0,enabled:!!m}).data,W=(0,u.useAppSelector)((function(e){return e.ui.isBackEnabled})),N="new_"+O,z=(null==S?void 0:S.name)||(null==S?void 0:S.title)||(0,l.getHeaderTitle)(n,A),U=g,V=null==S?void 0:S.mnemonic,H=null==S?void 0:S.shopId;"party"===T&&(U=h);"search"===T&&(U="type to search");var Q=function(){var e=(0,r.default)((function*(){console.info("mode",T);try{switch(T){case"party":console.info("createNewParty");var e=k+"_"+c.default.v4(),t=yield(0,p.createNewParty)({id:e,name:C,partyId:e,folderId:m||N,isContact:!0});I.navigate("Chat",{chatId:e,name:C,mnemonic:t.mnemonic,parentFolderId:m||N}),console.info("createNewParty done",t);break;case"folder":var n={id:"folder_"+c.default.v4()+"_"+k,title:C,isFolder:!0,date:(new Date).valueOf(),userId:k,folderType:O,folderId:m||H,mnemonic:V};console.info("new folder",n),yield L.mutateAsync(n);break;case"search":_((0,s.setEditingMode)(void 0))}}catch(r){console.error("onClickExtra err",r)}return m?E.refetchQueries({queryKey:"folderContent_"+m}):E.refetchQueries({queryKey:"folders_"+O}),_((0,s.setEditingMode)(void 0)),!0}));return function(){return e.apply(this,arguments)}}(),K=M&&"database"!==T;return i.default.createElement(i.default.Fragment,null,!K&&W?i.default.createElement(f.BackButton,{folder:B}):null,K?null:i.default.createElement(o.Appbar.Content,{title:z,theme:R,style:{paddingLeft:W?0:15}}),K?i.default.createElement(d.default,{style:{width:"100%"}},i.default.createElement(o.TextInput,{placeholder:U,onChangeText:function(e){return"search"===T?P(e):F(e)},style:{width:"100%",textAlignVertical:"bottom",lineHeight:30,padding:10,height:40},theme:R,value:"search"===T?w:C,left:i.default.createElement(o.TextInput.Icon,{style:{marginTop:20},icon:"arrow-left-circle",onPress:function(){_((0,s.setEditingMode)(void 0))}}),autoFocus:!0,maxLength:100,right:i.default.createElement(o.TextInput.Icon,{style:{marginTop:20},onPress:Q,icon:"check-circle",loading:v})})):null)},t.searchContactsPlaceholderText=t.defaulPlaceHolderText=t.chatPlacehoder=t.addFolderPlaceholder=void 0,r=m(r),a=m(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),d=m(d),c=m(c);t.defaulPlaceHolderText="type to search your collection";var g=t.addFolderPlaceholder="Type name of the folder",h=(t.searchContactsPlaceholderText="type to search your contacts",t.chatPlacehoder="Type name of the new chat")}.apply(t,r))||(e.exports=a)},891219:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(355508),n(986737),n(841051),n(361507),n(775942)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=f(r),a=f(a),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(i),o=f(o);var p=[{label:"Media",focusedIcon:"folder",unfocusedIcon:"folder-outline",key:0,screen:"FilesTab"},{label:"Chat",focusedIcon:"forum",unfocusedIcon:"forum-outline",key:1,screen:"ContactsTab"},{label:"Video\nEditor",focusedIcon:"scissors-cutting",unfocusedIcon:"scissors-cutting",key:2,screen:"EditorTab"},{label:"Settings",focusedIcon:"cog",unfocusedIcon:"cog-outline",key:3,screen:"SettingsTab"}],b={label:"Shop",focusedIcon:"cart",unfocusedIcon:"cart-outline",key:5,screen:"ShopTab"};var y=o.default.create({drawerContent:{flex:1},preference:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:12,paddingHorizontal:16},v3Preference:{height:56,paddingHorizontal:28},badge:{alignSelf:"center"},collapsedSection:{marginTop:16,fontSize:12},annotation:{marginHorizontal:24,marginVertical:6}});t.default=function(e){var t,n,o=e.navigation,f=e.state.index,s=(0,d.useTheme)(),m=(0,c.useQuery)("drawerItems",(0,a.default)((function*(){var e=JSON.parse(JSON.stringify(p));try{var t=!1;try{var n=yield(0,u.getShopServiceAddress)();t=yield(0,u.checkServiceValid)(n)}catch(r){}t&&e.push(b)}catch(r){console.error("drawerItems err",r)}return e})),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:15e3});return i.createElement(l.DrawerContentScrollView,{alwaysBounceVertical:!1,style:[y.drawerContent,{backgroundColor:s.colors.surface}],showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},m.isFetched&&i.createElement(i.Fragment,null,((null==(t=m.data)?void 0:t.length)||0)>0&&(null==(n=m.data)?void 0:n.map((function(e,t){return i.createElement(d.Drawer.Section,{style:y.collapsedSection,key:e.key},i.createElement(d.Drawer.CollapsedItem,(0,r.default)({},e,{key:e.key,active:f===t,onPress:function(){o.navigate(e.screen)}})))})))))}}.apply(t,r))||(e.exports=a)},774221:(e,t,n)=>{var r,a;r=[t,n(296540),n(841051)],void 0===(a=function(e,r,a){"use strict";var i=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.SettingsAvatar=void 0,r=i(r);t.SettingsAvatar=function(e){var t,n;return r.default.createElement(a.Avatar.Text,{style:e.style,label:(null==(t=e.UserData)?void 0:t.name)&&(null==(n=e.UserData)?void 0:n.name.split(" ").map((function(e){return e[0]})).join(""))||"",size:e.AvatarSize})}}.apply(t,r))||(e.exports=a)},556838:(e,t,n)=>{var r,a;r=[t,n(585715),n(94634),n(29293),n(296540),n(841051),n(775942),n(3469),n(777782),n(499151),n(539589),n(532005),n(351175),n(992796)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y){"use strict";var m=n(124994);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e){var t,n=e.db,r=(e.totalLength,e.showMnemonic),c=null==(t=f.evolu.getOwner())?void 0:t.mnemonic,s=n.mnemonic===c,p=n.mnemonic,b=(0,d.useMutation)((0,i.default)((function*(){try{f.dbMnemoCons[p]||(yield(0,f.createDBConn)(n.title,n.mnemonic,!0)),yield(0,f.initDatabaseRecord)("previous",c,f.dbMnemoCons[p])}catch(e){console.error(e)}f.evolu.restoreOwner(n.mnemonic)})));return o.default.createElement(l.List.Item,{key:n.id,left:function(e){return o.default.createElement(l.List.Icon,(0,a.default)({},e,{icon:"database"}))},right:function(e){return o.default.createElement(o.default.Fragment,null,!s&&o.default.createElement(l.Button,(0,a.default)({},e,{icon:"archive-arrow-down",mode:"outlined",onPress:function(){b.mutateAsync()}}),"Switch"),o.default.createElement(l.Button,(0,a.default)({},e,{icon:"eye",mode:"outlined",onPress:function(){return r(n)}}),"Show"))},description:o.default.createElement(u.default,{style:{gap:10,flexDirection:"row"}},s&&o.default.createElement(l.Chip,{style:{backgroundColor:"green"}},"Current")),title:""+n.title})}Object.defineProperty(e,"__esModule",{value:!0}),t.DatabaseItemComponent=g,t.default=function(){var e=(0,d.useQuery)("Databases",(function(){return(0,s.getDatabases)()}),{refetchOnWindowFocus:!1}),t=e.isLoading,n=e.data,a=(0,o.useState)(void 0),u=(0,r.default)(a,2),m=u[0],v=u[1],h=(0,o.useState)(""),w=(0,r.default)(h,2),P=w[0],E=w[1],I=(0,o.useState)(""),S=(0,r.default)(I,2),O=S[0],_=S[1],M=function(e){return v(e.mnemonic)},T=(0,d.useMutation)((0,i.default)((function*(){return console.info("createdb"),yield(0,f.initDatabaseRecord)(P,O)})),{onSuccess:function(){j((0,b.setEditingMode)(void 0)),e.refetch()}}),D=(0,p.useAppSelector)((function(e){return"database"===e.ui.editingMode})),j=(0,p.useAppDispatch)();return t?o.default.createElement(l.ActivityIndicator,{size:72}):o.default.createElement(o.default.Fragment,null,o.default.createElement(l.List.Section,null,null==n?void 0:n.map((function(e){return o.default.createElement(g,{db:e,totalLength:n.length,showMnemonic:M})}))),o.default.createElement(l.Dialog,{style:{maxWidth:500},visible:void 0!==m,onDismiss:function(){return v(void 0)}},o.default.createElement(l.Dialog.Title,null,"Mnemonic"),o.default.createElement(l.Dialog.Content,null,o.default.createElement(l.Text,null,m)),o.default.createElement(l.Dialog.Actions,null,o.default.createElement(l.Button,{icon:"clipboard",onPress:function(){return c.default.setString(m),v(void 0)}},"Copy"))),o.default.createElement(l.Dialog,{visible:D,style:{maxWidth:500},onDismiss:function(){return j((0,b.setEditingMode)(void 0))}},o.default.createElement(l.Dialog.Title,null,"Create a new Database"),o.default.createElement(l.Dialog.Content,null,o.default.createElement(l.TextInput,{label:"Database Name",value:P,onChangeText:E}),o.default.createElement(l.TextInput,{label:"Database Mnemonic",value:O,onChangeText:_})),o.default.createElement(l.Dialog.Actions,null,o.default.createElement(l.Button,{key:"close",icon:"close",onPress:function(){j((0,b.setEditingMode)(void 0))}},"Cancel"),o.default.createElement(l.Button,{key:"matrix",icon:"matrix",onPress:function(){_((0,y.genMnemonic)())}},"Generate New Mnemonic"),o.default.createElement(l.Button,{key:"check",icon:"check",disabled:P.length<3||12!==O.split(" ").length,onPress:function(){return T.mutateAsync()},loading:T.isLoading},"Save"))))},r=m(r),a=m(a),i=m(i),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),u=m(u),c=m(c)}.apply(t,r))||(e.exports=a)},879537:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(841051),n(775942),n(3469),n(992796)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useQuery)("UserData",(function(){return(0,d.getUserData)()}),{refetchOnWindowFocus:!1}),n=t.isLoading,u=t.data;return n?a.default.createElement(i.ActivityIndicator,{size:72}):a.default.createElement(i.List.Section,null,u.devices.map((function(e){return a.default.createElement(l.default,{key:e.id},"unknown"!==e.id&&e.manufacturer?a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Divider,null),a.default.createElement(i.List.Item,{key:e.id,left:function(t){return a.default.createElement(i.List.Icon,(0,r.default)({},t,{icon:e.manufacturer.toLowerCase()}))},right:function(e){return a.default.createElement(i.List.Icon,(0,r.default)({},e,{icon:"logout"}))},description:"Created: "+new Date(e.createdAt).toDateString(),title:e.model.replace(new RegExp("-")," ")+" on "+e.platform}),a.default.createElement(i.Divider,null)):null)})))},r=u(r),a=u(a),l=u(l)}.apply(t,r))||(e.exports=a)},899631:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(841051),n(775942),n(992796),n(532005),n(351175),n(730503),n(453088),n(445311),n(361507),n(774221)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useQuery)("premium",(0,r.default)((function*(){var e,t,n=yield(0,l.getUserData)(),r=!1,a=!1;try{var i=yield(0,p.getStorageAddress)();r=yield(0,p.checkServiceValid)(i),e=yield(0,p.getServicePaymentInfo)(i)}catch(c){console.error(c)}try{var o=yield(0,p.getShopServiceAddress)();a=yield(0,p.checkServiceValid)(o),t=yield(0,p.getServicePaymentInfo)(o)}catch(c){console.error(c)}var d={isCloudEnabled:r,isKioskEnabled:a,storageInfo:e,shopInfo:t},u=yield(0,p.getCurrentMetamaskWalletInfo)();return console.info("paymentsInfo",d),Object.assign({},n,d,u)})),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:15e3}),t=(0,c.useCloseDialog)().closeDialog,n=(0,d.useAppDispatch)(),y=e.isLoading,m=e.data,g=(0,o.useMutation)(function(){var t=(0,r.default)((function*(t){var r,a=t.service;n((0,u.setDialogLoading)(!0)),"Cloud"===a&&(r=yield(0,p.getStorageAddress)()),"Kiosk"===a&&(r=yield(0,p.getShopServiceAddress)()),yield(0,p.buyServiceSmart)(r),yield e.refetch(),n((0,u.setDialogLoading)(!1))}));return function(e){return t.apply(this,arguments)}}());(0,a.useEffect)((function(){var t=function(){e.refetch()};try{window.ethereum.on("accountsChanged",t)}catch(n){console.error("err",n)}return function(){try{window.ethereum.removeListener("accountsChanged",t)}catch(n){console.error("err",n)}}}),[]);var h=function(e,a){e&&function(e){if("Cloud"===e){var a=null==m?void 0:m.storageInfo;n((0,f.setPurchasePrice)(v(a)))}if("Kiosk"===e){var i=null==m?void 0:m.shopInfo;n((0,f.setPurchasePrice)(v(i)))}n((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Buy "+e+" Service",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var n=(0,r.default)((function*(){yield g.mutateAsync({service:e}),t()}));return function(){return n.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:s.PremiumDialogBody,appDialogControls:void 0,appDialogLoading:g.isLoading}))}(a)},w=(0,i.useTheme)();return y?a.default.createElement(i.ActivityIndicator,{size:72}):a.default.createElement(i.List.Section,null,a.default.createElement(i.List.Item,{theme:w,title:function(){var e;return a.default.createElement(i.List.Section,null,a.default.createElement(i.List.Item,{title:"Current Metamask Wallet:"}),a.default.createElement(i.List.Item,{title:null==m||null==(e=m.wallet)?void 0:e.address}),a.default.createElement(i.Divider,null))},style:{height:"auto"},left:function(){return a.default.createElement(b.SettingsAvatar,{AvatarSize:72,UserData:m,style:{marginLeft:20}})},description:function(){return a.default.createElement(i.List.Section,null,a.default.createElement(i.List.Item,{left:function(){return a.default.createElement(i.List.Icon,{icon:"wallet"})},title:"EXDC: "+((null==m?void 0:m.excdBalance)||0),right:function(){return a.default.createElement(i.Button,{icon:"cash-plus",mode:"outlined",onPress:function(){return window.open(p.uniSwapLink,"_blank")}},"Buy/Sell")}}))}}),a.default.createElement(i.Divider,null),a.default.createElement(i.List.Item,{left:function(){return a.default.createElement(i.List.Icon,{icon:"cloud",style:{paddingLeft:20}})},title:"Special Deal Cloud Storage - 100 GB for 28 days",description:v(null==m?void 0:m.storageInfo),right:function(){return a.default.createElement(i.Switch,{value:null==m?void 0:m.isCloudEnabled,onValueChange:function(e){return h(e,"Cloud")}})}}),a.default.createElement(i.Divider,null),a.default.createElement(i.List.Item,{left:function(){return a.default.createElement(i.List.Icon,{icon:"cart",style:{paddingLeft:20}})},title:"Shop Special Deal - 28 days",description:v(null==m?void 0:m.shopInfo),right:function(){return a.default.createElement(i.Switch,{value:null==m?void 0:m.isKioskEnabled,onValueChange:function(e){return h(e,"Kiosk")}})}}))},r=y(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a);var v=function(e){var t=null!=e&&e.subInterval?(null==e?void 0:e.subInterval)/60/60/24:0;return(null==e?void 0:e.value)+" "+(null==e?void 0:e.coinName)+" / "+t+" days  + "+(null==e?void 0:e.value)+" EXDC (One time to create a smart contract)"}}.apply(t,r))||(e.exports=a)},445311:(e,t,n)=>{var r,a,i=n(296540);r=[t,n(3469),n(532005),n(841051)],void 0===(a=function(e,r,a,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.PremiumDialogBody=function(){var e=(0,a.useAppSelector)((function(e){return e.auction.purchasePrice}));return i.createElement(r.default,{style:{width:"100%",height:"auto"}},i.createElement(o.Text,null,"To enable this service you will pay ",e))},r=l(r)}.apply(t,r))||(e.exports=a)},643889:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(585715),n(296540),n(3469),n(355508),n(794563),n(932779),n(775942),n(841051),n(898707),n(992796),n(532005),n(351175),n(774221)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v){"use strict";var g=n(124994);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=g(r),a=g(a),i=g(i),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o),l=g(l),d=g(d),u=g(u),c=g(c);var w=d.default.create({container:{flex:1},row:{flexDirection:"row"},column:{flexDirection:"column"},customTitle:{alignItems:"center",justifyContent:"space-between"},additionalPadding:{paddingTop:8},image:{width:"100%",height:"auto",opacity:.6,position:"absolute",resizeMode:"cover",zIndex:-1,flex:1}});t.default=function(){var e=(0,f.useQuery)("UserData",(function(){return(0,b.getUserData)()})),t=e.isLoading,n=(0,p.useNavigation)(),d=e.data,c=(0,y.useAppDispatch)(),g=(0,y.useAppSelector)((function(e){return e.ui.isEditingProfile})),h=(0,o.useState)(""),P=(0,i.default)(h,2),E=P[0],I=P[1],S=(0,o.useState)(""),O=(0,i.default)(S,2),_=O[0],M=O[1],T=function(){c((0,m.setIsEditingProfile)(!0)),I(null==d?void 0:d.name),M(null==d?void 0:d.description)},D=(0,f.useMutation)((0,a.default)((function*(){var e=d;e.name=E,e.description=_,yield(0,b.writeItem)(e)}))),j=function(){D.mutateAsync().then((0,a.default)((function*(){yield e.refetch(),c((0,m.setIsEditingProfile)(!1))})))},C=g?"check-outline":"pencil-outline",F={pointerEvents:"auto",paddingTop:20},A=(0,s.useTheme)();return o.default.createElement(l.default,{style:{height:"100%",width:"100%"}},t?o.default.createElement(s.ActivityIndicator,{animating:!0,size:72}):o.default.createElement(o.default.Fragment,null,o.default.createElement(s.List.Section,null,o.default.createElement(s.List.Item,{theme:A,title:g?null:null==d?void 0:d.name,style:{height:g?160:"auto"},left:function(){return o.default.createElement(v.SettingsAvatar,{AvatarSize:72,UserData:d,style:{marginLeft:20}})},description:function(e){var t=e.ellipsizeMode,n=e.color,r=e.fontSize;return o.default.createElement(l.default,{style:[w.container,w.column]},g?o.default.createElement(o.default.Fragment,null,o.default.createElement(s.TextInput,{theme:A,mode:"outlined",onChangeText:I,value:E}),o.default.createElement(s.TextInput,{theme:A,mode:"outlined",onChangeText:M,value:_})):o.default.createElement(s.Text,{theme:A,numberOfLines:1,ellipsizeMode:t,style:{color:n,fontSize:r}},null==d?void 0:d.description),o.default.createElement(l.default,{style:[w.container,w.row,w.additionalPadding]},null,o.default.createElement(s.Chip,{icon:"web",onPress:function(){},style:{height:30}},"WEB")))},right:function(e){return o.default.createElement(u.default,{style:F,onPress:g?j:T},o.default.createElement(s.List.Icon,(0,r.default)({},e,{icon:C})))}}),o.default.createElement(s.Divider,null),o.default.createElement(s.List.Item,{onPress:function(){return n.navigate("Devices")},title:"Devices",left:function(e){return o.default.createElement(s.List.Icon,{icon:"devices",style:e.style})}}),o.default.createElement(s.Divider,null),o.default.createElement(s.List.Item,{onPress:function(){return n.navigate("Databases")},title:"Databases",left:function(e){return o.default.createElement(s.List.Icon,{icon:"database",style:e.style})}}),o.default.createElement(s.Divider,null),o.default.createElement(s.List.Item,{onPress:function(){return n.navigate("Premium")},title:"Premium Features",left:function(e){return o.default.createElement(s.List.Icon,{icon:"plus-circle",style:e.style})}}),o.default.createElement(s.Divider,null))))}}.apply(t,r))||(e.exports=a)},807865:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(775942),n(992796),n(777782),n(3469),n(841051),n(863702),n(361507),n(709963)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s){"use strict";var p=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ShopConfig=function(e){var t=e.shopId,n=(e.mnemonic,(0,i.useQuery)("shopconfig_"+t,(0,r.default)((function*(){var e=(yield(0,o.getById)(t))||{id:t};return e.address&&(e.service=yield(0,f.connectToExchangeService)(e.address)),e}))).data),p=(0,i.useMutation)((0,r.default)((function*(){console.info("publish smart service",n);try{if(!n.address){console.info("creating smart service",n);var e=yield(0,f.createSmartService)(n);n.address=e.contractAddress,yield(0,o.writeItem)(n),n.service=e.contract}}catch(l){console.error("error creating smart service",l)}try{var a=yield(0,o.getFolderContent)(t),i=(yield Promise.all(a.map(function(){var e=(0,r.default)((function*(e){return(yield(0,o.getFolderContent)(e.id)).map((function(t){return{id:t.id,price:t.price,category:e.title,title:t.title||t.filename,description:t.productDescription||"",order:t.orderId,image:t.preview}}))}));return function(t){return e.apply(this,arguments)}}()))).flat();console.info("products",i);try{if(!n.address)throw"no_address";yield(0,f.updateSmartServiceUserData)(n.address,i,n.title,n.logo,n.password)}catch(d){console.error("error updating smart contract",d)}}catch(u){console.error("err gathering products",u)}}))),b=function(){var e=(0,r.default)((function*(){return p.mutateAsync()}));return function(){return e.apply(this,arguments)}}();return a.default.createElement(d.default,{style:{width:"100%",height:"100%"}},a.default.createElement(s.ScrollView,null,a.default.createElement(c.ShopProductParams,{product:n,productKey:"title",title:"Name: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"coin",title:"Coin: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"preview",title:"Description: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"ratings",title:"Ratings: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"subsPrice",title:"Subscription Price: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"operator",title:"Operator: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"password",title:"Password: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"category",title:"Category: "}),a.default.createElement(c.ShopProductParams,{product:n,productKey:"logo",title:"Logo: ",isFileSelector:!0}),a.default.createElement(u.Divider,null),a.default.createElement(c.ShopProductParams,{left:null!=n&&n.address?function(){return a.default.createElement(u.IconButton,{onPress:function(){return l.default.setString(null==n?void 0:n.address)},icon:"clipboard"})}:void 0,product:n,productKey:"address",title:"Address: ",staticParam:!0})),a.default.createElement(u.List.Item,{title:function(){return a.default.createElement(u.Button,{onPress:b,loading:p.isLoading,disabled:p.isLoading,mode:"contained"},"Publish")}}))},r=p(r),a=p(a),l=p(l),d=p(d)}.apply(t,r))||(e.exports=a)},97759:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(3469),n(863946),n(932779),n(714230),n(236944),n(841051),n(898707),n(992796),n(444180),n(670655),n(775942),n(361507)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.default=void 0,r=v(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=v(i),o=v(o),l=v(l),d=v(d),u=v(u);t.default=(0,a.memo)((function(e){var t=(0,f.useIsFocused)(),n=(0,o.default)(),l=n.height,v=n.width,g=!(v>700),h=(0,f.useRoute)().params,w=(0,y.useQuery)("orderData_"+h.orderId,(0,r.default)((function*(){var t,n=yield(0,m.getOrderById)(h.orderId);return console.info(n),cart=[],cart=yield Promise.all(null==(t=n.userData)?void 0:t.cart.map(function(){var t=(0,r.default)((function*(t){return yield(0,s.getById)(t.id,e.shopId)}));return function(e){return t.apply(this,arguments)}}())),console.info("cart",cart),cart}))),P=w.data,E=b.styles;if(E.item.width=v-80,E.scroll.height=l-65,E.scroll.marginTop=0,!t)return a.default.createElement(a.default.Fragment,null);return a.default.createElement(i.default,{style:{height:"100%",width:"100%",flexDirection:"row"}},g?null:a.default.createElement(i.default,{style:{width:"40%"}},a.default.createElement(p.OrdersPage,null)),w.isFetching||void 0===P?a.default.createElement(c.ActivityIndicator,{size:72}):a.default.createElement(d.default,{renderItem:function(e){var t=e.item,n=e.onDragEnd,r=e.onDragStart;return a.default.createElement(u.default,{i:t,key:t.id,dataHook:w,styles:E,width:g?v:v/100*70,onDragStart:r,onDragEnd:n})},keyExtractor:function(e){return(null==e?void 0:e.id)||(null==e?void 0:e.date.toString())},style:{width:"60%",height:l,paddingBottom:50},data:P,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,scrollEnabled:!0}))}))}.apply(t,r))||(e.exports=a)},344598:(e,t,n)=>{var r,a,i=n(296540);r=[t,n(94634),n(29293),n(898707),n(775942),n(841051),n(714193),n(114390),n(623318),n(820035)],void 0===(a=function(e,r,a,o,l,d,u,c,f,s){"use strict";var p=n(124994);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.OrderItem=function(e){var t,n=(0,l.useQuery)("decrypt_"+e.item.id,(0,a.default)((function*(){return yield(0,f.decryptPayloadD)(e.item.encData)}))),p=(0,o.useNavigation)(),b=(0,o.useRoute)().params,y=n.data,m=(0,l.useMutation)(function(){var e=(0,a.default)((function*(e){var t=new u.AbiCoder,n=yield(0,c.generateAesKey)(),r=yield(0,c.encryptAesKey)(n.kp,JSON.parse(y.publicKey)),i=(function(){var e=(0,a.default)((function*(e,t,r){var a=yield(0,c.encryptPayloadRaw)(n.key,yield e.arrayBuffer());console.info("encryptedFile",a);var i=new Blob([a.buffer],{type:"text/plain"});return i.name=t.filename,console.info("bl",i),{fileLink:yield(0,s.pinFileToIPFS)(i),iv:a.iv,name:t.filename,fileType:t.fileType,partId:r}}))}(),yield(0,c.encryptPayload)(n.key,JSON.stringify([]))),o=i.encryptedPayload,l=i.iv,d=t.encode(["string"],[JSON.stringify({encryptedPayload:o,iv:l,encryptedKey:r})]);yield(yield e.contract.confirmDelivery(d)).wait(1)}));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var t=(0,a.default)((function*(){yield e.ordersQuery.refetch()}));return function(){return t.apply(this,arguments)}}()});return i.createElement(i.Fragment,null,i.createElement(d.List.Accordion,{style:{backgroundColor:"black"},left:function(t){return i.createElement(d.Text,(0,r.default)({},t,{style:Object.assign({},t.style,{fontSize:10})}),e.item.state)},key:e.item.id,onPress:function(){e.item.id===(null==b?void 0:b.orderId)?p.navigate("Orders",{orderId:void 0,shopId:b.shopId}):p.navigate("Order",{orderId:e.item.id,shopId:b.shopId})},right:function(t){return i.createElement(d.IconButton,(0,r.default)({},t,{icon:(null==b?void 0:b.orderId)===e.item.id?"chevron-right":""}))},expanded:(null==b?void 0:b.orderId)===e.item.id,title:"ORDER: "+(null==(t=e.item)?void 0:t.id),description:i.createElement(i.Fragment,null,i.createElement(d.Text,{style:{fontSize:12}},"Address: "+(null==y?void 0:y.deliveryAddress)+"\nPrice: "+e.item.price+(e.item.rating>0?" Rating: "+e.item.rating:" ")),"Locked"===e.item.state&&i.createElement(d.Button,{icon:"truck",loading:m.isLoading,onPress:function(){return m.mutateAsync(e.item)}},"Confirm Delivery"))},i.createElement(i.Fragment,null)),i.createElement(d.Divider,null))},r=p(r),a=p(a),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(u)}.apply(t,r))||(e.exports=a)},444180:(e,t,n)=>{var r,a;r=[t,n(94634),n(29293),n(296540),n(775942),n(361507),n(992796),n(550847),n(145776),n(344598)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.OrdersPage=function(e){var t=(0,o.useQuery)("orders_"+e.shopId,(0,a.default)((function*(){var t=yield(0,d.getById)(e.shopId);if(null!=t&&t.address){var n=yield(0,l.getOrders)(t.address);return console.info("orders",n),n}return[]}))),n=t.data||[];return i.default.createElement(c.default,{style:{width:"100%",backgroundColor:"black"},showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1},i.default.createElement(u.default,{data:n,style:{backgroundColor:"black"},renderItem:function(n){return i.default.createElement(f.OrderItem,(0,r.default)({},n,{ordersQuery:t,shopId:e.shopId}))}}))},r=s(r),a=s(a),i=s(i),u=s(u),c=s(c)}.apply(t,r))||(e.exports=a)},863702:(e,t,n)=>{var r,a;r=[t,n(443693),n(29293),n(296540),n(775942),n(992796),n(841051),n(532005),n(665353),n(820035)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ShopProductParams=function(e){var t=e.product,n=e.productKey,s=e.title,p=e.staticParam,b=e.left,y=e.isFileSelector,m=t?t[n]:void 0,v=(0,u.useAppSelector)((function(e){return e.shop.editingParams[null==t?void 0:t.id]&&e.shop.editingParams[null==t?void 0:t.id][n]})),g=(0,u.useAppDispatch)(),h=v?"checkbox-outline":"pencil-outline",w=(0,o.useMutation)(function(){var e=(0,a.default)((function*(e){return"number"===typeof t[n]||"number"===typeof m?t[n]=parseFloat(e):t[n]=e,yield(0,l.writeItem)(t)}));return function(t){return e.apply(this,arguments)}}()),P=v?i.default.createElement(d.TextInput,{value:null==m?void 0:m.toString(),onChangeText:function(e){return w.mutateAsync(e)}}):s+(m||""),E=p?void 0:function(){return i.default.createElement(d.Button,{icon:h,mode:"outlined",onPress:function(){g(v?(0,c.setEditingParams)((0,r.default)({},null==t?void 0:t.id,(0,r.default)({},n,!1))):(0,c.setEditingParams)((0,r.default)({},null==t?void 0:t.id,(0,r.default)({},n,!0))))}},"Edit")};y&&(E=function(){return i.default.createElement(d.Button,{icon:h,mode:"outlined",onPress:(0,a.default)((function*(){var e=yield l.DocumentPicker.pickSingle(),r="https://ipfs.io/ipfs/"+(yield(0,f.pinFileToIPFS)(e.file)).IpfsHash;console.info("product on save logo",t),t[n]=r,yield(0,l.writeItem)(Object.assign({},t,{service:void 0}))}))},"Upload Image")});return i.default.createElement(d.List.Item,{title:P,left:b,right:E})},r=s(r),a=s(a),i=s(i)}.apply(t,r))||(e.exports=a)},390013:(e,t,n)=>{var r,a;r=[t,n(29293),n(296540),n(3469),n(841051),n(775942),n(992796),n(361507),n(532005),n(351175),n(730503),n(170761),n(936366),n(497111),n(714193)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m){"use strict";var v=n(124994);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.Payouts=void 0,r=v(r),a=v(a),i=v(i),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(m);t.Payouts=function(e){var t,n=e.shopId,v=(0,l.useQuery)("payouts_"+n,(0,r.default)((function*(){var e=yield(0,d.getById)(n);if(console.info("found shop",e),!e.address)return e;var t=yield(0,u.connectToExchangeService)(e.address),r=yield(0,u.connectToExchangeToken)(),a=yield t.wp(),i=yield(0,y.signer)(),o=new m.Contract(a,b.ERC20__factory.abi,i);return{shop:e,excdBalance:m.formatUnits(yield r.balanceOf(e.address),yield r.decimals()),balance:m.formatUnits(yield t.balanceOfContract(),yield o.decimals())}}))),g=(0,c.useAppSelector)((function(e){return e.auction.bidAmount})),h=(0,c.useAppSelector)((function(e){return e.auction.bidWallet})),w=(0,c.useAppDispatch)(),P=(0,s.useCloseDialog)().closeDialog,E=v.data,I=null==E||null==(t=E.shop)?void 0:t.address,S=(0,l.useMutation)((0,r.default)((function*(){console.info("bid, wallet",g,h,I);var e=yield(0,u.connectToExchangeService)(I);if(!g||!h)throw"no_data";yield e.removeLiquidity(g,h)}))),O=(0,o.useTheme)();return a.default.createElement(i.default,null,a.default.createElement(o.List.Item,{theme:O,title:function(){return a.default.createElement(o.List.Section,null,a.default.createElement(o.List.Item,{title:"Shop Wallet:"}),a.default.createElement(o.List.Item,{title:I}),a.default.createElement(o.Divider,null))},style:{height:"auto"},left:function(){return a.default.createElement(o.IconButton,{icon:"cash"})},description:function(){return a.default.createElement(o.List.Section,null,a.default.createElement(o.List.Item,{left:function(){return a.default.createElement(o.List.Icon,{icon:"wallet"})},title:"EXDC: "+((null==E?void 0:E.excdBalance)||0),right:function(){return a.default.createElement(o.Button,{icon:"cash-plus",mode:"outlined",onPress:function(){return window.open(u.uniSwapLink,"_blank")}},"Buy/Sell")}}),a.default.createElement(o.List.Item,{left:function(){return a.default.createElement(o.List.Icon,{icon:"wallet"})},title:"Revenue: "+((null==E?void 0:E.balance)||0),right:function(){return a.default.createElement(o.Button,{icon:"cash-minus",mode:"outlined",onPress:function(){w((0,f.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Request Payout to Account",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,r.default)((function*(){yield S.mutateAsync(),P()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:p.PayoutDialogBody,appDialogControls:void 0,appDialogLoading:S.isLoading}))}},"Withdraw")}}))}}))}}.apply(t,r))||(e.exports=a)},170761:(e,t,n)=>{var r,a,i=n(296540);r=[t,n(3469),n(532005),n(453088),n(841051)],void 0===(a=function(e,r,a,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.PayoutDialogBody=function(){var e=(0,a.useAppDispatch)(),t=(0,a.useAppSelector)((function(e){return e.auction.bidAmount})),n=(0,a.useAppSelector)((function(e){return e.auction.bidWallet}));return i.createElement(r.default,{style:{width:"100%",height:"auto"}},i.createElement(l.TextInput,{label:"Payout Amount in Percent",style:{width:"100%"},keyboardType:"number-pad",value:t.toString(),onChangeText:function(t){return e((0,o.setBidAmount)(parseFloat(t)))},mode:"outlined"}),i.createElement(l.TextInput,{label:"Payout Crypto Wallet",style:{width:"100%"},keyboardType:"number-pad",value:n,onChangeText:function(t){return e((0,o.setBidWallet)(t))},mode:"outlined"}))},r=d(r)}.apply(t,r))||(e.exports=a)},397870:(e,t,n)=>{var r,a;r=[t,n(29293),n(898707),n(296540),n(775942),n(992796),n(3469),n(841051),n(863702)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ShopProduct=function(){var e=(0,a.useRoute)().params.productId,t="product_"+e,n=(0,o.useQuery)(t,(0,r.default)((function*(){return yield(0,l.getById)(e)}))).data;return i.default.createElement(d.default,{style:{width:"100%",height:"100%"}},i.default.createElement(u.List.Section,null,i.default.createElement(c.ShopProductParams,{product:n,productKey:"title",title:"Name: "}),i.default.createElement(c.ShopProductParams,{product:n,productKey:"description",title:"Description: "}),i.default.createElement(c.ShopProductParams,{product:n,productKey:"preview",title:"Preview: ",isFileSelector:!0}),i.default.createElement(c.ShopProductParams,{product:n,productKey:"price",title:"Price: "}),i.default.createElement(c.ShopProductParams,{product:n,productKey:"status",title:"Status: ",staticParam:!0}),i.default.createElement(u.List.Item,{title:function(){return i.default.createElement(u.Button,{mode:"contained"},"Publish")}})))},r=f(r),i=f(i),d=f(d)}.apply(t,r))||(e.exports=a)},235504:(e,t,n)=>{var r,a,i=n(296540);r=[t,n(29293),n(145776),n(863946),n(637843),n(248389),n(714230),n(841051),n(898707),n(596948),n(926516),n(775942),n(992796),n(361507)],void 0===(a=function(e,r,a,o,l,d,u,c,f,s,p,b,y,m){"use strict";var v=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.ShopsList=function(){var e=(0,f.useNavigation)(),t=(0,o.default)().height,n=(0,l.useFolder)("shops",void 0,void 0,g),d=n.folderContent,v=n.onReordered,h=n.folderContentQuery,w=(0,b.useMutation)((0,r.default)((function*(){var e=m.networks[window.ethereum.networkVersion],t={id:p.default.v4().toString(),network:e,folderId:"shops",folderType:g,mnemonic:(0,y.genMnemonic)()};yield(0,y.writeItem)(t)})),{onSuccess:function(){return h.refetch()}});return i.createElement(a.default,null,i.createElement(c.List.Item,{key:0,title:"Create a shop",left:function(){return i.createElement(c.IconButton,{icon:"creation",mode:"outlined"})},style:{padding:10},onPress:function(){return w.mutateAsync()}}),i.createElement(u.default,{renderItem:function(t){var n;return i.createElement(i.Fragment,null,i.createElement(c.List.Item,{title:t.item.title||t.item.id,description:i.createElement(c.Chip,{icon:"ethereum"},null==(n=t.item.network)?void 0:n.chainName),onPress:function(){return e.navigate(s.RootStackName,{screen:"ShopTab",params:{screen:"Shop",params:{shopId:t.item.id,mnemonic:t.item.mnemonic}}})}}),i.createElement(c.Divider,null))},keyExtractor:function(e){return null==e?void 0:e.id},style:{width:"100%",height:t,paddingBottom:50},data:d||[],showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,scrollEnabled:!0,onReordered:v}))},r=v(r),a=v(a),o=v(o),u=v(u),p=v(p);var g=d.FolderType.shop}.apply(t,r))||(e.exports=a)},399142:(e,t,n)=>{var r,a=n(296540);void 0===(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.WebEditor=void 0;t.WebEditor=function(){return a.createElement(GrapesjsReact,{id:"grapesjs-react",plugins:[gjspresetwebpage,gjsblockbasic,gjsblockflex,formsplugin,toolbox,grapesjsuserblock]})}}.apply(t,[t]))||(e.exports=r)},490920:(e,t,n)=>{var r,a;r=[t,n(296540)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.UserDataState=t.UserDataDispatch=t.UserCtx=t.PeerCtx=t.PartyCtx=t.MediaCtx=t.LocalCtx=t.LoadingContext=void 0;t.PeerCtx=(0,n.createContext)(null),t.MediaCtx=(0,n.createContext)(null),t.PartyCtx=(0,n.createContext)(null),t.UserCtx=(0,n.createContext)(null),t.LocalCtx=(0,n.createContext)(null),t.LoadingContext=(0,n.createContext)(!1),t.UserDataState=(0,n.createContext)(null),t.UserDataDispatch=(0,n.createContext)(null)}.apply(t,r))||(e.exports=a)},510497:(e,t,n)=>{var r,a;r=[t,n(490920)],void 0===(a=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}.apply(t,r))||(e.exports=a)},838430:(e,t,n)=>{var r,a;r=[t,n(29293),n(532005),n(992796),n(248389),n(351175),n(775942),n(926516),n(724516),n(730503),n(898707),n(453088)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p){"use strict";var b=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useAuction=function(){var e=(0,a.useAppDispatch)(),t=(0,s.useNavigation)(),n=(0,f.useCloseDialog)().closeDialog,b=(0,a.useAppSelector)((function(e){return e.auction})),y=b.newAuctionName,m=b.newAuctionPrice,v=b.newAuctionWallet,g=b.newAuctionBetStep,h=(0,d.useMutation)(function(){var e=(0,r.default)((function*(e){var t=yield(0,i.getUserData)(),n=u.default.v4().toString(),r=JSON.parse(JSON.stringify(e));delete r.url,delete r.torrentFile,r.isAuctionMedia=!0;var a={id:n,mediaId:e.id,minPrice:m,title:y,isFolder:!0,date:(new Date).valueOf(),mnemonic:(0,i.genMnemonic)(),wallet:v,userId:t.id,minStep:g,authorName:t.name,isAuction:!0,folderType:o.FolderType.auction,orderId:1,media:r};if(console.info("newAuction",a),""===a.wallet)throw"invalid_wallet";return yield(0,i.writeItem)(a),yield(0,i.writeItem)(Object.assign({},a,{folderId:n})),yield(0,i.sendChatMessage)(n,t.name+" has created auction "+y,a.mnemonic,{system:!0}),a}));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){var n=e.id,r=e.mnemonic,a=e.title;return t.navigate("Auction",{auctionId:n,mnemonic:r,title:a})}}),w=function(){var a=(0,r.default)((function*(a,o){e((0,l.setFolderMenuItemId)({itemId:void 0})),e((0,p.setAuctionPrice)(.1)),e((0,p.setAuctionBetStep)(.1));var d=yield(0,i.getById)(a,o);e((0,p.setAuctioName)(d.filename));var u=yield(0,i.findBy)("mediaId",a);if(u.length){var f=u[0],s=f.id,b=f.mnemonic,y=f.title;t.navigate("Auction",{auctionId:s,mnemonic:b,title:y})}else e((0,l.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Sell Media",appDialogIcon:"currency-btc",appDialogOnSelectRight:function(){var e=(0,r.default)((function*(){h.mutateAsync(d),n()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:c.SellDialogBody,appDialogControls:void 0,appDialogLoading:!1}))}));return function(e,t){return a.apply(this,arguments)}}();return{onSellPress:w}},r=b(r),u=b(u)}.apply(t,r))||(e.exports=a)},428259:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(775942),n(55651),n(532005),n(453088),n(351175),n(248389),n(730503),n(992796),n(637843),n(296540),n(602880),n(497111),n(926516),n(114390),n(714193)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h){"use strict";var w=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useAuctionActions=function(e,t,n){var w=(0,l.useAppDispatch)(),P=(0,f.useCloseDialog)().closeDialog,E=(0,p.useFolder)(e,void 0,void 0,c.FolderType.auction,void 0,null==t?void 0:t.mnemonic).folderContent,I=(0,b.useMemo)((function(){var e;if(!E||null==E||!E.length)return 0;var t=E.filter((function(e){return e.isBid}));return null!=t&&t.length?null==(e=t.sort((function(e,t){return t.amount-e.amount})))?void 0:e[0]:void 0}),[E]),S=(0,i.useQuery)("auction_trx_"+e,(0,a.default)((function*(){var e=t.winnerPaymentTransactionId,n=yield m.provider.getTransaction(e);return n&&(n.block=yield n.getBlock(),n.receipt=yield m.provider.getTransactionReceipt(e)),console.info("trx",n,t),n})),{refetchInterval:2e4,enabled:void 0!==(null==t?void 0:t.winnerPaymentTransactionId)}),O=S.data,_=null==I?void 0:I.amount,M=(0,l.useAppSelector)((function(e){return e.auction.bidWallet})),T=(0,l.useAppSelector)((function(e){return e.auction.bidAmount})),D=(0,i.useMutation)((0,a.default)((function*(){if(isNaN(T))console.error("invalid amount",T);else if(T<t.minStep+t.minPrice)console.error("bid too low",T,t.minStep+t.minPrice);else if(_&&T<_)console.error("bid less than current bid",T,_);else{var r=n.name;yield(0,s.sendChatMessage)(e,r+" has created a bid of "+T,t.mnemonic,{system:!0,isBid:!0,wallet:M,amount:T})}}))),j=(0,i.useMutation)((0,a.default)((function*(){var r=n.name,a=_?r+" has closed the auction with the winning bid of "+_:r+" has closed this auction without a winner";yield(0,s.sendChatMessage)(e,a,t.mnemonic,{system:!0,isBid:!0,wallet:M,amount:T}),t.isClosed=!0,t.winnerId=I.userId,t.winnerPrice=_,yield(0,s.writeItem)(t)})));(0,b.useMemo)((function(){if(null!=t&&t.minStep){var e=t.minPrice,n=t.minStep,r=void 0!==_?parseFloat(n)+parseFloat(_):parseFloat(e)+parseFloat(n);w((0,d.setBidAmount)(parseFloat(parseFloat(r).toFixed(2))))}}),[_,t]);var C=(0,l.useAppSelector)((function(e){return e.auction.payWallet})),F=(0,i.useMutation)((0,a.default)((function*(){try{var n=v.default.v4().toString(),r=yield(0,g.generateNewKeyPair)(),a={id:n,auctionId:e,keyPair:r,folderId:"auction_keys",isKeyPair:!0},i=r.publicKey;yield(0,s.writeItem)(a),console.info("auction.wallet",t,t.wallet);var o=yield(0,m.sendMatic)(C,t.wallet,t.winnerPrice,{publicKey:i});t.winnerPaymentTransactionId=o,yield(0,s.writeItem)(Object.assign({},t,{winnerPaymentTransactionId:o}))}catch(l){console.error("pay err",l)}}))),A=(0,i.useMutation)((0,a.default)((function*(){var e=(new h.ethers.AbiCoder).decode(["string"],null==O?void 0:O.data);console.info("pubKeyData",e);var n=JSON.parse(e[0]),r=JSON.parse(n.publicKey);console.info("pubkey",r);var a=yield(0,s.getById)(t.mediaId,t.media.folderId);if(console.info("mediaOriginal",a),!a)throw"no_media_original_found";var i=yield(0,g.generateAesKey)(),o=yield(0,g.encryptAesKey)(i.kp,r),l=yield(0,g.encryptPayload)(i.key,JSON.stringify(a)),d=l.encryptedPayload,u=l.iv;t.encryptedPayload=d,t.ivb=u,t.encryptedKey=o,yield(0,s.writeItem)(t),yield(0,s.shareFileToWT)(a.id,a.folderId),console.info("auction",t)}))),x=function(){var n=(0,a.default)((function*(){var n=yield(0,s.findBy)("auctionId",e),a=(0,r.default)(n,1)[0];console.info("downloadAuctionMedia",t,a);var i=t.encryptedKey,o=t.encryptedPayload,l=t.ivb,u=yield(0,g.decryptAesKey)(i,a.keyPair.privateKey);console.info("decrypted aes key",u);var c=yield(0,g.decryptPayload)(u,o,l),f=JSON.parse(c);console.info("decrypted payload",c),f.folderId="new_media",yield(0,s.writeItem)(f);var p=!1;yield(0,s.downloadFileByMedia)(f,(function(e){console.info("download progress",e),w((0,d.setDownloadProgress)(e)),1===e&&(console.info("finished"),p||(p=!0,(0,s.exportFile)(f)))}))}));return function(){return n.apply(this,arguments)}}();return{createBid:function(){w((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Create Bid",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,a.default)((function*(){yield D.mutateAsync(),P()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:o.BidDialogBody,appDialogControls:void 0,appDialogLoading:!1}))},closeAuction:function(){w((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Close Auction",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,a.default)((function*(){yield j.mutateAsync(),P()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"The auction will be closed and the winner will be assigned",appDialogControls:void 0,appDialogLoading:!1}))},currentBid:_,payForAuction:function(){w((0,d.setWinnerPrice)(t.winnerPrice)),w((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Pay For Auction",appDialogIcon:"currency-usd",appDialogOnSelectRight:function(){var e=(0,a.default)((function*(){yield F.mutateAsync(),P()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:y.PayDialogBody,appDialogControls:void 0,appDialogLoading:!1}))},downloadAuctionMedia:x,releaseDownload:function(){w((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Release File",appDialogIcon:"cloud-upload",appDialogOnSelectRight:function(){var e=(0,a.default)((function*(){yield A.mutateAsync(),P()}));return function(){return e.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"The auction file will be released and the winner will be able to download",appDialogControls:void 0,appDialogLoading:!1}))},auctionTransaction:S.data}},r=w(r),a=w(a),v=w(v)}.apply(t,r))||(e.exports=a)},522763:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(466379),n(932779),n(97990),n(926516),n(369871),n(376430),n(532005),n(447690),n(139131),n(351175)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.useCameraActions=function(e,t){var n=(0,p.useNavigateWithAsset)(e),o=(0,f.useAppDispatch)(),y=(0,i.useMicrophonePermissions)(),m=(0,a.default)(y,2),v=m[0],g=m[1],h=(0,f.useAppSelector)((function(e){return e.camera.cameraFacing})),w=(0,f.useAppSelector)((function(e){return e.camera.shootingMode})),P=(0,f.useAppSelector)((function(e){return e.camera.recording})),E=(0,p.useFileSelectOptions)(e).selectImage,I=function(){var e=(0,r.default)((function*(){try{var e,r=yield null==(e=t.current)?void 0:e.takePictureAsync({imageType:"jpg"});if(r){var a=r;a.name=d.default.v4().toString(),a.fileType=c.FileTypeApi.JPG,a.mimeType="image/jpg",console.info("asset",a),n(a)}}catch(l){var i=(null==l?void 0:l.message)||l;o((0,b.setToastText)("photo recording error: "+i))}}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.default)((function*(){try{var e;if(!1===(null==v?void 0:v.granted))if(!1===(yield g()).granted)return void o((0,b.setToastText)("Microphone permission required"));o((0,s.setRecording)(!0));var r=yield null==(e=t.current)?void 0:e.recordAsync({codec:u.VideoCodec.H264});if(r){var a=yield l.getInfoAsync(r.uri,{size:!0}),i=r;i.name=d.default.v4().toString(),i.fileType=c.FileTypeApi.AVI,i.mimeType="video/x-msvideo",i.fileSize=a.size,i.size=a.size,n(i)}}catch(p){var f=(null==p?void 0:p.message)||p;o((0,b.setToastText)("video recording error: "+f))}}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.default)((function*(){var e;o((0,s.setRecording)(!1)),null==(e=t.current)||e.stopRecording()}));return function(){return e.apply(this,arguments)}}();return{stopRecording:O,startVideo:S,toggleCameraFacing:function(){return o((0,s.setFacing)("back"===h?"front":"back"))},makePhoto:I,cameraMode:w,facing:h,recording:P,selectImage:E,switchToPhoto:function(){return o((0,s.setShootingMode)("photo"))},switchToVideo:function(){return o((0,s.setShootingMode)("video"))}}},r=y(r),a=y(a),o=y(o),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(l),d=y(d)}.apply(t,r))||(e.exports=a)},100360:(e,t,n)=>{var r,a;r=[t,n(296540),n(932779),n(269852)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useChatWebRefresh=function(){(0,r.useEffect)((function(){var e=document.querySelectorAll('[data-testid="'+i.TEST_ID.LOADING_WRAPPER+'"]')[0];e&&(e.style.display="none",setTimeout((function(){e.style.display="flex"}),500))}),[])},a=o(a)}.apply(t,r))||(e.exports=a)},730503:(e,t,n)=>{var r,a;r=[t,n(532005),n(351175)],void 0===(a=function(e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.useCloseDialog=function(){var e=(0,n.useAppDispatch)();return{closeDialog:function(){return e((0,r.setAppDialogParams)({appDialogVisible:!1,appDialogBody:void 0,appDialogControls:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogOnSelectLeftt:void 0,appDialogOnSelectRight:void 0,appDialogLoading:!1}))}}}}.apply(t,r))||(e.exports=a)},567501:(e,t,n)=>{var r,a;r=[t,n(29293),n(585715),n(296540),n(837436),n(1672),n(775942),n(992796),n(248389),n(532005),n(898707),n(926516),n(278507),n(932779),n(361866),n(826878),n(14151)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g){"use strict";var h=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useConfirmFile=function(e){var t=e.userId,n=e.folderType,y=e.folderId,h=e.routeName,I=e.projectId,S=e.isEncoderProject,O=(0,i.useState)(!1),_=(0,a.default)(O,2),M=_[0],T=_[1],D=(0,d.useQueryClient)(),j=(0,s.useNavigation)(),C=(0,f.useAppSelector)((function(e){return e.upload})),F=(0,f.useAppDispatch)(),A=C.modalVisible,x=C.file,k=C.media,R=C.uploadToCloud,L=C.shareToWT,B=C.encryption,W=C.isUploadInProgress,N=(0,d.useMutation)((function(e){return(0,u.writeItem)(e)})),z=(null==x?void 0:x.type)||(null==x?void 0:x.mimeType)||(null==k?void 0:k.fileType)||"",U=n===c.FolderType.editor&&"EditorProject"!==h,V=(0,g.useVerifyPremium)(g.STARPY_PLUS),H=(0,i.useState)({quality:V?"FULLHD":"HD",aspectRatio:"16/9",editorTitle:U?"Project "+m.faker.animal.fish():void 0,width:null==x?void 0:x.width,height:null==x?void 0:x.height,duration:v.defaultVideoDuration}),Q=(0,a.default)(H,2),K=Q[0],q=Q[1],J=(0,d.useMutation)((function(e){return(0,l.writeFileOpfs)(Object.assign({},e,K),x)})),G=(null==z?void 0:z.search("image"))>-1,X=(null==z?void 0:z.search("audio"))>-1,Y=(null==z?void 0:z.search("video"))>-1,Z=G,$=(0,d.useMutation)((0,r.default)((function*(){console.info("confirm file for picker file",x);var e=L;"wt"===(null==k?void 0:k.extractor)&&(e=!0),F((0,o.setUploadInProgress)(!0)),T(!0);try{var r,a=JSON.parse(JSON.stringify(k));console.info("isImage="+G,"isAudio="+X,"isVideo="+Y);var i,d=""+(null==k||null==(r=k.url)?void 0:r.replace("file://","")),f=K.width,s=K.height,m=K.aspectRatio,g=((null==K?void 0:K.duration)||v.defaultVideoDuration)-1;a.isDownloaded=!0,a.filename=(0,l.processFileName)(a.filename);try{var h;(i=yield(0,u.getById)(a.folderId))||(i=yield(0,u.getById)(a.folderId,y)),null!=(h=i)&&h.mnemonic&&(e=!0)}catch(re){console.error("err",re)}var O=p.default.v4().toString(),_=void 0;if(U){var M,C;console.info("creating a new editor project from file",K),K.quality||(K.quality="HD");var A=c.qualityToSize[K.quality],R="9/16"===K.aspectRatio,B=R?A.height:A.width,W=R?A.width:A.height;f=B,s=W,_={id:O,title:K.editorTitle||a.title,userId:t,isEditorProject:!0,folderType:n,folderId:y,orderId:1,isFolder:!1,editor:{length:6e4,width:B,height:W,aspectRatio:m,preset:w,output:P,lastUpdated:(new Date).valueOf(),compressionLevel:E,code:[]},mnemonic:null==(M=i)?void 0:M.mnemonic,date:(new Date).valueOf()},yield N.mutateAsync(_);var z={id:p.default.v4().toString(),title:"Layer 1",folderId:_.id,userId:t,isEditorLayer:!0,orderId:1,folderType:n,isFolder:!1,date:(new Date).valueOf(),editor:{videoDisabled:!!X,muted:!!G},mnemonic:null==(C=i)?void 0:C.mnemonic};yield N.mutateAsync(z),a.folderId=z.id,a.isMediaNew=S,a.isEncoderProject=S,a.encoding={end:g,width:f,height:s,preset:w,output:P,compressionLevel:E,soundVolume:100,crf:20,code:[""]}}n===c.FolderType.editor&&(a.encoding={end:g,width:f,height:s,preset:w,output:P,compressionLevel:E,soundVolume:100,crf:20,code:[""]}),n===c.FolderType.shop&&(a.isProduct=!0,a.price=1),e&&(a.extractor="wt"),a.extractor||(a.extractor="local"),yield N.mutateAsync(Object.assign({},Object.assign({},a,{url:void 0}),K)),yield J.mutateAsync(a),delete a.url;var V,H=!1;try{if(n===c.FolderType.editor&&G){var Q,q=yield(0,u.getById)(I),$="video/mp4",ee=Object.assign({},a,K,{fileType:$,type:$}),te=(yield(0,l.generateVideoForImage)(Object.assign({},ee,q?{width:null==q?void 0:q.editor.width,height:null==q?void 0:q.editor.height}:{})),((yield(0,l.getFileOpfs)(a))+".mp4").replace("file://",""));ee.filename=ee.filename+".mp4",ee.url=te,ee.size=null==(Q=yield(0,l.getFileStats)(ee))?void 0:Q.size,console.info("updating image url after processing",ee),yield N.mutateAsync(ee),H=!0}}catch(re){console.error("process image to video err",re)}(X||Y)&&(yield(0,l.generateAudioSpectrogram)(Object.assign({},a,K),"small"));try{if(H)throw"already_did";if(Y&&!U&&(V=yield(0,l.getPreviewFromVideo)(Object.assign({},a,K))),Z&&!U)(V=(yield(0,b.manipulateAsync)(d,[{resize:{width:640}}],{compress:.1,format:b.SaveFormat.JPEG,base64:!0})).uri)&&!U&&(yield(0,u.writeItem)(Object.assign({},a,K,{image:V})))}catch(re){console.error("preview generation error",re)}try{e&&(yield(0,l.shareFileToWT)(a.id,a.folderId,(function(e){var t=e/((null==a?void 0:a.size)/100)/100;F((0,o.setShareProgress)({id:a.id,value:t}))})))}catch(re){console.error("share to wt error",re)}if(a.isChatMedia&&a.mnemonic){var ne=yield(0,u.getById)(a.id,y);yield(0,u.sendChatMessage)(a.folderId,"[media]",a.mnemonic,{image:V,media:Object.assign({},ne,K)})}D.refetchQueries({queryKey:["folderContent_"+a.folderId]}),D.refetchQueries({queryKey:["folderContent_"+y]}),D.refetchQueries({queryKey:["projectLayers",I]}),D.refetchQueries({queryKey:["encodedMedia",I]}),F((0,o.setUploadInProgress)(!1)),F((0,o.setMediaModalVisible)(!1)),y||j.navigate("Folder",{folderId:a.folderId})}catch(re){console.error("media upload modal error",re)}F((0,o.setUploadInProgress)(!1)),T(!1)})));return{isEditorProject:U,confirmFile:$.mutateAsync,processingFile:$.isLoading,setVideoMeta:q,pickerFile:x,pickerFileMeta:k,isUploadInProgress:W,encryptionEnabled:B,mediaModalVisible:A,loading:M,videoMeta:K,uploadToCloud:R,dispatch:F,isVideoType:Y||X,isImageType:Z,fileType:z,hasPlus:V}},r=h(r),a=h(a),p=h(p),y=h(y);var w=c.FFMpegPreset.superfast,P=c.FFMpegOutputType.mp4,E=20}.apply(t,r))||(e.exports=a)},139131:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(296540),n(649681),n(932779),n(513468),n(323725),n(898707),n(4925),n(926516),n(97990),n(961225),n(466379),n(248389),n(532005),n(351175),n(837436),n(992796),n(14151)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b,y,m,v,g,h,w,P){"use strict";var E=n(124994);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function O(e,t){var n=(0,v.useAppDispatch)(),r=function(){var r=(0,a.default)((function*(r){var a,i,o,l=r.uri,d=yield(0,w.getUserData)(),u=(null==(a=r.file)?void 0:a.type)||(null==(i=r.fileType)?void 0:i.toLowerCase())||r.mimeType||r.type,c=r.fileName||r.name;null==(o=c)||o.search("."),console.info("mimeType",u,r,c,c.search("."));var f=r.file||r,p={id:s.default.v4().toString(),url:l,title:c,originalId:c,filename:c,fileType:u,folderId:e,userId:d.id,date:(new Date).valueOf(),isMediaNew:!0,type:u,size:f.size,width:r.width,height:r.height,extractor:"wt",isChatMedia:t};n((0,h.startOnboarding)({file:f,media:p}))}));return function(e){return r.apply(this,arguments)}}();return r}Object.defineProperty(e,"__esModule",{value:!0}),t.useFileSelectOptions=function(e,t,n){var l=(0,P.useVerifyPremium)(P.STARPY_PLUS),p=(0,c.useNavigation)(),h=(0,y.useCameraPermissions)(),w=(0,r.default)(h,2),E=w[0],I=w[1],S=f.usePermissions(),_=(0,r.default)(S,2),M=_[0],T=_[1],D=(0,i.useRef)(null),j=(0,b.useDispatch)(),C=O(e,t),F=(0,c.useRoute)().params,A=(0,v.useAppSelector)((function(e){return e.ui.params})),x=n?A:F,k=(0,v.useAppSelector)((function(e){return e.ui.parentName})),R=function(){var e;null==(e=D.current)||e.close(),o.default.dismiss()},L=function(){var e=(0,a.default)((function*(){try{0;var e=yield d.getDocumentAsync({copyToCacheDirectory:!0,multiple:!1,type:Object.keys(m.fileTypesApi)});if(e.canceled||!e.assets.length)return j((0,g.setToastText)("Nothing selected")),void R();var t=(0,r.default)(e.assets,1)[0];C(t)}catch(a){var n=(null==a?void 0:a.message)||a;j((0,g.setToastText)("Error on selecting document: "+n))}R()}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,a.default)((function*(){try{var e,t=null;if(!1===(null==M?void 0:M.granted)&&(t=yield T()),!1===(null==(e=t)?void 0:e.granted)&&!1===(null==M?void 0:M.granted))return j((0,g.setToastText)("Please grant permission for photo library")),void R();var n=yield u.launchImageLibraryAsync({mediaTypes:u.MediaTypeOptions.All,quality:l?1:.5,videoExportPreset:l?u.VideoExportPreset.Passthrough:u.VideoExportPreset.H264_1280x720,base64:!1,videoQuality:l?u.UIImagePickerControllerQualityType.High:u.UIImagePickerControllerQualityType.IFrame1280x720});if(console.info("picker res",n),n.canceled||!n.assets.length)return j((0,g.setToastText)("Nothing selected")),void R();var a=(0,r.default)(n.assets,1)[0],i=a;i.name="Photo_"+s.default.v4(),i.size=a.fileSize,C(i)}catch(d){var o=(null==d?void 0:d.message)||d;j((0,g.setToastText)("Error on selecting image: "+o))}R()}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,a.default)((function*(){try{var e,t=null;if(!1===(null==E?void 0:E.granted)&&(t=yield I()),!1===(null==(e=t)?void 0:e.granted)&&!1===(null==E?void 0:E.granted))return j((0,g.setToastText)("Please grant permission for camera")),void R();p.navigate(k,{screen:"Camera",params:x})}catch(r){var n=(null==r?void 0:r.message)||r;j((0,g.setToastText)("Error on selecting camera: "+n))}R()}));return function(){return e.apply(this,arguments)}}();return{makePhoto:W,selectImage:B,selectFile:L,showDrawer:function(){var e;null==(e=D.current)||e.open(),o.default.dismiss()},bottomDrawerRef:D}},t.useNavigateWithAsset=O,r=E(r),a=E(a),o=E(o),l=E(l),d=S(d),u=S(u),f=S(f),s=E(s),p=S(p)}.apply(t,r))||(e.exports=a)},637843:(e,t,n)=>{var r,a;r=[t,n(585715),n(29293),n(775942),n(219330),n(296540),n(532005),n(992796),n(276087),n(26288)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useFolder=function(e,t,n,s,p,b,y,m){var v,g,h=(0,d.useAppDispatch)(),w=t||u.getFolderContent,P=n||u.getById,E=p||u.writeItem,I="folderContent_"+e,S=(0,i.useQuery)(I,(0,a.default)((function*(){var t,n;try{n=yield P(e)}catch(a){console.error(a)}!b||!y||null!=(t=n)&&t.id||(n=yield E({id:e,mnemonic:b,title:y,isFolder:!0,folderId:"new_"+s,folderType:s,userId:m}));var r=yield w(e);return h((0,f.setFolderContent)({id:e,content:r})),{folder:n}})),{refetchOnWindowFocus:!0,refetchOnMount:!0,keepPreviousData:!0}),O=(0,o.useMediaPlayer)(e,S),_=(0,d.useAppSelector)((function(t){return t.folders.folderContent[e]})),M=null==(v=S.data)?void 0:v.folder,T=S.isFetching,D=(M&&M.files&&(null==M||null==(g=M.files)||g.map((function(e){return{id:e,url:e,title:e,filename:e,isMediaNew:!0,folderId:M.id,_id:e,date:M.date,originalId:M.originalId,webpage_url:M.webpage_url,thumbnail:M.thumbnail,extractor:M.extractor}}))),(0,l.useRef)(null)),j=(0,l.useState)(""),C=(0,r.default)(j,2),F=C[0],A=C[1],x=(0,c.useFolderMutations)(s,_,S);return Object.assign({},x,{isLoadingFolderContentError:S.error,isLoadingFolderContent:T,isLoadingFolder:T,folderContentQuery:S,folder:M,folderContent:_,folderNameInputRef:D,currentFolderEditorName:F,setFolderEditorName:A,folderType:s,getContentItem:function(e,t){return _[t]},getContentCount:function(){return(null==_?void 0:_.length)||0}},O)},r=s(r),a=s(a)}.apply(t,r))||(e.exports=a)},276087:(e,t,n)=>{var r,a;r=[t,n(443693),n(29293),n(775942),n(532005),n(777782),n(992796),n(351175),n(730503),n(26288)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f){"use strict";var s=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useFolderMutations=function(e,t,n){var s=(0,o.useAppDispatch)(),p=(0,c.useCloseDialog)().closeDialog,b=(0,i.useQueryClient)(),y=(0,o.useAppSelector)((function(e){return e.folders.isEditingFolder})),m=(0,o.useAppSelector)((function(e){return e.folders.isEditingFolderDraft})),v=(0,i.useMutation)(function(){var e=(0,a.default)((function*(e){return yield(0,d.writeItem)(e)}));return function(t){return e.apply(this,arguments)}}()),g=(0,i.useMutation)(function(){var e=(0,a.default)((function*(e){var t=yield(0,d.getById)(e);try{yield(0,d.removeObject)(t)}catch(r){console.error("removeObject error",r)}yield(0,d.writeItem)(Object.assign({},t,{isDeleted:!0})),null==n||n.refetch(),b.refetchQueries("folderContent_"+e),b.refetchQueries("folderContent_"+t.folderId),b.refetchQueries(["projectLayers",t.folderId])}));return function(t){return e.apply(this,arguments)}}()),h=(0,i.useMutation)(function(){var e=(0,a.default)((function*(e){return yield(0,d.writeItem)(e)}));return function(t){return e.apply(this,arguments)}}()),w=function(){var e=(0,a.default)((function*(e){console.info("onRemoveFolder",e),s((0,u.setFolderMenuItemId)({itemId:void 0})),s((0,u.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Folder",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,a.default)((function*(){yield g.mutateAsync(e.id),p()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This folder will remain for other users who may have access",appDialogControls:void 0,appDialogLoading:!1})),console.info("after delete mutation")}));return function(t){return e.apply(this,arguments)}}(),P=function(e){return s((0,f.setEditingFolder)((0,r.default)({},e,!1)))},E=function(e){return s((0,f.setEditingFolder)((0,r.default)({},e,!0)))},I=function(){var e=(0,a.default)((function*(e){if(console.info("isEditingFolder: "+y[e],e),!0===y[e]){var t=yield(0,d.getById)(e);return t.title=m[e],yield h.mutateAsync(t),P(e),void(yield b.refetchQueries("folderData_"+e))}E(e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.default)((function*(e,r){if(console.info("dragend",e,r),t){var a=JSON.parse(JSON.stringify(t));if(e!==r){a[e].orderId=r+1;var i=!!a[r]||void 0;i&&(a[r].orderId=a[r].orderId+1),yield v.mutateAsync(a[e]),i&&(yield v.mutateAsync(a[r])),yield null==n?void 0:n.refetch()}}}));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var t=(0,a.default)((function*(t){s((0,u.setFolderMenuItemId)({itemId:void 0}));var r=t.id,a=t.title,i=t.userId,o=d.domain+"webapp/"+e+"/folder/"+r+"?title="+encodeURIComponent(a)+"&userId="+i+"&mnemonic=";if(t.mnemonic){console.info("folder has mnemonic");var c=o+encodeURIComponent(t.mnemonic);console.info(c),l.default.setString(c)}if(!t.mnemonic){var f=(0,d.genMnemonic)(),p=JSON.parse(JSON.stringify(t));p.mnemonic=f,yield h.mutateAsync(p);var b=o+encodeURIComponent(f);null==n||n.refetch(),l.default.setString(b)}s((0,u.setToastText)("Link to folder has been copied"))}));return function(e){return t.apply(this,arguments)}}();return{onReordered:S,onFolderActionPress:I,editFolder:E,abortEditFolder:P,onRemoveFolder:w,writeItemMutation:v,updateFolderTitleMutation:h,onShareFolder:O}},r=s(r),a=s(a),l=s(l)}.apply(t,r))||(e.exports=a)},676834:(e,t,n)=>{var r,a;r=[t,n(29293),n(248389),n(775942),n(898707),n(992796),n(276087)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useFolders=void 0,r=u(r);t.useFolders=function(e,t,n){var u=(0,o.useRoute)().params,c=null==u?void 0:u.folderId,f=(0,o.useIsFocused)(),s=n||"",p=(0,i.useQuery)("folders_"+e+s,(0,r.default)((function*(){var t=yield(0,l.getFoldersByType)(e,n);return t.find((function(t){return t.id==="new_"+e}))||e===a.FolderType.database||t.unshift({id:"new_"+e,title:"New",isFolder:!0,date:(new Date).valueOf(),userId:"",folderType:e,orderId:0}),t})),{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!0,enabled:!t}),b=p.isFetching,y=(null==p?void 0:p.data)||[{id:"new_"+e,title:"New",isFolder:!0,date:(new Date).valueOf(),userId:"",folderType:e}],m=(0,d.useFolderMutations)(e,y,p);return Object.assign({},m,{folderType:e,currentFolderId:c,getItem:function(e,t){return y[t]},getItemCount:function(){return y.length},loadingFolders:b,folders:y,isFocused:f,isLoadingFolder:p.isLoading})}}.apply(t,r))||(e.exports=a)},193534:(e,t,n)=>{var r,a;r=[t,n(296540),n(649681),n(532005),n(351175)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useKeyboardDispatcher=function(){var e=(0,i.useAppDispatch)();(0,r.useEffect)((function(){return a.default.addListener("keyboardDidShow",(function(t){return e((0,o.setKeyboardHeight)({keyboardHeight:t.endCoordinates.height}))})),a.default.addListener("keyboardDidHide",(function(){return e((0,o.setKeyboardHeight)({keyboardHeight:0}))})),function(){a.default.removeAllListeners("keyboardDidShow"),a.default.removeAllListeners("keyboardDidHide")}}),[])},a=l(a)}.apply(t,r))||(e.exports=a)},926981:(e,t,n)=>{var r,a;r=[t,n(29293),n(992796),n(775942)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.getFullLayers=void 0,t.useLayers=function(e){var t=(0,i.useQuery)(["projectdata",e],(0,r.default)((function*(){return yield(0,a.getById)(e)})),{enabled:!!e}),n=t.data,o=(0,i.useQuery)(["projectLayers",e],(0,r.default)((function*(){return yield l(e)})),{enabled:!!e});return{layers:null==o?void 0:o.data,mediaRes:n,projectQuery:t}},r=o(r);var l=t.getFullLayers=function(){var e=(0,r.default)((function*(e){var t=yield(0,a.getFolderContent)(e),n=yield Promise.all(t.map(function(){var e=(0,r.default)((function*(e){return Object.assign({},e,{media:yield(0,a.getFolderContent)(null==e?void 0:e.id)})}));return function(t){return e.apply(this,arguments)}}()));return n}));return function(t){return e.apply(this,arguments)}}()}.apply(t,r))||(e.exports=a)},219330:(e,t,n)=>{var r,a;r=[t,n(29293),n(964281),n(532005),n(992796),n(950198),n(351175),n(775942),n(730503)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useMediaPlayer=void 0,r=f(r);t.useMediaPlayer=function(e,t){var n=(0,i.useAppSelector)((function(e){return e.media})),f=(0,c.useCloseDialog)().closeDialog,s=(0,i.useAppSelector)((function(e){return e.fs.downloadingProgress})),p=(0,i.useAppDispatch)(),b=function(){var e=(0,r.default)((function*(e){console.info("mediapress",e);try{var t=e.id;p((0,a.stop)()),n.currentMediaId!==t&&""!==t&&p((0,a.play)({actionType:a.MediaActionType.play,mediaId:t,media:e}))}catch(r){console.error("mediapress error",r)}}));return function(t){return e.apply(this,arguments)}}(),y=(0,u.useMutation)(function(){var n=(0,r.default)((function*(n){var r=yield(0,o.getById)(n,e);try{yield(0,o.removeObject)(r)}catch(a){console.error("removeObject error",a)}yield(0,o.writeItem)(Object.assign({},r,{isDeleted:!0})),yield null==t?void 0:t.refetch(),yield o.queryClient.refetchQueries("folderData_"+e)}));return function(e){return n.apply(this,arguments)}}()),m=(0,u.useMutation)(function(){var t=(0,r.default)((function*(t){var n=yield(0,o.getById)(t,e);try{yield(0,o.removeObject)(n)}catch(r){console.error("removeObject error",r)}yield o.queryClient.refetchQueries(["folderData_"+e]),yield o.queryClient.refetchQueries(["isDownloaded",t])}));return function(e){return t.apply(this,arguments)}}()),v=(0,u.useMutation)(function(){var t=(0,r.default)((function*(t){var n=yield(0,o.getById)(t,e);yield(0,o.exportFile)(n)}));return function(e){return t.apply(this,arguments)}}()),g=function(){var t=(0,r.default)((function*(t){console.info("onDownloadMediaPress",t);var n=t;if(!s[n]){p((0,l.setDownloadingProgress)({itemId:n,progress:.01}));try{yield(0,o.downloadFileById)(t,e,(function(e){p((0,l.setDownloadingProgress)({itemId:n,progress:e})),1===e&&o.queryClient.refetchQueries(["isDownloaded",t])}),(function(){return o.queryClient.refetchQueries(["isDownloaded",t])}))}catch(r){console.error(r)}p((0,l.setDownloadingProgress)({itemId:t,progress:void 0}))}}));return function(e){return t.apply(this,arguments)}}();return Object.assign({},n,{onMediaPress:b,onRemoveMediaPress:function(e){p((0,d.setFolderMenuItemId)({itemId:void 0})),p((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Media",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield y.mutateAsync(e),f()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This media will be removed for you and other users who may have access",appDialogControls:void 0,appDialogLoading:!1}))},onDownloadMediaPress:g,onCopyLinkPress:function(e){console.info("onShareMediaPress",e)},onRemoveFile:function(e){p((0,d.setFolderMenuItemId)({itemId:void 0})),p((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Delete Media",appDialogIcon:"delete",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield m.mutateAsync(e),f()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"Only the media file will be removed and only from this device",appDialogControls:void 0,appDialogLoading:!1}))},onExportFile:function(e){p((0,d.setFolderMenuItemId)({itemId:void 0})),p((0,d.setAppDialogParams)({appDialogVisible:!0,appDialogTitle:"Export Media",appDialogIcon:"share",appDialogOnSelectRight:function(){var t=(0,r.default)((function*(){yield v.mutateAsync(e),f()}));return function(){return t.apply(this,arguments)}}(),appDialogOnSelectLeftt:void 0,appDialogBody:"This media will be unencrypted and exported to your device",appDialogControls:void 0,appDialogLoading:!1}))},onEditMediaPress:function(e){console.info("onEditMediaPress",e)}})}}.apply(t,r))||(e.exports=a)},402311:(e,t,n)=>{var r,a;r=[t,n(443693),n(585715),n(29293),n(992796),n(775942),n(898707),n(532005),n(708875)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useMessages=void 0,r=f(r),a=f(a),i=f(i);t.useMessages=function(e){var t,n=(0,u.useAppSelector)((function(t){return t.chat.loadingPagination[e]})),f=(0,u.useAppDispatch)(),s=(0,d.useRoute)(),p=(0,d.useIsFocused)(),b=(0,d.useNavigation)(),y=s.params,m=null==y?void 0:y.mnemonic,v=(null==y?void 0:y.page)||1,g=(0,l.useQuery)("chatMessages_"+e,(0,i.default)((function*(){var t=yield Promise.all([(0,o.getPublicMessages)(e,m,25*v,0)]);return{messages:(0,a.default)(t,1)[0]}})),{retry:!0,refetchInterval:1e4,enabled:p}),h=g.isFetching||n,w=(0,l.useMutation)(function(){var t=(0,i.default)((function*(t){try{var n=yield(0,o.sendChatMessage)(e,t,m);return yield g.refetch(),n}catch(r){console.error("==== sendMessage error ===",r)}}));return function(e){return t.apply(this,arguments)}}(),{retry:!0}),P=(null==(t=g.data)?void 0:t.messages)||[],E=function(){var t=(0,i.default)((function*(){if(!n){var t=parseInt(v.toString(),10)+1;console.info("nextPage",t,h),f((0,c.setPaginationState)((0,r.default)({},e,!0))),b.dispatch(Object.assign({},d.CommonActions.setParams({page:t}),{source:s.key})),yield g.refetch(),setTimeout((function(){f((0,c.setPaginationState)((0,r.default)({},e,!1)))}),2e3)}}));return function(){return t.apply(this,arguments)}}();return{messages:P,nextPage:E,loadingMessages:h,sendingMessage:w.isLoading,messagesError:g.error,sendMessage:w.mutate,isLoadingEarlier:n}}}.apply(t,r))||(e.exports=a)},222481:(e,t,n)=>{var r,a;r=[t,n(29293),n(775942),n(296540),n(898707)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useRouteAuction=void 0,r=l(r);t.useRouteAuction=function(e,t){var n=(0,a.useQueryClient)(),l=(0,o.useRoute)().params,d=l.auctionId,u=l.title,c=l.mnemonic,f=(0,a.useMutation)((0,r.default)((function*(){var e={id:d,isContact:!0,folderId:d,name:u,mnemonic:c};console.info("nauction",e)})),{retry:!0,onSuccess:function(){var e=(0,r.default)((function*(){try{yield n.refetchQueries("auction_"+d),yield n.refetchQueries("current_bid_"+d)}catch(e){console.error("onadd contact error",e)}}));return function(){return e.apply(this,arguments)}}()});(0,i.useMemo)((function(){t||e||f.isLoading||f.mutateAsync().then((0,r.default)((function*(){console.info("after create auction")})))}),[t,e,f])}}.apply(t,r))||(e.exports=a)},762844:(e,t,n)=>{var r,a;r=[t,n(29293),n(775942),n(296540),n(898707),n(992796)],void 0===(a=function(e,r,a,i,o,l){"use strict";var d=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useRouteContact=void 0,r=d(r);t.useRouteContact=function(e,t,n,d){var u=(0,a.useQueryClient)(),c=(0,o.useNavigation)(),f=(0,o.useRoute)(),s=d||f.params,p=s.chatId,b=s.name,y=s.mnemonic,m="new_contact",v=(0,a.useMutation)((0,r.default)((function*(){var e={id:p,isContact:!0,folderId:m,name:b,mnemonic:y};console.info("ncotanct",e),yield(0,l.writeItem)(e)})),{retry:!0,onSuccess:function(){var e=(0,r.default)((function*(){try{yield u.refetchQueries("contact_"+p),c.navigate("Chat",{chatId:p,name:b,parentFolderId:m,mnemonic:y}),yield(0,l.sendChatMessage)(p,n.name+" has joined",y,{system:!0}),yield u.refetchQueries("folderContent_"+m)}catch(e){console.error("onadd contact error",e)}}));return function(){return e.apply(this,arguments)}}()});(0,i.useMemo)((function(){t||e||v.isLoading||v.mutateAsync().then((0,r.default)((function*(){console.info("after create contact")})))}),[t,e,v])}}.apply(t,r))||(e.exports=a)},179360:(e,t,n)=>{var r,a;r=[t,n(29293),n(932779),n(258011),n(255958)],void 0===(a=function(e,r,a,i,o){"use strict";var l=n(124994);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.useShare=function(){var e=function(){var e=(0,r.default)((function*(e){(yield o.isAvailableAsync())&&(yield o.shareAsync("file://"+e,{dialogTitle:"Export File",mimeType:"video/mp4"}))}));return function(t){return e.apply(this,arguments)}}();return{share:e}},r=l(r),a=l(a),i=l(i),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(o)}.apply(t,r))||(e.exports=a)},428716:(e,t,n)=>{var r,a;r=[t,n(585715),n(443693),n(296540)],void 0===(a=function(e,r,a,i){"use strict";var o=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.useUserData=t.UserDataActionType=void 0,r=o(r),a=o(a);var l=t.UserDataActionType=function(e){return e.setUser="setUser",e.setTheme="setTheme",e.setActiveFolder="setActiveFolder",e.setEditingFolder="setEditingFolder",e.setFolderType="setFolderType",e}({}),d=function(e,t){switch(t.actionType){case l.setUser:return Object.assign({},e,{user:t.userData});case l.setActiveFolder:return Object.assign({},e,{currentFolderIds:Object.assign({},e.currentFolderIds||{},(0,a.default)({},t.folderType,t.folderId)),isEditingFolder:Object.assign({},e.isEditingFolder||{},(0,a.default)({},t.folderType,void 0))});case l.setFolderType:return Object.assign({},e,{currentFolderType:t.folderType});case l.setEditingFolder:return Object.assign({},e,{isEditingFolder:Object.assign({},e.isEditingFolder||{},(0,a.default)({},t.folderType,t.folderId)),currentFolderIds:Object.assign({},e.currentFolderIds||{},(0,a.default)({},t.folderType,t.folderId))});default:return e}};t.useUserData=function(){var e=(0,i.useReducer)(d,{user:{},currentFolderIds:{},colors:{},isEditingFolder:{}}),t=(0,r.default)(e,2);return{userDataState:t[0],userDataDispatch:t[1]}}}.apply(t,r))||(e.exports=a)},254168:(e,t,n)=>{var r,a;r=[t,n(94634),n(296540),n(27732),n(248389),n(3510),n(637800),n(122694),n(676834),n(809621),n(898707)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s){"use strict";var p=n(124994);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createChatStack=void 0,r=p(r),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(a),i=p(i),l=p(l),u=p(u);var y=o.FolderType.contact,m=(0,d.createNativeStackNavigator)(),v=(0,a.memo)((function(){return a.default.createElement(l.default,{folderType:y})})),g=(0,a.memo)((function(){return a.default.createElement(u.default,{dataHook:(0,c.useFolders)(y,!1)})}));t.createChatStack=function(){return function(){return a.default.createElement(m.Navigator,{screenOptions:{headerShown:!1}},a.default.createElement(m.Screen,{name:"Contacts",component:g,options:{}}),a.default.createElement(m.Screen,{name:"Chat",component:function(e){return a.default.createElement(i.default,(0,r.default)({},e,{params:(0,s.useRoute)().params}))},options:function(e){e.route;return{}}}),a.default.createElement(m.Screen,{name:"Camera",component:f.CameraScreen,options:function(e){e.route;return{}}}),a.default.createElement(m.Screen,{name:"Folder",component:v,options:function(e){e.route;return{freezeOnBlur:!0}}}))}}}.apply(t,r))||(e.exports=a)},412959:(e,t,n)=>{var r,a;r=[t,n(296540),n(3510),n(248389),n(122694),n(676834),n(29582),n(637800),n(809621)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createEditor=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=f(a),o=f(o),d=f(d);var p=i.FolderType.editor,b=(0,u.createNativeStackNavigator)(),y=(0,r.memo)((function(){return r.default.createElement(a.default,{folderType:p})})),m=(0,r.memo)((function(){return r.default.createElement(o.default,{dataHook:(0,l.useFolders)(p,!1)})}));t.createEditor=function(){var e=(0,r.memo)((function(){return r.default.createElement(d.default,null)}));return function(){return r.default.createElement(b.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(b.Screen,{name:"EditorProjects",options:{orientation:"portrait"},component:m}),r.default.createElement(b.Screen,{name:"EditorProject",options:{orientation:"portrait"},component:e}),r.default.createElement(b.Screen,{name:"Camera",component:c.CameraScreen,options:function(e){e.route;return{}}}),r.default.createElement(b.Screen,{name:"Folder",options:{orientation:"portrait"},component:y}))}}}.apply(t,r))||(e.exports=a)},427814:(e,t,n)=>{var r,a;r=[t,n(296540),n(450264),n(3510),n(248389),n(122694),n(676834),n(805310)],void 0===(a=function(e,r,a,i,o,l,d,u){"use strict";var c=n(124994);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createEncoder=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),i=c(i),l=c(l),u=c(u);var s=o.FolderType.encoder,p=(0,a.createStackNavigator)(),b=(0,r.memo)((function(){return r.default.createElement(i.default,{folderType:s})})),y=(0,r.memo)((function(){return r.default.createElement(l.default,{dataHook:(0,d.useFolders)(s,!1)})}));t.createEncoder=function(){var e=(0,r.memo)((function(){return r.default.createElement(u.default,null)}));return function(){return r.default.createElement(p.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(p.Screen,{name:"EncoderProjects",component:y}),r.default.createElement(p.Screen,{name:"EncoderProject",component:e}),r.default.createElement(p.Screen,{name:"Folder",component:b}))}}}.apply(t,r))||(e.exports=a)},24704:(e,t,n)=>{var r,a;r=[t,n(296540),n(3510),n(248389),n(637800),n(737012),n(122694),n(676834),n(809621)],void 0===(a=function(e,r,a,i,o,l,d,u,c){"use strict";var f=n(124994);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),t.createFileStack=void 0,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(r),a=f(a),d=f(d);var p=i.FolderType.media,b=(0,o.createNativeStackNavigator)(),y=(0,r.memo)((function(){return r.default.createElement(a.default,{folderType:p})})),m=(0,r.memo)((function(){return r.default.createElement(d.default,{dataHook:(0,u.useFolders)(p,!1)})}));t.createFileStack=function(){return function(){return r.default.createElement(b.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(b.Screen,{name:"Files",options:{orientation:"portrait"},component:m}),r.default.createElement(b.Screen,{name:"Camera",options:{orientation:"portrait"},component:c.CameraScreen}),r.default.createElement(b.Screen,{name:"Auction",options:{orientation:"portrait"},component:l.AuctionPage}),r.default.createElement(b.Screen,{name:"Folder",options:{orientation:"portrait"},component:y}))}}}.apply(t,r))||(e.exports=a)},936903:(e,t,n)=>{var r,a;r=[t,n(296540),n(450264),n(643889),n(879537),n(556838),n(899631)],void 0===(a=function(e,r,a,i,o,l,d){"use strict";var u=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createSettings=void 0,r=u(r),i=u(i),o=u(o),l=u(l),d=u(d);var c=function(e){return r.default.createElement(i.default,e)},f=function(e){return r.default.createElement(l.default,e)},s=(0,a.createStackNavigator)();t.createSettings=function(){return function(){return r.default.createElement(s.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(s.Screen,{name:"Settings",component:c}),r.default.createElement(s.Screen,{name:"Devices",component:o.default}),r.default.createElement(s.Screen,{name:"Premium",component:d.default}),r.default.createElement(s.Screen,{name:"Databases",component:f}))}}}.apply(t,r))||(e.exports=a)},451930:(e,t,n)=>{var r,a;r=[t,n(296540),n(3510),n(248389),n(397870),n(637800),n(399142),n(807865),n(444180),n(97759),n(390013),n(235504),n(898707)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.createShopStack=void 0,r=y(r),a=y(a),f=y(f);var m=(0,l.createNativeStackNavigator)(),v=(0,l.createNativeStackNavigator)(),g=i.FolderType.shop,h=function(e){return r.default.createElement(a.default,{folderType:g,mnemonic:e.mnemonic,parentFolderId:e.parentFolderId,folderId:e.folderId})},w=function(){var e=(0,b.useRoute)().params,t=e.mnemonic,n=e.shopId;return r.default.createElement(v.Navigator,null,r.default.createElement(v.Screen,{name:"Categories",options:{orientation:"portrait"},component:function(){return r.default.createElement(h,{mnemonic:t,parentFolderId:n,folderId:n})}}),r.default.createElement(v.Screen,{name:"Product",options:{orientation:"all"},component:o.ShopProduct}),r.default.createElement(v.Screen,{name:"Folder",options:{orientation:"portrait"},component:function(){return r.default.createElement(h,{mnemonic:t,parentFolderId:n})}}),r.default.createElement(v.Screen,{name:"WebEditor",options:{orientation:"portrait"},component:d.WebEditor}),r.default.createElement(v.Screen,{name:"ShopConfig",options:{orientation:"portrait"},component:function(){return r.default.createElement(u.ShopConfig,{shopId:n,mnemonic:t})}}),r.default.createElement(v.Screen,{name:"Orders",options:{orientation:"portrait"},component:function(){return r.default.createElement(c.OrdersPage,{shopId:n,mnemonic:t})}}),r.default.createElement(v.Screen,{name:"Order",options:{orientation:"portrait"},component:function(){return r.default.createElement(f.default,{shopId:n,mnemonic:t})}}),r.default.createElement(v.Screen,{name:"Payouts",options:{orientation:"portrait"},component:function(){return r.default.createElement(s.Payouts,{shopId:n,mnemonic:t})}}))};t.createShopStack=function(){return function(){return r.default.createElement(m.Navigator,{screenOptions:{headerShown:!1,freezeOnBlur:!0}},r.default.createElement(m.Screen,{name:"Shops",options:{orientation:"portrait"},component:p.ShopsList}),r.default.createElement(m.Screen,{name:"Shop",options:{orientation:"portrait"},component:w}))}}}.apply(t,r))||(e.exports=a)},730354:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.linking=void 0;t.linking={prefixes:["starpy://","https://www.starpy.me"],config:{screens:{Starp:{path:"webapp",screens:{FilesTab:{path:"media",screens:{Folder:{path:"folder/:folderId"},Auction:{path:"auction/:auctionId"},Files:{path:"/"}}},SettingsTab:{path:"settings",screens:{Devices:{path:"devices"},Drive:{path:"drive"},Databases:{path:"databases"},Premium:{path:"premium"},Settings:{path:"/"}}},ContactsTab:{path:"contact",screens:{Chat:{path:"chat/:chatId"},Contacts:{path:"/"},Folder:{path:"folder/:folderId"}}},EncoderTab:{path:"encoder",screens:{EncoderProjects:{path:"/"},EncoderProject:{path:"project/:projectId"},Folder:{path:"folder/:folderId"}}},EditorTab:{path:"editor",screens:{EditorProjects:{path:"/"},EditorProject:{path:"project/:projectId"},Folder:{path:"folder/:folderId"}}},ShopTab:{path:"shop",screens:{Shops:{path:"/"},Shop:{path:"/:shopId/:mnemonic",screens:{Categories:{path:"/"},Product:{path:"/product/:productId"},Folder:{path:"/folder/:folderId"},WebEditor:{path:"/webeditor"},ShopConfig:{path:"/config"},Orders:{path:"/orders"},Order:{path:"/order/:orderId"},Payouts:{path:"/payouts"}}}}}}}}}}}.apply(t,[t]))||(e.exports=n)},532005:(e,t,n)=>{var r,a;r=[t,n(961225)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.useAppSelector=t.useAppDispatch=void 0;t.useAppDispatch=n.useDispatch,t.useAppSelector=n.useSelector}.apply(t,r))||(e.exports=a)},453088:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setWinnerPrice=t.setPurchasePrice=t.setPayWallet=t.setDownloadProgress=t.setBidWallet=t.setBidAmount=t.setAuctionWallet=t.setAuctionPrice=t.setAuctionBetStep=t.setAuctioName=t.setAuctioEndDate=t.default=t.AuctionSlice=void 0;var r=t.AuctionSlice=(0,n.createSlice)({name:"fs",initialState:{newAuctionName:"",newAuctionPrice:.01,newAuctionBetStep:.01,bidAmount:.01,newAuctionEndDate:0,newAuctionWallet:"",bidWallet:"",payWallet:"",winnerPrice:0,payAuctionId:"",downloadProgress:0,purchasePrice:""},reducers:{setAuctioName:function(e,t){var n=t.payload;e.newAuctionName=n},setAuctionPrice:function(e,t){var n=t.payload;e.newAuctionPrice=n},setBidAmount:function(e,t){var n=t.payload;e.bidAmount=n},setBidWallet:function(e,t){var n=t.payload;e.bidWallet=n},setAuctioEndDate:function(e,t){var n=t.payload;e.newAuctionEndDate=n},setAuctionWallet:function(e,t){var n=t.payload;e.newAuctionWallet=n},setPayWallet:function(e,t){var n=t.payload;e.payWallet=n},setWinnerPrice:function(e,t){var n=t.payload;e.winnerPrice=n},setAuctionBetStep:function(e,t){var n=t.payload;e.newAuctionBetStep=n},setPurchasePrice:function(e,t){var n=t.payload;e.purchasePrice=n},setDownloadProgress:function(e,t){var n=t.payload;e.downloadProgress=n}}}),a=r.actions;t.setAuctioName=a.setAuctioName,t.setAuctioEndDate=a.setAuctioEndDate,t.setAuctionPrice=a.setAuctionPrice,t.setAuctionWallet=a.setAuctionWallet,t.setAuctionBetStep=a.setAuctionBetStep,t.setBidAmount=a.setBidAmount,t.setBidWallet=a.setBidWallet,t.setPayWallet=a.setPayWallet,t.setWinnerPrice=a.setWinnerPrice,t.setDownloadProgress=a.setDownloadProgress,t.setPurchasePrice=a.setPurchasePrice,t.default=r.reducer}.apply(t,r))||(e.exports=a)},447690:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setShootingMode=t.setRecording=t.setFacing=t.default=void 0;var r=(0,n.createSlice)({name:"camera",initialState:{shootingMode:"photo",cameraFacing:"back",recording:!1},reducers:{setShootingMode:function(e,t){e.shootingMode=t.payload},setFacing:function(e,t){e.cameraFacing=t.payload},setRecording:function(e,t){e.recording=t.payload}}}),a=r.actions;t.setShootingMode=a.setShootingMode,t.setFacing=a.setFacing,t.setRecording=a.setRecording,t.default=r.reducer}.apply(t,r))||(e.exports=a)},708875:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setPaginationState=t.setDraftMessage=t.default=t.chatSlice=void 0;var r=t.chatSlice=(0,n.createSlice)({name:"chat",initialState:{loadingPagination:{},draftMessage:{},messages:{}},reducers:{setPaginationState:function(e,t){var n=Object.keys(t.payload)[0];e.loadingPagination[n]=t.payload[n]},setDraftMessage:function(e,t){var n=t.payload,r=n.id,a=n.content;e.draftMessage[r]=a},addMessage:function(e,t){var n=t.payload,r=n.chatId,a=n.message;e.messages[r]&&(e.messages[r].some((function(e){return e._id.toString()===a._id.toString()?e:void 0}))||e.messages[r].unshift(a))},updateMessage:function(e,t){var n=t.payload,r=n.chatId,a=n.message;e.messages[r].findIndex((function(t,n){if((null==t?void 0:t._id)===(null==a?void 0:a._id))return e.messages[r][n]=a,e.messages[r][n]}))},setMessages:function(e,t){var n=t.payload,r=n.chatId,a=n.messages;e.messages[r]=a}}}),a=r.actions;t.setPaginationState=a.setPaginationState,t.setDraftMessage=a.setDraftMessage,t.default=r.reducer}.apply(t,r))||(e.exports=a)},142020:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setShowEditor=t.setShowConfig=t.setShowComments=t.setScrollPosition=t.setScrollParams=t.setRenderingError=t.setRenderUrl=t.setRenderProgress=t.setPixelsPerSecond=t.setIsRendering=t.setIsPlaying=t.setIsOpen=t.setEncoderProgress=t.setEditorForm=t.setCaretPosition=t.setActiveLayer=t.editorSlice=t.default=t.addNewLogLine=void 0;var r=t.editorSlice=(0,n.createSlice)({name:"editor",initialState:{encoderProgress:0,caretPosition:0,scrollPosition:0,pixelsPerSecond:6,jobs:[],jobsProgress:{},isPlaying:!1,videoCaretPosition:0,videoScrollPosition:0,scrollParams:{totalWidth:0,totalScroll:0},canScroll:!0,activeLayer:"1",prevActiveLayer:"1",scroll:0,totalTime:0,showEditor:!0,showComments:!1,isRendering:!1,renderProgress:0,renderTime:0,ffmpegLogs:"",ffmpegError:!1,isOpen:!0},reducers:{setEncoderProgress:function(e,t){e.encoderProgress=t.payload},setActiveLayer:function(e,t){!0===e.isPlaying&&(e.videoCaretPosition=t.payload.caretPosition,e.videoScrollPosition=t.payload.scrollPosition,e.activeLayer=t.payload.activeLayerId)},setCaretPosition:function(e,t){e.caretPosition=t.payload,!1===e.isPlaying&&(e.videoCaretPosition=t.payload)},setScrollPosition:function(e,t){e.scrollPosition=t.payload,!1===e.isPlaying&&(e.videoScrollPosition=t.payload)},setPixelsPerSecond:function(e,t){e.pixelsPerSecond=t.payload},createBackgroundRenderJob:function(e,t){e.jobs.push(t.payload)},setJobProgress:function(e,t){e.jobsProgress[t.payload.id]=t.payload.progress},setIsPlaying:function(e,t){e.isPlaying=t.payload,!1===t.payload&&(e.videoCaretPosition=e.caretPosition,e.videoScrollPosition=e.scrollPosition)},setTotalTime:function(e,t){e.totalTime=t.payload},setScrollParams:function(e,t){e.scrollParams=t.payload;var n=e.scrollParams.totalScroll>e.scrollParams.totalWidth,r=e.scrollParams.totalScroll-e.scrollParams.totalWidth;e.canScroll!==n&&!1===e.isPlaying&&(e.canScroll=n),e.scroll===r||isNaN(r)||(e.scroll=r)},setShowEditor:function(e,t){e.showEditor=t.payload},setIsOpen:function(e,t){e.isOpen=t.payload},setShowComments:function(e,t){e.showComments=t.payload},setIsRendering:function(e,t){e.isRendering=t.payload,e.isRendering&&(e.ffmpegLogs="",e.ffmpegError=!1)},setRenderUrl:function(e,t){e.renderOutputURL=t.payload},setRenderProgress:function(e,t){e.renderProgress=t.payload.progress,e.renderTime=t.payload.time/1e6,e.caretPosition=e.renderTime*e.pixelsPerSecond,e.videoCaretPosition=e.caretPosition},addNewLogLine:function(e,t){e.ffmpegLogs+="\n"+t.payload,t.payload.toLowerCase().search("error")>-1&&(e.ffmpegError=!0)},setRenderingError:function(e,t){e.ffmpegError=t.payload},setShowConfig:function(e,t){e.showConfig=t.payload},setEditorForm:function(e,t){e.editorForm=t.payload}}}),a=r.actions;t.setEncoderProgress=a.setEncoderProgress,t.setCaretPosition=a.setCaretPosition,t.setScrollPosition=a.setScrollPosition,t.setPixelsPerSecond=a.setPixelsPerSecond,t.setIsPlaying=a.setIsPlaying,t.setScrollParams=a.setScrollParams,t.setActiveLayer=a.setActiveLayer,t.setShowComments=a.setShowComments,t.setShowEditor=a.setShowEditor,t.setIsRendering=a.setIsRendering,t.setRenderUrl=a.setRenderUrl,t.setRenderProgress=a.setRenderProgress,t.addNewLogLine=a.addNewLogLine,t.setShowConfig=a.setShowConfig,t.setEditorForm=a.setEditorForm,t.setRenderingError=a.setRenderingError,t.setIsOpen=a.setIsOpen,t.default=r.reducer}.apply(t,r))||(e.exports=a)},120973:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setEncoderProgress=t.encoderSlice=t.default=void 0;var r=t.encoderSlice=(0,n.createSlice)({name:"encoder",initialState:{encoderProgress:0},reducers:{setEncoderProgress:function(e,t){e.encoderProgress=t.payload}}});t.setEncoderProgress=r.actions.setEncoderProgress,t.default=r.reducer}.apply(t,r))||(e.exports=a)},26288:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setPaginationState=t.setFolderContent=t.setEditingFolderName=t.setEditingFolder=t.folderSlice=t.default=void 0;var r=t.folderSlice=(0,n.createSlice)({name:"folder",initialState:{loadingPagination:{},isEditingFolder:{},isEditingFolderDraft:{},isMenuOpen:{},folderContent:{}},reducers:{setPaginationState:function(e,t){var n=Object.keys(t.payload)[0];e.loadingPagination[n]=t.payload[n]},setEditingFolder:function(e,t){var n=Object.keys(t.payload)[0];e.isEditingFolder[n]=t.payload[n]},setEditingFolderName:function(e,t){var n=Object.keys(t.payload)[0];e.isEditingFolderDraft[n]=t.payload[n]},setIsMenuOpen:function(e,t){var n=Object.keys(t.payload)[0];e.isMenuOpen[n]=t.payload[n]},setFolderContent:function(e,t){e.folderContent[t.payload.id]=t.payload.content}}}),a=r.actions;t.setPaginationState=a.setPaginationState,t.setEditingFolder=a.setEditingFolder,t.setEditingFolderName=a.setEditingFolderName,t.setFolderContent=a.setFolderContent,t.default=r.reducer}.apply(t,r))||(e.exports=a)},950198:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setSharing=t.setDownloadingProgress=t.setDeleteItem=t.default=t.FileSystemSlice=void 0;var r=t.FileSystemSlice=(0,n.createSlice)({name:"fs",initialState:{isDeleting:!1,downloadingProgress:{},sharing:{}},reducers:{setDeleteItem:function(e,t){var n=t.payload.deleteItemId;e.isDeleting=!!n,e.deleteItemId=n},setSharing:function(e,t){var n=t.payload,r=n.itemId,a=n.status;e.sharing[r]=a},setDownloadingProgress:function(e,t){var n=t.payload,r=n.itemId,a=n.progress;e.downloadingProgress[r]=a}}}),a=r.actions;t.setDeleteItem=a.setDeleteItem,t.setDownloadingProgress=a.setDownloadingProgress,t.setSharing=a.setSharing,t.default=r.reducer}.apply(t,r))||(e.exports=a)},964281:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.togglePause=t.stop=t.selectIsPlayingMedia=t.selectIsLoadingMedia=t.selectCurrentMediaId=t.play=t.mediaSlice=t.loaded=t.default=t.MediaActionType=void 0;t.MediaActionType=function(e){return e.stop="stop",e.play="play",e.loaded="loaded",e.pause="pause",e}({});var r=t.mediaSlice=(0,n.createSlice)({name:"media",initialState:{},reducers:{stop:function(e){e.isLoadingMedia=void 0,e.currentMediaId=void 0},play:function(e,t){e.currentMediaId=t.payload.mediaId,e.currentMedia=t.payload.media,e.isLoadingMedia=!0},togglePause:function(e,t){e.isMediaPaused=t.payload.pause},loaded:function(e,t){e.isLoadingMedia=!1,e.isMediaPlaying=!0}}}),a=r.actions;t.stop=a.stop,t.play=a.play,t.loaded=a.loaded,t.togglePause=a.togglePause,t.selectCurrentMediaId=function(e){return e.media.currentMediaId},t.selectIsLoadingMedia=function(e){return e.media.isLoadingMedia},t.selectIsPlayingMedia=function(e){return e.media.isMediaPlaying},t.default=r.reducer}.apply(t,r))||(e.exports=a)},665353:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.shopSlice=t.setEditingParams=t.default=void 0;var r=t.shopSlice=(0,n.createSlice)({name:"shop",initialState:{loadingPagination:{},editingParams:{}},reducers:{setPaginationState:function(e,t){var n=Object.keys(t.payload)[0];e.loadingPagination[n]=t.payload[n]},setEditingParams:function(e,t){var n=Object.keys(t.payload)[0];if(e.editingParams[n]){var r=Object.keys(t.payload[n])[0];e.editingParams[n][r]=t.payload[n][r]}else e.editingParams[n]=t.payload[n]}}});t.setEditingParams=r.actions.setEditingParams,t.default=r.reducer}.apply(t,r))||(e.exports=a)},351175:(e,t,n)=>{var r,a;r=[t,n(829976),n(248389)],void 0===(a=function(e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.setToastText=t.setToastIcon=t.setKeyboardHeight=t.setIsSigned=t.setIsReady=t.setIsEditingProfile=t.setFolderMenuItemId=t.setEditingMode=t.setDialogLoading=t.setCurrentPage=t.setAppDialogParams=t.default=void 0;var a={isTabBarHidden:!1,isKeyboardOpen:!1,keyboardHeight:0,currentPage:"FilesTab",isReady:!1,isSignedIn:!1,params:void 0,isBackEnabled:!1,folderType:r.FolderType.media,isEditing:!1,editingMode:void 0,parentName:"FilesTab",folderItemMenuOpen:void 0,appDialogVisible:!1,appDialogBody:void 0,appDialogIcon:void 0,appDialogTitle:void 0,appDialogControls:void 0,appDialogOnSelectRight:void 0,appDialogOnSelectLeftt:void 0,appDialogLoading:!1,toastText:void 0,toastIcon:"check-circle",isEditingProfile:!1},i=["Chat","EditorProject","Auction","Camera"],o=["Devices","Databases","Drive","Folder","Chat","EncoderProject","EditorProject","Auction","Premium","Product","WebEditor","ShopConfig","Orders","Order","Shop","Camera"],l=(0,n.createSlice)({name:"ui",initialState:a,reducers:{setCurrentPage:function(e,t){var n=t.payload,a=n.currentPage,l=n.params,d=n.parentName;console.info({currentPage:a,parentName:d}),e.currentPage=a,e.params=l,e.parentName=d,i.includes(a)?e.isTabBarHidden=!0:e.isTabBarHidden=!1,o.includes(a)?e.isBackEnabled=!0:e.isBackEnabled=!1;var u=r.FolderType.media;"FilesTab"===a&&(u=r.FolderType.media),"ContactsTab"===a&&(u=r.FolderType.contact),"ContactsTab"===a&&(u=r.FolderType.contact),"Contacts"===a&&(u=r.FolderType.contact),"Chat"===a&&(u=r.FolderType.contact),"SettingsTab"===a&&(u=r.FolderType.settings),"EncoderTab"===a&&(u=r.FolderType.encoder),"EncoderProject"===a&&(u=r.FolderType.encoder),"EditorTab"===a&&(u=r.FolderType.editor),"EditorProject"===a&&(u=r.FolderType.editor),"Devices"===a&&(u=r.FolderType.settings),"Databases"===a&&(u=r.FolderType.settings),"Drive"===a&&(u=r.FolderType.settings),"Settings"===a&&(u=r.FolderType.settings),"Categories"===a&&(u=r.FolderType.shop),"Product"===a&&(u=r.FolderType.shop),"EditorTab"===d&&(u=r.FolderType.editor),"EncoderTab"===d&&(u=r.FolderType.encoder),"ContactsTab"===d&&(u=r.FolderType.contact),"SettingsTab"===d&&(u=r.FolderType.settings),"ShopTab"===d&&(u=r.FolderType.shop),"FilesTab"===d&&(u=r.FolderType.media),e.folderType=u},setFolderMenuItemId:function(e,t){var n=t.payload.itemId;e.folderItemMenuOpen=n},setAppDialogParams:function(e,t){var n=t.payload,r=n.appDialogVisible,a=n.appDialogBody,i=n.appDialogIcon,o=n.appDialogControls,l=n.appDialogOnSelectLeftt,d=n.appDialogOnSelectRight,u=n.appDialogTitle;e.appDialogVisible=r,e.appDialogBody=a,e.appDialogIcon=i,e.appDialogControls=o,e.appDialogOnSelectLeftt=l,e.appDialogOnSelectRight=d,e.appDialogTitle=u},setToastText:function(e,t){var n=t.payload;e.toastText=n},setToastIcon:function(e,t){var n=t.payload;e.toastIcon=n},setDialogLoading:function(e,t){var n=t.payload;e.appDialogLoading=n},setKeyboardHeight:function(e,t){var n=t.payload.keyboardHeight;e.keyboardHeight=n,e.isKeyboardOpen=0!==n},setEditingMode:function(e,t){var n=t.payload;e.editingMode=n,e.isEditing=void 0!==n&&"media"!==n},setIsReady:function(e,t){var n=t.payload;e.isReady=n},setIsSigned:function(e,t){var n=t.payload;e.isSignedIn=n},setIsEditingProfile:function(e,t){var n=t.payload;e.isEditingProfile=n}}}),d=l.actions;t.setCurrentPage=d.setCurrentPage,t.setKeyboardHeight=d.setKeyboardHeight,t.setIsReady=d.setIsReady,t.setIsSigned=d.setIsSigned,t.setEditingMode=d.setEditingMode,t.setFolderMenuItemId=d.setFolderMenuItemId,t.setAppDialogParams=d.setAppDialogParams,t.setToastText=d.setToastText,t.setToastIcon=d.setToastIcon,t.setIsEditingProfile=d.setIsEditingProfile,t.setDialogLoading=d.setDialogLoading,t.default=l.reducer}.apply(t,r))||(e.exports=a)},837436:(e,t,n)=>{var r,a;r=[t,n(829976)],void 0===(a=function(e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.uploadSlice=t.startOnboarding=t.setUploadToCloud=t.setUploadInProgress=t.setShareToWt=t.setShareProgress=t.setMetaForCloud=t.setMediaModalVisible=t.setFileUploadProgress=t.setEncrypt=t.selectIsPlayingMedia=t.selectIsLoadingMedia=t.selectCurrentMediaId=t.default=t.cancel=void 0;var r=t.uploadSlice=(0,n.createSlice)({name:"upload",initialState:{modalVisible:!1,uploadToCloud:!1,persist:!0,shareToWT:!1,encryption:!1,shareProgress:{},isUploadInProgress:!1,totalChunks:0},reducers:{startOnboarding:function(e,t){console.info("start onboarding",t),e.file=t.payload.file,e.media=t.payload.media,e.modalVisible=!0},continue:function(e,t){},cancel:function(e){e.modalVisible=!1},setMediaModalVisible:function(e,t){e.modalVisible=t.payload,t.payload||(e.file=void 0)},setShareProgress:function(e,t){e.shareProgress[t.payload.id]=t.payload.value},setFileUploadProgress:function(e){},setUploadInProgress:function(e,t){e.isUploadInProgress=t.payload},setShareToWt:function(e,t){e.shareToWT=t.payload},setUploadToCloud:function(e,t){e.uploadToCloud=t.payload},setEncrypt:function(e,t){e.encryption=t.payload},setMetaForCloud:function(e,t){e.media.webpage_url=t.payload,e.media.hasCloud=!0,e.media.extractor="cloud",e.media.url=t.payload}}}),a=r.actions;t.startOnboarding=a.startOnboarding,t.cancel=a.cancel,t.setMediaModalVisible=a.setMediaModalVisible,t.setFileUploadProgress=a.setFileUploadProgress,t.setUploadInProgress=a.setUploadInProgress,t.setUploadToCloud=a.setUploadToCloud,t.setEncrypt=a.setEncrypt,t.setShareToWt=a.setShareToWt,t.setMetaForCloud=a.setMetaForCloud,t.setShareProgress=a.setShareProgress,t.selectCurrentMediaId=function(e){return e.media.currentMediaId},t.selectIsLoadingMedia=function(e){return e.media.isLoadingMedia},t.selectIsPlayingMedia=function(e){return e.media.isMediaPlaying},t.default=r.reducer}.apply(t,r))||(e.exports=a)},69544:(e,t,n)=>{var r,a;r=[t,n(829976),n(964281),n(837436),n(142020),n(708875),n(950198),n(120973),n(351175),n(453088),n(26288),n(665353),n(447690)],void 0===(a=function(e,r,a,i,o,l,d,u,c,f,s,p,b){"use strict";var y=n(124994);Object.defineProperty(e,"__esModule",{value:!0}),t.store=void 0,a=y(a),i=y(i),o=y(o),l=y(l),d=y(d),u=y(u),c=y(c),f=y(f),s=y(s),p=y(p),b=y(b);t.store=(0,r.configureStore)({reducer:{media:a.default,upload:i.default,encoder:u.default,chat:l.default,fs:d.default,editor:o.default,ui:c.default,auction:f.default,folders:s.default,shop:p.default,camera:b.default}})}.apply(t,r))||(e.exports=a)},832828:(e,t)=>{var n;void 0===(n=function(){}.apply(t,[]))||(e.exports=n)},271157:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.ChatMessageType=t.ChatMessageStatus=void 0;t.ChatMessageType=function(e){return e.media="media",e.call="call",e.text="text",e.party_request="party_request",e.party_confirmation="party_confirmation",e.party_start="party_start",e.party_join="party_join",e.party_stop="party_stop",e.party_quit="party_quit",e.party_media="party_media",e.party_stop_media="party_media_stop",e.party_media_pause="party_media_pause",e.party_media_unpause="party_media_unpause",e.party_media_sync="party_media_sync",e}({}),t.ChatMessageStatus=function(e){return e.created="created",e.sent="sent",e.delivered="delivered",e.read="read",e}({})}.apply(t,[t]))||(e.exports=n)},376430:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.fileTypesApi=t.MediaFormats=t.ImageFormats=t.FileTypeApi=t.DocumentFormats=void 0;var n=t.FileTypeApi=function(e){return e.PNG="PNG",e.JPEG="JPEG",e.IMG="IMG",e.JPG="JPG",e.GIF="GIF",e.TXT="TXT",e.PDF="PDF",e.DOC="DOC",e.DOCX="DOCX",e.XLS="XLS",e.XLSX="XLSX",e.PPT="PPT",e.PPTX="PPTX",e.AAC="AAC",e.MP3="MP3",e.AVI="AVI",e.M4A="M4A",e.MP4="MP4",e.MOV="MOV",e.PCM="PCM",e.PROTO="PROTO",e.IPS="IPS",e}({});t.ImageFormats=[n.IMG,n.JPEG,n.GIF,n.JPG,n.PNG],t.MediaFormats=[n.AVI,n.M4A,n.MOV,n.MP3,n.AAC,n.PCM],t.DocumentFormats=[n.DOC,n.DOCX,n.PDF,n.XLS,n.XLSX,n.PPT,n.PPTX],t.fileTypesApi={"image/png":n.PNG,"image/jpeg":n.JPEG,"image/jpg":n.JPG,"image/gif":n.GIF,"text/plain":n.TXT,"video/x-msvideo":n.AVI,"audio/mpeg":n.MP3,"audio/aac":n.AAC,"audio/mp4":n.M4A,"video/mp4":n.MP4,"video/quicktime":n.MOV,"application/pdf":n.PDF,"application/vnd.ms-excel":n.XLS,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":n.XLSX,"application/msword":n.DOC,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":n.DOCX,"application/vnd.ms-powerpoint":n.PPT,"application/vnd.openxmlformats-officedocument.presentationml.presentation":n.PPTX}}.apply(t,[t]))||(e.exports=n)},654269:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.FolderType=void 0;t.FolderType=function(e){return e.contact="contact",e.media="media",e.settings="settings",e.encoder="encoder",e.editor="editor",e.database="database",e.auction="auction",e.shop="shop",e}({})}.apply(t,[t]))||(e.exports=n)},909965:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.qualityToSize=t.outputTypes=t.fullOutputTypes=t.aspectRatios=t.FFMpegPreset=t.FFMpegOutputType=void 0;t.FFMpegPreset=function(e){return e.ultrafast="ultrafast",e.superfast="superfast",e.veryfast="veryfast",e.faster="faster",e.fast="fast",e.medium="medium",e}({}),t.FFMpegOutputType=function(e){return e.mp4="mp4",e.gif="gif",e}({});var n=t.outputTypes=["LOW","SD","HD"];t.fullOutputTypes=[].concat(n,["FULLHD"]),t.aspectRatios=["16/9","9/16"],t.qualityToSize={FULLHD:{width:1920,height:1080},HD:{width:1280,height:720},SD:{width:854,height:480},LOW:{width:640,height:360}}}.apply(t,[t]))||(e.exports=n)},799926:(e,t)=>{var n;void 0===(n=function(){}.apply(t,[]))||(e.exports=n)},248389:(e,t,n)=>{var r,a;r=[t,n(271157),n(909965),n(799926),n(654269),n(832828),n(376430)],void 0===(a=function(e,n,r,a,i,o,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d={FTSIndex:!0};t.FTSIndex=void 0,Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))})),Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===r[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}}))})),Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===a[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))})),Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))})),Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))})),Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(d,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))}));t.FTSIndex=function(e){return e.title="titleFTSIndex",e.name="nameFTSIndex",e.text="textFTSIndex",e}({})}.apply(t,r))||(e.exports=a)},596948:(e,t)=>{var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),t.RootStackName=t.RootScreens=void 0;t.RootStackName="Starp",t.RootScreens={ContactsTab:"Contacts",EditorTab:"EditorProjects",FilesTab:"Files",EncoderTab:"EncoderProjects",SettingsTab:"Settings",ShopTab:"Categories"}}.apply(t,[t]))||(e.exports=n)},847790:()=>{},698285:()=>{},838664:()=>{},321638:()=>{},192668:()=>{},715340:()=>{},979838:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],l=!0,d=0;d<r.length;d++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[d])))?r.splice(d--,1):(l=!1,i<o&&(o=i));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="starpyapp:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var l,d;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){l=f;break}}l||(d=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[a];var s=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(s.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=s.bind(null,l.onerror),l.onload=s.bind(null,l.onload),d&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n.b=document.baseURI||self.location.href;var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var o=n.p+n.u(t),l=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,a[1](l)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,l,d]=r,u=0;if(o.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(d)var c=d(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkstarpyapp=self.webpackChunkstarpyapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[849,86,727],(()=>n(400300)));r=n.O(r)})();