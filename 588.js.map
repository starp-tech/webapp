{"version":3,"file":"588.js","mappings":"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Gf,OAAO,CACX,CApBWihD,CAAsBX,EAAMC,EACvC,CAvBeW,CAAeZ,EAAMC,GAEzBD,IAASC,CACpB,C,oWCvFO,SAAShoC,EAAa4oC,EAAO94C,GAChCwE,OAAOu0C,iBAAiBD,EAAMtK,UAAW,CACrCx0B,KAAM,CACFg/B,YAAY,EACZr5C,MAAO,KACH,MAAM,IAAI8O,MAAMzO,EAAQ,IAIxC,C,yFCTA,MAAMi5C,EAAQ,CACV,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KC7DG,SAASnhC,IACZ,OAAO,IAAIohC,CACf,CACA,MAAMA,EACF,GACA,WAAIvnC,GAIA,YAHsBhN,IAAlBiK,MAAK,IACLA,MAAK,EDwDV,SAAsB1O,GACzB,IAAIi5C,EAAQ,GACZ,IAAK,IAAIvvC,EAAI,EAAGA,EAAI1J,IAAU0J,EAC1BuvC,GAKGF,KAASG,KAAKC,SAAWJ,EAAM/4C,SAHtC,OAAOi5C,CACX,CC9D4BG,CAAa,IAE1B1qC,MAAK,CAChB,E","sources":["webpack://starpyapp/./node_modules/@evolu/common-web/dist/NanoIdGeneratorLive.js","webpack://starpyapp/./node_modules/@evolu/common-web/dist/PlatformLive.js","webpack://starpyapp/./node_modules/effect/src/SynchronizedRef.ts","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Sql.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Db.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Diff.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/alter-table-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/create-index-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/create-schema-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/create-table-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-index-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-schema-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-table-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/add-column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/column-definition-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/rename-column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/check-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/references-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/default-value-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/generated-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/default-value-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/on-modify-action-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/column-definition-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/modify-column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/foreign-key-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/foreign-key-constraint-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/add-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/unique-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/alter-column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-column-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-table-executor.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-table-add-foreign-key-constraint-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-table-drop-constraint-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/primary-constraint-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/add-index-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-table-add-index-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/unique-constraint-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/alter-table-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/plugin/immediate-value/immediate-value-transformer.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/create-index-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/create-schema-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/on-commit-action-parse.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/create-table-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/drop-index-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/drop-schema-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/drop-table-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/create-view-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/plugin/immediate-value/immediate-value-plugin.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/create-view-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-view-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/drop-view-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/create-type-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/create-type-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/drop-type-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/drop-type-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/identifier-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/schema/schema.js","webpack://starpyapp/./node_modules/kysely/dist/esm/dynamic/dynamic.js","webpack://starpyapp/./node_modules/kysely/dist/esm/driver/default-connection-provider.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-executor/default-query-executor.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/performance-now.js","webpack://starpyapp/./node_modules/kysely/dist/esm/driver/runtime-driver.js","webpack://starpyapp/./node_modules/kysely/dist/esm/driver/single-connection-provider.js","webpack://starpyapp/./node_modules/kysely/dist/esm/driver/driver.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/log.js","webpack://starpyapp/./node_modules/kysely/dist/esm/kysely.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/compilable.js","webpack://starpyapp/./node_modules/kysely/dist/esm/dialect/dialect-adapter-base.js","webpack://starpyapp/./node_modules/kysely/dist/esm/dialect/sqlite/sqlite-adapter.js","webpack://starpyapp/./node_modules/kysely/dist/esm/driver/dummy-driver.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/operation-node-visitor.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js","webpack://starpyapp/./node_modules/kysely/dist/esm/dialect/sqlite/sqlite-query-compiler.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Socket.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Evolu.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Model.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Platform.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Sqlite.js","webpack://starpyapp/./node_modules/@evolu/common/dist/src/Store.js","webpack://starpyapp/./node_modules/effect/src/Console.ts","webpack://starpyapp/./node_modules/kysely/dist/esm/dynamic/dynamic-reference-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/unary-operation-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/unary-operation-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/json-path-leg-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/json-path-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/tuple-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/cast-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/expression/expression-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/expression/expression-wrapper.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/alias-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/and-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/binary-operation-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/case-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/column-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/using-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/delete-query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/from-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/identifier-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/insert-query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/on-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/join-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/json-operator-chain-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/json-path-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/json-reference-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/limit-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/merge-query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/operation-node-source.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/operation-node-transformer.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/operator-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/or-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/order-by-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/parens-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/primitive-value-list-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/returning-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/explain-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/raw-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/reference-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/schemable-identifier-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/select-all-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/group-by-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/having-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/select-query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/set-operation-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/table-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/update-query-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/value-list-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/value-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/when-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/where-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/binary-operation-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/data-type-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/data-type-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/expression-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/expression/expression.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/join-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/order-by-item-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/order-by-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/partition-by-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/over-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/join-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/partition-by-item-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/partition-by-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/over-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/parse-utils.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/reference-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/selection-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/select-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/table-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/top-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/top-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/value-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/plugin/with-schema/with-schema-transformer.js","webpack://starpyapp/./node_modules/kysely/dist/esm/plugin/with-schema/with-schema-plugin.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/case-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/aggregate-function-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/function-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/aggregate-function-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/function-module.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/no-result-error.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/select-modifier-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/offset-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/group-by-item-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/group-by-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/set-operation-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/fetch-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/fetch-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/select-query-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/values-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/default-insert-value-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/insert-values-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/column-update-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/update-set-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/on-duplicate-key-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/insert-result.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/on-conflict-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/on-conflict-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/insert-query-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/delete-result.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/delete-query-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/update-result.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/update-query-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/common-table-expression-name-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/common-table-expression-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/cte-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/with-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/with-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/operation-node/matched-node.js","webpack://starpyapp/./node_modules/kysely/dist/esm/parser/merge-parser.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/merge-result.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-builder/merge-query-builder.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-creator.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-executor/noop-query-executor.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/deferred.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/log-once.js","webpack://starpyapp/./node_modules/kysely/dist/esm/query-executor/query-executor-base.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/object-utils.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/prevent-await.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/random-string.js","webpack://starpyapp/./node_modules/kysely/dist/esm/util/query-id.js"],"sourcesContent":["import { createNanoIdGeneratorLive } from \"@evolu/common\";\nimport { customAlphabet, nanoid } from \"nanoid\";\nexport const NanoIdGeneratorLive = createNanoIdGeneratorLive(customAlphabet, nanoid);\n","import { AppState, SyncLock, SyncLockAlreadySyncingError, getLockName, } from \"@evolu/common\";\nimport * as Effect from \"effect/Effect\";\nimport * as Layer from \"effect/Layer\";\nexport const AppStateLive = Layer.succeed(AppState, {\n    init: ({ reloadUrl, onRequestSync }) => Effect.sync(() => {\n        if (typeof document === \"undefined\") {\n            return { reset: Effect.void };\n        }\n        const localStorageKey = \"evolu:reloadAllTabs\";\n        const replaceLocation = () => {\n            location.replace(reloadUrl);\n        };\n        window.addEventListener(\"storage\", (e) => {\n            if (e.key === localStorageKey)\n                replaceLocation();\n        });\n        let timer;\n        const handleRequestSyncEvents = () => {\n            if (timer != null)\n                return;\n            onRequestSync();\n            timer = window.setTimeout(() => {\n                timer = null;\n            }, 50);\n        };\n        window.addEventListener(\"online\", handleRequestSyncEvents);\n        document.addEventListener(\"visibilitychange\", () => {\n            if (document.visibilityState !== \"hidden\")\n                handleRequestSyncEvents();\n        });\n        window.addEventListener(\"focus\", handleRequestSyncEvents);\n        const reset = Effect.sync(() => {\n            localStorage.setItem(localStorageKey, Date.now().toString());\n            replaceLocation();\n        });\n        return { reset };\n    }),\n});\nexport const SyncLockLive = Layer.succeed(SyncLock, {\n    tryAcquire: Effect.gen(function* () {\n        yield* Effect.logTrace(\"SyncLock tryAcquire\");\n        const lockName = yield* getLockName(\"SyncLock\");\n        const acquire = Effect.async((resume) => {\n            navigator.locks.request(lockName, { ifAvailable: true }, (lock) => {\n                if (lock == null) {\n                    Effect.logTrace(\"SyncLock not acquired\").pipe(Effect.zipRight(Effect.fail(new SyncLockAlreadySyncingError())), resume);\n                    return;\n                }\n                return new Promise((resolve) => {\n                    Effect.logTrace(\"SyncLock acquired\").pipe(Effect.zipRight(Effect.succeed({\n                        release: Effect.logTrace(\"SyncLock released\").pipe(Effect.tap(Effect.sync(resolve))),\n                    })), resume);\n                });\n            });\n        });\n        const release = ({ release }) => release;\n        return yield* Effect.acquireRelease(acquire, release);\n    }),\n});\n","/**\n * @since 2.0.0\n */\nimport type * as Effect from \"./Effect.js\"\nimport * as circular from \"./internal/effect/circular.js\"\nimport * as ref from \"./internal/ref.js\"\nimport * as internal from \"./internal/synchronizedRef.js\"\nimport type * as Option from \"./Option.js\"\nimport type * as Ref from \"./Ref.js\"\nimport type * as Types from \"./Types.js\"\n\n/**\n * @since 2.0.0\n * @category symbols\n */\nexport const SynchronizedRefTypeId: unique symbol = circular.SynchronizedTypeId\n\n/**\n * @since 2.0.0\n * @category symbols\n */\nexport type SynchronizedRefTypeId = typeof SynchronizedRefTypeId\n\n/**\n * @since 2.0.0\n * @category models\n */\nexport interface SynchronizedRef<in out A> extends SynchronizedRef.Variance<A>, Ref.Ref<A> {\n  modifyEffect<B, E, R>(f: (a: A) => Effect.Effect<readonly [B, A], E, R>): Effect.Effect<B, E, R>\n}\n\n/**\n * @since 2.0.0\n */\nexport declare namespace SynchronizedRef {\n  /**\n   * @since 2.0.0\n   * @category models\n   */\n  export interface Variance<in out A> {\n    readonly [SynchronizedRefTypeId]: {\n      readonly _A: Types.Invariant<A>\n    }\n  }\n}\n\n/**\n * @since 2.0.0\n * @category constructors\n */\nexport const make: <A>(value: A) => Effect.Effect<SynchronizedRef<A>> = circular.makeSynchronized\n\n/**\n * @since 2.0.0\n * @category getters\n */\nexport const get: <A>(self: SynchronizedRef<A>) => Effect.Effect<A> = ref.get\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const getAndSet: {\n  <A>(value: A): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, value: A): Effect.Effect<A>\n} = ref.getAndSet\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const getAndUpdate: {\n  <A>(f: (a: A) => A): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, f: (a: A) => A): Effect.Effect<A>\n} = ref.getAndUpdate\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const getAndUpdateEffect: {\n  <A, R, E>(f: (a: A) => Effect.Effect<A, E, R>): (self: SynchronizedRef<A>) => Effect.Effect<A, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R>\n} = internal.getAndUpdateEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const getAndUpdateSome: {\n  <A>(pf: (a: A) => Option.Option<A>): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>): Effect.Effect<A>\n} = ref.getAndUpdateSome\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const getAndUpdateSomeEffect: {\n  <A, R, E>(pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>): (self: SynchronizedRef<A>) => Effect.Effect<A, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>): Effect.Effect<A, E, R>\n} = internal.getAndUpdateSomeEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const modify: {\n  <A, B>(f: (a: A) => readonly [B, A]): (self: SynchronizedRef<A>) => Effect.Effect<B>\n  <A, B>(self: SynchronizedRef<A>, f: (a: A) => readonly [B, A]): Effect.Effect<B>\n} = internal.modify\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const modifyEffect: {\n  <A, B, E, R>(f: (a: A) => Effect.Effect<readonly [B, A], E, R>): (self: SynchronizedRef<A>) => Effect.Effect<B, E, R>\n  <A, B, E, R>(self: SynchronizedRef<A>, f: (a: A) => Effect.Effect<readonly [B, A], E, R>): Effect.Effect<B, E, R>\n} = internal.modifyEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const modifySome: {\n  <B, A>(\n    fallback: B,\n    pf: (a: A) => Option.Option<readonly [B, A]>\n  ): (self: Ref.Ref<A>) => Effect.Effect<B>\n  <A, B>(\n    self: Ref.Ref<A>,\n    fallback: B,\n    pf: (a: A) => Option.Option<readonly [B, A]>\n  ): Effect.Effect<B>\n} = ref.modifySome\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const modifySomeEffect: {\n  <A, B, R, E>(\n    fallback: B,\n    pf: (a: A) => Option.Option<Effect.Effect<readonly [B, A], E, R>>\n  ): (self: SynchronizedRef<A>) => Effect.Effect<B, E, R>\n  <A, B, R, E>(\n    self: SynchronizedRef<A>,\n    fallback: B,\n    pf: (a: A) => Option.Option<Effect.Effect<readonly [B, A], E, R>>\n  ): Effect.Effect<B, E, R>\n} = internal.modifySomeEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const set: {\n  <A>(value: A): (self: Ref.Ref<A>) => Effect.Effect<void>\n  <A>(self: Ref.Ref<A>, value: A): Effect.Effect<void>\n} = ref.set\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const setAndGet: {\n  <A>(value: A): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, value: A): Effect.Effect<A>\n} = ref.setAndGet\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const update: {\n  <A>(f: (a: A) => A): (self: Ref.Ref<A>) => Effect.Effect<void>\n  <A>(self: Ref.Ref<A>, f: (a: A) => A): Effect.Effect<void>\n} = ref.update\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateEffect: {\n  <A, R, E>(f: (a: A) => Effect.Effect<A, E, R>): (self: SynchronizedRef<A>) => Effect.Effect<void, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>): Effect.Effect<void, E, R>\n} = internal.updateEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateAndGet: {\n  <A>(f: (a: A) => A): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, f: (a: A) => A): Effect.Effect<A>\n} = ref.updateAndGet\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateAndGetEffect: {\n  <A, R, E>(f: (a: A) => Effect.Effect<A, E, R>): (self: SynchronizedRef<A>) => Effect.Effect<A, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R>\n} = internal.updateAndGetEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateSome: {\n  <A>(f: (a: A) => Option.Option<A>): (self: Ref.Ref<A>) => Effect.Effect<void>\n  <A>(self: Ref.Ref<A>, f: (a: A) => Option.Option<A>): Effect.Effect<void>\n} = ref.updateSome\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateSomeEffect: {\n  <A, R, E>(\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ): (self: SynchronizedRef<A>) => Effect.Effect<void, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>): Effect.Effect<void, E, R>\n} = internal.updateSomeEffect\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateSomeAndGet: {\n  <A>(pf: (a: A) => Option.Option<A>): (self: Ref.Ref<A>) => Effect.Effect<A>\n  <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>): Effect.Effect<A>\n} = ref.updateSomeAndGet\n\n/**\n * @since 2.0.0\n * @category utils\n */\nexport const updateSomeAndGetEffect: {\n  <A, R, E>(pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>): (self: SynchronizedRef<A>) => Effect.Effect<A, E, R>\n  <A, R, E>(self: SynchronizedRef<A>, pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>): Effect.Effect<A, E, R>\n} = circular.updateSomeAndGetEffectSynchronized\n\n/**\n * @since 2.0.0\n * @category unsafe\n */\nexport const unsafeMake: <A>(value: A) => SynchronizedRef<A> = circular.unsafeMakeSynchronized\n","export const selectOwner = {\n    sql: `select \"id\", \"mnemonic\", \"encryptionKey\" from \"evolu_owner\"`,\n};\nexport const createMessageTable = {\n    sql: `create table \"evolu_message\" (\"timestamp\" blob primary key, \"table\" blob, \"row\" blob, \"column\" blob, \"value\" blob)`,\n};\nexport const createMessageTableIndex = {\n    sql: `create index \"index_evolu_message\" on \"evolu_message\" (\"table\", \"row\", \"column\", \"timestamp\" desc)`,\n};\nexport const createOwnerTable = {\n    sql: `create table \"evolu_owner\" (\"id\" blob, \"mnemonic\" blob, \"encryptionKey\" blob, \"timestamp\" blob, \"merkleTree\" blob)`,\n};\nexport const insertOwner = {\n    sql: `insert into \"evolu_owner\" (\"id\", \"mnemonic\", \"encryptionKey\", \"timestamp\", \"merkleTree\") values (?, ?, ?, ?, ?)`,\n};\nexport const selectOwnerTimestampAndMerkleTree = {\n    sql: `select \"timestamp\", \"merkleTree\" from \"evolu_owner\"`,\n};\nexport const selectLastTimestampForTableRowColumn = {\n    sql: `select \"timestamp\" from \"evolu_message\" where \"table\" = ? and \"row\" = ? and \"column\" = ? order by \"timestamp\" desc limit ?`,\n};\nexport const insertIntoMessagesIfNew = {\n    sql: `insert into \"evolu_message\" (\"timestamp\", \"table\", \"row\", \"column\", \"value\") values (?, ?, ?, ?, ?) on conflict do nothing`,\n};\nexport const updateOwnerTimestampAndMerkleTree = {\n    sql: `update \"evolu_owner\" set \"merkleTree\" = ?, \"timestamp\" = ?`,\n};\nexport const selectMessagesToSync = {\n    sql: `select * from \"evolu_message\" where \"timestamp\" >= ? order by \"timestamp\"`,\n};\n","import * as S from \"@effect/schema/Schema\";\nimport * as Arr from \"effect/Array\";\nimport * as Console from \"effect/Console\";\nimport * as Context from \"effect/Context\";\nimport * as Deferred from \"effect/Deferred\";\nimport * as Effect from \"effect/Effect\";\nimport { constVoid, pipe } from \"effect/Function\";\nimport * as Option from \"effect/Option\";\nimport * as Predicate from \"effect/Predicate\";\nimport * as Ref from \"effect/Ref\";\nimport * as Schedule from \"effect/Schedule\";\nimport * as String from \"effect/String\";\nimport * as SynchronizedRef from \"effect/SynchronizedRef\";\nimport { Time, diffMerkleTrees, initialMerkleTree, insertIntoMerkleTree, makeInitialTimestamp, makeSyncTimestamp, merkleTreeToString, receiveTimestamp, sendTimestamp, timestampToString, unsafeTimestampFromString, } from \"./Crdt.js\";\nimport { NanoIdGenerator } from \"./Crypto.js\";\nimport { makePatches } from \"./Diff.js\";\nimport { ensureTransferableError, makeUnexpectedError, } from \"./Error.js\";\nimport { cast } from \"./Model.js\";\nimport { Owner, makeOwner } from \"./Owner.js\";\nimport { SyncLock } from \"./Platform.js\";\nimport * as Sql from \"./Sql.js\";\nimport { Sqlite, SqliteFactory, drawSqliteQueryPlan, isJsonObjectOrArray, } from \"./Sqlite.js\";\nimport { Sync, SyncFactory, } from \"./Sync.js\";\nexport const Index = S.Struct({\n    name: S.String,\n    sql: S.String,\n});\nexport class DbFactory extends Context.Tag(\"DbFactory\")() {\n}\nexport const createDb = Effect.gen(function* () {\n    const { createSqlite } = yield* SqliteFactory;\n    const { createSync } = yield* SyncFactory;\n    const initContext = Context.empty().pipe(Context.add(NanoIdGenerator, yield* NanoIdGenerator), Context.add(Time, yield* Time), Context.add(SyncLock, yield* SyncLock));\n    const afterInitContext = yield* Deferred.make();\n    const afterInit = (options) => (effect) => Effect.flatMap(Deferred.await(afterInitContext), (context) => Effect.flatMap(Sqlite, (sqlite) => sqlite.transaction(options.transaction)(effect)).pipe(Effect.provide(context)));\n    const queryRowsRef = yield* SynchronizedRef.make(new Map());\n    const db = {\n        init: (schema, initialData, onError, onSyncStateChange, onReceive, mnemonic) => Effect.gen(function* () {\n            yield* Effect.logDebug([\"Db init\", { schema }]);\n            const sqlite = yield* createSqlite;\n            const contextWithSqlite = Context.add(initContext, Sqlite, sqlite);\n            const owner = yield* getSchema.pipe(Effect.tap(ensureSchema(schema)), Effect.flatMap((currentSchema) => {\n                if (currentSchema.tables.map((t) => t.name).includes(\"evolu_owner\"))\n                    return readOwner;\n                return createOwner(mnemonic).pipe(Effect.tap(applyMutations(initialData)));\n            }), sqlite.transaction(\"exclusive\"), Effect.provide(contextWithSqlite));\n            const sync = yield* createSync.pipe(Effect.provide(initContext));\n            yield* sync.init(owner);\n            Deferred.unsafeDone(afterInitContext, Effect.succeed(contextWithSqlite.pipe(Context.add(Owner, owner), Context.add(Sync, sync), Context.add(Callbacks, { onError, onSyncStateChange, onReceive }))));\n            return owner;\n        }),\n        loadQueries: (queries) => Effect.logDebug([\"Db loadQueries\", { queries }]).pipe(Effect.zipRight(loadQueries(queries, queryRowsRef)), afterInit({ transaction: \"shared\" })),\n        mutate: (mutations, queriesToRefresh) => Effect.gen(function* () {\n            yield* Effect.logDebug([\"Db mutate\", { mutations, queriesToRefresh }]);\n            const time = yield* Time;\n            const sqlite = yield* Sqlite;\n            const [toSyncMutations, localOnlyMutations] = Arr.partition(mutations, \n            /** Table name starting with '_' is local only (not synced). */\n            (mutation) => mutation.table.startsWith(\"_\"));\n            for (const mutation of localOnlyMutations) {\n                const isDeleteMutation = mutationToNewMessages(mutation).some(({ column, value }) => column === \"isDeleted\" && value === 1);\n                if (isDeleteMutation) {\n                    yield* sqlite.exec({\n                        sql: `delete from \"${mutation.table}\" where \"id\" = ?;`,\n                        parameters: [mutation.id],\n                    });\n                }\n                else {\n                    const messages = mutationToNewMessages(mutation);\n                    for (const message of messages) {\n                        const now = yield* time.now;\n                        yield* upsertValueIntoTableRowColumn(message, messages, now);\n                    }\n                }\n            }\n            if (toSyncMutations.length > 0) {\n                yield* Effect.tap(applyMutations(toSyncMutations), forkSync);\n            }\n            return yield* loadQueries(queriesToRefresh, queryRowsRef);\n        }).pipe(afterInit({ transaction: \"exclusive\" })),\n        resetOwner: () => Effect.logTrace(\"Db resetOwner\").pipe(Effect.tap(dropAllTables), afterInit({ transaction: \"last\" })),\n        restoreOwner: (schema, mnemonic) => Effect.logTrace(\"Db restoreOwner\").pipe(Effect.tap(dropAllTables), Effect.tap(Effect.flatMap(getSchema, ensureSchema(schema))), Effect.tap(createOwner(mnemonic)), afterInit({ transaction: \"last\" })),\n        ensureSchema: (schema) => getSchema.pipe(Effect.flatMap(ensureSchema(schema)), afterInit({ transaction: \"exclusive\" })),\n        sync: (queriesToRefresh) => Effect.logDebug([\"Db sync\", { queriesToRefresh }]).pipe(Effect.zipRight(forkSync()), Effect.zipRight(loadQueries(queriesToRefresh, queryRowsRef)), afterInit({ transaction: \"shared\" })),\n        exportDatabase: () => Effect.logTrace(\"Db exportDatabase\").pipe(Effect.zipRight(Sqlite), Effect.flatMap((sqlite) => sqlite.export()), afterInit({ transaction: \"exclusive\" })),\n        // TODO:\n        // dispose: () =>\n        //   Effect.logTrace(\"Db dispose\").pipe(\n        //     Effect.tap(Scope.close(scope, Exit.succeed(\"Db disposed\"))),\n        //     afterInit({ transaction: \"last\" }),\n        //   ),\n    };\n    return db;\n});\nexport const Callbacks = Context.GenericTag(\"Callbacks\");\nconst loadQueries = (queries, queryRowsRef) => Effect.gen(function* () {\n    const sqlite = yield* Sqlite;\n    const previousState = yield* SynchronizedRef.getAndUpdateEffect(queryRowsRef, (previousState) => Effect.map(Effect.forEach(queries, (query) => {\n        const sqliteQuery = deserializeQuery(query);\n        return sqlite.exec(sqliteQuery).pipe(Effect.tap(maybeExplainQueryPlan(sqliteQuery)), Effect.map(({ rows }) => [query, rows]));\n    }), (queriesRows) => new Map([...previousState, ...queriesRows])));\n    const currentState = yield* SynchronizedRef.get(queryRowsRef);\n    return queries.map((query) => ({\n        query,\n        patches: makePatches(previousState.get(query), currentState.get(query) || []),\n    }));\n});\nconst maybeExplainQueryPlan = (sqliteQuery) => {\n    if (!sqliteQuery.options?.logExplainQueryPlan)\n        return Effect.void;\n    return Sqlite.pipe(Effect.flatMap((sqlite) => sqlite.exec({\n        ...sqliteQuery,\n        sql: `EXPLAIN QUERY PLAN ${sqliteQuery.sql}`,\n    })), Effect.tap(Console.log(\"ExplainQueryPlan\", sqliteQuery)), Effect.tap(({ rows }) => Console.log(drawSqliteQueryPlan(rows))), Effect.map(constVoid));\n};\nconst getSchema = Effect.gen(function* (_) {\n    yield* Effect.logTrace(\"Db getSchema\");\n    const sqlite = yield* Sqlite;\n    const tables = yield* Effect.map(sqlite.exec({\n        // https://til.simonwillison.net/sqlite/list-all-columns-in-a-database\n        sql: `\nselect\n  sqlite_master.name as tableName,\n  table_info.name as columnName\nfrom\n  sqlite_master\n  join pragma_table_info(sqlite_master.name) as table_info\n    `.trim(),\n    }), ({ rows }) => {\n        const map = new Map();\n        rows.forEach((row) => {\n            const { tableName, columnName } = row;\n            if (!map.has(tableName))\n                map.set(tableName, []);\n            map.get(tableName)?.push(columnName);\n        });\n        return globalThis.Array.from(map, ([name, columns]) => ({\n            name,\n            columns,\n        }));\n    });\n    const indexes = yield* Effect.map(sqlite.exec({\n        sql: `\nselect\n  name, sql\nfrom\n  sqlite_master\nwhere\n  type='index' and\n  name not like 'sqlite_%' and\n  name not like 'index_evolu_%'\n`.trim(),\n    }), (result) => Arr.map(result.rows, (row) => ({\n        name: row.name,\n        /**\n         * SQLite returns \"CREATE INDEX\" for \"create index\" for some reason.\n         * Other keywords remain unchanged. We have to normalize the casing\n         * for `indexEquivalence` manually.\n         */\n        sql: row.sql.replace(\"CREATE INDEX\", \"create index\"),\n    })));\n    return { tables, indexes };\n});\nconst ensureSchema = (newSchema) => (currentSchema) => Effect.gen(function* () {\n    yield* Effect.logTrace(\"Db ensureSchema\");\n    const sql = [];\n    newSchema.tables.forEach((table) => {\n        const currentTable = currentSchema.tables.find((t) => t.name === table.name);\n        if (!currentTable) {\n            sql.push(`\n  create table ${table.name} (\n    \"id\" text primary key,\n    ${table.columns\n                .filter((c) => c !== \"id\")\n                // \"A column with affinity BLOB does not prefer one storage class over another\n                // and no attempt is made to coerce data from one storage class into another.\"\n                // https://www.sqlite.org/datatype3.html\n                .map((name) => `\"${name}\" blob`)\n                .join(\", \")}\n  );`.trim());\n        }\n        else {\n            Arr.differenceWith(String.Equivalence)(table.columns, currentTable.columns).forEach((newColumn) => {\n                sql.push(`alter table \"${table.name}\" add column \"${newColumn}\" blob;`);\n            });\n        }\n    });\n    // Remove old indexes.\n    Arr.differenceWith(indexEquivalence)(currentSchema.indexes, Arr.intersectionWith(indexEquivalence)(currentSchema.indexes, newSchema.indexes)).forEach((indexToDrop) => {\n        sql.push(`drop index \"${indexToDrop.name}\";`);\n    });\n    // Add new indexes.\n    Arr.differenceWith(indexEquivalence)(newSchema.indexes, currentSchema.indexes).forEach((newIndex) => {\n        sql.push(`${newIndex.sql};`);\n    });\n    if (sql.length > 0) {\n        const sqlite = yield* Sqlite;\n        yield* sqlite.exec({ sql: sql.join(\"\\n\") });\n    }\n});\nconst indexEquivalence = (self, that) => self.name === that.name && self.sql === that.sql;\nconst readOwner = Effect.logTrace(\"Db readOwner\").pipe(Effect.zipRight(Sqlite), Effect.flatMap((sqlite) => sqlite.exec(Sql.selectOwner)), Effect.map(({ rows: [row] }) => ({\n    id: row.id,\n    mnemonic: row.mnemonic,\n    encryptionKey: row.encryptionKey,\n})));\nconst createOwner = (mnemonic) => Effect.logTrace(\"Db createOwner\").pipe(Effect.zipRight(Effect.all([makeOwner(mnemonic), Sqlite, makeInitialTimestamp])), Effect.tap(([owner, sqlite, initialTimestampString]) => Effect.all([\n    sqlite.exec(Sql.createMessageTable),\n    sqlite.exec(Sql.createMessageTableIndex),\n    sqlite.exec(Sql.createOwnerTable),\n    sqlite.exec({\n        ...Sql.insertOwner,\n        parameters: [\n            owner.id,\n            owner.mnemonic,\n            owner.encryptionKey,\n            timestampToString(initialTimestampString),\n            merkleTreeToString(initialMerkleTree),\n        ],\n    }),\n])), Effect.map(([owner]) => owner));\nconst applyMutations = (mutations) => Effect.gen(function* (_) {\n    const { timestamp, merkleTree } = yield* readTimestampAndMerkleTree;\n    const [nextTimestamp, messages] = yield* Effect.mapAccum(mutations.flatMap(mutationToNewMessages), timestamp, (currentTimestamp, newMessage) => Effect.map(sendTimestamp(currentTimestamp), (nextTimestamp) => {\n        const message = {\n            ...newMessage,\n            timestamp: timestampToString(nextTimestamp),\n        };\n        return [nextTimestamp, message];\n    }));\n    const nextMerkleTree = yield* applyMessages(merkleTree, messages);\n    yield* writeTimestampAndMerkleTree(nextTimestamp, nextMerkleTree);\n    return messages;\n});\nconst readTimestampAndMerkleTree = Sqlite.pipe(Effect.flatMap((sqlite) => sqlite.exec(Sql.selectOwnerTimestampAndMerkleTree)), Effect.map(({ rows: [{ timestamp, merkleTree }] }) => ({\n    timestamp: unsafeTimestampFromString(timestamp),\n    merkleTree: merkleTree,\n})));\nconst mutationToNewMessages = (mutation) => pipe(Object.entries(mutation.values), Arr.filterMap(([column, value]) => \n// The value can be undefined if exactOptionalPropertyTypes isn't true.\n// Don't insert nulls because null is the default value.\nvalue === undefined || (mutation.isInsert && value == null)\n    ? Option.none()\n    : Option.some([column, value])), Arr.map(([column, value]) => ({\n    table: mutation.table,\n    row: mutation.id,\n    column,\n    value: typeof value === \"boolean\"\n        ? cast(value)\n        : value instanceof Date\n            ? cast(value)\n            : value,\n})));\nconst applyMessages = (merkleTree, messages) => Effect.gen(function* () {\n    const sqlite = yield* Sqlite;\n    for (const message of messages) {\n        const messageTimestamp = unsafeTimestampFromString(message.timestamp);\n        const lastTimestamp = yield* Effect.map(sqlite.exec({\n            ...Sql.selectLastTimestampForTableRowColumn,\n            parameters: [message.table, message.row, message.column, 1],\n        }), ({ rows }) => rows.length > 0 ? rows[0].timestamp : null);\n        if (lastTimestamp == null || lastTimestamp < message.timestamp) {\n            yield* upsertValueIntoTableRowColumn(message, messages, messageTimestamp.millis);\n        }\n        if (lastTimestamp == null || lastTimestamp !== message.timestamp) {\n            const { changes } = yield* sqlite.exec({\n                ...Sql.insertIntoMessagesIfNew,\n                parameters: [\n                    message.timestamp,\n                    message.table,\n                    message.row,\n                    message.column,\n                    message.value,\n                ],\n            });\n            if (changes === 1)\n                merkleTree = insertIntoMerkleTree(merkleTree, messageTimestamp);\n        }\n    }\n    return merkleTree;\n});\nexport const upsertValueIntoTableRowColumn = (message, messages, millis) => Sqlite.pipe(Effect.map((sqlite) => {\n    const now = cast(new Date(millis));\n    return sqlite.exec({\n        sql: `\n    insert into\n      \"${message.table}\" (\"id\", \"${message.column}\", \"createdAt\", \"updatedAt\")\n    values\n      (?, ?, ?, ?)\n    on conflict do update set\n      \"${message.column}\" = ?,\n      \"updatedAt\" = ?\n        `.trim(),\n        parameters: [message.row, message.value, now, now, message.value, now],\n    });\n}), Effect.flatMap((insert) => Effect.catchSomeDefect(insert, (error) => S.is(SqliteNoSuchTableOrColumnError)(error)\n    ? Option.some(\n    // If one message fails, we ensure schema for all messages.\n    ensureSchemaByNewMessages(messages).pipe(Effect.zipRight(insert)))\n    : Option.none())));\nconst SqliteNoSuchTableOrColumnError = S.Struct({\n    message: S.Union(S.String.pipe(S.includes(\"no such table\")), S.String.pipe(S.includes(\"no such column\")), S.String.pipe(S.includes(\"has no column\"))),\n});\nconst ensureSchemaByNewMessages = (messages) => Effect.gen(function* () {\n    const tablesMap = new Map();\n    messages.forEach((message) => {\n        const table = tablesMap.get(message.table);\n        if (table == null) {\n            tablesMap.set(message.table, {\n                name: message.table,\n                columns: [message.column, \"createdAt\", \"updatedAt\"],\n            });\n            return;\n        }\n        if (table.columns.includes(message.column))\n            return;\n        tablesMap.set(message.table, {\n            name: message.table,\n            columns: table.columns.concat(message.column),\n        });\n    });\n    const tables = Arr.fromIterable(tablesMap.values());\n    yield* Effect.flatMap(getSchema, ensureSchema({ tables, indexes: [] }));\n});\nconst writeTimestampAndMerkleTree = (timestamp, merkleTree) => Effect.flatMap(Sqlite, (sqlite) => sqlite.exec({\n    ...Sql.updateOwnerTimestampAndMerkleTree,\n    parameters: [\n        merkleTreeToString(merkleTree),\n        timestampToString(timestamp),\n    ],\n}));\nconst dropAllTables = Effect.gen(function* () {\n    yield* Effect.logTrace(\"Db dropAllTables\");\n    const sqlite = yield* Sqlite;\n    const schema = yield* getSchema;\n    yield* Effect.forEach(schema.tables, (table) => \n    // The dropped table is completely removed from the database schema and\n    // the disk file. The table can not be recovered.\n    // All indices and triggers associated with the table are also deleted.\n    // https://sqlite.org/lang_droptable.html\n    sqlite.exec({ sql: `drop table \"${table.name}\"` }));\n});\nconst forkSync = (messages = []) => SyncLock.pipe(Effect.flatMap((syncLock) => syncLock.tryAcquire), Effect.matchEffect({\n    onFailure: () => Effect.void,\n    onSuccess: () => syncLoop(messages),\n}), Effect.scoped, Effect.forkDaemon);\nconst syncLoop = (messages = []) => Effect.gen(function* (_) {\n    const sqlite = yield* Sqlite;\n    const sync = yield* Sync;\n    const callbacks = yield* Callbacks;\n    const time = yield* Time;\n    const syncDataRef = yield* readTimestampAndMerkleTree.pipe(sqlite.transaction(\"shared\"), Effect.map((a) => ({ ...a, messages })), Effect.flatMap(Ref.make));\n    callbacks.onSyncStateChange({ _tag: \"SyncStateIsSyncing\" });\n    yield* Ref.get(syncDataRef).pipe(Effect.flatMap(sync.sync), Effect.flatMap(handleSyncResult), Effect.repeat({\n        // TODO: Schedule.jittered(Schedule.exponential(\"10 millis\"))\n        schedule: Schedule.recurs(50),\n        until: Option.match({\n            onNone: () => Effect.gen(function* () {\n                callbacks.onSyncStateChange({\n                    _tag: \"SyncStateIsSynced\",\n                    time: yield* time.now,\n                });\n                return true;\n            }),\n            onSome: (syncData) => Effect.gen(function* () {\n                yield* Ref.set(syncDataRef, syncData);\n                return false;\n            }),\n        }),\n    }), Effect.catchAllDefect((error) => \n    // Db can run in a Web Worker, so we must ensure transferable error.\n    Effect.fail(makeUnexpectedError(ensureTransferableError(error)))), Effect.catchTag(\"SyncStateIsNotSynced\", (state) => Effect.succeed(callbacks.onSyncStateChange(state))), Effect.catchAll((error) => Effect.succeed(callbacks.onError(error))));\n});\nconst handleSyncResult = (result) => Effect.flatMap(Sqlite, (sqlite) => Effect.gen(function* (_) {\n    const { onReceive } = yield* Callbacks;\n    const current = yield* readTimestampAndMerkleTree;\n    const nextTimestamp = yield* Effect.reduce(result.messages, current.timestamp, (local, message) => receiveTimestamp({\n        local,\n        remote: unsafeTimestampFromString(message.timestamp),\n    }));\n    const nextMerkleTree = yield* applyMessages(current.merkleTree, result.messages);\n    if (result.messages.length > 0) {\n        yield* writeTimestampAndMerkleTree(nextTimestamp, nextMerkleTree);\n        onReceive();\n    }\n    return yield* diffMerkleTrees(result.merkleTree, nextMerkleTree).pipe(Effect.flatMap((diff) => sqlite.exec({\n        ...Sql.selectMessagesToSync,\n        parameters: [timestampToString(makeSyncTimestamp(diff))],\n    })), Effect.map(({ rows }) => ({\n        messages: rows,\n        merkleTree: nextMerkleTree,\n        timestamp: nextTimestamp,\n    })), Effect.option);\n}).pipe(sqlite.transaction(\"exclusive\")));\n// We use queries as keys, hence JSON.stringify.\nexport const serializeQuery = ({ sql, parameters = [], options, }) => {\n    const query = {\n        sql,\n        parameters: parameters.map((p) => Predicate.isUint8Array(p)\n            ? Arr.fromIterable(p)\n            : isJsonObjectOrArray(p)\n                ? { json: p }\n                : p),\n        ...(options && { options }),\n    };\n    return JSON.stringify(query);\n};\nexport const deserializeQuery = (query) => {\n    const serializedSqliteQuery = JSON.parse(query);\n    return {\n        ...serializedSqliteQuery,\n        parameters: serializedSqliteQuery.parameters.map((p) => Arr.isArray(p)\n            ? new Uint8Array(p)\n            : typeof p === \"object\" && p != null\n                ? p.json\n                : p),\n    };\n};\n// To preserve identity.\nconst _emptyRows = [];\nexport const emptyRows = () => _emptyRows;\n// To preserve identity.\nconst queryResultCache = new WeakMap();\nexport const queryResultFromRows = (rows) => {\n    let queryResult = queryResultCache.get(rows);\n    if (queryResult == null) {\n        queryResult = { rows, row: rows[0] };\n        queryResultCache.set(rows, queryResult);\n    }\n    return queryResult;\n};\nexport const notSupportedPlatformWorker = {\n    init: () => Effect.fail({\n        _tag: \"NotSupportedPlatformError\",\n    }),\n    loadQueries: () => Effect.succeed([]),\n    mutate: () => Effect.succeed([]),\n    resetOwner: () => Effect.void,\n    restoreOwner: () => Effect.void,\n    ensureSchema: () => Effect.void,\n    sync: () => Effect.succeed([]),\n    exportDatabase: () => Effect.succeed(new Uint8Array()),\n};\n","import * as Arr from \"effect/Array\";\nimport * as Predicate from \"effect/Predicate\";\nexport const applyPatches = (patches, current) => patches.reduce((next, patch) => {\n    switch (patch.op) {\n        case \"replaceAll\":\n            return patch.value;\n        case \"replaceAt\": {\n            return Arr.replace(next, patch.index, patch.value);\n        }\n    }\n}, current);\n/**\n * We detect only changes in the whole result and in-place edits. In the future,\n * we will add more heuristics. We will probably not implement the Myers diff\n * algorithm because it's faster to rerender all than to compute many detailed\n * patches. We will only implement logic a developer would implement manually,\n * if necessary.\n */\nexport const makePatches = (previousRows, nextRows) => {\n    if (previousRows === undefined)\n        return [{ op: \"replaceAll\", value: nextRows }];\n    // TODO: Detect prepend and append, it's cheap.\n    if (previousRows.length !== nextRows.length) {\n        return [{ op: \"replaceAll\", value: nextRows }];\n    }\n    const length = previousRows.length;\n    const replaceAtPatches = [];\n    for (let i = 0; i < length; i++) {\n        const previousRow = previousRows[i];\n        const nextRow = nextRows[i];\n        // We expect the same shape for both rows.\n        for (const key in previousRow)\n            if (!areEqual(previousRow[key], nextRow[key])) {\n                replaceAtPatches.push({ op: \"replaceAt\", value: nextRow, index: i });\n                break;\n            }\n    }\n    if (length > 0 && replaceAtPatches.length === length) {\n        return [{ op: \"replaceAll\", value: nextRows }];\n    }\n    return replaceAtPatches;\n};\nexport const areEqual = (a, b) => {\n    // Compare string, number, null ASAP.\n    if (a === b)\n        return true;\n    // Different type works only for string and number, everything else is an object.\n    if (typeof a !== typeof b)\n        return false;\n    // Both are nonnullable objects.\n    if (typeof a === \"object\" && a !== null && b !== null) {\n        const aIsUint8Array = Predicate.isUint8Array(a);\n        const bIsUint8Array = Predicate.isUint8Array(b);\n        if (aIsUint8Array && bIsUint8Array) {\n            if (a.length !== b.length)\n                return false;\n            for (let i = 0; i < a.length; i++)\n                if (a[i] !== b[i])\n                    return false;\n            return true;\n        }\n        const aIsArray = Arr.isArray(a);\n        const bIsArray = Arr.isArray(b);\n        if (aIsArray && bIsArray) {\n            if (a.length !== b.length)\n                return false;\n            for (let i = 0; i < a.length; i++)\n                if (!areEqual(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (!aIsUint8Array && !bIsUint8Array && !aIsArray && !bIsArray) {\n            const aKeys = Object.keys(a);\n            const bKeys = Object.keys(b);\n            if (aKeys.length !== bKeys.length)\n                return false;\n            for (const key of aKeys)\n                if (!areEqual(a[key], b[key]))\n                    return false;\n            return true;\n        }\n    }\n    return false;\n};\n","/// <reference types=\"./alter-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AlterTableNode = freeze({\n    is(node) {\n        return node.kind === 'AlterTableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'AlterTableNode',\n            table,\n        });\n    },\n    cloneWithTableProps(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumnAlteration(node, columnAlteration) {\n        return freeze({\n            ...node,\n            columnAlterations: node.columnAlterations\n                ? [...node.columnAlterations, columnAlteration]\n                : [columnAlteration],\n        });\n    },\n});\n","/// <reference types=\"./create-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CreateIndexNode = freeze({\n    is(node) {\n        return node.kind === 'CreateIndexNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateIndexNode',\n            name: IdentifierNode.create(name),\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumns(node, columns) {\n        return freeze({\n            ...node,\n            columns: [...(node.columns || []), ...columns],\n        });\n    },\n});\n","/// <reference types=\"./create-schema-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CreateSchemaNode = freeze({\n    is(node) {\n        return node.kind === 'CreateSchemaNode';\n    },\n    create(schema, params) {\n        return freeze({\n            kind: 'CreateSchemaNode',\n            schema: IdentifierNode.create(schema),\n            ...params,\n        });\n    },\n    cloneWith(createSchema, params) {\n        return freeze({\n            ...createSchema,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./create-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport const ON_COMMIT_ACTIONS = ['preserve rows', 'delete rows', 'drop'];\n/**\n * @internal\n */\nexport const CreateTableNode = freeze({\n    is(node) {\n        return node.kind === 'CreateTableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'CreateTableNode',\n            table,\n            columns: freeze([]),\n        });\n    },\n    cloneWithColumn(createTable, column) {\n        return freeze({\n            ...createTable,\n            columns: freeze([...createTable.columns, column]),\n        });\n    },\n    cloneWithConstraint(createTable, constraint) {\n        return freeze({\n            ...createTable,\n            constraints: createTable.constraints\n                ? freeze([...createTable.constraints, constraint])\n                : freeze([constraint]),\n        });\n    },\n    cloneWithFrontModifier(createTable, modifier) {\n        return freeze({\n            ...createTable,\n            frontModifiers: createTable.frontModifiers\n                ? freeze([...createTable.frontModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWithEndModifier(createTable, modifier) {\n        return freeze({\n            ...createTable,\n            endModifiers: createTable.endModifiers\n                ? freeze([...createTable.endModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWith(createTable, params) {\n        return freeze({\n            ...createTable,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./drop-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const DropIndexNode = freeze({\n    is(node) {\n        return node.kind === 'DropIndexNode';\n    },\n    create(name, params) {\n        return freeze({\n            kind: 'DropIndexNode',\n            name: SchemableIdentifierNode.create(name),\n            ...params,\n        });\n    },\n    cloneWith(dropIndex, props) {\n        return freeze({\n            ...dropIndex,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./drop-schema-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const DropSchemaNode = freeze({\n    is(node) {\n        return node.kind === 'DropSchemaNode';\n    },\n    create(schema, params) {\n        return freeze({\n            kind: 'DropSchemaNode',\n            schema: IdentifierNode.create(schema),\n            ...params,\n        });\n    },\n    cloneWith(dropSchema, params) {\n        return freeze({\n            ...dropSchema,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./drop-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DropTableNode = freeze({\n    is(node) {\n        return node.kind === 'DropTableNode';\n    },\n    create(table, params) {\n        return freeze({\n            kind: 'DropTableNode',\n            table,\n            ...params,\n        });\n    },\n    cloneWith(dropIndex, params) {\n        return freeze({\n            ...dropIndex,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./add-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AddColumnNode = freeze({\n    is(node) {\n        return node.kind === 'AddColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'AddColumnNode',\n            column,\n        });\n    },\n});\n","/// <reference types=\"./column-definition-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const ColumnDefinitionNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnDefinitionNode';\n    },\n    create(column, dataType) {\n        return freeze({\n            kind: 'ColumnDefinitionNode',\n            column: ColumnNode.create(column),\n            dataType,\n        });\n    },\n    cloneWithFrontModifier(node, modifier) {\n        return freeze({\n            ...node,\n            frontModifiers: node.frontModifiers\n                ? freeze([...node.frontModifiers, modifier])\n                : [modifier],\n        });\n    },\n    cloneWithEndModifier(node, modifier) {\n        return freeze({\n            ...node,\n            endModifiers: node.endModifiers\n                ? freeze([...node.endModifiers, modifier])\n                : [modifier],\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./drop-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const DropColumnNode = freeze({\n    is(node) {\n        return node.kind === 'DropColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'DropColumnNode',\n            column: ColumnNode.create(column),\n        });\n    },\n});\n","/// <reference types=\"./rename-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const RenameColumnNode = freeze({\n    is(node) {\n        return node.kind === 'RenameColumnNode';\n    },\n    create(column, newColumn) {\n        return freeze({\n            kind: 'RenameColumnNode',\n            column: ColumnNode.create(column),\n            renameTo: ColumnNode.create(newColumn),\n        });\n    },\n});\n","/// <reference types=\"./check-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CheckConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'CheckConstraintNode';\n    },\n    create(expression, constraintName) {\n        return freeze({\n            kind: 'CheckConstraintNode',\n            expression,\n            name: constraintName ? IdentifierNode.create(constraintName) : undefined,\n        });\n    },\n});\n","/// <reference types=\"./references-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport const ON_MODIFY_FOREIGN_ACTIONS = [\n    'no action',\n    'restrict',\n    'cascade',\n    'set null',\n    'set default',\n];\n/**\n * @internal\n */\nexport const ReferencesNode = freeze({\n    is(node) {\n        return node.kind === 'ReferencesNode';\n    },\n    create(table, columns) {\n        return freeze({\n            kind: 'ReferencesNode',\n            table,\n            columns: freeze([...columns]),\n        });\n    },\n    cloneWithOnDelete(references, onDelete) {\n        return freeze({\n            ...references,\n            onDelete,\n        });\n    },\n    cloneWithOnUpdate(references, onUpdate) {\n        return freeze({\n            ...references,\n            onUpdate,\n        });\n    },\n});\n","/// <reference types=\"./default-value-parser.d.ts\" />\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nexport function parseDefaultValueExpression(value) {\n    return isOperationNodeSource(value)\n        ? value.toOperationNode()\n        : ValueNode.createImmediate(value);\n}\n","/// <reference types=\"./generated-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GeneratedNode = freeze({\n    is(node) {\n        return node.kind === 'GeneratedNode';\n    },\n    create(params) {\n        return freeze({\n            kind: 'GeneratedNode',\n            ...params,\n        });\n    },\n    createWithExpression(expression) {\n        return freeze({\n            kind: 'GeneratedNode',\n            always: true,\n            expression,\n        });\n    },\n    cloneWith(node, params) {\n        return freeze({\n            ...node,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./default-value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DefaultValueNode = freeze({\n    is(node) {\n        return node.kind === 'DefaultValueNode';\n    },\n    create(defaultValue) {\n        return freeze({\n            kind: 'DefaultValueNode',\n            defaultValue,\n        });\n    },\n});\n","/// <reference types=\"./on-modify-action-parser.d.ts\" />\nimport { ON_MODIFY_FOREIGN_ACTIONS, } from '../operation-node/references-node.js';\nexport function parseOnModifyForeignAction(action) {\n    if (ON_MODIFY_FOREIGN_ACTIONS.includes(action)) {\n        return action;\n    }\n    throw new Error(`invalid OnModifyForeignAction ${action}`);\n}\n","/// <reference types=\"./column-definition-builder.d.ts\" />\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { ReferencesNode, } from '../operation-node/references-node.js';\nimport { SelectAllNode } from '../operation-node/select-all-node.js';\nimport { parseStringReference } from '../parser/reference-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { parseDefaultValueExpression, } from '../parser/default-value-parser.js';\nimport { GeneratedNode } from '../operation-node/generated-node.js';\nimport { DefaultValueNode } from '../operation-node/default-value-node.js';\nimport { parseOnModifyForeignAction } from '../parser/on-modify-action-parser.js';\nexport class ColumnDefinitionBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Adds `auto_increment` or `autoincrement` to the column definition\n     * depending on the dialect.\n     *\n     * Some dialects like PostgreSQL don't support this. On PostgreSQL\n     * you can use the `serial` or `bigserial` data type instead.\n     */\n    autoIncrement() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { autoIncrement: true }));\n    }\n    /**\n     * Makes the column an identity column.\n     *\n     * This only works on some dialects like MS SQL Server (MSSQL).\n     *\n     * For PostgreSQL's `generated always as identity` use {@link generatedAlwaysAsIdentity}.\n     */\n    identity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { identity: true }));\n    }\n    /**\n     * Makes the column the primary key.\n     *\n     * If you want to specify a composite primary key use the\n     * {@link CreateTableBuilder.addPrimaryKeyConstraint} method.\n     */\n    primaryKey() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { primaryKey: true }));\n    }\n    /**\n     * Adds a foreign key constraint for the column.\n     *\n     * If your database engine doesn't support foreign key constraints in the\n     * column definition (like MySQL 5) you need to call the table level\n     * {@link CreateTableBuilder.addForeignKeyConstraint} method instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * col.references('person.id')\n     * ```\n     */\n    references(ref) {\n        const references = parseStringReference(ref);\n        if (!references.table || SelectAllNode.is(references.column)) {\n            throw new Error(`invalid call references('${ref}'). The reference must have format table.column or schema.table.column`);\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.create(references.table, [\n                references.column,\n            ]),\n        }));\n    }\n    /**\n     * Adds an `on delete` constraint for the foreign key column.\n     *\n     * If your database engine doesn't support foreign key constraints in the\n     * column definition (like MySQL 5) you need to call the table level\n     * {@link CreateTableBuilder.addForeignKeyConstraint} method instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * col.references('person.id').onDelete('cascade')\n     * ```\n     */\n    onDelete(onDelete) {\n        if (!this.#node.references) {\n            throw new Error('on delete constraint can only be added for foreign keys');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.cloneWithOnDelete(this.#node.references, parseOnModifyForeignAction(onDelete)),\n        }));\n    }\n    /**\n     * Adds an `on update` constraint for the foreign key column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * col.references('person.id').onUpdate('cascade')\n     * ```\n     */\n    onUpdate(onUpdate) {\n        if (!this.#node.references) {\n            throw new Error('on update constraint can only be added for foreign keys');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.cloneWithOnUpdate(this.#node.references, parseOnModifyForeignAction(onUpdate)),\n        }));\n    }\n    /**\n     * Adds a unique constraint for the column.\n     */\n    unique() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { unique: true }));\n    }\n    /**\n     * Adds a `not null` constraint for the column.\n     */\n    notNull() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { notNull: true }));\n    }\n    /**\n     * Adds a `unsigned` modifier for the column.\n     *\n     * This only works on some dialects like MySQL.\n     */\n    unsigned() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { unsigned: true }));\n    }\n    /**\n     * Adds a default value constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema\n     *   .createTable('pet')\n     *   .addColumn('number_of_legs', 'integer', (col) => col.defaultTo(4))\n     *   .execute()\n     * ```\n     *\n     * Values passed to `defaultTo` are interpreted as value literals by default. You can define\n     * an arbitrary SQL expression using the {@link sql} template tag:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * db.schema\n     *   .createTable('pet')\n     *   .addColumn(\n     *     'number_of_legs',\n     *     'integer',\n     *     (col) => col.defaultTo(sql`any SQL here`)\n     *   )\n     *   .execute()\n     * ```\n     */\n    defaultTo(value) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            defaultTo: DefaultValueNode.create(parseDefaultValueExpression(value)),\n        }));\n    }\n    /**\n     * Adds a check constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * db.schema\n     *   .createTable('pet')\n     *   .addColumn('number_of_legs', 'integer', (col) =>\n     *     col.check(sql`number_of_legs < 5`)\n     *   )\n     *   .execute()\n     * ```\n     */\n    check(expression) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            check: CheckConstraintNode.create(expression.toOperationNode()),\n        }));\n    }\n    /**\n     * Makes the column a generated column using a `generated always as` statement.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * db.schema\n     *   .createTable('person')\n     *   .addColumn('full_name', 'varchar(255)',\n     *     (col) => col.generatedAlwaysAs(sql`concat(first_name, ' ', last_name)`)\n     *   )\n     *   .execute()\n     * ```\n     */\n    generatedAlwaysAs(expression) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.createWithExpression(expression.toOperationNode()),\n        }));\n    }\n    /**\n     * Adds the `generated always as identity` specifier.\n     *\n     * This only works on some dialects like PostgreSQL.\n     *\n     * For MS SQL Server (MSSQL)'s identity column use {@link identity}.\n     */\n    generatedAlwaysAsIdentity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.create({ identity: true, always: true }),\n        }));\n    }\n    /**\n     * Adds the `generated by default as identity` specifier on supported dialects.\n     */\n    generatedByDefaultAsIdentity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.create({ identity: true, byDefault: true }),\n        }));\n    }\n    /**\n     * Makes a generated column stored instead of virtual. This method can only\n     * be used with {@link generatedAlwaysAs}\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema\n     *   .createTable('person')\n     *   .addColumn('full_name', 'varchar(255)', (col) => col\n     *     .generatedAlwaysAs(\"concat(first_name, ' ', last_name)\")\n     *     .stored()\n     *   )\n     *   .execute()\n     * ```\n     */\n    stored() {\n        if (!this.#node.generated) {\n            throw new Error('stored() can only be called after generatedAlwaysAs');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.cloneWith(this.#node.generated, {\n                stored: true,\n            }),\n        }));\n    }\n    /**\n     * This can be used to add any additional SQL right after the column's data type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('person')\n     *  .addColumn('id', 'integer', col => col.primaryKey())\n     *  .addColumn('first_name', 'varchar(36)', col => col.modifyFront(sql`collate utf8mb4_general_ci`).notNull())\n     *  .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `first_name` varchar(36) collate utf8mb4_general_ci not null\n     * )\n     * ```\n     */\n    modifyFront(modifier) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWithFrontModifier(this.#node, modifier.toOperationNode()));\n    }\n    /**\n     * Adds `nulls not distinct` specifier.\n     * Should be used with `unique` constraint.\n     *\n     * This only works on some dialects like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('person')\n     *  .addColumn('id', 'integer', col => col.primaryKey())\n     *  .addColumn('first_name', 'varchar(30)', col => col.unique().nullsNotDistinct())\n     *  .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"person\" (\n     *   \"id\" integer primary key,\n     *   \"first_name\" varchar(30) unique nulls not distinct\n     * )\n     * ```\n     */\n    nullsNotDistinct() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { nullsNotDistinct: true }));\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the column definition.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('person')\n     *  .addColumn('id', 'integer', col => col.primaryKey())\n     *  .addColumn('age', 'integer', col => col.unsigned().notNull().modifyEnd(sql`comment ${sql.lit('it is not polite to ask a woman her age')}`))\n     *  .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `age` integer unsigned not null comment 'it is not polite to ask a woman her age'\n     * )\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWithEndModifier(this.#node, modifier.toOperationNode()));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\npreventAwait(ColumnDefinitionBuilder, \"don't await ColumnDefinitionBuilder instances directly.\");\n","/// <reference types=\"./modify-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ModifyColumnNode = freeze({\n    is(node) {\n        return node.kind === 'ModifyColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'ModifyColumnNode',\n            column,\n        });\n    },\n});\n","/// <reference types=\"./foreign-key-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\nimport { ReferencesNode } from './references-node.js';\n/**\n * @internal\n */\nexport const ForeignKeyConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'ForeignKeyConstraintNode';\n    },\n    create(sourceColumns, targetTable, targetColumns, constraintName) {\n        return freeze({\n            kind: 'ForeignKeyConstraintNode',\n            columns: sourceColumns,\n            references: ReferencesNode.create(targetTable, targetColumns),\n            name: constraintName ? IdentifierNode.create(constraintName) : undefined,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./foreign-key-constraint-builder.d.ts\" />\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { parseOnModifyForeignAction } from '../parser/on-modify-action-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class ForeignKeyConstraintBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    onDelete(onDelete) {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            onDelete: parseOnModifyForeignAction(onDelete),\n        }));\n    }\n    onUpdate(onUpdate) {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            onUpdate: parseOnModifyForeignAction(onUpdate),\n        }));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\npreventAwait(ForeignKeyConstraintBuilder, \"don't await ForeignKeyConstraintBuilder instances directly.\");\n","/// <reference types=\"./add-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AddConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'AddConstraintNode';\n    },\n    create(constraint) {\n        return freeze({\n            kind: 'AddConstraintNode',\n            constraint,\n        });\n    },\n});\n","/// <reference types=\"./unique-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const UniqueConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'UniqueConstraintNode';\n    },\n    create(columns, constraintName, nullsNotDistinct) {\n        return freeze({\n            kind: 'UniqueConstraintNode',\n            columns: freeze(columns.map(ColumnNode.create)),\n            name: constraintName ? IdentifierNode.create(constraintName) : undefined,\n            nullsNotDistinct,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./drop-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const DropConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'DropConstraintNode';\n    },\n    create(constraintName) {\n        return freeze({\n            kind: 'DropConstraintNode',\n            constraintName: IdentifierNode.create(constraintName),\n        });\n    },\n    cloneWith(dropConstraint, props) {\n        return freeze({\n            ...dropConstraint,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./alter-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const AlterColumnNode = freeze({\n    is(node) {\n        return node.kind === 'AlterColumnNode';\n    },\n    create(column, prop, value) {\n        return freeze({\n            kind: 'AlterColumnNode',\n            column: ColumnNode.create(column),\n            [prop]: value,\n        });\n    },\n});\n","/// <reference types=\"./alter-column-builder.d.ts\" />\nimport { AlterColumnNode } from '../operation-node/alter-column-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { parseDefaultValueExpression, } from '../parser/default-value-parser.js';\nexport class AlterColumnBuilder {\n    #column;\n    constructor(column) {\n        this.#column = column;\n    }\n    setDataType(dataType) {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dataType', parseDataTypeExpression(dataType)));\n    }\n    setDefault(value) {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'setDefault', parseDefaultValueExpression(value)));\n    }\n    dropDefault() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dropDefault', true));\n    }\n    setNotNull() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'setNotNull', true));\n    }\n    dropNotNull() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dropNotNull', true));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n}\n/**\n * Allows us to force consumers to do exactly one alteration to a column.\n *\n * Basically, deny the following:\n *\n * ```ts\n * db.schema.alterTable('person').alterColumn('age', (ac) => ac)\n * ```\n *\n * ```ts\n * db.schema.alterTable('person').alterColumn('age', (ac) => ac.dropNotNull().setNotNull())\n * ```\n *\n * Which would now throw a compilation error, instead of a runtime error.\n */\nexport class AlteredColumnBuilder {\n    #alterColumnNode;\n    constructor(alterColumnNode) {\n        this.#alterColumnNode = alterColumnNode;\n    }\n    toOperationNode() {\n        return this.#alterColumnNode;\n    }\n}\n","/// <reference types=\"./alter-table-executor.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class AlterTableExecutor {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(AlterTableExecutor, \"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./alter-table-add-foreign-key-constraint-builder.d.ts\" />\nimport { AddConstraintNode } from '../operation-node/add-constraint-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class AlterTableAddForeignKeyConstraintBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    onDelete(onDelete) {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.onDelete(onDelete),\n        });\n    }\n    onUpdate(onUpdate) {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.onUpdate(onUpdate),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(AlterTableNode.cloneWithTableProps(this.#props.node, {\n            addConstraint: AddConstraintNode.create(this.#props.constraintBuilder.toOperationNode()),\n        }), this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(AlterTableAddForeignKeyConstraintBuilder, \"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./alter-table-drop-constraint-builder.d.ts\" />\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { DropConstraintNode } from '../operation-node/drop-constraint-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class AlterTableDropConstraintBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    ifExists: true,\n                }),\n            }),\n        });\n    }\n    cascade() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    modifier: 'cascade',\n                }),\n            }),\n        });\n    }\n    restrict() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    modifier: 'restrict',\n                }),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(AlterTableDropConstraintBuilder, \"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./primary-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const PrimaryConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'PrimaryKeyConstraintNode';\n    },\n    create(columns, constraintName) {\n        return freeze({\n            kind: 'PrimaryKeyConstraintNode',\n            columns: freeze(columns.map(ColumnNode.create)),\n            name: constraintName ? IdentifierNode.create(constraintName) : undefined,\n        });\n    },\n});\n","/// <reference types=\"./add-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const AddIndexNode = freeze({\n    is(node) {\n        return node.kind === 'AddIndexNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'AddIndexNode',\n            name: IdentifierNode.create(name),\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumns(node, columns) {\n        return freeze({\n            ...node,\n            columns: [...(node.columns || []), ...columns],\n        });\n    },\n});\n","/// <reference types=\"./alter-table-add-index-builder.d.ts\" />\nimport { AddIndexNode } from '../operation-node/add-index-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseOrderedColumnName, } from '../parser/reference-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class AlterTableAddIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Makes the index unique.\n     */\n    unique() {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWith(this.#props.node.addIndex, {\n                    unique: true,\n                }),\n            }),\n        });\n    }\n    /**\n     * Adds a column to the index.\n     *\n     * Also see {@link columns} for adding multiple columns at once or {@link expression}\n     * for specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .alterTable('person')\n     *         .createIndex('person_first_name_and_age_index')\n     *         .column('first_name')\n     *         .column('age desc')\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_and_age_index` (`first_name`, `age` desc)\n     * ```\n     */\n    column(column) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, [\n                    parseOrderedColumnName(column),\n                ]),\n            }),\n        });\n    }\n    /**\n     * Specifies a list of columns for the index.\n     *\n     * Also see {@link column} for adding a single column or {@link expression} for\n     * specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .alterTable('person')\n     *         .addIndex('person_first_name_and_age_index')\n     *         .columns(['first_name', 'age desc'])\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_and_age_index` (`first_name`, `age` desc)\n     * ```\n     */\n    columns(columns) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, columns.map(parseOrderedColumnName)),\n            }),\n        });\n    }\n    /**\n     * Specifies an arbitrary expression for the index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .alterTable('person')\n     *   .addIndex('person_first_name_index')\n     *   .expression(sql`(first_name < 'Sami')`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_index` ((first_name < 'Sami'))\n     * ```\n     */\n    expression(expression) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, [\n                    expression.toOperationNode(),\n                ]),\n            }),\n        });\n    }\n    using(indexType) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWith(this.#props.node.addIndex, {\n                    using: RawNode.createWithSql(indexType),\n                }),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(AlterTableAddIndexBuilder, \"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./unique-constraint-builder.d.ts\" />\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class UniqueConstraintNodeBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n    /**\n     * Adds `nulls not distinct` to the unique constraint definition\n     *\n     * Supported by PostgreSQL dialect only\n     */\n    nullsNotDistinct() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, { nullsNotDistinct: true }));\n    }\n}\npreventAwait(UniqueConstraintNodeBuilder, \"don't await UniqueConstraintNodeBuilder instances directly.\");\n","/// <reference types=\"./alter-table-builder.d.ts\" />\nimport { AddColumnNode } from '../operation-node/add-column-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { DropColumnNode } from '../operation-node/drop-column-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { RenameColumnNode } from '../operation-node/rename-column-node.js';\nimport { freeze, noop } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { ColumnDefinitionBuilder, } from './column-definition-builder.js';\nimport { ModifyColumnNode } from '../operation-node/modify-column-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { ForeignKeyConstraintBuilder } from './foreign-key-constraint-builder.js';\nimport { AddConstraintNode } from '../operation-node/add-constraint-node.js';\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { DropConstraintNode } from '../operation-node/drop-constraint-node.js';\nimport { AlterColumnBuilder, } from './alter-column-builder.js';\nimport { AlterTableExecutor } from './alter-table-executor.js';\nimport { AlterTableAddForeignKeyConstraintBuilder } from './alter-table-add-foreign-key-constraint-builder.js';\nimport { AlterTableDropConstraintBuilder } from './alter-table-drop-constraint-builder.js';\nimport { PrimaryConstraintNode } from '../operation-node/primary-constraint-node.js';\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { AddIndexNode } from '../operation-node/add-index-node.js';\nimport { AlterTableAddIndexBuilder } from './alter-table-add-index-builder.js';\nimport { UniqueConstraintNodeBuilder, } from './unique-constraint-builder.js';\n/**\n * This builder can be used to create a `alter table` query.\n */\nexport class AlterTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    renameTo(newTableName) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                renameTo: parseTable(newTableName),\n            }),\n        });\n    }\n    setSchema(newSchema) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                setSchema: IdentifierNode.create(newSchema),\n            }),\n        });\n    }\n    alterColumn(column, alteration) {\n        const builder = alteration(new AlterColumnBuilder(column));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    dropColumn(column) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, DropColumnNode.create(column)),\n        });\n    }\n    renameColumn(column, newColumn) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, RenameColumnNode.create(column, newColumn)),\n        });\n    }\n    addColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, AddColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    modifyColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, ModifyColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addUniqueConstraint}\n     */\n    addUniqueConstraint(constraintName, columns, build = noop) {\n        const uniqueConstraintBuilder = build(new UniqueConstraintNodeBuilder(UniqueConstraintNode.create(columns, constraintName)));\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(uniqueConstraintBuilder.toOperationNode()),\n            }),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addCheckConstraint}\n     */\n    addCheckConstraint(constraintName, checkExpression) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(CheckConstraintNode.create(checkExpression.toOperationNode(), constraintName)),\n            }),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addForeignKeyConstraint}\n     *\n     * Unlike {@link CreateTableBuilder.addForeignKeyConstraint} this method returns\n     * the constraint builder and doesn't take a callback as the last argument. This\n     * is because you can only add one column per `ALTER TABLE` query.\n     */\n    addForeignKeyConstraint(constraintName, columns, targetTable, targetColumns) {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.create(columns.map(ColumnNode.create), parseTable(targetTable), targetColumns.map(ColumnNode.create), constraintName)),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addPrimaryKeyConstraint}\n     */\n    addPrimaryKeyConstraint(constraintName, columns) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(PrimaryConstraintNode.create(columns, constraintName)),\n            }),\n        });\n    }\n    dropConstraint(constraintName) {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.create(constraintName),\n            }),\n        });\n    }\n    /**\n     * This can be used to add index to table.\n     *\n     *  ### Examples\n     *\n     * ```ts\n     * db.schema.alterTable('person')\n     *   .addIndex('person_email_index')\n     *   .column('email')\n     *   .unique()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add unique index `person_email_index` (`email`)\n     * ```\n     */\n    addIndex(indexName) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.create(indexName),\n            }),\n        });\n    }\n    /**\n     * This can be used to drop index from table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.alterTable('person')\n     *   .dropIndex('person_email_index')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` drop index `test_first_name_index`\n     * ```\n     */\n    dropIndex(indexName) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropIndex: DropIndexNode.create(indexName),\n            }),\n        });\n    }\n    /**\n     * Calls the given function passing `this` as the only argument.\n     *\n     * See {@link CreateTableBuilder.$call}\n     */\n    $call(func) {\n        return func(this);\n    }\n}\nexport class AlterTableColumnAlteringBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    alterColumn(column, alteration) {\n        const builder = alteration(new AlterColumnBuilder(column));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    dropColumn(column) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, DropColumnNode.create(column)),\n        });\n    }\n    renameColumn(column, newColumn) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, RenameColumnNode.create(column, newColumn)),\n        });\n    }\n    addColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, AddColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    modifyColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, ModifyColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(AlterTableBuilder, \"don't await AlterTableBuilder instances\");\npreventAwait(AlterColumnBuilder, \"don't await AlterColumnBuilder instances\");\npreventAwait(AlterTableColumnAlteringBuilder, \"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./immediate-value-transformer.d.ts\" />\nimport { OperationNodeTransformer } from '../../operation-node/operation-node-transformer.js';\n/**\n * Transforms all ValueNodes to immediate.\n *\n * WARNING! This should never be part of the public API. Users should never use this.\n * This is an internal helper.\n *\n * @internal\n */\nexport class ImmediateValueTransformer extends OperationNodeTransformer {\n    transformValue(node) {\n        return {\n            ...super.transformValue(node),\n            immediate: true,\n        };\n    }\n}\n","/// <reference types=\"./create-index-builder.d.ts\" />\nimport { CreateIndexNode, } from '../operation-node/create-index-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseOrderedColumnName, } from '../parser/reference-parser.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { ImmediateValueTransformer } from '../plugin/immediate-value/immediate-value-transformer.js';\nexport class CreateIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"if not exists\" modifier.\n     *\n     * If the index already exists, no error is thrown if this method has been called.\n     */\n    ifNotExists() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    /**\n     * Makes the index unique.\n     */\n    unique() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                unique: true,\n            }),\n        });\n    }\n    /**\n     * Adds `nulls not distinct` specifier to index.\n     * This only works on some dialects like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createIndex('person_first_name_index')\n     *  .on('person')\n     *  .column('first_name')\n     *  .nullsNotDistinct()\n     *  .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_index\"\n     * on \"test\" (\"first_name\")\n     * nulls not distinct;\n     * ```\n     */\n    nullsNotDistinct() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                nullsNotDistinct: true,\n            }),\n        });\n    }\n    /**\n     * Specifies the table for the index.\n     */\n    on(table) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                table: parseTable(table),\n            }),\n        });\n    }\n    /**\n     * Adds a column to the index.\n     *\n     * Also see {@link columns} for adding multiple columns at once or {@link expression}\n     * for specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .createIndex('person_first_name_and_age_index')\n     *         .on('person')\n     *         .column('first_name')\n     *         .column('age desc')\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_and_age_index\" on \"person\" (\"first_name\", \"age\" desc)\n     * ```\n     */\n    column(column) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, [\n                parseOrderedColumnName(column),\n            ]),\n        });\n    }\n    /**\n     * Specifies a list of columns for the index.\n     *\n     * Also see {@link column} for adding a single column or {@link expression} for\n     * specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .createIndex('person_first_name_and_age_index')\n     *         .on('person')\n     *         .columns(['first_name', 'age desc'])\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_and_age_index\" on \"person\" (\"first_name\", \"age\" desc)\n     * ```\n     */\n    columns(columns) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, columns.map(parseOrderedColumnName)),\n        });\n    }\n    /**\n     * Specifies an arbitrary expression for the index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createIndex('person_first_name_index')\n     *   .on('person')\n     *   .expression(sql`first_name COLLATE \"fi_FI\"`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_index\" on \"person\" (first_name COLLATE \"fi_FI\")\n     * ```\n     */\n    expression(expression) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, [\n                expression.toOperationNode(),\n            ]),\n        });\n    }\n    using(indexType) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                using: RawNode.createWithSql(indexType),\n            }),\n        });\n    }\n    where(...args) {\n        const transformer = new ImmediateValueTransformer();\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: QueryNode.cloneWithWhere(this.#props.node, transformer.transformNode(parseValueBinaryOperationOrExpression(args))),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(CreateIndexBuilder, \"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./create-schema-builder.d.ts\" />\nimport { CreateSchemaNode } from '../operation-node/create-schema-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nexport class CreateSchemaBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifNotExists() {\n        return new CreateSchemaBuilder({\n            ...this.#props,\n            node: CreateSchemaNode.cloneWith(this.#props.node, { ifNotExists: true }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(CreateSchemaBuilder, \"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./on-commit-action-parse.d.ts\" />\nimport { ON_COMMIT_ACTIONS, } from '../operation-node/create-table-node.js';\nexport function parseOnCommitAction(action) {\n    if (ON_COMMIT_ACTIONS.includes(action)) {\n        return action;\n    }\n    throw new Error(`invalid OnCommitAction ${action}`);\n}\n","/// <reference types=\"./create-table-builder.d.ts\" />\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { CreateTableNode, } from '../operation-node/create-table-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { ColumnDefinitionBuilder } from './column-definition-builder.js';\nimport { freeze, noop } from '../util/object-utils.js';\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ForeignKeyConstraintBuilder } from './foreign-key-constraint-builder.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { PrimaryConstraintNode } from '../operation-node/primary-constraint-node.js';\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { parseOnCommitAction } from '../parser/on-commit-action-parse.js';\nimport { UniqueConstraintNodeBuilder, } from './unique-constraint-builder.js';\nimport { parseExpression } from '../parser/expression-parser.js';\n/**\n * This builder can be used to create a `create table` query.\n */\nexport class CreateTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"temporary\" modifier.\n     *\n     * Use this to create a temporary table.\n     */\n    temporary() {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                temporary: true,\n            }),\n        });\n    }\n    /**\n     * Adds an \"on commit\" statement.\n     *\n     * This can be used in conjunction with temporary tables on supported databases\n     * like PostgreSQL.\n     */\n    onCommit(onCommit) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                onCommit: parseOnCommitAction(onCommit),\n            }),\n        });\n    }\n    /**\n     * Adds the \"if not exists\" modifier.\n     *\n     * If the table already exists, no error is thrown if this method has been called.\n     */\n    ifNotExists() {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    /**\n     * Adds a column to the table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', (col) => col.autoIncrement().primaryKey()),\n     *   .addColumn('first_name', 'varchar(50)', (col) => col.notNull())\n     *   .addColumn('last_name', 'varchar(255)')\n     *   .addColumn('bank_balance', 'numeric(8, 2)')\n     *   // You can specify any data type using the `sql` tag if the types\n     *   // don't include it.\n     *   .addColumn('data', sql`any_type_here`)\n     *   .addColumn('parent_id', 'integer', (col) =>\n     *     col.references('person.id').onDelete('cascade'))\n     *   )\n     * ```\n     *\n     * With this method, it's once again good to remember that Kysely just builds the\n     * query and doesn't provide the same API for all databases. For example, some\n     * databases like older MySQL don't support the `references` statement in the\n     * column definition. Instead foreign key constraints need to be defined in the\n     * `create table` query. See the next example:\n     *\n     * ```ts\n     *   .addColumn('parent_id', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'person_parent_id_fk', ['parent_id'], 'person', ['id'],\n     *     (cb) => cb.onDelete('cascade')\n     *   )\n     * ```\n     *\n     * Another good example is that PostgreSQL doesn't support the `auto_increment`\n     * keyword and you need to define an autoincrementing column for example using\n     * `serial`:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'serial', (col) => col.primaryKey()),\n     * ```\n     */\n    addColumn(columnName, dataType, build = noop) {\n        const columnBuilder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithColumn(this.#props.node, columnBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a primary key constraint for one or more columns.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * addPrimaryKeyConstraint('primary_key', ['first_name', 'last_name'])\n     * ```\n     */\n    addPrimaryKeyConstraint(constraintName, columns) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, PrimaryConstraintNode.create(columns, constraintName)),\n        });\n    }\n    /**\n     * Adds a unique constraint for one or more columns.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * addUniqueConstraint('first_name_last_name_unique', ['first_name', 'last_name'])\n     * ```\n     *\n     * In dialects such as PostgreSQL you can specify `nulls not distinct` as follows:\n     * ```ts\n     * addUniqueConstraint('first_name_last_name_unique', ['first_name', 'last_name'], (builder) => builder.nullsNotDistinct())\n     * ```\n     */\n    addUniqueConstraint(constraintName, columns, build = noop) {\n        const uniqueConstraintBuilder = build(new UniqueConstraintNodeBuilder(UniqueConstraintNode.create(columns, constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, uniqueConstraintBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a check constraint.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * addCheckConstraint('check_legs', sql`number_of_legs < 5`)\n     * ```\n     */\n    addCheckConstraint(constraintName, checkExpression) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, CheckConstraintNode.create(checkExpression.toOperationNode(), constraintName)),\n        });\n    }\n    /**\n     * Adds a foreign key constraint.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * addForeignKeyConstraint(\n     *   'owner_id_foreign',\n     *   ['owner_id'],\n     *   'person',\n     *   ['id'],\n     * )\n     * ```\n     *\n     * Add constraint for multiple columns:\n     *\n     * ```ts\n     * addForeignKeyConstraint(\n     *   'owner_id_foreign',\n     *   ['owner_id1', 'owner_id2'],\n     *   'person',\n     *   ['id1', 'id2'],\n     *   (cb) => cb.onDelete('cascade')\n     * )\n     * ```\n     */\n    addForeignKeyConstraint(constraintName, columns, targetTable, targetColumns, build = noop) {\n        const builder = build(new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.create(columns.map(ColumnNode.create), parseTable(targetTable), targetColumns.map(ColumnNode.create), constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the front of the query __after__ the `create` keyword.\n     *\n     * Also see {@link temporary}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('person')\n     *   .modifyFront(sql`global temporary`)\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn('first_name', 'varchar(64)', col => col.notNull())\n     *   .addColumn('last_name', 'varchar(64), col => col.notNull())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (Postgres):\n     *\n     * ```sql\n     * create global temporary table \"person\" (\n     *   \"id\" integer primary key,\n     *   \"first_name\" varchar(64) not null,\n     *   \"last_name\" varchar(64) not null\n     * )\n     * ```\n     */\n    modifyFront(modifier) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithFrontModifier(this.#props.node, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * Also see {@link onCommit}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('person')\n     *   .addColumn('id', 'integer', col => col => primaryKey())\n     *   .addColumn('first_name', 'varchar(64)', col => col.notNull())\n     *   .addColumn('last_name', 'varchar(64), col => col.notNull())\n     *   .modifyEnd(sql`collate utf8_unicode_ci`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `first_name` varchar(64) not null,\n     *   `last_name` varchar(64) not null\n     * ) collate utf8_unicode_ci\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithEndModifier(this.#props.node, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Allows to create table from `select` query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createTable('copy')\n     *   .temporary()\n     *   .as(db.selectFrom('person').select(['first_name', 'last_name']))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create temporary table \"copy\" as\n     * select \"first_name\", \"last_name\" from \"person\"\n     * ```\n     */\n    as(expression) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                selectQuery: parseExpression(expression),\n            }),\n        });\n    }\n    /**\n     * Calls the given function passing `this` as the only argument.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema\n     *   .createTable('test')\n     *   .$call((builder) => builder.addColumn('id', 'integer'))\n     *   .execute()\n     * ```\n     *\n     * ```ts\n     * const addDefaultColumns = <T extends string, C extends string = never>(\n     *   builder: CreateTableBuilder<T, C>\n     * ) => {\n     *   return builder\n     *     .addColumn('id', 'integer', (col) => col.notNull())\n     *     .addColumn('created_at', 'date', (col) =>\n     *       col.notNull().defaultTo(sql`now()`)\n     *     )\n     *     .addColumn('updated_at', 'date', (col) =>\n     *       col.notNull().defaultTo(sql`now()`)\n     *     )\n     * }\n     *\n     * db.schema\n     *   .createTable('test')\n     *   .$call(addDefaultColumns)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(CreateTableBuilder, \"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./drop-index-builder.d.ts\" />\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Specifies the table the index was created for. This is not needed\n     * in all dialects.\n     */\n    on(table) {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                table: parseTable(table),\n            }),\n        });\n    }\n    ifExists() {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(DropIndexBuilder, \"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./drop-schema-builder.d.ts\" />\nimport { DropSchemaNode } from '../operation-node/drop-schema-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropSchemaBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropSchemaBuilder({\n            ...this.#props,\n            node: DropSchemaNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropSchemaBuilder({\n            ...this.#props,\n            node: DropSchemaNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(DropSchemaBuilder, \"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./drop-table-builder.d.ts\" />\nimport { DropTableNode } from '../operation-node/drop-table-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropTableBuilder({\n            ...this.#props,\n            node: DropTableNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropTableBuilder({\n            ...this.#props,\n            node: DropTableNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(DropTableBuilder, \"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./create-view-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const CreateViewNode = freeze({\n    is(node) {\n        return node.kind === 'CreateViewNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateViewNode',\n            name: SchemableIdentifierNode.create(name),\n        });\n    },\n    cloneWith(createView, params) {\n        return freeze({\n            ...createView,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./immediate-value-plugin.d.ts\" />\nimport { ImmediateValueTransformer } from './immediate-value-transformer.js';\n/**\n * Transforms all ValueNodes to immediate.\n *\n * WARNING! This should never be part of the public API. Users should never use this.\n * This is an internal helper.\n *\n * @internal\n */\nexport class ImmediateValuePlugin {\n    #transformer = new ImmediateValueTransformer();\n    transformQuery(args) {\n        return this.#transformer.transformNode(args.node);\n    }\n    transformResult(args) {\n        return Promise.resolve(args.result);\n    }\n}\n","/// <reference types=\"./create-view-builder.d.ts\" />\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { parseColumnName } from '../parser/reference-parser.js';\nimport { ImmediateValuePlugin } from '../plugin/immediate-value/immediate-value-plugin.js';\nexport class CreateViewBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"temporary\" modifier.\n     *\n     * Use this to create a temporary view.\n     */\n    temporary() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                temporary: true,\n            }),\n        });\n    }\n    materialized() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    /**\n     * Only implemented on some dialects like SQLite. On most dialects, use {@link orReplace}.\n     */\n    ifNotExists() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    orReplace() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                orReplace: true,\n            }),\n        });\n    }\n    columns(columns) {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                columns: columns.map(parseColumnName),\n            }),\n        });\n    }\n    /**\n     * Sets the select query or a `values` statement that creates the view.\n     *\n     * WARNING!\n     * Some dialects don't support parameterized queries in DDL statements and therefore\n     * the query or raw {@link sql } expression passed here is interpolated into a single\n     * string opening an SQL injection vulnerability. DO NOT pass unchecked user input\n     * into the query or raw expression passed to this method!\n     */\n    as(query) {\n        const queryNode = query\n            .withPlugin(new ImmediateValuePlugin())\n            .toOperationNode();\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                as: queryNode,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(CreateViewBuilder, \"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./drop-view-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const DropViewNode = freeze({\n    is(node) {\n        return node.kind === 'DropViewNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'DropViewNode',\n            name: SchemableIdentifierNode.create(name),\n        });\n    },\n    cloneWith(dropView, params) {\n        return freeze({\n            ...dropView,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./drop-view-builder.d.ts\" />\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { DropViewNode } from '../operation-node/drop-view-node.js';\nexport class DropViewBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    materialized() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    ifExists() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(DropViewBuilder, \"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./create-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ValueListNode } from './value-list-node.js';\nimport { ValueNode } from './value-node.js';\n/**\n * @internal\n */\nexport const CreateTypeNode = freeze({\n    is(node) {\n        return node.kind === 'CreateTypeNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateTypeNode',\n            name,\n        });\n    },\n    cloneWithEnum(createType, values) {\n        return freeze({\n            ...createType,\n            enum: ValueListNode.create(values.map((value) => ValueNode.createImmediate(value))),\n        });\n    },\n});\n","/// <reference types=\"./create-type-builder.d.ts\" />\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { CreateTypeNode } from '../operation-node/create-type-node.js';\nexport class CreateTypeBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    /**\n     * Creates an anum type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createType('species').asEnum(['cat', 'dog', 'frog'])\n     * ```\n     */\n    asEnum(values) {\n        return new CreateTypeBuilder({\n            ...this.#props,\n            node: CreateTypeNode.cloneWithEnum(this.#props.node, values),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(CreateTypeBuilder, \"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./drop-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DropTypeNode = freeze({\n    is(node) {\n        return node.kind === 'DropTypeNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'DropTypeNode',\n            name,\n        });\n    },\n    cloneWith(dropType, params) {\n        return freeze({\n            ...dropType,\n            ...params,\n        });\n    },\n});\n","/// <reference types=\"./drop-type-builder.d.ts\" />\nimport { DropTypeNode } from '../operation-node/drop-type-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropTypeBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropTypeBuilder({\n            ...this.#props,\n            node: DropTypeNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile(), this.#props.queryId);\n    }\n}\npreventAwait(DropTypeBuilder, \"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`\");\n","/// <reference types=\"./identifier-parser.d.ts\" />\nimport { SchemableIdentifierNode } from '../operation-node/schemable-identifier-node.js';\nexport function parseSchemableIdentifier(id) {\n    const SCHEMA_SEPARATOR = '.';\n    if (id.includes(SCHEMA_SEPARATOR)) {\n        const parts = id.split(SCHEMA_SEPARATOR).map(trim);\n        if (parts.length === 2) {\n            return SchemableIdentifierNode.createWithSchema(parts[0], parts[1]);\n        }\n        else {\n            throw new Error(`invalid schemable identifier ${id}`);\n        }\n    }\n    else {\n        return SchemableIdentifierNode.create(id);\n    }\n}\nfunction trim(str) {\n    return str.trim();\n}\n","/// <reference types=\"./schema.d.ts\" />\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { CreateIndexNode } from '../operation-node/create-index-node.js';\nimport { CreateSchemaNode } from '../operation-node/create-schema-node.js';\nimport { CreateTableNode } from '../operation-node/create-table-node.js';\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { DropSchemaNode } from '../operation-node/drop-schema-node.js';\nimport { DropTableNode } from '../operation-node/drop-table-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { AlterTableBuilder } from './alter-table-builder.js';\nimport { CreateIndexBuilder } from './create-index-builder.js';\nimport { CreateSchemaBuilder } from './create-schema-builder.js';\nimport { CreateTableBuilder } from './create-table-builder.js';\nimport { DropIndexBuilder } from './drop-index-builder.js';\nimport { DropSchemaBuilder } from './drop-schema-builder.js';\nimport { DropTableBuilder } from './drop-table-builder.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { WithSchemaPlugin } from '../plugin/with-schema/with-schema-plugin.js';\nimport { CreateViewBuilder } from './create-view-builder.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { DropViewBuilder } from './drop-view-builder.js';\nimport { DropViewNode } from '../operation-node/drop-view-node.js';\nimport { CreateTypeBuilder } from './create-type-builder.js';\nimport { DropTypeBuilder } from './drop-type-builder.js';\nimport { CreateTypeNode } from '../operation-node/create-type-node.js';\nimport { DropTypeNode } from '../operation-node/drop-type-node.js';\nimport { parseSchemableIdentifier } from '../parser/identifier-parser.js';\n/**\n * Provides methods for building database schema.\n */\nexport class SchemaModule {\n    #executor;\n    constructor(executor) {\n        this.#executor = executor;\n    }\n    /**\n     * Create a new table.\n     *\n     * ### Examples\n     *\n     * This example creates a new table with columns `id`, `first_name`,\n     * `last_name` and `gender`:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('first_name', 'varchar', col => col.notNull())\n     *   .addColumn('last_name', 'varchar', col => col.notNull())\n     *   .addColumn('gender', 'varchar')\n     *   .execute()\n     * ```\n     *\n     * This example creates a table with a foreign key. Not all database\n     * engines support column-level foreign key constraint definitions.\n     * For example if you are using MySQL 5.X see the next example after\n     * this one.\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('owner_id', 'integer', col => col\n     *     .references('person.id')\n     *     .onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * This example adds a foreign key constraint for a columns just\n     * like the previous example, but using a table-level statement.\n     * On MySQL 5.X you need to define foreign key constraints like\n     * this:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('owner_id', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'pet_owner_id_foreign', ['owner_id'], 'person', ['id'],\n     *     (constraint) => constraint.onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     */\n    createTable(table) {\n        return new CreateTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Drop a table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropTable('person')\n     *   .execute()\n     * ```\n     */\n    dropTable(table) {\n        return new DropTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Create a new index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createIndex('person_full_name_unique_index')\n     *   .on('person')\n     *   .columns(['first_name', 'last_name'])\n     *   .execute()\n     * ```\n     */\n    createIndex(indexName) {\n        return new CreateIndexBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateIndexNode.create(indexName),\n        });\n    }\n    /**\n     * Drop an index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropIndex('person_full_name_unique_index')\n     *   .execute()\n     * ```\n     */\n    dropIndex(indexName) {\n        return new DropIndexBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropIndexNode.create(indexName),\n        });\n    }\n    /**\n     * Create a new schema.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createSchema('some_schema')\n     *   .execute()\n     * ```\n     */\n    createSchema(schema) {\n        return new CreateSchemaBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateSchemaNode.create(schema),\n        });\n    }\n    /**\n     * Drop a schema.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropSchema('some_schema')\n     *   .execute()\n     * ```\n     */\n    dropSchema(schema) {\n        return new DropSchemaBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropSchemaNode.create(schema),\n        });\n    }\n    /**\n     * Alter a table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .alterColumn('first_name', (ac) => ac.setDataType('text'))\n     *   .execute()\n     * ```\n     */\n    alterTable(table) {\n        return new AlterTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: AlterTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Create a new view.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createView('dogs')\n     *   .orReplace()\n     *   .as(db.selectFrom('pet').selectAll().where('species', '=', 'dog'))\n     *   .execute()\n     * ```\n     */\n    createView(viewName) {\n        return new CreateViewBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateViewNode.create(viewName),\n        });\n    }\n    /**\n     * Drop a view.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropView('dogs')\n     *   .ifExists()\n     *   .execute()\n     * ```\n     */\n    dropView(viewName) {\n        return new DropViewBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropViewNode.create(viewName),\n        });\n    }\n    /**\n     * Create a new type.\n     *\n     * Only some dialects like PostgreSQL have user-defined types.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createType('species')\n     *   .asEnum(['dog', 'cat', 'frog'])\n     *   .execute()\n     * ```\n     */\n    createType(typeName) {\n        return new CreateTypeBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateTypeNode.create(parseSchemableIdentifier(typeName)),\n        });\n    }\n    /**\n     * Drop a type.\n     *\n     * Only some dialects like PostgreSQL have user-defined types.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropType('species')\n     *   .ifExists()\n     *   .execute()\n     * ```\n     */\n    dropType(typeName) {\n        return new DropTypeBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropTypeNode.create(parseSchemableIdentifier(typeName)),\n        });\n    }\n    /**\n     * Returns a copy of this schema module with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new SchemaModule(this.#executor.withPlugin(plugin));\n    }\n    /**\n     * Returns a copy of this schema module  without any plugins.\n     */\n    withoutPlugins() {\n        return new SchemaModule(this.#executor.withoutPlugins());\n    }\n    /**\n     * See {@link QueryCreator.withSchema}\n     */\n    withSchema(schema) {\n        return new SchemaModule(this.#executor.withPluginAtFront(new WithSchemaPlugin(schema)));\n    }\n}\n","/// <reference types=\"./dynamic.d.ts\" />\nimport { DynamicReferenceBuilder } from './dynamic-reference-builder.js';\nexport class DynamicModule {\n    /**\n     * Creates a dynamic reference to a column that is not know at compile time.\n     *\n     * Kysely is built in a way that by default you can't refer to tables or columns\n     * that are not actually visible in the current query and context. This is all\n     * done by typescript at compile time, which means that you need to know the\n     * columns and tables at compile time. This is not always the case of course.\n     *\n     * This method is meant to be used in those cases where the column names\n     * come from the user input or are not otherwise known at compile time.\n     *\n     * WARNING! Unlike values, column names are not escaped by the database engine\n     * or Kysely and if you pass in unchecked column names using this method, you\n     * create an SQL injection vulnerability. Always __always__ validate the user\n     * input before passing it to this method.\n     *\n     * There are couple of examples below for some use cases, but you can pass\n     * `ref` to other methods as well. If the types allow you to pass a `ref`\n     * value to some place, it should work.\n     *\n     * ### Examples\n     *\n     * Filter by a column not know at compile time:\n     *\n     * ```ts\n     * async function someQuery(filterColumn: string, filterValue: string) {\n     *   const { ref } = db.dynamic\n     *\n     *   return await db\n     *     .selectFrom('person')\n     *     .selectAll()\n     *     .where(ref(filterColumn), '=', filterValue)\n     *     .execute()\n     * }\n     *\n     * someQuery('first_name', 'Arnold')\n     * someQuery('person.last_name', 'Aniston')\n     * ```\n     *\n     * Order by a column not know at compile time:\n     *\n     * ```ts\n     * async function someQuery(orderBy: string) {\n     *   const { ref } = db.dynamic\n     *\n     *   return await db\n     *     .selectFrom('person')\n     *     .select('person.first_name as fn')\n     *     .orderBy(ref(orderBy))\n     *     .execute()\n     * }\n     *\n     * someQuery('fn')\n     * ```\n     *\n     * In this example we add selections dynamically:\n     *\n     * ```ts\n     * const { ref } = db.dynamic\n     *\n     * // Some column name provided by the user. Value not known at compile time.\n     * const columnFromUserInput = req.query.select;\n     *\n     * // A type that lists all possible values `columnFromUserInput` can have.\n     * // You can use `keyof Person` if any column of an interface is allowed.\n     * type PossibleColumns = 'last_name' | 'first_name' | 'birth_date'\n     *\n     * const [person] = await db.selectFrom('person')\n     *   .select([\n     *     ref<PossibleColumns>(columnFromUserInput),\n     *     'id'\n     *   ])\n     *   .execute()\n     *\n     * // The resulting type contains all `PossibleColumns` as optional fields\n     * // because we cannot know which field was actually selected before\n     * // running the code.\n     * const lastName: string | undefined = person.last_name\n     * const firstName: string | undefined = person.first_name\n     * const birthDate: string | undefined = person.birth_date\n     *\n     * // The result type also contains the compile time selection `id`.\n     * person.id\n     * ```\n     */\n    ref(reference) {\n        return new DynamicReferenceBuilder(reference);\n    }\n}\n","/// <reference types=\"./default-connection-provider.d.ts\" />\nexport class DefaultConnectionProvider {\n    #driver;\n    constructor(driver) {\n        this.#driver = driver;\n    }\n    async provideConnection(consumer) {\n        const connection = await this.#driver.acquireConnection();\n        try {\n            return await consumer(connection);\n        }\n        finally {\n            await this.#driver.releaseConnection(connection);\n        }\n    }\n}\n","/// <reference types=\"./default-query-executor.d.ts\" />\nimport { QueryExecutorBase } from './query-executor-base.js';\nexport class DefaultQueryExecutor extends QueryExecutorBase {\n    #compiler;\n    #adapter;\n    #connectionProvider;\n    constructor(compiler, adapter, connectionProvider, plugins = []) {\n        super(plugins);\n        this.#compiler = compiler;\n        this.#adapter = adapter;\n        this.#connectionProvider = connectionProvider;\n    }\n    get adapter() {\n        return this.#adapter;\n    }\n    compileQuery(node) {\n        return this.#compiler.compileQuery(node);\n    }\n    provideConnection(consumer) {\n        return this.#connectionProvider.provideConnection(consumer);\n    }\n    withPlugins(plugins) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [...this.plugins, ...plugins]);\n    }\n    withPlugin(plugin) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [...this.plugins, plugin]);\n    }\n    withPluginAtFront(plugin) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [plugin, ...this.plugins]);\n    }\n    withConnectionProvider(connectionProvider) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, connectionProvider, [...this.plugins]);\n    }\n    withoutPlugins() {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, []);\n    }\n}\n","/// <reference types=\"./performance-now.d.ts\" />\nimport { isFunction } from './object-utils.js';\nexport function performanceNow() {\n    if (typeof performance !== 'undefined' && isFunction(performance.now)) {\n        return performance.now();\n    }\n    else {\n        return Date.now();\n    }\n}\n","/// <reference types=\"./runtime-driver.d.ts\" />\nimport { performanceNow } from '../util/performance-now.js';\n/**\n * A small wrapper around {@link Driver} that makes sure the driver is\n * initialized before it is used, only initialized and destroyed\n * once etc.\n */\nexport class RuntimeDriver {\n    #driver;\n    #log;\n    #initPromise;\n    #initDone;\n    #destroyPromise;\n    #connections = new WeakSet();\n    constructor(driver, log) {\n        this.#initDone = false;\n        this.#driver = driver;\n        this.#log = log;\n    }\n    async init() {\n        if (this.#destroyPromise) {\n            throw new Error('driver has already been destroyed');\n        }\n        if (!this.#initPromise) {\n            this.#initPromise = this.#driver\n                .init()\n                .then(() => {\n                this.#initDone = true;\n            })\n                .catch((err) => {\n                this.#initPromise = undefined;\n                return Promise.reject(err);\n            });\n        }\n        await this.#initPromise;\n    }\n    async acquireConnection() {\n        if (this.#destroyPromise) {\n            throw new Error('driver has already been destroyed');\n        }\n        if (!this.#initDone) {\n            await this.init();\n        }\n        const connection = await this.#driver.acquireConnection();\n        if (!this.#connections.has(connection)) {\n            if (this.#needsLogging()) {\n                this.#addLogging(connection);\n            }\n            this.#connections.add(connection);\n        }\n        return connection;\n    }\n    async releaseConnection(connection) {\n        await this.#driver.releaseConnection(connection);\n    }\n    beginTransaction(connection, settings) {\n        return this.#driver.beginTransaction(connection, settings);\n    }\n    commitTransaction(connection) {\n        return this.#driver.commitTransaction(connection);\n    }\n    rollbackTransaction(connection) {\n        return this.#driver.rollbackTransaction(connection);\n    }\n    async destroy() {\n        if (!this.#initPromise) {\n            return;\n        }\n        await this.#initPromise;\n        if (!this.#destroyPromise) {\n            this.#destroyPromise = this.#driver.destroy().catch((err) => {\n                this.#destroyPromise = undefined;\n                return Promise.reject(err);\n            });\n        }\n        await this.#destroyPromise;\n    }\n    #needsLogging() {\n        return (this.#log.isLevelEnabled('query') || this.#log.isLevelEnabled('error'));\n    }\n    // This method monkey patches the database connection's executeQuery method\n    // by adding logging code around it. Monkey patching is not pretty, but it's\n    // the best option in this case.\n    #addLogging(connection) {\n        const executeQuery = connection.executeQuery;\n        connection.executeQuery = async (compiledQuery) => {\n            let caughtError;\n            const startTime = performanceNow();\n            try {\n                return await executeQuery.call(connection, compiledQuery);\n            }\n            catch (error) {\n                caughtError = error;\n                await this.#logError(error, compiledQuery, startTime);\n                throw error;\n            }\n            finally {\n                if (!caughtError) {\n                    await this.#logQuery(compiledQuery, startTime);\n                }\n            }\n        };\n    }\n    async #logError(error, compiledQuery, startTime) {\n        await this.#log.error(() => ({\n            level: 'error',\n            error,\n            query: compiledQuery,\n            queryDurationMillis: this.#calculateDurationMillis(startTime),\n        }));\n    }\n    async #logQuery(compiledQuery, startTime) {\n        await this.#log.query(() => ({\n            level: 'query',\n            query: compiledQuery,\n            queryDurationMillis: this.#calculateDurationMillis(startTime),\n        }));\n    }\n    #calculateDurationMillis(startTime) {\n        return performanceNow() - startTime;\n    }\n}\n","/// <reference types=\"./single-connection-provider.d.ts\" />\nconst ignoreError = () => { };\nexport class SingleConnectionProvider {\n    #connection;\n    #runningPromise;\n    constructor(connection) {\n        this.#connection = connection;\n    }\n    async provideConnection(consumer) {\n        while (this.#runningPromise) {\n            await this.#runningPromise.catch(ignoreError);\n        }\n        // `#runningPromise` must be set to undefined before it's\n        // resolved or rejected. Otherwise the while loop above\n        // will misbehave.\n        this.#runningPromise = this.#run(consumer).finally(() => {\n            this.#runningPromise = undefined;\n        });\n        return this.#runningPromise;\n    }\n    // Run the runner in an async function to make sure it doesn't\n    // throw synchronous errors.\n    async #run(runner) {\n        return await runner(this.#connection);\n    }\n}\n","/// <reference types=\"./driver.d.ts\" />\nexport const TRANSACTION_ISOLATION_LEVELS = [\n    'read uncommitted',\n    'read committed',\n    'repeatable read',\n    'serializable',\n    'snapshot',\n];\n","/// <reference types=\"./log.d.ts\" />\nimport { freeze, isFunction } from './object-utils.js';\nexport const LOG_LEVELS = freeze(['query', 'error']);\nexport class Log {\n    #levels;\n    #logger;\n    constructor(config) {\n        if (isFunction(config)) {\n            this.#logger = config;\n            this.#levels = freeze({\n                query: true,\n                error: true,\n            });\n        }\n        else {\n            this.#logger = defaultLogger;\n            this.#levels = freeze({\n                query: config.includes('query'),\n                error: config.includes('error'),\n            });\n        }\n    }\n    isLevelEnabled(level) {\n        return this.#levels[level];\n    }\n    async query(getEvent) {\n        if (this.#levels.query) {\n            await this.#logger(getEvent());\n        }\n    }\n    async error(getEvent) {\n        if (this.#levels.error) {\n            await this.#logger(getEvent());\n        }\n    }\n}\nfunction defaultLogger(event) {\n    if (event.level === 'query') {\n        console.log(`kysely:query: ${event.query.sql}`);\n        console.log(`kysely:query: duration: ${event.queryDurationMillis.toFixed(1)}ms`);\n    }\n    else if (event.level === 'error') {\n        if (event.error instanceof Error) {\n            console.error(`kysely:error: ${event.error.stack ?? event.error.message}`);\n        }\n        else {\n            console.error(`kysely:error: ${JSON.stringify({\n                error: event.error,\n                query: event.query.sql,\n                queryDurationMillis: event.queryDurationMillis,\n            })}`);\n        }\n    }\n}\n","/// <reference types=\"./kysely.d.ts\" />\nimport { SchemaModule } from './schema/schema.js';\nimport { DynamicModule } from './dynamic/dynamic.js';\nimport { DefaultConnectionProvider } from './driver/default-connection-provider.js';\nimport { QueryCreator } from './query-creator.js';\nimport { DefaultQueryExecutor } from './query-executor/default-query-executor.js';\nimport { freeze, isObject, isUndefined } from './util/object-utils.js';\nimport { RuntimeDriver } from './driver/runtime-driver.js';\nimport { SingleConnectionProvider } from './driver/single-connection-provider.js';\nimport { TRANSACTION_ISOLATION_LEVELS, } from './driver/driver.js';\nimport { preventAwait } from './util/prevent-await.js';\nimport { createFunctionModule, } from './query-builder/function-module.js';\nimport { Log } from './util/log.js';\nimport { createQueryId } from './util/query-id.js';\nimport { isCompilable } from './util/compilable.js';\nimport { CaseBuilder } from './query-builder/case-builder.js';\nimport { CaseNode } from './operation-node/case-node.js';\nimport { parseExpression } from './parser/expression-parser.js';\nimport { WithSchemaPlugin } from './plugin/with-schema/with-schema-plugin.js';\n/**\n * The main Kysely class.\n *\n * You should create one instance of `Kysely` per database using the {@link Kysely}\n * constructor. Each `Kysely` instance maintains it's own connection pool.\n *\n * ### Examples\n *\n * This example assumes your database has tables `person` and `pet`:\n *\n * ```ts\n * import { Kysely, Generated, PostgresDialect } from 'kysely'\n *\n * interface PersonTable {\n *   id: Generated<number>\n *   first_name: string\n *   last_name: string\n * }\n *\n * interface PetTable {\n *   id: Generated<number>\n *   owner_id: number\n *   name: string\n *   species: 'cat' | 'dog'\n * }\n *\n * interface Database {\n *   person: PersonTable,\n *   pet: PetTable\n * }\n *\n * const db = new Kysely<Database>({\n *   dialect: new PostgresDialect({\n *     host: 'localhost',\n *     database: 'kysely_test',\n *   })\n * })\n * ```\n *\n * @typeParam DB - The database interface type. Keys of this type must be table names\n *    in the database and values must be interfaces that describe the rows in those\n *    tables. See the examples above.\n */\nexport class Kysely extends QueryCreator {\n    #props;\n    constructor(args) {\n        let superProps;\n        let props;\n        if (isKyselyProps(args)) {\n            superProps = { executor: args.executor };\n            props = { ...args };\n        }\n        else {\n            const dialect = args.dialect;\n            const driver = dialect.createDriver();\n            const compiler = dialect.createQueryCompiler();\n            const adapter = dialect.createAdapter();\n            const log = new Log(args.log ?? []);\n            const runtimeDriver = new RuntimeDriver(driver, log);\n            const connectionProvider = new DefaultConnectionProvider(runtimeDriver);\n            const executor = new DefaultQueryExecutor(compiler, adapter, connectionProvider, args.plugins ?? []);\n            superProps = { executor };\n            props = {\n                config: args,\n                executor,\n                dialect,\n                driver: runtimeDriver,\n            };\n        }\n        super(superProps);\n        this.#props = freeze(props);\n    }\n    /**\n     * Returns the {@link SchemaModule} module for building database schema.\n     */\n    get schema() {\n        return new SchemaModule(this.#props.executor);\n    }\n    /**\n     * Returns a the {@link DynamicModule} module.\n     *\n     * The {@link DynamicModule} module can be used to bypass strict typing and\n     * passing in dynamic values for the queries.\n     */\n    get dynamic() {\n        return new DynamicModule();\n    }\n    /**\n     * Returns a {@link DatabaseIntrospector | database introspector}.\n     */\n    get introspection() {\n        return this.#props.dialect.createIntrospector(this.withoutPlugins());\n    }\n    case(value) {\n        return new CaseBuilder({\n            node: CaseNode.create(isUndefined(value) ? undefined : parseExpression(value)),\n        });\n    }\n    /**\n     * Returns a {@link FunctionModule} that can be used to write type safe function\n     * calls.\n     *\n     * ```ts\n     * await db.selectFrom('person')\n     *   .innerJoin('pet', 'pet.owner_id', 'person.id')\n     *   .select((eb) => [\n     *     'person.id',\n     *     eb.fn.count('pet.id').as('pet_count')\n     *   ])\n     *   .groupBy('person.id')\n     *   .having((eb) => eb.fn.count('pet.id'), '>', 10)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"person\".\"id\", count(\"pet\".\"id\") as \"pet_count\"\n     * from \"person\"\n     * inner join \"pet\" on \"pet\".\"owner_id\" = \"person\".\"id\"\n     * group by \"person\".\"id\"\n     * having count(\"pet\".\"id\") > $1\n     * ```\n     */\n    get fn() {\n        return createFunctionModule();\n    }\n    /**\n     * Creates a {@link TransactionBuilder} that can be used to run queries inside a transaction.\n     *\n     * The returned {@link TransactionBuilder} can be used to configure the transaction. The\n     * {@link TransactionBuilder.execute} method can then be called to run the transaction.\n     * {@link TransactionBuilder.execute} takes a function that is run inside the\n     * transaction. If the function throws, the transaction is rolled back. Otherwise\n     * the transaction is committed.\n     *\n     * The callback function passed to the {@link TransactionBuilder.execute | execute}\n     * method gets the transaction object as its only argument. The transaction is\n     * of type {@link Transaction} which inherits {@link Kysely}. Any query\n     * started through the transaction object is executed inside the transaction.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"transactions\", \"Simple transaction\", 10) -->\n     *\n     * This example inserts two rows in a transaction. If an error is thrown inside\n     * the callback passed to the `execute` method, the transaction is rolled back.\n     * Otherwise it's committed.\n     *\n     * ```ts\n     * const catto = await db.transaction().execute(async (trx) => {\n     *   const jennifer = await trx.insertInto('person')\n     *     .values({\n     *       first_name: 'Jennifer',\n     *       last_name: 'Aniston',\n     *       age: 40,\n     *     })\n     *     .returning('id')\n     *     .executeTakeFirstOrThrow()\n     *\n     *   return await trx.insertInto('pet')\n     *     .values({\n     *       owner_id: jennifer.id,\n     *       name: 'Catto',\n     *       species: 'cat',\n     *       is_favorite: false,\n     *     })\n     *     .returningAll()\n     *     .executeTakeFirst()\n     * })\n     * ```\n     *\n     * Setting the isolation level:\n     *\n     * ```ts\n     * await db\n     *   .transaction()\n     *   .setIsolationLevel('serializable')\n     *   .execute(async (trx) => {\n     *     await doStuff(trx)\n     *   })\n     * ```\n     */\n    transaction() {\n        return new TransactionBuilder({ ...this.#props });\n    }\n    /**\n     * Provides a kysely instance bound to a single database connection.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .connection()\n     *   .execute(async (db) => {\n     *     // `db` is an instance of `Kysely` that's bound to a single\n     *     // database connection. All queries executed through `db` use\n     *     // the same connection.\n     *     await doStuff(db)\n     *   })\n     * ```\n     */\n    connection() {\n        return new ConnectionBuilder({ ...this.#props });\n    }\n    /**\n     * Returns a copy of this Kysely instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    /**\n     * Returns a copy of this Kysely instance without any plugins.\n     */\n    withoutPlugins() {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    /**\n     * @override\n     */\n    withSchema(schema) {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n    /**\n     * Returns a copy of this Kysely instance with tables added to its\n     * database type.\n     *\n     * This method only modifies the types and doesn't affect any of the\n     * executed queries in any way.\n     *\n     * ### Examples\n     *\n     * The following example adds and uses a temporary table:\n     *\n     * @example\n     * ```ts\n     * await db.schema\n     *   .createTable('temp_table')\n     *   .temporary()\n     *   .addColumn('some_column', 'integer')\n     *   .execute()\n     *\n     * const tempDb = db.withTables<{\n     *   temp_table: {\n     *     some_column: number\n     *   }\n     * }>()\n     *\n     * await tempDb\n     *   .insertInto('temp_table')\n     *   .values({ some_column: 100 })\n     *   .execute()\n     * ```\n     */\n    withTables() {\n        return new Kysely({ ...this.#props });\n    }\n    /**\n     * Releases all resources and disconnects from the database.\n     *\n     * You need to call this when you are done using the `Kysely` instance.\n     */\n    async destroy() {\n        await this.#props.driver.destroy();\n    }\n    /**\n     * Returns true if this `Kysely` instance is a transaction.\n     *\n     * You can also use `db instanceof Transaction`.\n     */\n    get isTransaction() {\n        return false;\n    }\n    /**\n     * @internal\n     * @private\n     */\n    getExecutor() {\n        return this.#props.executor;\n    }\n    /**\n     * Executes a given compiled query or query builder.\n     *\n     * See {@link https://github.com/koskimas/kysely/blob/master/site/docs/recipes/splitting-build-compile-and-execute-code.md#execute-compiled-queries splitting build, compile and execute code recipe} for more information.\n     */\n    executeQuery(query, queryId = createQueryId()) {\n        const compiledQuery = isCompilable(query) ? query.compile() : query;\n        return this.getExecutor().executeQuery(compiledQuery, queryId);\n    }\n}\nexport class Transaction extends Kysely {\n    #props;\n    constructor(props) {\n        super(props);\n        this.#props = props;\n    }\n    // The return type is `true` instead of `boolean` to make Kysely<DB>\n    // unassignable to Transaction<DB> while allowing assignment the\n    // other way around.\n    get isTransaction() {\n        return true;\n    }\n    transaction() {\n        throw new Error('calling the transaction method for a Transaction is not supported');\n    }\n    connection() {\n        throw new Error('calling the connection method for a Transaction is not supported');\n    }\n    async destroy() {\n        throw new Error('calling the destroy method for a Transaction is not supported');\n    }\n    withPlugin(plugin) {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    withoutPlugins() {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    /**\n     * @override\n     */\n    withSchema(schema) {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n    withTables() {\n        return new Transaction({ ...this.#props });\n    }\n}\nexport function isKyselyProps(obj) {\n    return (isObject(obj) &&\n        isObject(obj.config) &&\n        isObject(obj.driver) &&\n        isObject(obj.executor) &&\n        isObject(obj.dialect));\n}\nexport class ConnectionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    async execute(callback) {\n        return this.#props.executor.provideConnection(async (connection) => {\n            const executor = this.#props.executor.withConnectionProvider(new SingleConnectionProvider(connection));\n            const db = new Kysely({\n                ...this.#props,\n                executor,\n            });\n            return await callback(db);\n        });\n    }\n}\npreventAwait(ConnectionBuilder, \"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method\");\nexport class TransactionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    setIsolationLevel(isolationLevel) {\n        return new TransactionBuilder({\n            ...this.#props,\n            isolationLevel,\n        });\n    }\n    async execute(callback) {\n        const { isolationLevel, ...kyselyProps } = this.#props;\n        const settings = { isolationLevel };\n        validateTransactionSettings(settings);\n        return this.#props.executor.provideConnection(async (connection) => {\n            const executor = this.#props.executor.withConnectionProvider(new SingleConnectionProvider(connection));\n            const transaction = new Transaction({\n                ...kyselyProps,\n                executor,\n            });\n            try {\n                await this.#props.driver.beginTransaction(connection, settings);\n                const result = await callback(transaction);\n                await this.#props.driver.commitTransaction(connection);\n                return result;\n            }\n            catch (error) {\n                await this.#props.driver.rollbackTransaction(connection);\n                throw error;\n            }\n        });\n    }\n}\npreventAwait(TransactionBuilder, \"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method\");\nfunction validateTransactionSettings(settings) {\n    if (settings.isolationLevel &&\n        !TRANSACTION_ISOLATION_LEVELS.includes(settings.isolationLevel)) {\n        throw new Error(`invalid transaction isolation level ${settings.isolationLevel}`);\n    }\n}\n","/// <reference types=\"./compilable.d.ts\" />\nimport { isFunction, isObject } from './object-utils.js';\nexport function isCompilable(value) {\n    return isObject(value) && isFunction(value.compile);\n}\n","/// <reference types=\"./dialect-adapter-base.d.ts\" />\n/**\n * A basic implementation of `DialectAdapter` with sensible default values.\n * 3rd party dialects can extend this instead of implementing the `DialectAdapter`\n * interface from scratch. That way all new settings will get default values when\n * they are added and there will be less breaking changes.\n */\nexport class DialectAdapterBase {\n    get supportsCreateIfNotExists() {\n        return true;\n    }\n    get supportsTransactionalDdl() {\n        return false;\n    }\n    get supportsReturning() {\n        return false;\n    }\n}\n","/// <reference types=\"./sqlite-adapter.d.ts\" />\nimport { DialectAdapterBase } from '../dialect-adapter-base.js';\nexport class SqliteAdapter extends DialectAdapterBase {\n    get supportsTransactionalDdl() {\n        return false;\n    }\n    get supportsReturning() {\n        return true;\n    }\n    async acquireMigrationLock(_db, _opt) {\n        // SQLite only has one connection that's reserved by the migration system\n        // for the whole time between acquireMigrationLock and releaseMigrationLock.\n        // We don't need to do anything here.\n    }\n    async releaseMigrationLock(_db, _opt) {\n        // SQLite only has one connection that's reserved by the migration system\n        // for the whole time between acquireMigrationLock and releaseMigrationLock.\n        // We don't need to do anything here.\n    }\n}\n","/// <reference types=\"./dummy-driver.d.ts\" />\n/**\n * A driver that does absolutely nothing.\n *\n * You can use this to create Kysely instances solely for building queries\n *\n * ### Examples\n *\n * This example creates a Kysely instance for building postgres queries:\n *\n * ```ts\n * const db = new Kysely<Database>({\n *   dialect: {\n *     createAdapter() {\n *       return new PostgresAdapter()\n *     },\n *     createDriver() {\n *       return new DummyDriver()\n *     },\n *     createIntrospector(db: Kysely<any>) {\n *       return new PostgresIntrospector(db)\n *     },\n *     createQueryCompiler() {\n *       return new PostgresQueryCompiler()\n *     },\n *   },\n * })\n * ```\n *\n * You can use it to build a query and compile it to SQL but trying to\n * execute the query will throw an error.\n *\n * ```ts\n * const { sql } = db.selectFrom('person').selectAll().compile()\n * console.log(sql) // select * from \"person\"\n * ```\n */\nexport class DummyDriver {\n    async init() {\n        // Nothing to do here.\n    }\n    async acquireConnection() {\n        return new DummyConnection();\n    }\n    async beginTransaction() {\n        // Nothing to do here.\n    }\n    async commitTransaction() {\n        // Nothing to do here.\n    }\n    async rollbackTransaction() {\n        // Nothing to do here.\n    }\n    async releaseConnection() {\n        // Nothing to do here.\n    }\n    async destroy() {\n        // Nothing to do here.\n    }\n}\nclass DummyConnection {\n    async executeQuery() {\n        return {\n            rows: [],\n        };\n    }\n    async *streamQuery() {\n        // Nothing to do here.\n    }\n}\n","/// <reference types=\"./operation-node-visitor.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport class OperationNodeVisitor {\n    nodeStack = [];\n    get parentNode() {\n        return this.nodeStack[this.nodeStack.length - 2];\n    }\n    #visitors = freeze({\n        AliasNode: this.visitAlias.bind(this),\n        ColumnNode: this.visitColumn.bind(this),\n        IdentifierNode: this.visitIdentifier.bind(this),\n        SchemableIdentifierNode: this.visitSchemableIdentifier.bind(this),\n        RawNode: this.visitRaw.bind(this),\n        ReferenceNode: this.visitReference.bind(this),\n        SelectQueryNode: this.visitSelectQuery.bind(this),\n        SelectionNode: this.visitSelection.bind(this),\n        TableNode: this.visitTable.bind(this),\n        FromNode: this.visitFrom.bind(this),\n        SelectAllNode: this.visitSelectAll.bind(this),\n        AndNode: this.visitAnd.bind(this),\n        OrNode: this.visitOr.bind(this),\n        ValueNode: this.visitValue.bind(this),\n        ValueListNode: this.visitValueList.bind(this),\n        PrimitiveValueListNode: this.visitPrimitiveValueList.bind(this),\n        ParensNode: this.visitParens.bind(this),\n        JoinNode: this.visitJoin.bind(this),\n        OperatorNode: this.visitOperator.bind(this),\n        WhereNode: this.visitWhere.bind(this),\n        InsertQueryNode: this.visitInsertQuery.bind(this),\n        DeleteQueryNode: this.visitDeleteQuery.bind(this),\n        ReturningNode: this.visitReturning.bind(this),\n        CreateTableNode: this.visitCreateTable.bind(this),\n        AddColumnNode: this.visitAddColumn.bind(this),\n        ColumnDefinitionNode: this.visitColumnDefinition.bind(this),\n        DropTableNode: this.visitDropTable.bind(this),\n        DataTypeNode: this.visitDataType.bind(this),\n        OrderByNode: this.visitOrderBy.bind(this),\n        OrderByItemNode: this.visitOrderByItem.bind(this),\n        GroupByNode: this.visitGroupBy.bind(this),\n        GroupByItemNode: this.visitGroupByItem.bind(this),\n        UpdateQueryNode: this.visitUpdateQuery.bind(this),\n        ColumnUpdateNode: this.visitColumnUpdate.bind(this),\n        LimitNode: this.visitLimit.bind(this),\n        OffsetNode: this.visitOffset.bind(this),\n        OnConflictNode: this.visitOnConflict.bind(this),\n        OnDuplicateKeyNode: this.visitOnDuplicateKey.bind(this),\n        CreateIndexNode: this.visitCreateIndex.bind(this),\n        DropIndexNode: this.visitDropIndex.bind(this),\n        ListNode: this.visitList.bind(this),\n        PrimaryKeyConstraintNode: this.visitPrimaryKeyConstraint.bind(this),\n        UniqueConstraintNode: this.visitUniqueConstraint.bind(this),\n        ReferencesNode: this.visitReferences.bind(this),\n        CheckConstraintNode: this.visitCheckConstraint.bind(this),\n        WithNode: this.visitWith.bind(this),\n        CommonTableExpressionNode: this.visitCommonTableExpression.bind(this),\n        CommonTableExpressionNameNode: this.visitCommonTableExpressionName.bind(this),\n        HavingNode: this.visitHaving.bind(this),\n        CreateSchemaNode: this.visitCreateSchema.bind(this),\n        DropSchemaNode: this.visitDropSchema.bind(this),\n        AlterTableNode: this.visitAlterTable.bind(this),\n        DropColumnNode: this.visitDropColumn.bind(this),\n        RenameColumnNode: this.visitRenameColumn.bind(this),\n        AlterColumnNode: this.visitAlterColumn.bind(this),\n        ModifyColumnNode: this.visitModifyColumn.bind(this),\n        AddConstraintNode: this.visitAddConstraint.bind(this),\n        DropConstraintNode: this.visitDropConstraint.bind(this),\n        ForeignKeyConstraintNode: this.visitForeignKeyConstraint.bind(this),\n        CreateViewNode: this.visitCreateView.bind(this),\n        DropViewNode: this.visitDropView.bind(this),\n        GeneratedNode: this.visitGenerated.bind(this),\n        DefaultValueNode: this.visitDefaultValue.bind(this),\n        OnNode: this.visitOn.bind(this),\n        ValuesNode: this.visitValues.bind(this),\n        SelectModifierNode: this.visitSelectModifier.bind(this),\n        CreateTypeNode: this.visitCreateType.bind(this),\n        DropTypeNode: this.visitDropType.bind(this),\n        ExplainNode: this.visitExplain.bind(this),\n        DefaultInsertValueNode: this.visitDefaultInsertValue.bind(this),\n        AggregateFunctionNode: this.visitAggregateFunction.bind(this),\n        OverNode: this.visitOver.bind(this),\n        PartitionByNode: this.visitPartitionBy.bind(this),\n        PartitionByItemNode: this.visitPartitionByItem.bind(this),\n        SetOperationNode: this.visitSetOperation.bind(this),\n        BinaryOperationNode: this.visitBinaryOperation.bind(this),\n        UnaryOperationNode: this.visitUnaryOperation.bind(this),\n        UsingNode: this.visitUsing.bind(this),\n        FunctionNode: this.visitFunction.bind(this),\n        CaseNode: this.visitCase.bind(this),\n        WhenNode: this.visitWhen.bind(this),\n        JSONReferenceNode: this.visitJSONReference.bind(this),\n        JSONPathNode: this.visitJSONPath.bind(this),\n        JSONPathLegNode: this.visitJSONPathLeg.bind(this),\n        JSONOperatorChainNode: this.visitJSONOperatorChain.bind(this),\n        TupleNode: this.visitTuple.bind(this),\n        MergeQueryNode: this.visitMergeQuery.bind(this),\n        MatchedNode: this.visitMatched.bind(this),\n        AddIndexNode: this.visitAddIndex.bind(this),\n        CastNode: this.visitCast.bind(this),\n        FetchNode: this.visitFetch.bind(this),\n        TopNode: this.visitTop.bind(this),\n    });\n    visitNode = (node) => {\n        this.nodeStack.push(node);\n        this.#visitors[node.kind](node);\n        this.nodeStack.pop();\n    };\n}\n","/// <reference types=\"./default-query-compiler.d.ts\" />\nimport { CreateTableNode } from '../operation-node/create-table-node.js';\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { OperationNodeVisitor } from '../operation-node/operation-node-visitor.js';\nimport { OperatorNode } from '../operation-node/operator-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { freeze, isString, isNumber, isBoolean, isNull, isDate, isBigInt, } from '../util/object-utils.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { SetOperationNode } from '../operation-node/set-operation-node.js';\nimport { MergeQueryNode } from '../operation-node/merge-query-node.js';\nexport class DefaultQueryCompiler extends OperationNodeVisitor {\n    #sql = '';\n    #parameters = [];\n    get numParameters() {\n        return this.#parameters.length;\n    }\n    compileQuery(node) {\n        this.#sql = '';\n        this.#parameters = [];\n        this.visitNode(node);\n        return freeze({\n            query: node,\n            sql: this.getSql(),\n            parameters: [...this.#parameters],\n        });\n    }\n    getSql() {\n        return this.#sql;\n    }\n    visitSelectQuery(node) {\n        const wrapInParens = this.parentNode !== undefined &&\n            !ParensNode.is(this.parentNode) &&\n            !InsertQueryNode.is(this.parentNode) &&\n            !CreateTableNode.is(this.parentNode) &&\n            !CreateViewNode.is(this.parentNode) &&\n            !SetOperationNode.is(this.parentNode);\n        if (this.parentNode === undefined && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (wrapInParens) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('select');\n        if (node.distinctOn) {\n            this.append(' ');\n            this.compileDistinctOn(node.distinctOn);\n        }\n        if (node.frontModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.frontModifiers, ' ');\n        }\n        if (node.top) {\n            this.append(' ');\n            this.visitNode(node.top);\n        }\n        if (node.selections) {\n            this.append(' ');\n            this.compileList(node.selections);\n        }\n        if (node.from) {\n            this.append(' ');\n            this.visitNode(node.from);\n        }\n        if (node.joins) {\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.groupBy) {\n            this.append(' ');\n            this.visitNode(node.groupBy);\n        }\n        if (node.having) {\n            this.append(' ');\n            this.visitNode(node.having);\n        }\n        if (node.setOperations) {\n            this.append(' ');\n            this.compileList(node.setOperations, ' ');\n        }\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (node.offset) {\n            this.append(' ');\n            this.visitNode(node.offset);\n        }\n        if (node.fetch) {\n            this.append(' ');\n            this.visitNode(node.fetch);\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(this.sortSelectModifiers([...node.endModifiers]), ' ');\n        }\n        if (wrapInParens) {\n            this.append(')');\n        }\n    }\n    visitFrom(node) {\n        this.append('from ');\n        this.compileList(node.froms);\n    }\n    visitSelection(node) {\n        this.visitNode(node.selection);\n    }\n    visitColumn(node) {\n        this.visitNode(node.column);\n    }\n    compileDistinctOn(expressions) {\n        this.append('distinct on (');\n        this.compileList(expressions);\n        this.append(')');\n    }\n    compileList(nodes, separator = ', ') {\n        const lastIndex = nodes.length - 1;\n        for (let i = 0; i <= lastIndex; i++) {\n            this.visitNode(nodes[i]);\n            if (i < lastIndex) {\n                this.append(separator);\n            }\n        }\n    }\n    visitWhere(node) {\n        this.append('where ');\n        this.visitNode(node.where);\n    }\n    visitHaving(node) {\n        this.append('having ');\n        this.visitNode(node.having);\n    }\n    visitInsertQuery(node) {\n        const rootQueryNode = this.nodeStack.find(QueryNode.is);\n        const isSubQuery = rootQueryNode !== node;\n        if (!isSubQuery && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (isSubQuery && !MergeQueryNode.is(rootQueryNode)) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append(node.replace ? 'replace' : 'insert');\n        if (node.ignore) {\n            this.append(' ignore');\n        }\n        if (node.top) {\n            this.append(' ');\n            this.visitNode(node.top);\n        }\n        if (node.into) {\n            this.append(' into ');\n            this.visitNode(node.into);\n        }\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.values) {\n            this.append(' ');\n            this.visitNode(node.values);\n        }\n        if (node.defaultValues) {\n            this.append(' ');\n            this.append('default values');\n        }\n        if (node.onConflict) {\n            this.append(' ');\n            this.visitNode(node.onConflict);\n        }\n        if (node.onDuplicateKey) {\n            this.append(' ');\n            this.visitNode(node.onDuplicateKey);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (isSubQuery && !MergeQueryNode.is(rootQueryNode)) {\n            this.append(')');\n        }\n    }\n    visitValues(node) {\n        this.append('values ');\n        this.compileList(node.values);\n    }\n    visitDeleteQuery(node) {\n        const isSubQuery = this.nodeStack.find(QueryNode.is) !== node;\n        if (!isSubQuery && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (isSubQuery) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('delete ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        this.visitNode(node.from);\n        if (node.using) {\n            this.append(' ');\n            this.visitNode(node.using);\n        }\n        if (node.joins) {\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (isSubQuery) {\n            this.append(')');\n        }\n    }\n    visitReturning(node) {\n        this.append('returning ');\n        this.compileList(node.selections);\n    }\n    visitAlias(node) {\n        this.visitNode(node.node);\n        this.append(' as ');\n        this.visitNode(node.alias);\n    }\n    visitReference(node) {\n        if (node.table) {\n            this.visitNode(node.table);\n            this.append('.');\n        }\n        this.visitNode(node.column);\n    }\n    visitSelectAll(_) {\n        this.append('*');\n    }\n    visitIdentifier(node) {\n        this.append(this.getLeftIdentifierWrapper());\n        this.compileUnwrappedIdentifier(node);\n        this.append(this.getRightIdentifierWrapper());\n    }\n    compileUnwrappedIdentifier(node) {\n        if (!isString(node.name)) {\n            throw new Error('a non-string identifier was passed to compileUnwrappedIdentifier.');\n        }\n        this.append(this.sanitizeIdentifier(node.name));\n    }\n    visitAnd(node) {\n        this.visitNode(node.left);\n        this.append(' and ');\n        this.visitNode(node.right);\n    }\n    visitOr(node) {\n        this.visitNode(node.left);\n        this.append(' or ');\n        this.visitNode(node.right);\n    }\n    visitValue(node) {\n        if (node.immediate) {\n            this.appendImmediateValue(node.value);\n        }\n        else {\n            this.appendValue(node.value);\n        }\n    }\n    visitValueList(node) {\n        this.append('(');\n        this.compileList(node.values);\n        this.append(')');\n    }\n    visitTuple(node) {\n        this.append('(');\n        this.compileList(node.values);\n        this.append(')');\n    }\n    visitPrimitiveValueList(node) {\n        this.append('(');\n        const { values } = node;\n        for (let i = 0; i < values.length; ++i) {\n            this.appendValue(values[i]);\n            if (i !== values.length - 1) {\n                this.append(', ');\n            }\n        }\n        this.append(')');\n    }\n    visitParens(node) {\n        this.append('(');\n        this.visitNode(node.node);\n        this.append(')');\n    }\n    visitJoin(node) {\n        this.append(JOIN_TYPE_SQL[node.joinType]);\n        this.append(' ');\n        this.visitNode(node.table);\n        if (node.on) {\n            this.append(' ');\n            this.visitNode(node.on);\n        }\n    }\n    visitOn(node) {\n        this.append('on ');\n        this.visitNode(node.on);\n    }\n    visitRaw(node) {\n        const { sqlFragments, parameters: params } = node;\n        for (let i = 0; i < sqlFragments.length; ++i) {\n            this.append(sqlFragments[i]);\n            if (params.length > i) {\n                this.visitNode(params[i]);\n            }\n        }\n    }\n    visitOperator(node) {\n        this.append(node.operator);\n    }\n    visitTable(node) {\n        this.visitNode(node.table);\n    }\n    visitSchemableIdentifier(node) {\n        if (node.schema) {\n            this.visitNode(node.schema);\n            this.append('.');\n        }\n        this.visitNode(node.identifier);\n    }\n    visitCreateTable(node) {\n        this.append('create ');\n        if (node.frontModifiers && node.frontModifiers.length > 0) {\n            this.compileList(node.frontModifiers, ' ');\n            this.append(' ');\n        }\n        if (node.temporary) {\n            this.append('temporary ');\n        }\n        this.append('table ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.table);\n        if (node.selectQuery) {\n            this.append(' as ');\n            this.visitNode(node.selectQuery);\n        }\n        else {\n            this.append(' (');\n            this.compileList([...node.columns, ...(node.constraints ?? [])]);\n            this.append(')');\n            if (node.onCommit) {\n                this.append(' on commit ');\n                this.append(node.onCommit);\n            }\n            if (node.endModifiers && node.endModifiers.length > 0) {\n                this.append(' ');\n                this.compileList(node.endModifiers, ' ');\n            }\n        }\n    }\n    visitColumnDefinition(node) {\n        this.visitNode(node.column);\n        this.append(' ');\n        this.visitNode(node.dataType);\n        if (node.unsigned) {\n            this.append(' unsigned');\n        }\n        if (node.frontModifiers && node.frontModifiers.length > 0) {\n            this.append(' ');\n            this.compileList(node.frontModifiers, ' ');\n        }\n        if (node.generated) {\n            this.append(' ');\n            this.visitNode(node.generated);\n        }\n        if (node.identity) {\n            this.append(' identity');\n        }\n        if (node.defaultTo) {\n            this.append(' ');\n            this.visitNode(node.defaultTo);\n        }\n        if (node.notNull) {\n            this.append(' not null');\n        }\n        if (node.unique) {\n            this.append(' unique');\n        }\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        if (node.primaryKey) {\n            this.append(' primary key');\n        }\n        if (node.autoIncrement) {\n            this.append(' ');\n            this.append(this.getAutoIncrement());\n        }\n        if (node.references) {\n            this.append(' ');\n            this.visitNode(node.references);\n        }\n        if (node.check) {\n            this.append(' ');\n            this.visitNode(node.check);\n        }\n        if (node.endModifiers && node.endModifiers.length > 0) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    getAutoIncrement() {\n        return 'auto_increment';\n    }\n    visitReferences(node) {\n        this.append('references ');\n        this.visitNode(node.table);\n        this.append(' (');\n        this.compileList(node.columns);\n        this.append(')');\n        if (node.onDelete) {\n            this.append(' on delete ');\n            this.append(node.onDelete);\n        }\n        if (node.onUpdate) {\n            this.append(' on update ');\n            this.append(node.onUpdate);\n        }\n    }\n    visitDropTable(node) {\n        this.append('drop table ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.table);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitDataType(node) {\n        this.append(node.dataType);\n    }\n    visitOrderBy(node) {\n        this.append('order by ');\n        this.compileList(node.items);\n    }\n    visitOrderByItem(node) {\n        this.visitNode(node.orderBy);\n        if (node.direction) {\n            this.append(' ');\n            this.visitNode(node.direction);\n        }\n    }\n    visitGroupBy(node) {\n        this.append('group by ');\n        this.compileList(node.items);\n    }\n    visitGroupByItem(node) {\n        this.visitNode(node.groupBy);\n    }\n    visitUpdateQuery(node) {\n        const rootQueryNode = this.nodeStack.find(QueryNode.is);\n        const isSubQuery = rootQueryNode !== node;\n        if (!isSubQuery && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (isSubQuery && !MergeQueryNode.is(rootQueryNode)) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('update ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        if (node.table) {\n            this.visitNode(node.table);\n            this.append(' ');\n        }\n        this.append('set ');\n        if (node.updates) {\n            this.compileList(node.updates);\n        }\n        if (node.from) {\n            this.append(' ');\n            this.visitNode(node.from);\n        }\n        if (node.joins) {\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (isSubQuery && !MergeQueryNode.is(rootQueryNode)) {\n            this.append(')');\n        }\n    }\n    visitColumnUpdate(node) {\n        this.visitNode(node.column);\n        this.append(' = ');\n        this.visitNode(node.value);\n    }\n    visitLimit(node) {\n        this.append('limit ');\n        this.visitNode(node.limit);\n    }\n    visitOffset(node) {\n        this.append('offset ');\n        this.visitNode(node.offset);\n    }\n    visitOnConflict(node) {\n        this.append('on conflict');\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        else if (node.constraint) {\n            this.append(' on constraint ');\n            this.visitNode(node.constraint);\n        }\n        else if (node.indexExpression) {\n            this.append(' (');\n            this.visitNode(node.indexExpression);\n            this.append(')');\n        }\n        if (node.indexWhere) {\n            this.append(' ');\n            this.visitNode(node.indexWhere);\n        }\n        if (node.doNothing === true) {\n            this.append(' do nothing');\n        }\n        else if (node.updates) {\n            this.append(' do update set ');\n            this.compileList(node.updates);\n            if (node.updateWhere) {\n                this.append(' ');\n                this.visitNode(node.updateWhere);\n            }\n        }\n    }\n    visitOnDuplicateKey(node) {\n        this.append('on duplicate key update ');\n        this.compileList(node.updates);\n    }\n    visitCreateIndex(node) {\n        this.append('create ');\n        if (node.unique) {\n            this.append('unique ');\n        }\n        this.append('index ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.name);\n        if (node.table) {\n            this.append(' on ');\n            this.visitNode(node.table);\n        }\n        if (node.using) {\n            this.append(' using ');\n            this.visitNode(node.using);\n        }\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n    }\n    visitDropIndex(node) {\n        this.append('drop index ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n        if (node.table) {\n            this.append(' on ');\n            this.visitNode(node.table);\n        }\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitCreateSchema(node) {\n        this.append('create schema ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.schema);\n    }\n    visitDropSchema(node) {\n        this.append('drop schema ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.schema);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitPrimaryKeyConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('primary key (');\n        this.compileList(node.columns);\n        this.append(')');\n    }\n    visitUniqueConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('unique');\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        this.append(' (');\n        this.compileList(node.columns);\n        this.append(')');\n    }\n    visitCheckConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('check (');\n        this.visitNode(node.expression);\n        this.append(')');\n    }\n    visitForeignKeyConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('foreign key (');\n        this.compileList(node.columns);\n        this.append(') ');\n        this.visitNode(node.references);\n        if (node.onDelete) {\n            this.append(' on delete ');\n            this.append(node.onDelete);\n        }\n        if (node.onUpdate) {\n            this.append(' on update ');\n            this.append(node.onUpdate);\n        }\n    }\n    visitList(node) {\n        this.compileList(node.items);\n    }\n    visitWith(node) {\n        this.append('with ');\n        if (node.recursive) {\n            this.append('recursive ');\n        }\n        this.compileList(node.expressions);\n    }\n    visitCommonTableExpression(node) {\n        this.visitNode(node.name);\n        this.append(' as ');\n        if (isBoolean(node.materialized)) {\n            if (!node.materialized) {\n                this.append('not ');\n            }\n            this.append('materialized ');\n        }\n        this.visitNode(node.expression);\n    }\n    visitCommonTableExpressionName(node) {\n        this.visitNode(node.table);\n        if (node.columns) {\n            this.append('(');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n    }\n    visitAlterTable(node) {\n        this.append('alter table ');\n        this.visitNode(node.table);\n        this.append(' ');\n        if (node.renameTo) {\n            this.append('rename to ');\n            this.visitNode(node.renameTo);\n        }\n        if (node.setSchema) {\n            this.append('set schema ');\n            this.visitNode(node.setSchema);\n        }\n        if (node.addConstraint) {\n            this.visitNode(node.addConstraint);\n        }\n        if (node.dropConstraint) {\n            this.visitNode(node.dropConstraint);\n        }\n        if (node.columnAlterations) {\n            this.compileColumnAlterations(node.columnAlterations);\n        }\n        if (node.addIndex) {\n            this.visitNode(node.addIndex);\n        }\n        if (node.dropIndex) {\n            this.visitNode(node.dropIndex);\n        }\n    }\n    visitAddColumn(node) {\n        this.append('add column ');\n        this.visitNode(node.column);\n    }\n    visitRenameColumn(node) {\n        this.append('rename column ');\n        this.visitNode(node.column);\n        this.append(' to ');\n        this.visitNode(node.renameTo);\n    }\n    visitDropColumn(node) {\n        this.append('drop column ');\n        this.visitNode(node.column);\n    }\n    visitAlterColumn(node) {\n        this.append('alter column ');\n        this.visitNode(node.column);\n        this.append(' ');\n        if (node.dataType) {\n            if (this.announcesNewColumnDataType()) {\n                this.append('type ');\n            }\n            this.visitNode(node.dataType);\n            if (node.dataTypeExpression) {\n                this.append('using ');\n                this.visitNode(node.dataTypeExpression);\n            }\n        }\n        if (node.setDefault) {\n            this.append('set default ');\n            this.visitNode(node.setDefault);\n        }\n        if (node.dropDefault) {\n            this.append('drop default');\n        }\n        if (node.setNotNull) {\n            this.append('set not null');\n        }\n        if (node.dropNotNull) {\n            this.append('drop not null');\n        }\n    }\n    visitModifyColumn(node) {\n        this.append('modify column ');\n        this.visitNode(node.column);\n    }\n    visitAddConstraint(node) {\n        this.append('add ');\n        this.visitNode(node.constraint);\n    }\n    visitDropConstraint(node) {\n        this.append('drop constraint ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.constraintName);\n        if (node.modifier === 'cascade') {\n            this.append(' cascade');\n        }\n        else if (node.modifier === 'restrict') {\n            this.append(' restrict');\n        }\n    }\n    visitSetOperation(node) {\n        this.append(node.operator);\n        this.append(' ');\n        if (node.all) {\n            this.append('all ');\n        }\n        this.visitNode(node.expression);\n    }\n    visitCreateView(node) {\n        this.append('create ');\n        if (node.orReplace) {\n            this.append('or replace ');\n        }\n        if (node.materialized) {\n            this.append('materialized ');\n        }\n        if (node.temporary) {\n            this.append('temporary ');\n        }\n        this.append('view ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.name);\n        this.append(' ');\n        if (node.columns) {\n            this.append('(');\n            this.compileList(node.columns);\n            this.append(') ');\n        }\n        if (node.as) {\n            this.append('as ');\n            this.visitNode(node.as);\n        }\n    }\n    visitDropView(node) {\n        this.append('drop ');\n        if (node.materialized) {\n            this.append('materialized ');\n        }\n        this.append('view ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitGenerated(node) {\n        this.append('generated ');\n        if (node.always) {\n            this.append('always ');\n        }\n        if (node.byDefault) {\n            this.append('by default ');\n        }\n        this.append('as ');\n        if (node.identity) {\n            this.append('identity');\n        }\n        if (node.expression) {\n            this.append('(');\n            this.visitNode(node.expression);\n            this.append(')');\n        }\n        if (node.stored) {\n            this.append(' stored');\n        }\n    }\n    visitDefaultValue(node) {\n        this.append('default ');\n        this.visitNode(node.defaultValue);\n    }\n    visitSelectModifier(node) {\n        if (node.rawModifier) {\n            this.visitNode(node.rawModifier);\n        }\n        else {\n            this.append(SELECT_MODIFIER_SQL[node.modifier]);\n        }\n        if (node.of) {\n            this.append(' of ');\n            this.compileList(node.of, ', ');\n        }\n    }\n    visitCreateType(node) {\n        this.append('create type ');\n        this.visitNode(node.name);\n        if (node.enum) {\n            this.append(' as enum ');\n            this.visitNode(node.enum);\n        }\n    }\n    visitDropType(node) {\n        this.append('drop type ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n    }\n    visitExplain(node) {\n        this.append('explain');\n        if (node.options || node.format) {\n            this.append(' ');\n            this.append(this.getLeftExplainOptionsWrapper());\n            if (node.options) {\n                this.visitNode(node.options);\n                if (node.format) {\n                    this.append(this.getExplainOptionsDelimiter());\n                }\n            }\n            if (node.format) {\n                this.append('format');\n                this.append(this.getExplainOptionAssignment());\n                this.append(node.format);\n            }\n            this.append(this.getRightExplainOptionsWrapper());\n        }\n    }\n    visitDefaultInsertValue(_) {\n        this.append('default');\n    }\n    visitAggregateFunction(node) {\n        this.append(node.func);\n        this.append('(');\n        if (node.distinct) {\n            this.append('distinct ');\n        }\n        this.compileList(node.aggregated);\n        this.append(')');\n        if (node.filter) {\n            this.append(' filter(');\n            this.visitNode(node.filter);\n            this.append(')');\n        }\n        if (node.over) {\n            this.append(' ');\n            this.visitNode(node.over);\n        }\n    }\n    visitOver(node) {\n        this.append('over(');\n        if (node.partitionBy) {\n            this.visitNode(node.partitionBy);\n            if (node.orderBy) {\n                this.append(' ');\n            }\n        }\n        if (node.orderBy) {\n            this.visitNode(node.orderBy);\n        }\n        this.append(')');\n    }\n    visitPartitionBy(node) {\n        this.append('partition by ');\n        this.compileList(node.items);\n    }\n    visitPartitionByItem(node) {\n        this.visitNode(node.partitionBy);\n    }\n    visitBinaryOperation(node) {\n        this.visitNode(node.leftOperand);\n        this.append(' ');\n        this.visitNode(node.operator);\n        this.append(' ');\n        this.visitNode(node.rightOperand);\n    }\n    visitUnaryOperation(node) {\n        this.visitNode(node.operator);\n        if (!this.isMinusOperator(node.operator)) {\n            this.append(' ');\n        }\n        this.visitNode(node.operand);\n    }\n    isMinusOperator(node) {\n        return OperatorNode.is(node) && node.operator === '-';\n    }\n    visitUsing(node) {\n        this.append('using ');\n        this.compileList(node.tables);\n    }\n    visitFunction(node) {\n        this.append(node.func);\n        this.append('(');\n        this.compileList(node.arguments);\n        this.append(')');\n    }\n    visitCase(node) {\n        this.append('case');\n        if (node.value) {\n            this.append(' ');\n            this.visitNode(node.value);\n        }\n        if (node.when) {\n            this.append(' ');\n            this.compileList(node.when, ' ');\n        }\n        if (node.else) {\n            this.append(' else ');\n            this.visitNode(node.else);\n        }\n        this.append(' end');\n        if (node.isStatement) {\n            this.append(' case');\n        }\n    }\n    visitWhen(node) {\n        this.append('when ');\n        this.visitNode(node.condition);\n        if (node.result) {\n            this.append(' then ');\n            this.visitNode(node.result);\n        }\n    }\n    visitJSONReference(node) {\n        this.visitNode(node.reference);\n        this.visitNode(node.traversal);\n    }\n    visitJSONPath(node) {\n        if (node.inOperator) {\n            this.visitNode(node.inOperator);\n        }\n        this.append(\"'$\");\n        for (const pathLeg of node.pathLegs) {\n            this.visitNode(pathLeg);\n        }\n        this.append(\"'\");\n    }\n    visitJSONPathLeg(node) {\n        const isArrayLocation = node.type === 'ArrayLocation';\n        this.append(isArrayLocation ? '[' : '.');\n        this.append(String(node.value));\n        if (isArrayLocation) {\n            this.append(']');\n        }\n    }\n    visitJSONOperatorChain(node) {\n        for (let i = 0, len = node.values.length; i < len; i++) {\n            if (i === len - 1) {\n                this.visitNode(node.operator);\n            }\n            else {\n                this.append('->');\n            }\n            this.visitNode(node.values[i]);\n        }\n    }\n    visitMergeQuery(node) {\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('merge ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        this.append('into ');\n        this.visitNode(node.into);\n        if (node.using) {\n            this.append(' ');\n            this.visitNode(node.using);\n        }\n        if (node.whens) {\n            this.append(' ');\n            this.compileList(node.whens);\n        }\n    }\n    visitMatched(node) {\n        if (node.not) {\n            this.append('not ');\n        }\n        this.append('matched');\n        if (node.bySource) {\n            this.append(' by source');\n        }\n    }\n    visitAddIndex(node) {\n        this.append('add ');\n        if (node.unique) {\n            this.append('unique ');\n        }\n        this.append('index ');\n        this.visitNode(node.name);\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.using) {\n            this.append(' using ');\n            this.visitNode(node.using);\n        }\n    }\n    visitCast(node) {\n        this.append('cast(');\n        this.visitNode(node.expression);\n        this.append(' as ');\n        this.visitNode(node.dataType);\n        this.append(')');\n    }\n    visitFetch(node) {\n        this.append('fetch next ');\n        this.visitNode(node.rowCount);\n        this.append(` rows ${node.modifier}`);\n    }\n    visitTop(node) {\n        this.append(`top(${node.expression})`);\n        if (node.modifiers) {\n            this.append(` ${node.modifiers}`);\n        }\n    }\n    append(str) {\n        this.#sql += str;\n    }\n    appendValue(parameter) {\n        this.addParameter(parameter);\n        this.append(this.getCurrentParameterPlaceholder());\n    }\n    getLeftIdentifierWrapper() {\n        return '\"';\n    }\n    getRightIdentifierWrapper() {\n        return '\"';\n    }\n    getCurrentParameterPlaceholder() {\n        return '$' + this.numParameters;\n    }\n    getLeftExplainOptionsWrapper() {\n        return '(';\n    }\n    getExplainOptionAssignment() {\n        return ' ';\n    }\n    getExplainOptionsDelimiter() {\n        return ', ';\n    }\n    getRightExplainOptionsWrapper() {\n        return ')';\n    }\n    sanitizeIdentifier(identifier) {\n        const leftWrap = this.getLeftIdentifierWrapper();\n        const rightWrap = this.getRightIdentifierWrapper();\n        let sanitized = '';\n        for (const c of identifier) {\n            sanitized += c;\n            if (c === leftWrap) {\n                sanitized += leftWrap;\n            }\n            else if (c === rightWrap) {\n                sanitized += rightWrap;\n            }\n        }\n        return sanitized;\n    }\n    addParameter(parameter) {\n        this.#parameters.push(parameter);\n    }\n    appendImmediateValue(value) {\n        if (isString(value)) {\n            this.append(`'${value}'`);\n        }\n        else if (isNumber(value) || isBoolean(value)) {\n            this.append(value.toString());\n        }\n        else if (isNull(value)) {\n            this.append('null');\n        }\n        else if (isDate(value)) {\n            this.appendImmediateValue(value.toISOString());\n        }\n        else if (isBigInt(value)) {\n            this.appendImmediateValue(value.toString());\n        }\n        else {\n            throw new Error(`invalid immediate value ${value}`);\n        }\n    }\n    sortSelectModifiers(arr) {\n        arr.sort((left, right) => left.modifier && right.modifier\n            ? SELECT_MODIFIER_PRIORITY[left.modifier] -\n                SELECT_MODIFIER_PRIORITY[right.modifier]\n            : 1);\n        return freeze(arr);\n    }\n    compileColumnAlterations(columnAlterations) {\n        this.compileList(columnAlterations);\n    }\n    /**\n     * controls whether the dialect adds a \"type\" keyword before a column's new data\n     * type in an ALTER TABLE statement.\n     */\n    announcesNewColumnDataType() {\n        return true;\n    }\n}\nconst SELECT_MODIFIER_SQL = freeze({\n    ForKeyShare: 'for key share',\n    ForNoKeyUpdate: 'for no key update',\n    ForUpdate: 'for update',\n    ForShare: 'for share',\n    NoWait: 'nowait',\n    SkipLocked: 'skip locked',\n    Distinct: 'distinct',\n});\nconst SELECT_MODIFIER_PRIORITY = freeze({\n    ForKeyShare: 1,\n    ForNoKeyUpdate: 1,\n    ForUpdate: 1,\n    ForShare: 1,\n    NoWait: 2,\n    SkipLocked: 2,\n    Distinct: 0,\n});\nconst JOIN_TYPE_SQL = freeze({\n    InnerJoin: 'inner join',\n    LeftJoin: 'left join',\n    RightJoin: 'right join',\n    FullJoin: 'full join',\n    LateralInnerJoin: 'inner join lateral',\n    LateralLeftJoin: 'left join lateral',\n    Using: 'using',\n});\n","/// <reference types=\"./sqlite-query-compiler.d.ts\" />\nimport { DefaultQueryCompiler } from '../../query-compiler/default-query-compiler.js';\nconst ID_WRAP_REGEX = /\"/g;\nexport class SqliteQueryCompiler extends DefaultQueryCompiler {\n    getCurrentParameterPlaceholder() {\n        return '?';\n    }\n    getLeftExplainOptionsWrapper() {\n        return '';\n    }\n    getRightExplainOptionsWrapper() {\n        return '';\n    }\n    getLeftIdentifierWrapper() {\n        return '\"';\n    }\n    getRightIdentifierWrapper() {\n        return '\"';\n    }\n    getAutoIncrement() {\n        return 'autoincrement';\n    }\n    sanitizeIdentifier(identifier) {\n        return identifier.replace(ID_WRAP_REGEX, '\"\"');\n    }\n    visitDefaultInsertValue(_) {\n        // sqlite doesn't support the `default` keyword in inserts.\n        this.append('null');\n    }\n}\n","let syncTimeout;\nlet lockTimeout;\nlet socketTimeout;\nlet isLocked = false;\nconst SocketTimeout = 3000;\nconst SyncTimeout = 500;\nconst SyncLockTimeout = 500;\nlet socket;\nconst processWebsocketEvent = (sync, event) => {\n    if (typeof event.data === \"string\" || isLocked === true)\n        return;\n    clearTimeout(syncTimeout);\n    syncTimeout = undefined;\n    syncTimeout = setTimeout(() => {\n        isLocked = true;\n        sync({ refreshQueries: true })();\n        clearTimeout(syncTimeout);\n        clearTimeout(lockTimeout);\n        lockTimeout = setTimeout(() => {\n            isLocked = false;\n        }, SyncLockTimeout);\n    }, SyncTimeout);\n};\nexport const createSocket = (sync, config, owner) => {\n    if (config.externalWebsocketConnection) {\n        // Hook up to an external WebSocket connection\n        config.externalWebsocketConnection.send(JSON.stringify({ message: \"subscribe\", channelId: owner.id }));\n        config.externalWebsocketConnection.addEventListener(\"message\", (event) => processWebsocketEvent(sync, event));\n        return config.externalWebsocketConnection;\n    }\n    if (config.enableWebsocketConnection) {\n        // Create a WebSocket connection\n        socket = new WebSocket(config.syncUrl?.replace(\"http\", \"ws\"));\n        // Handle incoming WebSocket messages\n        socket.addEventListener(\"message\", (event) => processWebsocketEvent(sync, event));\n        // Handle WebSocket errors\n        socket.onerror = (error) => {\n            // eslint-disable-next-line no-console\n            console.error(\"WebSocket error:\", error);\n        };\n        // Handle WebSocket closure\n        socket.onclose = () => {\n            socketTimeout = setTimeout(() => createSocket(sync, config, owner), SocketTimeout);\n        };\n        socket.onopen = () => {\n            socket.send(JSON.stringify({ message: \"subscribe\", channelId: owner.id }));\n            clearTimeout(socketTimeout);\n        };\n        return socket;\n    }\n};\n","import * as AST from \"@effect/schema/AST\";\nimport { make } from \"@effect/schema/Schema\";\nimport * as Arr from \"effect/Array\";\nimport * as Context from \"effect/Context\";\nimport * as Effect from \"effect/Effect\";\nimport { constVoid, flow, pipe } from \"effect/Function\";\nimport * as Layer from \"effect/Layer\";\nimport * as Number from \"effect/Number\";\nimport * as Option from \"effect/Option\";\nimport * as Predicate from \"effect/Predicate\";\nimport * as Record from \"effect/Record\";\nimport * as Kysely from \"kysely\";\nimport { Config, createRuntime, defaultConfig } from \"./Config.js\";\nimport { NanoIdGenerator } from \"./Crypto.js\";\nimport { createSocket } from \"./Socket.js\";\nimport { DbFactory, deserializeQuery, emptyRows, queryResultFromRows, serializeQuery, } from \"./Db.js\";\nimport { applyPatches } from \"./Diff.js\";\nimport { makeUnexpectedError } from \"./Error.js\";\nimport { AppState, FlushSync } from \"./Platform.js\";\nimport { isSqlMutation, } from \"./Sqlite.js\";\nimport { makeStore } from \"./Store.js\";\nimport { initialSyncState } from \"./Sync.js\";\nexport class EvoluFactory extends Context.Tag(\"EvoluFactory\")() {\n}\nEvoluFactory.Common = Layer.effect(EvoluFactory, Effect.gen(function* () {\n    const flushSync = yield* Effect.map(Effect.serviceOption(FlushSync), Option.getOrElse(() => (callback) => callback()));\n    const context = Context.empty().pipe(Context.add(DbFactory, yield* DbFactory), Context.add(NanoIdGenerator, yield* NanoIdGenerator), Context.add(FlushSync, flushSync), Context.add(AppState, yield* AppState));\n    // For hot/live reloading and future Evolu dynamic import.\n    const instances = new Map();\n    return EvoluFactory.of({\n        createEvolu: (schema, { indexes, initialData, mnemonic, ...config } = {}) => {\n            const runtime = createRuntime(config);\n            const name = config?.name || defaultConfig.name;\n            const dbSchema = {\n                tables: schemaToTables(schema),\n                indexes: indexes || [],\n            };\n            let evolu = instances.get(name);\n            if (evolu == null) {\n                evolu = createEvolu(dbSchema, runtime, initialData, mnemonic).pipe(Effect.provide(context), runtime.runSync);\n                instances.set(name, evolu);\n            }\n            else {\n                evolu.ensureSchema(dbSchema);\n            }\n            return evolu;\n        },\n    });\n}));\nconst schemaToTables = (schema) => pipe(getPropertySignatures(schema), Record.toEntries, Arr.map(([name, schema]) => ({\n    name,\n    columns: Object.keys(getPropertySignatures(schema)),\n})));\n// TODO: Simplify.\n// https://discord.com/channels/795981131316985866/1218626687546294386/1218796529725476935\nconst getPropertySignatures = (schema) => {\n    const out = {};\n    const propertySignatures = AST.getPropertySignatures(schema.ast);\n    for (let i = 0; i < propertySignatures.length; i++) {\n        const propertySignature = propertySignatures[i];\n        out[propertySignature.name] = make(propertySignature.type);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return out;\n};\nconst createEvolu = (schema, runtime, initialData, mnemonic) => Effect.gen(function* () {\n    yield* Effect.logTrace(\"EvoluFactory createEvolu\");\n    const config = yield* Config;\n    const dbFactory = yield* DbFactory;\n    const appState = yield* AppState;\n    const nanoIdGenerator = yield* NanoIdGenerator;\n    const flushSync = yield* FlushSync;\n    const db = yield* dbFactory.createDb;\n    const errorStore = yield* makeStore(null);\n    const ownerStore = yield* makeStore(null);\n    const rowsStore = yield* makeStore(new Map());\n    const syncStateStore = yield* makeStore(initialSyncState);\n    const loadingPromises = new Map();\n    const subscribedQueries = new Map();\n    const handleAllErrors = (effect) => effect.pipe(Effect.catchAllDefect((error) => Effect.fail(makeUnexpectedError(error))), Effect.tapError(Effect.logError), Effect.tapError(errorStore.setState));\n    const runFork = flow(handleAllErrors, runtime.runFork);\n    const runSync = flow(handleAllErrors, runtime.runSync);\n    const runPromise = flow(handleAllErrors, runtime.runPromise);\n    const initialDataAsMutations = yield* Effect.provideService(initialDataToMutations(initialData), NanoIdGenerator, nanoIdGenerator);\n    const handleDbError = (error) => {\n        Effect.fail(error).pipe(runFork);\n    };\n    const handleSyncStateChange = (state) => {\n        Effect.logDebug([\"Evolu handleSyncStateChange\", { state }]).pipe(Effect.zipRight(syncStateStore.setState(state)), runFork);\n    };\n    const handleDbReceive = () => {\n        Effect.gen(function* () {\n            yield* Effect.logTrace(\"Evolu handleDbReceive\");\n            releaseUnsubscribedLoadingPromises();\n            const queries = [...subscribedQueries.keys()];\n            if (queries.length > 0) {\n                yield* Effect.flatMap(db.loadQueries(queries), handlePatches());\n            }\n        }).pipe(runFork);\n    };\n    const sync = ({ refreshQueries }) => () => {\n        Effect.flatMap(db.sync(refreshQueries ? [...subscribedQueries.keys()] : []), handlePatches()).pipe(runFork);\n    };\n    db.init(schema, initialDataAsMutations, handleDbError, handleSyncStateChange, handleDbReceive, mnemonic).pipe(Effect.tap(sync({ refreshQueries: false })), Effect.flatMap(ownerStore.setState), Effect.catchTag(\"NotSupportedPlatformError\", () => Effect.void), // no-op\n    runFork);\n    let socketResolved = false;\n    const socket = new Promise((resolve) => {\n        ownerStore.subscribe(() => {\n            const owner = ownerStore.getState();\n            if (!socketResolved && typeof owner?.id === \"string\") {\n                socketResolved = true;\n                resolve(createSocket(sync, config, owner));\n            }\n        });\n    });\n    const appStateReset = yield* appState.init({\n        onRequestSync: sync({ refreshQueries: true }),\n        reloadUrl: config.reloadUrl,\n    });\n    const handlePatches = (options) => (patches) => Effect.logDebug([\"Evolu handlePatches\", { patches }]).pipe(Effect.zipRight(rowsStoreStateFromPatches(patches)), Effect.tap((nextState) => Effect.forEach(patches, ({ query }) => resolveLoadingPromises(query, nextState.get(query) || emptyRows()))), Effect.tap((nextState) => {\n        if (options?.flushSync) {\n            flushSync(() => {\n                rowsStore.setState(nextState).pipe(runSync);\n            });\n        }\n        else {\n            rowsStore.setState(nextState).pipe(runSync);\n        }\n    }));\n    const rowsStoreStateFromPatches = (patches) => Effect.sync(() => {\n        const rowsStoreState = rowsStore.getState();\n        if (patches.length === 0)\n            return rowsStoreState;\n        const queriesRows = Arr.map(patches, ({ query, patches }) => [\n            query,\n            applyPatches(patches, rowsStoreState.get(query) || emptyRows()),\n        ]);\n        return new Map([...rowsStoreState, ...queriesRows]);\n    });\n    const resolveLoadingPromises = (query, rows) => Effect.sync(() => {\n        const loadingPromise = loadingPromises.get(query);\n        if (!loadingPromise)\n            return;\n        const result = queryResultFromRows(rows);\n        if (loadingPromise.promise.status !== \"fulfilled\") {\n            loadingPromise.resolve(result);\n        }\n        else {\n            // A promise can't be fulfilled 2x, so we need a new one.\n            loadingPromise.promise = Promise.resolve(result);\n        }\n        /**\n         * \"For example, a data framework can set the status and value fields on\n         * a promise preemptively, before passing to React, so that React can\n         * unwrap it without waiting a microtask.\"\n         * https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md\n         */\n        Object.assign(loadingPromise.promise, {\n            status: \"fulfilled\",\n            value: result,\n        });\n        if (loadingPromise.releaseOnResolve) {\n            loadingPromises.delete(query);\n        }\n    });\n    /**\n     * We can't delete loading promises in `resolveLoadingPromises` because they\n     * must be cached, so repeated calls to `loadQuery` will always return the\n     * same promise until the data changes, and we also can't cache them forever\n     * because only subscribed queries are automatically updated (reactivity is\n     * expensive) hence this function must be called manually on any mutation.\n     */\n    const releaseUnsubscribedLoadingPromises = () => {\n        [...loadingPromises.entries()]\n            .filter(([query]) => !subscribedQueries.has(query))\n            .forEach(([query, loadingPromise]) => {\n            if (loadingPromise.promise.status === \"fulfilled\") {\n                loadingPromises.delete(query);\n            }\n            else {\n                loadingPromise.releaseOnResolve = true;\n            }\n        });\n    };\n    const mutate = (() => {\n        let queue = [];\n        return (table, { id, ...values }, onComplete) => {\n            Effect.logDebug([\"Evolu mutate\", { table, id, values }]).pipe(runSync);\n            const isInsert = id == null;\n            if (isInsert)\n                id = nanoIdGenerator.rowId.pipe(runSync);\n            queue = [...queue, [{ table, id, values, isInsert }, onComplete]];\n            if (queue.length === 1)\n                queueMicrotask(() => {\n                    const [mutations, onCompletes] = Arr.unzip(queue);\n                    queue = [];\n                    const onCompletesDef = onCompletes.filter(Predicate.isNotUndefined);\n                    releaseUnsubscribedLoadingPromises();\n                    db.mutate(mutations, [...subscribedQueries.keys()]).pipe(Effect.flatMap(handlePatches({ flushSync: onCompletesDef.length > 0 })), Effect.tap(() => {\n                        onCompletesDef.forEach((onComplete) => onComplete());\n                    }), runFork);\n                });\n            return { id };\n        };\n    })();\n    const evolu = {\n        socket,\n        subscribeError: errorStore.subscribe,\n        getError: errorStore.getState,\n        createQuery: (queryCallback, options) => pipe(queryCallback(kysely).compile(), (compiledQuery) => {\n            if (isSqlMutation(compiledQuery.sql))\n                throw new Error(\"SQL mutation (INSERT, UPDATE, DELETE, etc.) isn't allowed in the Evolu `createQuery` function. Kysely suggests it because there is no read-only Kysely yet, and removing such an API is not possible. For mutations, use Evolu mutation API.\");\n            const parameters = compiledQuery.parameters;\n            return {\n                sql: compiledQuery.sql,\n                parameters,\n                ...(options && { options }),\n            };\n        }, (query) => serializeQuery(query)),\n        loadQuery: (() => {\n            let queue = [];\n            return (query) => {\n                Effect.logDebug([\n                    \"Evolu loadQuery\",\n                    { query: deserializeQuery(query) },\n                ]).pipe(runSync);\n                let loadingPromise = loadingPromises.get(query);\n                if (!loadingPromise) {\n                    let resolve = constVoid;\n                    const promise = new Promise((_resolve) => {\n                        resolve = _resolve;\n                    });\n                    loadingPromise = { resolve, promise, releaseOnResolve: false };\n                    loadingPromises.set(query, loadingPromise);\n                    queue = [...queue, query];\n                    if (queue.length === 1) {\n                        queueMicrotask(() => {\n                            db.loadQueries(Arr.dedupe(queue)).pipe(Effect.flatMap(handlePatches()), runFork);\n                            queue = [];\n                        });\n                    }\n                }\n                return loadingPromise.promise;\n            };\n        })(),\n        loadQueries: (queries) => queries.map(evolu.loadQuery),\n        subscribeQuery: (query) => (listener) => {\n            subscribedQueries.set(query, Number.increment(subscribedQueries.get(query) ?? 0));\n            const unsubscribe = rowsStore.subscribe(listener);\n            return () => {\n                const count = subscribedQueries.get(query);\n                if (count != null && count > 1)\n                    subscribedQueries.set(query, Number.decrement(count));\n                else\n                    subscribedQueries.delete(query);\n                unsubscribe();\n            };\n        },\n        getQuery: (query) => queryResultFromRows(rowsStore.getState().get(query) || emptyRows()),\n        subscribeOwner: ownerStore.subscribe,\n        getOwner: ownerStore.getState,\n        subscribeSyncState: syncStateStore.subscribe,\n        getSyncState: syncStateStore.getState,\n        create: mutate,\n        update: mutate,\n        createOrUpdate: mutate,\n        resetOwner: (options) => Effect.gen(function* () {\n            yield* db.resetOwner();\n            if (options?.reload !== false)\n                yield* appStateReset.reset;\n        }).pipe(runPromise),\n        restoreOwner: (mnemonic, options) => Effect.gen(function* () {\n            yield* db.restoreOwner(schema, mnemonic);\n            if (options?.reload !== false)\n                yield* appStateReset.reset;\n        }).pipe(runPromise),\n        reloadApp: () => {\n            appStateReset.reset.pipe(runFork);\n        },\n        ensureSchema: (schema) => {\n            db.ensureSchema(schema).pipe(runFork);\n        },\n        exportDatabase: () => db.exportDatabase().pipe(runPromise),\n    };\n    return evolu;\n});\nconst initialDataToMutations = (initialData = constVoid) => Effect.map(NanoIdGenerator, (nanoIdGenerator) => {\n    const mutations = [];\n    const mutate = (table, { id, ...values }) => {\n        if (id == null)\n            id = nanoIdGenerator.rowId.pipe(Effect.runSync);\n        mutations.push({ isInsert: true, id, table: table, values });\n        return { id };\n    };\n    const evolu = {\n        create: mutate,\n        createOrUpdate: mutate,\n    };\n    initialData(evolu);\n    return mutations;\n});\n// https://kysely.dev/docs/recipes/splitting-query-building-and-execution\nconst kysely = new Kysely.Kysely({\n    dialect: {\n        createAdapter: () => new Kysely.SqliteAdapter(),\n        createDriver: () => new Kysely.DummyDriver(),\n        createIntrospector() {\n            throw \"Not implemeneted\";\n        },\n        createQueryCompiler: () => new Kysely.SqliteQueryCompiler(),\n    },\n});\nconst createIndex = kysely.schema.createIndex.bind(kysely.schema);\n/**\n * Create SQLite indexes.\n *\n * See https://www.evolu.dev/docs/indexes\n *\n * @example\n *   const indexes = createIndexes((create) => [\n *     create(\"indexTodoCreatedAt\").on(\"todo\").column(\"createdAt\"),\n *     create(\"indexTodoCategoryCreatedAt\")\n *       .on(\"todoCategory\")\n *       .column(\"createdAt\"),\n *   ]);\n */\nexport const createIndexes = (callback) => callback(createIndex).map((index) => ({\n    name: index.toOperationNode().name.name,\n    sql: index.compile().sql,\n}));\n/** Create a namespaced lock name. */\nexport const getLockName = (name) => Effect.map(Config, (config) => `evolu:${config.name}:${name}`);\n","import * as S from \"@effect/schema/Schema\";\nimport { maybeJson } from \"./Sqlite.js\";\n/** Branded Id Schema. To create Id Schema for a specific table, use {@link id}. */\nexport const Id = S.String.pipe(S.pattern(/^[\\w-]{21}$/), S.brand(\"Id\"));\n/**\n * A factory function to create {@link Id} Schema for a specific table.\n *\n * @example\n *   import * as S from \"@effect/schema/Schema\";\n *   import { id } from \"@evolu/react\";\n *\n *   const TodoId = id(\"Todo\");\n *   type TodoId = typeof TodoId.Type;\n */\nexport const id = (table) => Id.pipe(S.brand(table));\n/**\n * SQLite doesn't support the Date type, so Evolu uses SqliteDate instead. Use\n * the {@link cast} helper to cast SqliteDate from Date and back.\n * https://www.sqlite.org/quirks.html#no_separate_datetime_datatype\n */\nexport const SqliteDate = S.String.pipe(S.filter((s) => !isNaN(Date.parse(s))), S.brand(\"SqliteDate\"));\n/**\n * SQLite doesn't support the boolean type, so Evolu uses SqliteBoolean instead.\n * Use the {@link cast} helper to cast SqliteBoolean from boolean and back.\n * https://www.sqlite.org/quirks.html#no_separate_boolean_datatype\n */\nexport const SqliteBoolean = S.Number.pipe(S.int(), S.filter((s) => s === 0 || s === 1), S.brand(\"SqliteBoolean\"));\nexport function cast(value) {\n    if (typeof value === \"boolean\")\n        return (value === true ? 1 : 0);\n    if (typeof value === \"number\")\n        return value === 1;\n    if (value instanceof Date)\n        return value.toISOString();\n    return new Date(value);\n}\n/**\n * Create table schema.\n *\n * Supported types are null, string, number, Uint8Array, JSON Object, and JSON\n * Array. Use SqliteDate for dates and SqliteBoolean for booleans.\n *\n * Reserved columns are createdAt, updatedAt, isDeleted. Those columns are added\n * by default.\n *\n * @example\n *   const TodoId = id(\"Todo\");\n *   type TodoId = typeof TodoId.Type;\n *\n *   const TodoTable = table({\n *     id: TodoId,\n *     title: NonEmptyString1000,\n *     isCompleted: S.nullable(SqliteBoolean),\n *   });\n *   type TodoTable = typeof TodoTable.Type;\n */\nexport const table = (fields) => S.Struct(fields).pipe(S.extend(ReservedColumns));\nconst ReservedColumns = S.Struct({\n    createdAt: SqliteDate,\n    updatedAt: SqliteDate,\n    isDeleted: SqliteBoolean,\n});\n/**\n * Create database schema.\n *\n * Tables with a name prefixed with _ are local-only, which means they are not\n * synced. Local-only tables are useful for device-specific or temporal data.\n *\n * @example\n *   const Database = database({\n *     // A local-only table.\n *     _todo: TodoTable,\n *     todo: TodoTable,\n *     todoCategory: TodoCategoryTable,\n *   });\n *   type Database = typeof Database.Type;\n */\nexport const database = S.Struct;\n/**\n * String schema represents a string that is not stringified JSON. Using String\n * schema for strings stored in SQLite is crucial to ensure a stored string is\n * not automatically parsed to a JSON object or array when retrieved. Use String\n * schema for all string-based schemas.\n */\nexport const String = S.String.pipe(S.filter((s) => {\n    if (!maybeJson(s))\n        return true;\n    try {\n        JSON.parse(s);\n    }\n    catch (e) {\n        return true;\n    }\n    return false;\n}, { message: () => \"a string that is not stringified JSON\" }), S.brand(\"String\"));\n/**\n * A string with a maximum length of 1000 characters.\n *\n * @example\n *   import * as S from \"@effect/schema/Schema\";\n *   import { String1000 } from \"@evolu/react\";\n *\n *   S.decode(String1000)(value);\n */\nexport const String1000 = String.pipe(S.maxLength(1000), S.brand(\"String1000\"));\n/**\n * A nonempty string with a maximum length of 1000 characters.\n *\n * @example\n *   import * as S from \"@effect/schema/Schema\";\n *   import { NonEmptyString1000 } from \"@evolu/react\";\n *\n *   S.decode(NonEmptyString1000)(value);\n */\nexport const NonEmptyString1000 = String.pipe(S.minLength(1), S.maxLength(1000), S.brand(\"NonEmptyString1000\"));\n/**\n * A positive integer.\n *\n * @example\n *   import * as S from \"@effect/schema/Schema\";\n *   import { PositiveInt } from \"@evolu/react\";\n *\n *   S.decode(PositiveInt)(value);\n */\nexport const PositiveInt = S.Number.pipe(S.int(), S.positive(), S.brand(\"PositiveInt\"));\n","import * as Context from \"effect/Context\";\nexport const FlushSync = Context.GenericTag(\"FlushSync\");\nexport class AppState extends Context.Tag(\"AppState\")() {\n}\nexport class SyncLock extends Context.Tag(\"SyncLock\")() {\n}\nexport class SyncLockAlreadySyncingError {\n    constructor() {\n        this._tag = \"SyncLockAlreadySyncingError\";\n    }\n}\n","import * as Console from \"effect/Console\";\nimport * as Context from \"effect/Context\";\nimport * as Effect from \"effect/Effect\";\nimport * as Exit from \"effect/Exit\";\nimport * as Layer from \"effect/Layer\";\nimport * as Predicate from \"effect/Predicate\";\nexport const Sqlite = Context.GenericTag(\"Sqlite\");\nexport class SqliteFactory extends Context.Tag(\"SqliteFactory\")() {\n}\nSqliteFactory.Common = Layer.effect(SqliteFactory, Effect.map(SqliteFactory, (platformSqliteFactory) => ({\n    createSqlite: Effect.logTrace(\"SqliteFactory createSqlite\").pipe(Effect.zipRight(platformSqliteFactory.createSqlite), Effect.map((platformSqlite) => ({\n        ...platformSqlite,\n        exec: (query) => platformSqlite.exec(query).pipe(Effect.tap((result) => {\n            maybeParseJson(result.rows);\n        }), Effect.tap((result) => [\"begin\", \"rollback\", \"commit\"].includes(query.sql)\n            ? Effect.logDebug(`SQLiteCommon ${query.sql} transaction`)\n            : Effect.logDebug([\"SQLiteCommon exec\", query, result]))),\n        transaction: (mode) => (effect) => {\n            // Shared is for readonly queries.\n            if (mode === \"shared\")\n                return platformSqlite.transaction(mode)(effect);\n            return Effect.flatMap(Sqlite, (sqlite) => Effect.acquireUseRelease(sqlite.exec({ sql: \"begin\" }), () => effect, (_, exit) => Exit.isFailure(exit)\n                ? sqlite.exec({ sql: \"rollback\" })\n                : sqlite.exec({ sql: \"commit\" }))).pipe(platformSqlite.transaction(mode));\n        },\n    }))),\n})));\nexport const isJsonObjectOrArray = (value) => value !== null && typeof value === \"object\" && !Predicate.isUint8Array(value);\nexport const valuesToSqliteValues = (values) => values.map((value) => isJsonObjectOrArray(value) ? JSON.stringify(value) : value);\n/** This function mutates for better performance. */\nexport const maybeParseJson = (rows) => {\n    parseArray(rows);\n};\nconst parseArray = (a) => {\n    for (let i = 0; i < a.length; ++i)\n        a[i] = parse(a[i]);\n    return a;\n};\nconst parse = (o) => {\n    if (Predicate.isString(o))\n        return parseString(o);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    if (Array.isArray(o))\n        return parseArray(o);\n    if (typeof o === \"object\" && o !== null && !Predicate.isUint8Array(o))\n        return parseObject(o);\n    return o;\n};\nconst parseString = (s) => {\n    if (maybeJson(s))\n        try {\n            return parse(JSON.parse(s));\n        }\n        catch (err) {\n            // Nothing to do.\n        }\n    return s;\n};\nexport const maybeJson = (value) => value.match(/^[[{]/) != null;\nconst parseObject = (o) => {\n    for (const key in o)\n        o[key] = parse(o[key]);\n    return o;\n};\n/** This is good enough detection because SQL strings in Evolu are predictable. */\nconst isSqlMutationRegEx = new RegExp(`\\\\b(${[\n    \"alter\",\n    \"create\",\n    \"delete\",\n    \"drop\",\n    \"insert\",\n    \"replace\",\n    \"update\",\n].join(\"|\")})\\\\b`);\nexport const isSqlMutation = (sql) => isSqlMutationRegEx.test(sql);\nexport const maybeLogSqliteQueryExecutionTime = (query) => (effect) => {\n    if (!query.options?.logQueryExecutionTime)\n        return effect;\n    return Effect.Do.pipe(Effect.let(\"start\", () => performance.now()), Effect.bind(\"result\", () => effect), Effect.let(\"elapsed\", ({ start }) => performance.now() - start), Effect.tap(({ elapsed }) => Console.log(`QueryExecutionTime: ${elapsed}ms`, query)), Effect.map(({ result }) => result));\n};\nexport const drawSqliteQueryPlan = (rows) => rows\n    .map((row) => {\n    let parentId = row.parent;\n    let indent = 0;\n    do {\n        const parent = rows.find((r) => r.id === parentId);\n        if (!parent)\n            break;\n        parentId = parent.parent;\n        indent++;\n        // eslint-disable-next-line no-constant-condition\n    } while (true);\n    return `${\"  \".repeat(indent)}${row.detail}`;\n})\n    .join(\"\\n\");\n","import * as Effect from \"effect/Effect\";\nexport const makeStore = (initialState) => Effect.sync(() => {\n    const listeners = new Set();\n    let currentState = initialState;\n    const store = {\n        subscribe(listener) {\n            listeners.add(listener);\n            return () => {\n                listeners.delete(listener);\n            };\n        },\n        getState() {\n            return currentState;\n        },\n        setState: (state) => Effect.sync(() => {\n            if (state === currentState)\n                return;\n            currentState = state;\n            listeners.forEach((listener) => listener());\n        }),\n    };\n    return store;\n});\n","/**\n * @since 2.0.0\n */\nimport type * as Context from \"./Context.js\"\nimport type { Effect } from \"./Effect.js\"\nimport * as internal from \"./internal/console.js\"\nimport * as defaultConsole from \"./internal/defaultServices/console.js\"\nimport type * as Layer from \"./Layer.js\"\nimport type { Scope } from \"./Scope.js\"\n\n/**\n * @since 2.0.0\n * @category type ids\n */\nexport const TypeId: unique symbol = defaultConsole.TypeId\n\n/**\n * @since 2.0.0\n * @category type ids\n */\nexport type TypeId = typeof TypeId\n\n/**\n * @since 2.0.0\n * @category model\n */\nexport interface Console {\n  readonly [TypeId]: TypeId\n  assert(condition: boolean, ...args: ReadonlyArray<any>): Effect<void>\n  readonly clear: Effect<void>\n  count(label?: string): Effect<void>\n  countReset(label?: string): Effect<void>\n  debug(...args: ReadonlyArray<any>): Effect<void>\n  dir(item: any, options?: any): Effect<void>\n  dirxml(...args: ReadonlyArray<any>): Effect<void>\n  error(...args: ReadonlyArray<any>): Effect<void>\n  group(options?: {\n    readonly label?: string | undefined\n    readonly collapsed?: boolean | undefined\n  }): Effect<void>\n  readonly groupEnd: Effect<void>\n  info(...args: ReadonlyArray<any>): Effect<void>\n  log(...args: ReadonlyArray<any>): Effect<void>\n  table(tabularData: any, properties?: ReadonlyArray<string>): Effect<void>\n  time(label?: string): Effect<void>\n  timeEnd(label?: string): Effect<void>\n  timeLog(label?: string, ...args: ReadonlyArray<any>): Effect<void>\n  trace(...args: ReadonlyArray<any>): Effect<void>\n  warn(...args: ReadonlyArray<any>): Effect<void>\n  readonly unsafe: UnsafeConsole\n}\n\n/**\n * @since 2.0.0\n * @category model\n */\nexport interface UnsafeConsole {\n  assert(condition: boolean, ...args: ReadonlyArray<any>): void\n  clear(): void\n  count(label?: string): void\n  countReset(label?: string): void\n  debug(...args: ReadonlyArray<any>): void\n  dir(item: any, options?: any): void\n  dirxml(...args: ReadonlyArray<any>): void\n  error(...args: ReadonlyArray<any>): void\n  group(...args: ReadonlyArray<any>): void\n  groupCollapsed(...args: ReadonlyArray<any>): void\n  groupEnd(): void\n  info(...args: ReadonlyArray<any>): void\n  log(...args: ReadonlyArray<any>): void\n  table(tabularData: any, properties?: ReadonlyArray<string>): void\n  time(label?: string): void\n  timeEnd(label?: string): void\n  timeLog(label?: string, ...args: ReadonlyArray<any>): void\n  trace(...args: ReadonlyArray<any>): void\n  warn(...args: ReadonlyArray<any>): void\n}\n\n/**\n * @since 2.0.0\n * @category context\n */\nexport const Console: Context.Tag<Console, Console> = defaultConsole.consoleTag\n\n/**\n * @since 2.0.0\n * @category default services\n */\nexport const withConsole: {\n  <C extends Console>(console: C): <A, E, R>(effect: Effect<A, E, R>) => Effect<A, E, R>\n  <A, E, R, C extends Console>(effect: Effect<A, E, R>, console: C): Effect<A, E, R>\n} = internal.withConsole\n\n/**\n * @since 2.0.0\n * @category default services\n */\nexport const setConsole: <A extends Console>(console: A) => Layer.Layer<never> = internal.setConsole\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const consoleWith: <A, E, R>(f: (console: Console) => Effect<A, E, R>) => Effect<A, E, R> = internal.consoleWith\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const assert: (condition: boolean, ...args: ReadonlyArray<any>) => Effect<void> = internal.assert\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const clear: Effect<void> = internal.clear\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const count: (label?: string) => Effect<void> = internal.count\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const countReset: (label?: string) => Effect<void> = internal.countReset\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const debug: (...args: ReadonlyArray<any>) => Effect<void> = internal.debug\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const dir: (item: any, options?: any) => Effect<void> = internal.dir\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const dirxml: (...args: ReadonlyArray<any>) => Effect<void> = internal.dirxml\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const error: (...args: ReadonlyArray<any>) => Effect<void> = internal.error\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const group: (\n  options?: { label?: string | undefined; collapsed?: boolean | undefined } | undefined\n) => Effect<void, never, Scope> = internal.group\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const info: (...args: ReadonlyArray<any>) => Effect<void> = internal.info\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const log: (...args: ReadonlyArray<any>) => Effect<void> = internal.log\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const table: (tabularData: any, properties?: ReadonlyArray<string>) => Effect<void> = internal.table\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const time: (label?: string | undefined) => Effect<void, never, Scope> = internal.time\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const timeLog: (label?: string, ...args: ReadonlyArray<any>) => Effect<void> = internal.timeLog\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const trace: (...args: ReadonlyArray<any>) => Effect<void> = internal.trace\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const warn: (...args: ReadonlyArray<any>) => Effect<void> = internal.warn\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const withGroup: {\n  (options?: {\n    readonly label?: string | undefined\n    readonly collapsed?: boolean | undefined\n  }): <A, E, R>(self: Effect<A, E, R>) => Effect<A, E, R>\n  <A, E, R>(self: Effect<A, E, R>, options?: {\n    readonly label?: string | undefined\n    readonly collapsed?: boolean | undefined\n  }): Effect<A, E, R>\n} = internal.withGroup\n\n/**\n * @since 2.0.0\n * @category accessor\n */\nexport const withTime: {\n  (label?: string): <A, E, R>(self: Effect<A, E, R>) => Effect<A, E, R>\n  <A, E, R>(self: Effect<A, E, R>, label?: string): Effect<A, E, R>\n} = internal.withTime\n","/// <reference types=\"./dynamic-reference-builder.d.ts\" />\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { parseSimpleReferenceExpression } from '../parser/reference-parser.js';\nimport { isObject, isString } from '../util/object-utils.js';\nexport class DynamicReferenceBuilder {\n    #dynamicReference;\n    get dynamicReference() {\n        return this.#dynamicReference;\n    }\n    /**\n     * @private\n     *\n     * This needs to be here just so that the typings work. Without this\n     * the generated .d.ts file contains no reference to the type param R\n     * which causes this type to be equal to DynamicReferenceBuilder with\n     * any R.\n     */\n    get refType() {\n        return undefined;\n    }\n    constructor(reference) {\n        this.#dynamicReference = reference;\n    }\n    toOperationNode() {\n        return parseSimpleReferenceExpression(this.#dynamicReference);\n    }\n}\nexport function isDynamicReferenceBuilder(obj) {\n    return (isObject(obj) &&\n        isOperationNodeSource(obj) &&\n        isString(obj.dynamicReference));\n}\n","/// <reference types=\"./unary-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const UnaryOperationNode = freeze({\n    is(node) {\n        return node.kind === 'UnaryOperationNode';\n    },\n    create(operator, operand) {\n        return freeze({\n            kind: 'UnaryOperationNode',\n            operator,\n            operand,\n        });\n    },\n});\n","/// <reference types=\"./unary-operation-parser.d.ts\" />\nimport { OperatorNode } from '../operation-node/operator-node.js';\nimport { UnaryOperationNode } from '../operation-node/unary-operation-node.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nexport function parseExists(operand) {\n    return parseUnaryOperation('exists', operand);\n}\nexport function parseNotExists(operand) {\n    return parseUnaryOperation('not exists', operand);\n}\nexport function parseUnaryOperation(operator, operand) {\n    return UnaryOperationNode.create(OperatorNode.create(operator), parseReferenceExpression(operand));\n}\n","/// <reference types=\"./json-path-leg-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONPathLegNode = freeze({\n    is(node) {\n        return node.kind === 'JSONPathLegNode';\n    },\n    create(type, value) {\n        return freeze({\n            kind: 'JSONPathLegNode',\n            type,\n            value,\n        });\n    },\n});\n","/// <reference types=\"./json-path-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { JSONOperatorChainNode } from '../operation-node/json-operator-chain-node.js';\nimport { JSONPathLegNode, } from '../operation-node/json-path-leg-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nimport { JSONReferenceNode } from '../operation-node/json-reference-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nexport class JSONPathBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Access an element of a JSON array in a specific location.\n     *\n     * Since there's no guarantee an element exists in the given array location, the\n     * resulting type is always nullable. If you're sure the element exists, you\n     * should use {@link SelectQueryBuilder.$assertType} to narrow the type safely.\n     *\n     * See also {@link key} to access properties of JSON objects.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('nicknames', '->').at(0).as('primary_nickname')\n     * )\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"nicknames\"->0 as \"primary_nickname\" from \"person\"\n     *```\n     *\n     * Combined with {@link key}:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('experience', '->').at(0).key('role').as('first_role')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"experience\"->0->'role' as \"first_role\" from \"person\"\n     * ```\n     *\n     * You can use `'last'` to access the last element of the array in MySQL:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('nicknames', '->$').at('last').as('last_nickname')\n     * )\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * select `nicknames`->'$[last]' as `last_nickname` from `person`\n     * ```\n     *\n     * Or `'#-1'` in SQLite:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('nicknames', '->>$').at('#-1').as('last_nickname')\n     * )\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * select \"nicknames\"->>'$[#-1]' as `last_nickname` from `person`\n     * ```\n     */\n    at(index) {\n        return this.#createBuilderWithPathLeg('ArrayLocation', index);\n    }\n    /**\n     * Access a property of a JSON object.\n     *\n     * If a field is optional, the resulting type will be nullable.\n     *\n     * See also {@link at} to access elements of JSON arrays.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('address', '->').key('city').as('city')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"address\"->'city' as \"city\" from \"person\"\n     * ```\n     *\n     * Going deeper:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('profile', '->$').key('website').key('url').as('website_url')\n     * )\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * select `profile`->'$.website.url' as `website_url` from `person`\n     * ```\n     *\n     * Combined with {@link at}:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('profile', '->').key('addresses').at(0).key('city').as('city')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"profile\"->'addresses'->0->'city' as \"city\" from \"person\"\n     * ```\n     */\n    key(key) {\n        return this.#createBuilderWithPathLeg('Member', key);\n    }\n    #createBuilderWithPathLeg(legType, value) {\n        if (JSONReferenceNode.is(this.#node)) {\n            return new TraversedJSONPathBuilder(JSONReferenceNode.cloneWithTraversal(this.#node, JSONPathNode.is(this.#node.traversal)\n                ? JSONPathNode.cloneWithLeg(this.#node.traversal, JSONPathLegNode.create(legType, value))\n                : JSONOperatorChainNode.cloneWithValue(this.#node.traversal, ValueNode.createImmediate(value))));\n        }\n        return new TraversedJSONPathBuilder(JSONPathNode.cloneWithLeg(this.#node, JSONPathLegNode.create(legType, value)));\n    }\n}\nexport class TraversedJSONPathBuilder extends JSONPathBuilder {\n    #node;\n    constructor(node) {\n        super(node);\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedJSONPathBuilder(this, alias);\n    }\n    /**\n     * Change the output type of the json path.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `JSONPathBuilder` with a new output type.\n     */\n    $castTo() {\n        return new JSONPathBuilder(this.#node);\n    }\n    $notNull() {\n        return new JSONPathBuilder(this.#node);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\nexport class AliasedJSONPathBuilder {\n    #jsonPath;\n    #alias;\n    constructor(jsonPath, alias) {\n        this.#jsonPath = jsonPath;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#jsonPath;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#jsonPath.toOperationNode(), isOperationNodeSource(this.#alias)\n            ? this.#alias.toOperationNode()\n            : IdentifierNode.create(this.#alias));\n    }\n}\n","/// <reference types=\"./tuple-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const TupleNode = freeze({\n    is(node) {\n        return node.kind === 'TupleNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'TupleNode',\n            values: freeze(values),\n        });\n    },\n});\n","/// <reference types=\"./cast-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const CastNode = freeze({\n    is(node) {\n        return node.kind === 'CastNode';\n    },\n    create(expression, dataType) {\n        return freeze({\n            kind: 'CastNode',\n            expression,\n            dataType,\n        });\n    },\n});\n","/// <reference types=\"./expression-builder.d.ts\" />\nimport { createSelectQueryBuilder, } from '../query-builder/select-query-builder.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { parseTableExpressionOrList, parseTable, } from '../parser/table-parser.js';\nimport { WithSchemaPlugin } from '../plugin/with-schema/with-schema-plugin.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { createFunctionModule, } from '../query-builder/function-module.js';\nimport { parseJSONReference, parseReferenceExpression, parseStringReference, } from '../parser/reference-parser.js';\nimport { parseFilterList, parseFilterObject, parseValueBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { ExpressionWrapper } from './expression-wrapper.js';\nimport { OperatorNode, } from '../operation-node/operator-node.js';\nimport { parseUnaryOperation } from '../parser/unary-operation-parser.js';\nimport { parseSafeImmediateValue, parseValueExpression, } from '../parser/value-parser.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { CaseBuilder } from '../query-builder/case-builder.js';\nimport { CaseNode } from '../operation-node/case-node.js';\nimport { isReadonlyArray, isUndefined } from '../util/object-utils.js';\nimport { JSONPathBuilder } from '../query-builder/json-path-builder.js';\nimport { BinaryOperationNode } from '../operation-node/binary-operation-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { TupleNode } from '../operation-node/tuple-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { CastNode } from '../operation-node/cast-node.js';\nexport function createExpressionBuilder(executor = NOOP_QUERY_EXECUTOR) {\n    function binary(lhs, op, rhs) {\n        return new ExpressionWrapper(parseValueBinaryOperation(lhs, op, rhs));\n    }\n    function unary(op, expr) {\n        return new ExpressionWrapper(parseUnaryOperation(op, expr));\n    }\n    const eb = Object.assign(binary, {\n        fn: undefined,\n        eb: undefined,\n        selectFrom(table) {\n            return createSelectQueryBuilder({\n                queryId: createQueryId(),\n                executor,\n                queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList(table)),\n            });\n        },\n        case(reference) {\n            return new CaseBuilder({\n                node: CaseNode.create(isUndefined(reference)\n                    ? undefined\n                    : parseReferenceExpression(reference)),\n            });\n        },\n        ref(reference, op) {\n            if (isUndefined(op)) {\n                return new ExpressionWrapper(parseStringReference(reference));\n            }\n            return new JSONPathBuilder(parseJSONReference(reference, op));\n        },\n        jsonPath() {\n            return new JSONPathBuilder(JSONPathNode.create());\n        },\n        table(table) {\n            return new ExpressionWrapper(parseTable(table));\n        },\n        val(value) {\n            return new ExpressionWrapper(parseValueExpression(value));\n        },\n        refTuple(...values) {\n            return new ExpressionWrapper(TupleNode.create(values.map(parseReferenceExpression)));\n        },\n        tuple(...values) {\n            return new ExpressionWrapper(TupleNode.create(values.map(parseValueExpression)));\n        },\n        lit(value) {\n            return new ExpressionWrapper(parseSafeImmediateValue(value));\n        },\n        unary,\n        not(expr) {\n            return unary('not', expr);\n        },\n        exists(expr) {\n            return unary('exists', expr);\n        },\n        neg(expr) {\n            return unary('-', expr);\n        },\n        between(expr, start, end) {\n            return new ExpressionWrapper(BinaryOperationNode.create(parseReferenceExpression(expr), OperatorNode.create('between'), AndNode.create(parseValueExpression(start), parseValueExpression(end))));\n        },\n        betweenSymmetric(expr, start, end) {\n            return new ExpressionWrapper(BinaryOperationNode.create(parseReferenceExpression(expr), OperatorNode.create('between symmetric'), AndNode.create(parseValueExpression(start), parseValueExpression(end))));\n        },\n        and(exprs) {\n            if (isReadonlyArray(exprs)) {\n                return new ExpressionWrapper(parseFilterList(exprs, 'and'));\n            }\n            return new ExpressionWrapper(parseFilterObject(exprs, 'and'));\n        },\n        or(exprs) {\n            if (isReadonlyArray(exprs)) {\n                return new ExpressionWrapper(parseFilterList(exprs, 'or'));\n            }\n            return new ExpressionWrapper(parseFilterObject(exprs, 'or'));\n        },\n        parens(...args) {\n            const node = parseValueBinaryOperationOrExpression(args);\n            if (ParensNode.is(node)) {\n                // No double wrapping.\n                return new ExpressionWrapper(node);\n            }\n            else {\n                return new ExpressionWrapper(ParensNode.create(node));\n            }\n        },\n        cast(expr, dataType) {\n            return new ExpressionWrapper(CastNode.create(parseReferenceExpression(expr), parseDataTypeExpression(dataType)));\n        },\n        withSchema(schema) {\n            return createExpressionBuilder(executor.withPluginAtFront(new WithSchemaPlugin(schema)));\n        },\n    });\n    eb.fn = createFunctionModule();\n    eb.eb = eb;\n    return eb;\n}\nexport function expressionBuilder(_) {\n    return createExpressionBuilder();\n}\n","/// <reference types=\"./expression-wrapper.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { OrNode } from '../operation-node/or-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nexport class ExpressionWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    or(...args) {\n        return new OrWrapper(OrNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    and(...args) {\n        return new AndWrapper(AndNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `ExpressionWrapper` with a new output type.\n     */\n    $castTo() {\n        return new ExpressionWrapper(this.#node);\n    }\n    /**\n     * Omit null from the expression's type.\n     *\n     * This function can be useful in cases where you know an expression can't be\n     * null, but Kysely is unable to infer it.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of `this` with a new output type.\n     */\n    $notNull() {\n        return new ExpressionWrapper(this.#node);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\nexport class AliasedExpressionWrapper {\n    #expr;\n    #alias;\n    constructor(expr, alias) {\n        this.#expr = expr;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#expr;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#expr.toOperationNode(), isOperationNodeSource(this.#alias)\n            ? this.#alias.toOperationNode()\n            : IdentifierNode.create(this.#alias));\n    }\n}\nexport class OrWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    or(...args) {\n        return new OrWrapper(OrNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `OrWrapper` with a new output type.\n     */\n    $castTo() {\n        return new OrWrapper(this.#node);\n    }\n    toOperationNode() {\n        return ParensNode.create(this.#node);\n    }\n}\nexport class AndWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    and(...args) {\n        return new AndWrapper(AndNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `AndWrapper` with a new output type.\n     */\n    $castTo() {\n        return new AndWrapper(this.#node);\n    }\n    toOperationNode() {\n        return ParensNode.create(this.#node);\n    }\n}\n","/// <reference types=\"./alias-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AliasNode = freeze({\n    is(node) {\n        return node.kind === 'AliasNode';\n    },\n    create(node, alias) {\n        return freeze({\n            kind: 'AliasNode',\n            node,\n            alias,\n        });\n    },\n});\n","/// <reference types=\"./and-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AndNode = freeze({\n    is(node) {\n        return node.kind === 'AndNode';\n    },\n    create(left, right) {\n        return freeze({\n            kind: 'AndNode',\n            left,\n            right,\n        });\n    },\n});\n","/// <reference types=\"./binary-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const BinaryOperationNode = freeze({\n    is(node) {\n        return node.kind === 'BinaryOperationNode';\n    },\n    create(leftOperand, operator, rightOperand) {\n        return freeze({\n            kind: 'BinaryOperationNode',\n            leftOperand,\n            operator,\n            rightOperand,\n        });\n    },\n});\n","/// <reference types=\"./case-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhenNode } from './when-node.js';\n/**\n * @internal\n */\nexport const CaseNode = freeze({\n    is(node) {\n        return node.kind === 'CaseNode';\n    },\n    create(value) {\n        return freeze({\n            kind: 'CaseNode',\n            value,\n        });\n    },\n    cloneWithWhen(caseNode, when) {\n        return freeze({\n            ...caseNode,\n            when: freeze(caseNode.when ? [...caseNode.when, when] : [when]),\n        });\n    },\n    cloneWithThen(caseNode, then) {\n        return freeze({\n            ...caseNode,\n            when: caseNode.when\n                ? freeze([\n                    ...caseNode.when.slice(0, -1),\n                    WhenNode.cloneWithResult(caseNode.when[caseNode.when.length - 1], then),\n                ])\n                : undefined,\n        });\n    },\n    cloneWith(caseNode, props) {\n        return freeze({\n            ...caseNode,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const ColumnNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'ColumnNode',\n            column: IdentifierNode.create(column),\n        });\n    },\n});\n","/// <reference types=\"./using-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const UsingNode = freeze({\n    is(node) {\n        return node.kind === 'UsingNode';\n    },\n    create(tables) {\n        return freeze({\n            kind: 'UsingNode',\n            tables: freeze(tables),\n        });\n    },\n    cloneWithTables(using, tables) {\n        return freeze({\n            ...using,\n            tables: freeze([...using.tables, ...tables]),\n        });\n    },\n});\n","/// <reference types=\"./delete-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\nimport { OrderByNode } from './order-by-node.js';\nimport { UsingNode } from './using-node.js';\n/**\n * @internal\n */\nexport const DeleteQueryNode = freeze({\n    is(node) {\n        return node.kind === 'DeleteQueryNode';\n    },\n    create(fromItems, withNode) {\n        return freeze({\n            kind: 'DeleteQueryNode',\n            from: FromNode.create(fromItems),\n            ...(withNode && { with: withNode }),\n        });\n    },\n    cloneWithOrderByItems(deleteNode, items) {\n        return freeze({\n            ...deleteNode,\n            orderBy: deleteNode.orderBy\n                ? OrderByNode.cloneWithItems(deleteNode.orderBy, items)\n                : OrderByNode.create(items),\n        });\n    },\n    cloneWithoutOrderBy(deleteNode) {\n        return freeze({\n            ...deleteNode,\n            orderBy: undefined,\n        });\n    },\n    cloneWithLimit(deleteNode, limit) {\n        return freeze({\n            ...deleteNode,\n            limit,\n        });\n    },\n    cloneWithoutLimit(deleteNode) {\n        return freeze({\n            ...deleteNode,\n            limit: undefined,\n        });\n    },\n    cloneWithUsing(deleteNode, tables) {\n        return freeze({\n            ...deleteNode,\n            using: deleteNode.using !== undefined\n                ? UsingNode.cloneWithTables(deleteNode.using, tables)\n                : UsingNode.create(tables),\n        });\n    },\n});\n","/// <reference types=\"./from-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const FromNode = freeze({\n    is(node) {\n        return node.kind === 'FromNode';\n    },\n    create(froms) {\n        return freeze({\n            kind: 'FromNode',\n            froms: freeze(froms),\n        });\n    },\n    cloneWithFroms(from, froms) {\n        return freeze({\n            ...from,\n            froms: freeze([...from.froms, ...froms]),\n        });\n    },\n});\n","/// <reference types=\"./identifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const IdentifierNode = freeze({\n    is(node) {\n        return node.kind === 'IdentifierNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'IdentifierNode',\n            name,\n        });\n    },\n});\n","/// <reference types=\"./insert-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const InsertQueryNode = freeze({\n    is(node) {\n        return node.kind === 'InsertQueryNode';\n    },\n    create(into, withNode, replace) {\n        return freeze({\n            kind: 'InsertQueryNode',\n            into,\n            ...(withNode && { with: withNode }),\n            replace,\n        });\n    },\n    createWithoutInto() {\n        return freeze({\n            kind: 'InsertQueryNode',\n        });\n    },\n    cloneWith(insertQuery, props) {\n        return freeze({\n            ...insertQuery,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./on-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const OnNode = freeze({\n    is(node) {\n        return node.kind === 'OnNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'OnNode',\n            on: filter,\n        });\n    },\n    cloneWithOperation(onNode, operator, operation) {\n        return freeze({\n            ...onNode,\n            on: operator === 'And'\n                ? AndNode.create(onNode.on, operation)\n                : OrNode.create(onNode.on, operation),\n        });\n    },\n});\n","/// <reference types=\"./join-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { OnNode } from './on-node.js';\n/**\n * @internal\n */\nexport const JoinNode = freeze({\n    is(node) {\n        return node.kind === 'JoinNode';\n    },\n    create(joinType, table) {\n        return freeze({\n            kind: 'JoinNode',\n            joinType,\n            table,\n            on: undefined,\n        });\n    },\n    createWithOn(joinType, table, on) {\n        return freeze({\n            kind: 'JoinNode',\n            joinType,\n            table,\n            on: OnNode.create(on),\n        });\n    },\n    cloneWithOn(joinNode, operation) {\n        return freeze({\n            ...joinNode,\n            on: joinNode.on\n                ? OnNode.cloneWithOperation(joinNode.on, 'And', operation)\n                : OnNode.create(operation),\n        });\n    },\n});\n","/// <reference types=\"./json-operator-chain-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONOperatorChainNode = freeze({\n    is(node) {\n        return node.kind === 'JSONOperatorChainNode';\n    },\n    create(operator) {\n        return freeze({\n            kind: 'JSONOperatorChainNode',\n            operator,\n            values: freeze([]),\n        });\n    },\n    cloneWithValue(node, value) {\n        return freeze({\n            ...node,\n            values: freeze([...node.values, value]),\n        });\n    },\n});\n","/// <reference types=\"./json-path-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONPathNode = freeze({\n    is(node) {\n        return node.kind === 'JSONPathNode';\n    },\n    create(inOperator) {\n        return freeze({\n            kind: 'JSONPathNode',\n            inOperator,\n            pathLegs: freeze([]),\n        });\n    },\n    cloneWithLeg(jsonPathNode, pathLeg) {\n        return freeze({\n            ...jsonPathNode,\n            pathLegs: freeze([...jsonPathNode.pathLegs, pathLeg]),\n        });\n    },\n});\n","/// <reference types=\"./json-reference-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONReferenceNode = freeze({\n    is(node) {\n        return node.kind === 'JSONReferenceNode';\n    },\n    create(reference, traversal) {\n        return freeze({\n            kind: 'JSONReferenceNode',\n            reference,\n            traversal,\n        });\n    },\n    cloneWithTraversal(node, traversal) {\n        return freeze({\n            ...node,\n            traversal,\n        });\n    },\n});\n","/// <reference types=\"./limit-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const LimitNode = freeze({\n    is(node) {\n        return node.kind === 'LimitNode';\n    },\n    create(limit) {\n        return freeze({\n            kind: 'LimitNode',\n            limit,\n        });\n    },\n});\n","/// <reference types=\"./merge-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhenNode } from './when-node.js';\n/**\n * @internal\n */\nexport const MergeQueryNode = freeze({\n    is(node) {\n        return node.kind === 'MergeQueryNode';\n    },\n    create(into, withNode) {\n        return freeze({\n            kind: 'MergeQueryNode',\n            into,\n            ...(withNode && { with: withNode }),\n        });\n    },\n    cloneWithUsing(mergeNode, using) {\n        return freeze({\n            ...mergeNode,\n            using,\n        });\n    },\n    cloneWithWhen(mergeNode, when) {\n        return freeze({\n            ...mergeNode,\n            whens: mergeNode.whens\n                ? freeze([...mergeNode.whens, when])\n                : freeze([when]),\n        });\n    },\n    cloneWithThen(mergeNode, then) {\n        return freeze({\n            ...mergeNode,\n            whens: mergeNode.whens\n                ? freeze([\n                    ...mergeNode.whens.slice(0, -1),\n                    WhenNode.cloneWithResult(mergeNode.whens[mergeNode.whens.length - 1], then),\n                ])\n                : undefined,\n        });\n    },\n});\n","/// <reference types=\"./operation-node-source.d.ts\" />\nimport { isFunction, isObject } from '../util/object-utils.js';\nexport function isOperationNodeSource(obj) {\n    return isObject(obj) && isFunction(obj.toOperationNode);\n}\n","/// <reference types=\"./operation-node-transformer.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { requireAllProps } from '../util/require-all-props.js';\n/**\n * Transforms an operation node tree into another one.\n *\n * Kysely queries are expressed internally as a tree of objects (operation nodes).\n * `OperationNodeTransformer` takes such a tree as its input and returns a\n * transformed deep copy of it. By default the `OperationNodeTransformer`\n * does nothing. You need to override one or more methods to make it do\n * something.\n *\n * There's a method for each node type. For example if you'd like to convert\n * each identifier (table name, column name, alias etc.) from camelCase to\n * snake_case, you'd do something like this:\n *\n * ```ts\n * class CamelCaseTransformer extends OperationNodeTransformer {\n *   transformIdentifier(node: IdentifierNode): IdentifierNode {\n *     node = super.transformIdentifier(node),\n *\n *     return {\n *       ...node,\n *       name: snakeCase(node.name),\n *     }\n *   }\n * }\n *\n * const transformer = new CamelCaseTransformer()\n * const tree = transformer.transformNode(tree)\n * ```\n */\nexport class OperationNodeTransformer {\n    nodeStack = [];\n    #transformers = freeze({\n        AliasNode: this.transformAlias.bind(this),\n        ColumnNode: this.transformColumn.bind(this),\n        IdentifierNode: this.transformIdentifier.bind(this),\n        SchemableIdentifierNode: this.transformSchemableIdentifier.bind(this),\n        RawNode: this.transformRaw.bind(this),\n        ReferenceNode: this.transformReference.bind(this),\n        SelectQueryNode: this.transformSelectQuery.bind(this),\n        SelectionNode: this.transformSelection.bind(this),\n        TableNode: this.transformTable.bind(this),\n        FromNode: this.transformFrom.bind(this),\n        SelectAllNode: this.transformSelectAll.bind(this),\n        AndNode: this.transformAnd.bind(this),\n        OrNode: this.transformOr.bind(this),\n        ValueNode: this.transformValue.bind(this),\n        ValueListNode: this.transformValueList.bind(this),\n        PrimitiveValueListNode: this.transformPrimitiveValueList.bind(this),\n        ParensNode: this.transformParens.bind(this),\n        JoinNode: this.transformJoin.bind(this),\n        OperatorNode: this.transformOperator.bind(this),\n        WhereNode: this.transformWhere.bind(this),\n        InsertQueryNode: this.transformInsertQuery.bind(this),\n        DeleteQueryNode: this.transformDeleteQuery.bind(this),\n        ReturningNode: this.transformReturning.bind(this),\n        CreateTableNode: this.transformCreateTable.bind(this),\n        AddColumnNode: this.transformAddColumn.bind(this),\n        ColumnDefinitionNode: this.transformColumnDefinition.bind(this),\n        DropTableNode: this.transformDropTable.bind(this),\n        DataTypeNode: this.transformDataType.bind(this),\n        OrderByNode: this.transformOrderBy.bind(this),\n        OrderByItemNode: this.transformOrderByItem.bind(this),\n        GroupByNode: this.transformGroupBy.bind(this),\n        GroupByItemNode: this.transformGroupByItem.bind(this),\n        UpdateQueryNode: this.transformUpdateQuery.bind(this),\n        ColumnUpdateNode: this.transformColumnUpdate.bind(this),\n        LimitNode: this.transformLimit.bind(this),\n        OffsetNode: this.transformOffset.bind(this),\n        OnConflictNode: this.transformOnConflict.bind(this),\n        OnDuplicateKeyNode: this.transformOnDuplicateKey.bind(this),\n        CreateIndexNode: this.transformCreateIndex.bind(this),\n        DropIndexNode: this.transformDropIndex.bind(this),\n        ListNode: this.transformList.bind(this),\n        PrimaryKeyConstraintNode: this.transformPrimaryKeyConstraint.bind(this),\n        UniqueConstraintNode: this.transformUniqueConstraint.bind(this),\n        ReferencesNode: this.transformReferences.bind(this),\n        CheckConstraintNode: this.transformCheckConstraint.bind(this),\n        WithNode: this.transformWith.bind(this),\n        CommonTableExpressionNode: this.transformCommonTableExpression.bind(this),\n        CommonTableExpressionNameNode: this.transformCommonTableExpressionName.bind(this),\n        HavingNode: this.transformHaving.bind(this),\n        CreateSchemaNode: this.transformCreateSchema.bind(this),\n        DropSchemaNode: this.transformDropSchema.bind(this),\n        AlterTableNode: this.transformAlterTable.bind(this),\n        DropColumnNode: this.transformDropColumn.bind(this),\n        RenameColumnNode: this.transformRenameColumn.bind(this),\n        AlterColumnNode: this.transformAlterColumn.bind(this),\n        ModifyColumnNode: this.transformModifyColumn.bind(this),\n        AddConstraintNode: this.transformAddConstraint.bind(this),\n        DropConstraintNode: this.transformDropConstraint.bind(this),\n        ForeignKeyConstraintNode: this.transformForeignKeyConstraint.bind(this),\n        CreateViewNode: this.transformCreateView.bind(this),\n        DropViewNode: this.transformDropView.bind(this),\n        GeneratedNode: this.transformGenerated.bind(this),\n        DefaultValueNode: this.transformDefaultValue.bind(this),\n        OnNode: this.transformOn.bind(this),\n        ValuesNode: this.transformValues.bind(this),\n        SelectModifierNode: this.transformSelectModifier.bind(this),\n        CreateTypeNode: this.transformCreateType.bind(this),\n        DropTypeNode: this.transformDropType.bind(this),\n        ExplainNode: this.transformExplain.bind(this),\n        DefaultInsertValueNode: this.transformDefaultInsertValue.bind(this),\n        AggregateFunctionNode: this.transformAggregateFunction.bind(this),\n        OverNode: this.transformOver.bind(this),\n        PartitionByNode: this.transformPartitionBy.bind(this),\n        PartitionByItemNode: this.transformPartitionByItem.bind(this),\n        SetOperationNode: this.transformSetOperation.bind(this),\n        BinaryOperationNode: this.transformBinaryOperation.bind(this),\n        UnaryOperationNode: this.transformUnaryOperation.bind(this),\n        UsingNode: this.transformUsing.bind(this),\n        FunctionNode: this.transformFunction.bind(this),\n        CaseNode: this.transformCase.bind(this),\n        WhenNode: this.transformWhen.bind(this),\n        JSONReferenceNode: this.transformJSONReference.bind(this),\n        JSONPathNode: this.transformJSONPath.bind(this),\n        JSONPathLegNode: this.transformJSONPathLeg.bind(this),\n        JSONOperatorChainNode: this.transformJSONOperatorChain.bind(this),\n        TupleNode: this.transformTuple.bind(this),\n        MergeQueryNode: this.transformMergeQuery.bind(this),\n        MatchedNode: this.transformMatched.bind(this),\n        AddIndexNode: this.transformAddIndex.bind(this),\n        CastNode: this.transformCast.bind(this),\n        FetchNode: this.transformFetch.bind(this),\n        TopNode: this.transformTop.bind(this),\n    });\n    transformNode(node) {\n        if (!node) {\n            return node;\n        }\n        this.nodeStack.push(node);\n        const out = this.transformNodeImpl(node);\n        this.nodeStack.pop();\n        return freeze(out);\n    }\n    transformNodeImpl(node) {\n        return this.#transformers[node.kind](node);\n    }\n    transformNodeList(list) {\n        if (!list) {\n            return list;\n        }\n        return freeze(list.map((node) => this.transformNode(node)));\n    }\n    transformSelectQuery(node) {\n        return requireAllProps({\n            kind: 'SelectQueryNode',\n            from: this.transformNode(node.from),\n            selections: this.transformNodeList(node.selections),\n            distinctOn: this.transformNodeList(node.distinctOn),\n            joins: this.transformNodeList(node.joins),\n            groupBy: this.transformNode(node.groupBy),\n            orderBy: this.transformNode(node.orderBy),\n            where: this.transformNode(node.where),\n            frontModifiers: this.transformNodeList(node.frontModifiers),\n            endModifiers: this.transformNodeList(node.endModifiers),\n            limit: this.transformNode(node.limit),\n            offset: this.transformNode(node.offset),\n            with: this.transformNode(node.with),\n            having: this.transformNode(node.having),\n            explain: this.transformNode(node.explain),\n            setOperations: this.transformNodeList(node.setOperations),\n            fetch: this.transformNode(node.fetch),\n            top: this.transformNode(node.top),\n        });\n    }\n    transformSelection(node) {\n        return requireAllProps({\n            kind: 'SelectionNode',\n            selection: this.transformNode(node.selection),\n        });\n    }\n    transformColumn(node) {\n        return requireAllProps({\n            kind: 'ColumnNode',\n            column: this.transformNode(node.column),\n        });\n    }\n    transformAlias(node) {\n        return requireAllProps({\n            kind: 'AliasNode',\n            node: this.transformNode(node.node),\n            alias: this.transformNode(node.alias),\n        });\n    }\n    transformTable(node) {\n        return requireAllProps({\n            kind: 'TableNode',\n            table: this.transformNode(node.table),\n        });\n    }\n    transformFrom(node) {\n        return requireAllProps({\n            kind: 'FromNode',\n            froms: this.transformNodeList(node.froms),\n        });\n    }\n    transformReference(node) {\n        return requireAllProps({\n            kind: 'ReferenceNode',\n            column: this.transformNode(node.column),\n            table: this.transformNode(node.table),\n        });\n    }\n    transformAnd(node) {\n        return requireAllProps({\n            kind: 'AndNode',\n            left: this.transformNode(node.left),\n            right: this.transformNode(node.right),\n        });\n    }\n    transformOr(node) {\n        return requireAllProps({\n            kind: 'OrNode',\n            left: this.transformNode(node.left),\n            right: this.transformNode(node.right),\n        });\n    }\n    transformValueList(node) {\n        return requireAllProps({\n            kind: 'ValueListNode',\n            values: this.transformNodeList(node.values),\n        });\n    }\n    transformParens(node) {\n        return requireAllProps({\n            kind: 'ParensNode',\n            node: this.transformNode(node.node),\n        });\n    }\n    transformJoin(node) {\n        return requireAllProps({\n            kind: 'JoinNode',\n            joinType: node.joinType,\n            table: this.transformNode(node.table),\n            on: this.transformNode(node.on),\n        });\n    }\n    transformRaw(node) {\n        return requireAllProps({\n            kind: 'RawNode',\n            sqlFragments: freeze([...node.sqlFragments]),\n            parameters: this.transformNodeList(node.parameters),\n        });\n    }\n    transformWhere(node) {\n        return requireAllProps({\n            kind: 'WhereNode',\n            where: this.transformNode(node.where),\n        });\n    }\n    transformInsertQuery(node) {\n        return requireAllProps({\n            kind: 'InsertQueryNode',\n            into: this.transformNode(node.into),\n            columns: this.transformNodeList(node.columns),\n            values: this.transformNode(node.values),\n            returning: this.transformNode(node.returning),\n            onConflict: this.transformNode(node.onConflict),\n            onDuplicateKey: this.transformNode(node.onDuplicateKey),\n            with: this.transformNode(node.with),\n            ignore: node.ignore,\n            replace: node.replace,\n            explain: this.transformNode(node.explain),\n            defaultValues: node.defaultValues,\n            top: this.transformNode(node.top),\n        });\n    }\n    transformValues(node) {\n        return requireAllProps({\n            kind: 'ValuesNode',\n            values: this.transformNodeList(node.values),\n        });\n    }\n    transformDeleteQuery(node) {\n        return requireAllProps({\n            kind: 'DeleteQueryNode',\n            from: this.transformNode(node.from),\n            using: this.transformNode(node.using),\n            joins: this.transformNodeList(node.joins),\n            where: this.transformNode(node.where),\n            returning: this.transformNode(node.returning),\n            with: this.transformNode(node.with),\n            orderBy: this.transformNode(node.orderBy),\n            limit: this.transformNode(node.limit),\n            explain: this.transformNode(node.explain),\n            top: this.transformNode(node.top),\n        });\n    }\n    transformReturning(node) {\n        return requireAllProps({\n            kind: 'ReturningNode',\n            selections: this.transformNodeList(node.selections),\n        });\n    }\n    transformCreateTable(node) {\n        return requireAllProps({\n            kind: 'CreateTableNode',\n            table: this.transformNode(node.table),\n            columns: this.transformNodeList(node.columns),\n            constraints: this.transformNodeList(node.constraints),\n            temporary: node.temporary,\n            ifNotExists: node.ifNotExists,\n            onCommit: node.onCommit,\n            frontModifiers: this.transformNodeList(node.frontModifiers),\n            endModifiers: this.transformNodeList(node.endModifiers),\n            selectQuery: this.transformNode(node.selectQuery),\n        });\n    }\n    transformColumnDefinition(node) {\n        return requireAllProps({\n            kind: 'ColumnDefinitionNode',\n            column: this.transformNode(node.column),\n            dataType: this.transformNode(node.dataType),\n            references: this.transformNode(node.references),\n            primaryKey: node.primaryKey,\n            autoIncrement: node.autoIncrement,\n            unique: node.unique,\n            notNull: node.notNull,\n            unsigned: node.unsigned,\n            defaultTo: this.transformNode(node.defaultTo),\n            check: this.transformNode(node.check),\n            generated: this.transformNode(node.generated),\n            frontModifiers: this.transformNodeList(node.frontModifiers),\n            endModifiers: this.transformNodeList(node.endModifiers),\n            nullsNotDistinct: node.nullsNotDistinct,\n            identity: node.identity,\n        });\n    }\n    transformAddColumn(node) {\n        return requireAllProps({\n            kind: 'AddColumnNode',\n            column: this.transformNode(node.column),\n        });\n    }\n    transformDropTable(node) {\n        return requireAllProps({\n            kind: 'DropTableNode',\n            table: this.transformNode(node.table),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformOrderBy(node) {\n        return requireAllProps({\n            kind: 'OrderByNode',\n            items: this.transformNodeList(node.items),\n        });\n    }\n    transformOrderByItem(node) {\n        return requireAllProps({\n            kind: 'OrderByItemNode',\n            orderBy: this.transformNode(node.orderBy),\n            direction: this.transformNode(node.direction),\n        });\n    }\n    transformGroupBy(node) {\n        return requireAllProps({\n            kind: 'GroupByNode',\n            items: this.transformNodeList(node.items),\n        });\n    }\n    transformGroupByItem(node) {\n        return requireAllProps({\n            kind: 'GroupByItemNode',\n            groupBy: this.transformNode(node.groupBy),\n        });\n    }\n    transformUpdateQuery(node) {\n        return requireAllProps({\n            kind: 'UpdateQueryNode',\n            table: this.transformNode(node.table),\n            from: this.transformNode(node.from),\n            joins: this.transformNodeList(node.joins),\n            where: this.transformNode(node.where),\n            updates: this.transformNodeList(node.updates),\n            returning: this.transformNode(node.returning),\n            with: this.transformNode(node.with),\n            explain: this.transformNode(node.explain),\n            limit: this.transformNode(node.limit),\n            top: this.transformNode(node.top),\n        });\n    }\n    transformColumnUpdate(node) {\n        return requireAllProps({\n            kind: 'ColumnUpdateNode',\n            column: this.transformNode(node.column),\n            value: this.transformNode(node.value),\n        });\n    }\n    transformLimit(node) {\n        return requireAllProps({\n            kind: 'LimitNode',\n            limit: this.transformNode(node.limit),\n        });\n    }\n    transformOffset(node) {\n        return requireAllProps({\n            kind: 'OffsetNode',\n            offset: this.transformNode(node.offset),\n        });\n    }\n    transformOnConflict(node) {\n        return requireAllProps({\n            kind: 'OnConflictNode',\n            columns: this.transformNodeList(node.columns),\n            constraint: this.transformNode(node.constraint),\n            indexExpression: this.transformNode(node.indexExpression),\n            indexWhere: this.transformNode(node.indexWhere),\n            updates: this.transformNodeList(node.updates),\n            updateWhere: this.transformNode(node.updateWhere),\n            doNothing: node.doNothing,\n        });\n    }\n    transformOnDuplicateKey(node) {\n        return requireAllProps({\n            kind: 'OnDuplicateKeyNode',\n            updates: this.transformNodeList(node.updates),\n        });\n    }\n    transformCreateIndex(node) {\n        return requireAllProps({\n            kind: 'CreateIndexNode',\n            name: this.transformNode(node.name),\n            table: this.transformNode(node.table),\n            columns: this.transformNodeList(node.columns),\n            unique: node.unique,\n            using: this.transformNode(node.using),\n            ifNotExists: node.ifNotExists,\n            where: this.transformNode(node.where),\n            nullsNotDistinct: node.nullsNotDistinct,\n        });\n    }\n    transformList(node) {\n        return requireAllProps({\n            kind: 'ListNode',\n            items: this.transformNodeList(node.items),\n        });\n    }\n    transformDropIndex(node) {\n        return requireAllProps({\n            kind: 'DropIndexNode',\n            name: this.transformNode(node.name),\n            table: this.transformNode(node.table),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformPrimaryKeyConstraint(node) {\n        return requireAllProps({\n            kind: 'PrimaryKeyConstraintNode',\n            columns: this.transformNodeList(node.columns),\n            name: this.transformNode(node.name),\n        });\n    }\n    transformUniqueConstraint(node) {\n        return requireAllProps({\n            kind: 'UniqueConstraintNode',\n            columns: this.transformNodeList(node.columns),\n            name: this.transformNode(node.name),\n            nullsNotDistinct: node.nullsNotDistinct,\n        });\n    }\n    transformForeignKeyConstraint(node) {\n        return requireAllProps({\n            kind: 'ForeignKeyConstraintNode',\n            columns: this.transformNodeList(node.columns),\n            references: this.transformNode(node.references),\n            name: this.transformNode(node.name),\n            onDelete: node.onDelete,\n            onUpdate: node.onUpdate,\n        });\n    }\n    transformSetOperation(node) {\n        return requireAllProps({\n            kind: 'SetOperationNode',\n            operator: node.operator,\n            expression: this.transformNode(node.expression),\n            all: node.all,\n        });\n    }\n    transformReferences(node) {\n        return requireAllProps({\n            kind: 'ReferencesNode',\n            table: this.transformNode(node.table),\n            columns: this.transformNodeList(node.columns),\n            onDelete: node.onDelete,\n            onUpdate: node.onUpdate,\n        });\n    }\n    transformCheckConstraint(node) {\n        return requireAllProps({\n            kind: 'CheckConstraintNode',\n            expression: this.transformNode(node.expression),\n            name: this.transformNode(node.name),\n        });\n    }\n    transformWith(node) {\n        return requireAllProps({\n            kind: 'WithNode',\n            expressions: this.transformNodeList(node.expressions),\n            recursive: node.recursive,\n        });\n    }\n    transformCommonTableExpression(node) {\n        return requireAllProps({\n            kind: 'CommonTableExpressionNode',\n            name: this.transformNode(node.name),\n            materialized: node.materialized,\n            expression: this.transformNode(node.expression),\n        });\n    }\n    transformCommonTableExpressionName(node) {\n        return requireAllProps({\n            kind: 'CommonTableExpressionNameNode',\n            table: this.transformNode(node.table),\n            columns: this.transformNodeList(node.columns),\n        });\n    }\n    transformHaving(node) {\n        return requireAllProps({\n            kind: 'HavingNode',\n            having: this.transformNode(node.having),\n        });\n    }\n    transformCreateSchema(node) {\n        return requireAllProps({\n            kind: 'CreateSchemaNode',\n            schema: this.transformNode(node.schema),\n            ifNotExists: node.ifNotExists,\n        });\n    }\n    transformDropSchema(node) {\n        return requireAllProps({\n            kind: 'DropSchemaNode',\n            schema: this.transformNode(node.schema),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformAlterTable(node) {\n        return requireAllProps({\n            kind: 'AlterTableNode',\n            table: this.transformNode(node.table),\n            renameTo: this.transformNode(node.renameTo),\n            setSchema: this.transformNode(node.setSchema),\n            columnAlterations: this.transformNodeList(node.columnAlterations),\n            addConstraint: this.transformNode(node.addConstraint),\n            dropConstraint: this.transformNode(node.dropConstraint),\n            addIndex: this.transformNode(node.addIndex),\n            dropIndex: this.transformNode(node.dropIndex),\n        });\n    }\n    transformDropColumn(node) {\n        return requireAllProps({\n            kind: 'DropColumnNode',\n            column: this.transformNode(node.column),\n        });\n    }\n    transformRenameColumn(node) {\n        return requireAllProps({\n            kind: 'RenameColumnNode',\n            column: this.transformNode(node.column),\n            renameTo: this.transformNode(node.renameTo),\n        });\n    }\n    transformAlterColumn(node) {\n        return requireAllProps({\n            kind: 'AlterColumnNode',\n            column: this.transformNode(node.column),\n            dataType: this.transformNode(node.dataType),\n            dataTypeExpression: this.transformNode(node.dataTypeExpression),\n            setDefault: this.transformNode(node.setDefault),\n            dropDefault: node.dropDefault,\n            setNotNull: node.setNotNull,\n            dropNotNull: node.dropNotNull,\n        });\n    }\n    transformModifyColumn(node) {\n        return requireAllProps({\n            kind: 'ModifyColumnNode',\n            column: this.transformNode(node.column),\n        });\n    }\n    transformAddConstraint(node) {\n        return requireAllProps({\n            kind: 'AddConstraintNode',\n            constraint: this.transformNode(node.constraint),\n        });\n    }\n    transformDropConstraint(node) {\n        return requireAllProps({\n            kind: 'DropConstraintNode',\n            constraintName: this.transformNode(node.constraintName),\n            ifExists: node.ifExists,\n            modifier: node.modifier,\n        });\n    }\n    transformCreateView(node) {\n        return requireAllProps({\n            kind: 'CreateViewNode',\n            name: this.transformNode(node.name),\n            temporary: node.temporary,\n            orReplace: node.orReplace,\n            ifNotExists: node.ifNotExists,\n            materialized: node.materialized,\n            columns: this.transformNodeList(node.columns),\n            as: this.transformNode(node.as),\n        });\n    }\n    transformDropView(node) {\n        return requireAllProps({\n            kind: 'DropViewNode',\n            name: this.transformNode(node.name),\n            ifExists: node.ifExists,\n            materialized: node.materialized,\n            cascade: node.cascade,\n        });\n    }\n    transformGenerated(node) {\n        return requireAllProps({\n            kind: 'GeneratedNode',\n            byDefault: node.byDefault,\n            always: node.always,\n            identity: node.identity,\n            stored: node.stored,\n            expression: this.transformNode(node.expression),\n        });\n    }\n    transformDefaultValue(node) {\n        return requireAllProps({\n            kind: 'DefaultValueNode',\n            defaultValue: this.transformNode(node.defaultValue),\n        });\n    }\n    transformOn(node) {\n        return requireAllProps({\n            kind: 'OnNode',\n            on: this.transformNode(node.on),\n        });\n    }\n    transformSelectModifier(node) {\n        return requireAllProps({\n            kind: 'SelectModifierNode',\n            modifier: node.modifier,\n            rawModifier: this.transformNode(node.rawModifier),\n            of: this.transformNodeList(node.of),\n        });\n    }\n    transformCreateType(node) {\n        return requireAllProps({\n            kind: 'CreateTypeNode',\n            name: this.transformNode(node.name),\n            enum: this.transformNode(node.enum),\n        });\n    }\n    transformDropType(node) {\n        return requireAllProps({\n            kind: 'DropTypeNode',\n            name: this.transformNode(node.name),\n            ifExists: node.ifExists,\n        });\n    }\n    transformExplain(node) {\n        return requireAllProps({\n            kind: 'ExplainNode',\n            format: node.format,\n            options: this.transformNode(node.options),\n        });\n    }\n    transformSchemableIdentifier(node) {\n        return requireAllProps({\n            kind: 'SchemableIdentifierNode',\n            schema: this.transformNode(node.schema),\n            identifier: this.transformNode(node.identifier),\n        });\n    }\n    transformAggregateFunction(node) {\n        return requireAllProps({\n            kind: 'AggregateFunctionNode',\n            aggregated: this.transformNodeList(node.aggregated),\n            distinct: node.distinct,\n            filter: this.transformNode(node.filter),\n            func: node.func,\n            over: this.transformNode(node.over),\n        });\n    }\n    transformOver(node) {\n        return requireAllProps({\n            kind: 'OverNode',\n            orderBy: this.transformNode(node.orderBy),\n            partitionBy: this.transformNode(node.partitionBy),\n        });\n    }\n    transformPartitionBy(node) {\n        return requireAllProps({\n            kind: 'PartitionByNode',\n            items: this.transformNodeList(node.items),\n        });\n    }\n    transformPartitionByItem(node) {\n        return requireAllProps({\n            kind: 'PartitionByItemNode',\n            partitionBy: this.transformNode(node.partitionBy),\n        });\n    }\n    transformBinaryOperation(node) {\n        return requireAllProps({\n            kind: 'BinaryOperationNode',\n            leftOperand: this.transformNode(node.leftOperand),\n            operator: this.transformNode(node.operator),\n            rightOperand: this.transformNode(node.rightOperand),\n        });\n    }\n    transformUnaryOperation(node) {\n        return requireAllProps({\n            kind: 'UnaryOperationNode',\n            operator: this.transformNode(node.operator),\n            operand: this.transformNode(node.operand),\n        });\n    }\n    transformUsing(node) {\n        return requireAllProps({\n            kind: 'UsingNode',\n            tables: this.transformNodeList(node.tables),\n        });\n    }\n    transformFunction(node) {\n        return requireAllProps({\n            kind: 'FunctionNode',\n            func: node.func,\n            arguments: this.transformNodeList(node.arguments),\n        });\n    }\n    transformCase(node) {\n        return requireAllProps({\n            kind: 'CaseNode',\n            value: this.transformNode(node.value),\n            when: this.transformNodeList(node.when),\n            else: this.transformNode(node.else),\n            isStatement: node.isStatement,\n        });\n    }\n    transformWhen(node) {\n        return requireAllProps({\n            kind: 'WhenNode',\n            condition: this.transformNode(node.condition),\n            result: this.transformNode(node.result),\n        });\n    }\n    transformJSONReference(node) {\n        return requireAllProps({\n            kind: 'JSONReferenceNode',\n            reference: this.transformNode(node.reference),\n            traversal: this.transformNode(node.traversal),\n        });\n    }\n    transformJSONPath(node) {\n        return requireAllProps({\n            kind: 'JSONPathNode',\n            inOperator: this.transformNode(node.inOperator),\n            pathLegs: this.transformNodeList(node.pathLegs),\n        });\n    }\n    transformJSONPathLeg(node) {\n        return requireAllProps({\n            kind: 'JSONPathLegNode',\n            type: node.type,\n            value: node.value,\n        });\n    }\n    transformJSONOperatorChain(node) {\n        return requireAllProps({\n            kind: 'JSONOperatorChainNode',\n            operator: this.transformNode(node.operator),\n            values: this.transformNodeList(node.values),\n        });\n    }\n    transformTuple(node) {\n        return requireAllProps({\n            kind: 'TupleNode',\n            values: this.transformNodeList(node.values),\n        });\n    }\n    transformMergeQuery(node) {\n        return requireAllProps({\n            kind: 'MergeQueryNode',\n            into: this.transformNode(node.into),\n            using: this.transformNode(node.using),\n            whens: this.transformNodeList(node.whens),\n            with: this.transformNode(node.with),\n            top: this.transformNode(node.top),\n        });\n    }\n    transformMatched(node) {\n        return requireAllProps({\n            kind: 'MatchedNode',\n            not: node.not,\n            bySource: node.bySource,\n        });\n    }\n    transformAddIndex(node) {\n        return requireAllProps({\n            kind: 'AddIndexNode',\n            name: this.transformNode(node.name),\n            columns: this.transformNodeList(node.columns),\n            unique: node.unique,\n            using: this.transformNode(node.using),\n            ifNotExists: node.ifNotExists,\n        });\n    }\n    transformCast(node) {\n        return requireAllProps({\n            kind: 'CastNode',\n            expression: this.transformNode(node.expression),\n            dataType: this.transformNode(node.dataType),\n        });\n    }\n    transformFetch(node) {\n        return requireAllProps({\n            kind: 'FetchNode',\n            rowCount: this.transformNode(node.rowCount),\n            modifier: node.modifier,\n        });\n    }\n    transformTop(node) {\n        return requireAllProps({\n            kind: 'TopNode',\n            expression: node.expression,\n            modifiers: node.modifiers,\n        });\n    }\n    transformDataType(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformSelectAll(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformIdentifier(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformValue(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformPrimitiveValueList(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformOperator(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformDefaultInsertValue(node) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n}\n","/// <reference types=\"./operator-node.d.ts\" />\nimport { freeze, isString } from '../util/object-utils.js';\nexport const COMPARISON_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '<>',\n    '>',\n    '>=',\n    '<',\n    '<=',\n    'in',\n    'not in',\n    'is',\n    'is not',\n    'like',\n    'not like',\n    'match',\n    'ilike',\n    'not ilike',\n    '@>',\n    '<@',\n    '&&',\n    '?',\n    '?&',\n    '!<',\n    '!>',\n    '<=>',\n    '!~',\n    '~',\n    '~*',\n    '!~*',\n    '@@',\n    '@@@',\n    '!!',\n    '<->',\n    'regexp',\n    'is distinct from',\n    'is not distinct from',\n];\nexport const ARITHMETIC_OPERATORS = [\n    '+',\n    '-',\n    '*',\n    '/',\n    '%',\n    '^',\n    '&',\n    '|',\n    '#',\n    '<<',\n    '>>',\n];\nexport const JSON_OPERATORS = ['->', '->>'];\nexport const BINARY_OPERATORS = [\n    ...COMPARISON_OPERATORS,\n    ...ARITHMETIC_OPERATORS,\n    '&&',\n    '||',\n];\nexport const UNARY_FILTER_OPERATORS = ['exists', 'not exists'];\nexport const UNARY_OPERATORS = ['not', '-', ...UNARY_FILTER_OPERATORS];\nexport const OPERATORS = [\n    ...BINARY_OPERATORS,\n    ...JSON_OPERATORS,\n    ...UNARY_OPERATORS,\n    'between',\n    'between symmetric',\n];\n/**\n * @internal\n */\nexport const OperatorNode = freeze({\n    is(node) {\n        return node.kind === 'OperatorNode';\n    },\n    create(operator) {\n        return freeze({\n            kind: 'OperatorNode',\n            operator,\n        });\n    },\n});\nexport function isOperator(op) {\n    return isString(op) && OPERATORS.includes(op);\n}\nexport function isBinaryOperator(op) {\n    return isString(op) && BINARY_OPERATORS.includes(op);\n}\nexport function isComparisonOperator(op) {\n    return isString(op) && COMPARISON_OPERATORS.includes(op);\n}\nexport function isArithmeticOperator(op) {\n    return isString(op) && ARITHMETIC_OPERATORS.includes(op);\n}\nexport function isJSONOperator(op) {\n    return isString(op) && JSON_OPERATORS.includes(op);\n}\n","/// <reference types=\"./or-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrNode = freeze({\n    is(node) {\n        return node.kind === 'OrNode';\n    },\n    create(left, right) {\n        return freeze({\n            kind: 'OrNode',\n            left,\n            right,\n        });\n    },\n});\n","/// <reference types=\"./order-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrderByNode = freeze({\n    is(node) {\n        return node.kind === 'OrderByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'OrderByNode',\n            items: freeze([...items]),\n        });\n    },\n    cloneWithItems(orderBy, items) {\n        return freeze({\n            ...orderBy,\n            items: freeze([...orderBy.items, ...items]),\n        });\n    },\n});\n","/// <reference types=\"./parens-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ParensNode = freeze({\n    is(node) {\n        return node.kind === 'ParensNode';\n    },\n    create(node) {\n        return freeze({\n            kind: 'ParensNode',\n            node,\n        });\n    },\n});\n","/// <reference types=\"./primitive-value-list-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PrimitiveValueListNode = freeze({\n    is(node) {\n        return node.kind === 'PrimitiveValueListNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'PrimitiveValueListNode',\n            values: freeze([...values]),\n        });\n    },\n});\n","/// <reference types=\"./returning-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ReturningNode = freeze({\n    is(node) {\n        return node.kind === 'ReturningNode';\n    },\n    create(selections) {\n        return freeze({\n            kind: 'ReturningNode',\n            selections: freeze(selections),\n        });\n    },\n    cloneWithSelections(returning, selections) {\n        return freeze({\n            ...returning,\n            selections: returning.selections\n                ? freeze([...returning.selections, ...selections])\n                : freeze(selections),\n        });\n    },\n});\n","/// <reference types=\"./explain-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ExplainNode = freeze({\n    is(node) {\n        return node.kind === 'ExplainNode';\n    },\n    create(format, options) {\n        return freeze({\n            kind: 'ExplainNode',\n            format,\n            options,\n        });\n    },\n});\n","/// <reference types=\"./query-node.d.ts\" />\nimport { InsertQueryNode } from './insert-query-node.js';\nimport { SelectQueryNode } from './select-query-node.js';\nimport { UpdateQueryNode } from './update-query-node.js';\nimport { DeleteQueryNode } from './delete-query-node.js';\nimport { WhereNode } from './where-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { ReturningNode } from './returning-node.js';\nimport { ExplainNode } from './explain-node.js';\nimport { MergeQueryNode } from './merge-query-node.js';\n/**\n * @internal\n */\nexport const QueryNode = freeze({\n    is(node) {\n        return (SelectQueryNode.is(node) ||\n            InsertQueryNode.is(node) ||\n            UpdateQueryNode.is(node) ||\n            DeleteQueryNode.is(node) ||\n            MergeQueryNode.is(node));\n    },\n    cloneWithWhere(node, operation) {\n        return freeze({\n            ...node,\n            where: node.where\n                ? WhereNode.cloneWithOperation(node.where, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithJoin(node, join) {\n        return freeze({\n            ...node,\n            joins: node.joins ? freeze([...node.joins, join]) : freeze([join]),\n        });\n    },\n    cloneWithReturning(node, selections) {\n        return freeze({\n            ...node,\n            returning: node.returning\n                ? ReturningNode.cloneWithSelections(node.returning, selections)\n                : ReturningNode.create(selections),\n        });\n    },\n    cloneWithoutReturning(node) {\n        return freeze({\n            ...node,\n            returning: undefined,\n        });\n    },\n    cloneWithoutWhere(node) {\n        return freeze({\n            ...node,\n            where: undefined,\n        });\n    },\n    cloneWithExplain(node, format, options) {\n        return freeze({\n            ...node,\n            explain: ExplainNode.create(format, options?.toOperationNode()),\n        });\n    },\n    cloneWithTop(node, top) {\n        return freeze({\n            ...node,\n            top,\n        });\n    },\n});\n","/// <reference types=\"./raw-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const RawNode = freeze({\n    is(node) {\n        return node.kind === 'RawNode';\n    },\n    create(sqlFragments, parameters) {\n        return freeze({\n            kind: 'RawNode',\n            sqlFragments: freeze(sqlFragments),\n            parameters: freeze(parameters),\n        });\n    },\n    createWithSql(sql) {\n        return RawNode.create([sql], []);\n    },\n    createWithChild(child) {\n        return RawNode.create(['', ''], [child]);\n    },\n    createWithChildren(children) {\n        return RawNode.create(new Array(children.length + 1).fill(''), children);\n    },\n});\n","/// <reference types=\"./reference-node.d.ts\" />\nimport { SelectAllNode } from './select-all-node.js';\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ReferenceNode = freeze({\n    is(node) {\n        return node.kind === 'ReferenceNode';\n    },\n    create(column, table) {\n        return freeze({\n            kind: 'ReferenceNode',\n            table,\n            column,\n        });\n    },\n    createSelectAll(table) {\n        return freeze({\n            kind: 'ReferenceNode',\n            table,\n            column: SelectAllNode.create(),\n        });\n    },\n});\n","/// <reference types=\"./schemable-identifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const SchemableIdentifierNode = freeze({\n    is(node) {\n        return node.kind === 'SchemableIdentifierNode';\n    },\n    create(identifier) {\n        return freeze({\n            kind: 'SchemableIdentifierNode',\n            identifier: IdentifierNode.create(identifier),\n        });\n    },\n    createWithSchema(schema, identifier) {\n        return freeze({\n            kind: 'SchemableIdentifierNode',\n            schema: IdentifierNode.create(schema),\n            identifier: IdentifierNode.create(identifier),\n        });\n    },\n});\n","/// <reference types=\"./select-all-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SelectAllNode = freeze({\n    is(node) {\n        return node.kind === 'SelectAllNode';\n    },\n    create() {\n        return freeze({\n            kind: 'SelectAllNode',\n        });\n    },\n});\n","/// <reference types=\"./group-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GroupByNode = freeze({\n    is(node) {\n        return node.kind === 'GroupByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'GroupByNode',\n            items: freeze(items),\n        });\n    },\n    cloneWithItems(groupBy, items) {\n        return freeze({\n            ...groupBy,\n            items: freeze([...groupBy.items, ...items]),\n        });\n    },\n});\n","/// <reference types=\"./having-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const HavingNode = freeze({\n    is(node) {\n        return node.kind === 'HavingNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'HavingNode',\n            having: filter,\n        });\n    },\n    cloneWithOperation(havingNode, operator, operation) {\n        return freeze({\n            ...havingNode,\n            having: operator === 'And'\n                ? AndNode.create(havingNode.having, operation)\n                : OrNode.create(havingNode.having, operation),\n        });\n    },\n});\n","/// <reference types=\"./select-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\nimport { GroupByNode } from './group-by-node.js';\nimport { HavingNode } from './having-node.js';\nimport { OrderByNode } from './order-by-node.js';\n/**\n * @internal\n */\nexport const SelectQueryNode = freeze({\n    is(node) {\n        return node.kind === 'SelectQueryNode';\n    },\n    create(withNode) {\n        return freeze({\n            kind: 'SelectQueryNode',\n            ...(withNode && { with: withNode }),\n        });\n    },\n    createFrom(fromItems, withNode) {\n        return freeze({\n            kind: 'SelectQueryNode',\n            from: FromNode.create(fromItems),\n            ...(withNode && { with: withNode }),\n        });\n    },\n    cloneWithSelections(select, selections) {\n        return freeze({\n            ...select,\n            selections: select.selections\n                ? freeze([...select.selections, ...selections])\n                : freeze(selections),\n        });\n    },\n    cloneWithDistinctOn(select, expressions) {\n        return freeze({\n            ...select,\n            distinctOn: select.distinctOn\n                ? freeze([...select.distinctOn, ...expressions])\n                : freeze(expressions),\n        });\n    },\n    cloneWithFrontModifier(select, modifier) {\n        return freeze({\n            ...select,\n            frontModifiers: select.frontModifiers\n                ? freeze([...select.frontModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWithEndModifier(select, modifier) {\n        return freeze({\n            ...select,\n            endModifiers: select.endModifiers\n                ? freeze([...select.endModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWithOrderByItems(selectNode, items) {\n        return freeze({\n            ...selectNode,\n            orderBy: selectNode.orderBy\n                ? OrderByNode.cloneWithItems(selectNode.orderBy, items)\n                : OrderByNode.create(items),\n        });\n    },\n    cloneWithGroupByItems(selectNode, items) {\n        return freeze({\n            ...selectNode,\n            groupBy: selectNode.groupBy\n                ? GroupByNode.cloneWithItems(selectNode.groupBy, items)\n                : GroupByNode.create(items),\n        });\n    },\n    cloneWithLimit(selectNode, limit) {\n        return freeze({\n            ...selectNode,\n            limit,\n        });\n    },\n    cloneWithOffset(selectNode, offset) {\n        return freeze({\n            ...selectNode,\n            offset,\n        });\n    },\n    cloneWithFetch(selectNode, fetch) {\n        return freeze({\n            ...selectNode,\n            fetch,\n        });\n    },\n    cloneWithHaving(selectNode, operation) {\n        return freeze({\n            ...selectNode,\n            having: selectNode.having\n                ? HavingNode.cloneWithOperation(selectNode.having, 'And', operation)\n                : HavingNode.create(operation),\n        });\n    },\n    cloneWithSetOperations(selectNode, setOperations) {\n        return freeze({\n            ...selectNode,\n            setOperations: selectNode.setOperations\n                ? freeze([...selectNode.setOperations, ...setOperations])\n                : freeze([...setOperations]),\n        });\n    },\n    cloneWithoutSelections(select) {\n        return freeze({\n            ...select,\n            selections: [],\n        });\n    },\n    cloneWithoutLimit(select) {\n        return freeze({\n            ...select,\n            limit: undefined,\n        });\n    },\n    cloneWithoutOffset(select) {\n        return freeze({\n            ...select,\n            offset: undefined,\n        });\n    },\n    cloneWithoutOrderBy(select) {\n        return freeze({\n            ...select,\n            orderBy: undefined,\n        });\n    },\n});\n","/// <reference types=\"./set-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SetOperationNode = freeze({\n    is(node) {\n        return node.kind === 'SetOperationNode';\n    },\n    create(operator, expression, all) {\n        return freeze({\n            kind: 'SetOperationNode',\n            operator,\n            expression,\n            all,\n        });\n    },\n});\n","/// <reference types=\"./table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const TableNode = freeze({\n    is(node) {\n        return node.kind === 'TableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'TableNode',\n            table: SchemableIdentifierNode.create(table),\n        });\n    },\n    createWithSchema(schema, table) {\n        return freeze({\n            kind: 'TableNode',\n            table: SchemableIdentifierNode.createWithSchema(schema, table),\n        });\n    },\n});\n","/// <reference types=\"./update-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\n/**\n * @internal\n */\nexport const UpdateQueryNode = freeze({\n    is(node) {\n        return node.kind === 'UpdateQueryNode';\n    },\n    create(table, withNode) {\n        return freeze({\n            kind: 'UpdateQueryNode',\n            table,\n            ...(withNode && { with: withNode }),\n        });\n    },\n    createWithoutTable() {\n        return freeze({\n            kind: 'UpdateQueryNode',\n        });\n    },\n    cloneWithFromItems(updateQuery, fromItems) {\n        return freeze({\n            ...updateQuery,\n            from: updateQuery.from\n                ? FromNode.cloneWithFroms(updateQuery.from, fromItems)\n                : FromNode.create(fromItems),\n        });\n    },\n    cloneWithUpdates(updateQuery, updates) {\n        return freeze({\n            ...updateQuery,\n            updates: updateQuery.updates\n                ? freeze([...updateQuery.updates, ...updates])\n                : updates,\n        });\n    },\n    cloneWithLimit(updateQuery, limit) {\n        return freeze({\n            ...updateQuery,\n            limit,\n        });\n    },\n});\n","/// <reference types=\"./value-list-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValueListNode = freeze({\n    is(node) {\n        return node.kind === 'ValueListNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'ValueListNode',\n            values: freeze(values),\n        });\n    },\n});\n","/// <reference types=\"./value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValueNode = freeze({\n    is(node) {\n        return node.kind === 'ValueNode';\n    },\n    create(value) {\n        return freeze({\n            kind: 'ValueNode',\n            value,\n        });\n    },\n    createImmediate(value) {\n        return freeze({\n            kind: 'ValueNode',\n            value,\n            immediate: true,\n        });\n    },\n});\n","/// <reference types=\"./when-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const WhenNode = freeze({\n    is(node) {\n        return node.kind === 'WhenNode';\n    },\n    create(condition) {\n        return freeze({\n            kind: 'WhenNode',\n            condition,\n        });\n    },\n    cloneWithResult(whenNode, result) {\n        return freeze({\n            ...whenNode,\n            result,\n        });\n    },\n});\n","/// <reference types=\"./where-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const WhereNode = freeze({\n    is(node) {\n        return node.kind === 'WhereNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'WhereNode',\n            where: filter,\n        });\n    },\n    cloneWithOperation(whereNode, operator, operation) {\n        return freeze({\n            ...whereNode,\n            where: operator === 'And'\n                ? AndNode.create(whereNode.where, operation)\n                : OrNode.create(whereNode.where, operation),\n        });\n    },\n});\n","/// <reference types=\"./binary-operation-parser.d.ts\" />\nimport { BinaryOperationNode } from '../operation-node/binary-operation-node.js';\nimport { isBoolean, isNull, isString, isUndefined, } from '../util/object-utils.js';\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { OperatorNode, OPERATORS, } from '../operation-node/operator-node.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nimport { parseValueExpression, parseValueExpressionOrList, } from './value-parser.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { OrNode } from '../operation-node/or-node.js';\nexport function parseValueBinaryOperationOrExpression(args) {\n    if (args.length === 3) {\n        return parseValueBinaryOperation(args[0], args[1], args[2]);\n    }\n    else if (args.length === 1) {\n        return parseValueExpression(args[0]);\n    }\n    throw new Error(`invalid arguments: ${JSON.stringify(args)}`);\n}\nexport function parseValueBinaryOperation(left, operator, right) {\n    if (isIsOperator(operator) && needsIsOperator(right)) {\n        return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), ValueNode.createImmediate(right));\n    }\n    return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), parseValueExpressionOrList(right));\n}\nexport function parseReferentialBinaryOperation(left, operator, right) {\n    return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), parseReferenceExpression(right));\n}\nexport function parseFilterObject(obj, combinator) {\n    return parseFilterList(Object.entries(obj)\n        .filter(([, v]) => !isUndefined(v))\n        .map(([k, v]) => parseValueBinaryOperation(k, needsIsOperator(v) ? 'is' : '=', v)), combinator);\n}\nexport function parseFilterList(list, combinator, withParens = true) {\n    const combine = combinator === 'and' ? AndNode.create : OrNode.create;\n    if (list.length === 0) {\n        return BinaryOperationNode.create(ValueNode.createImmediate(1), OperatorNode.create('='), ValueNode.createImmediate(combinator === 'and' ? 1 : 0));\n    }\n    let node = toOperationNode(list[0]);\n    for (let i = 1; i < list.length; ++i) {\n        node = combine(node, toOperationNode(list[i]));\n    }\n    if (list.length > 1 && withParens) {\n        return ParensNode.create(node);\n    }\n    return node;\n}\nfunction isIsOperator(operator) {\n    return operator === 'is' || operator === 'is not';\n}\nfunction needsIsOperator(value) {\n    return isNull(value) || isBoolean(value);\n}\nfunction parseOperator(operator) {\n    if (isString(operator) && OPERATORS.includes(operator)) {\n        return OperatorNode.create(operator);\n    }\n    if (isOperationNodeSource(operator)) {\n        return operator.toOperationNode();\n    }\n    throw new Error(`invalid operator ${JSON.stringify(operator)}`);\n}\nfunction toOperationNode(nodeOrSource) {\n    return isOperationNodeSource(nodeOrSource)\n        ? nodeOrSource.toOperationNode()\n        : nodeOrSource;\n}\n","/// <reference types=\"./data-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nconst SIMPLE_COLUMN_DATA_TYPES = [\n    'varchar',\n    'char',\n    'text',\n    'integer',\n    'int2',\n    'int4',\n    'int8',\n    'smallint',\n    'bigint',\n    'boolean',\n    'real',\n    'double precision',\n    'float4',\n    'float8',\n    'decimal',\n    'numeric',\n    'binary',\n    'bytea',\n    'date',\n    'datetime',\n    'time',\n    'timetz',\n    'timestamp',\n    'timestamptz',\n    'serial',\n    'bigserial',\n    'uuid',\n    'json',\n    'jsonb',\n    'blob',\n];\nconst COLUMN_DATA_TYPE_REGEX = [\n    /^varchar\\(\\d+\\)$/,\n    /^char\\(\\d+\\)$/,\n    /^decimal\\(\\d+, \\d+\\)$/,\n    /^numeric\\(\\d+, \\d+\\)$/,\n    /^binary\\(\\d+\\)$/,\n    /^datetime\\(\\d+\\)$/,\n    /^time\\(\\d+\\)$/,\n    /^timez\\(\\d+\\)$/,\n    /^timestamp\\(\\d+\\)$/,\n    /^timestamptz\\(\\d+\\)$/,\n];\n/**\n * @internal\n */\nexport const DataTypeNode = freeze({\n    is(node) {\n        return node.kind === 'DataTypeNode';\n    },\n    create(dataType) {\n        return freeze({\n            kind: 'DataTypeNode',\n            dataType,\n        });\n    },\n});\nexport function isColumnDataType(dataType) {\n    if (SIMPLE_COLUMN_DATA_TYPES.includes(dataType)) {\n        return true;\n    }\n    if (COLUMN_DATA_TYPE_REGEX.some((r) => r.test(dataType))) {\n        return true;\n    }\n    return false;\n}\n","/// <reference types=\"./data-type-parser.d.ts\" />\nimport { DataTypeNode, isColumnDataType, } from '../operation-node/data-type-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nexport function parseDataTypeExpression(dataType) {\n    if (isOperationNodeSource(dataType)) {\n        return dataType.toOperationNode();\n    }\n    if (isColumnDataType(dataType)) {\n        return DataTypeNode.create(dataType);\n    }\n    throw new Error(`invalid column data type ${JSON.stringify(dataType)}`);\n}\n","/// <reference types=\"./expression-parser.d.ts\" />\nimport { isAliasedExpression, isExpression, } from '../expression/expression.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nexport function parseExpression(exp) {\n    if (isOperationNodeSource(exp)) {\n        return exp.toOperationNode();\n    }\n    else if (isFunction(exp)) {\n        return exp(expressionBuilder()).toOperationNode();\n    }\n    throw new Error(`invalid expression: ${JSON.stringify(exp)}`);\n}\nexport function parseAliasedExpression(exp) {\n    if (isOperationNodeSource(exp)) {\n        return exp.toOperationNode();\n    }\n    else if (isFunction(exp)) {\n        return exp(expressionBuilder()).toOperationNode();\n    }\n    throw new Error(`invalid aliased expression: ${JSON.stringify(exp)}`);\n}\nexport function isExpressionOrFactory(obj) {\n    return isExpression(obj) || isAliasedExpression(obj) || isFunction(obj);\n}\n","/// <reference types=\"./expression.d.ts\" />\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { isObject, isString } from '../util/object-utils.js';\nexport function isExpression(obj) {\n    return isObject(obj) && 'expressionType' in obj && isOperationNodeSource(obj);\n}\nexport function isAliasedExpression(obj) {\n    return (isObject(obj) &&\n        'expression' in obj &&\n        isString(obj.alias) &&\n        isOperationNodeSource(obj));\n}\n","/// <reference types=\"./join-parser.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { parseTableExpression, } from './table-parser.js';\nimport { parseReferentialBinaryOperation } from './binary-operation-parser.js';\nimport { createJoinBuilder } from './parse-utils.js';\nexport function parseJoin(joinType, args) {\n    if (args.length === 3) {\n        return parseSingleOnJoin(joinType, args[0], args[1], args[2]);\n    }\n    else if (args.length === 2) {\n        return parseCallbackJoin(joinType, args[0], args[1]);\n    }\n    else {\n        throw new Error('not implemented');\n    }\n}\nfunction parseCallbackJoin(joinType, from, callback) {\n    return callback(createJoinBuilder(joinType, from)).toOperationNode();\n}\nfunction parseSingleOnJoin(joinType, from, lhsColumn, rhsColumn) {\n    return JoinNode.createWithOn(joinType, parseTableExpression(from), parseReferentialBinaryOperation(lhsColumn, '=', rhsColumn));\n}\n","/// <reference types=\"./order-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrderByItemNode = freeze({\n    is(node) {\n        return node.kind === 'OrderByItemNode';\n    },\n    create(orderBy, direction) {\n        return freeze({\n            kind: 'OrderByItemNode',\n            orderBy,\n            direction,\n        });\n    },\n});\n","/// <reference types=\"./order-by-parser.d.ts\" />\nimport { isDynamicReferenceBuilder } from '../dynamic/dynamic-reference-builder.js';\nimport { OrderByItemNode } from '../operation-node/order-by-item-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { isExpressionOrFactory, parseExpression } from './expression-parser.js';\nimport { parseStringReference } from './reference-parser.js';\nexport function isOrderByDirection(thing) {\n    return thing === 'asc' || thing === 'desc';\n}\nexport function parseOrderBy(args) {\n    if (args.length === 2) {\n        return [parseOrderByItem(args[0], args[1])];\n    }\n    if (args.length === 1) {\n        const [orderBy] = args;\n        if (Array.isArray(orderBy)) {\n            return orderBy.map((item) => parseOrderByItem(item));\n        }\n        return [parseOrderByItem(orderBy)];\n    }\n    throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${args.length}`);\n}\nexport function parseOrderByItem(ref, direction) {\n    const parsedRef = parseOrderByExpression(ref);\n    if (OrderByItemNode.is(parsedRef)) {\n        if (direction) {\n            throw new Error('Cannot specify direction twice!');\n        }\n        return parsedRef;\n    }\n    return OrderByItemNode.create(parsedRef, parseOrderByDirectionExpression(direction));\n}\nfunction parseOrderByExpression(expr) {\n    if (isExpressionOrFactory(expr)) {\n        return parseExpression(expr);\n    }\n    if (isDynamicReferenceBuilder(expr)) {\n        return expr.toOperationNode();\n    }\n    const [ref, direction] = expr.split(' ');\n    if (direction) {\n        if (!isOrderByDirection(direction)) {\n            throw new Error(`Invalid order by direction: ${direction}`);\n        }\n        return OrderByItemNode.create(parseStringReference(ref), parseOrderByDirectionExpression(direction));\n    }\n    return parseStringReference(expr);\n}\nfunction parseOrderByDirectionExpression(expr) {\n    if (!expr) {\n        return undefined;\n    }\n    if (expr === 'asc' || expr === 'desc') {\n        return RawNode.createWithSql(expr);\n    }\n    return expr.toOperationNode();\n}\n","/// <reference types=\"./partition-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PartitionByNode = freeze({\n    is(node) {\n        return node.kind === 'PartitionByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'PartitionByNode',\n            items: freeze(items),\n        });\n    },\n    cloneWithItems(partitionBy, items) {\n        return freeze({\n            ...partitionBy,\n            items: freeze([...partitionBy.items, ...items]),\n        });\n    },\n});\n","/// <reference types=\"./over-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { OrderByNode } from './order-by-node.js';\nimport { PartitionByNode } from './partition-by-node.js';\n/**\n * @internal\n */\nexport const OverNode = freeze({\n    is(node) {\n        return node.kind === 'OverNode';\n    },\n    create() {\n        return freeze({\n            kind: 'OverNode',\n        });\n    },\n    cloneWithOrderByItems(overNode, items) {\n        return freeze({\n            ...overNode,\n            orderBy: overNode.orderBy\n                ? OrderByNode.cloneWithItems(overNode.orderBy, items)\n                : OrderByNode.create(items),\n        });\n    },\n    cloneWithPartitionByItems(overNode, items) {\n        return freeze({\n            ...overNode,\n            partitionBy: overNode.partitionBy\n                ? PartitionByNode.cloneWithItems(overNode.partitionBy, items)\n                : PartitionByNode.create(items),\n        });\n    },\n});\n","/// <reference types=\"./join-builder.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class JoinBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    on(...args) {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Just like {@link WhereInterface.whereRef} but adds an item to the join's\n     * `on` clause instead.\n     *\n     * See {@link WhereInterface.whereRef} for documentation and examples.\n     */\n    onRef(lhs, op, rhs) {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    /**\n     * Adds `on true`.\n     */\n    onTrue() {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, RawNode.createWithSql('true')),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.joinNode;\n    }\n}\npreventAwait(JoinBuilder, \"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.\");\n","/// <reference types=\"./partition-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PartitionByItemNode = freeze({\n    is(node) {\n        return node.kind === 'PartitionByItemNode';\n    },\n    create(partitionBy) {\n        return freeze({\n            kind: 'PartitionByItemNode',\n            partitionBy,\n        });\n    },\n});\n","/// <reference types=\"./partition-by-parser.d.ts\" />\nimport { PartitionByItemNode } from '../operation-node/partition-by-item-node.js';\nimport { parseReferenceExpressionOrList, } from './reference-parser.js';\nexport function parsePartitionBy(partitionBy) {\n    return parseReferenceExpressionOrList(partitionBy).map(PartitionByItemNode.create);\n}\n","/// <reference types=\"./over-builder.d.ts\" />\nimport { OverNode } from '../operation-node/over-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { parsePartitionBy, } from '../parser/partition-by-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class OverBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds an order by clause item inside the over function.\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.avg<number>('age').over(\n     *       ob => ob.orderBy('first_name', 'asc').orderBy('last_name', 'asc')\n     *     ).as('average_age')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select avg(\"age\") over(order by \"first_name\" asc, \"last_name\" asc) as \"average_age\"\n     * from \"person\"\n     * ```\n     */\n    orderBy(orderBy, direction) {\n        return new OverBuilder({\n            overNode: OverNode.cloneWithOrderByItems(this.#props.overNode, parseOrderBy([orderBy, direction])),\n        });\n    }\n    partitionBy(partitionBy) {\n        return new OverBuilder({\n            overNode: OverNode.cloneWithPartitionByItems(this.#props.overNode, parsePartitionBy(partitionBy)),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.overNode;\n    }\n}\npreventAwait(OverBuilder, \"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.\");\n","/// <reference types=\"./parse-utils.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { OverNode } from '../operation-node/over-node.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { JoinBuilder } from '../query-builder/join-builder.js';\nimport { OverBuilder } from '../query-builder/over-builder.js';\nimport { createSelectQueryBuilder as newSelectQueryBuilder, } from '../query-builder/select-query-builder.js';\nimport { QueryCreator } from '../query-creator.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { parseTableExpression, parseTableExpressionOrList, } from './table-parser.js';\nexport function createSelectQueryBuilder() {\n    return newSelectQueryBuilder({\n        queryId: createQueryId(),\n        executor: NOOP_QUERY_EXECUTOR,\n        queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList([])),\n    });\n}\nexport function createQueryCreator() {\n    return new QueryCreator({\n        executor: NOOP_QUERY_EXECUTOR,\n    });\n}\nexport function createJoinBuilder(joinType, table) {\n    return new JoinBuilder({\n        joinNode: JoinNode.create(joinType, parseTableExpression(table)),\n    });\n}\nexport function createOverBuilder() {\n    return new OverBuilder({\n        overNode: OverNode.create(),\n    });\n}\n","/// <reference types=\"./reference-parser.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ReferenceNode } from '../operation-node/reference-node.js';\nimport { TableNode } from '../operation-node/table-node.js';\nimport { isReadonlyArray, isString } from '../util/object-utils.js';\nimport { parseExpression, isExpressionOrFactory, } from './expression-parser.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOrderByDirection, parseOrderBy, } from './order-by-parser.js';\nimport { OperatorNode, isJSONOperator, } from '../operation-node/operator-node.js';\nimport { JSONReferenceNode } from '../operation-node/json-reference-node.js';\nimport { JSONOperatorChainNode } from '../operation-node/json-operator-chain-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nexport function parseSimpleReferenceExpression(exp) {\n    if (isString(exp)) {\n        return parseStringReference(exp);\n    }\n    return exp.toOperationNode();\n}\nexport function parseReferenceExpressionOrList(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg.map((it) => parseReferenceExpression(it));\n    }\n    else {\n        return [parseReferenceExpression(arg)];\n    }\n}\nexport function parseReferenceExpression(exp) {\n    if (isExpressionOrFactory(exp)) {\n        return parseExpression(exp);\n    }\n    return parseSimpleReferenceExpression(exp);\n}\nexport function parseJSONReference(ref, op) {\n    const referenceNode = parseStringReference(ref);\n    if (isJSONOperator(op)) {\n        return JSONReferenceNode.create(referenceNode, JSONOperatorChainNode.create(OperatorNode.create(op)));\n    }\n    const opWithoutLastChar = op.slice(0, -1);\n    if (isJSONOperator(opWithoutLastChar)) {\n        return JSONReferenceNode.create(referenceNode, JSONPathNode.create(OperatorNode.create(opWithoutLastChar)));\n    }\n    throw new Error(`Invalid JSON operator: ${op}`);\n}\nexport function parseStringReference(ref) {\n    const COLUMN_SEPARATOR = '.';\n    if (!ref.includes(COLUMN_SEPARATOR)) {\n        return ReferenceNode.create(ColumnNode.create(ref));\n    }\n    const parts = ref.split(COLUMN_SEPARATOR).map(trim);\n    if (parts.length === 3) {\n        return parseStringReferenceWithTableAndSchema(parts);\n    }\n    if (parts.length === 2) {\n        return parseStringReferenceWithTable(parts);\n    }\n    throw new Error(`invalid column reference ${ref}`);\n}\nexport function parseAliasedStringReference(ref) {\n    const ALIAS_SEPARATOR = ' as ';\n    if (ref.includes(ALIAS_SEPARATOR)) {\n        const [columnRef, alias] = ref.split(ALIAS_SEPARATOR).map(trim);\n        return AliasNode.create(parseStringReference(columnRef), IdentifierNode.create(alias));\n    }\n    else {\n        return parseStringReference(ref);\n    }\n}\nexport function parseColumnName(column) {\n    return ColumnNode.create(column);\n}\nexport function parseOrderedColumnName(column) {\n    const ORDER_SEPARATOR = ' ';\n    if (column.includes(ORDER_SEPARATOR)) {\n        const [columnName, order] = column.split(ORDER_SEPARATOR).map(trim);\n        if (!isOrderByDirection(order)) {\n            throw new Error(`invalid order direction \"${order}\" next to \"${columnName}\"`);\n        }\n        return parseOrderBy([columnName, order])[0];\n    }\n    else {\n        return parseColumnName(column);\n    }\n}\nfunction parseStringReferenceWithTableAndSchema(parts) {\n    const [schema, table, column] = parts;\n    return ReferenceNode.create(ColumnNode.create(column), TableNode.createWithSchema(schema, table));\n}\nfunction parseStringReferenceWithTable(parts) {\n    const [table, column] = parts;\n    return ReferenceNode.create(ColumnNode.create(column), TableNode.create(table));\n}\nfunction trim(str) {\n    return str.trim();\n}\n","/// <reference types=\"./selection-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ReferenceNode } from './reference-node.js';\nimport { SelectAllNode } from './select-all-node.js';\n/**\n * @internal\n */\nexport const SelectionNode = freeze({\n    is(node) {\n        return node.kind === 'SelectionNode';\n    },\n    create(selection) {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: selection,\n        });\n    },\n    createSelectAll() {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: SelectAllNode.create(),\n        });\n    },\n    createSelectAllFromTable(table) {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: ReferenceNode.createSelectAll(table),\n        });\n    },\n});\n","/// <reference types=\"./select-parser.d.ts\" />\nimport { isFunction, isReadonlyArray, isString } from '../util/object-utils.js';\nimport { SelectionNode } from '../operation-node/selection-node.js';\nimport { parseAliasedStringReference } from './reference-parser.js';\nimport { isDynamicReferenceBuilder, } from '../dynamic/dynamic-reference-builder.js';\nimport { parseAliasedExpression, } from './expression-parser.js';\nimport { parseTable } from './table-parser.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nexport function parseSelectArg(selection) {\n    if (isFunction(selection)) {\n        return parseSelectArg(selection(expressionBuilder()));\n    }\n    else if (isReadonlyArray(selection)) {\n        return selection.map((it) => parseSelectExpression(it));\n    }\n    else {\n        return [parseSelectExpression(selection)];\n    }\n}\nfunction parseSelectExpression(selection) {\n    if (isString(selection)) {\n        return SelectionNode.create(parseAliasedStringReference(selection));\n    }\n    else if (isDynamicReferenceBuilder(selection)) {\n        return SelectionNode.create(selection.toOperationNode());\n    }\n    else {\n        return SelectionNode.create(parseAliasedExpression(selection));\n    }\n}\nexport function parseSelectAll(table) {\n    if (!table) {\n        return [SelectionNode.createSelectAll()];\n    }\n    else if (Array.isArray(table)) {\n        return table.map(parseSelectAllArg);\n    }\n    else {\n        return [parseSelectAllArg(table)];\n    }\n}\nfunction parseSelectAllArg(table) {\n    if (isString(table)) {\n        return SelectionNode.createSelectAllFromTable(parseTable(table));\n    }\n    throw new Error(`invalid value selectAll expression: ${JSON.stringify(table)}`);\n}\n","/// <reference types=\"./table-parser.d.ts\" />\nimport { isReadonlyArray, isString } from '../util/object-utils.js';\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { TableNode } from '../operation-node/table-node.js';\nimport { parseAliasedExpression, } from './expression-parser.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nexport function parseTableExpressionOrList(table) {\n    if (isReadonlyArray(table)) {\n        return table.map((it) => parseTableExpression(it));\n    }\n    else {\n        return [parseTableExpression(table)];\n    }\n}\nexport function parseTableExpression(table) {\n    if (isString(table)) {\n        return parseAliasedTable(table);\n    }\n    else {\n        return parseAliasedExpression(table);\n    }\n}\nexport function parseAliasedTable(from) {\n    const ALIAS_SEPARATOR = ' as ';\n    if (from.includes(ALIAS_SEPARATOR)) {\n        const [table, alias] = from.split(ALIAS_SEPARATOR).map(trim);\n        return AliasNode.create(parseTable(table), IdentifierNode.create(alias));\n    }\n    else {\n        return parseTable(from);\n    }\n}\nexport function parseTable(from) {\n    const SCHEMA_SEPARATOR = '.';\n    if (from.includes(SCHEMA_SEPARATOR)) {\n        const [schema, table] = from.split(SCHEMA_SEPARATOR).map(trim);\n        return TableNode.createWithSchema(schema, table);\n    }\n    else {\n        return TableNode.create(from);\n    }\n}\nfunction trim(str) {\n    return str.trim();\n}\n","/// <reference types=\"./top-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const TopNode = freeze({\n    is(node) {\n        return node.kind === 'TopNode';\n    },\n    create(expression, modifiers) {\n        return freeze({\n            kind: 'TopNode',\n            expression,\n            modifiers,\n        });\n    },\n});\n","/// <reference types=\"./top-parser.d.ts\" />\nimport { TopNode } from '../operation-node/top-node.js';\nimport { isBigInt, isNumber, isUndefined } from '../util/object-utils.js';\nexport function parseTop(expression, modifiers) {\n    if (!isNumber(expression) && !isBigInt(expression)) {\n        throw new Error(`Invalid top expression: ${expression}`);\n    }\n    if (!isUndefined(modifiers) && !isTopModifiers(modifiers)) {\n        throw new Error(`Invalid top modifiers: ${modifiers}`);\n    }\n    return TopNode.create(expression, modifiers);\n}\nfunction isTopModifiers(modifiers) {\n    return (modifiers === 'percent' ||\n        modifiers === 'with ties' ||\n        modifiers === 'percent with ties');\n}\n","/// <reference types=\"./value-parser.d.ts\" />\nimport { PrimitiveValueListNode } from '../operation-node/primitive-value-list-node.js';\nimport { ValueListNode } from '../operation-node/value-list-node.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nimport { isBoolean, isNull, isNumber, isReadonlyArray, } from '../util/object-utils.js';\nimport { parseExpression, isExpressionOrFactory, } from './expression-parser.js';\nexport function parseValueExpressionOrList(arg) {\n    if (isReadonlyArray(arg)) {\n        return parseValueExpressionList(arg);\n    }\n    return parseValueExpression(arg);\n}\nexport function parseValueExpression(exp) {\n    if (isExpressionOrFactory(exp)) {\n        return parseExpression(exp);\n    }\n    return ValueNode.create(exp);\n}\nexport function isSafeImmediateValue(value) {\n    return isNumber(value) || isBoolean(value) || isNull(value);\n}\nexport function parseSafeImmediateValue(value) {\n    if (!isSafeImmediateValue(value)) {\n        throw new Error(`unsafe immediate value ${JSON.stringify(value)}`);\n    }\n    return ValueNode.createImmediate(value);\n}\nfunction parseValueExpressionList(arg) {\n    if (arg.some(isExpressionOrFactory)) {\n        return ValueListNode.create(arg.map((it) => parseValueExpression(it)));\n    }\n    return PrimitiveValueListNode.create(arg);\n}\n","/// <reference types=\"./with-schema-transformer.d.ts\" />\nimport { AliasNode } from '../../operation-node/alias-node.js';\nimport { IdentifierNode } from '../../operation-node/identifier-node.js';\nimport { OperationNodeTransformer } from '../../operation-node/operation-node-transformer.js';\nimport { SchemableIdentifierNode } from '../../operation-node/schemable-identifier-node.js';\nimport { TableNode } from '../../operation-node/table-node.js';\nimport { freeze } from '../../util/object-utils.js';\n// This object exist only so that we get a type error when a new RootOperationNode\n// is added. If you get a type error here, make sure to add the new root node and\n// handle it correctly in the transformer.\n//\n// DO NOT REFACTOR THIS EVEN IF IT SEEMS USELESS TO YOU!\nconst ROOT_OPERATION_NODES = freeze({\n    AlterTableNode: true,\n    CreateIndexNode: true,\n    CreateSchemaNode: true,\n    CreateTableNode: true,\n    CreateTypeNode: true,\n    CreateViewNode: true,\n    DeleteQueryNode: true,\n    DropIndexNode: true,\n    DropSchemaNode: true,\n    DropTableNode: true,\n    DropTypeNode: true,\n    DropViewNode: true,\n    InsertQueryNode: true,\n    RawNode: true,\n    SelectQueryNode: true,\n    UpdateQueryNode: true,\n    MergeQueryNode: true,\n});\nexport class WithSchemaTransformer extends OperationNodeTransformer {\n    #schema;\n    #schemableIds = new Set();\n    #ctes = new Set();\n    constructor(schema) {\n        super();\n        this.#schema = schema;\n    }\n    transformNodeImpl(node) {\n        if (!this.#isRootOperationNode(node)) {\n            return super.transformNodeImpl(node);\n        }\n        const ctes = this.#collectCTEs(node);\n        for (const cte of ctes) {\n            this.#ctes.add(cte);\n        }\n        const tables = this.#collectSchemableIds(node);\n        for (const table of tables) {\n            this.#schemableIds.add(table);\n        }\n        const transformed = super.transformNodeImpl(node);\n        for (const table of tables) {\n            this.#schemableIds.delete(table);\n        }\n        for (const cte of ctes) {\n            this.#ctes.delete(cte);\n        }\n        return transformed;\n    }\n    transformSchemableIdentifier(node) {\n        const transformed = super.transformSchemableIdentifier(node);\n        if (transformed.schema || !this.#schemableIds.has(node.identifier.name)) {\n            return transformed;\n        }\n        return {\n            ...transformed,\n            schema: IdentifierNode.create(this.#schema),\n        };\n    }\n    transformReferences(node) {\n        const transformed = super.transformReferences(node);\n        if (transformed.table.table.schema) {\n            return transformed;\n        }\n        return {\n            ...transformed,\n            table: TableNode.createWithSchema(this.#schema, transformed.table.table.identifier.name),\n        };\n    }\n    #isRootOperationNode(node) {\n        return node.kind in ROOT_OPERATION_NODES;\n    }\n    #collectSchemableIds(node) {\n        const schemableIds = new Set();\n        if ('name' in node && node.name && SchemableIdentifierNode.is(node.name)) {\n            this.#collectSchemableId(node.name, schemableIds);\n        }\n        if ('from' in node && node.from) {\n            for (const from of node.from.froms) {\n                this.#collectSchemableIdsFromTableExpr(from, schemableIds);\n            }\n        }\n        if ('into' in node && node.into) {\n            this.#collectSchemableIdsFromTableExpr(node.into, schemableIds);\n        }\n        if ('table' in node && node.table) {\n            this.#collectSchemableIdsFromTableExpr(node.table, schemableIds);\n        }\n        if ('joins' in node && node.joins) {\n            for (const join of node.joins) {\n                this.#collectSchemableIdsFromTableExpr(join.table, schemableIds);\n            }\n        }\n        if ('using' in node && node.using) {\n            this.#collectSchemableIdsFromTableExpr(node.using, schemableIds);\n        }\n        return schemableIds;\n    }\n    #collectCTEs(node) {\n        const ctes = new Set();\n        if ('with' in node && node.with) {\n            this.#collectCTEIds(node.with, ctes);\n        }\n        return ctes;\n    }\n    #collectSchemableIdsFromTableExpr(node, schemableIds) {\n        const table = TableNode.is(node)\n            ? node\n            : AliasNode.is(node) && TableNode.is(node.node)\n                ? node.node\n                : null;\n        if (table) {\n            this.#collectSchemableId(table.table, schemableIds);\n        }\n    }\n    #collectSchemableId(node, schemableIds) {\n        const id = node.identifier.name;\n        if (!this.#schemableIds.has(id) && !this.#ctes.has(id)) {\n            schemableIds.add(id);\n        }\n    }\n    #collectCTEIds(node, ctes) {\n        for (const expr of node.expressions) {\n            const cteId = expr.name.table.table.identifier.name;\n            if (!this.#ctes.has(cteId)) {\n                ctes.add(cteId);\n            }\n        }\n    }\n}\n","/// <reference types=\"./with-schema-plugin.d.ts\" />\nimport { WithSchemaTransformer } from './with-schema-transformer.js';\nexport class WithSchemaPlugin {\n    #transformer;\n    constructor(schema) {\n        this.#transformer = new WithSchemaTransformer(schema);\n    }\n    transformQuery(args) {\n        return this.#transformer.transformNode(args.node);\n    }\n    async transformResult(args) {\n        return args.result;\n    }\n}\n","/// <reference types=\"./case-builder.d.ts\" />\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { freeze } from '../util/object-utils.js';\nimport { CaseNode } from '../operation-node/case-node.js';\nimport { WhenNode } from '../operation-node/when-node.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { isSafeImmediateValue, parseSafeImmediateValue, parseValueExpression, } from '../parser/value-parser.js';\nexport class CaseBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    when(...args) {\n        return new CaseThenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithWhen(this.#props.node, WhenNode.create(parseValueBinaryOperationOrExpression(args))),\n        });\n    }\n}\nexport class CaseThenBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    then(valueExpression) {\n        return new CaseWhenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithThen(this.#props.node, isSafeImmediateValue(valueExpression)\n                ? parseSafeImmediateValue(valueExpression)\n                : parseValueExpression(valueExpression)),\n        });\n    }\n}\nexport class CaseWhenBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    when(...args) {\n        return new CaseThenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithWhen(this.#props.node, WhenNode.create(parseValueBinaryOperationOrExpression(args))),\n        });\n    }\n    else(valueExpression) {\n        return new CaseEndBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWith(this.#props.node, {\n                else: isSafeImmediateValue(valueExpression)\n                    ? parseSafeImmediateValue(valueExpression)\n                    : parseValueExpression(valueExpression),\n            }),\n        });\n    }\n    end() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: false }));\n    }\n    endCase() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: true }));\n    }\n}\nexport class CaseEndBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    end() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: false }));\n    }\n    endCase() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: true }));\n    }\n}\n","/// <reference types=\"./aggregate-function-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhereNode } from './where-node.js';\n/**\n * @internal\n */\nexport const AggregateFunctionNode = freeze({\n    is(node) {\n        return node.kind === 'AggregateFunctionNode';\n    },\n    create(aggregateFunction, aggregated = []) {\n        return freeze({\n            kind: 'AggregateFunctionNode',\n            func: aggregateFunction,\n            aggregated,\n        });\n    },\n    cloneWithDistinct(aggregateFunctionNode) {\n        return freeze({\n            ...aggregateFunctionNode,\n            distinct: true,\n        });\n    },\n    cloneWithFilter(aggregateFunctionNode, filter) {\n        return freeze({\n            ...aggregateFunctionNode,\n            filter: aggregateFunctionNode.filter\n                ? WhereNode.cloneWithOperation(aggregateFunctionNode.filter, 'And', filter)\n                : WhereNode.create(filter),\n        });\n    },\n    cloneWithOrFilter(aggregateFunctionNode, filter) {\n        return freeze({\n            ...aggregateFunctionNode,\n            filter: aggregateFunctionNode.filter\n                ? WhereNode.cloneWithOperation(aggregateFunctionNode.filter, 'Or', filter)\n                : WhereNode.create(filter),\n        });\n    },\n    cloneWithOver(aggregateFunctionNode, over) {\n        return freeze({\n            ...aggregateFunctionNode,\n            over,\n        });\n    },\n});\n","/// <reference types=\"./function-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const FunctionNode = freeze({\n    is(node) {\n        return node.kind === 'FunctionNode';\n    },\n    create(func, args) {\n        return freeze({\n            kind: 'FunctionNode',\n            func,\n            arguments: args,\n        });\n    },\n});\n","/// <reference types=\"./aggregate-function-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AggregateFunctionNode } from '../operation-node/aggregate-function-node.js';\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { createOverBuilder } from '../parser/parse-utils.js';\nimport { parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nexport class AggregateFunctionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    /**\n     * Returns an aliased version of the function.\n     *\n     * In addition to slapping `as \"the_alias\"` to the end of the SQL,\n     * this method also provides strict typing:\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.count<number>('id').as('person_count')\n     *   )\n     *   .executeTakeFirstOrThrow()\n     *\n     * // `person_count: number` field exists in the result type.\n     * console.log(result.person_count)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select count(\"id\") as \"person_count\"\n     * from \"person\"\n     * ```\n     */\n    as(alias) {\n        return new AliasedAggregateFunctionBuilder(this, alias);\n    }\n    /**\n     * Adds a `distinct` clause inside the function.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select((eb) =>\n     *     eb.fn.count<number>('first_name').distinct().as('first_name_count')\n     *   )\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select count(distinct \"first_name\") as \"first_name_count\"\n     * from \"person\"\n     * ```\n     */\n    distinct() {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithDistinct(this.#props.aggregateFunctionNode),\n        });\n    }\n    filterWhere(...args) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithFilter(this.#props.aggregateFunctionNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Adds a `filter` clause with a nested `where` clause after the function, where\n     * both sides of the operator are references to columns.\n     *\n     * Similar to {@link WhereInterface}'s `whereRef` method.\n     *\n     * ### Examples\n     *\n     * Count people with same first and last names versus general public:\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select((eb) => [\n     *     eb.fn\n     *       .count<number>('id')\n     *       .filterWhereRef('first_name', '=', 'last_name')\n     *       .as('repeat_name_count'),\n     *     eb.fn.count<number>('id').as('total_count'),\n     *   ])\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select\n     *   count(\"id\") filter(where \"first_name\" = \"last_name\") as \"repeat_name_count\",\n     *   count(\"id\") as \"total_count\"\n     * from \"person\"\n     * ```\n     */\n    filterWhereRef(lhs, op, rhs) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithFilter(this.#props.aggregateFunctionNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    /**\n     * Adds an `over` clause (window functions) after the function.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.avg<number>('age').over().as('average_age')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select avg(\"age\") over() as \"average_age\"\n     * from \"person\"\n     * ```\n     *\n     * Also supports passing a callback that returns an over builder,\n     * allowing to add partition by and sort by clauses inside over.\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.avg<number>('age').over(\n     *       ob => ob.partitionBy('last_name').orderBy('first_name', 'asc')\n     *     ).as('average_age')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select avg(\"age\") over(partition by \"last_name\" order by \"first_name\" asc) as \"average_age\"\n     * from \"person\"\n     * ```\n     */\n    over(over) {\n        const builder = createOverBuilder();\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithOver(this.#props.aggregateFunctionNode, (over ? over(builder) : builder).toOperationNode()),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Casts the expression to the given type.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `AggregateFunctionBuilder` with a new output type.\n     */\n    $castTo() {\n        return new AggregateFunctionBuilder(this.#props);\n    }\n    /**\n     * Omit null from the expression's type.\n     *\n     * This function can be useful in cases where you know an expression can't be\n     * null, but Kysely is unable to infer it.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of `this` with a new output type.\n     */\n    $notNull() {\n        return new AggregateFunctionBuilder(this.#props);\n    }\n    toOperationNode() {\n        return this.#props.aggregateFunctionNode;\n    }\n}\npreventAwait(AggregateFunctionBuilder, \"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.\");\n/**\n * {@link AggregateFunctionBuilder} with an alias. The result of calling {@link AggregateFunctionBuilder.as}.\n */\nexport class AliasedAggregateFunctionBuilder {\n    #aggregateFunctionBuilder;\n    #alias;\n    constructor(aggregateFunctionBuilder, alias) {\n        this.#aggregateFunctionBuilder = aggregateFunctionBuilder;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#aggregateFunctionBuilder;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#aggregateFunctionBuilder.toOperationNode(), IdentifierNode.create(this.#alias));\n    }\n}\n","/// <reference types=\"./function-module.d.ts\" />\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { AggregateFunctionNode } from '../operation-node/aggregate-function-node.js';\nimport { FunctionNode } from '../operation-node/function-node.js';\nimport { parseReferenceExpressionOrList, } from '../parser/reference-parser.js';\nimport { parseSelectAll } from '../parser/select-parser.js';\nimport { AggregateFunctionBuilder } from './aggregate-function-builder.js';\nimport { isString } from '../util/object-utils.js';\nimport { parseTable } from '../parser/table-parser.js';\nexport function createFunctionModule() {\n    const fn = (name, args) => {\n        return new ExpressionWrapper(FunctionNode.create(name, parseReferenceExpressionOrList(args ?? [])));\n    };\n    const agg = (name, args) => {\n        return new AggregateFunctionBuilder({\n            aggregateFunctionNode: AggregateFunctionNode.create(name, args ? parseReferenceExpressionOrList(args) : undefined),\n        });\n    };\n    return Object.assign(fn, {\n        agg,\n        avg(column) {\n            return agg('avg', [column]);\n        },\n        coalesce(...values) {\n            return fn('coalesce', values);\n        },\n        count(column) {\n            return agg('count', [column]);\n        },\n        countAll(table) {\n            return new AggregateFunctionBuilder({\n                aggregateFunctionNode: AggregateFunctionNode.create('count', parseSelectAll(table)),\n            });\n        },\n        max(column) {\n            return agg('max', [column]);\n        },\n        min(column) {\n            return agg('min', [column]);\n        },\n        sum(column) {\n            return agg('sum', [column]);\n        },\n        any(column) {\n            return fn('any', [column]);\n        },\n        jsonAgg(table) {\n            return new AggregateFunctionBuilder({\n                aggregateFunctionNode: AggregateFunctionNode.create('json_agg', [\n                    isString(table) ? parseTable(table) : table.toOperationNode(),\n                ]),\n            });\n        },\n        toJson(table) {\n            return new ExpressionWrapper(FunctionNode.create('to_json', [\n                isString(table) ? parseTable(table) : table.toOperationNode(),\n            ]));\n        },\n    });\n}\n","/// <reference types=\"./no-result-error.d.ts\" />\nexport class NoResultError extends Error {\n    /**\n     * The operation node tree of the query that was executed.\n     */\n    node;\n    constructor(node) {\n        super('no result');\n        this.node = node;\n    }\n}\nexport function isNoResultErrorConstructor(fn) {\n    return Object.prototype.hasOwnProperty.call(fn, 'prototype');\n}\n","/// <reference types=\"./select-modifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SelectModifierNode = freeze({\n    is(node) {\n        return node.kind === 'SelectModifierNode';\n    },\n    create(modifier, of) {\n        return freeze({\n            kind: 'SelectModifierNode',\n            modifier,\n            of,\n        });\n    },\n    createWithExpression(modifier) {\n        return freeze({\n            kind: 'SelectModifierNode',\n            rawModifier: modifier,\n        });\n    },\n});\n","/// <reference types=\"./offset-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OffsetNode = freeze({\n    is(node) {\n        return node.kind === 'OffsetNode';\n    },\n    create(offset) {\n        return freeze({\n            kind: 'OffsetNode',\n            offset,\n        });\n    },\n});\n","/// <reference types=\"./group-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GroupByItemNode = freeze({\n    is(node) {\n        return node.kind === 'GroupByItemNode';\n    },\n    create(groupBy) {\n        return freeze({\n            kind: 'GroupByItemNode',\n            groupBy,\n        });\n    },\n});\n","/// <reference types=\"./group-by-parser.d.ts\" />\nimport { GroupByItemNode } from '../operation-node/group-by-item-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { parseReferenceExpressionOrList, } from './reference-parser.js';\nexport function parseGroupBy(groupBy) {\n    groupBy = isFunction(groupBy) ? groupBy(expressionBuilder()) : groupBy;\n    return parseReferenceExpressionOrList(groupBy).map(GroupByItemNode.create);\n}\n","/// <reference types=\"./set-operation-parser.d.ts\" />\nimport { createExpressionBuilder, } from '../expression/expression-builder.js';\nimport { SetOperationNode, } from '../operation-node/set-operation-node.js';\nimport { isFunction, isReadonlyArray } from '../util/object-utils.js';\nimport { parseExpression } from './expression-parser.js';\nexport function parseSetOperations(operator, expression, all) {\n    if (isFunction(expression)) {\n        expression = expression(createExpressionBuilder());\n    }\n    if (!isReadonlyArray(expression)) {\n        expression = [expression];\n    }\n    return expression.map((expr) => SetOperationNode.create(operator, parseExpression(expr), all));\n}\n","/// <reference types=\"./fetch-node.d.ts\" />\nimport { ValueNode } from './value-node.js';\n/**\n * @internal\n */\nexport const FetchNode = {\n    is(node) {\n        return node.kind === 'FetchNode';\n    },\n    create(rowCount, modifier) {\n        return {\n            kind: 'FetchNode',\n            rowCount: ValueNode.create(rowCount),\n            modifier,\n        };\n    },\n};\n","/// <reference types=\"./fetch-parser.d.ts\" />\nimport { FetchNode } from '../operation-node/fetch-node.js';\nimport { isBigInt, isNumber } from '../util/object-utils.js';\nexport function parseFetch(rowCount, modifier) {\n    if (!isNumber(rowCount) && !isBigInt(rowCount)) {\n        throw new Error(`Invalid fetch row count: ${rowCount}`);\n    }\n    if (!isFetchModifier(modifier)) {\n        throw new Error(`Invalid fetch modifier: ${modifier}`);\n    }\n    return FetchNode.create(rowCount, modifier);\n}\nfunction isFetchModifier(value) {\n    return value === 'only' || value === 'with ties';\n}\n","/// <reference types=\"./select-query-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { SelectModifierNode } from '../operation-node/select-modifier-node.js';\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { parseReferenceExpressionOrList, } from '../parser/reference-parser.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { OffsetNode } from '../operation-node/offset-node.js';\nimport { asArray, freeze } from '../util/object-utils.js';\nimport { parseGroupBy } from '../parser/group-by-parser.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { parseSetOperations, } from '../parser/set-operation-parser.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { parseFetch } from '../parser/fetch-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nclass SelectQueryBuilderImpl {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    get expressionType() {\n        return undefined;\n    }\n    get isSelectQueryBuilder() {\n        return true;\n    }\n    where(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    having(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithHaving(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    havingRef(lhs, op, rhs) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithHaving(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    select(selection) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSelections(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    distinctOn(selection) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithDistinctOn(this.#props.queryNode, parseReferenceExpressionOrList(selection)),\n        });\n    }\n    modifyFront(modifier) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFrontModifier(this.#props.queryNode, SelectModifierNode.createWithExpression(modifier.toOperationNode())),\n        });\n    }\n    modifyEnd(modifier) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.createWithExpression(modifier.toOperationNode())),\n        });\n    }\n    distinct() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFrontModifier(this.#props.queryNode, SelectModifierNode.create('Distinct')),\n        });\n    }\n    forUpdate(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForUpdate', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forShare(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForShare', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forKeyShare(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForKeyShare', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forNoKeyUpdate(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForNoKeyUpdate', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    skipLocked() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('SkipLocked')),\n        });\n    }\n    noWait() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('NoWait')),\n        });\n    }\n    selectAll(table) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSelections(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    innerJoin(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('InnerJoin', args)),\n        });\n    }\n    leftJoin(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('LeftJoin', args)),\n        });\n    }\n    rightJoin(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('RightJoin', args)),\n        });\n    }\n    fullJoin(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('FullJoin', args)),\n        });\n    }\n    innerJoinLateral(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('LateralInnerJoin', args)),\n        });\n    }\n    leftJoinLateral(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('LateralLeftJoin', args)),\n        });\n    }\n    orderBy(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithOrderByItems(this.#props.queryNode, parseOrderBy(args)),\n        });\n    }\n    groupBy(groupBy) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithGroupByItems(this.#props.queryNode, parseGroupBy(groupBy)),\n        });\n    }\n    limit(limit) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    offset(offset) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithOffset(this.#props.queryNode, OffsetNode.create(parseValueExpression(offset))),\n        });\n    }\n    fetch(rowCount, modifier = 'only') {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFetch(this.#props.queryNode, parseFetch(rowCount, modifier)),\n        });\n    }\n    top(expression, modifiers) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    union(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('union', expression, false)),\n        });\n    }\n    unionAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('union', expression, true)),\n        });\n    }\n    intersect(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('intersect', expression, false)),\n        });\n    }\n    intersectAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('intersect', expression, true)),\n        });\n    }\n    except(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('except', expression, false)),\n        });\n    }\n    exceptAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('except', expression, true)),\n        });\n    }\n    as(alias) {\n        return new AliasedSelectQueryBuilderImpl(this, alias);\n    }\n    clearSelect() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutSelections(this.#props.queryNode),\n        });\n    }\n    clearWhere() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    clearLimit() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutLimit(this.#props.queryNode),\n        });\n    }\n    clearOffset() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutOffset(this.#props.queryNode),\n        });\n    }\n    clearOrderBy() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutOrderBy(this.#props.queryNode),\n        });\n    }\n    $call(func) {\n        return func(this);\n    }\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n        });\n    }\n    $castTo() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $narrowType() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $assertType() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $asTuple() {\n        return new ExpressionWrapper(this.toOperationNode());\n    }\n    withPlugin(plugin) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery, this.#props.queryId);\n        return result.rows;\n    }\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize, this.#props.queryId);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\npreventAwait(SelectQueryBuilderImpl, \"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.\");\nexport function createSelectQueryBuilder(props) {\n    return new SelectQueryBuilderImpl(props);\n}\n/**\n * {@link SelectQueryBuilder} with an alias. The result of calling {@link SelectQueryBuilder.as}.\n */\nclass AliasedSelectQueryBuilderImpl {\n    #queryBuilder;\n    #alias;\n    constructor(queryBuilder, alias) {\n        this.#queryBuilder = queryBuilder;\n        this.#alias = alias;\n    }\n    get expression() {\n        return this.#queryBuilder;\n    }\n    get alias() {\n        return this.#alias;\n    }\n    get isAliasedSelectQueryBuilder() {\n        return true;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#queryBuilder.toOperationNode(), IdentifierNode.create(this.#alias));\n    }\n}\npreventAwait(AliasedSelectQueryBuilderImpl, \"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.\");\n","/// <reference types=\"./values-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValuesNode = freeze({\n    is(node) {\n        return node.kind === 'ValuesNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'ValuesNode',\n            values: freeze(values),\n        });\n    },\n});\n","/// <reference types=\"./default-insert-value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DefaultInsertValueNode = freeze({\n    is(node) {\n        return node.kind === 'DefaultInsertValueNode';\n    },\n    create() {\n        return freeze({\n            kind: 'DefaultInsertValueNode',\n        });\n    },\n});\n","/// <reference types=\"./insert-values-parser.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { PrimitiveValueListNode } from '../operation-node/primitive-value-list-node.js';\nimport { ValueListNode } from '../operation-node/value-list-node.js';\nimport { freeze, isFunction, isReadonlyArray, isUndefined, } from '../util/object-utils.js';\nimport { parseValueExpression } from './value-parser.js';\nimport { ValuesNode } from '../operation-node/values-node.js';\nimport { isExpressionOrFactory } from './expression-parser.js';\nimport { DefaultInsertValueNode } from '../operation-node/default-insert-value-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nexport function parseInsertExpression(arg) {\n    const objectOrList = isFunction(arg) ? arg(expressionBuilder()) : arg;\n    const list = isReadonlyArray(objectOrList)\n        ? objectOrList\n        : freeze([objectOrList]);\n    return parseInsertColumnsAndValues(list);\n}\nfunction parseInsertColumnsAndValues(rows) {\n    const columns = parseColumnNamesAndIndexes(rows);\n    return [\n        freeze([...columns.keys()].map(ColumnNode.create)),\n        ValuesNode.create(rows.map((row) => parseRowValues(row, columns))),\n    ];\n}\nfunction parseColumnNamesAndIndexes(rows) {\n    const columns = new Map();\n    for (const row of rows) {\n        const cols = Object.keys(row);\n        for (const col of cols) {\n            if (!columns.has(col) && row[col] !== undefined) {\n                columns.set(col, columns.size);\n            }\n        }\n    }\n    return columns;\n}\nfunction parseRowValues(row, columns) {\n    const rowColumns = Object.keys(row);\n    const rowValues = Array.from({\n        length: columns.size,\n    });\n    let hasUndefinedOrComplexColumns = false;\n    for (const col of rowColumns) {\n        const columnIdx = columns.get(col);\n        if (isUndefined(columnIdx)) {\n            continue;\n        }\n        const value = row[col];\n        if (isUndefined(value) || isExpressionOrFactory(value)) {\n            hasUndefinedOrComplexColumns = true;\n        }\n        rowValues[columnIdx] = value;\n    }\n    const hasMissingColumns = rowColumns.length < columns.size;\n    if (hasMissingColumns || hasUndefinedOrComplexColumns) {\n        const defaultValue = DefaultInsertValueNode.create();\n        return ValueListNode.create(rowValues.map((it) => isUndefined(it) ? defaultValue : parseValueExpression(it)));\n    }\n    return PrimitiveValueListNode.create(rowValues);\n}\n","/// <reference types=\"./column-update-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ColumnUpdateNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnUpdateNode';\n    },\n    create(column, value) {\n        return freeze({\n            kind: 'ColumnUpdateNode',\n            column,\n            value,\n        });\n    },\n});\n","/// <reference types=\"./update-set-parser.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ColumnUpdateNode } from '../operation-node/column-update-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { parseValueExpression } from './value-parser.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nexport function parseUpdate(...args) {\n    if (args.length === 2) {\n        return [\n            ColumnUpdateNode.create(parseReferenceExpression(args[0]), parseValueExpression(args[1])),\n        ];\n    }\n    return parseUpdateObjectExpression(args[0]);\n}\nexport function parseUpdateObjectExpression(update) {\n    const updateObj = isFunction(update) ? update(expressionBuilder()) : update;\n    return Object.entries(updateObj)\n        .filter(([_, value]) => value !== undefined)\n        .map(([key, value]) => {\n        return ColumnUpdateNode.create(ColumnNode.create(key), parseValueExpression(value));\n    });\n}\n","/// <reference types=\"./on-duplicate-key-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OnDuplicateKeyNode = freeze({\n    is(node) {\n        return node.kind === 'OnDuplicateKeyNode';\n    },\n    create(updates) {\n        return freeze({\n            kind: 'OnDuplicateKeyNode',\n            updates,\n        });\n    },\n});\n","/// <reference types=\"./insert-result.d.ts\" />\n/**\n * The result of an insert query.\n *\n * If the table has an auto incrementing primary key {@link insertId} will hold\n * the generated id on dialects that support it. For example PostgreSQL doesn't\n * return the id by default and {@link insertId} is undefined. On PostgreSQL you\n * need to use {@link ReturningInterface.returning} or {@link ReturningInterface.returningAll}\n * to get out the inserted id.\n *\n * {@link numInsertedOrUpdatedRows} holds the number of (actually) inserted rows.\n * On MySQL, updated rows are counted twice when using `on duplicate key update`.\n *\n * ### Examples\n *\n * ```ts\n * const result = await db\n *   .insertInto('person')\n *   .values(person)\n *   .executeTakeFirst()\n *\n * console.log(result.insertId)\n * ```\n */\nexport class InsertResult {\n    /**\n     * The auto incrementing primary key of the inserted row.\n     *\n     * This property can be undefined when the query contains an `on conflict`\n     * clause that makes the query succeed even when nothing gets inserted.\n     *\n     * This property is always undefined on dialects like PostgreSQL that\n     * don't return the inserted id by default. On those dialects you need\n     * to use the {@link ReturningInterface.returning | returning} method.\n     */\n    insertId;\n    /**\n     * Affected rows count.\n     */\n    numInsertedOrUpdatedRows;\n    constructor(insertId, numInsertedOrUpdatedRows) {\n        this.insertId = insertId;\n        this.numInsertedOrUpdatedRows = numInsertedOrUpdatedRows;\n    }\n}\n","/// <reference types=\"./on-conflict-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhereNode } from './where-node.js';\n/**\n * @internal\n */\nexport const OnConflictNode = freeze({\n    is(node) {\n        return node.kind === 'OnConflictNode';\n    },\n    create() {\n        return freeze({\n            kind: 'OnConflictNode',\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithIndexWhere(node, operation) {\n        return freeze({\n            ...node,\n            indexWhere: node.indexWhere\n                ? WhereNode.cloneWithOperation(node.indexWhere, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithIndexOrWhere(node, operation) {\n        return freeze({\n            ...node,\n            indexWhere: node.indexWhere\n                ? WhereNode.cloneWithOperation(node.indexWhere, 'Or', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithUpdateWhere(node, operation) {\n        return freeze({\n            ...node,\n            updateWhere: node.updateWhere\n                ? WhereNode.cloneWithOperation(node.updateWhere, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithUpdateOrWhere(node, operation) {\n        return freeze({\n            ...node,\n            updateWhere: node.updateWhere\n                ? WhereNode.cloneWithOperation(node.updateWhere, 'Or', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithoutIndexWhere(node) {\n        return freeze({\n            ...node,\n            indexWhere: undefined,\n        });\n    },\n    cloneWithoutUpdateWhere(node) {\n        return freeze({\n            ...node,\n            updateWhere: undefined,\n        });\n    },\n});\n","/// <reference types=\"./on-conflict-builder.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { OnConflictNode } from '../operation-node/on-conflict-node.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { parseUpdateObjectExpression, } from '../parser/update-set-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nexport class OnConflictBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Specify a single column as the conflict target.\n     *\n     * Also see the {@link columns}, {@link constraint} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    column(column) {\n        const columnNode = ColumnNode.create(column);\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                columns: this.#props.onConflictNode.columns\n                    ? freeze([...this.#props.onConflictNode.columns, columnNode])\n                    : freeze([columnNode]),\n            }),\n        });\n    }\n    /**\n     * Specify a list of columns as the conflict target.\n     *\n     * Also see the {@link column}, {@link constraint} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    columns(columns) {\n        const columnNodes = columns.map(ColumnNode.create);\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                columns: this.#props.onConflictNode.columns\n                    ? freeze([...this.#props.onConflictNode.columns, ...columnNodes])\n                    : freeze(columnNodes),\n            }),\n        });\n    }\n    /**\n     * Specify a specific constraint by name as the conflict target.\n     *\n     * Also see the {@link column}, {@link columns} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    constraint(constraintName) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                constraint: IdentifierNode.create(constraintName),\n            }),\n        });\n    }\n    /**\n     * Specify an expression as the conflict target.\n     *\n     * This can be used if the unique index is an expression index.\n     *\n     * Also see the {@link column}, {@link columns} and {@link constraint}\n     * methods for alternative ways to specify the conflict target.\n     */\n    expression(expression) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                indexExpression: expression.toOperationNode(),\n            }),\n        });\n    }\n    where(...args) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithIndexWhere(this.#props.onConflictNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithIndexWhere(this.#props.onConflictNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithoutIndexWhere(this.#props.onConflictNode),\n        });\n    }\n    /**\n     * Adds the \"do nothing\" conflict action.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values({ first_name, pic })\n     *   .onConflict((oc) => oc\n     *     .column('pic')\n     *     .doNothing()\n     *   )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"pic\")\n     * values ($1, $2)\n     * on conflict (\"pic\") do nothing\n     * ```\n     */\n    doNothing() {\n        return new OnConflictDoNothingBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                doNothing: true,\n            }),\n        });\n    }\n    /**\n     * Adds the \"do update set\" conflict action.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values({ first_name, pic })\n     *   .onConflict((oc) => oc\n     *     .column('pic')\n     *     .doUpdateSet({ first_name })\n     *   )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"pic\")\n     * values ($1, $2)\n     * on conflict (\"pic\")\n     * do update set \"first_name\" = $3\n     * ```\n     *\n     * In the next example we use the `ref` method to reference\n     * columns of the virtual table `excluded` in a type-safe way\n     * to create an upsert operation:\n     *\n     * ```ts\n     * db.insertInto('person')\n     *   .values(person)\n     *   .onConflict((oc) => oc\n     *     .column('id')\n     *     .doUpdateSet((eb) => ({\n     *       first_name: eb.ref('excluded.first_name'),\n     *       last_name: eb.ref('excluded.last_name')\n     *     }))\n     *   )\n     * ```\n     */\n    doUpdateSet(update) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                updates: parseUpdateObjectExpression(update),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n}\npreventAwait(OnConflictBuilder, \"don't await OnConflictBuilder instances.\");\nexport class OnConflictDoNothingBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.onConflictNode;\n    }\n}\npreventAwait(OnConflictDoNothingBuilder, \"don't await OnConflictDoNothingBuilder instances.\");\nexport class OnConflictUpdateBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithUpdateWhere(this.#props.onConflictNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Specify a where condition for the update operation.\n     *\n     * See {@link WhereInterface.whereRef} for more info.\n     */\n    whereRef(lhs, op, rhs) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithUpdateWhere(this.#props.onConflictNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithoutUpdateWhere(this.#props.onConflictNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.onConflictNode;\n    }\n}\npreventAwait(OnConflictUpdateBuilder, \"don't await OnConflictUpdateBuilder instances.\");\n","/// <reference types=\"./insert-query-builder.d.ts\" />\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { parseInsertExpression, } from '../parser/insert-values-parser.js';\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { parseUpdateObjectExpression, } from '../parser/update-set-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { OnDuplicateKeyNode } from '../operation-node/on-duplicate-key-node.js';\nimport { InsertResult } from './insert-result.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { parseExpression, } from '../parser/expression-parser.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { OnConflictBuilder, } from './on-conflict-builder.js';\nimport { OnConflictNode } from '../operation-node/on-conflict-node.js';\nimport { parseTop } from '../parser/top-parser.js';\nexport class InsertQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Sets the values to insert for an {@link Kysely.insertInto | insert} query.\n     *\n     * This method takes an object whose keys are column names and values are\n     * values to insert. In addition to the column's type, the values can be\n     * raw {@link sql} snippets or select queries.\n     *\n     * You must provide all fields you haven't explicitly marked as nullable\n     * or optional using {@link Generated} or {@link ColumnType}.\n     *\n     * The return value of an `insert` query is an instance of {@link InsertResult}. The\n     * {@link InsertResult.insertId | insertId} field holds the auto incremented primary\n     * key if the database returned one.\n     *\n     * On PostgreSQL and some other dialects, you need to call `returning` to get\n     * something out of the query.\n     *\n     * Also see the {@link expression} method for inserting the result of a select\n     * query or any other expression.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"insert\", \"Single row\", 10) -->\n     *\n     * Insert a single row:\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40\n     *   })\n     *   .executeTakeFirst()\n     *\n     * // `insertId` is only available on dialects that\n     * // automatically return the id of the inserted row\n     * // such as MySQL and SQLite. On PostgreSQL, for example,\n     * // you need to add a `returning` clause to the query to\n     * // get anything out. See the \"returning data\" example.\n     * console.log(result.insertId)\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert into `person` (`first_name`, `last_name`, `age`) values (?, ?, ?)\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Multiple rows\", 20) -->\n     *\n     * On dialects that support it (for example PostgreSQL) you can insert multiple\n     * rows by providing an array. Note that the return value is once again very\n     * dialect-specific. Some databases may only return the id of the *last* inserted\n     * row and some return nothing at all unless you call `returning`.\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values([{\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40,\n     *   }, {\n     *     first_name: 'Arnold',\n     *     last_name: 'Schwarzenegger',\n     *     age: 70,\n     *   }])\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\") values (($1, $2, $3), ($4, $5, $6))\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Returning data\", 30) -->\n     *\n     * On supported dialects like PostgreSQL you need to chain `returning` to the query to get\n     * the inserted row's columns (or any other expression) as the return value. `returning`\n     * works just like `select`. Refer to `select` method's examples and documentation for\n     * more info.\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40,\n     *   })\n     *   .returning(['id', 'first_name as name'])\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\") values ($1, $2, $3) returning \"id\", \"first_name\" as \"name\"\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Complex values\", 40) -->\n     *\n     * In addition to primitives, the values can also be arbitrary expressions.\n     * You can build the expressions by using a callback and calling the methods\n     * on the expression builder passed to it:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * const ani = \"Ani\"\n     * const ston = \"ston\"\n     *\n     * const result = await db\n     *   .insertInto('person')\n     *   .values(({ ref, selectFrom, fn }) => ({\n     *     first_name: 'Jennifer',\n     *     last_name: sql`concat(${ani}, ${ston})`,\n     *     middle_name: ref('first_name'),\n     *     age: selectFrom('person')\n     *       .select(fn.avg<number>('age')\n     *       .as('avg_age')),\n     *   }))\n     *   .executeTakeFirst()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\n     *   \"first_name\",\n     *   \"last_name\",\n     *   \"middle_name\",\n     *   \"age\"\n     * )\n     * values (\n     *   $1,\n     *   concat($2, $3),\n     *   \"first_name\",\n     *   (select avg(\"age\") as \"avg_age\" from \"person\")\n     * )\n     * ```\n     *\n     * You can also use the callback version of subqueries or raw expressions:\n     *\n     * ```ts\n     * db.with('jennifer', (db) => db\n     *   .selectFrom('person')\n     *   .where('first_name', '=', 'Jennifer')\n     *   .select(['id', 'first_name', 'gender'])\n     *   .limit(1)\n     * ).insertInto('pet').values((eb) => ({\n     *   owner_id: eb.selectFrom('jennifer').select('id'),\n     *   name: eb.selectFrom('jennifer').select('first_name'),\n     *   species: 'cat',\n     * }))\n     * ```\n     */\n    values(insert) {\n        const [columns, values] = parseInsertExpression(insert);\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                columns,\n                values,\n            }),\n        });\n    }\n    /**\n     * Sets the columns to insert.\n     *\n     * The {@link values} method sets both the columns and the values and this method\n     * is not needed. But if you are using the {@link expression} method, you can use\n     * this method to set the columns to insert.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.insertInto('person')\n     *   .columns(['first_name'])\n     *   .expression((eb) => eb.selectFrom('pet').select('pet.name'))\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\")\n     * select \"pet\".\"name\" from \"pet\"\n     * ```\n     */\n    columns(columns) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                columns: freeze(columns.map(ColumnNode.create)),\n            }),\n        });\n    }\n    /**\n     * Insert an arbitrary expression. For example the result of a select query.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"insert\", \"Insert subquery\", 50) -->\n     *\n     * You can create an `INSERT INTO SELECT FROM` query using the `expression` method:\n     *\n     * ```ts\n     * const result = await db.insertInto('person')\n     *   .columns(['first_name', 'last_name', 'age'])\n     *   .expression((eb) => eb\n     *     .selectFrom('pet')\n     *     .select((eb) => [\n     *       'pet.name',\n     *       eb.val('Petson').as('last_name'),\n     *       eb.lit(7).as('age'),\n     *     ])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\")\n     * select \"pet\".\"name\", $1 as \"last_name\", 7 as \"age from \"pet\"\n     * ```\n     */\n    expression(expression) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                values: parseExpression(expression),\n            }),\n        });\n    }\n    /**\n     * Creates an `insert into \"person\" default values` query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .defaultValues()\n     *   .execute()\n     * ```\n     */\n    defaultValues() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                defaultValues: true,\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert ignore into` query.\n     *\n     * If you use the ignore modifier, ignorable errors that occur while executing the\n     * insert statement are ignored. For example, without ignore, a row that duplicates\n     * an existing unique index or primary key value in the table causes a duplicate-key\n     * error and the statement is aborted. With ignore, the row is discarded and no error\n     * occurs.\n     *\n     * This is only supported on some dialects like MySQL. On most dialects you should\n     * use the {@link onConflict} method.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .ignore()\n     *   .values(values)\n     *   .execute()\n     * ```\n     */\n    ignore() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                ignore: true,\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert top into` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Insert the first 5 rows:\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .top(5)\n     *   .columns(['first_name', 'gender'])\n     *   .expression(\n     *     (eb) => eb.selectFrom('pet').select(['name', sql.lit('other').as('gender')])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * insert top(5) into \"person\" (\"first_name\", \"gender\") select \"name\", 'other' as \"gender\" from \"pet\"\n     * ```\n     *\n     * Insert the first 50 percent of rows:\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .top(50, 'percent')\n     *   .columns(['first_name', 'gender'])\n     *   .expression(\n     *     (eb) => eb.selectFrom('pet').select(['name', sql.lit('other').as('gender')])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * insert top(50) percent into \"person\" (\"first_name\", \"gender\") select \"name\", 'other' as \"gender\" from \"pet\"\n     * ```\n     */\n    top(expression, modifiers) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    /**\n     * Adds an `on conflict` clause to the query.\n     *\n     * `on conflict` is only supported by some dialects like PostgreSQL and SQLite. On MySQL\n     * you can use {@link ignore} and {@link onDuplicateKeyUpdate} to achieve similar results.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\")\n     * values ($1, $2)\n     * on conflict (\"name\")\n     * do update set \"species\" = $3\n     * ```\n     *\n     * You can provide the name of the constraint instead of a column name:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *   })\n     *   .onConflict((oc) => oc\n     *     .constraint('pet_name_key')\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\")\n     * values ($1, $2)\n     * on conflict on constraint \"pet_name_key\"\n     * do update set \"species\" = $3\n     * ```\n     *\n     * You can also specify an expression as the conflict target in case\n     * the unique index is an expression index:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *   })\n     *   .onConflict((oc) => oc\n     *     .expression(sql`lower(name)`)\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\")\n     * values ($1, $2)\n     * on conflict (lower(name))\n     * do update set \"species\" = $3\n     * ```\n     *\n     * You can add a filter for the update statement like this:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doUpdateSet({ species: 'hamster' })\n     *     .where('excluded.name', '!=', 'Catto'')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\")\n     * values ($1, $2)\n     * on conflict (\"name\")\n     * do update set \"species\" = $3\n     * where \"excluded\".\"name\" != $4\n     * ```\n     *\n     * You can create an `on conflict do nothing` clauses like this:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doNothing()\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\")\n     * values ($1, $2)\n     * on conflict (\"name\") do nothing\n     * ```\n     *\n     * You can refer to the columns of the virtual `excluded` table\n     * in a type-safe way using a callback and the `ref` method of\n     * `ExpressionBuilder`:\n     *\n     * ```ts\n     * db.insertInto('person')\n     *   .values(person)\n     *   .onConflict(oc => oc\n     *     .column('id')\n     *     .doUpdateSet({\n     *       first_name: (eb) => eb.ref('excluded.first_name'),\n     *       last_name: (eb) => eb.ref('excluded.last_name')\n     *     })\n     *   )\n     * ```\n     */\n    onConflict(callback) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                onConflict: callback(new OnConflictBuilder({\n                    onConflictNode: OnConflictNode.create(),\n                })).toOperationNode(),\n            }),\n        });\n    }\n    /**\n     * Adds `on duplicate key update` to the query.\n     *\n     * If you specify `on duplicate key update`, and a row is inserted that would cause\n     * a duplicate value in a unique index or primary key, an update of the old row occurs.\n     *\n     * This is only implemented by some dialects like MySQL. On most dialects you should\n     * use {@link onConflict} instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values(values)\n     *   .onDuplicateKeyUpdate({ species: 'hamster' })\n     * ```\n     */\n    onDuplicateKeyUpdate(update) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                onDuplicateKey: OnDuplicateKeyNode.create(parseUpdateObjectExpression(update)),\n            }),\n        });\n    }\n    returning(selection) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll()),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.insertInto('person')\n     *   .values({ first_name: 'James', last_name: 'Smith', age: 42 })\n     *   .returning(['first_name'])\n     *   .clearReturning()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"James\", \"Smith\", 42)\n     * ```\n     */\n    clearReturning() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * db.updateTable('person')\n     *   .set(values)\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * async function insertPerson(values: InsertablePerson, returnLastName: boolean) {\n     *   return await db\n     *     .insertInto('person')\n     *     .values(values)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `insertPerson` function is:\n     *\n     * ```ts\n     * {\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new InsertQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `InsertQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query based on {@link values} input\n     * when using {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * const person = await db.insertInto('person')\n     *   .values({ ...inputPerson, nullable_column: 'hell yeah!' })\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (nullable_column) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * const person = await db.insertInto('person')\n     *   .values({ ...inputPerson, nullable_column: 'hell yeah!' })\n     *   .returningAll()\n     *   .$narrowType<{ nullable_column: string }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make typescript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for typescript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help typescript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .with('new_person', (qb) => qb\n     *     .insertInto('person')\n     *     .values(person)\n     *     .returning('id')\n     *     .$assertType<{ id: string }>()\n     *   )\n     *   .with('new_pet', (qb) => qb\n     *     .insertInto('pet')\n     *     .values((eb) => ({ owner_id: eb.selectFrom('new_person').select('id'), ...pet }))\n     *     .returning(['name as pet_name', 'species'])\n     *     .$assertType<{ pet_name: string, species: Species }>()\n     *   )\n     *   .selectFrom(['new_person', 'new_pet'])\n     *   .selectAll()\n     *   .executeTakeFirstOrThrow()\n     * ```\n     */\n    $assertType() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this InsertQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const query = compiledQuery.query;\n        const result = await this.#props.executor.executeQuery(compiledQuery, this.#props.queryId);\n        if (this.#props.executor.adapter.supportsReturning && query.returning) {\n            return result.rows;\n        }\n        return [\n            new InsertResult(result.insertId, \n            // TODO: remove numUpdatedOrDeletedRows.\n            result.numAffectedRows ?? result.numUpdatedOrDeletedRows),\n        ];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize, this.#props.queryId);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\npreventAwait(InsertQueryBuilder, \"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.\");\n","/// <reference types=\"./delete-result.d.ts\" />\nexport class DeleteResult {\n    numDeletedRows;\n    constructor(numDeletedRows) {\n        this.numDeletedRows = numDeletedRows;\n    }\n}\n","/// <reference types=\"./delete-query-builder.d.ts\" />\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTableExpressionOrList, } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { DeleteResult } from './delete-result.js';\nimport { DeleteQueryNode } from '../operation-node/delete-query-node.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nexport class DeleteQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    /**\n     * Changes a `delete from` query into a `delete top from` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Delete the first 5 rows:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('person')\n     *   .top(5)\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * delete top(5) from \"person\" where \"age\" > @1\n     * ```\n     *\n     * Delete the first 50% of rows:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('person')\n     *   .top(50, 'percent')\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * delete top(50) percent from \"person\" where \"age\" > @1\n     * ```\n     */\n    top(expression, modifiers) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    using(tables) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithUsing(this.#props.queryNode, parseTableExpressionOrList(tables)),\n        });\n    }\n    innerJoin(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('InnerJoin', args)),\n        });\n    }\n    leftJoin(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('LeftJoin', args)),\n        });\n    }\n    rightJoin(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('RightJoin', args)),\n        });\n    }\n    fullJoin(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('FullJoin', args)),\n        });\n    }\n    returning(selection) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll(table) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.deleteFrom('pet')\n     *   .returningAll()\n     *   .where('name', '=', 'Max')\n     *   .clearReturning()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * delete from \"pet\" where \"name\" = \"Max\"\n     * ```\n     */\n    clearReturning() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Clears the `limit` clause from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.deleteFrom('pet')\n     *   .returningAll()\n     *   .where('name', '=', 'Max')\n     *   .limit(5)\n     *   .clearLimit()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * delete from \"pet\" where \"name\" = \"Max\" returning *\n     * ```\n     */\n    clearLimit() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithoutLimit(this.#props.queryNode),\n        });\n    }\n    /**\n     * Clears the `order by` clause from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.deleteFrom('pet')\n     *   .returningAll()\n     *   .where('name', '=', 'Max')\n     *   .orderBy('id')\n     *   .clearOrderBy()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * delete from \"pet\" where \"name\" = \"Max\" returning *\n     * ```\n     */\n    clearOrderBy() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithoutOrderBy(this.#props.queryNode),\n        });\n    }\n    /**\n     * Adds an `order by` clause to the query.\n     *\n     * `orderBy` calls are additive. To order by multiple columns, call `orderBy`\n     * multiple times.\n     *\n     * The first argument is the expression to order by and the second is the\n     * order (`asc` or `desc`).\n     *\n     * An `order by` clause in a delete query is only supported by some dialects\n     * like MySQL.\n     *\n     * See {@link SelectQueryBuilder.orderBy} for more examples.\n     *\n     * ### Examples\n     *\n     * Delete 5 oldest items in a table:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('pet')\n     *   .orderBy('created_at')\n     *   .limit(5)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * delete from `pet`\n     * order by `created_at`\n     * limit ?\n     * ```\n     */\n    orderBy(orderBy, direction) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithOrderByItems(this.#props.queryNode, parseOrderBy([orderBy, direction])),\n        });\n    }\n    /**\n     * Adds a limit clause to the query.\n     *\n     * A limit clause in a delete query is only supported by some dialects\n     * like MySQL.\n     *\n     * ### Examples\n     *\n     * Delete 5 oldest items in a table:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('pet')\n     *   .orderBy('created_at')\n     *   .limit(5)\n     *   .execute()\n     * ```\n     */\n    limit(limit) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * db.deleteFrom('person')\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * async function deletePerson(id: number, returnLastName: boolean) {\n     *   return await db\n     *     .deleteFrom('person')\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `deletePerson` function is:\n     *\n     * ```ts\n     * {\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new DeleteQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `DeleteQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query when using {@link where} and {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * const person = await db.deleteFrom('person')\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (person.nullable_column) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * const person = await db.deleteFrom('person')\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .$narrowType<{ nullable_column: string }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make typescript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for typescript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help typescript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .with('deleted_person', (qb) => qb\n     *     .deleteFrom('person')\n     *     .where('id', '=', person.id)\n     *     .returning('first_name')\n     *     .$assertType<{ first_name: string }>()\n     *   )\n     *   .with('deleted_pet', (qb) => qb\n     *     .deleteFrom('pet')\n     *     .where('owner_id', '=', person.id)\n     *     .returning(['name as pet_name', 'species'])\n     *     .$assertType<{ pet_name: string, species: Species }>()\n     *   )\n     *   .selectFrom(['deleted_person', 'deleted_pet'])\n     *   .selectAll()\n     *   .executeTakeFirstOrThrow()\n     * ```\n     */\n    $assertType() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this DeleteQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const query = compiledQuery.query;\n        const result = await this.#props.executor.executeQuery(compiledQuery, this.#props.queryId);\n        if (this.#props.executor.adapter.supportsReturning && query.returning) {\n            return result.rows;\n        }\n        return [\n            new DeleteResult(\n            // TODO: remove numUpdatedOrDeletedRows.\n            result.numAffectedRows ?? result.numUpdatedOrDeletedRows ?? BigInt(0)),\n        ];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize, this.#props.queryId);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\npreventAwait(DeleteQueryBuilder, \"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.\");\n","/// <reference types=\"./update-result.d.ts\" />\nexport class UpdateResult {\n    numUpdatedRows;\n    numChangedRows;\n    constructor(numUpdatedRows, numChangedRows) {\n        this.numUpdatedRows = numUpdatedRows;\n        this.numChangedRows = numChangedRows;\n    }\n}\n","/// <reference types=\"./update-query-builder.d.ts\" />\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTableExpressionOrList, } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { UpdateQueryNode } from '../operation-node/update-query-node.js';\nimport { parseUpdate, } from '../parser/update-set-parser.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nimport { UpdateResult } from './update-result.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { parseTop } from '../parser/top-parser.js';\nexport class UpdateQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    /**\n     * Changes an `update` query into a `update top` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Update the first row:\n     *\n     * ```ts\n     * await db.updateTable('person')\n     *   .top(1)\n     *   .set({ first_name: 'Foo' })\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * update top(1) \"person\" set \"first_name\" = @1 where \"age\" > @2\n     * ```\n     *\n     * Update the 50% first rows:\n     *\n     * ```ts\n     * await db.updateTable('person')\n     *   .top(50, 'percent')\n     *   .set({ first_name: 'Foo' })\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * update top(50) percent \"person\" set \"first_name\" = @1 where \"age\" > @2\n     * ```\n     */\n    top(expression, modifiers) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    from(from) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithFromItems(this.#props.queryNode, parseTableExpressionOrList(from)),\n        });\n    }\n    innerJoin(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('InnerJoin', args)),\n        });\n    }\n    leftJoin(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('LeftJoin', args)),\n        });\n    }\n    rightJoin(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('RightJoin', args)),\n        });\n    }\n    fullJoin(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin('FullJoin', args)),\n        });\n    }\n    /**\n     * Adds a limit clause to the update query for supported databases, such as MySQL.\n     *\n     * ### Examples\n     *\n     * Update the first 2 rows in the 'person' table:\n     *\n     * ```ts\n     * return await db\n     *   .updateTable('person')\n     *   .set({ first_name: 'Foo' })\n     *   .limit(2);\n     * ```\n     *\n     * The generated SQL (MySQL):\n     * ```sql\n     * update `person` set `first_name` = 'Foo' limit 2\n     * ```\n     */\n    limit(limit) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    set(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithUpdates(this.#props.queryNode, parseUpdate(...args)),\n        });\n    }\n    returning(selection) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll()),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.updateTable('person')\n     *   .returningAll()\n     *   .set({ age: 39 })\n     *   .where('first_name', '=', 'John')\n     *   .clearReturning()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * update \"person\" set \"age\" = 39 where \"first_name\" = \"John\"\n     * ```\n     */\n    clearReturning() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * db.updateTable('person')\n     *   .set(values)\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * async function updatePerson(id: number, updates: UpdateablePerson, returnLastName: boolean) {\n     *   return await db\n     *     .updateTable('person')\n     *     .set(updates)\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `updatePerson` function is:\n     *\n     * ```ts\n     * {\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new UpdateQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `UpdateQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query based on {@link set} input\n     * when using {@link where} and/or {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * const person = await db.updateTable('person')\n     *   .set({ deletedAt: now })\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (person.nullable_column) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * const person = await db.updateTable('person')\n     *   .set({ deletedAt: now })\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .$narrowType<{ deletedAt: Date; nullable_column: string }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make typescript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for typescript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help typescript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .with('updated_person', (qb) => qb\n     *     .updateTable('person')\n     *     .set(person)\n     *     .where('id', '=', person.id)\n     *     .returning('first_name')\n     *     .$assertType<{ first_name: string }>()\n     *   )\n     *   .with('updated_pet', (qb) => qb\n     *     .updateTable('pet')\n     *     .set(pet)\n     *     .where('owner_id', '=', person.id)\n     *     .returning(['name as pet_name', 'species'])\n     *     .$assertType<{ pet_name: string, species: Species }>()\n     *   )\n     *   .selectFrom(['updated_person', 'updated_pet'])\n     *   .selectAll()\n     *   .executeTakeFirstOrThrow()\n     * ```\n     */\n    $assertType() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this UpdateQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const query = compiledQuery.query;\n        const result = await this.#props.executor.executeQuery(compiledQuery, this.#props.queryId);\n        if (this.#props.executor.adapter.supportsReturning && query.returning) {\n            return result.rows;\n        }\n        return [\n            new UpdateResult(\n            // TODO: remove numUpdatedOrDeletedRows.\n            // TODO: https://github.com/kysely-org/kysely/pull/431#discussion_r1172330899\n            result.numAffectedRows ?? result.numUpdatedOrDeletedRows ?? BigInt(0), result.numChangedRows),\n        ];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize, this.#props.queryId);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\npreventAwait(UpdateQueryBuilder, \"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.\");\n","/// <reference types=\"./common-table-expression-name-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { TableNode } from './table-node.js';\n/**\n * @internal\n */\nexport const CommonTableExpressionNameNode = freeze({\n    is(node) {\n        return node.kind === 'CommonTableExpressionNameNode';\n    },\n    create(tableName, columnNames) {\n        return freeze({\n            kind: 'CommonTableExpressionNameNode',\n            table: TableNode.create(tableName),\n            columns: columnNames\n                ? freeze(columnNames.map(ColumnNode.create))\n                : undefined,\n        });\n    },\n});\n","/// <reference types=\"./common-table-expression-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const CommonTableExpressionNode = freeze({\n    is(node) {\n        return node.kind === 'CommonTableExpressionNode';\n    },\n    create(name, expression) {\n        return freeze({\n            kind: 'CommonTableExpressionNode',\n            name,\n            expression,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n","/// <reference types=\"./cte-builder.d.ts\" />\nimport { CommonTableExpressionNode } from '../operation-node/common-table-expression-node.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { freeze } from '../util/object-utils.js';\nexport class CTEBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Makes the common table expression materialized.\n     */\n    materialized() {\n        return new CTEBuilder({\n            ...this.#props,\n            node: CommonTableExpressionNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    /**\n     * Makes the common table expression not materialized.\n     */\n    notMaterialized() {\n        return new CTEBuilder({\n            ...this.#props,\n            node: CommonTableExpressionNode.cloneWith(this.#props.node, {\n                materialized: false,\n            }),\n        });\n    }\n    toOperationNode() {\n        return this.#props.node;\n    }\n}\npreventAwait(CTEBuilder, \"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.\");\n","/// <reference types=\"./with-parser.d.ts\" />\nimport { CommonTableExpressionNameNode } from '../operation-node/common-table-expression-name-node.js';\nimport { createQueryCreator } from './parse-utils.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { CTEBuilder } from '../query-builder/cte-builder.js';\nimport { CommonTableExpressionNode } from '../operation-node/common-table-expression-node.js';\nexport function parseCommonTableExpression(nameOrBuilderCallback, expression) {\n    const expressionNode = expression(createQueryCreator()).toOperationNode();\n    if (isFunction(nameOrBuilderCallback)) {\n        return nameOrBuilderCallback(cteBuilderFactory(expressionNode)).toOperationNode();\n    }\n    return CommonTableExpressionNode.create(parseCommonTableExpressionName(nameOrBuilderCallback), expressionNode);\n}\nfunction cteBuilderFactory(expressionNode) {\n    return (name) => {\n        return new CTEBuilder({\n            node: CommonTableExpressionNode.create(parseCommonTableExpressionName(name), expressionNode),\n        });\n    };\n}\nfunction parseCommonTableExpressionName(name) {\n    if (name.includes('(')) {\n        const parts = name.split(/[\\(\\)]/);\n        const table = parts[0];\n        const columns = parts[1].split(',').map((it) => it.trim());\n        return CommonTableExpressionNameNode.create(table, columns);\n    }\n    else {\n        return CommonTableExpressionNameNode.create(name);\n    }\n}\n","/// <reference types=\"./with-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const WithNode = freeze({\n    is(node) {\n        return node.kind === 'WithNode';\n    },\n    create(expression, params) {\n        return freeze({\n            kind: 'WithNode',\n            expressions: freeze([expression]),\n            ...params,\n        });\n    },\n    cloneWithExpression(withNode, expression) {\n        return freeze({\n            ...withNode,\n            expressions: freeze([...withNode.expressions, expression]),\n        });\n    },\n});\n","/// <reference types=\"./matched-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const MatchedNode = freeze({\n    is(node) {\n        return node.kind === 'MatchedNode';\n    },\n    create(not, bySource = false) {\n        return freeze({\n            kind: 'MatchedNode',\n            not,\n            bySource,\n        });\n    },\n});\n","/// <reference types=\"./merge-parser.d.ts\" />\nimport { MatchedNode } from '../operation-node/matched-node.js';\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { WhenNode } from '../operation-node/when-node.js';\nimport { isString } from '../util/object-utils.js';\nimport { parseFilterList, parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from './binary-operation-parser.js';\nexport function parseMergeWhen(type, args, refRight) {\n    return WhenNode.create(parseFilterList([\n        MatchedNode.create(!type.isMatched, type.bySource),\n        ...(args && args.length > 0\n            ? [\n                args.length === 3 && refRight\n                    ? parseReferentialBinaryOperation(args[0], args[1], args[2])\n                    : parseValueBinaryOperationOrExpression(args),\n            ]\n            : []),\n    ], 'and', false));\n}\nexport function parseMergeThen(result) {\n    if (isString(result)) {\n        return RawNode.create([result], []);\n    }\n    if (isOperationNodeSource(result)) {\n        return result.toOperationNode();\n    }\n    return result;\n}\n","/// <reference types=\"./merge-result.d.ts\" />\nexport class MergeResult {\n    numChangedRows;\n    constructor(numChangedRows) {\n        this.numChangedRows = numChangedRows;\n    }\n}\n","/// <reference types=\"./merge-query-builder.d.ts\" />\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { MergeQueryNode } from '../operation-node/merge-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { UpdateQueryNode } from '../operation-node/update-query-node.js';\nimport { parseInsertExpression, } from '../parser/insert-values-parser.js';\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseMergeThen, parseMergeWhen } from '../parser/merge-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { freeze } from '../util/object-utils.js';\nimport { preventAwait } from '../util/prevent-await.js';\nimport { MergeResult } from './merge-result.js';\nimport { NoResultError, isNoResultErrorConstructor, } from './no-result-error.js';\nimport { UpdateQueryBuilder } from './update-query-builder.js';\nexport class MergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Changes a `merge into` query to an `merge top into` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Affect 5 matched rows at most:\n     *\n     * ```ts\n     * await db.mergeInto('person')\n     *   .top(5)\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * merge top(5) into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     *\n     * Affect 50% of matched rows:\n     *\n     * ```ts\n     * await db.mergeInto('person')\n     *   .top(50, 'percent')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * merge top(50) percent into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    top(expression, modifiers) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    using(...args) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithUsing(this.#props.queryNode, parseJoin('Using', args)),\n        });\n    }\n}\npreventAwait(MergeQueryBuilder, \"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.\");\nexport class WheneableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * See {@link MergeQueryBuilder.top}.\n     */\n    top(expression, modifiers) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    /**\n     * Adds a simple `when matched` clause to the query.\n     *\n     * For a `when matched` clause with an `and` condition, see {@link whenMatchedAnd}.\n     *\n     * For a simple `when not matched` clause, see {@link whenNotMatched}.\n     *\n     * For a `when not matched` clause with an `and` condition, see {@link whenNotMatchedAnd}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    whenMatched() {\n        return this.#whenMatched([]);\n    }\n    whenMatchedAnd(...args) {\n        return this.#whenMatched(args);\n    }\n    /**\n     * Adds the `when matched` clause to the query with an `and` condition. But unlike\n     * {@link whenMatchedAnd}, this method accepts a column reference as the 3rd argument.\n     *\n     * This method is similar to {@link SelectQueryBuilder.whereRef}, so see the documentation\n     * for that method for more examples.\n     */\n    whenMatchedAndRef(lhs, op, rhs) {\n        return this.#whenMatched([lhs, op, rhs], true);\n    }\n    #whenMatched(args, refRight) {\n        return new MatchedThenableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithWhen(this.#props.queryNode, parseMergeWhen({ isMatched: true }, args, refRight)),\n        });\n    }\n    /**\n     * Adds a simple `when not matched` clause to the query.\n     *\n     * For a `when not matched` clause with an `and` condition, see {@link whenNotMatchedAnd}.\n     *\n     * For a simple `when matched` clause, see {@link whenMatched}.\n     *\n     * For a `when matched` clause with an `and` condition, see {@link whenMatchedAnd}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenNotMatched()\n     *   .thenInsertValues({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when not matched then\n     *   insert (\"first_name\", \"last_name\") values ($1, $2)\n     * ```\n     */\n    whenNotMatched() {\n        return this.#whenNotMatched([]);\n    }\n    whenNotMatchedAnd(...args) {\n        return this.#whenNotMatched(args);\n    }\n    /**\n     * Adds the `when not matched` clause to the query with an `and` condition. But unlike\n     * {@link whenNotMatchedAnd}, this method accepts a column reference as the 3rd argument.\n     *\n     * Unlike {@link whenMatchedAndRef}, you cannot reference columns from the target table.\n     *\n     * This method is similar to {@link SelectQueryBuilder.whereRef}, so see the documentation\n     * for that method for more examples.\n     */\n    whenNotMatchedAndRef(lhs, op, rhs) {\n        return this.#whenNotMatched([lhs, op, rhs], true);\n    }\n    /**\n     * Adds a simple `when not matched by source` clause to the query.\n     *\n     * Supported in MS SQL Server.\n     *\n     * Similar to {@link whenNotMatched}, but returns a {@link MatchedThenableMergeQueryBuilder}.\n     */\n    whenNotMatchedBySource() {\n        return this.#whenNotMatched([], false, true);\n    }\n    whenNotMatchedBySourceAnd(...args) {\n        return this.#whenNotMatched(args, false, true);\n    }\n    /**\n     * Adds the `when not matched by source` clause to the query with an `and` condition.\n     *\n     * Similar to {@link whenNotMatchedAndRef}, but you can reference columns from\n     * the target table, and not from source table and returns a {@link MatchedThenableMergeQueryBuilder}.\n     */\n    whenNotMatchedBySourceAndRef(lhs, op, rhs) {\n        return this.#whenNotMatched([lhs, op, rhs], true, true);\n    }\n    #whenNotMatched(args, refRight = false, bySource = false) {\n        const props = {\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithWhen(this.#props.queryNode, parseMergeWhen({ isMatched: false, bySource }, args, refRight)),\n        };\n        const Builder = bySource\n            ? MatchedThenableMergeQueryBuilder\n            : NotMatchedThenableMergeQueryBuilder;\n        return new Builder(props);\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * db.updateTable('person')\n     *   .set(values)\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * async function updatePerson(id: number, updates: UpdateablePerson, returnLastName: boolean) {\n     *   return await db\n     *     .updateTable('person')\n     *     .set(updates)\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `updatePerson` function is:\n     *\n     * ```ts\n     * {\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery, this.#props.queryId);\n        return [new MergeResult(result.numAffectedRows)];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n}\npreventAwait(WheneableMergeQueryBuilder, \"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.\");\nexport class MatchedThenableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Performs the `delete` action.\n     *\n     * To perform the `do nothing` action, see {@link thenDoNothing}.\n     *\n     * To perform the `update` action, see {@link thenUpdate} or {@link thenUpdateSet}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    thenDelete() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('delete')),\n        });\n    }\n    /**\n     * Performs the `do nothing` action.\n     *\n     * This is supported in PostgreSQL.\n     *\n     * To perform the `delete` action, see {@link thenDelete}.\n     *\n     * To perform the `update` action, see {@link thenUpdate} or {@link thenUpdateSet}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDoNothing()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   do nothing\n     * ```\n     */\n    thenDoNothing() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('do nothing')),\n        });\n    }\n    /**\n     * Perform an `update` operation with a full-fledged {@link UpdateQueryBuilder}.\n     * This is handy when multiple `set` invocations are needed.\n     *\n     * For a shorthand version of this method, see {@link thenUpdateSet}.\n     *\n     * To perform the `delete` action, see {@link thenDelete}.\n     *\n     * To perform the `do nothing` action, see {@link thenDoNothing}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenUpdate((ub) => ub\n     *     .set(sql`metadata['has_pets']`, 'Y')\n     *     .set({\n     *       updated_at: Date.now(),\n     *     })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   update set metadata['has_pets'] = $1, \"updated_at\" = $2\n     * ```\n     */\n    thenUpdate(set) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen(set(new UpdateQueryBuilder({\n                queryId: this.#props.queryId,\n                executor: NOOP_QUERY_EXECUTOR,\n                queryNode: UpdateQueryNode.createWithoutTable(),\n            })))),\n        });\n    }\n    thenUpdateSet(...args) {\n        // @ts-ignore not sure how to type this so it won't complain about set(...args).\n        return this.thenUpdate((ub) => ub.set(...args));\n    }\n}\npreventAwait(MatchedThenableMergeQueryBuilder, \"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.\");\nexport class NotMatchedThenableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Performs the `do nothing` action.\n     *\n     * This is supported in PostgreSQL.\n     *\n     * To perform the `insert` action, see {@link thenInsertValues}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenNotMatched()\n     *   .thenDoNothing()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when not matched then\n     *   do nothing\n     * ```\n     */\n    thenDoNothing() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('do nothing')),\n        });\n    }\n    thenInsertValues(insert) {\n        const [columns, values] = parseInsertExpression(insert);\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen(InsertQueryNode.cloneWith(InsertQueryNode.createWithoutInto(), {\n                columns,\n                values,\n            }))),\n        });\n    }\n}\npreventAwait(NotMatchedThenableMergeQueryBuilder, \"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.\");\n","/// <reference types=\"./query-creator.d.ts\" />\nimport { createSelectQueryBuilder, } from './query-builder/select-query-builder.js';\nimport { InsertQueryBuilder } from './query-builder/insert-query-builder.js';\nimport { DeleteQueryBuilder } from './query-builder/delete-query-builder.js';\nimport { UpdateQueryBuilder } from './query-builder/update-query-builder.js';\nimport { DeleteQueryNode } from './operation-node/delete-query-node.js';\nimport { InsertQueryNode } from './operation-node/insert-query-node.js';\nimport { SelectQueryNode } from './operation-node/select-query-node.js';\nimport { UpdateQueryNode } from './operation-node/update-query-node.js';\nimport { parseTable, parseTableExpression, parseTableExpressionOrList, parseAliasedTable, } from './parser/table-parser.js';\nimport { parseCommonTableExpression, } from './parser/with-parser.js';\nimport { WithNode } from './operation-node/with-node.js';\nimport { createQueryId } from './util/query-id.js';\nimport { WithSchemaPlugin } from './plugin/with-schema/with-schema-plugin.js';\nimport { freeze } from './util/object-utils.js';\nimport { parseSelectArg, } from './parser/select-parser.js';\nimport { MergeQueryBuilder } from './query-builder/merge-query-builder.js';\nimport { MergeQueryNode } from './operation-node/merge-query-node.js';\nexport class QueryCreator {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    selectFrom(from) {\n        return createSelectQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList(from), this.#props.withNode),\n        });\n    }\n    selectNoFrom(selection) {\n        return createSelectQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: SelectQueryNode.cloneWithSelections(SelectQueryNode.create(this.#props.withNode), parseSelectArg(selection)),\n        });\n    }\n    /**\n     * Creates an insert query.\n     *\n     * The return value of this query is an instance of {@link InsertResult}. {@link InsertResult}\n     * has the {@link InsertResult.insertId | insertId} field that holds the auto incremented id of\n     * the inserted row if the db returned one.\n     *\n     * See the {@link InsertQueryBuilder.values | values} method for more info and examples. Also see\n     * the {@link ReturningInterface.returning | returning} method for a way to return columns\n     * on supported databases like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .executeTakeFirst()\n     *\n     * console.log(result.insertId)\n     * ```\n     *\n     * Some databases like PostgreSQL support the `returning` method:\n     *\n     * ```ts\n     * const { id } = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .returning('id')\n     *   .executeTakeFirst()\n     * ```\n     */\n    insertInto(table) {\n        return new InsertQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: InsertQueryNode.create(parseTable(table), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates a replace query.\n     *\n     * A MySQL-only statement similar to {@link InsertQueryBuilder.onDuplicateKeyUpdate}\n     * that deletes and inserts values on collision instead of updating existing rows.\n     *\n     * The return value of this query is an instance of {@link InsertResult}. {@link InsertResult}\n     * has the {@link InsertResult.insertId | insertId} field that holds the auto incremented id of\n     * the inserted row if the db returned one.\n     *\n     * See the {@link InsertQueryBuilder.values | values} method for more info and examples.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .replaceInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .executeTakeFirst()\n     *\n     * console.log(result.insertId)\n     * ```\n     */\n    replaceInto(table) {\n        return new InsertQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: InsertQueryNode.create(parseTable(table), this.#props.withNode, true),\n        });\n    }\n    deleteFrom(tables) {\n        return new DeleteQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: DeleteQueryNode.create(parseTableExpressionOrList(tables), this.#props.withNode),\n        });\n    }\n    updateTable(table) {\n        return new UpdateQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: UpdateQueryNode.create(parseTableExpression(table), this.#props.withNode),\n        });\n    }\n    mergeInto(targetTable) {\n        return new MergeQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: MergeQueryNode.create(parseAliasedTable(targetTable), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates a `with` query (Common Table Expression).\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .with('jennifers', (db) => db\n     *     .selectFrom('person')\n     *     .where('first_name', '=', 'Jennifer')\n     *     .select(['id', 'age'])\n     *   )\n     *   .with('adult_jennifers', (db) => db\n     *     .selectFrom('jennifers')\n     *     .where('age', '>', 18)\n     *     .select(['id', 'age'])\n     *   )\n     *   .selectFrom('adult_jennifers')\n     *   .where('age', '<', 60)\n     *   .selectAll()\n     *   .execute()\n     * ```\n     *\n     * The CTE name can optionally specify column names in addition to\n     * a name. In that case Kysely requires the expression to retun\n     * rows with the same columns.\n     *\n     * ```ts\n     * await db\n     *   .with('jennifers(id, age)', (db) => db\n     *     .selectFrom('person')\n     *     .where('first_name', '=', 'Jennifer')\n     *     // This is ok since we return columns with the same\n     *     // names as specified by `jennifers(id, age)`.\n     *     .select(['id', 'age'])\n     *   )\n     *   .selectFrom('jennifers')\n     *   .selectAll()\n     *   .execute()\n     * ```\n     *\n     * The first argument can also be a callback. The callback is passed\n     * a `CTEBuilder` instance that can be used to configure the CTE:\n     *\n     * ```ts\n     * await db\n     *   .with(\n     *     (cte) => cte('jennifers').materialized(),\n     *     (db) => db\n     *       .selectFrom('person')\n     *       .where('first_name', '=', 'Jennifer')\n     *       .select(['id', 'age'])\n     *   )\n     *   .selectFrom('jennifers')\n     *   .selectAll()\n     *   .execute()\n     * ```\n     */\n    with(nameOrBuilder, expression) {\n        const cte = parseCommonTableExpression(nameOrBuilder, expression);\n        return new QueryCreator({\n            ...this.#props,\n            withNode: this.#props.withNode\n                ? WithNode.cloneWithExpression(this.#props.withNode, cte)\n                : WithNode.create(cte),\n        });\n    }\n    /**\n     * Creates a recursive `with` query (Common Table Expression).\n     *\n     * Note that recursiveness is a property of the whole `with` statement.\n     * You cannot have recursive and non-recursive CTEs in a same `with` statement.\n     * Therefore the recursiveness is determined by the **first** `with` or\n     * `withRecusive` call you make.\n     *\n     * See the {@link with} method for examples and more documentation.\n     */\n    withRecursive(nameOrBuilder, expression) {\n        const cte = parseCommonTableExpression(nameOrBuilder, expression);\n        return new QueryCreator({\n            ...this.#props,\n            withNode: this.#props.withNode\n                ? WithNode.cloneWithExpression(this.#props.withNode, cte)\n                : WithNode.create(cte, { recursive: true }),\n        });\n    }\n    /**\n     * Returns a copy of this query creator instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    /**\n     * Returns a copy of this query creator instance without any plugins.\n     */\n    withoutPlugins() {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    /**\n     * Sets the schema to be used for all table references that don't explicitly\n     * specify a schema.\n     *\n     * This only affects the query created through the builder returned from\n     * this method and doesn't modify the `db` instance.\n     *\n     * See [this recipe](https://github.com/koskimas/kysely/tree/master/site/docs/recipes/schemas.md)\n     * for a more detailed explanation.\n     *\n     * ### Examples\n     *\n     * ```\n     * await db\n     *   .withSchema('mammals')\n     *   .selectFrom('pet')\n     *   .selectAll()\n     *   .innerJoin('public.person', 'public.person.id', 'pet.owner_id')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select * from \"mammals\".\"pet\"\n     * inner join \"public\".\"person\"\n     * on \"public\".\"person\".\"id\" = \"mammals\".\"pet\".\"owner_id\"\n     * ```\n     *\n     * `withSchema` is smart enough to not add schema for aliases,\n     * common table expressions or other places where the schema\n     * doesn't belong to:\n     *\n     * ```\n     * await db\n     *   .withSchema('mammals')\n     *   .selectFrom('pet as p')\n     *   .select('p.name')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"p\".\"name\" from \"mammals\".\"pet\" as \"p\"\n     * ```\n     */\n    withSchema(schema) {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n}\n","/// <reference types=\"./noop-query-executor.d.ts\" />\nimport { QueryExecutorBase } from './query-executor-base.js';\n/**\n * A {@link QueryExecutor} subclass that can be used when you don't\n * have a {@link QueryCompiler}, {@link ConnectionProvider} or any\n * other needed things to actually execute queries.\n */\nexport class NoopQueryExecutor extends QueryExecutorBase {\n    get adapter() {\n        throw new Error('this query cannot be compiled to SQL');\n    }\n    compileQuery() {\n        throw new Error('this query cannot be compiled to SQL');\n    }\n    provideConnection() {\n        throw new Error('this query cannot be executed');\n    }\n    withConnectionProvider() {\n        throw new Error('this query cannot have a connection provider');\n    }\n    withPlugin(plugin) {\n        return new NoopQueryExecutor([...this.plugins, plugin]);\n    }\n    withPlugins(plugins) {\n        return new NoopQueryExecutor([...this.plugins, ...plugins]);\n    }\n    withPluginAtFront(plugin) {\n        return new NoopQueryExecutor([plugin, ...this.plugins]);\n    }\n    withoutPlugins() {\n        return new NoopQueryExecutor([]);\n    }\n}\nexport const NOOP_QUERY_EXECUTOR = new NoopQueryExecutor();\n","/// <reference types=\"./deferred.d.ts\" />\nexport class Deferred {\n    #promise;\n    #resolve;\n    #reject;\n    constructor() {\n        this.#promise = new Promise((resolve, reject) => {\n            this.#reject = reject;\n            this.#resolve = resolve;\n        });\n    }\n    get promise() {\n        return this.#promise;\n    }\n    resolve = (value) => {\n        if (this.#resolve) {\n            this.#resolve(value);\n        }\n    };\n    reject = (reason) => {\n        if (this.#reject) {\n            this.#reject(reason);\n        }\n    };\n}\n","/// <reference types=\"./log-once.d.ts\" />\nconst LOGGED_MESSAGES = new Set();\n/**\n * Use for system-level logging, such as deprecation messages.\n * Logs a message and ensures it won't be logged again.\n */\nexport function logOnce(message) {\n    if (LOGGED_MESSAGES.has(message)) {\n        return;\n    }\n    LOGGED_MESSAGES.add(message);\n    console.log(message);\n}\n","/// <reference types=\"./query-executor-base.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { Deferred } from '../util/deferred.js';\nimport { logOnce } from '../util/log-once.js';\nconst NO_PLUGINS = freeze([]);\nexport class QueryExecutorBase {\n    #plugins;\n    constructor(plugins = NO_PLUGINS) {\n        this.#plugins = plugins;\n    }\n    get plugins() {\n        return this.#plugins;\n    }\n    transformQuery(node, queryId) {\n        for (const plugin of this.#plugins) {\n            const transformedNode = plugin.transformQuery({ node, queryId });\n            // We need to do a runtime check here. There is no good way\n            // to write types that enforce this constraint.\n            if (transformedNode.kind === node.kind) {\n                node = transformedNode;\n            }\n            else {\n                throw new Error([\n                    `KyselyPlugin.transformQuery must return a node`,\n                    `of the same kind that was given to it.`,\n                    `The plugin was given a ${node.kind}`,\n                    `but it returned a ${transformedNode.kind}`,\n                ].join(' '));\n            }\n        }\n        return node;\n    }\n    async executeQuery(compiledQuery, queryId) {\n        return await this.provideConnection(async (connection) => {\n            const result = await connection.executeQuery(compiledQuery);\n            const transformedResult = await this.#transformResult(result, queryId);\n            // TODO: remove.\n            warnOfOutdatedDriverOrPlugins(result, transformedResult);\n            return transformedResult;\n        });\n    }\n    async *stream(compiledQuery, chunkSize, queryId) {\n        const connectionDefer = new Deferred();\n        const connectionReleaseDefer = new Deferred();\n        this.provideConnection(async (connection) => {\n            connectionDefer.resolve(connection);\n            // Lets wait until we don't need connection before returning here (returning releases connection)\n            return await connectionReleaseDefer.promise;\n        }).catch((ex) => connectionDefer.reject(ex));\n        const connection = await connectionDefer.promise;\n        try {\n            for await (const result of connection.streamQuery(compiledQuery, chunkSize)) {\n                yield await this.#transformResult(result, queryId);\n            }\n        }\n        finally {\n            connectionReleaseDefer.resolve();\n        }\n    }\n    async #transformResult(result, queryId) {\n        for (const plugin of this.#plugins) {\n            result = await plugin.transformResult({ result, queryId });\n        }\n        return result;\n    }\n}\n// TODO: remove.\nfunction warnOfOutdatedDriverOrPlugins(result, transformedResult) {\n    const { numAffectedRows } = result;\n    if ((numAffectedRows === undefined &&\n        result.numUpdatedOrDeletedRows === undefined) ||\n        (numAffectedRows !== undefined &&\n            transformedResult.numAffectedRows !== undefined)) {\n        return;\n    }\n    logOnce('kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.');\n}\n","/// <reference types=\"./object-utils.d.ts\" />\nexport function isEmpty(obj) {\n    if (Array.isArray(obj) || isString(obj) || isBuffer(obj)) {\n        return obj.length === 0;\n    }\n    else if (obj) {\n        return Object.keys(obj).length === 0;\n    }\n    return false;\n}\nexport function isUndefined(obj) {\n    return typeof obj === 'undefined' || obj === undefined;\n}\nexport function isString(obj) {\n    return typeof obj === 'string';\n}\nexport function isNumber(obj) {\n    return typeof obj === 'number';\n}\nexport function isBoolean(obj) {\n    return typeof obj === 'boolean';\n}\nexport function isNull(obj) {\n    return obj === null;\n}\nexport function isDate(obj) {\n    return obj instanceof Date;\n}\nexport function isBigInt(obj) {\n    return typeof obj === 'bigint';\n}\n// Don't change the returnd type to `obj is Buffer` to not create a\n// hard dependency to node.\nexport function isBuffer(obj) {\n    return typeof Buffer !== 'undefined' && Buffer.isBuffer(obj);\n}\nexport function isFunction(obj) {\n    return typeof obj === 'function';\n}\nexport function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n}\nexport function isArrayBufferOrView(obj) {\n    return obj instanceof ArrayBuffer || ArrayBuffer.isView(obj);\n}\nexport function isPlainObject(obj) {\n    return (isObject(obj) &&\n        !Array.isArray(obj) &&\n        !isDate(obj) &&\n        !isBuffer(obj) &&\n        !isArrayBufferOrView(obj));\n}\nexport function getLast(arr) {\n    return arr[arr.length - 1];\n}\nexport function freeze(obj) {\n    return Object.freeze(obj);\n}\nexport function asArray(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg;\n    }\n    else {\n        return [arg];\n    }\n}\nexport function asReadonlyArray(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg;\n    }\n    else {\n        return freeze([arg]);\n    }\n}\nexport function isReadonlyArray(arg) {\n    return Array.isArray(arg);\n}\nexport function noop(obj) {\n    return obj;\n}\nexport function compare(obj1, obj2) {\n    if (isReadonlyArray(obj1) && isReadonlyArray(obj2)) {\n        return compareArrays(obj1, obj2);\n    }\n    else if (isObject(obj1) && isObject(obj2)) {\n        return compareObjects(obj1, obj2);\n    }\n    return obj1 === obj2;\n}\nfunction compareArrays(arr1, arr2) {\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n    for (let i = 0; i < arr1.length; ++i) {\n        if (!compare(arr1[i], arr2[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction compareObjects(obj1, obj2) {\n    if (isBuffer(obj1) && isBuffer(obj2)) {\n        return compareBuffers(obj1, obj2);\n    }\n    else if (isDate(obj1) && isDate(obj2)) {\n        return compareDates(obj1, obj2);\n    }\n    return compareGenericObjects(obj1, obj2);\n}\nfunction compareBuffers(buf1, buf2) {\n    return Buffer.compare(buf1, buf2) === 0;\n}\nfunction compareDates(date1, date2) {\n    return date1.getTime() === date2.getTime();\n}\nfunction compareGenericObjects(obj1, obj2) {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    for (const key of keys1) {\n        if (!compare(obj1[key], obj2[key])) {\n            return false;\n        }\n    }\n    return true;\n}\n","/// <reference types=\"./prevent-await.d.ts\" />\nexport function preventAwait(clazz, message) {\n    Object.defineProperties(clazz.prototype, {\n        then: {\n            enumerable: false,\n            value: () => {\n                throw new Error(message);\n            },\n        },\n    });\n}\n","/// <reference types=\"./random-string.d.ts\" />\nconst CHARS = [\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n    'I',\n    'J',\n    'K',\n    'L',\n    'M',\n    'N',\n    'O',\n    'P',\n    'Q',\n    'R',\n    'S',\n    'T',\n    'U',\n    'V',\n    'W',\n    'X',\n    'Y',\n    'Z',\n    'a',\n    'b',\n    'c',\n    'd',\n    'e',\n    'f',\n    'g',\n    'h',\n    'i',\n    'j',\n    'k',\n    'l',\n    'm',\n    'n',\n    'o',\n    'p',\n    'q',\n    'r',\n    's',\n    't',\n    'u',\n    'v',\n    'w',\n    'x',\n    'y',\n    'z',\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n];\nexport function randomString(length) {\n    let chars = '';\n    for (let i = 0; i < length; ++i) {\n        chars += randomChar();\n    }\n    return chars;\n}\nfunction randomChar() {\n    return CHARS[~~(Math.random() * CHARS.length)];\n}\n","/// <reference types=\"./query-id.d.ts\" />\nimport { randomString } from './random-string.js';\nexport function createQueryId() {\n    return new LazyQueryId();\n}\nclass LazyQueryId {\n    #queryId;\n    get queryId() {\n        if (this.#queryId === undefined) {\n            this.#queryId = randomString(8);\n        }\n        return this.#queryId;\n    }\n}\n"],"names":["NanoIdGeneratorLive","createNanoIdGeneratorLive","customAlphabet","nanoid","AppStateLive","AppState","init","reloadUrl","onRequestSync","document","reset","localStorageKey","replaceLocation","location","replace","timer","window","addEventListener","e","key","handleRequestSyncEvents","setTimeout","visibilityState","localStorage","setItem","Date","now","toString","SyncLockLive","SyncLock","tryAcquire","lockName","getLockName","acquire","resume","navigator","locks","request","ifAvailable","lock","Promise","resolve","pipe","release","SyncLockAlreadySyncingError","circular","SynchronizedTypeId","make","makeSynchronized","get","ref","getAndUpdateEffect","getAndSet","getAndUpdate","internal","getAndUpdateSome","modifySome","set","setAndGet","update","updateAndGet","updateSome","updateSomeAndGet","updateSomeAndGetEffectSynchronized","unsafeMakeSynchronized","selectOwner","sql","createMessageTable","createMessageTableIndex","createOwnerTable","insertOwner","selectOwnerTimestampAndMerkleTree","selectLastTimestampForTableRowColumn","insertIntoMessagesIfNew","updateOwnerTimestampAndMerkleTree","selectMessagesToSync","Index","name","DbFactory","Context","Tag","createDb","Effect","gen","createSqlite","Sqlite","SqliteFactory","createSync","Sync","SyncFactory","initContext","empty","add","NanoIdGenerator","Time","afterInitContext","Deferred","afterInit","options","effect","flatMap","context","sqlite","transaction","provide","queryRowsRef","Map","schema","initialData","onError","onSyncStateChange","onReceive","mnemonic","logDebug","contextWithSqlite","owner","getSchema","tap","ensureSchema","currentSchema","tables","map","t","includes","readOwner","createOwner","applyMutations","sync","unsafeDone","succeed","Owner","Callbacks","loadQueries","queries","zipRight","mutate","mutations","queriesToRefresh","time","toSyncMutations","localOnlyMutations","mutation","table","startsWith","mutationToNewMessages","some","column","value","exec","parameters","id","messages","message","upsertValueIntoTableRowColumn","length","forkSync","resetOwner","logTrace","dropAllTables","restoreOwner","exportDatabase","export","GenericTag","previousState","forEach","query","sqliteQuery","deserializeQuery","maybeExplainQueryPlan","rows","queriesRows","currentState","patches","makePatches","logExplainQueryPlan","Console","log","drawSqliteQueryPlan","constVoid","_","trim","row","tableName","columnName","has","push","globalThis","Array","from","columns","indexes","result","newSchema","currentTable","find","newColumn","filter","c","join","indexEquivalence","indexToDrop","newIndex","self","that","encryptionKey","all","makeOwner","makeInitialTimestamp","initialTimestampString","timestampToString","merkleTreeToString","initialMerkleTree","timestamp","merkleTree","readTimestampAndMerkleTree","nextTimestamp","mapAccum","currentTimestamp","newMessage","sendTimestamp","nextMerkleTree","applyMessages","writeTimestampAndMerkleTree","unsafeTimestampFromString","Object","entries","values","undefined","isInsert","Option","none","cast","messageTimestamp","lastTimestamp","millis","changes","insertIntoMerkleTree","insert","catchSomeDefect","error","SqliteNoSuchTableOrColumnError","ensureSchemaByNewMessages","tablesMap","concat","syncLock","matchEffect","onFailure","onSuccess","syncLoop","scoped","forkDaemon","callbacks","syncDataRef","a","Ref","_tag","handleSyncResult","repeat","schedule","Schedule","recurs","until","match","onNone","onSome","syncData","catchAllDefect","fail","makeUnexpectedError","ensureTransferableError","catchTag","state","catchAll","current","reduce","local","receiveTimestamp","remote","diffMerkleTrees","diff","makeSyncTimestamp","option","serializeQuery","p","Predicate","isUint8Array","isJsonObjectOrArray","json","JSON","stringify","serializedSqliteQuery","parse","Uint8Array","_emptyRows","emptyRows","queryResultCache","WeakMap","queryResultFromRows","queryResult","notSupportedPlatformWorker","applyPatches","next","patch","op","index","previousRows","nextRows","replaceAtPatches","i","previousRow","nextRow","areEqual","b","aIsUint8Array","bIsUint8Array","aIsArray","bIsArray","aKeys","keys","bKeys","AlterTableNode","freeze","is","node","kind","create","cloneWithTableProps","props","cloneWithColumnAlteration","columnAlteration","columnAlterations","CreateIndexNode","IdentifierNode","cloneWith","cloneWithColumns","CreateSchemaNode","params","createSchema","ON_COMMIT_ACTIONS","CreateTableNode","cloneWithColumn","createTable","cloneWithConstraint","constraint","constraints","cloneWithFrontModifier","modifier","frontModifiers","cloneWithEndModifier","endModifiers","DropIndexNode","SchemableIdentifierNode","dropIndex","DropSchemaNode","dropSchema","DropTableNode","AddColumnNode","ColumnDefinitionNode","dataType","ColumnNode","DropColumnNode","RenameColumnNode","renameTo","CheckConstraintNode","expression","constraintName","ON_MODIFY_FOREIGN_ACTIONS","ReferencesNode","cloneWithOnDelete","references","onDelete","cloneWithOnUpdate","onUpdate","parseDefaultValueExpression","isOperationNodeSource","toOperationNode","ValueNode","createImmediate","GeneratedNode","createWithExpression","always","DefaultValueNode","defaultValue","parseOnModifyForeignAction","action","Error","ColumnDefinitionBuilder","constructor","this","autoIncrement","identity","primaryKey","parseStringReference","SelectAllNode","unique","notNull","unsigned","defaultTo","check","generatedAlwaysAs","generated","generatedAlwaysAsIdentity","generatedByDefaultAsIdentity","byDefault","stored","modifyFront","nullsNotDistinct","modifyEnd","$call","func","preventAwait","ModifyColumnNode","ForeignKeyConstraintNode","sourceColumns","targetTable","targetColumns","ForeignKeyConstraintBuilder","AddConstraintNode","UniqueConstraintNode","DropConstraintNode","dropConstraint","AlterColumnNode","prop","AlterColumnBuilder","setDataType","AlteredColumnBuilder","parseDataTypeExpression","setDefault","dropDefault","setNotNull","dropNotNull","alterColumnNode","AlterTableExecutor","executor","transformQuery","queryId","compile","compileQuery","execute","executeQuery","AlterTableAddForeignKeyConstraintBuilder","constraintBuilder","addConstraint","AlterTableDropConstraintBuilder","ifExists","cascade","restrict","PrimaryConstraintNode","AddIndexNode","AlterTableAddIndexBuilder","addIndex","parseOrderedColumnName","using","indexType","RawNode","createWithSql","UniqueConstraintNodeBuilder","AlterTableBuilder","newTableName","parseTable","setSchema","alterColumn","alteration","builder","AlterTableColumnAlteringBuilder","dropColumn","renameColumn","addColumn","build","noop","modifyColumn","addUniqueConstraint","uniqueConstraintBuilder","addCheckConstraint","checkExpression","addForeignKeyConstraint","addPrimaryKeyConstraint","indexName","ImmediateValueTransformer","OperationNodeTransformer","transformValue","super","immediate","CreateIndexBuilder","ifNotExists","on","where","args","transformer","QueryNode","cloneWithWhere","transformNode","parseValueBinaryOperationOrExpression","CreateSchemaBuilder","parseOnCommitAction","CreateTableBuilder","temporary","onCommit","columnBuilder","as","selectQuery","parseExpression","DropIndexBuilder","DropSchemaBuilder","DropTableBuilder","CreateViewNode","createView","ImmediateValuePlugin","transformResult","CreateViewBuilder","materialized","orReplace","parseColumnName","queryNode","withPlugin","DropViewNode","dropView","DropViewBuilder","CreateTypeNode","cloneWithEnum","createType","enum","ValueListNode","CreateTypeBuilder","asEnum","DropTypeNode","dropType","DropTypeBuilder","parseSchemableIdentifier","parts","split","createWithSchema","str","SchemaModule","createQueryId","dropTable","createIndex","alterTable","viewName","typeName","plugin","withoutPlugins","withSchema","withPluginAtFront","WithSchemaPlugin","DynamicModule","reference","DynamicReferenceBuilder","DefaultConnectionProvider","driver","provideConnection","consumer","connection","acquireConnection","releaseConnection","DefaultQueryExecutor","QueryExecutorBase","compiler","adapter","connectionProvider","plugins","withPlugins","withConnectionProvider","performanceNow","performance","isFunction","RuntimeDriver","WeakSet","then","catch","err","reject","beginTransaction","settings","commitTransaction","rollbackTransaction","destroy","isLevelEnabled","async","compiledQuery","caughtError","startTime","call","level","queryDurationMillis","ignoreError","SingleConnectionProvider","finally","runner","TRANSACTION_ISOLATION_LEVELS","Log","config","defaultLogger","getEvent","event","console","toFixed","stack","Kysely","QueryCreator","superProps","obj","isObject","dialect","createDriver","createQueryCompiler","createAdapter","runtimeDriver","dynamic","introspection","createIntrospector","CaseBuilder","CaseNode","isUndefined","fn","createFunctionModule","TransactionBuilder","ConnectionBuilder","withTables","isTransaction","getExecutor","Transaction","callback","db","setIsolationLevel","isolationLevel","kyselyProps","validateTransactionSettings","DialectAdapterBase","supportsCreateIfNotExists","supportsTransactionalDdl","supportsReturning","SqliteAdapter","acquireMigrationLock","_db","_opt","releaseMigrationLock","DummyDriver","DummyConnection","streamQuery","OperationNodeVisitor","nodeStack","parentNode","AliasNode","visitAlias","bind","visitColumn","visitIdentifier","visitSchemableIdentifier","visitRaw","ReferenceNode","visitReference","SelectQueryNode","visitSelectQuery","SelectionNode","visitSelection","TableNode","visitTable","FromNode","visitFrom","visitSelectAll","AndNode","visitAnd","OrNode","visitOr","visitValue","visitValueList","PrimitiveValueListNode","visitPrimitiveValueList","ParensNode","visitParens","JoinNode","visitJoin","OperatorNode","visitOperator","WhereNode","visitWhere","InsertQueryNode","visitInsertQuery","DeleteQueryNode","visitDeleteQuery","ReturningNode","visitReturning","visitCreateTable","visitAddColumn","visitColumnDefinition","visitDropTable","DataTypeNode","visitDataType","OrderByNode","visitOrderBy","OrderByItemNode","visitOrderByItem","GroupByNode","visitGroupBy","GroupByItemNode","visitGroupByItem","UpdateQueryNode","visitUpdateQuery","ColumnUpdateNode","visitColumnUpdate","LimitNode","visitLimit","OffsetNode","visitOffset","OnConflictNode","visitOnConflict","OnDuplicateKeyNode","visitOnDuplicateKey","visitCreateIndex","visitDropIndex","ListNode","visitList","PrimaryKeyConstraintNode","visitPrimaryKeyConstraint","visitUniqueConstraint","visitReferences","visitCheckConstraint","WithNode","visitWith","CommonTableExpressionNode","visitCommonTableExpression","CommonTableExpressionNameNode","visitCommonTableExpressionName","HavingNode","visitHaving","visitCreateSchema","visitDropSchema","visitAlterTable","visitDropColumn","visitRenameColumn","visitAlterColumn","visitModifyColumn","visitAddConstraint","visitDropConstraint","visitForeignKeyConstraint","visitCreateView","visitDropView","visitGenerated","visitDefaultValue","OnNode","visitOn","ValuesNode","visitValues","SelectModifierNode","visitSelectModifier","visitCreateType","visitDropType","ExplainNode","visitExplain","DefaultInsertValueNode","visitDefaultInsertValue","AggregateFunctionNode","visitAggregateFunction","OverNode","visitOver","PartitionByNode","visitPartitionBy","PartitionByItemNode","visitPartitionByItem","SetOperationNode","visitSetOperation","BinaryOperationNode","visitBinaryOperation","UnaryOperationNode","visitUnaryOperation","UsingNode","visitUsing","FunctionNode","visitFunction","visitCase","WhenNode","visitWhen","JSONReferenceNode","visitJSONReference","JSONPathNode","visitJSONPath","JSONPathLegNode","visitJSONPathLeg","JSONOperatorChainNode","visitJSONOperatorChain","TupleNode","visitTuple","MergeQueryNode","visitMergeQuery","MatchedNode","visitMatched","visitAddIndex","CastNode","visitCast","FetchNode","visitFetch","TopNode","visitTop","visitNode","pop","DefaultQueryCompiler","numParameters","getSql","wrapInParens","explain","append","with","distinctOn","compileDistinctOn","compileList","top","selections","joins","groupBy","having","setOperations","orderBy","limit","offset","fetch","sortSelectModifiers","froms","selection","expressions","nodes","separator","lastIndex","rootQueryNode","isSubQuery","ignore","into","defaultValues","onConflict","onDuplicateKey","returning","alias","getLeftIdentifierWrapper","compileUnwrappedIdentifier","getRightIdentifierWrapper","isString","sanitizeIdentifier","left","right","appendImmediateValue","appendValue","JOIN_TYPE_SQL","joinType","sqlFragments","operator","identifier","getAutoIncrement","items","direction","updates","indexExpression","indexWhere","doNothing","updateWhere","recursive","isBoolean","compileColumnAlterations","announcesNewColumnDataType","dataTypeExpression","rawModifier","SELECT_MODIFIER_SQL","of","format","getLeftExplainOptionsWrapper","getExplainOptionsDelimiter","getExplainOptionAssignment","getRightExplainOptionsWrapper","distinct","aggregated","over","partitionBy","leftOperand","rightOperand","isMinusOperator","operand","arguments","when","else","isStatement","condition","traversal","inOperator","pathLeg","pathLegs","isArrayLocation","type","String","len","whens","not","bySource","rowCount","modifiers","parameter","addParameter","getCurrentParameterPlaceholder","leftWrap","rightWrap","sanitized","isNumber","isNull","isDate","toISOString","isBigInt","arr","sort","SELECT_MODIFIER_PRIORITY","ForKeyShare","ForNoKeyUpdate","ForUpdate","ForShare","NoWait","SkipLocked","Distinct","InnerJoin","LeftJoin","RightJoin","FullJoin","LateralInnerJoin","LateralLeftJoin","Using","ID_WRAP_REGEX","SqliteQueryCompiler","syncTimeout","lockTimeout","socketTimeout","isLocked","socket","processWebsocketEvent","data","clearTimeout","refreshQueries","createSocket","externalWebsocketConnection","send","channelId","enableWebsocketConnection","WebSocket","syncUrl","onerror","onclose","onopen","EvoluFactory","Common","Layer","flushSync","serviceOption","FlushSync","getOrElse","Db","instances","createEvolu","runtime","createRuntime","defaultConfig","dbSchema","schemaToTables","evolu","runSync","getPropertySignatures","Record","toEntries","out","propertySignatures","AST","ast","propertySignature","Config","dbFactory","appState","nanoIdGenerator","errorStore","makeStore","ownerStore","rowsStore","syncStateStore","initialSyncState","loadingPromises","subscribedQueries","handleAllErrors","tapError","logError","setState","runFork","flow","runPromise","initialDataAsMutations","provideService","initialDataToMutations","handlePatches","releaseUnsubscribedLoadingPromises","socketResolved","subscribe","getState","appStateReset","rowsStoreStateFromPatches","nextState","resolveLoadingPromises","rowsStoreState","loadingPromise","promise","status","assign","releaseOnResolve","delete","queue","onComplete","rowId","queueMicrotask","onCompletes","onCompletesDef","isNotUndefined","subscribeError","getError","createQuery","queryCallback","kysely","isSqlMutation","loadQuery","_resolve","subscribeQuery","listener","unsubscribe","count","getQuery","subscribeOwner","getOwner","subscribeSyncState","getSyncState","createOrUpdate","reload","reloadApp","createIndexes","Id","SqliteDate","s","isNaN","SqliteBoolean","fields","ReservedColumns","createdAt","updatedAt","isDeleted","database","maybeJson","String1000","NonEmptyString1000","PositiveInt","platformSqliteFactory","platformSqlite","maybeParseJson","mode","exit","valuesToSqliteValues","parseArray","o","parseString","isArray","parseObject","isSqlMutationRegEx","RegExp","test","maybeLogSqliteQueryExecutionTime","logQueryExecutionTime","start","elapsed","parentId","parent","indent","r","detail","initialState","listeners","Set","TypeId","defaultConsole","withConsole","setConsole","consoleWith","assert","clear","countReset","debug","dir","dirxml","group","info","timeLog","trace","warn","withGroup","withTime","dynamicReference","refType","parseSimpleReferenceExpression","isDynamicReferenceBuilder","parseUnaryOperation","parseReferenceExpression","JSONPathBuilder","at","legType","TraversedJSONPathBuilder","cloneWithTraversal","cloneWithLeg","cloneWithValue","expressionType","AliasedJSONPathBuilder","$castTo","$notNull","jsonPath","createExpressionBuilder","NOOP_QUERY_EXECUTOR","unary","expr","ExpressionWrapper","eb","lhs","rhs","parseValueBinaryOperation","selectFrom","createSelectQueryBuilder","createFrom","parseTableExpressionOrList","case","parseJSONReference","val","parseValueExpression","refTuple","tuple","lit","parseSafeImmediateValue","exists","neg","between","end","betweenSymmetric","and","exprs","isReadonlyArray","parseFilterList","parseFilterObject","or","parens","expressionBuilder","AliasedExpressionWrapper","OrWrapper","AndWrapper","cloneWithWhen","caseNode","cloneWithThen","slice","cloneWithResult","cloneWithTables","fromItems","withNode","cloneWithOrderByItems","deleteNode","cloneWithItems","cloneWithoutOrderBy","cloneWithLimit","cloneWithoutLimit","cloneWithUsing","cloneWithFroms","createWithoutInto","insertQuery","cloneWithOperation","onNode","operation","createWithOn","cloneWithOn","joinNode","jsonPathNode","mergeNode","transformAlias","transformColumn","transformIdentifier","transformSchemableIdentifier","transformRaw","transformReference","transformSelectQuery","transformSelection","transformTable","transformFrom","transformSelectAll","transformAnd","transformOr","transformValueList","transformPrimitiveValueList","transformParens","transformJoin","transformOperator","transformWhere","transformInsertQuery","transformDeleteQuery","transformReturning","transformCreateTable","transformAddColumn","transformColumnDefinition","transformDropTable","transformDataType","transformOrderBy","transformOrderByItem","transformGroupBy","transformGroupByItem","transformUpdateQuery","transformColumnUpdate","transformLimit","transformOffset","transformOnConflict","transformOnDuplicateKey","transformCreateIndex","transformDropIndex","transformList","transformPrimaryKeyConstraint","transformUniqueConstraint","transformReferences","transformCheckConstraint","transformWith","transformCommonTableExpression","transformCommonTableExpressionName","transformHaving","transformCreateSchema","transformDropSchema","transformAlterTable","transformDropColumn","transformRenameColumn","transformAlterColumn","transformModifyColumn","transformAddConstraint","transformDropConstraint","transformForeignKeyConstraint","transformCreateView","transformDropView","transformGenerated","transformDefaultValue","transformOn","transformValues","transformSelectModifier","transformCreateType","transformDropType","transformExplain","transformDefaultInsertValue","transformAggregateFunction","transformOver","transformPartitionBy","transformPartitionByItem","transformSetOperation","transformBinaryOperation","transformUnaryOperation","transformUsing","transformFunction","transformCase","transformWhen","transformJSONReference","transformJSONPath","transformJSONPathLeg","transformJSONOperatorChain","transformTuple","transformMergeQuery","transformMatched","transformAddIndex","transformCast","transformFetch","transformTop","transformNodeImpl","transformNodeList","list","COMPARISON_OPERATORS","ARITHMETIC_OPERATORS","JSON_OPERATORS","BINARY_OPERATORS","UNARY_FILTER_OPERATORS","UNARY_OPERATORS","OPERATORS","isOperator","isBinaryOperator","isComparisonOperator","isArithmeticOperator","isJSONOperator","cloneWithSelections","cloneWithJoin","cloneWithReturning","cloneWithoutReturning","cloneWithoutWhere","cloneWithExplain","cloneWithTop","createWithChild","child","createWithChildren","children","fill","createSelectAll","havingNode","select","cloneWithDistinctOn","selectNode","cloneWithGroupByItems","cloneWithOffset","cloneWithFetch","cloneWithHaving","cloneWithSetOperations","cloneWithoutSelections","cloneWithoutOffset","createWithoutTable","cloneWithFromItems","updateQuery","cloneWithUpdates","whenNode","whereNode","isIsOperator","needsIsOperator","parseOperator","parseValueExpressionOrList","parseReferentialBinaryOperation","combinator","v","k","withParens","combine","nodeOrSource","SIMPLE_COLUMN_DATA_TYPES","COLUMN_DATA_TYPE_REGEX","isColumnDataType","exp","parseAliasedExpression","isExpressionOrFactory","isExpression","isAliasedExpression","parseJoin","lhsColumn","rhsColumn","parseTableExpression","parseSingleOnJoin","createJoinBuilder","parseCallbackJoin","isOrderByDirection","thing","parseOrderBy","parseOrderByItem","item","parsedRef","parseOrderByDirectionExpression","parseOrderByExpression","overNode","cloneWithPartitionByItems","JoinBuilder","onRef","onTrue","parsePartitionBy","parseReferenceExpressionOrList","OverBuilder","createQueryCreator","createOverBuilder","arg","it","referenceNode","opWithoutLastChar","parseStringReferenceWithTableAndSchema","parseStringReferenceWithTable","parseAliasedStringReference","ALIAS_SEPARATOR","columnRef","order","createSelectAllFromTable","parseSelectArg","parseSelectExpression","parseSelectAll","parseSelectAllArg","parseAliasedTable","parseTop","isTopModifiers","parseValueExpressionList","isSafeImmediateValue","ROOT_OPERATION_NODES","WithSchemaTransformer","ctes","cte","transformed","schemableIds","cteId","CaseThenBuilder","valueExpression","CaseWhenBuilder","CaseEndBuilder","endCase","aggregateFunction","cloneWithDistinct","aggregateFunctionNode","cloneWithFilter","cloneWithOrFilter","cloneWithOver","AggregateFunctionBuilder","AliasedAggregateFunctionBuilder","filterWhere","filterWhereRef","aggregateFunctionBuilder","agg","avg","coalesce","countAll","max","min","sum","any","jsonAgg","toJson","NoResultError","isNoResultErrorConstructor","prototype","hasOwnProperty","parseGroupBy","parseSetOperations","parseFetch","SelectQueryBuilderImpl","isSelectQueryBuilder","whereRef","havingRef","forUpdate","asArray","forShare","forKeyShare","forNoKeyUpdate","skipLocked","noWait","selectAll","innerJoin","leftJoin","rightJoin","fullJoin","innerJoinLateral","leftJoinLateral","union","unionAll","intersect","intersectAll","except","exceptAll","AliasedSelectQueryBuilderImpl","clearSelect","clearWhere","clearLimit","clearOffset","clearOrderBy","$if","$narrowType","$assertType","$asTuple","executeTakeFirst","executeTakeFirstOrThrow","errorConstructor","stream","chunkSize","queryBuilder","isAliasedSelectQueryBuilder","parseInsertExpression","objectOrList","cols","col","size","parseColumnNamesAndIndexes","rowColumns","rowValues","hasUndefinedOrComplexColumns","columnIdx","hasMissingColumns","parseRowValues","parseInsertColumnsAndValues","parseUpdate","parseUpdateObjectExpression","updateObj","InsertResult","insertId","numInsertedOrUpdatedRows","cloneWithIndexWhere","cloneWithIndexOrWhere","cloneWithUpdateWhere","cloneWithUpdateOrWhere","cloneWithoutIndexWhere","cloneWithoutUpdateWhere","OnConflictBuilder","columnNode","onConflictNode","columnNodes","OnConflictDoNothingBuilder","doUpdateSet","OnConflictUpdateBuilder","InsertQueryBuilder","onDuplicateKeyUpdate","returningAll","clearReturning","numAffectedRows","numUpdatedOrDeletedRows","DeleteResult","numDeletedRows","DeleteQueryBuilder","BigInt","UpdateResult","numUpdatedRows","numChangedRows","UpdateQueryBuilder","columnNames","CTEBuilder","notMaterialized","parseCommonTableExpression","nameOrBuilderCallback","expressionNode","parseCommonTableExpressionName","cteBuilderFactory","cloneWithExpression","parseMergeWhen","refRight","isMatched","parseMergeThen","MergeResult","MergeQueryBuilder","WheneableMergeQueryBuilder","whenMatched","whenMatchedAnd","whenMatchedAndRef","MatchedThenableMergeQueryBuilder","whenNotMatched","whenNotMatchedAnd","whenNotMatchedAndRef","whenNotMatchedBySource","whenNotMatchedBySourceAnd","whenNotMatchedBySourceAndRef","NotMatchedThenableMergeQueryBuilder","thenDelete","thenDoNothing","thenUpdate","thenUpdateSet","ub","thenInsertValues","selectNoFrom","insertInto","replaceInto","deleteFrom","updateTable","mergeInto","nameOrBuilder","withRecursive","NoopQueryExecutor","reason","LOGGED_MESSAGES","NO_PLUGINS","transformedNode","transformedResult","warnOfOutdatedDriverOrPlugins","connectionDefer","connectionReleaseDefer","ex","isEmpty","isBuffer","Buffer","isArrayBufferOrView","ArrayBuffer","isView","isPlainObject","getLast","asReadonlyArray","compare","obj1","obj2","arr1","arr2","compareArrays","buf1","buf2","date2","getTime","keys1","keys2","compareGenericObjects","compareObjects","clazz","defineProperties","enumerable","CHARS","LazyQueryId","chars","Math","random","randomString"],"sourceRoot":""}